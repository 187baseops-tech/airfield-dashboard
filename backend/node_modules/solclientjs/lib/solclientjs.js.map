{"version":3,"file":"solclient.js","mappings":"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,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,IAAK,IAAK,IAAK,EAAG,EAAG,EAAG,IAAK,IAAK,IAAK,GAAI,IAAK,EAAG,EAAG,EAAG,IAAK,IAAK,IAAK,GAAI,IAAK,EAAG,EAAG,EAAG,IAAK,IAAK,IAAK,GAAI,IAAK,EAAG,EAAG,EAAG,IAAK,IAAK,IAAK,GAAI,IAAK,EAAG,EAAG,EAAG,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,EAAG,EAAG,GAAI,IAAK,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,GAAI,EAAG,IAAK,GAAI,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,GAAI,EAAG,IAAK,GAAI,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,GAAI,EAAG,IAAK,GAAI,GAAI,EAAG,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,EAAG,GAAI,GAAI,IAAK,IAAK,GAAI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CE,EAAQ,MACN,qBACJ69B,GAAoB,eACpBjgE,GAAc,gBACd4jE,GAAe,uBACf48B,GAAsB,QACtBpsD,GAAO,aACPpzC,GAAY,mBACZy/F,GAAkB,iBAClBx/F,GAAgB,kBAChBm/D,GAAiB,aACjBof,GAAY,aACZl+E,IACE,EAAQ,OACN,YACJ4wE,GAAW,oBACXE,GAAmB,mBACnBjlD,GAAkB,gBAClB2H,GAAe,mBACfw9C,GAAkB,aAClBC,GAAY,uBACZC,IACE,EAAQ,OACN,SACJjxE,IACE,EAAQ,OACN,eACJ0wE,GAAc,kBACd37B,IACE,EAAQ,OACN,QACJnN,IACE,EAAQ,KAYNkrF,GAAS,CACb1qD,0BACA1J,wBACAtnB,UACAu5B,eACAE,uBACAjlD,sBACA2H,mBACAw9C,sBACAC,gBACAC,0BACAxyE,kBACA0yE,iBACAvyE,cACAm6B,kBACAj6B,eACA8vD,UACAx2B,WACA6b,OACA50C,UACAu0D,qBACAv/C,kBACAkB,iCACAhH,2BACAid,4BACAjsB,0BACAs0D,kBACAv0D,iBACAq0B,kCACAzM,6BACAm7C,mBACArqB,cACAplB,qBACAqsE,0BACA2N,sBACA7tG,iBACAo8B,kBACA3lB,eACAiW,wBACAC,yBACA28C,kBACAjtC,uBACAC,mBACAitC,kBACAqrC,YACA38B,wBACAt+C,sBAMAE,+BACA67E,4BACA2V,eACAC,mBACA1pF,WACAjM,eACAtH,kBACA6I,qBACA2K,4BACAC,wBACAgS,WACApzC,gBACAy/F,sBACAx/F,oBACAm/D,qBACAof,gBACAj9D,mBACAqb,2BACA2F,6BACAjiC,gBACAC,YACAgtD,QACAiH,eACA5c,qBACAq5B,kBACA37B,qBACAnN,WAEAvc,eAEA0nG,UA1FgB,EAAQ,OA6F1B5zI,OAAOwrB,OAAO3J,EAAO3hB,QAASyzI,G,iBCrO9B,MAAM,KAAE1pG,GAAS,EAAQ,MAgIzBpoB,EAAO3hB,QAAQq1C,aAAetL,EAAKE,IAxHd,CAKnBsL,KAAa,EAKbC,MAAa,EAKbC,KAAa,EAKbC,OAAa,EAKbC,MAAa,EAKbC,OAAa,EAKbC,MAAa,EAObC,OAAa,EAObC,MAAa,EAKbC,MAAa,EAKbC,OAAa,GAkBbC,UAAa,GAKbC,UAAa,GAKbC,WAAa,GAKbK,IAAa,GAKbE,OAAa,GAKbE,YAAa,GAKb2wC,SAAa,GAKbS,QAAa,GAKbD,YAAa,I,iBC7Hf,MAAM,KAAEj+C,GAAS,EAAQ,MAWzBpoB,EAAO3hB,QAAQ2tG,mBAAqB5jE,EAAKE,IALd,CACzB2jE,QAAS,EACT5jF,GAAS,G,WCFX,SAAS2pH,EAAaC,EAAMC,GAI1B,OAHAA,EAAK3lH,QAAS88C,IACZ4oE,EAAKjrI,IAAIqiE,KAEJ4oE,CACT,CA8BAjyH,EAAO3hB,QAAU,CACfqxI,cAAe,CACbyC,kBAbJ,SAA2BF,EAAMC,GAI/B,OAHAA,EAAK3lH,QAAS88C,IACZ4oE,EAAK/jH,OAAOm7C,KAEP4oE,CACT,EASIG,oBA3BJ,SAA6BH,EAAMC,GAMjC,OALAD,EAAK1lH,QAAS88C,IACP6oE,EAAKrkH,IAAIw7C,IACZ4oE,EAAK/jH,OAAOm7C,KAGT4oE,CACT,EAqBID,eACAK,WA5CJ,SAAoB/sI,EAAKgtI,GACvB,OAAOphI,MAAMyyC,KAAK2uF,GAAQpM,MAAM78D,GAAQ/jE,EAAIuoB,IAAIw7C,GAClD,EA2CIkpE,WAVJ,SAAoBN,EAAMC,GACxB,OAAO,IAAIzjH,IAAIvd,MAAMyyC,KAAKsuF,GAAMr1H,OAAOysD,IAAS6oE,EAAKrkH,IAAIw7C,IAC3D,EASImpE,aAtBJ,SAAsBP,EAAMC,GAC1B,OAAO,IAAIzjH,IAAIvd,MAAMyyC,KAAKsuF,GAAMr1H,OAAOysD,GAAQ6oE,EAAKrkH,IAAIw7C,IAC1D,EAqBIopE,MApCJ,SAAeR,EAAMC,GACnB,OAAOF,EAAa,IAAIvjH,IAAIwjH,GAAOC,EACrC,G,iBCfA,MAAM,oBAAErlC,GAAwB,EAAQ,OAClC,gBAAED,GAAoB,EAAQ,OAC9B,gBAAE9G,GAAoB,EAAQ,OAC9B,iBAAEgH,GAAqB,EAAQ,MAErC9sF,EAAO3hB,QAAQuuG,gBAAkBA,EACjC5sF,EAAO3hB,QAAQwuG,oBAAsBA,EACrC7sF,EAAO3hB,QAAQyuG,iBAAmBA,EAClC9sF,EAAO3hB,QAAQynG,gBAAkBA,C,iBCRjC,MAAM7yC,EAAO,EAAQ,OAEf,aAAEn1C,EAAY,eAAEC,GAAmB,EAAQ,MAG3CuzE,EAAa,cAabohD,EAAiBj9H,OAAOC,aAAa,EAAG,GACxCi9H,EAAmBl9H,OAAOC,aAAa,EAAG,EAAG,GAC7Ck9H,EAAkBn9H,OAAOC,aAAa,EAAG,EAAG,EAAG,GAE/Cm9H,EAA0B,KAG1BC,EAA6B,MAiBnC,SAASv8E,EAAmBxlD,GAC1B,MAAMyyC,EAAazyC,EAAKtP,OAClBsxI,EAAW,IAAI90C,YAAYz6C,GAC3BwvF,EAAa,IAAIlzI,WAAWizI,EAAU,EAAGvvF,GAC/C,IAAK,IAAI9iD,EAAI,EAAGA,EAAI8iD,EAAY9iD,IAC9BsyI,EAAWtyI,GAAKqQ,EAAKa,WAAWlR,GAElC,OAAOsyI,CACT,CAmDA,SAAS12F,EAAW22F,GAMlB,GAAc,IAAVA,EAAa,OAAOL,EACxB,GAAIK,EAAQ,EAAG,CACb,GAAIA,EAAQ,IACV,OAAON,EAAmBl9H,OAAOC,aAAau9H,GAEhD,GAAIA,EAAQ,MACV,OAAOP,EAAiBj9H,OAAOC,aAAau9H,GAAS,GAAKx9H,OAAOC,aAAqB,IAARu9H,EAElF,CAEA,OACIx9H,OAAOC,aAAcu9H,GAAS,GAAM,KACpCx9H,OAAOC,aAAcu9H,GAAS,GAAM,KACpCx9H,OAAOC,aAAcu9H,GAAS,EAAK,KACnCx9H,OAAOC,aAAqB,IAARu9H,EAE1B,CAmGA,SAASC,EAAYniI,GAGnB,OA1MyB,SA2MpBA,EAAKa,WAAW,IAChBb,EAAKa,WAAW,IAAM,KACtBb,EAAKa,WAAW,IAAM,GACtBb,EAAKa,WAAW,EAEvB,CAyCA,MAAM0N,EAAU,CACdu3G,oBArNF,SAA6Bsc,GAC3B,IAAKA,EAAI,MAAO,GAChB,MAAMnoI,EAAMmoI,EAAG7uF,WACTzkD,EAAK,IAAIC,WAAWqzI,GAC1B,GAAInoI,EAAM8nI,EACR,OAAOr9H,OAAOC,aAAahB,MAAM,KAAM7U,GAGzC,IAAIwN,EAAI,EACJ1M,EAAI,GACR,KAAO0M,EAAIrC,GAETrK,GAAK8U,OAAOC,aAAahB,MAAM,KAAM7U,EAAGmD,SAASqK,EAAGA,EAAIylI,IACxDzlI,GAAKylI,EAEP,OAAOnyI,CACT,EAsMEyyI,oBApMF,SAA6Bt9H,GAC3B,OAAOygD,EAAmBzgD,GAAK3G,MACjC,EAoMEs+F,mBAxPF,SAA4B18F,EAAM23C,OAAS9jC,GACzC,MAAM4+B,EAAazyC,EAAKuzC,WAClB+uF,EAAiB,IAAIvzI,WAAWwxF,EAAW3tC,KAAK5yC,IACtD,IAAI2qB,EAAS,GACb,IAAK,IAAIh7B,EAAI,EAAGA,EAAI8iD,EAAY9iD,IAC3BgoD,GAAmC,QAAzBA,EAAO2G,cAClB3zB,GAAW23G,EAAe3yI,GAAI0N,SAAS,IAAIklI,SAAS,EAAG,KAEvD53G,GAAUjmB,OAAOC,aAAiC,IAApB29H,EAAe3yI,IAGjD,OAAOg7B,CACT,EA6OE66B,qBAEAs1D,sBAnOF,SAA+B96G,GAE7B,OAAW,MAARA,EACM,IAAIjR,WAENA,WAAW6jD,KAAK2tC,EAAW3tC,KAAK5yC,EAAM,OAC/C,EA+NEorC,UAvMF,SAAmBo3F,GACjB,OAAO99H,OAAOC,aAAoB,IAAP69H,EAC7B,EAsME1W,UAzFF,SAAmB9rH,GACjB,OAA4B,IAArBA,EAAKa,WAAW,EACzB,EAyFEwqC,WAtMF,SAAoBo3F,GAClB,OACI/9H,OAAOC,aAAc89H,GAAS,EAAK,KACnC/9H,OAAOC,aAAqB,IAAR89H,EAE1B,EAkME1W,WAxFF,SAAoB/rH,GAClB,OACKA,EAAKa,WAAW,IAAM,GACtBb,EAAKa,WAAW,EAEvB,EAqFEyqC,WAlMF,SAAoBo3F,GAClB,OACIh+H,OAAOC,aAAc+9H,GAAS,GAAM,KACpCh+H,OAAOC,aAAc+9H,GAAS,EAAK,KACnCh+H,OAAOC,aAAqB,IAAR+9H,EAE1B,EA6LEC,WApFF,SAAoB3iI,GAClB,OACKA,EAAKa,WAAW,IAAM,KACtBb,EAAKa,WAAW,IAAM,GACtBb,EAAKa,WAAW,EAEvB,EAgFE0qC,aACAygF,WA/EF,SAAoBhsH,GAElB,OACKA,EAAKa,WAAW,IAAM,KACtBb,EAAKa,WAAW,IAAM,KACtBb,EAAKa,WAAW,IAAM,GACtBb,EAAKa,WAAW,EAEvB,EAwEEshI,cAEAt0E,WAzKF,SAAoB+0E,GAClB,GAAqB,iBAAVA,EACT,OAAOr3F,EAAWq3F,EAAMr9B,MAAQh6D,EAAWq3F,EAAMt9B,KAOnD,GAAIs9B,GAAS,EAAG,CACd,GAAIA,EAAQ,IACV,OAAOf,EAAkBD,EAAmBl9H,OAAOC,aAAai+H,GAElE,GAAIA,EAAQ,MACV,OAAOf,EAAkBF,EACvBj9H,OAAOC,aAAai+H,GAAS,GAAKl+H,OAAOC,aAAqB,IAARi+H,GAE1D,GAAIA,EAAQ,WACV,OAAOf,GAAmBn9H,OAAOC,aAAci+H,GAAS,GAAM,KAC5Dl+H,OAAOC,aAAci+H,GAAS,GAAM,KACpCl+H,OAAOC,aAAci+H,GAAS,EAAK,KACnCl+H,OAAOC,aAAqB,IAARi+H,GAE1B,CACA,OAAOl+H,OAAOC,aAAci+H,GAAS,GAAM,KACrCl+H,OAAOC,aAAci+H,GAAS,GAAM,KACpCl+H,OAAOC,aAAci+H,GAAS,GAAM,KACpCl+H,OAAOC,aAAci+H,GAAS,GAAM,KACpCl+H,OAAOC,aAAci+H,GAAS,GAAM,KACpCl+H,OAAOC,aAAci+H,GAAS,GAAM,KACpCl+H,OAAOC,aAAci+H,GAAS,EAAK,KACnCl+H,OAAOC,aAAqB,IAARi+H,EAC5B,EA0IEC,YA9DF,SAAqB7iI,GACnB,OAAOkiD,EAAK+jD,SAASk8B,EAAYniI,EAAK24B,OAAO,EAAG,IAC3BwpG,EAAYniI,EAAK24B,OAAO,EAAG,KAC3B,EACvB,EA4DEmqG,eA1IF,SAAwBC,GACtB,MAAM9oI,EAAM8oI,EAAUryI,OACtB,GAAIuJ,EAAM6nI,EACR,OAAOp9H,OAAOC,aAAahB,MAAM,KAAMo/H,GAGzC,IAAIzmI,EAAI,EACJ1M,EAAI,GAER,KAAO0M,EAAIrC,GAETrK,GAAK8U,OAAOC,aAAahB,MAAM,KAAMo/H,EAAUnsI,MAAM0F,EAAGA,EAAIwlI,IAC5DxlI,GAAKwlI,EAGP,OAAOlyI,CACT,EA2HEwwF,eAzHF,SAAwBr7E,GACtB,MAAM4lB,EAAS,GACf,IAAIh7B,EACJ,IAAKA,EAAI,EAAGA,EAAIoV,EAAIrU,OAAQf,IAC1Bg7B,EAAOh7B,GAAKoV,EAAIlE,WAAWlR,GAE7B,OAAOg7B,CACT,EAoHE01D,cAlHF,SAAuBt7E,GAIrB,OAAO5E,MAAM5R,UAAU20B,IAAI10B,KAAKuW,EAAIrH,MAAM,IAH1C,SAAehQ,GACb,OAAOA,EAAEmT,WAAW,GAAGxD,SAAS,GAClC,EAEF,EA+GE6pC,WA/DF,SAAoB87F,GAClB,OAAO/4D,SAASC,mBAAmB84D,GACrC,EA8DE77F,WA5DF,SAAoB87F,GAClB,OAAOC,mBAAmBC,OAAOF,GACnC,EA2DEz0H,iBAzDF,SAA0BjhB,GACxB,GAAIgzF,EAAW0M,SAAS1/F,GACtB,OAAOA,EAET,GAAqB,iBAAVA,EACT,OAAOgzF,EAAW3tC,KAAKrlD,EAAO,UAEhC,GAAIA,aAAiB2/F,YACnB,OAAO3M,EAAW3tC,KAAKrlD,GAGzB,GAAIA,EAAM6Q,kBAAkB8uF,aACE,iBAArB3/F,EAAMgmD,YACe,iBAArBhmD,EAAM28F,WACb,OAAyB,IAArB38F,EAAM28F,YAAoB38F,EAAMgmD,aAAehmD,EAAM6Q,OAAOm1C,WAEvDgtC,EAAW3tC,KAAKrlD,EAAM6Q,QAExBmiF,EAAW3tC,KAAKrlD,EAAM6Q,OAAQ7Q,EAAM28F,WAAY38F,EAAMgmD,YAE/D,MAAM,IAAIvmC,EAAe,oCACvBD,EAAa0zB,uBACb,gGACJ,GAqCAxxB,EAAO3hB,QAAQihB,QAAUA,C,iBCnTzB,MAAM2zC,EAAO,EAAQ,OACf,UACJpyC,EAAS,UACT6O,EAAS,SACT5O,EAAQ,UACRF,GACE,EAAQ,OACN,OAAE2sF,EAAM,KAAEzxD,GAAS,EAAQ,OAC3B,WAAE8B,GAAe,EAAQ,MACzB,UAAEu9C,GAAc,EAAQ,OACxB,iBAAE2D,EAAgB,yBAAEC,GAA6B,EAAQ,OAG7DzpF,OAAQ6+H,GACN5mC,GAEFlvD,IAAK57C,GACHq5C,EAEJ,SAAS25C,EAAqB13C,EAASrqC,GAErC,QADkBqqC,EAAQt8C,OAASiS,EACnB,GAKlB,CAEA,SAASgiF,EAAiB33C,EAASrqC,GACjC,IAAK+hF,EAAqB13C,EAASrqC,GACjC,OAAO,EAET,MAAM+1B,EAAsC,EAA5BsU,EAAQC,UAAUtqC,GAClC,OAAgB,IAAZ+1B,IACF/Z,EAAU,8CAA8C+Z,MACjD,EAGX,CAqBA,SAAS2qG,EAAuB/oH,EAAW0yB,EAASrqC,EAAQ2gI,GAE1D,IAAI7uI,EAAMkO,EACV,KAAOlO,EAAMkO,EAAS2gI,GAAW,CAC/B,GAAI7uI,EAAM,EAAIkO,EAAS2gI,EAAW,CAChC3kH,EAAU,iDACV,KACF,CAMA,MAAMstB,EAAQe,EAAQC,UAAUx4C,GAC1Bi6C,EAAQ1B,EAAQC,UAAUx4C,EAAM,GAChC8uI,EAAM7xI,EAAKu6C,EAAO,EAAG,GACrBsC,EAAa78C,EAAKu6C,EAAO,EAAG,GAC5Bh3C,GAAQvD,EAAKu6C,EAAO,EAAG,IAAM,GAAKyC,EACxCj6C,GAAO,EACP,MAAM65C,EAAgB,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACnD,IAAI2hC,EAAW,EAEf,GAAI7iF,OAAOmB,UAAUu1B,eAAet1B,KAAK8/C,EAAeC,GACtD0hC,EAAW3hC,EAAcC,QACpB,GAAmB,IAAfA,EAET0hC,EAAWjjC,EAAQC,UAAUx4C,GAAO,EACpCA,QACK,IAAmB,IAAf85C,EAOT,OAFA5vB,EAAU,uBAAuB4vB,gCAAyCt5C,MAEnE,EALPg7E,EAAWjjC,EAAQY,aAAan5C,GAAO,EACvCA,GAAO,CAKT,CAEA,OAAQQ,GACN,KAAK84F,EAAiB6yC,oBACpBtmH,EAAU4wC,sBAAwBle,EAAQ6hB,aAAap6D,GACvD,MACF,KAAKs5F,EAAiB2yC,qBACpBpmH,EAAU6wC,wBAA0BjJ,EAAK+jD,SAASj5D,EAAQ6hB,aAAap6D,EAAM,GAC3Bu4C,EAAQ6hB,aAAap6D,IACrB,GAClD,MACF,KAAKs5F,EAAiB0yC,kBACpBnmH,EAAUixC,+BAAiCrJ,EAAK+jD,SAASj5D,EAAQ6hB,aAAap6D,EAAM,GAC3Bu4C,EAAQ6hB,aAAap6D,IACrB,GACzD,MACF,KAAKs5F,EAAiB4yC,uBACpBrmH,EAAU+wC,sCACPnJ,EAAK+jD,SAASj5D,EAAQ6hB,aAAap6D,EAAM,GAC3Bu4C,EAAQ6hB,aAAap6D,IACrB,GACjB,MACF,KAAKu5F,EAAyB2T,qBAGzB1xB,GAAY,KAEb31D,EAAUsxC,wBAA0B5e,EAAQ3vC,SAAS,SAAU5I,EAAKA,EAAMw7E,IAK5E,MACF,QACc,IAARszD,IAIFjpH,EAAUgP,gBAAiB,GAMjC70B,GAAOw7E,CACT,CAIA,OAHIx7E,EAAMkO,EAAS2gI,GACjB3kH,EAAU,gEAAgElqB,GAAOkO,EAAS2gI,QAErF,CAET,CAmPA,MAAM39E,EAAW,CACf++B,uBACAC,mBACA6+C,eAhWF,SAAwBx2F,EAASrqC,GAC/B,IAAKgiF,EAAiB33C,EAASrqC,GAC7B,OAAO,EAET,MAAMg8G,EAAY3xE,EAAQt8C,OAASiS,EAEnC,OADiBqqC,EAAQ6hB,aAAalsD,EAAS,IAC3Bg8G,CACtB,EA0VE/4D,WA7OF,SAAoB5Y,EAASrqC,EAAQ8gI,GAAiB,GACpD,IAAK9+C,EAAiB33C,EAASrqC,GAE7B,OAAO,KAET,IAAIlO,EAAMkO,EAGV,MAAM+gI,EAAQ12F,EAAQ6hB,aAAap6D,GAC7BkvI,EAAY32F,EAAQ6hB,aAAap6D,EAAM,GACvCmvI,EAAQ52F,EAAQ6hB,aAAap6D,EAAM,GAEnC6lB,EAAY,IAAI8vE,EACtB9vE,EAAU0Y,OAASthC,EAAKgyI,EAAO,GAAI,GACnCppH,EAAUovC,oBAAsBh4D,EAAKgyI,EAAO,GAAI,GAChDppH,EAAU6uC,QAAUz3D,EAAKgyI,EAAO,GAAI,GACpCppH,EAAUqP,QAAUj4B,EAAKgyI,EAAO,GAAI,GACpCppH,EAAUsvC,6BAA+Bl4D,EAAKgyI,EAAO,GAAI,GACzDppH,EAAUolF,YAAchuG,EAAKgyI,EAAO,GAAI,GACxCppH,EAAU+xE,OAAS36F,EAAKgyI,EAAO,GAAI,GACnCppH,EAAUkP,aAAe93B,EAAKgyI,EAAO,GAAI,GACzCppH,EAAUwvC,aAAep4D,EAAKgyI,EAAO,GAAI,GACzCppH,EAAUqlF,QAAUjuG,EAAKgyI,EAAO,EAAG,GAEnC,MAAMl0F,EAAao0F,EAAQD,EAC3B,GAAIn0F,EAAa,EAEf,OADA7wB,EAAU,iCACH,KAGT,GADArE,EAAU0nF,gBAAgB2hC,EAAWn0F,GACjCi0F,EACF,OAAOnpH,EAET7lB,GAAO,GAGP,MAAM0B,EAAMwM,EAASghI,EACrB,KAAOlvI,EAAM0B,GAAK,CAChB,MAAM0tI,EAAa72F,EAAQC,UAAUx4C,KACnCA,EAEF,MAAMqvI,EAAQpyI,EAAKmyI,EAAY,EAAG,GAElC,GADuD,IAA3BnyI,EAAKmyI,EAAY,EAAG,GACxB,CAEtB,MAAME,EAAUryI,EAAKmyI,EAAY,EAAG,GAC9BG,EAAStyI,EAAKmyI,EAAY,EAAG,GAAK,EAClCI,EAAcD,EAAS,EAC7B,GAAIA,GAAU,EAEZ,OADArlH,EAAU,wCACH,KAGT,OAAQolH,GACN,KAAKh2C,EAAiBkS,kBACpB3lF,EAAUwM,WAAakmB,EAAQa,WAAWp5C,EAAK,GAC/C,MACF,KAAKs5F,EAAiBgS,wBACpB,CACE,MAAMmkC,EAAqBr3F,EAAWs3F,uBAAuBn3F,EAASv4C,GACtE6lB,EAAUikF,gBAAkB2lC,EAAmB,GAC/C5pH,EAAUgkF,aAAe4lC,EAAmB,GAC5C,KACF,CACF,KAAKn2C,EAAiB8R,wBACpB,CACE,MAAMukC,EAAqBv3F,EAAWs3F,uBAAuBn3F,EAASv4C,GACtE6lB,EAAU0lF,gBAAkBokC,EAAmB,GAC/C9pH,EAAUwlF,aAAeskC,EAAmB,GAC5C,KACF,CACF,KAAKr2C,EAAiBmS,sBACpB5lF,EAAU+jF,eAAiBrxD,EAAQC,UAAUx4C,GAC7C,MACF,QACgB,IAAVqvI,IAMFxpH,EAAUgP,gBAAiB,GAIjC70B,GAAOwvI,CACT,KAAO,CAEL,MAAMI,EAAS5vI,EACT6vI,EAAQ5yI,EAAKmyI,EAAY,EAAG,GAClC,GAAc,IAAVS,EACF,MAGF,IAEIC,EAFAC,EAAOx3F,EAAQC,UAAUx4C,GAa7B,GAZAA,IAEa,IAAT+vI,GAGFA,EAAOx3F,EAAQ6hB,aAAap6D,GAC5BA,GAAO,EACP8vI,EAAYC,EAAO,GAEnBD,EAAYC,EAAO,EAGjBA,GAAQ,EAGV,OAFA7lH,EAAU,oCAAoC6lH,KAAQD,uBACtBx2C,EAAiBv2E,SAAS8sH,+BAAmCD,KACtF,KAGT,OAAQC,GACN,KAAKv2C,EAAiBl9B,aAIpB,MACF,KAAKk9B,EAAiBkT,gBACpB3mF,EAAUwwC,qBAAuB5I,EAAK+jD,SAASj5D,EAAQ6hB,aAAap6D,EAAM,GAC3Bu4C,EAAQ6hB,aAAap6D,IACrB,GAC/C,MACF,KAAKs5F,EAAiBoS,gBACpB7lF,EAAU0vC,gBAAkBhd,EAAQC,UAAUx4C,GAC9C,MACF,KAAKs5F,EAAiBqS,SACpB9lF,EAAU2vC,YAAcjd,EAAQ3vC,SAAS,SAAU5I,EAAKA,EAAM8vI,GAC9D,MACF,KAAKx2C,EAAiBuS,SAEpBhmF,EAAU+lF,YAAc+iC,EAAap2F,EAAQ3vC,SAAS,SAAU5I,EAAKA,EAAM8vI,IAC3E,MACF,KAAKx2C,EAAiByS,SAEpBlmF,EAAUimF,YAAc6iC,EAAap2F,EAAQ3vC,SAAS,SAAU5I,EAAKA,EAAM8vI,IAC3E,MACF,KAAKx2C,EAAiB0S,SACpB,CACE,MAAMjd,EAAiB32C,EAAW43F,mBAAmBz3F,EAASv4C,EAAK8vI,GACnEjqH,EAAUG,YAAc+oE,EAAe,GACvClpE,EAAUK,WAAa6oE,EAAe,GACtC,KACF,CACF,KAAKuK,EAAiBsyC,YACtB,KAAKtyC,EAAiBuyC,mBACtB,KAAKvyC,EAAiBrhD,kBACpB38B,EAAS,sCAET,MACF,KAAKg+E,EAAiB2S,cAWhBpmF,EAAUqP,UACZrP,EAAUmY,gBAAkBoa,EAAW63F,kBAAkB13F,EAASv4C,IAEpE,MACF,KAAKs5F,EAAiB4S,mBACpBrmF,EAAUkwC,YAActI,EAAK+jD,SAASj5D,EAAQ6hB,aAAap6D,EAAM,GAC3Bu4C,EAAQ6hB,aAAap6D,IACrB,GACtC,MACF,KAAKs5F,EAAiB6S,uBACpBtmF,EAAUowC,gBAAkBxI,EAAK+jD,SAASj5D,EAAQ6hB,aAAap6D,EAAM,GAC3Bu4C,EAAQ6hB,aAAap6D,IACrB,GAC1C,MACF,KAAKs5F,EAAiB+S,yBACpBxmF,EAAU8vC,iBAAkB,EAC5B,MACF,KAAK2jC,EAAiBgT,cACpBzmF,EAAUmxC,UAAYvJ,EAAK+jD,SAASj5D,EAAQ6hB,aAAap6D,EAAM,GAC3Bu4C,EAAQ6hB,aAAap6D,IACrB,GACpC,MACF,KAAKs5F,EAAiByyC,wBACpBlmH,EAAU0wC,0BAA4B9I,EAAK+jD,SAASj5D,EAAQ6hB,aAAap6D,EAAM,GAC3Bu4C,EAAQ6hB,aAAap6D,IACrB,GACpD,MACF,KAAKs5F,EAAiBmT,wBACpB,CACE,MAAMyjC,EAAiB93F,EAAW+3F,oBAAoB53F,EAASv4C,EAAK8vI,GACpE,IAAKI,EAEH,OADAhmH,EAAU,sCAAsClqB,UAAY8vI,MACrD,EAETjqH,EAAUyxC,mBAAqB44E,EAC/B,KACF,CACF,KAAK52C,EAAiB8S,eACpBvmF,EAAU6N,aAAe6kB,EAAQ6hB,aAAap6D,GAC9C,MACF,KAAKs5F,EAAiB6R,aAEpBtlF,EAAU6O,sBAAwB6jB,EAAQ3vC,SAAS,SAAU5I,EAAKA,EAAM8vI,GACxE,MACF,KAAKx2C,EAAiBwyC,wBACpBjmH,EAAU+vC,qBAAsB,EAChC,MACF,KAAK0jC,EAAiB6T,qBAEpB,IADmByhC,EAAuB/oH,EAAW0yB,EAASv4C,EAAK8vI,GAChD,OAAO,KAC1B,MAEF,QACgB,IAAVT,IAMFxpH,EAAUgP,gBAAiB,GAKjC70B,GAAO8vI,CACT,CACF,CAEA,OAAOjqH,CACT,GASArL,EAAO3hB,QAAQq4D,SAAWA,C,WC1X1B12C,EAAO3hB,QAAQsf,kBAlBf,MAUE,WAAAvO,CAAYmgB,EAAgBI,EAAOsG,EAAgB+B,GACjD/lB,KAAKsd,eAAiBA,EACtBtd,KAAK0d,MAAQA,EACb1d,KAAKgkB,eAAiBA,EACtBhkB,KAAK+lB,kBAAoBA,CAC3B,E,wBCfFhY,EAAO3hB,QAAUssC,QAAQ,iB,WCWzB3qB,EAAO3hB,QAAQ0pE,qBAPf,MACE,WAAA34D,GACE6C,KAAK4rB,aAAe,EACpB5rB,KAAK0rB,WAAa,CACpB,E,iBCRF,MAAM,UAAElE,GAAc,EAAQ,OACxB,sBAAEotB,GAA0B,EAAQ,OACpC,eAAE6oC,GAAmB,EAAQ,OAC7B,iBAAE7yD,GAAqB,EAAQ,OAC/B,kBAAEk3B,GAAsB,EAAQ,OAChC,oBAAE3rC,GAAwB,EAAQ,OAClC,0BAAE2T,GAA8B,EAAQ,OACxC,uBAAE65G,GAA2B,EAAQ,MAG3C51H,EAAO3hB,QAAQo7B,UAAYA,EAC3BzZ,EAAO3hB,QAAQwoD,sBAAwBA,EACvC7mC,EAAO3hB,QAAQqxF,eAAiBA,EAChC1vE,EAAO3hB,QAAQw+B,iBAAmBA,EAClC7c,EAAO3hB,QAAQ01D,kBAAoBA,EACnC/zC,EAAO3hB,QAAQ+pB,oBAAsBA,EACrCpI,EAAO3hB,QAAQ09B,0BAA4BA,EAC3C/b,EAAO3hB,QAAQu3I,uBAAyBA,C,uCCjBxC,MAAM,aAAE93H,EAAY,eACZC,EAAc,aACdqrH,EAAY,iBACZC,GAAqB,EAAQ,OAC/B,iBAAE3qH,GAAqB,EAAQ,MAErC,SAASm3H,EAAUC,GAQjB,MAAMr3H,UAAqBq3H,EAYzB,WAAA1mI,CAAY2mI,EACA3vF,EACAvqB,EACAtW,OAAeX,EACfY,EAAe,EACfyQ,OAAiBrR,EACjB4a,OAAS5a,GACnBtE,SAASy1H,GACT9jI,KAAK+jI,kBAAoB5vF,EACzBn0C,KAAKsrF,SAAW1hE,EAChB5pB,KAAKqX,cAAgB/D,EACrBtT,KAAKurF,cAAgBh4E,EACrBvT,KAAK+iE,gBAAkB/+C,EACvBhkB,KAAKwrF,QAAUj+D,CACjB,CAMA,oBAAI4mB,GACF,OAAOn0C,KAAK+jI,iBACd,CAMA,WAAIn6G,GACF,OAAO5pB,KAAKsrF,QACd,CAMA,gBAAIh4E,GACF,OAAOtT,KAAKqX,aACd,CAMA,gBAAI9D,GAEF,OAAOvT,KAAK2V,SAAW3V,KAAKurF,aAC9B,CAOA,gBAAIy4C,GACF,OAAOhkI,KAAKuT,YACd,CAUA,kBAAIyQ,GACF,OAAOhkB,KAAK+iE,eACd,CAOA,UAAIx1C,GACF,OAAOvtB,KAAKwrF,OACd,CAKA,UAAIj+D,CAAOlhC,GACT2T,KAAKwrF,QAAUn/F,CACjB,CAEA,CAAC,4CAEC,OAAOH,OAAOwrB,OAAOrJ,MAAM,2CAAwB,CAAC,EAAG,CACrD,iBAAoB5B,EAAiB6J,SAAStW,KAAKm0C,kBACnD,QAAoBn0C,KAAK4pB,QACzB,aAAoB5pB,KAAKsT,aACzB,aAAoBzH,EAAayK,SAAStW,KAAKuT,cAC/C,eAAoBvT,KAAKgkB,eAAiBhkB,KAAKgkB,eAAe7nB,WAAa,KAC3E,OAAoB6D,KAAKutB,OAASvtB,KAAKutB,OAAS,MAEpD,CAEA,QAAApxB,GACE,OAAO45B,EAAa/1B,KACtB,EAGF,OAAOwM,CACT,CAEA,MAAMy3H,EAA+B,CACnC,CAACx3H,EAAiBoH,sBAAoC/H,EACtD,CAACW,EAAiBwG,YAAoCnH,EACtD,CAACW,EAAiBsU,mCAAoCjV,EACtD,CAACW,EAAiBqb,uBAAoCqvG,EACtD,CAAC1qH,EAAiB6T,wBAAoC62G,EACtD,CAAC1qH,EAAiBw3G,oBAAoCkT,EACtD,CAAC1qH,EAAiB83G,4BAAoCz4G,EACtD,CAACsrH,EAAiBjT,iBAAoCgT,EACtD,CAACC,EAAiBhT,iBAAoC+S,GAGlD+M,GAAkB,IAAIh1D,KACzB77E,IAAInH,OAAQ,IAAM,IAClBmH,IAAIyY,EAAgB,CAACq4H,EAAKv6G,EAASvR,EAAI1C,EAASyuH,EAAI72G,IAAW,CAAC3D,EAASjU,EAAS4X,IAClFl6B,IAAI8jI,EAAc,CAACgN,EAAKv6G,EAASvR,EAAI1C,EAASyuH,EAAI72G,IAAW,CAAC3D,EAASu6G,EAAKC,EAAI72G,IAE7E82G,EAAa,IAAIn1D,IAiCvB,MAAM1iE,EAAeo3H,EAAU13I,QAC/BsgB,EAAamH,MAhCb,SAAewgC,EACAvqB,EACAtW,OAAeX,EACfY,EAAe,EACfyQ,OAAiBrR,EACjB4a,OAAS5a,GACtB,MAAMkxH,EAAaI,EAA6B9vF,IAAqBjoD,OAerE,OAAO,IAdc,MACnB,IAAIu9B,EAAS46G,EAAWj4F,IAAIy3F,GAC5B,OAAIp6G,IACJA,EAASm6G,EAAUC,GACnBQ,EAAWhxI,IAAIwwI,EAAYp6G,GACpBA,EACR,EANoB,GAcd,EAPwBy6G,EAAgB93F,IAAIy3F,IAAe,KAAO,KAC5B1vF,EACAvqB,EACAtW,EACAC,EACAyQ,EACAuJ,GAErB4mB,EACAvqB,EACAtW,EACAC,EACAyQ,EACAuJ,EAC1B,EAMAxf,EAAO3hB,QAAQogB,aAAeA,C,8BCvL9B,MAAM,WAAEowG,GAAe,EAAQ,MA2D/B7uG,EAAO3hB,QAAU,CAAEsqD,MAlDnB,SAAe9vC,GACb,MAAMqwC,EAAY,IAAIz6B,IACtB,IAAIjuB,GAAS,EACT0G,GAAO,EACPxG,EAAI,EAER,KAAQA,EAAImY,EAAOpX,OAAQf,IAAK,CAC9B,MAAM2D,EAAOwU,EAAOjH,WAAWlR,GAE/B,IAAa,IAATwG,GAAmC,IAArB2nH,EAAWxqH,IACZ,IAAX7D,IAAcA,EAAQE,QACrB,GACC,IAANA,GACU,KAAT2D,GAAoC,IAATA,EAGvB,IAAa,KAATA,EAgBT,MAAM,IAAIkpD,YAAY,iCAAiC7sD,KAhBrB,CAClC,IAAe,IAAXF,EACF,MAAM,IAAI+sD,YAAY,iCAAiC7sD,MAG5C,IAATwG,IAAYA,EAAMxG,GAEtB,MAAM+pD,EAAW5xC,EAAOlR,MAAMnH,EAAO0G,GAErC,GAAIgiD,EAAUr7B,IAAI48B,GAChB,MAAM,IAAI8C,YAAY,QAAQ9C,gCAGhCvB,EAAUliD,IAAIyjD,GACdjqD,EAAQ0G,GAAO,CACjB,CAEA,MAlBe,IAATA,IAAyB,IAAX1G,IAAc0G,EAAMxG,EAmB1C,CAEA,IAAe,IAAXF,IAAyB,IAAT0G,EAClB,MAAM,IAAIqmD,YAAY,2BAGxB,MAAM9C,EAAW5xC,EAAOlR,MAAMnH,EAAOE,GAErC,GAAIwoD,EAAUr7B,IAAI48B,GAChB,MAAM,IAAI8C,YAAY,QAAQ9C,gCAIhC,OADAvB,EAAUliD,IAAIyjD,GACPvB,CACT,E,iBC3DA,MAAM,kBAAErwB,GAAsB,EAAQ,OAChC,gBAAEknB,GAAoB,EAAQ,MAC9B,kBAAE1e,GAAsB,EAAQ,OAChC,iBAAEtD,GAAqB,EAAQ,OAC/B,UAAEo9D,GAAc,EAAQ,OACxB,aAAE7oC,GAAiB,EAAQ,OAC3B,MAAErW,GAAU,EAAQ,OACpB,WAAEva,GAAe,EAAQ,OACzB,oBAAE8/C,GAAwB,EAAQ,MAExCxhE,EAAO3hB,QAAQw6B,kBAAoBA,EACnC7Y,EAAO3hB,QAAQ0hD,gBAAkBA,EACjC//B,EAAO3hB,QAAQgjC,kBAAoBA,EACnCrhB,EAAO3hB,QAAQ0/B,iBAAmBA,EAClC/d,EAAO3hB,QAAQ88F,UAAYA,EAC3Bn7E,EAAO3hB,QAAQi0D,aAAeA,EAC9BtyC,EAAO3hB,QAAQ49C,MAAQA,EACvBj8B,EAAO3hB,QAAQqjC,WAAaA,EAC5B1hB,EAAO3hB,QAAQmjF,oBAAsBA,C,iBClBrC,MAAM,KAAEp5C,GAAS,EAAQ,MAgBzBpoB,EAAO3hB,QAAQ29C,mBAAqB5T,EAAKE,IARd,CACzBiV,SAAmB,EACnBC,YAAmB,EACnBC,kBAAmB,EACnBC,SAAmB,EACnBC,gBAAmB,G,iBCbrB,MAAM,cAAEmD,GAAkB,EAAQ,MAC5B,gBAAE/I,GAAoB,EAAQ,OAC9B,eAAEh6B,EAAc,aAAED,GAAiB,EAAQ,OAC3C,UAAE60G,GAAc,EAAQ,MAExBz/D,EAAW,CACfyuE,SAAS,EACT37H,UAAS4e,GAGL2xH,EAAmB,CACvB,CAAC5jB,EAAUt6E,OAAiB,QAC5B,CAACs6E,EAAUa,gBAAiB,kBAGxBgjB,EAAqC,CACzC,CAACz+F,EAAgByB,OAAkB,KACnC,CAACzB,EAAgBM,OAAkBs6E,EAAUt6E,MAC7C,CAACN,EAAgBO,iBAAkBq6E,EAAUt6E,OA8B/C,MAAM+uC,UAAgCtmC,EAOpC,WAAA1xC,CAAYqnI,GACVn2H,MAAM4yC,EAnCV,SAAmC3M,GACjC,GAAIA,GAAQA,EAAKtqC,MAAQsqC,EAAKvgD,MAAQ+xC,EAAgBzR,OAAO6jB,SAAS5D,EAAKvgD,MAAO,CAEhF,IADmBwwI,EAAmCjwF,EAAKvgD,MAEzD,MAAM,IAAI+X,EAAe,qCACAg6B,EAAgBxvB,SAASg+B,EAAKvgD,oBAC9B8X,EAAa6kG,oBAExC,MAAO,CACL1mG,KAASsqC,EAAKtqC,KACdjW,KAAS2sH,EAAUt6E,MACnBspF,QAASp7E,EAAKvgD,OAAS+xC,EAAgBO,gBAE3C,CACA,OAAOiO,CACT,CAoBoBmwF,CAA0BD,GAC5C,CAMA,OAAAzlH,GACE,OAAO/e,KAAK4lC,KACd,CAMA,QAAI7xC,GACF,OAAOiM,KAAK+e,SACd,CACA,QAAIhrB,CAAK1H,GACP2T,KAAK4lC,MAAQv5C,CACf,CAOA,SAAAmjI,GACE,OAAOxvH,KAAK0kI,QACd,CAKA,WAAIhV,GACF,OAAO1vH,KAAKwvH,WACd,CACA,WAAIE,CAAQrjI,GACV2T,KAAK0kI,SAAWr4I,CAClB,CAEA,CAAC,4CACC,MAAO,CACL,KAAW2T,KAAKjM,KAChB,QAAWiM,KAAK0vH,QAEpB,CAMA,QAAAvzH,GACE,OAAW6D,KAAKwvH,YAAsB,GAAR,OAAvB,YACA,GAAG8U,EAAiBtkI,KAAK+e,YAClC,EAIFhR,EAAO3hB,QAAQ+oF,wBAA0BA,C,iBCnHzC,MAAM,KAAEh/C,GAAS,EAAQ,MA2BzBpoB,EAAO3hB,QAAQgrI,iBAAmBjhG,EAAKE,IAXd,CAIvB8tF,gBAAiB,EAIjBC,gBAAiB,G,iBCxBnB,MAAM9xD,EAAqB,EAAQ,MAC7B,YAAE3mD,GAAgB,EAAQ,OAC1B,gBAAEm6B,GAAoB,EAAQ,MAapC,MAAMi0B,UAAcpuD,EAKlB,WAAAxO,CAAYm3C,GACU,iBAATA,EACTjmC,MAAM,CACJta,KAAkB+xC,EAAgByB,MAClCv9B,KAAkBsqC,EAAKtqC,KACvB28B,MAAkB2N,EAAK3N,MACvBllC,OAAkB6yC,EAAK7yC,OACvBoxD,YAAkBve,EAAKue,YACvB9rB,aAAkBuN,EAAKvN,aACvBY,iBAAkB2M,EAAK3M,mBAIzBt5B,MAAMimC,EAAMxO,EAAgByB,MAEhC,CAEA,CAAC,4CACC,MAAO,UAAUvnC,KAAKmR,YACxB,CAQA,qBAAOskE,CAAevtD,GACpB,MAAM0qC,EAAWN,EAAmBlrB,gBAAgBK,kBAClD3B,EAAgByB,MAAOrf,GACzB,GAAI0qC,EAAS9zC,MACX,MAAM8zC,EAAS9zC,MAEjB,OAAO,IAAIi7C,EAAM,CACf/vD,KAAkBke,EAClB2qC,aAAkB,EAClBlsB,MAAkBisB,EAASjsB,MAC3BllC,OAAkBmxD,EAASnxD,OAC3BslC,aAAkB6rB,EAAS7rB,aAC3BY,iBAAkBirB,EAASjrB,kBAE/B,EAGF55B,EAAO3hB,QAAQ2tE,MAAQA,C,iBC7DvB,MAAM4qE,EAAgB,MACpB,MAAMzpG,EAAM,GACZ,IAAK,IAAI1uC,EAAI,EAAGA,EAAI,MAAOA,EACzB0uC,EAAI1uC,GAAMA,EAAI,IAAMA,EAAI,IAAO,IAAMgX,OAAOC,aAAajX,GAE3D,OAAO0uC,CACR,EANqB,GAmFtB,MAAM9B,EAAQ,CACZ0yB,gBAxEF,SAAyBhtD,EAAM8lI,EAAYC,GACzC,MAAM,aAAE7pG,EAAY,YAAE/tB,GAAgB,EAAQ,MACxC,QAAE8uB,EAAO,QAAEG,EAAO,SAAEC,GAAalvB,EAEvC,GAAI8uB,EAAQj9B,GACV,OAAO,KAGT,MAAMu9B,EAAS,IAAIrB,EACb8pG,EAAQ,IAAI9pG,EACZU,EAAO,IAAIV,EACjB,IAAI+pG,EAAY,EAGhB,IAAK,IAAIt2I,EAAI,EAAGwzF,EAAUnjF,EAAKtP,OAAQf,EAAIwzF,IAAWxzF,EAAG,CACvD,MAAMiuC,EAAQ59B,EAAKa,WAAWlR,GAE9BitC,EAAKH,OAAOW,EAAQQ,EAAMvgC,SAAS,IAAK,EAAG,KAAM,KACjD2oI,EAAMvpG,OAAOopG,EAAcjoG,IArBX,KAsBhBqoG,IAEkB,IAAdA,GACFrpG,EAAKH,OA1BI,OA6BO,KAAdwpG,GAAoBt2I,IAAMqQ,EAAKtP,OAAS,IACtCq1I,EAAc,GAChBxoG,EAAOd,OAAOY,EAAS,GAAI0oG,EAAa,MAG1CxoG,EAAOd,OAAOY,EAAST,EAAKv/B,WAlBZ,GAkBqC,MAEjDyoI,GACFvoG,EAAOd,OAAOupG,GAGhBzoG,EAAOd,OAAO,MACdG,EAAKiB,QACLmoG,EAAMnoG,QACNooG,EAAY,EAEhB,CAEA,OAAO1oG,EAAOlgC,UAChB,EA6BE6oI,eA3BF,SAAwBlmI,GACtB,MAAQqO,OAASw6C,QAAQ,sBAAEC,KAA8B,EAAQ,OAC3D,SAAEpmC,EAAQ,UAAE/D,GAAc,EAAQ,MAExC,GAAa,OAAT3e,EAEF,YADA2e,EAAU,oCAGZ,IAAIlqB,EAAM,EAEV,IADAiuB,EAAS,4CAA4C1iB,EAAKtP,UACnD+D,EAAMuL,EAAKtP,QAAQ,CACxB,MAAMwuH,EAAcp2D,EAAsB9oD,EAAMvL,GAC1C06C,EAAM+vE,EAAcA,EAAY5kG,UAAY,KAClD,IAAM4kG,IAAe/vE,EAInB,OAFAzsB,EAAS,mDACTA,EAAS,aAAajuB,aAAeuL,EAAKtP,UAI5CgyB,EAAS,UAAUjuB,eAAiB06C,EAAI3lB,yBAAyB2lB,EAAItc,iBACrEp+B,GAAO06C,EAAItc,aACb,CACF,GAOA5jB,EAAO3hB,QAAQgtC,MAAQA,C,iBC3FvB,MAAM,SAAErsB,GAAa,EAAQ,MAE7BgB,EAAO3hB,QAAU,CACf4gB,YAAa,CACXU,oBAAqB,CACnBX,EAASiY,eACTjY,EAASkY,mBACTlY,EAASmY,uBAEXzX,qBAAsB,CACpBV,EAASqY,gBACTrY,EAASsY,oBACTtY,EAASuY,wBAEXzX,2BAA4B,CAC1Bd,EAASiY,eACTjY,EAASiyD,0BACTjyD,EAASmyD,8BAEXpxD,iCAAkC,CAChCf,EAASqY,gBACTrY,EAASgyD,gCACThyD,EAASkyD,oCAEXrxD,oBAAqB,CACnBb,EAASuxD,eACTvxD,EAASwyD,mBACTxyD,EAAS0yD,uBAEX9xD,qBAAsB,CACpBZ,EAASsxD,gBACTtxD,EAASuyD,oBACTvyD,EAASyyD,yB,iBChCf,MAAM,KAAErpC,GAAS,EAAQ,MAOzBpoB,EAAO3hB,QAAQ49C,MAAQ7T,EAAKE,IALd,CACZ4uG,OAAQ,EACRC,OAAQ,G,WCaVn3H,EAAO3hB,QAAQwjI,0BAVf,MACE,WAAAzyH,CAAYs0H,EAAerjG,EAAOmjG,GAChCrlI,OAAOwrB,OAAO1X,KAAM,CAClByxH,gBACArjG,QACAmjG,gBAEJ,E,iBCdF,MAAM,KAAEp7F,GAAS,EAAQ,MA8EzBpoB,EAAO3hB,QAAQosC,sBAAwBrC,EAAKE,IA3Dd,CAK5BpW,GAAsB,2BAOtB5D,KAAsB,6BAQtBpJ,WAAsB,kCAQtBY,qBAAsB,2CAQtBipE,YAAsB,mCAMtBl4D,SAAsB,iCActBy3D,QAAsB,iC,iBC3ExB,MAAM,KAAElmD,GAAS,EAAQ,MAqBzBpoB,EAAO3hB,QAAQ8tC,aAAe/D,EAAKE,IAfd,CACnBs9C,KAAiB,EACjBE,QAAiB,EACjBC,QAAiB,EACjBC,gBAAiB,EACjBC,MAAiB,EACjBC,KAAiB,EACjBC,UAAiB,EACjB1wE,OAAiB,EACjBmI,YAAiB,EACjBwoE,WAAiB,EACjBjF,IAAiB,GACjBC,OAAiB,I,wBClBnBphE,EAAO3hB,QAAUssC,QAAQ,O,WCyCzB3qB,EAAO3hB,QAAQ68F,YArCf,MACE,WAAA9rF,CAAYyJ,EAAS,KAAMqsC,EAAS,IAClCjzC,KAAK+nD,WAAanhD,EAClB5G,KAAKmlI,YAAclyF,CACrB,CAEA,YAAAgb,CAAaK,GACXtuD,KAAKmlI,YAAY72E,EAAMvvC,WAAauvC,CACtC,CAEA,YAAA48D,CAAap9D,GACX,OAAO9tD,KAAKmlI,YAAYr3E,EAC1B,CAEA,iBAAAO,GACE,OAAOruD,KAAKmlI,WACd,CAEA,aAAI/rH,GACF,OAAOpZ,KAAK+nD,UACd,CACA,aAAI3uC,CAAUrW,GACZ/C,KAAK+nD,WAAahlD,CACpB,CAEA,WAAAoU,GACE,MAAM82B,EAAMjuC,KAAKoZ,UACjB,OAAM60B,GAAOA,EAAI10B,aAAe00B,EAAIx0B,WAG7B,CACLnG,aAAgB26B,EAAI10B,YACpBxB,eAAgBk2B,EAAIx0B,YAJb,IAMX,E,iBCtCF,MAAM,aACJ5N,EAAY,oBACZ8tG,EAAmB,eACnB7tG,GACE,EAAQ,OACN,aAAE8pC,GAAiB,EAAQ,OAC3B,cAAEg7B,GAAkB,EAAQ,OAC5B,aAAEzkE,GAAiB,EAAQ,OAC3B,qBAAE6nB,GAAyB,EAAQ,OACnC,MAAEqpD,GAAU,EAAQ,MAGpB+nD,EAAa,CACjBx0D,EAAct/D,QACds/D,EAAcG,UACdH,EAAcK,eACdL,EAAcI,aAehB,MAAMj9C,UAAa6hB,EAUjB,WAAAz4C,CAAYkoI,EAAgBrlH,EAAyBslH,GACnD,MAAMC,EAAqBr5I,OAAOwrB,OAAO,CAAC,EAAG4tH,GAC7CC,EAAmBnxG,OAASmxG,EAAmBnxG,OAAS,IAAI+pC,OAC1DnqC,EAAqBK,QAEvBhmB,MAAMk3H,GACN,MAAMxwG,EAAmB/U,EAAwBhgB,MAC3C8+E,EAAO9+E,KACbA,KAAKuO,OAAS,IAAIpC,EAAa,IAAIqC,IACjC,CAAC,YAAYumB,EAAiBtmB,gBAAiB,SAASqwE,EAAKtI,gBAAiBhoE,IAChFxO,KAAKnE,IAAMmE,KAAKuO,OAAOO,KAAK9O,KAAKnE,IAAKmE,MAGtCA,KAAKwlI,YAAa,EAElBxlI,KAAKojB,WAAY,EACjBpjB,KAAKylI,mBAAoB,EACzBzlI,KAAKi1B,YAAcowG,EACnBrlI,KAAKg1B,kBAAoBD,EACzB/0B,KAAK0lI,OAAS,IAAIroD,EAAMtoD,GACxB/0B,KAAK2lI,qBAAuB,IAAI/vF,EAAa2vF,EAC/C,CAGA,KAAA1b,CAAM91H,KAASya,GACbxO,KAAK2lI,qBAAqB9rF,KAAK9lD,KAASya,GACxCxO,KAAK65C,KAAK9lD,KAASya,EACrB,CACA,GAAAs6G,CAAI/0H,EAAMwwC,GACRvkC,KAAK2lI,qBAAqB34I,GAAG+G,EAAMwwC,EACrC,CACA,KAAAnoB,CAAMroB,EAAMwwC,GACVvkC,KAAK2lI,qBAAqB7gG,KAAK/wC,EAAMwwC,EACvC,CACA,eAAAvoB,CAAgBjoB,EAAMwwC,GACpBvkC,KAAK2lI,qBAAqB3gG,eAAejxC,EAAMwwC,EACjD,CASA,UAAAqhG,GACE,MAAM,UAAEj3H,GAAc3O,KAAKuO,OAE3BvO,KAAKopH,gBAAgBx4C,EAAcI,aACnChxE,KAAK0lI,OAAOpiH,YACd,CAOA,OAAApN,GACE,MAAM,UAAEtH,GAAc5O,KAAKuO,OAE3BvO,KAAK6lI,kBAAmB,EACxB7lI,KAAKopH,gBAAgBx4C,EAAc31D,QACrC,CAKA,OAAAwI,GACE,MAAM,UAAE9U,EAAS,UAAEC,GAAc5O,KAAKuO,OAGtC,GAAIvO,KAAKojB,WAAapjB,KAAKwlI,WAEzB,OAIFxlI,KAAKopH,gBAAgBx4C,EAAct/D,SAEnCtR,KAAKwlI,YAAa,EAElB,MAAMp4I,EAAY,KAChB4S,KAAKojB,WAAY,EACjBpjB,KAAKi1B,YAAc,KACnBj1B,KAAKylI,mBAAoB,EACzBzlI,KAAK6pH,MAAM7pH,KAAKs1B,oBAChBt1B,KAAKwgH,iBACLxgH,KAAK2lI,qBAAqBnlB,kBAG5B,GAAIxgH,KAAKs0B,KAAKwxG,aAAc,CAG1B,MAAMC,EAA0B,KAC9B/lI,KAAKs0B,KAAK85D,eACVhhG,KAGFmd,WAAW,IAAMw7H,IAA2B,EAC9C,MAEE34I,GAEJ,CAKA,UAAA4vF,GACEh9E,KAAKopH,gBAAgBx4C,EAAct8D,YACnC,MAAM,UAAE1F,GAAc5O,KAAKuO,OAE3BvO,KAAK6lI,kBAAmB,CAC1B,CAWA,kBAAA1pH,GACEnc,KAAKopH,gBAAgBx4C,EAAct8D,WACrC,CAUA,gBAAAghB,GACE,MAAM,IAAIqkF,EAAoB,kBAChC,CAOA,aAAAr4F,GAEE,OADAthB,KAAKopH,gBAAgBx4C,EAAcK,gBAC5BjxE,KAAKi1B,YAAYnK,OAC1B,CAQA,OAAAjG,CAAQC,GAEN,OADA9kB,KAAKopH,gBAAgBx4C,EAAcG,WAC5B/wE,KAAK0lI,OAAO7gH,QAAQC,EAC7B,CAMA,gCAAA0B,CAAiC7W,GAC/B,MAAM,IAAIgqG,EAAoB,6EAA8EhqG,EAC9G,CAOA,OAAAF,CAAQqV,EAAUz4B,GAChB2T,KAAK0lI,OAAOj2H,QAAQqV,EAAUz4B,EAChC,CAMA,eAAAwxB,CAAgB9B,GACd/b,KAAKs0B,KAAKniB,aAAa4J,EACzB,CAMA,CAAC,4CACC,MAAO,CACL,OAAU/b,KAAKw2E,UAEnB,CAKA,QAAAr6E,GACE,OAAO6D,KAAK,2CACd,CAOA,UAAIsQ,GACF,OAAQtQ,KAAKumB,QACf,CAOA,YAAIA,GACF,OAAOvmB,KAAKojB,SACd,CAEA,aAAIozD,GACF,OAAOx2E,KAAK0lB,QAAU,OACxB,CAOA,UAAIA,GACF,OAAO,IAAIi0F,EAAoB,sCACjC,CAMA,WAAIzrG,GACF,OAAOlO,KAAKgP,QACd,CAEA,oBAAI62H,GACF,OAAO7lI,KAAKylI,iBACd,CACA,oBAAII,CAAiBx5I,GACnB2T,KAAKylI,kBAAoBp5I,CAC3B,CAQA,eAAA+8H,CAAgBxlG,GACd,MAAM,UAAEjV,GAAc3O,KAAKuO,OAE3B,GADgCqiE,EAAct6D,SAASsN,GACnD5jB,KAAKojB,UACP,MAAM,IAAItX,EAAe,8DACAD,EAAasW,mBAKxC,GAAIijH,EAAWzjH,KAAK5xB,GAAKA,IAAM6zB,GAAY,OAAO,EAElD,GAAIA,IAAcgtD,EAAct8D,YAActU,KAAKi2B,kBACjD,MAAM,IAAInqB,EACR,kEACAD,EAAasW,kBAKnB,CAEA,eAAA8T,GACE,MAAM,IAAI0jF,EAAoB,uCAChC,EAIF5rG,EAAO3hB,QAAQ2nC,KAAOA,C,iBCpUtB,MAAM,KAAEoC,GAAS,EAAQ,MASnB2P,EAAkB,CAItByB,MAAiB,QAIjBnB,MAAiB,QAIjBC,gBAAiB,mBAGnBt4B,EAAO3hB,QAAQ05C,gBAAkB3P,EAAKE,IAAIyP,GAI1C/3B,EAAO3hB,QAAQ05C,gBAAgBkgG,cAAc,CAC3C,MAAmBlgG,EAAgByB,MACnC,MAAmBzB,EAAgBM,MACnC,gBAAmBN,EAAgBO,iB,WCvBrCt4B,EAAO3hB,QAAQooD,WAAa,CAC1BuwC,QATF,SAASA,EAAQpP,GACf,OAAOA,EAAM14C,OAAO,CAACgpG,EAAK17F,IAAO07F,EAAI9nE,OAAOl/D,MAAMC,QAAQqrC,GAAMw6C,EAAQx6C,GAAMA,GAAK,GACrF,EAQE2N,SANF,SAAkBy9B,EAAOprC,GACvB,OAAOorC,EAAMh0D,KAAK5xB,GAAKA,IAAMw6C,EAC/B,E,iBCNA,MAAM,aAAEozC,GAAiB,EAAQ,OAC3B,UAAE/uE,GAAc,EAAQ,OAExB,qBAAEqvE,GAAyBN,EAKjC,MAAME,EAYJ,WAAA1gF,CAAYo0H,EAAckE,EAAkBzC,EAAW2B,EAAQ1B,EAAgB7kG,EAAO4hG,GACpFhwH,KAAKuxH,aAAeA,EACpBvxH,KAAKy1H,iBAAmBA,EACxBz1H,KAAKgzH,UAAYA,EACjBhzH,KAAK20H,OAASA,EACd30H,KAAKizH,eAAiBA,EACtBjzH,KAAKouB,MAAQA,EACbpuB,KAAKgwH,UAAYA,EAEjBhwH,KAAK6xH,oBAAsB,KAC3B7xH,KAAKmyH,eAAgB,EACrBnyH,KAAKuyH,cAAe,EACpBvyH,KAAKm6F,WAAY,EAEjBn6F,KAAKyxH,cAAgB,GAAGxzC,IAAuBN,EAAauI,8BAE5DlmF,KAAKiyH,cAAgB,GACrBjyH,KAAKoyH,cAAgB,KAErBpyH,KAAKo0H,eAAiB,GACtBp0H,KAAKwyH,mBAAoB,EAEzBxyH,KAAKkyH,cAAgB,IACvB,CAMA,cAAA2B,GACE,OAAK7zH,KAAKoyH,cAGHpyH,KAAKoyH,cAAcyB,iBAFjB7zH,IAGX,CAMA,QAAAkzH,CAASgT,GACP,KAAMA,aAAmBroD,GACvB,MAAM,IAAI3wF,MAAM,iBAAiBg5I,KAEnC,GAAIA,IAAYlmI,KACd,MAAM,IAAI9S,MAAM,yCAElB,MAAMupG,EAAQyvC,EACdzvC,EAAM27B,cAAgBpyH,KACtBA,KAAKiyH,cAAcz8H,KAAKihG,EAC1B,CAMA,WAAA0vC,CAAYD,GACV,GAAIA,IAAYlmI,KACd,MAAM,IAAI9S,MAAM,8DAElB,MAAMupG,EAAQyvC,EACRE,EAAapmI,KAAKiyH,cAAc51H,QAAQo6F,GAI9Cz2F,KAAKiyH,cAAczqH,OAAO4+H,EAAY,GACtC3vC,EAAM27B,cAAgB,IACxB,CAKA,QAAAiU,GACE,MAAMjU,EAAgBpyH,KAAKoyH,cAC3BA,EAAcj4B,UAAYi4B,EAAcj4B,WAAan6F,KAAKm6F,UAC1Di4B,EAAcG,aAAeH,EAAcG,cAAgBvyH,KAAKuyH,aAChEH,EAAc+T,YAAYnmI,KAC5B,CAKA,MAAAoqF,GAKE,IAJIpqF,KAAKoyH,eACPpyH,KAAKqmI,WAGArmI,KAAKiyH,cAAcziI,QAAQ,CAChC,MAAMinG,EAAQz2F,KAAKiyH,cAAc/8H,QAC7BuhG,EAAMw7B,eACRx7B,EAAMrM,SAERpqF,KAAKmmI,YAAY1vC,EACnB,CAEAz2F,KAAKyzH,qBACP,CAMA,YAAA2B,GACE,OAAOp1H,KAAKgzH,SACd,CAOA,SAAAsT,GACE,OAAOtmI,KAAK20H,MACd,CAMA,QAAAz7F,GACE,OAAOl5B,KAAKouB,KACd,CAOA,iBAAAm4G,GACE,OAAOvmI,KAAKizH,cACd,CAOA,mBAAAG,CAAoBoT,EAAuBrW,GACzCnwH,KAAKkyH,cAAgB3nH,WAAW,KAC9Bi8H,EAAsBxmI,OACrBmwH,EACL,CAKA,mBAAAsD,GAC6B,OAAvBzzH,KAAKkyH,oBAAiDv/G,IAAvB3S,KAAKkyH,gBAKxCn9G,aAAa/U,KAAKkyH,eAClBlyH,KAAKkyH,cAAgB,KACvB,CAMA,QAAA/1H,GACE,MAAO,8BAA8B6D,KAAKyxH,2BACxBzxH,KAAKgzH,uBACLhzH,KAAKgwH,mBACThwH,KAAKouB,MAAMjd,YAC3B,EAOF0sE,EAAa63C,QAAU,EAKvB73C,EAAa4oD,yBAA2B,IAKxC5oD,EAAa83C,iBAAmB93C,EAAa4oD,yBAE7C14H,EAAO3hB,QAAQyxF,aAAeA,C,iBC5M9B,MAAM,KAAE9pD,GAAS,EAAQ,OACnB,cAAE68C,GAAkB,EAAQ,OAC5B,qBAAE58C,GAAyB,EAAQ,MAEzCjmB,EAAO3hB,QAAQ2nC,KAAOA,EACtBhmB,EAAO3hB,QAAQwkF,cAAgBA,EAC/B7iE,EAAO3hB,QAAQ4nC,qBAAuBA,C,iBCNtC,MAAMgwB,EAAW,EAAQ,KACnB0iF,EAAiC,EAAQ,OACzC,aACJjlG,EAAY,gBACZtH,EAAe,mBACf6I,EAAkB,yBAClB2K,EAAwB,qBACxBC,GACE,EAAQ,MACN,MAAEniC,GAAU,EAAQ,MACpB,aAAEI,EAAY,eAAEC,GAAmB,EAAQ,OAC3C,gBAAE80D,GAAoB,EAAQ,OAC9B,aAAE5lC,EAAY,YAAE/tB,GAAgB,EAAQ,KAExC05H,EAAmB,CACvB,iBAAIC,GACF,MAAMC,EAAYH,EAA+B72C,4BACjD,OAAO3jG,OAAOwb,KAAKm/H,GAAW7kH,IAAI5mB,GAAKyrI,EAAUzrI,GACnD,GAGIylE,EAAkB,CACtBimE,mBAAmBC,GACM,iBAAZA,EACF,mBAAmB/iF,EAAS5qB,MAAM0yB,gBAAgBi7E,KAEpD,mBAAmB/iF,EAAS5qB,MAAM0yB,gBAAgBi7E,EAAQ5qI,SAAS,aAG5E,QAAAwkD,CAASqmF,GACP,IAAI36I,EAAQ,KACZ,IAEE,OADAA,EAAQ26I,EAASrmF,WACVt0D,CACT,CAAE,MAAOC,GACP,GAAIA,aAAaqhD,GACf,GAAIrhD,EAAE29B,eAAiB2jB,EAAqB89C,8BAC1C,OAAO1rF,KAAK8mI,mBAAmBx6I,EAAEuiF,sBAE9B,GAAIviF,aAAawf,GAAkBxf,EAAEqpB,UAAY9J,EAAa82B,uBACnE,MAAO,iBAET,MAAMr2C,CACR,CACF,EAEA,QAAAgmG,CAASxsC,EAAQmhF,GACf,GAAIx7H,EAAMwR,QAAQ6oC,MAAaA,aAAkB3rB,GAC/C,OAAO,KAET,MAAM6C,EAAQ,GACRkqG,EAAYj6H,EAAYkvB,SAAS,GAAI8qG,EAAQ,KAyBnD,OAxBanhF,EAAOtrB,UAAU5kC,OACzB0kB,QAAS6C,IACZ,MAAMg2E,EAAgBrtC,EAAOlrB,SAASzd,GAChCppB,EAAOo/F,EAAcp0E,UACrB1yB,EAAQ2T,KAAK2gD,SAASwyC,GAC5B,IAAIX,EACJ,OAAQz+F,GACN,KAAK0tC,EAAaoB,IAChB2vD,EAAW,KAAKxyF,KAAKsyF,SAASjmG,EAAO46I,EAAS,KAC9C,MACF,KAAKxlG,EAAasB,OAChByvD,EAAW,KAAKxyF,KAAKqzF,YAAYhnG,EAAO46I,EAAS,KACjD,MACF,KAAKxlG,EAAaa,UAChBkwD,EAAWxuC,EAAS5qB,MAAM0yB,gBAAgBz/D,EAAM8P,SAAS,WAAW,EAAO,GAC1D,OAAbq2F,GAA6C,OAAxBA,EAAS/6D,QAAQ,KACxC+6D,EAAWA,EAASr1D,UAAU,EAAGq1D,EAAShjG,OAAS,IAErD,MACF,QACEgjG,EAAsB,OAAVnmG,EAAkBA,EAAM8P,WAAa,KAErD6gC,EAAMxnC,KAAK,GAAG0xI,SAAiB/pH,OAASskB,EAAaxf,OAAOluB,QAAWy+F,OAElEx1D,EAAM9a,KAAK,KACpB,EAEA,WAAAmxE,CAAY8zC,EAAWF,GACrB,GAAIx7H,EAAMwR,QAAQkqH,MAAgBA,aAAqBnkG,GACrD,OAAO,KAETmkG,EAAU1tB,SACV,MAAMz8E,EAAQ,GACRkqG,EAAYj6H,EAAYkvB,SAAS,GAAI8qG,EAAQ,KACnD,KAAOE,EAAUzsC,WAAW,CAC1B,MAAMvH,EAAgBg0C,EAAU5hF,UAC1BxxD,EAAOo/F,EAAcp0E,UACrB1yB,EAAQ2T,KAAK2gD,SAASwyC,GAE5B,IAAIX,EACJ,OAAQz+F,GACN,KAAK0tC,EAAaoB,IAChB2vD,EAAW,KAAKxyF,KAAKsyF,SAASjmG,EAAO46I,EAAS,KAC9C,MACF,KAAKxlG,EAAasB,OAChByvD,EAAW,KAAKxyF,KAAKqzF,YAAYhnG,EAAO46I,EAAS,KACjD,MACF,KAAKxlG,EAAaa,UAChBkwD,EAAWxuC,EAAS5qB,MAAM0yB,gBAAgBz/D,EAAM8P,SAAS,WAAW,EAAO,GAC1D,OAAbq2F,GAA6C,OAAxBA,EAAS/6D,QAAQ,KACxC+6D,EAAWA,EAASr1D,UAAU,EAAGq1D,EAAShjG,OAAS,IAErD,MACF,KAAKiyC,EAAawB,YAChBuvD,EAAWnmG,EAAM8P,WACjB,MACF,QACEq2F,EAAsB,OAAVnmG,EAAkBA,EAAM8P,WAAa,KAErD6gC,EAAMxnC,KAAK,GAAG0xI,KAAazlG,EAAaxf,OAAOluB,QAAWy+F,IAC5D,CAEA,OADA20C,EAAU1tB,SACHz8E,EAAM9a,KAAK,KACpB,EAEA,UAAAkxE,CAAW+zC,GACT,GAAI17H,EAAMwR,QAAQkqH,MAAiBA,aAAqBnkG,GACtD,OAAO,EAETmkG,EAAU1tB,SACV,IAAI94F,EAAQ,EACZ,KAAOwmH,EAAUzsC,WACfysC,EAAU5hF,UACV5kC,IAGF,OADAwmH,EAAU1tB,SACH94F,CACT,EAEAgwE,WAAWy2C,GACF,IAAI3nI,KAAK2nI,GAAWjrI,WAG7B,IAAAquE,CAAK76D,EAAS86D,EAAO48D,EAAWC,GAC9B,MAAMC,EAAK,IAAIvsG,EACf,IAAIwsG,EAAe,KACfC,GAAgB,EAChBC,EAAgB,GAsCpB,OArCIL,SAAsE,iBAAdA,IAC1DG,EAAeH,GAEbC,SAAyE,iBAAfA,IAC5DI,EAAgBJ,GAGlBX,EAAiBC,cAActsH,QAAQ,CAACqtH,EAAUnqE,KAChD,MAAOrgD,EAAK01E,EAAWxmG,EAAOgmG,GAAes1C,EAASh4H,EAAS86D,GAC1DooB,IAGD40C,GACFF,EAAGhsG,OAAOisG,GAGE,OAAVn7I,GAAmC,IAAjBA,EAAMmD,OAG1B+3I,EAAGhsG,OAAOpe,IAEVoqH,EAAGhsG,OAAOtuB,EAAYkvB,SAAS,GAAGhf,KAAQuqH,EAAe,MACzDH,EAAGhsG,OAAOlvC,IAGQ,OAAhBgmG,GAAyB5nB,EAAQ7J,EAAgB8J,eACnD68D,EAAGhsG,OAAO,MACwB,IAA9B82D,EAAYh2F,QAAQ,OACtBkrI,EAAGhsG,OAAO,MAEZgsG,EAAGhsG,OAAO82D,GACqB,OAA3BA,EAAY56D,QAAQ,IAAe+lC,EAASmpE,EAAiBC,cAAcp3I,OAAS,GACtF+3I,EAAGhsG,OAAO,OAGdksG,GAAgB,KAEXF,EAAGprI,UACZ,GAGF4R,EAAO3hB,QAAQy0E,gBAAkBA,C,iBCrLjC,MAAM,aAAEqS,GAAiB,EAAQ,OAE3B,0BAAE00D,GAA8B10D,EAEhC1F,EAAmB,CAGzBA,iBAAoC,SAA0B1hC,EAASrqC,GACrE,IAAIlO,EAAMkO,EACV,MAAM+rD,EAAU1hB,EAAQC,UAAUx4C,GAC5Bs0I,GAAsB,IAAVr6E,IAAmB,EAC/Bs6E,EAA8B,GAAR,EAAVt6E,GAClBj6D,IACA,MAAMw0I,EAAUH,EAA0B97F,EAASv4C,EAAKu0I,GACxDv0I,GAAOu0I,EAEP,MAAO,CAACD,EAAUE,EADCA,GAAW,EAAID,GACKv0I,EAAMkO,EAC/C,GAEAsM,EAAO3hB,QAAQohF,iBAAmBA,C,uCCnBlC,MAAM,aAAE3hE,GAAiB,EAAQ,OAC3B,eAAEC,GAAmB,EAAQ,OAC7B,iBAAEsrH,GAAqB,EAAQ,MAG/B4Q,EAAkB,CACtB,CAAC5Q,EAAiBjT,iBAAkBt4G,EAAas6D,sBACjD,CAACixD,EAAiBhT,iBAAkBv4G,EAAa4I,SAanD,MAAM0iH,UAAqBrrH,EAazB,WAAA3O,CAAYwS,EAASs4H,EAAWjkH,EAAgBuJ,GAC9Clf,MAAMsB,EAASq4H,EAAgBC,GAAY16G,GAQ3CvtB,KAAKgK,KAAO,eACZhK,KAAKsuB,WAAa25G,EAClBjoI,KAAK+iE,gBAAkB/+C,CACzB,CAOA,oBAAIynE,GACF,OAAOzrF,KAAKkoI,iBACd,CAOA,gBAAI30H,GACF,OAAOlF,MAAMsH,OACf,CAEA,CAAC,4CACC,MAAMwyH,EAAW95H,MAAM,0CAAuBA,MAAM,4CAAyB,CAAC,EAC9E,OAAOniB,OAAOwrB,OAAOywH,EAAU,CAC7B,iBAAoB/Q,EAAiB9gH,SAAStW,KAAKyrF,kBACnD,QAAoBzrF,KAAK4pB,QACzB,eAAoB5pB,KAAKgkB,gBAE7B,CAEA,QAAA7nB,GACE,OAAO45B,EAAa/1B,KACtB,EAIF+N,EAAO3hB,QAAQ+qI,aAAeA,C,WChF9B,SAASiR,EAASv0I,GAChB,GAAiB,iBAANA,EACT,MAAO,GAET,MAAMtE,EAAIsE,EAAEsI,SAAS,IACrB,OAAQ5M,EAAEC,OAAS,EAAK,IAAID,IAAMA,CACpC,CAmBA,MAAM2c,EAAM,CACVqB,gBAjBF,SAAyBkhE,GACvB,MAAmB,iBAARA,EACF,KAAK25D,EAAS35D,KAGJ,iBAARA,GAAoBxvE,MAAMC,QAAQuvE,GACpCA,EAAIzsD,IAAIomH,GAAUlmH,OAGR,iBAARusD,EACFxvE,MAAM5R,UAAU20B,IAAI10B,KAAKmhF,EAAK,CAAChiF,EAAGgC,IAAM25I,EAAS35D,EAAI9uE,WAAWlR,KAAKyzB,KAAK,IAG5E,IACT,GAMAnU,EAAO3hB,QAAQ8f,IAAMA,C,iBC7BrB,MAAM,OAAEX,GAAW,EAAQ,OACrB,gBAAE6V,GAAoB,EAAQ,OAC9B,yBAAE9F,GAA6B,EAAQ,MAqF7CvN,EAAO3hB,QAAQgjB,cAnFf,MAWE,WAAAjS,GACE6C,KAAKqoI,UAAY,IAAI7rH,IACrBxc,KAAKsoI,mBAAqB,IAAI9rH,IAE9Bxc,KAAKuoI,WAAa,CAAC,CACrB,CAEA,GAAAxzI,CAAIua,GAEF,GADA/D,EAAO+D,aAAgB8R,EAAiB,2BACpCphB,KAAKqoI,UAAUzsH,IAAItM,GACrB,OAAOA,EAGT,MAAMk5H,EAAS,KAIbxoI,KAAKuoI,WAAWj5H,EAAKoW,QAAUpW,GAE3Bm5H,EAAe,KACnB,MAAM/iH,EAASpW,EAAKoW,OACpB1lB,KAAKqoI,UAAUpsH,OAAO3M,GACtBtP,KAAKsoI,mBAAmBrsH,OAAO3M,GACdtP,KAAKuoI,WAAW7iH,KAGhBpW,UACRtP,KAAKuoI,WAAW7iH,IAarBgjH,EAAW,KACf1oI,KAAKsoI,mBAAmBrsH,OAAO3M,IAWjC,OARAA,EAAKw5G,IAAIxtG,EAAyB2E,GAAIuoH,GACtCl5H,EAAKw5G,IAAIxtG,EAAyBy8G,YAVV,KACtByQ,IACAxoI,KAAKqoI,UAAUtzI,IAAIua,GACnBtP,KAAKsoI,mBAAmBrsH,OAAO3M,KAQjCA,EAAKw5G,IAAIxtG,EAAyBsJ,SAAU6jH,GAC5Cn5H,EAAKw5G,IAAIxtG,EAAyBiyE,aAhBT,KACvBk7C,IACAzoI,KAAKsoI,mBAAmBvzI,IAAIua,KAe9BA,EAAKw5G,IAAIxtG,EAAyBe,KAAMqsH,GACxCp5H,EAAKw5G,IAAIxtG,EAAyBrI,WAAYy1H,GAE9C1oI,KAAKqoI,UAAUtzI,IAAIua,GACZA,CACT,CAEA,SAAI+K,GACF,OAAOpb,MAAMyyC,KAAK1xC,KAAKqoI,UACzB,CACA,qBAAI5tH,GACF,OAAOxb,MAAMyyC,KAAK1xC,KAAKsoI,mBACzB,CAEA,WAAAhiH,CAAYZ,GACV,OAAO1lB,KAAKuoI,WAAW7iH,EACzB,CAEA,UAAAhC,GACE1jB,KAAKqoI,UAAU/tH,QAAQhL,GAAQA,EAAKmU,UACtC,E,WCnFF,SAAS2pF,EAASlsE,EAAUx5B,EAAMrb,GAChC,MAAMs8I,EAAUjhI,EAAKiD,OAAOvP,GAAK8lC,EAAS9lC,KAAO/O,GACjD,OAAOs8I,EAAQn5I,OAASm5I,EAAQ,GAAK,IACvC,CAeA,MAAMxyG,EAQJ,WAAAh5B,CAAYk3B,GACVnoC,OAAO08I,iBAAiB5oI,KAAM,CAC5B6oI,WAAY,CACVx8I,MAAc,KACd03C,YAAc,EACdk6B,UAAc,EACdsQ,cAAc,KAGlBvuE,KAAKgmI,cAAc3xG,EACrB,CAiBA,aAAA2xG,CAAc3xG,EAAQ/gC,GAAQ,GAC5B0M,KAAK6oI,WAAa38I,OAAOwrB,OAAO,CAAC,EAAG2c,GACpCnoC,OAAOwb,KAAK1H,MAAMsa,QAAS6C,IACzB,MAAMw6E,EAAazrG,OAAO0iD,yBAAyB5uC,KAAMmd,QAChCxK,IAArBglF,EAAWtrG,OACbH,OAAOC,eAAe6T,KAAMmd,EAAK,CAC/B4mB,YAAc,EACdk6B,UAAc,EACdsQ,cAAc,EACdliF,MAAcsrG,EAAWtrG,UAI/BH,OAAOwb,KAAK2sB,GAAQ/Z,QAAS6C,IAC3BjxB,OAAOC,eAAe6T,KAAMmd,EAAK,CAC/B4mB,YAAc,EACdk6B,UAAe3qE,EACfi7E,cAAej7E,EACfjH,MAAcgoC,EAAOlX,MAG3B,CAoBA,QAAA7G,CAASwyH,EAAWC,EAAY,SAAUC,EAAe,aACvD,GAAIF,QAA+C,OAAOC,EAC1D,MAAM/+H,EAAOojG,EAASptG,KAAK6oI,WACL38I,OAAOwb,KAAK1H,KAAK6oI,YAAc,CAAC,GAChCC,IACNE,EAChB,OAAOh/H,IAAS8+H,EAAY9+H,EAAO,GAAGA,MAAS8+H,IACjD,CASA,MAAA7mH,CAAO6mH,GACL,OAAO17B,EAASptG,KAAK6oI,WAAY38I,OAAOwb,KAAK1H,KAAK6oI,YAAc,CAAC,GAAIC,EACvE,CAQA,SAAItwE,GACF,OAAOtsE,OAAOwb,KAAK1H,KAAK6oI,YAAc,CAAC,EACzC,CAQA,UAAIx0G,GACF,OA9HgB6M,EA8HElhC,KAAK6oI,WA9HGnhI,EA8HSxb,OAAOwb,KAAK1H,KAAK6oI,YAAc,CAAC,GA7H9D5pI,MAAMyyC,KAAK,IAAIl1B,IAAI9U,EAAKsa,IAAI5mB,GAAK8lC,EAAS9lC,MADnD,IAAoB8lC,EAAUx5B,CA+H5B,CAQA,UAAIuhI,GACF,OAAO,CACT,CAUA,aAAOhnH,CAAOif,EAAU70C,GACtB,OAAO60C,EAASjf,OAAO51B,EACzB,CAQA,aAAOgoC,CAAO6M,GACZ,OAAOA,EAAS7M,QAClB,CAUA,UAAO,CAAIA,GACT,OAAO,IAAI8B,EAAK9B,EAClB,CAUA,gBAAO60G,CAAUC,GACf,MAAMnnH,EAAM,CAAC,EAIb,OAHAmnH,EAAQ7uH,QAAS/qB,IACfyyB,EAAIzyB,GAAKA,IAEJ4mC,EAAKE,IAAIrU,EAClB,CAWA,gBAAOonH,CAAU1hI,GACf,MAAMsa,EAAM,CAAC,EAIb,OAHAta,EAAK4S,QAAQ,CAAC6C,EAAKqgD,KACjBx7C,EAAI7E,GAAOqgD,IAENrnC,EAAKE,IAAIrU,EAClB,EAGFjU,EAAO3hB,QAAQ+pC,KAAOA,C,iBCpNtB,MAAM,wBAAEg/C,GAA4B,EAAQ,OACtC,YAAExpE,GAAgB,EAAQ,MAE1Bs1C,EAAW,CACfj3C,UAAS2I,EACT+8G,SAAS,GAcX,MAAMt6C,UAAwBD,EAU5B,WAAAh4E,CAAYqnI,GACVn2H,MAAMm2H,aAAqB74H,EACjB,CAAE3B,KAAMw6H,EAAUx6H,KAAMjW,KAAMywI,EAAUzwI,MACxC7H,OAAOwrB,OAAO,CAAE,EAAGupC,EAAUujF,GACzC,CAMA,OAAArzH,GACE,OAAOnR,KAAKw1G,KACd,CACA,QAAIxrG,GACF,OAAOhK,KAAKmR,SACd,CACA,QAAInH,CAAK3d,GACP2T,KAAKw1G,MAAQnpH,CACf,CAEA,CAAC,4CACC,MAAO,CACL,KAAW2T,KAAKgK,KAChB,KAAWhK,KAAKjM,KAChB,QAAWiM,KAAK0vH,QAEpB,CAMA,QAAAvzH,GACE,MAAO,GAAGkS,MAAMlS,eAAe6D,KAAKmR,WAAa,KACnD,CAQA,qBAAOk4H,CAAe/0F,GACpB,OAAIA,EAAKtqC,KAAa,IAAIorE,EAAgB9gC,GACnC6gC,EAAwB7gC,EACjC,EAGFvmC,EAAO3hB,QAAQgpF,gBAAkBA,C,iBC7EjC,MAAM,eAAE77C,GAAmB,EAAQ,OAC7B,qBAAEsoB,GAAyB,EAAQ,K,wBCDzC9zC,EAAO3hB,QAAUssC,QAAQ,O,iBCAzB,MAAMttB,EAAS,EAAQ,OACjB,eAAE4yH,EAAc,yBACdE,EAAwB,oBACxBN,GAAwB,EAAQ,OAClC,OAAEryH,GAAW,EAAQ,OACrB,eAAEC,GAAmB,EAAQ,OAC7B,iBAAEmS,GAAqB,EAAQ,MAC/B,sBAAEC,GAA0B,EAAQ,OACpC,mBAAEmvE,GAAuB,EAAQ,OACjC,uBAAE3kC,EAAsB,gBACtBtiB,EAAe,MACfysB,EAAK,MACLwH,GAAU,EAAQ,OACpB,2BAAEnuD,EAA0B,aAC1BC,EAAY,eACZC,GAAmB,EAAQ,OAC7B,aAAEK,GAAiB,EAAQ,OAC3B,KAAE60C,GAAS,EAAQ,OACnB,+BAAE1+B,GAAmC,EAAQ,OAC7C,yBAAEhH,GAA6B,EAAQ,OACvC,kBAAE+7G,GAAsB,EAAQ,OAChC,qBAAErjG,GAAyB,EAAQ,OACnC,gBAAEkU,EAAe,gBACfktC,EAAe,iBACfhtC,EAAgB,gBAChBitC,EAAe,UACfqrC,GAAc,EAAQ,OACxB,eAAEr0G,EAAc,aAAEy0D,GAAiB,EAAQ,OAC3C,MAAE90D,EAAK,aAAEC,GAAiB,EAAQ,OAClC,MAAEoxE,EAAK,SACLtwE,GAAa,EAAQ,OACvB,MAAEo9E,GAAU,EAAQ,OACpB,cAAEz4B,EAAa,mBACbH,GAAuB,EAAQ,MAIjC+3E,EAAe,IAAItL,EAAeh9E,EAAKgkD,MAAO44B,EAAoBG,WAAY1xH,EAAe62B,UAkoDnGn1B,EAAO3hB,QAAQk8H,YA/nDf,cAA0Br8G,EACxB,WAAA9O,EAAY,KAAE6M,EAAI,SAAEuQ,EAAQ,iBAAEwa,EAAgB,WAAEhV,GAAe,CAAC,GAC9D1R,MAAM,CAAErE,SAER,MAAMsE,EAAMtO,KAQNuO,EAASvO,KAAKuO,OAAS,IAAIpC,EAPf,YAAsBqC,GACtC,MAAO,CACL,YAAYumB,EAAiBtmB,gBAC7B,yBAAyB8L,EAASi8D,gBAC/BhoE,EAEP,IAEM,UACJG,EAAS,UACTC,EAAS,SACTC,EAAQ,SACR2S,EAAQ,UACR/D,GACElP,EACJvO,KAAKnE,IAAM0S,EAAOO,KAAK9O,KAAKnE,IAAKmE,MAEjC,MAAMu3H,EAAUx3G,EAAW0C,kBAAoBH,EAA+BqyD,KAE9E30E,KAAKglE,UAAYzqD,EACjBva,KAAKg1B,kBAAoBD,EAGzB/0B,KAAKw1C,2BAA6Bz1B,EAAWm1B,0BAC7Cl1C,KAAKupI,sBAAwBxpH,EAAW81D,qBACxC71E,KAAKwpI,0BAA4BzpH,EAAWgD,WAC5C/iB,KAAKypI,oBAAsB1pH,EAAWgD,WACtC/iB,KAAK0pI,mBAAqBnS,EAE1Bv3H,KAAK2pI,iBAAmB,IAAItS,EAAkB,CAAEC,QAAS/8G,EAAUg9G,UAAShpH,WAE5EvO,KAAK0lI,OAAS,IAAIroD,EAElBr9E,KAAK4pI,8BACL5pI,KAAK6pI,6BAGL7pI,KAAK8lI,cAAe,EAEpB9lI,KAAKi2E,qBAAuBl2D,EAAW+0D,oBAEvC90E,KAAK8pI,uBAAyB,KAO9B,MAAMC,EAAsB,OACtBC,EAA0B,WAC1BC,EAAyB,cAE/B,IAAIC,EAAmB,GACvB,SAASC,EAA2BC,GAOlC,MAAMC,EAAkB,CAAC,EACzBH,EAAiB5vH,QAAQ,CAACo6C,EAAQjmE,EAAGqpC,KACnC,SAASwyG,EAAaC,EAAiBC,GACrC,QAAyC73H,IAArC03H,EAAgBE,GAClB,OAEF,MAAME,EAAgBJ,EAAgBE,GAGtCF,EAAgBE,QAAmB53H,EACnCmlB,EAAI2yG,GAAiB,KACrB3yG,EAAIrpC,GAAK,IACX,CACA,KAAKA,EAAI27I,IAAiB11E,EAI1B,OAAQA,EAAO3gE,MACb,KAAKg2I,EACH,OAAQr1E,EAAO51D,MACb,KAAKwc,EAAyB2E,GAC9B,KAAK3E,EAAyBytG,OAC9B,KAAKztG,EAAyBy8G,YAC5BsS,EAAgB31E,EAAO51D,MAAQrQ,EAC/B,MAEF,KAAK6sB,EAAyBe,KAC9B,KAAKf,EAAyBrI,WAE5Bq3H,EAAahvH,EAAyB2E,GAAIy0C,EAAO51D,MACjD,MAEF,KAAKwc,EAAyB2tG,SAC5BqhB,EAAahvH,EAAyBytG,OAAQr0D,EAAO51D,MACrD,MAEF,QACE2e,EAAU,0CAA0Ci3C,EAAO51D,QAG/D,MAEF,KAAKkrI,EACHK,EAAgB31E,EAAO3gE,MAAQtF,EAC/B,MAEF,KAAKw7I,EACHK,EAAaN,EAAyBt1E,EAAO3gE,QAOrD,CAEA,SAAS22I,IACP,IACIj8I,EADAk8I,EAAsB,EAO1B,IAAKl8I,EAAI,EAAGA,EAAIy7I,EAAiB16I,SAAUf,EAAG,CACxCk8I,EAAsBT,EAAiB16I,SACzC26I,EAA2B17I,GAC3Bk8I,EAAsBT,EAAiB16I,QAEzC,MAAMklE,EAASw1E,EAAiBz7I,GAEhC,GAAKimE,EAGL,OAAQA,EAAO3gE,MACb,KAAKg2I,OACkBp3H,IAAjB+hD,EAAO51C,MACTvE,EAASsvG,MAAMn1D,EAAO51D,KAAM41D,EAAO51C,OAEnCvE,EAASsvG,MAAMn1D,EAAO51D,MAExB,MAEF,KAAKmrI,EAIH,MAEF,KAAKD,EACHhqI,KAAK4qI,0BACL,MAEF,QACEntH,EAAU,qCAAqCi3C,EAAO3gE,QAG5D,CACAm2I,EAAmB,EACrB,CAEA,SAASW,EAAmB92I,EAAM+K,EAAMggB,GACtC,IAAIgsH,EAEFA,OADWn4H,IAAT7T,EACS,CAAE/K,OAAM+K,OAAMggB,SAEd,CAAE/qB,QAEfm2I,EAAiB10I,KAAKs1I,GACeZ,EAAiB16I,OACtB,IAA5B06I,EAAiB16I,QACnB8e,EAAImF,mBAAmBi3H,EAE3B,CA8BA,SAASK,EAAejsH,GACtBvT,EAAOuT,aAAiBhT,GACxByO,EAASsvG,MAAMvuG,EAAyBzH,qBAAsBiL,EAChE,CAoBA,SAASksH,EAAoCtpH,GAC3C,IAAI5C,EAAQ,KAEZ,MAAM2C,EAAqBC,EAC3B,GAAID,GAAsBA,EAAmBjyB,OAAS,EAAG,CAGvD,GADuBiyB,EAAmBE,KAAK5xB,GAAKA,IAAMsc,EAAeuV,QAAUvV,EAAewV,YAC5EvT,EAAI0mB,kBAAkB7kB,UAAU3E,EAAesW,mBAAoB,CACvF,MAAMC,EAA2B,sDAC/BN,EAAmBO,IAAIjyB,GAAKsc,EAAe4V,OAAOlyB,IAAImyB,KAAK,UAG7DV,EAASO,GAETjD,EAAQ,IAAIhT,EAAeiW,EAA0BlW,EAAasW,kBACpE,CACF,CACA,OAAOrD,CACT,CAeA,SAASmsH,EAA6Bh6H,GACpC,IAAI6N,EAAQ,KAYZ,YAXiCnM,IAA7BrE,EAAI2nE,sBACL3nE,EAAI0mB,kBAAkB7kB,UAAU3E,EAAeinE,gBAGvC1yD,EAAWwB,0BACpBzC,EArDJ,SAAoC9B,GAClC,IAAI8B,EAAQ,KACZ,GAAI9B,EAAa,CACf,MAAM+qB,EAAU/qB,EAAYgC,sBACxB+oB,IAAYA,EAAQ9oB,SAAW8oB,EAAQ7oB,cACtC5Q,EAAI0mB,kBAAkB7kB,UAAU3E,EAAe2T,wBAClDL,EAAQ,IAAIhT,EAAe,qCACAD,EAAauT,oCAE5C,CACA,OAAON,CACT,CA0CYosH,CAA2BnrH,EAAWwB,2BAEvCxB,EAAW2B,6BAClB5C,EAAQksH,EAAoCjrH,EAAW2B,6BANvD5C,EAAQ,IAAIhT,EAAe,+BACrBD,EAAawnG,sBAQjBv0F,EAKK7N,EAASP,aAAapC,EAAI68H,QAAS,IACpCJ,EAAejsH,IAGnBiB,EAAWk1D,iBACbl1D,EAAWyC,iBACXzC,EAAWyC,gBAAgBktG,QACpBz+G,EAASP,aAAapC,EAAI88H,YAE5Bn6H,EAASP,aAAapC,EAAI+8H,SACnC,CAUA,SAASC,EAAqCr6H,EAAUs6H,GAAqB,GAC3E,IAAIzsH,EAAQ,KAKZ,OAJIiB,EAAW2B,6BACb5C,EAAQksH,EAAoCjrH,EAAW2B,6BAGrD5C,EAKK7N,EAASP,aAAapC,EAAI68H,QAAS,IACpCJ,EAAejsH,IAGnBysH,EACKt6H,EAASunE,qBAAqBlqE,EAAIk9H,aAAaC,WAEjDx6H,EAASP,aAAapC,EAAIk9H,aAAaC,UAChD,CAxHAzrI,KAAK0rI,gBArBkB,CAAC3vH,EAAO+C,MACxBiB,EAAW60D,yBACT74D,IAAUT,EAAyB2tG,UACnCltG,IAAUT,EAAyBytG,SAK1C8hB,EAAmBd,EAAqBhuH,EAAO+C,IAcjD9e,KAAK2rI,sBAZwB,KAC3Bd,EAAmBb,IAYrBhqI,KAAK4rI,qBAVuB,KAI1B5rI,KAAK6rI,yBACLhB,EAAmBZ,IA+IrBjqI,KAAK+Q,uBAAuB,SAA0BgL,GACpD,OAAQA,EAAM5K,WACZ,KAAKyM,EAAsBgW,2BAGzB,OAFA/kB,EAAS,gGACTP,EAAIs7H,8BACG5pI,KACT,KAAK4d,EAAsBiY,aAEzB,OADAhnB,EAAS,kEACF7O,KAAK8rI,oBAAoBxwH,EAAyBrI,WAAY8I,EAAMw4B,SAC7E,KAAK32B,EAAsBtM,QAEzB,OADAhD,EAAIy9H,WACGz9H,EAAI4C,kBAAkB9jB,YAC/B,KAAKwwB,EAAsB49C,cAGzB,OA9BN,SAA8B9uE,GAI5B,MAAM4wB,EAAiByX,EAAiBxlB,oBAClCI,EAAUvE,EAAOwb,kBAAkBolH,wBAAwBt/I,EAAIg5B,OAAQpI,GAC7EyX,EAAiBjlB,YAAYH,GAC7BolB,EAAiBhlB,eACfuN,EACA,IAAMtd,KAAKisI,qBAAqBv/I,GAChCqzB,EAAW8C,sBACX,KACA,KACJ,CAgBMopH,CAAqBlwH,EAAMw4B,SACpBv0C,KACT,QAEE,OAD4B+b,EAAM5K,UAAsBnR,KAAKkR,kBAAkBC,UACxEnR,KAEb,GAEAA,KAAKyQ,QAAQ,WACX,OAAOzQ,KAAK0Q,aAAapC,EAAI68H,QAAUv6H,IACrC/B,EAAS,YAAY+B,EAAQC,kBAAkBM,cAEnD,GAkBAnR,KAAKmrI,QAAU,IAAIn/H,EAAM,CACvBhC,KAAe+iF,EAAmB7V,QAClCvlE,cAAerD,GACd,CACD,iBAAA49H,GACE3xH,EAASsvG,MAAMvuG,EAAyBwhE,YAC1C,IAECzoE,SAASuJ,EAAsByX,WAAY,WAC1C,OAAOr1B,KAAK0Q,aAAa1Q,KAC3B,GACCqU,SAASuJ,EAAsBE,aAAc,WAC5C,OAAO9d,KAAK0Q,aAAa1Q,KAC3B,GACCqU,SAASuJ,EAAsBm9C,mBAAoB,WAClD,OAAO/6D,KAAK0Q,aAAa1Q,KAC3B,GACCqU,SAASuJ,EAAsBq9C,UAAW,WACzC,OAAOj7D,KAAK0Q,aAAapC,EAAI68H,QAAQgB,eACvC,GACC93H,SAASuJ,EAAsBoD,WAAY,WAC1C,OAAI1S,EAAI0mB,kBAAkB7kB,UAAU3E,EAAemmE,4BAC1C3xE,KAAK0Q,aAAapC,EAAI68H,QAAQiB,gBAEvC5qH,EAAS,sEACAlT,EAAI0mB,kBAAkBvmB,gBAExBzO,KAAKwW,mBAAmB,IAAMxW,KAAKksI,qBAC5C,GACC73H,SAASuJ,EAAsBqD,iBAAkB,WAEhD,OAAOjhB,KAAKwW,mBAAmB,IAAMxW,KAAKksI,oBAC5C,GACCp3H,KAAK,KACJxG,EAAIinE,iBAAmBx1D,EAAW+C,kBAQtC9iB,KAAKmrI,QAAQgB,eAAiB,IAAIngI,EAAM,CACtChC,KAAe+iF,EAAmBC,yBAClCr7E,cAAe3R,KAAKmrI,SACnB,CACD,eAAAkB,GACE9xH,EAASsvG,MAAM71F,EAAqBU,aACtC,IAECniB,MAAM,WACLvS,KAAKqsI,iBACP,GACCh4H,SAASuJ,EAAsBE,aAAc,WAC5C,OAAO9d,KAAKwW,oBACd,GACCnC,SAASuJ,EAAsBm9C,mBAAoB,WAClD,OAAO/6D,KAAKwW,oBACd,GACCnC,SAASuJ,EAAsBoD,WAAY,WAC1C,OAAOiqH,EAA6BjrI,KACtC,GAOFA,KAAKmrI,QAAQiB,cAAgB,IAAIpgI,EAAM,CACrChC,KAAe+iF,EAAmBE,uBAClCt7E,cAAe3R,KAAKmrI,UAEnB92H,SAASuJ,EAAsBq9C,UAAW,WACzC,OAAOgwE,EAA6BjrI,KACtC,GAGFA,KAAKssI,mBAAqB,CACxB,eAAAC,GACE,MAAMjvH,EAAiByX,EAAiBxlB,oBAClCi9H,EAAgBl+H,EAAIm+H,eAE1Bn+H,EAAIo+H,kBACJ,MAAMlkD,EAAWl6E,EAAIq+H,UACfC,EAAet+H,EAAIu+H,cAEnBl9H,EAAUvE,EAAOwb,kBAAkBkmH,uBACvC/sH,EAAWyC,gBACXzC,EAAWkQ,gBACXu4D,EACAokD,EACAtvH,EACAyC,EAAWgD,WACXhD,EAAWxB,QACXwB,EAAW60D,wBACX43D,EAAchrF,UACdgrF,EAAcn6E,aACdtyC,EAAW4C,QACXrU,EAAI2nE,qBACJ17D,EAASquG,gBACTruG,EAASsuG,iBACR9oG,EAAW2B,4BAA8B3B,EAAW2B,2BAA2BlyB,OAAS,GAC3FulC,EAAiBjlB,YAAYH,GAC7BolB,EAAiBhlB,eAAeuN,EACAtd,KAAK+sI,kBAAkBv9H,KAAKxP,MAC5B+f,EAAW8C,sBACX,KACA7iB,KAAKgtI,mBAAmBx9H,KAAKxP,OAE3D+f,EAAWyC,gBACXzC,EAAWkQ,gBAIXlQ,EAAWgD,WACXhD,EAAWxB,QACXwB,EAAW60D,wBACX43D,EAAchrF,UACdgrF,EAAcn6E,aACdtyC,EAAW4C,QACXrU,EAAI2nE,qBACJ17D,EAASquG,gBACTruG,EAASsuG,iBACT9oG,EAAW2B,0BACf,EACA,sBAAAurH,GAEEjtI,KAAKktI,iBAAiB9iD,QACxB,EACA,iBAAA2iD,GACEl+H,EAAS,gBACTP,EAAI6D,aAAa,IAAIwL,EAAiB,CAAE3T,KAAM4T,EAAsBu9C,eACtE,EACA,kBAAAgyE,CAAmBzgJ,GAIjB,IAAI0gJ,EAAwB1gJ,EAAI2gJ,sBACJ16H,MAAzBy6H,GAA+D,MAAzBA,IACvCA,OAAwBz6H,EACxBrE,EAAIg/H,0BAGN,MAAMvnI,EAAQ,CACZwnI,eAAsB7gJ,EAAIkpC,oBAC1BlQ,OAAsBh5B,EAAIi5B,YAC1B4iB,YAZ0Bp5C,EAYgBzC,EAAI8gJ,qBAZR76H,IAANxjB,EAAkB+4C,EAAgB83B,UAAY7wE,GAa9Es+I,mBAAsB/gJ,EAAIghJ,wBAC1BC,mBAAsBjhJ,EAAIkhJ,wBAC1BC,qBAAsBnhJ,EAAIohJ,0BAC1BplG,YAAsBh8C,EAAIqhJ,iBAC1BC,WAAsBthJ,EAAIq6B,gBAC1BojG,qBAAsBz9H,EAAIuhJ,0BAC1BtlG,gBAAsBj8C,EAAIwhJ,0BAC1BC,kBAAsBzhJ,EAAI0hJ,+BAC1BC,WAAsB3hJ,EAAI4hJ,gBAC1BC,mBAAsB7hJ,EAAI8hJ,wBAC1B5lB,gBAAsBl8H,EAAIg9H,qBAC1BhC,gBAAsBh7H,EAAI+hJ,qBAC1BC,MAAsBhiJ,EAAIiiJ,WAC1BC,WAAsBliJ,EAAImiJ,gBAC1BC,cAAsBpiJ,EAAIqiJ,mBAC1BlmB,iBAAsBukB,GA5BIj+I,MAiD5B,GAjBAjD,OAAOwrB,OAAO6C,EAAU,CACtBguB,WAAsBxiC,EAAMwiC,WAC5BuhF,qBAAsB/jH,EAAM4iC,gBAC5BwlG,kBAAsBpoI,EAAMooI,kBAC5BE,WAAsBtoI,EAAMsoI,WAC5B3lG,YAAsB3iC,EAAM2iC,YAC5BhjB,OAAsB3f,EAAM2f,OAC5B4iB,YAAsBviC,EAAM4nI,mBAC5BxjB,qBAAsBpkH,EAAMokH,qBAC5BvB,gBAAsB7iH,EAAM6iH,gBAC5BlB,gBAAsB3hH,EAAM2hH,gBAC5BmB,iBAAsBukB,IAEpB9+H,EAAI0mB,kBAAkB7kB,UAAU3E,EAAeknE,qBACjDn4D,EAASquG,gBAAkB7iH,EAAM6iH,iBAG/B7iH,EAAM0nI,oBAAsB1nI,EAAM0nI,mBAAmBj+I,OAAQ,CAC/DuW,EAAMyiF,SAAWpgC,EAAuBC,2BACtCtiD,EAAM0nI,oBACiCn/H,EAAIq+H,UAA2B5mI,EAAMyiF,SAC9El6E,EAAIq+H,UAAY5mI,EAAMyiF,SACtB,MAAMnnE,EAAqB/S,EAAI02D,UAAU/vC,YACzC5T,EAAmBmB,gBAAkB,IAAI4yD,EAAgB,CACvDprE,KAASjE,EAAMyiF,SAASx+E,KACxBjW,KAASstB,EAAmBmB,gBAAgBzuB,KAC5C27H,QAASruG,EAAmBmB,gBAAgBktG,SAEhD,CAEA,MAAMruG,EAAqB/S,EAAI02D,UAAU/vC,YACzC5T,EAAmB4O,gBAAkB,IAAIolD,EAAgB,CACvD3sC,YAAsB3iC,EAAM2iC,YAC5BJ,YAAsBviC,EAAM8nI,qBAC5BrlG,QAAsBziC,EAAM2oI,MAC5BjmG,eAAsB1iC,EAAM6oI,WAC5BjmG,gBAAsB5iC,EAAM4iC,gBAC5BC,qBAAsB7iC,EAAM+oI,cAC5BvmG,WAAsBxiC,EAAMwiC,aAEzBlnB,EAAmB4O,gBAAgBqY,cACtCjnB,EAAmB4O,gBAAgBqY,YAAcF,EAAiBg/E,MAIpEl7H,OAAOwrB,OAAOpJ,EAAK,CACjBq6G,QAAmB5iH,EAAMioI,WACzBgB,kBAAmBjpI,EAAMwoI,qBAGvBvtF,EAAKgkD,MAAM1/B,GAAGh3D,EAAIm+H,eAAejrF,WACnClzC,EAAIm+H,eAAejrF,UAAYz7C,EAAMwnI,gBAAkBvsF,EAAKgkD,MAEX12F,EAAIm+H,cAIzD,EACA,kBAAAO,CAAmBtgJ,GAEjB,GAAIA,EAAIu5B,UAAY7a,EAAO8a,yBAAyBkyG,KAElD,OADAvpH,EAAS,6CAA6CzD,EAAO8a,yBAAyB5P,SAAS5pB,EAAIu5B,YAC5F3X,EAAI6D,aACT,IAAIwL,EACF,CAAE3T,KAAM4T,EAAsBzD,aAC9B,IAAIrO,EAAe,6BACAV,EAAO8a,yBAAyB5P,SAAS5pB,EAAIu5B,WAC7Cpa,EAAaojI,oBAGtC,MAAMroI,EAASla,EAAI0sB,UACb9F,EAAe1M,EAAO2S,YAE5B,GAAqB,OAAjBjG,EAKF,OAHAtT,KAAKglE,UAAUv1D,QAAQ1C,EAASsb,qCAEtBroB,KAAKg1B,kBAAkBvmB,aAInC,GAAqB,MAAjB6E,EAAsB,CACxB,MAAM4M,EAActZ,EAAO6S,WACrBlG,EAAe3H,EAA2ByU,kBAAkB/M,EACA4M,GAGlE,OAFArR,EAAS,sBAAuByE,EAAc4M,EAAarU,EAAayK,SAAS/C,IAE1EjF,EAAI6D,aAAa,IAAIwL,EACxB,CAAE3T,KAAM4T,EAAsBzD,aAC9B,IAAIrO,EAAeoU,EAAa3M,EAAc,CAAED,kBACtD,CAEA,MAAM47H,EAAY,CAAEllI,KAAM4T,EAAsB49C,eAChD,OAAOltD,EAAI6D,aAAa,IAAIwL,EAAiBuxH,EAAWxiJ,GAC1D,GAEFsT,KAAKqrI,SAAW,IAAIr/H,EAAM,CACxBhC,KAAe+iF,EAAmBI,UAClCx7E,cAAerD,GACdtO,KAAKssI,oBACL/5H,MAAM,WACLjE,EAAIinE,mBACJv1E,KAAKusI,kBACLvsI,KAAKktI,iBAAmB/iD,EAAMM,WAAW1qE,EAAW8C,sBACX7iB,KAAK+sI,kBAChD,GACC14H,SAASuJ,EAAsBE,aAAc,WAC5C,OAAO9d,KAAK0Q,aAAapC,EAAI68H,QAAQgB,eACvC,GACC93H,SAASuJ,EAAsBm9C,mBAAoB,WAClD,OAAO/6D,KAAK0Q,aAAapC,EAAI68H,QAAQgB,eACZ,IAAM79H,EAAIo9H,gBAAgBpwH,EAAyBe,MAC9E,GACChI,SAASuJ,EAAsByX,WAAY,WAC1C,OAAOr1B,KAAK0Q,aAAapC,EAAI6gI,WAC/B,GACC96H,SAASuJ,EAAsBu9C,aAAc,WAE5C,OADiD7sD,EAAIinE,iBACjDjnE,EAAIinE,iBAAmB,EAClBv1E,KAAKw4E,qBAAqBlqE,EAAI+8H,UAEhCrrI,KAAK0Q,aAAapC,EAAI68H,QAAQiB,cACZ,IAAMrB,EACH,IAAIj/H,EAAe,6BACAD,EAAa4I,UAC9D,GACCJ,SAASuJ,EAAsBzD,YAAa,SAAsBipC,GAEjE,OAAOpjD,KAAK0Q,aAAapC,EAAI68H,QAAQiB,cAAe,IAAMrB,EAAe3nF,EAAI7O,SAC/E,GACClgC,SAASuJ,EAAsB49C,cAAe,SAAwBz/C,GAGrE,OAFA/b,KAAKmtI,mBAAmBpxH,EAAMw4B,SAEvBv0C,KAAK0Q,aAAapC,EAAI8gI,OAC/B,GACC/6H,SAASuJ,EAAsBpM,QAAS,WACvC,OAAOxR,KAAK0Q,aAAapC,EAAI8gI,OAC/B,GACCt6H,KAAK,WACJ9U,KAAKitI,wBACP,GACFjtI,KAAKwrI,aAAe,IAAIx/H,EAAM,CAC5BhC,KAAe+iF,EAAmBQ,aAClC57E,cAAerD,IAEdiE,MAAM,WAEqCvS,KAAK8pI,uBACNx7H,EAAIw7H,uBAC7CvvH,EAASsvG,MAAMvuG,EAAyBiyE,aAAcj/E,EAAIw7H,wBAC1Dx7H,EAAIinE,iBAAmBx1D,EAAW+C,gBAClCxU,EAAIymE,kBAAoBh1D,EAAWg1D,iBACrC,GACCtkE,QACC,WACE,OAAO66H,EAAqCtrI,MAAM,EAEpD,GACDqU,SAASuJ,EAAsBm9C,mBAAoB,WAClD,OAAO/6D,KAAK0Q,aAAapC,EAAIk9H,aAAa6D,gBAC5C,GACCh7H,SAASuJ,EAAsBE,aAAc,WAC5C,OAAO9d,KAAK0Q,aAAapC,EAAIk9H,aAAa6D,gBAC5C,GACFrvI,KAAKwrI,aAAa6D,gBAAkB,IAAIrjI,EAAM,CAC5ChC,KAAe+iF,EAAmBU,8BAClC97E,cAAe3R,KAAKwrI,eAEnBn3H,SAASuJ,EAAsBoD,WAAY,WAE1C,OADA1S,EAAIinE,iBAAmBx1D,EAAW+C,gBAC3BwoH,EAAqCtrI,MAAM,EAEpD,GACFA,KAAKwrI,aAAaC,UAAY,IAAIz/H,EAAM,CACtChC,KAAe+iF,EAAmBS,uBAClC77E,cAAe3R,KAAKwrI,cACnBxrI,KAAKssI,oBACL/5H,MAAM,WACLjE,EAAIinE,mBACJv1E,KAAKusI,kBACLvsI,KAAKktI,iBAAmB/iD,EAAMM,WAAW1qE,EAAW8C,sBACX7iB,KAAK+sI,kBAChD,GACC14H,SAASuJ,EAAsByX,WAAY,WAG1C,OAAOr1B,KAAK0Q,aAAapC,EAAI6gI,WAC/B,GACC96H,SAASuJ,EAAsBu9C,aAAc,WAE5C,OADkE7sD,EAAIinE,iBAClEjnE,EAAIinE,iBAAmB,EAClB+1D,EAAqCtrI,MAAM,GAK7CA,KAAK0Q,aAAapC,EAAI68H,QAAQiB,cACZ,IAAMrB,EACH,IAAIj/H,EAAe,+BACAD,EAAa4I,UAC9D,GACCJ,SAASuJ,EAAsBzD,YAAa,SAAsBipC,GAGjE,GAAI90C,EAAIymE,kBAAoB,IAAgC,IAA3BzmE,EAAIymE,mBACnC,GAAI3xB,GAAOA,EAAI7O,SAAW6O,EAAI7O,QAAQ5+B,UAChCytC,EAAI7O,QAAQ5+B,UAAY9J,EAAasmG,gBACvC/uD,EAAI7O,QAAQ5+B,UAAY9J,EAAaumG,yBACrChvD,EAAI7O,QAAQ5+B,UAAY9J,EAAa4hB,gBAErC,OADqCnf,EAAIymE,kBAA8B3xB,EAAI7O,QAAQ5+B,QAC5E3V,KAAK0Q,aAAapC,EAAIk9H,aAAa8D,kBAMHhhI,EAAIymE,kBAEjD,OAAO/0E,KAAK0Q,aAAapC,EAAI68H,QAAQiB,cAAe,KAAMmD,OA5iBpCzwH,EA4iBqDskC,EAAI7O,QA3iBjFhpC,EAAOuT,aAAiBhT,QACxByO,EAASsvG,MAAMvuG,EAAyBrI,WAAY6L,GAFtD,IAA0BA,GA6iBxB,GACCzK,SAASuJ,EAAsB49C,cAAe,SAAwBz/C,GAGrE,OAFA/b,KAAKmtI,mBAAmBpxH,EAAMw4B,SAEvBv0C,KAAK0Q,aAAapC,EAAI8gI,OACJ,IAAM9gI,EAAIo9H,gBAAgBpwH,EAAyBy8G,aAC9E,GACC1jH,SAASuJ,EAAsBpM,QAAS,WACvC,OAAOxR,KAAK0Q,aAAapC,EAAI8gI,OACJ,IAAM9gI,EAAIo9H,gBAAgBpwH,EAAyBy8G,aAE9E,GACCjjH,KAAK,WACJ9U,KAAKitI,wBACP,GACFjtI,KAAKwrI,aAAa8D,YAAc,IAAItjI,EAAM,CACxChC,KAAe+iF,EAAmBW,yBAClC/7E,cAAe3R,KAAKwrI,cACnB,CACD,8BAAAgE,GAEElhI,EAAI6D,aAAa,IAAIwL,EAAiB,CACpC3T,KAAM4T,EAAsB29C,6BAChC,EACA,4BAAAk0E,GACEzvI,KAAK0vI,uBAAuBtlD,QAC9B,IAEC73E,MAAM,WACHjE,EAAIymE,kBAAoB,KACxBzmE,EAAIymE,kBAE0Bh1D,EAAWi1D,yBAAqD1mE,EAAIymE,kBACtG/0E,KAAK0vI,uBAAyBvlD,EAAMM,WAAW1qE,EAAWi1D,yBACXh1E,KAAKwvI,+BACtD,GAAG16H,KAAK,WACN9U,KAAKyvI,8BACP,GAAGp7H,SAASuJ,EAAsB29C,2BAA4B,WAE5D,OADAjtD,EAAIinE,iBAAmBx1D,EAAW+C,gBAC3BwoH,EAAqCtrI,MAAM,EAEpD,GAEA,MAAM2vI,EAAY3vI,KAAKovI,OAAS,IAAIpjI,EAAM,CACxChC,KAAe+iF,EAAmBv7E,QAClCG,cAAerD,IAEdmC,QACC,WACE,OAAOzQ,KAAK0Q,aAA6B,IAAhBpC,EAAIq6G,QACzBgnB,EAAUC,aACVD,EAAUE,KAChB,GAEDt9H,MAAM,KACLjE,EAAI2nE,0BAAuBtjE,EAGtBrE,EAAIw7H,uBAKPx7H,EAAIw7H,uBAAyB,KAH7Bx7H,EAAIo9H,gBAAgBpwH,EAAyB2E,MAMhD5L,SAASuJ,EAAsBE,aAAc,WAC5C,OAAO9d,KAAK0Q,aAAapC,EAAI68H,QAAQgB,eACvC,GACC93H,SAASuJ,EAAsBm9C,mBAAoB,WAClD,OAAO/6D,KAAK0Q,aAAapC,EAAI68H,QAAQgB,eACZ,IAAM79H,EAAIo9H,gBAAgBpwH,EAAyBe,MAC9E,GACChI,SAASuJ,EAAsByX,WAAY,WAE1C,OAAOr1B,KAAK0Q,aAAapC,EAAI6gI,WAC/B,GACC96H,SAASuJ,EAAsBiY,aAAc9Z,GAE5CzN,EAAIwhI,0BACF/vH,EACAzE,EAAyBrI,WACzB8I,EAAMw4B,UAGZo7F,EAAUE,KAAO,IAAI7jI,EAAM,CACzBhC,KAAe+iF,EAAmBK,aAClCz7E,cAAeg+H,IAEdp9H,MAAM,KACLjE,EAAIo9H,gBAAgBpwH,EAAyBytG,QAC7Cz6G,EAAIyhI,WAAU,GACdzhI,EAAIq9H,0BAEL72H,KAAK,KACJxG,EAAIo9H,gBAAgBpwH,EAAyB2tG,UAC7C36G,EAAIs9H,yBAILv3H,SAASuJ,EAAsBm9C,mBAAoB,WAElD,OADAzsD,EAAIyhI,WAAU,GACP/vI,KAAK46H,gBACd,GAEF+U,EAAUC,aAAe,IAAI5jI,EAAM,CACjChC,KAAe+iF,EAAmBM,sBAClC17E,cAAeg+H,IAEdt7H,SAASuJ,EAAsBo9C,gBAAiB,WAC/C,OAAOh7D,KAAK0Q,aAAai/H,EAAUE,KACrC,GAEF7vI,KAAKmvI,WAAa,IAAInjI,EAAM,CAC1BhC,KAAe+iF,EAAmBO,YAClC37E,cAAerD,GACd,CAED,iBAAA0hI,GAIE1hI,EAAI2hI,iBACJ,IACE,MAAM3yH,EAAiByX,EAAiBxlB,oBAClCI,EAAUvE,EAAOwb,kBAAkBolH,wBAAwBzxH,EAASmL,OACTpI,GACjEyX,EAAiBjlB,YAAYH,GAC7BolB,EAAiBhlB,eACfuN,EACA,IAAMtd,KAAKkwI,sBACXnwH,EAAW8C,sBACX,KACA3L,GAAYlX,KAAKmwI,qBAAqBj5H,IACxCrI,EAAS,8CACA,CACE6W,OAAQnL,EAASmL,OACjBpI,kBAEb,CAAE,MAAOhxB,GACPuiB,EAAS,uEAAuEviB,KAC1DyoC,EAAiBrmB,sBACvCJ,EAAI6D,aAAa,IAAIwL,EAAiB,CAAE3T,KAAM4T,EAAsBiY,eACtE,CACF,EAEAq6G,oBAAmB,KACjBrhI,EAAS,kBACFP,EAAI6D,aACT,IAAIwL,EAAiB,CAAE3T,KAAM4T,EAAsBy9C,mBAIvD,oBAAA80E,CAAqBzjJ,GACfA,EAAIu5B,UAAY7a,EAAO8a,yBAAyBujG,QAClD56G,EAAS,6CAA6CzD,EAAO8a,yBAAyB5P,SAAS5pB,EAAIu5B,YAErG,MAAM3S,EAAe5mB,EAAI0sB,UAAUG,YAC7B2G,EAAcxzB,EAAI0sB,UAAUK,WAC5BlG,EAAe3H,EAA2ByU,kBAAkB/M,EACA4M,GAGlE,OAFA3F,EAASquG,gBAAkBl8H,EAAIg9H,qBAC/B76G,EAAS,wBAAyByE,EAAc4M,EAAarU,EAAayK,SAAS/C,IAC5EjF,EAAI6D,aAAa,IAAIwL,EAC1B,CAAE3T,KAAM4T,EAAsBiY,cAC9B,IAAI/pB,EAAeoU,EAAa3M,EAAcD,IAClD,IAGCf,MAAM,WACLvS,KAAKgwI,mBACP,GACC37H,SAASuJ,EAAsBy9C,eAAgB,WAC9C,OAAOr7D,KAAKw4E,qBAAqBlqE,EAAI6gI,WACvC,GAGC96H,SAASuJ,EAAsBiY,aACtB,IAAMvnB,EAAIw9H,oBAAoBxwH,EAAyBe,OAGnErc,KAAKorI,WAAa,IAAIp/H,EAAM,CAC1BhC,KAAe+iF,EAAmBY,YAClCh8E,cAAerD,GACd,CACD,iBAAA8hI,GACE,MAAM9yH,EAAiByX,EAAiBxlB,oBAClCI,EAAUvE,EAAOwb,kBAAkBsJ,UACvCnQ,EAAWyC,gBACXzC,EAAWkQ,gBACX3S,GACFyX,EAAiBjlB,YAAYH,GAC7BolB,EAAiBhlB,eACfuN,EACAtd,KAAKqwI,oBAAoB7gI,KAAKxP,MAC9B+f,EAAW8C,sBACX,KACA7iB,KAAKihF,qBAAqBzxE,KAAKxP,MACnC,EACA,mBAAAqwI,GACExhI,EAAS,kBACTP,EAAI6D,aAAa,IAAIwL,EAAiB,CAAE3T,KAAM4T,EAAsBw9C,iBACtE,EACA,oBAAA6lB,CAAqBv0F,GAInB,GAAIA,EAAIu5B,UAAY7a,EAAO8a,yBAAyBm0C,OAElD,OADAxrD,EAAS,+CAA+CzD,EAAO8a,yBAAyB5P,SAAS5pB,EAAIu5B,YAC9F3X,EAAI6D,aACT,IAAIwL,EACF,CAAE3T,KAAM4T,EAAsB69C,eAC9B,IAAI3vD,EAAe,+BACAV,EAAO8a,yBAAyB5P,SAAS5pB,EAAIu5B,WAC7Cpa,EAAaojI,oBAGtC,MAAMroI,EAASla,EAAI0sB,UACb9F,EAAe1M,EAAO2S,YAE5B,GAAqB,MAAjBjG,EAAsB,CACxB,MAAM4M,EAActZ,EAAO6S,WACrBlG,EAAe3H,EAA2ByU,kBAAkB/M,EACA4M,GAGlE,GAFArR,EAAS,0BAA2ByE,EAAc4M,EAAarU,EAAayK,SAAS/C,IAEjFA,IAAiB1H,EAAaymG,wBAAyB,CAEzD,MAAM48B,EAAY,CAAEllI,KAAM4T,EAAsB89C,gBAChD,OAAOptD,EAAI6D,aAAa,IAAIwL,EAAiBuxH,EAAWxiJ,GAC1D,CAEA,OAAO4hB,EAAI6D,aAAa,IAAIwL,EACxB,CAAE3T,KAAM4T,EAAsB69C,eAC9B,IAAI3vD,EAAeoU,EAAa3M,EAAc,CAAED,kBACtD,CAEA,MAAM47H,EAAY,CAAEllI,KAAM4T,EAAsB89C,gBAChD,OAAOptD,EAAI6D,aAAa,IAAIwL,EAAiBuxH,EAAWxiJ,GAC1D,IAGC6lB,MAAM,WAELvS,KAAKowI,mBACP,GACC/7H,SAASuJ,EAAsBw9C,eAAgB,WAE9C,OAAOp7D,KAAKw4E,qBAAqBlqE,EAAI+8H,SACvC,GACCh3H,SAASuJ,EAAsB89C,eAAgB,WAC9C,OAAO17D,KAAKw4E,qBAAqBlqE,EAAI+8H,SACvC,GACCh3H,SAASuJ,EAAsB69C,cAAe,SAAwBrY,GAErE,OAAOpjD,KAAK0Q,aAAapC,EAAI68H,QAAQiB,cAAe,IAAMrB,EAAe3nF,EAAI7O,SAC/E,EACJ,CAQA,aAAAi1E,CAAc75G,GACZ,MAAM,UAAEhB,EAAS,UAAEC,GAAc5O,KAAKuO,OAChCwjD,EAAYpiD,EAAQu1D,yBACpBorE,EAAQv+E,EAAU51D,WAClBoe,EAAWva,KAAKglE,UAEtB,IAAKhlE,KAAKuwI,aAIR,OADAh2H,EAAS9K,QAAQ1C,EAAS0Z,kCACnB,EAGJlM,EAAS4zH,mBACZx+H,EAAQo6C,kBAAkB,GAiB5B,MAAMymF,EAAc7gI,EAAQk1D,sBAC5B,GAAI/D,EAAagE,aAAaQ,GAAGkrE,GAE/B7gI,EAAQu6C,oBAAoB3vC,EAASmtG,sBAChC,QAAiC/0G,IAA7B4H,EAASmtG,iBACZ5mD,EAAagE,aAAaQ,GAAG/qD,EAASmtG,sBAOL/0G,IAA7B4H,EAASmtG,kBACd5mD,EAAagE,aAAaQ,GAAG/qD,EAASmtG,kBACrC5mD,EAAagE,aAAaQ,GAAGkrE,IAGnC7gI,EAAQu6C,oBAAoB4W,EAAagE,kBAZqB,CAEtCvqD,EAASmtG,gBAAgBvrH,WAC9Bq0I,EAAYr0I,WAG/Boe,EAASmtG,gBAAkB8oB,CAC7B,CAQA,MAAMhE,EAAgBxsI,KAAKysI,eACrBgE,EAAYjE,EAAc16E,WAAWC,EACApiD,EAAQg1D,kCAC7C+rE,EAAuBlE,EAAcp6E,YAAcpyD,KAAK2wI,eAC9D,OAAQF,GACN,KAAKl/E,EAAmBn7C,GACtB,MACF,KAAKm7C,EAAmBC,UAMtB,GALAj3C,EAAS9K,QAAQ1C,EAAS4yD,sBAKrB3/D,KAAK4wI,iBAAiBh1H,IAAIm2C,IAC1B/xD,KAAK6wI,YAAYj1H,IAAI00H,GAKfI,EACT1wI,KAAK+vI,UAAUW,GAOf1wI,KAAK8wI,4BAb2B,CAEhC,MAAMC,EAAe,IAAI7hE,IACzB6hE,EAAa19I,IAAIgZ,EAAe62B,SAAU,CAAC,CAAC6uB,EAAWA,KACvD/xD,KAAKgxI,SAASD,EAChB,CAUA,OAAO,EACT,KAAKx/E,EAAmBE,aAEtB,OADAl3C,EAAS9K,QAAQ1C,EAAS6yD,0BACnB,EACT,QAEE,OADAr0D,GAAO,EAAO,iCAAkCklI,IACzC,EAGX,OAAOzwI,KAAK4wI,iBAAiBvS,OAAOtsE,EAAY0sE,IAC9C,IAAIwS,GAAyB,EAC7B,GAAIxS,EACF,OAAQA,EAASr5F,OACf,KAAKw4F,EAAoBC,QACvB79H,KAAK6wI,YAAY97I,IAAI0pI,EAASthH,KAC9B,MACF,KAAKygH,EAAoBE,eACvBmT,GAAyB,EACzB,MACF,KAAKrT,EAAoBG,WAEvB,MACF,QACExyH,GAAO,EACA,kCACAqyH,EAAoBtnH,SAASmoH,EAASr5F,QAiBnD,OAbAplC,KAAK8lI,cAAe,EACpB9lI,KAAK2pI,iBAAiBn0I,KAAKma,GAC3B3P,KAAK8lI,cAAe,EAEhB4K,GAAwBO,EAI1BjxI,KAAK+vI,UAAUW,GAEf1wI,KAAK8wI,yBAGA,GAEX,CAEA,cAAAnqE,CAAexZ,EAAWo8D,GAAc,GAGtCvpH,KAAKumE,kBAAkBpZ,EAAW9gD,EAAe62B,SAAUqmF,EAC7D,CAEA,iBAAAhjD,CAAkBpZ,EAAW+jF,EAAiB7kI,EAAe62B,SAAUqmF,GAAc,GACnF,MAAM,UAAE56G,GAAc3O,KAAKuO,OAErB+hI,EAAQnjF,EAAUhxD,WAGxB,OAAO+0I,GACL,KAAK7kI,EAAeuV,OAGlB5hB,KAAKglE,UAAUv1D,QAAQ1C,EAAS+yD,kBAChC,MAIF,KAAKzzD,EAAewV,SAGlB7hB,KAAKglE,UAAUv1D,QAAQ1C,EAAS8yD,oBAChC,MAEF,KAAKxzD,EAAe62B,SAKdqmF,GACFvpH,KAAKglE,UAAUv1D,QAAQ1C,EAASgzD,oBAGlC//D,KAAKglE,UAAUv1D,QAAQ1C,EAAS2yD,UAKpC,GAAI1/D,KAAK6wI,YAAY50H,OAAOq0H,GAAQ,CAGlC,MAAMa,EAAe,IAAIjiE,IAGzB,OAFAiiE,EAAa99I,IAAI69I,EAAgB,CAAC,CAAC/jF,EAAWA,UAC9CntD,KAAKgxI,SAASG,EAEhB,CAIAnxI,KAAK4wI,iBAAiB/R,eAAe1xE,EAAWywE,EAAoBE,eAAgBoT,GAEjFA,IAAmB7kI,EAAe62B,SACnCljC,KAAK+vI,WAAU,GAEf/vI,KAAK8wI,uBAET,CAEA,cAAAztE,GAEE,OADArjE,KAAK0sI,kBACE1sI,KAAKsjE,YACd,CAEA,cAAAptC,GACE,OAAKl2B,KAAKkR,oBAERlR,KAAKm6E,eAAe4S,EAAmB7V,UACvCl3E,KAAKm6E,eAAe4S,EAAmBqkD,2BAE3C,CAEA,wBAAA/nB,GACErpH,KAAKqxI,eAAgB,EACrBrxI,KAAKsxI,oBACP,CAEA,uBAAA1G,GACE5qI,KAAKuwI,cAAe,EACpBvwI,KAAKsxI,oBACP,CAEA,kBAAAA,GACMtxI,KAAKqxI,eAAiBrxI,KAAKuwI,cAC7BvwI,KAAKnE,IAAI,kCAAkCmE,KAAKuwI,sBAAsBvwI,KAAKqxI,kBAC3ErxI,KAAK2pI,iBAAiBp7I,QACtByR,KAAKypI,oBAAsBzpI,KAAKwpI,0BAChCxpI,KAAK+vI,WAAU,IAEf/vI,KAAKnE,IAAI,sCAAsCmE,KAAKuwI,sBAAsBvwI,KAAKqxI,iBAEnF,CAEA,mBAAAvF,CAAoB3vD,EAAWr9D,GAC7B,MAAMvE,EAAWva,KAAKglE,WAChB,UAAEr2D,GAAc3O,KAAKuO,OAM3B,OAJ2CgM,EAASsrH,iBAEpD7lI,KAAKstI,yBAEEttI,KAAK0Q,aAAa1Q,KAAKmrI,QAAQiB,cAAe,IACnDpsI,KAAK0rI,gBAAgBvvD,EAAWr9D,GACpC,CAEA,yBAAAgxH,CAA0B/vH,EAAYo8D,EAAWr9D,GAC/C,MAAMvE,EAAWva,KAAKglE,WAChB,UAAEr2D,GAAc3O,KAAKuO,OAc3B,GAVIuQ,GAASA,aAAiBhT,GAAkBgT,EAAMnJ,SAChDmJ,EAAMnJ,UAAY9J,EAAawoG,iBAEjCr0G,KAAKysI,eAAe37H,QACpB9Q,KAAK4wI,iBAAiB9/H,SAI1B9Q,KAAKstI,yBAED/yH,EAASquG,iBACX5oH,KAAKg1B,kBAAkB7kB,UAAU3E,EAAeinE,gBAAiB,CACLl4D,EAASquG,gBACrE,MAAM2oB,EAAYnmI,EAAOwb,kBAAkB4qH,aAAaj3H,EAASuM,QACTvM,EAASquG,gBACT5oH,KAAKysI,eAAejrF,WAC5ExhD,KAAKg1B,kBAAkBllB,YAAYyhI,EACrC,CACA,QAAsC,IAAlCxxH,EAAWg1D,mBAA4Bh1D,EAAWg1D,kBAAoB,IACpEj2D,GAASA,aAAiBhT,GAAkBgT,EAAMnJ,UAChDmJ,EAAMnJ,UAAY9J,EAAawoG,gBACjCv1F,EAAMnJ,UAAY9J,EAAa4hB,iBAE/BztB,KAAK8pI,uBAAyBhrH,EAEvB9e,KAAK0Q,aAAa1Q,KAAKwrI,eAI7BxrI,KAAK0Q,aAAa1Q,KAAKmrI,QAAQiB,cAAe,IACnDpsI,KAAK0rI,gBAAgBvvD,EAAWr9D,GACpC,CAEA,uBAAAwqG,GACEtpH,KAAKqxI,eAAgB,EACrBrxI,KAAKnE,IAAI,2BAA2BmE,KAAKuwI,sBAAsBvwI,KAAKqxI,kBACpErxI,KAAK2pI,iBAAiB1sD,MACxB,CAEA,sBAAA4uD,GACE7rI,KAAKuwI,cAAe,EACpBvwI,KAAKnE,IAAI,0BAA0BmE,KAAKuwI,sBAAsBvwI,KAAKqxI,kBACnErxI,KAAK+vI,WAAU,EACjB,CAEA,uBAAA0B,GACOzxI,KAAK0xI,qBAEV38H,aAAa/U,KAAK0xI,oBAClB1xI,KAAK0xI,mBAAqB,KAC5B,CAEA,QAAA3F,GACE/rI,KAAKyxI,0BACLzxI,KAAKiwI,iBACLjwI,KAAKsjE,kBAAe3wD,EACpB3S,KAAK2xI,SAAW,KAChB3xI,KAAK2pI,iBAAmB,KACxB3pI,KAAKysI,eAAiB,KACtBzsI,KAAKglE,UAAY,KACjBhlE,KAAKg1B,kBAAoB,IAC3B,CAEA,cAAAi7G,GACEjwI,KAAK2sI,eAAYh6H,EACjB3S,KAAK6sI,mBAAgBl6H,CACvB,CAEA,eAAA+5H,GACE,GAAI1sI,KAAK2sI,UAIP,OAGF,MAAM53G,EAAmB/0B,KAAKg1B,kBACxBjV,EAAa/f,KAAKglE,UAAU/vC,aAC5B,gBAAEzS,GAAoBzC,EAE5B,IAAI/C,EACAwrE,EACAokD,EACApqH,EAAgBzuB,OAAS2sH,EAAUt6E,OAGrCppB,EAAc+X,EAAiB9kB,gCAAgCuS,GAI/DgmE,EAAW,IAAIj2B,EAAM,CACnBvoD,KAAQgT,EAAYhT,KACpBjW,KAAQ+xC,EAAgBM,MACxB3kC,OAAQ,EACRklC,MAAQ3pB,EAAY2pB,MAAMlP,OAAOza,EAAYvb,UAG/CmrI,OAAej6H,IAGf61E,EAAWhmE,EAAgBxY,KACvB+qB,EAAiB9kB,gCAAgCuS,GACjD,IAAIu3C,EAAM,CAAE/vD,KAAM,MAAOvI,OAAQ,EAAGklC,MAAO,OAC/CimG,EAAe7sH,EAAWwB,2BACxBwT,EAAiB7kB,2BAA2B41B,EAAgByB,OAC9DvqB,EAAc4vH,GAKhB1gJ,OAAOwrB,OAAO1X,KAAM,CAClBsjE,aAAetmD,EACf2vH,UAAenkD,EACfqkD,cAAeD,IAIjB7sH,EAAWyC,gBAAkB,IAAI4yD,EAAgB,CAC/CprE,KAASw+E,EAASx+E,KAClBjW,KAASyuB,EAAgBzuB,KACzB27H,QAASltG,EAAgBktG,SAE7B,CAEA,0BAAAma,GACE39I,OAAOwrB,OAAO1X,KAAM,CAClBgvI,kBAAmB,EACnBrmB,aAAmBh2G,EACnB49H,cAAmB,EACnBc,eAAmB,GAEvB,CAEA,sBAAA/D,GACE,MAAM,UAAE3+H,GAAc3O,KAAKuO,OAG3BvO,KAAKglE,UAAU6jD,sBAAmBl2G,CACpC,CAEA,2BAAAi3H,GACE,MAAM,UAAEj7H,GAAc3O,KAAKuO,OAG3BvO,KAAKysI,eAAiB,IAAI/6E,EAG1B1xD,KAAK4wI,iBAAmB,IAAI1S,EAl5CP,KAm5CrBl+H,KAAK6wI,YAAc,IAAIr0H,IAGvBxc,KAAKglE,UAAU4jD,qBAAkBj2G,EAGjC3S,KAAKglE,UAAU6jD,sBAAmBl2G,CACpC,CASA,QAAAq+H,CAASY,GACP,MAAMC,EAAezmI,EAAOwb,kBAAkBkrH,OAC5C9xI,KAAKglE,UAAUt/C,OACf1lB,KAAKysI,eAAep6E,aACpBryD,KAAK+iB,WACL6uH,GACF5xI,KAAKg1B,kBAAkBllB,YAAY+hI,EACrC,CAkBA,eAAAE,CAAgBC,EAAkBrrE,EAAiB,MAEjD,MAAMsrE,EAAeD,EAAiBC,aAChCC,EAAYF,EAAiBE,UAG7BC,EAAqB9lI,EAAegoB,OAEpC+9G,EAAqBH,EAAaziJ,OACxC,GAAIm3E,GAAkBA,EAAevhC,QAAUw4F,EAAoBC,QAAS,CAE1E,GACyB,IAAvBuU,GACEA,EAAqB,GACpBH,EAAaG,EAAqB,GAAG/rE,oBAAsBM,EAAeN,kBAG7E,YADA4rE,EAAaz8I,KAAKmxE,GAIf,GACDyrE,EAAqB,GACpBH,EAAaG,EAAqB,GAAG/rE,oBAAsBM,EAAeN,kBAC7E,CAMA,OAJA6rE,EADqBD,EAAaG,EAAqB,GAAG/rE,mBAClC7wE,KAAKy8I,GAE7BD,EAAiBC,aAAe,QAChCD,EAAiBC,aAAaz8I,KAAKmxE,EAErC,CACF,CAGA,GAAIyrE,EAAoB,CAEtBF,EADqBD,EAAaG,EAAqB,GAAG/rE,mBAClC7wE,KAAKy8I,EAC/B,CAOA,IAAII,EAAiB,EACrB,IAAI,IAAI5jJ,EAAI,EAAGA,EAAI0jJ,EAAmB3iJ,OAAQf,IAC5C4jJ,GAAiBH,EAAUC,EAAmB1jJ,IAAIe,OAGpD,GAAuB,OAAnBm3E,GAA4B0rE,IAAkBjnI,EAAOwb,kBAAkB0rH,sBAAwB,CAEjG,MAAMC,EAAa,IAAIrjE,IACvB,IAAIsjE,GAAmB,EAEvB,IAAI,IAAI/jJ,EAAI,EAAGA,EAAI0jJ,EAAmB3iJ,OAAQf,IAEzCyjJ,EAAUC,EAAmB1jJ,IAAIe,OAAS,IAC3C+iJ,EAAWl/I,IAAI8+I,EAAmB1jJ,GAAIyjJ,EAAUC,EAAmB1jJ,IAAIuzB,IACrEsuC,GAAS,CAACA,EAAM,GAAGvzD,GAAIuzD,EAAMA,EAAM9gE,OAAS,GAAGuN,MAGjDy1I,GAAmB,GAIvB,GAAIA,GAAoBR,EAAiBS,kBAAmB,CAE1D,MAAM,UAAE9jI,GAAc3O,KAAKuO,OAE3BvO,KAAKgxI,SAASuB,GAGd,MAAMG,EAAmBH,EAAWnmG,IAAI//B,EAAeuV,QACjD+wH,EAAqBJ,EAAWnmG,IAAI//B,EAAewV,UAKrC7hB,KAAKysI,eAAep6E,aACPkgF,EAAW32H,IAAIvP,EAAe62B,WACzDqvG,EAAWnmG,IAAI//B,EAAe62B,UAAUlhB,IAAI4wH,GAAK,IAAIA,EAAE,OAAOA,EAAE,OAEtCL,EAAW32H,IAAIvP,EAAeuV,UACpD8wH,EAAiB,GAAG,GAAOA,EAAiB,GAAG,IAEvBH,EAAW32H,IAAIvP,EAAewV,YACtD8wH,EAAmB,GAAG,GAAOA,EAAmB,GAAG,IAI7D3yI,KAAKysI,eAAet6E,WACpB6/E,EAAiBS,mBAAoB,CACvC,CAGA,IAAI,IAAIhkJ,EAAI,EAAGA,EAAI0jJ,EAAmB3iJ,OAAQf,IAC5CyjJ,EAAUC,EAAmB1jJ,IAAI6rB,QAASu4H,IACxCA,EAASv4H,QAASmb,IAChB,GAAIA,EAAI2P,QAAUw4F,EAAoBG,WACpC,IACE/9H,KAAK4wI,iBAAiB/R,eAAeppG,EAAI14B,GACJ6gI,EAAoBG,WAC3D,CAAE,MAAOzxI,GACP,MAAM,UAAEmxB,GAAczd,KAAKuO,OAC3BkP,EAAU,eAAegY,EAAI14B,sBAAsBzQ,IACrD,MAOR0lJ,EAAiBE,UAAY,GAC7B,IAAI,IAAIzjJ,EAAI,EAAGA,EAAI0jJ,EAAmB3iJ,OAAQf,IAC5CujJ,EAAiBE,UAAUC,EAAmB1jJ,IAAM,EAExD,CAEAujJ,EAAiBC,aAAe,EAClC,CAQA,SAAAlC,CAAU0C,GAAoB,GAC5BzyI,KAAKyxI,0BAEL,MAAMG,EAAkB5xI,KAAK4wI,iBACvBpE,EAAgBxsI,KAAKysI,eAErB0F,EAAqB9lI,EAAegoB,OAGpC29G,EAAmB,CACvBS,kBAAmBA,GAAsBjG,EAAcp6E,YAAc,EACrE8/E,UAAmB,GACnBD,aAAmB,IAIrB,IAAI,IAAIxjJ,EAAI,EAAGA,EAAI0jJ,EAAmB3iJ,OAAQf,IAC5CujJ,EAAiBE,UAAUC,EAAmB1jJ,IAAM,GAOtD,MAAMiwI,EAAQ1+H,KAAK4wI,iBAAiBlS,QACN,IAA1B1+H,KAAK6wI,YAAYvyI,MAAcogI,GAASA,EAAMt5F,QAAUw4F,EAAoBC,SAE9E79H,KAAK+xI,gBAAgBC,EAAkB1I,GAKzCsI,EAAgBt3H,QAAQmb,GAAOz1B,KAAK+xI,gBAAgBC,EAAkBv8G,IAEtEz1B,KAAK+xI,gBAAgBC,GAIrBzmI,GAA8C,IAAvCymI,EAAiBS,mBACxBlnI,EAAgD,IAAzCymI,EAAiBC,aAAaziJ,QACrC,IAAI,IAAIf,EAAI,EAAGA,EAAI0jJ,EAAmB3iJ,OAAQf,IAC5C8c,EAAoE,IAA7DymI,EAAiBE,UAAUC,EAAmB1jJ,IAAIe,OAE7D,CAEA,qBAAAshJ,GACM9wI,KAAK0xI,oBACL1xI,KAAKglE,UAAUz+C,WACnBvmB,KAAK0xI,mBAAqBnnI,WACxB,IAAMvK,KAAK+vI,WAAU,GACrB/vI,KAAKw1C,4BAET,CAEA,iBAAI40E,GACF,OAAOh3H,KAAKgC,IAAI4K,KAAKypI,oBACLzpI,KAAKgvI,mBAAqB7tG,OAAO06F,kBACnD,CAEA,cAAI94G,GACF,OAAO/iB,KAAKoqH,cAAgBpqH,KAAK2pI,iBAAiBn6I,MACpD,CAEA,kBAAImhJ,GACF,OAAO3wI,KAAK+iB,WAAa/iB,KAAKupI,sBAAwB,GACxD,CAEA,qBAAInjE,GACF,OAAOpmE,KAAK0pI,kBACd,E,iBCnqDF,MAAM,KAAEvzG,GAAS,EAAQ,MAqEzBpoB,EAAO3hB,QAAQ01D,kBAAoB3rB,EAAKE,IAzDd,CAaxB4sB,YAAa,cAabC,YAAa,cAebC,sBAAuB,wBAYvBE,UAAW,a,iBChEb,MAAMg8B,EAAa,cAGnB,SAASyzD,EAAWh/F,EAAMpC,EAAMliD,GAC9B,MAAM0N,EAASmiF,EAAWxtC,YAAYriD,GACtC,IACIf,EADA8E,EAAM,EAEV,MAAMw/I,EAAOj/F,EAAK,GAElB,IADAvgD,GAAOw/I,EAAK57C,KAAKj6F,EAAQ,EAAGw0C,EAAMqhG,EAAKvjJ,QAClCf,EAAI,EAAGA,EAAIqlD,EAAKtkD,QAAU+D,EAAM/D,EAAQf,IAAK,CAChD,MAAMgE,EAAMqhD,EAAKrlD,GACjB8E,GAAOd,EAAI0kG,KAAKj6F,EAAQ3J,EAAK,EAAGd,EAAIjD,OACtC,CACA,OAAO0N,CACT,CAGA,SAAS81I,EAAiBC,EAASC,EAAiBC,GAClD,IAAIC,EAAaF,EACbG,EAAYF,EAChB,MAAMxsG,EAAQ,GACd,IAAIl4C,EAAI,EACR,IAAKA,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACtB,KAAOwkJ,EAAQG,GAAY5jJ,QAAU6jJ,GAGnC,GAFAA,GAAaJ,EAAQG,GAAY5jJ,OACjC4jJ,IACIA,GAAcH,EAAQzjJ,OAAU,OAAO,KAE7Cm3C,EAAMl4C,GAAKwkJ,EAAQG,GAAYrnG,UAAUsnG,GACzCA,GACF,CAEA,OAAQ1sG,EAAM,IAAM,KAAOA,EAAM,IAAM,KAAOA,EAAM,IAAM,GAAKA,EAAM,EACvE,CAUA,MAAM02E,EACJ,WAAAlgH,CAAYm2I,GACV,IAAIniG,EAAS,GACb,MAAMoiG,EAAWD,EACjB,IAAInV,EAAQ,EACR1rE,EAAU,EAWdzyD,KAAKw9G,SAAW,SAAkBl/G,GAChC,MAAMmrB,EAAS,GACf,OAAI0nB,EAAO3hD,OAAS,GAAK8O,EAAO6/H,EAAgB,MAC5ChtF,EAAO,GAAG3hD,QAAU8O,EAAOm0D,GAC7BhpC,EAAO,GAAK0nB,EAAO,GACnB1nB,EAAO,GAAKgpC,IAEZhpC,EAAO,GAAKqpH,EAAW3hG,EAAQshB,EAASn0D,GACxCmrB,EAAO,GAAK,GAEPA,EACT,EAEAzpB,KAAK+rC,UAAY,SAAmByxB,GAClC,GAAIA,GAAS2gE,EAAS,OAAO,KAC7B,MAAMqV,EAASh2E,EAAQ/K,EACvB,GAAI+gF,EAASriG,EAAO,GAAG3hD,OACrB,OAAO2hD,EAAO,GAAGpF,UAAUynG,GAE7B,IAAIjgJ,EAAM49C,EAAO,GAAG3hD,OAChBf,EAAI,EACR,KAAO8E,EAAM49C,EAAO1iD,GAAGe,QAAUgkJ,GAC/BjgJ,GAAO49C,EAAO1iD,GAAGe,OACjBf,IAEF,OAAO0iD,EAAO1iD,GAAGs9C,UAAUynG,EAASjgJ,EACtC,EAEAyM,KAAK2tD,aAAe,SAAsB6P,GACxC,GAAIA,EAAQ,GAAK2gE,EAAS,OAAO,KACjC,MAAMqV,EAASh2E,EAAQ/K,EACvB,GAAI+gF,EAAS,EAAIriG,EAAO,GAAG3hD,OACzB,OAAO2hD,EAAO,GAAGwc,aAAa6lF,GAEhC,GAAIA,EAASriG,EAAO,GAAG3hD,OACrB,OAAOwjJ,EAAiB7hG,EAAQ,EAAGqiG,GAGrC,IAAIjgJ,EAAM49C,EAAO,GAAG3hD,OAChBf,EAAI,EACR,KAAO8E,EAAM49C,EAAO1iD,GAAGe,QAAUgkJ,GAC/BjgJ,GAAO49C,EAAO1iD,GAAGe,OACjBf,IAEF,OAAI+kJ,EAASjgJ,EAAM,EAAI49C,EAAO1iD,GAAGe,OACxB2hD,EAAO1iD,GAAGk/D,aAAa6lF,EAASjgJ,GAElCy/I,EAAiB7hG,EAAQ1iD,EAAG+kJ,EAASjgJ,EAC9C,EASAyM,KAAK69G,IAAM,SAAaj8B,GACtB,MAAM1kF,EAASmgH,EAAYo2B,UAAU7xD,GAC/BtjF,EAAOpB,EAAO1N,OACpB,OAAa,IAAT8O,KAEA6/H,EAAQ7/H,GAAQi1I,KAEpBpiG,EAAO37C,KAAK0H,GACZihI,GAAS7/H,GAEF,EACT,EAEA0B,KAAKi+G,QAAU,SAAiB3/G,GAC9B,GAAIA,EAAO,EACT,OAEF,GAAIA,GAAQ6/H,EAEV,YADAn+H,KAAK8Q,QAGP,IAAIjkB,EAAO,EACX,KAAOA,EAAOyR,GAAM,CAClB,KAAI6yC,EAAO,GAAG3hD,OAASijE,GAAWn0D,EAAOzR,GAMlC,CACL4lE,GAAYn0D,EAAOzR,EACnBsxI,GAAU7/H,EAAOzR,EACjB,KACF,CAV+C,CAC7C,MAAMqT,EAAQixC,EAAO,GAAG3hD,OAASijE,EACjCthB,EAAOj8C,QACPrI,GAAQqT,EACRi+H,GAASj+H,EACTuyD,EAAU,CACZ,CAKF,CACF,EAEAzyD,KAAK8Q,MAAQ,WACXqgC,EAAS,GACTgtF,EAAQ,EACR1rE,EAAU,CACZ,EAEAzyD,KAAKy9G,UAAY,WACf,OAAO0gB,CACT,EAEAn+H,KAAK+7B,QAAU,WACb,OAAiB,IAAVoiG,CACT,CACF,CAOA,gBAAOsV,CAAU30I,GACf,OAAIA,aAAgBugF,EAAmBvgF,EAChCugF,EAAW3tC,KAAK5yC,EACzB,EAGFiP,EAAO3hB,QAAQixH,YAAcA,EAC7BtvG,EAAO3hB,QAAQ0mJ,WAAaA,C,wBCrL5B/kI,EAAO3hB,QAAUssC,QAAQ,Y,iBCAzB,MAAMsoB,EAAO,EAAQ,OACf,SAAEtT,GAAa,EAAQ,OACvB,aAAEjM,GAAiB,EAAQ,OAC3B,yBAAEkM,GAA6B,EAAQ,OACvC,qBAAEC,GAAyB,EAAQ,OAEjCigC,OAAQ6lE,GAAgBhmG,EAE1BwlC,EAAe,CAGrBA,0BAAyC,SAAmCpnC,EAASv4C,EAAKwF,GACxF,QAAI,CAAC,EAAG,EAAG,EAAG,GAAGm/C,SAASn/C,IACjB+yC,EAAQa,WAAWp5C,EAAKwF,EAGnC,EAGAm6E,kBAAiC,SAA2BygE,EAAU7nG,EAASv4C,EAAKwF,GAClF,IAAIgK,EAAM,EAEV,OAAQhK,GACN,KAAK,EACH,OAAI46I,GACF5wI,EAAM+oC,EAAQ8nG,SAASrgJ,GAChBmgJ,EAAYjyG,EAAaI,KAAM9+B,KAExCA,EAAM+oC,EAAQC,UAAUx4C,GACjBmgJ,EAAYjyG,EAAaG,MAAO7+B,IAEzC,KAAK,EACH,OAAI4wI,GACF5wI,EAAM+oC,EAAQ+nG,YAAYtgJ,GACnBmgJ,EAAYjyG,EAAaM,MAAOh/B,KAEzCA,EAAM+oC,EAAQY,aAAan5C,GACpBmgJ,EAAYjyG,EAAaK,OAAQ/+B,IAE1C,KAAK,EACH,OAAI4wI,GACF5wI,EAAM+oC,EAAQG,YAAY14C,GACnBmgJ,EAAYjyG,EAAaQ,MAAOl/B,KAEzCA,EAAM+oC,EAAQ6hB,aAAap6D,GACpBmgJ,EAAYjyG,EAAaO,OAAQj/B,IAE1C,KAAK,EACH,CACE,IAAI+b,EAAQ,KACZ,MAAMg1H,EACJ9yF,EAAK+jD,SAASj5D,EAAQ6hB,aAAap6D,EAAM,GAAIu4C,EAAQ6hB,aAAap6D,IAAOogJ,GACvEG,EAAU7sC,gBAAkB,KAC9BnoF,EAAQ,IAAI6uB,EAAyB,yBACnCC,EAAqB89C,8BACrB5/C,EAAQ3vC,SAAS,SAAU5I,EAAKwF,KAEpCgK,EAAM+wI,EAAUrpF,WAChB,MAAMspF,EAAQL,EAAYC,EAAWlyG,EAAaU,MAAQV,EAAaS,OAAQn/B,GAK/E,OAJI+b,GACFi1H,EAAM9Y,SAASn8G,GAGVi1H,CACT,CAEF,QACE,OAAO,KAEb,GAEAhmI,EAAO3hB,QAAQ8mF,aAAeA,C,wBCvE9BnlE,EAAO3hB,QAAUssC,QAAQ,M,uCCAzB,MAAM,cAAEmW,GAAkB,EAAQ,MAC5B,gBAAE3G,GAAoB,EAAQ,OAC9B,qBAAEC,GAAyB,EAAQ,OACnC,iBAAEC,GAAqB,EAAQ,MAE/B6Y,EAAW,CACf3Y,iBAAsB31B,EACtB41B,gBAAsB51B,EACtB61B,aAAsB71B,EACtB81B,oBAAsB91B,EACtB+1B,iBAAsB/1B,EACtBg2B,qBAAsBh2B,EACtBi2B,0BAAsBj2B,GAaxB,MAAM0iE,UAAwBxmC,EAE5B,WAAA1xC,CAAYmvB,GACVje,MAAM4yC,EAAU30B,EAClB,CAYA,eAAIgc,GACF,OAAOtoC,KAAKiqH,YACd,CACA,eAAI3hF,CAAYzY,GACd7vB,KAAKiqH,aAAep6F,CACtB,CAYA,cAAI0Y,GACF,OAAOvoC,KAAK4pH,aAAe3oE,EAAS1Y,UACtC,CACA,cAAIA,CAAW1Y,GACb7vB,KAAK4pH,YAAc/5F,CACrB,CAYA,WAAI2Y,GACF,OAAOxoC,KAAKg0I,QACd,CACA,WAAIxrG,CAAQ3Y,GACV7vB,KAAKg0I,SAAWnkH,CAClB,CAOA,kBAAI4Y,GACF,OAAOzoC,KAAKi0I,eACd,CACA,kBAAIxrG,CAAe5Y,GACjB7vB,KAAKi0I,gBAAkBpkH,CACzB,CAOA,eAAI6Y,GACF,OAAO1oC,KAAKgqH,YACd,CACA,eAAIthF,CAAY7Y,GACd7vB,KAAKgqH,aAAen6F,CACtB,CAOA,mBAAI8Y,GACF,OAAO3oC,KAAKk0I,gBACd,CACA,mBAAIvrG,CAAgB9Y,GAClB7vB,KAAKk0I,iBAAmBrkH,CAC1B,CASA,wBAAI+Y,GACF,OAAO5oC,KAAKm0I,qBACd,CACA,wBAAIvrG,CAAqB/Y,GACvB7vB,KAAKm0I,sBAAwBtkH,CAC/B,CAEA,CAAC,4CACC,MAAO,CACL,YAAmBuY,EAAiB9xB,SAAStW,KAAKsoC,aAClD,WAAmBJ,EAAgB5xB,SAAStW,KAAKuoC,YACjD,QAAmBvoC,KAAKwoC,QACxB,eAAmBxoC,KAAKyoC,eACxB,YAAmBzoC,KAAK0oC,YACxB,gBAAmB1oC,KAAK2oC,gBACAR,EAAqB7xB,SAAStW,KAAK2oC,sBACnCh2B,EACxB,qBAAwB3S,KAAK4oC,qBAEjC,CAEA,QAAAzsC,GACE,OAAO45B,EAAa/1B,KACtB,EAGF+N,EAAO3hB,QAAQipF,gBAAkBA,C,iBCvJjC,MAAM,UAAExnC,GAAc,EAAQ,MACxB,oBAAEpI,EAAmB,gBAAEC,GAAoB,EAAQ,OACnD,6BAAEC,GAAiC,EAAQ,MAC3C,wBAAEyxE,GAA4B,EAAQ,OACtC,iBAAErpF,GAAqB,EAAQ,MAGrChgB,EAAO3hB,QAAQq5C,oBAAsBA,EACrC13B,EAAO3hB,QAAQu5C,6BAA+BA,EAC9C53B,EAAO3hB,QAAQgrH,wBAA0BA,EACzCrpG,EAAO3hB,QAAQs5C,gBAAkBA,EAYjC3X,EAAiBqmH,mCAAqCrmH,EAAiBo+E,cAAc,IACnF,IAAIxmE,GAaN5X,EAAiBupF,8BAAgCvpF,EAAiBo+E,cAAcoL,GAC9EH,EAAwBE,8BAA8BzpE,EAAUszB,aAAa,OAAQo2C,EAAU93G,O,WChCjG,MAEMutD,EACF,IAAIvtD,KAAKA,KAAKi3C,MAAM,4CAElB29F,EAAO,UASPC,EAAiB,MACrB,MAAMC,EAAM1gJ,GAAMA,EAAI,GAAK,IAAIA,IAAMA,EAC/BpD,EAAIu8D,EAMV,MAAO,GALMv8D,EAAEgV,iBACJ8uI,EAAI9jJ,EAAEiV,WAAa,MACnB6uI,EAAI9jJ,EAAEkV,cACN4uI,EAAI9jJ,EAAEmV,eACN2uI,EAAI9jJ,EAAEoV,eAElB,EATsB,GAUjB2uI,EAAU,CAAC,cAAe,UAAmBH,EAAMC,GAAgBpyH,KAAK,MAUxEyyB,EAAU,CAKd,QAvCc,UA4Cd,KAAiBqY,EAcjB,cAAiBsnF,EAMjB,OAxDa,CACb,KAAW,OACX,MAAW,EACX,SAAW,GA2DX,KAAiBD,EAKjB,OAAiB,EAMjB,SAAiB,EAKjB,QAAiBG,EAEjBr4I,SAAQ,IACCq4I,GAGXzmI,EAAO3hB,QAAQuoD,QAAUA,C,iBCjGzB,MAAM,KAAExe,GAAS,EAAQ,MAuBzBpoB,EAAO3hB,QAAQ+7C,qBAAuBhS,EAAKE,IAbd,CAK3Bo+G,iBAAmB,mBAKnBC,kBAAmB,qB,iBCpBrB,MAAQ7mG,WAAW,kBAAE+rB,IAAwB,EAAQ,KAyCrD7rD,EAAO3hB,QAAQ+3D,QA9Bd,MASG,UAAAomB,GACI,OAAOvqE,KAAKkiE,UAAY,IAC5B,CAUA,UAAA5a,CAAWj7D,GACP2T,KAAKunD,YAAYqS,EAAkB,UAAWvtE,GAClD,CACA,WAAAk7D,CAAYl7D,GACR2T,KAAKkiE,SAAW71E,CACpB,E,iBCrCJ,MAAM,KAAE8pC,GAAS,EAAQ,MAkDzBpoB,EAAO3hB,QAAQg8C,iBAAmBjS,EAAKE,IA7Bd,CAIvB+wF,KAAc,OAKdutB,UAAc,YAKdC,QAAc,UAMdC,aAAc,eAMdvc,OAAc,U,uCC/ChB,MAAMwc,EAAW,EAAQ,MA4CzB/mI,EAAO3hB,QAAQyiD,cAnCf,MAgBE,WAAA1xC,IAAemvB,GACbpgC,OAAOwrB,OAAO1X,QAASssB,EACzB,CAQA,QAAAnwB,GACE,OAAO45B,EAAa/1B,KACtB,CAEA,KAAA8qB,GACE,OAAOgqH,EAAS90I,KAtCG,MACH,EAsClB,E,iBCzCF,MAAM+5B,EAAyB,EAAQ,OACjC,mBAAEiJ,GAAuB,EAAQ,MAEjCqyD,EAAe,CACrBA,aAA4B,SAAsB/vC,GAChD,MAAM7yD,EAAM,GACZ,KAAM6yD,aAAqBtiB,GACzB,OAAO,KAET,IAAIvI,EAAW,KAEf,IADA6qB,EAAUm0D,SACHn0D,EAAUo1C,WACfjgE,EAAW6qB,EAAUC,UACjB9qB,GACFV,EAAuBe,oBAAoBC,yBAAyBN,EAAUhoC,GAIlF,OADA6yD,EAAUm0D,SACHhnH,EAAIyvB,KAAK,GAClB,GAEAnU,EAAO3hB,QAAQipG,aAAeA,C,iBCrB9B,MAAMh8D,EAAU,EAAQ,OAClB,YAAEs2E,GAAgB,EAAQ,OAC1B,YAAEvX,GAAgB,EAAQ,OAC1B,wBAAE6d,GAA4B,EAAQ,OACtC,qBAAE1+C,GAAyB,EAAQ,OACnC,aAAErV,GAAiB,EAAQ,OAC3B,yBAAE1oB,GAA6B,EAAQ,MAEvC,eAAED,EAAc,qBAAEsoB,GAAyBxoB,EAEjDtrB,EAAO3hB,QAAQmtC,eAAiBA,EAChCxrB,EAAO3hB,QAAQy1D,qBAAuBA,EACtC9zC,EAAO3hB,QAAQujH,YAAcA,EAC7B5hG,EAAO3hB,QAAQgsG,YAAcA,EAC7BrqF,EAAO3hB,QAAQ6pH,wBAA0BA,EACzCloG,EAAO3hB,QAAQmrE,qBAAuBA,EACtCxpD,EAAO3hB,QAAQ81D,aAAeA,EAC9Bn0C,EAAO3hB,QAAQotC,yBAA2BA,C,iBCjB1C,MAAM,QAAEmiC,GAAY,EAAQ,MAEtBo5E,EAAO,OAEb,SAASC,EAAkBC,GACzB,MAAMC,EAAO,IAAIz1I,KACX01I,EAAkB,IAAI53G,OAAO,EAAI03G,EAASzlJ,QAChD,IAAI4lJ,EAAK5xI,OAAO0xI,EAAKzvI,eACjB4vI,EAAK7xI,OAAO0xI,EAAKxvI,WAAa,GAC9B4vI,EAAK9xI,OAAO0xI,EAAKvvI,WACjB4vI,EAAK/xI,OAAO0xI,EAAKtvI,YACjB4vI,EAAKhyI,OAAO0xI,EAAKrvI,cACjB4vI,EAAKjyI,OAAO0xI,EAAKpvI,cACjB0C,EAAKhF,OAAO0xI,EAAKQ,mBAWrB,OATAN,EAAK,IAAI73G,OAAO,EAAI63G,EAAG5lJ,QAAU4lJ,EACjCC,EAAKA,EAAG7lJ,OAAS,EAAI,IAAI6lJ,IAAOA,EAChCC,EAAKA,EAAG9lJ,OAAS,EAAI,IAAI8lJ,IAAOA,EAChCC,EAAKA,EAAG/lJ,OAAS,EAAI,IAAI+lJ,IAAOA,EAChCC,EAAKA,EAAGhmJ,OAAS,EAAI,IAAIgmJ,IAAOA,EAChCC,EAAKA,EAAGjmJ,OAAS,EAAI,IAAIimJ,IAAOA,EAChCjtI,EAAKA,EAAGhZ,OAAS,EAAI,IAAIgZ,IAAOA,EAChCA,EAAKA,EAAGhZ,OAAS,EAAI,IAAIgZ,IAAOA,EAEzB,CAAC,GAAG4sI,KAAMC,KAAMC,KAAMC,KAAMC,KAAMC,KAAMjtI,IAAM,GAAGysI,IAAWE,IACrE,CA+JApnI,EAAO3hB,QAAQ8xF,eAnJf,cAA6BviB,EAM3B,WAAAx+D,CAAYw4I,GAWV,IAAIC,EAASb,EAYTc,EAASd,EAYTe,EAAQf,EAYRgB,EAAQhB,EAaRh8G,EAASg8G,EAYTiB,EAASjB,EAEb,MAAMkB,EAAUN,IACI,oBAAX5+G,OACmBC,OACGD,QAC3Bk/G,QAGAA,IAAYA,EAAQp6I,KAAOo6I,EAAQn6E,QASjCm6E,EAAQp6I,UAAuB8W,IAAhBsjI,EAAQp6I,KACzB+5I,EAASM,SAAS7oJ,UAAUmiB,KAAKliB,KAAK2oJ,EAAQp6I,IAAKo6I,GACnDJ,EAASK,SAAS7oJ,UAAUmiB,KAAKliB,KAAK2oJ,EAAQp6I,IAAKo6I,IAC1CA,EAAQp6E,OAAkC,mBAAlBo6E,EAAQp6E,QACzC+5E,EAASM,SAAS7oJ,UAAUmiB,KAAKliB,KAAK2oJ,EAAQp6E,MAAOo6E,GACrDJ,EAASK,SAAS7oJ,UAAUmiB,KAAKliB,KAAK2oJ,EAAQp6E,MAAOo6E,IAMrDH,EADEG,EAAQ7zH,WAAyBzP,IAAjBsjI,EAAQ7zH,KAClB8zH,SAAS7oJ,UAAUmiB,KAAKliB,KAAK2oJ,EAAQ7zH,KAAM6zH,GAE3CC,SAAS7oJ,UAAUmiB,KAAKliB,KAAK2oJ,EAAQp6I,IAAKo6I,GAMlDF,EADEE,EAAQn6E,WAAyBnpD,IAAjBsjI,EAAQn6E,KAClBo6E,SAAS7oJ,UAAUmiB,KAAKliB,KAAK2oJ,EAAQn6E,KAAMm6E,GAE3CC,SAAS7oJ,UAAUmiB,KAAKliB,KAAK2oJ,EAAQp6I,IAAKo6I,GAQhDA,EAAQn3H,YAA2BnM,IAAlBsjI,EAAQn3H,OAC3Bia,EAASm9G,SAAS7oJ,UAAUmiB,KAAKliB,KAAK2oJ,EAAQn3H,MAAOm3H,GACrDD,EAASE,SAAS7oJ,UAAUmiB,KAAKliB,KAAK2oJ,EAAQn3H,MAAOm3H,KAErDl9G,EAASm9G,SAAS7oJ,UAAUmiB,KAAKliB,KAAK2oJ,EAAQp6I,IAAKo6I,GACnDD,EAASE,SAAS7oJ,UAAUmiB,KAAKliB,KAAK2oJ,EAAQp6I,IAAKo6I,KAMvD5nI,MAAM,IAAIG,KAAWonI,KAAUZ,EAAkB,YAAaxmI,IACxD,IAAIA,KAAWqnI,KAAUb,EAAkB,YAAaxmI,IACxD,IAAIA,KAAWsnI,KAASd,EAAkB,WAAYxmI,IACtD,IAAIA,KAAWunI,KAASf,EAAkB,WAAYxmI,IACtD,IAAIA,KAAWuqB,KAAUi8G,EAAkB,YAAaxmI,IACxD,IAAIA,KAAWwnI,KAAUhB,EAAkB,YAAaxmI,IAChE,E,uCCnLF,MAAM6yB,EAAiB,EAAQ,MACzB7B,EAAa,EAAQ,MACrBn0B,EAAsB,EAAQ,OAC9B,OAAEE,GAAW,EAAQ,OACrB,aAAEwyE,EAAY,qBACZE,GAAyB,EAAQ,OACnC,eAAEzyE,GAAmB,EAAQ,OAC7B,MAAEC,EAAK,UACLoiC,GAAc,EAAQ,MACxB,oBAAEw5E,GAAwB,EAAQ,OAClC,2BAAEz7G,EAA0B,aAC1BC,EAAY,eACZC,EAAc,oBACd6tG,EAAmB,iBACnByd,GAAqB,EAAQ,OAC/B,aAAExhF,GAAiB,EAAQ,OAC3B,cAAEpY,GAAkB,EAAQ,MAC5B,SAAE+9F,GAAa,EAAQ,OACvB,aAAEpvH,GAAiB,EAAQ,OAC3B,gBAAEijE,GAAoB,EAAQ,OAC9B,uBAAE48B,GAA2B,EAAQ,OACrC,uBAAEgsB,GAA2B,EAAQ,OACrC,QAAEzrH,GAAY,EAAQ,OACtB,gBAAE6oE,EAAe,gBAAEC,EAAe,yBAAEhtC,EAAwB,UAC1Dq4E,EAAS,2BAAE97B,GAA+B,EAAQ,OACpD,SAAEl3C,EAAQ,aACRjM,GAAiB,EAAQ,MAC3B,aAAEj1B,GAAiB,EAAQ,OAC3B,eAAE0nC,GAAmB,EAAQ,MAC7B,mBAAE+3D,GAAuB,EAAQ,OACjC,iBAAEx/F,GAAqB,EAAQ,OAC/B,iBAAEC,GAAqB,EAAQ,OAC/B,WAAEsB,GAAe,EAAQ,KACzB,gBAAErB,GAAoB,EAAQ,OAC9B,iBAAEguD,GAAqB,EAAQ,OAC/B,kBAAEiR,GAAsB,EAAQ,OAChC,2BAAEuqE,GAA+B,EAAQ,OACzC,mBAAEvpI,GAAuB,EAAQ,MACjC,aAAEo+E,GAAiB,EAAQ,OAC3B,iBAAEn+E,GAAqB,EAAQ,OAC/B,MAAEwwE,EAAK,SACLtwE,GAAa,EAAQ,OACvB,YAAEE,GAAgB,EAAQ,MAC1B,sBAAE2nC,EAAqB,kBACrBkN,EAAiB,oBACjB3rC,GAAwB,EAAQ,MA0BxC,SAASigI,EAAmBp3G,GAC1B,OAAQA,GACAA,IAAsB8iB,EAAkBqB,uBACxCnkB,IAAsB8iB,EAAkBoB,aACxClkB,IAAsB8iB,EAAkBmB,WAClD,CAEA,SAASi5B,GAAgBC,GACvB,MAAO,oBAAoB1vE,EAAiB6J,SAAS6lE,IACvD,CAKA,MAAMk6D,GAA2B,OAyEjC,MAAMz2F,WAAgBhK,EAmBpB,WAAAz4C,CAAY4iB,EAAYu2H,EAAiBC,GACvCloI,MAAM,CACJ+lB,MAAQ3nB,EAAiB4nB,OACzBF,OAAQ1nB,EAAiB4vE,QACzBH,qBAEF,MAAM4C,EAAO9+E,KACbA,KAAKuO,OAAS,IAAIpC,EAClBnM,KAAKuO,OAAOimB,UAAY,YAAsBhmB,GAC5C,MAAO,CAAC,YAAYswE,EAAK03D,YAAc13D,EAAK03D,YAAY/nI,aAAe,cAAeD,EACxF,EACA,MAAM,UAAEG,GAAc3O,KAAKuO,OAE3B,GAAI,MAACwR,EAAoD,CACvD,MAAM,UAAEnR,GAAc5O,KAAKuO,MAE7B,CAGAvO,KAAKhT,GAAG,QAAU8xB,IAChB,MAAM,UAAErB,GAAcqhE,EAAKvwE,OAC3BkP,EAAUqB,EAAMsD,KAAKtD,SAGvB,MAAM7Q,EAAoB,IAAI29D,EAAkB7rD,GAChD,CACE,MAAM,UAAEnR,GAAc5O,KAAKuO,MAE7B,CAmCA,GA7BAvO,KAAKy2I,qBAAuBz2I,KAAK02I,oBAAoBJ,GACrDt2I,KAAK22I,mBAAqB32I,KAAK42I,kBAAkBL,GAG7C9qI,EAAM05E,MAAMl3E,EAAkBkgH,cAEhClgH,EAAkBkgH,WAAa3wF,EAAcO,sBAI/C9vB,EAAkB4oI,uBAAuBr5G,EAAcQ,8BAGnDvyB,EAAM05E,MAAMl3E,EAAkB0/G,0BAEhC1/G,EAAkB0/G,uBAAyBnwF,EAAcS,6BAS3Dk4G,EAA2Bl1G,SAAShzB,GAKhCxC,EAAMwR,QAAQhP,EAAkBm0C,0BAA2B,CAI7D,MAAM00F,EAAmB7oI,EAAkB+wB,kBACrC+3G,EAtMZ,WACE,MAAM,eAAE7wG,GAAmB76B,EAGzB,MAAO,CAACy2C,EAAkBuB,UAkB9B,CAgL0B2zF,GACdC,EAAaH,EAAmBC,EAAY16I,QAAQy6I,GAAoB,EAC9E,GAAIG,EAAa,EAEf,MAAM,IAAInrI,EAAe,+BACAg2C,EAAkBxrC,SAASwgI,8CAE3BjrI,EAAa6kG,oBAKxC,GAFAziG,EAAkBm0C,yBAA2B20F,EAAYrhJ,MAAMuhJ,GAEL,IAAtDhpI,EAAkBm0C,yBAAyB5yD,OAG7C,MAAM,IAAIsc,EAAe,iDACvBg2C,EAAkBxrC,SAASwgI,KAC3BjrI,EAAa6kG,oBAIjB,MAAMwmC,EAAajpI,EAAkBm0C,yBAAyBz3C,OAAOxb,GACnEinJ,EAAmBjnJ,IAWrB,GAV0B,IAAtB+nJ,EAAW1nJ,SACbwQ,KAAKm3I,kBACH,8EACElpI,EAAkBm0C,yBAAyBpgC,IAAI5mB,GAC7C0mD,EAAkBxrC,SAASlb,IAAI8mB,KAAK,SAMxCjU,EAAkByR,oBAAoBC,QAAS,CACjD,GAAI3f,KAAKm3I,kBACP,MAAM,IAAIrrI,EACR,gFACAD,EAAa6kG,mBACb1wG,KAAKm3I,mBAITlpI,EAAkBm0C,yBAA2B80F,CAC/C,CAEF,KAAO,CAKL,MAAME,EAAqBnpI,EAAkBm0C,yBAE7C,IADmBg1F,EAAmBnjB,MAAMmiB,GAC3B,CACf,MAAMiB,EAAUD,EAAmBzsI,OAAOxb,IAAMinJ,EAAmBjnJ,IAGnE,GAFA6Q,KAAKm3I,kBAAoB,wEACvBE,EAAQr1H,IAAI5mB,GAAK0mD,EAAkBxrC,SAASlb,IAAI8mB,KAAK,QACnDjU,EAAkByR,oBAAoBC,QACxC,MAAM,IAAI7T,EACR,gFACAD,EAAa6kG,mBACb1wG,KAAKm3I,kBAGX,CACF,CAIAn3I,KAAK+O,mBAAqBd,EAC1BjO,KAAKs3I,cAAgB,IAAIj6D,EACzBr9E,KAAKkP,OAAS,IAAIqsH,EAASttH,GAC3BjO,KAAKw2I,YAAc,IAAIxoI,EACrBhO,KAAK+O,mBACL/O,KACAA,KAAKs3I,cACLt3I,KAAKkP,QAEPlP,KAAKw2I,YAAYjoJ,QACjByR,KAAKw2I,YAAY/2H,yBAOjBzf,KAAKu3I,qBAAuB,CAAC,EAC7Bv3I,KAAKw3I,cAAgBnwB,EAAoBC,0BAA0Br5G,GACnEjO,KAAKy3I,QAAU,CACjB,CA4BA,OAAAvhI,GACE,MAAM,UAAEvH,GAAc3O,KAAKuO,OAErBkb,EAASzpB,KAAK03I,eAAe/8E,EAAiB1/C,SACpD,GAAIwO,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAEnE,MAAMnR,EAAS,IAAIrE,EAAgB,CAAE3C,KAAM0C,EAAiBuO,UAC5Djb,KAAKw2I,YAAYrkI,aAAanB,EAChC,CAOA,UAAIV,GAmBF,MANqB,CACnBzD,EAAiB6E,WACjB7E,EAAiB4J,aACjB5J,EAAiBqO,eAGCyG,KAAKg2H,KAAe33I,KAAKw2I,YAAYr8D,eAAew9D,GAC1E,CAUA,UAAA36D,GACE,MAAM,UAAEruE,GAAc3O,KAAKuO,OAErBkb,EAASzpB,KAAK03I,eAAe/8E,EAAiBrmD,YACpD,GAAImV,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAEnE,MAAMnR,EAAS,IAAIrE,EAAgB,CAAE3C,KAAM0C,EAAiB4H,aAC5DtU,KAAKw2I,YAAYrkI,aAAanB,EAChC,CAMA,OAAAyS,GACE,MAAM,UAAE9U,GAAc3O,KAAKuO,OAEvBvO,KAAKojB,WAGT7Y,WAAW,KACTvK,KAAKw2I,YAAYrkI,aACf,IAAIxF,EAAgB,CAAE3C,KAAM0C,EAAiB4E,WAE/CtR,KAAKw2I,YAAYpoD,eACjBpuF,KAAKwgH,iBACLxgH,KAAKojB,WAAY,GAChB,EACL,CA8CA,SAAAsxG,CAAUtmG,EAAOH,EAAqBjK,EAAgBuL,GACpD,MAAM,UAAE5gB,GAAc3O,KAAKuO,OACuB6f,GAASA,EAAMjyB,UAAYiyB,EAAMjyB,WACnF,MAAMstB,EAASzpB,KAAK03I,eAAe/8E,EAAiBC,MACpD,GAAInxC,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAInE,GAFA0rB,EAAUszB,aAAa,QAAS/yC,EAAOiT,EAAe11B,aACtDyiB,EAAM6S,WACF7S,EAAMrP,YAAcsiB,EAAeyE,gBAAgByB,MACrD,MAAM,IAAIz7B,EAAe,oCACAu1B,EAAeyE,gBAAgBxvB,SAAS8X,EAAMrP,aAC9ClT,EAAa46B,sBAGxCoH,EAAU+pG,mBAAmB,sBAAuB3pH,GACpD4f,EAAUqrB,kBAAkB,iBAAkB3pC,GAC9Cse,EAAU2rB,wBAAwB,iBAAkBjqC,EAAgB,IAAK,GAEzE,MAAMvZ,EAAahW,KAAKw2I,YAAYhmH,mBAClCpC,IACEH,EACFjK,EACAuL,EACA3iB,EAAmBkkB,kBACnB,EACA,CAACxB,EAAUxJ,IACT9lB,KAAK63I,iCAAiCvoH,EACAxJ,EACAmI,IAEpC3iB,EAAe,EAAQ,MAC7B,GAAI0K,IAAe1K,EAAa6K,oBAAoB0X,SAClD,MAAM,IAAI/hB,EAAe,wGACrBD,EAAaiiB,mBACbxiB,EAAa6K,oBAAoBG,SAASN,IAEhD,GAAIA,IAAe1K,EAAa6K,oBAAoBC,GAClD,MAAM,IAAItK,EAAe,sDAAuDD,EAAagpF,oBACzFvpF,EAAa6K,oBAAoBG,SAASN,IAEhD,OAAOA,CACT,CAEA,uBAAA3F,CAAwB+d,EAAO+C,EAAOp8B,EAAKqnF,EAAiB73D,EAAUgL,GACpE,MAAM,UAAE5gB,GAAc3O,KAAKuO,OAEa6f,GAASA,EAAMjyB,UAAYiyB,EAAMjyB,WACvDg1B,GAASA,EAAMh1B,UAAYg1B,EAAMh1B,WAInD,MAAMstB,EAASzpB,KAAK03I,eAAe/8E,EAAiBC,MACpD,GAAInxC,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAInE,GAFA0rB,EAAUszB,aAAa,QAAS/yC,EAAOiT,EAAe11B,aACtDyiB,EAAM6S,WACF7S,EAAMrP,YAAcsiB,EAAeyE,gBAAgByB,MACrD,MAAM,IAAIz7B,EAAe,0CACAu1B,EAAeyE,gBAAgBxvB,SAAS8X,EAAMrP,aAC9ClT,EAAa46B,sBAIxC,GAFAoH,EAAUszB,aAAa,QAAShwC,EAAOkQ,EAAe11B,aACtDwlB,EAAM8P,WACD9P,EAAMpS,YAAcsiB,EAAeyE,gBAAgBM,OACvDjV,EAAMpS,YAAcsiB,EAAeyE,gBAAgBO,gBAClD,MAAM,IAAIv6B,EAAe,0CACAu1B,EAAeyE,gBAAgBxvB,SAAS6a,EAAMpS,aAC9ClT,EAAa82B,wBAGxCkL,EAAUqrB,kBAAkB,iBAAkB3pC,GAC9Cse,EAAU2rB,wBAAwB,iBAAkBjqC,EAAgB,IAAK,GAEzE,MAAMvZ,EAAahW,KAAKw2I,YAAYtlH,wBAClC9C,EACA+C,EACA5B,EACAx6B,GACA,EACA,CAACu6B,EAAUxJ,IACT9lB,KAAK83I,sCACHxoH,EACAxJ,EACAvB,IAEAjZ,EAAe,EAAQ,MAC7B,GAAI0K,IAAe1K,EAAa6K,oBAAoB0X,SAClD,MAAM,IAAI/hB,EAAe,wGACrBD,EAAaiiB,mBACbxiB,EAAa6K,oBAAoBG,SAASN,IAEhD,GAAIA,IAAe1K,EAAa6K,oBAAoBC,GAClD,MAAM,IAAItK,EAAe,sDAAuDD,EAAagpF,oBACzFvpF,EAAa6K,oBAAoBG,SAASN,IAEhD,OAAOA,CACT,CA8CA,WAAA+hI,CAAY3pH,EAAOH,EAAqBjK,EAAgBuL,GACtD,MAAM,UAAE5gB,GAAc3O,KAAKuO,OACyB6f,GAASA,EAAMjyB,UAAYiyB,EAAMjyB,WACrF,MAAMstB,EAASzpB,KAAK03I,eAAe/8E,EAAiBC,MACpD,GAAInxC,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAInE,GAFA0rB,EAAUszB,aAAa,QAAS/yC,EAAOiT,EAAe11B,aACtDyiB,EAAM6S,WACF7S,EAAMrP,YAAcsiB,EAAeyE,gBAAgByB,MACrD,MAAM,IAAIz7B,EAAe,sCACAu1B,EAAeyE,gBAAgBxvB,SAAS8X,EAAMrP,aAC9ClT,EAAa46B,sBAGxCoH,EAAU+pG,mBAAmB,sBAAuB3pH,GACpD4f,EAAUqrB,kBAAkB,iBAAkB3pC,GAC9Cse,EAAU2rB,wBAAwB,iBAAkBjqC,EAAgB,IAAK,GAEzE,MAAMvZ,EAAahW,KAAKw2I,YAAYhmH,mBAClCpC,IACEH,EACFjK,EACAuL,EACA3iB,EAAmBqkB,qBACnB,EACA,CAAC3B,EAAUxJ,IACT9lB,KAAK63I,iCAAiCvoH,EACAxJ,EACAmI,IAEpC3iB,EAAe,EAAQ,MAC7B,GAAI0K,IAAe1K,EAAa6K,oBAAoB0X,SAClD,MAAM,IAAI/hB,EAAe,uGACrBD,EAAaiiB,mBACbxiB,EAAa6K,oBAAoBG,SAASN,IAEhD,GAAIA,IAAe1K,EAAa6K,oBAAoBC,GAClD,MAAM,IAAItK,EAAe,qDAAsDD,EAAagpF,oBACxFvpF,EAAa6K,oBAAoBG,SAASN,IAEhD,OAAOA,CACT,CA+BA,+BAAAgiI,CAAgCx1H,GAC9B,MAAM,UAAE7T,GAAc3O,KAAKuO,OACwDiU,GAAmBA,EAAgBrmB,UAAYqmB,EAAgBrmB,WAClJ,MAAMstB,EAASzpB,KAAK03I,eAAe/8E,EAAiBC,MACpD,GAAInxC,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAGnE,MAAMnF,EAAchd,KAAKiQ,gCACvBmlE,EAAgBi0D,eAAe7mH,IAE3BxM,EAAahW,KAAKw2I,YAAYhmH,mBAClCxT,GAF0B,OAI1BrK,OACAA,EACA/F,EAAmBikB,yBACnB,EACA,CAACvB,EAAUxJ,IACT9lB,KAAKi4I,6BAA6B3oH,EACAxJ,IAEhCxa,EAAe,EAAQ,MAC7B,GAAI0K,IAAe1K,EAAa6K,oBAAoB0X,SAClD,MAAM,IAAI/hB,EAAe,wGACrBD,EAAaiiB,mBACbxiB,EAAa6K,oBAAoBG,SAASN,IAEhD,GAAIA,IAAe1K,EAAa6K,oBAAoBC,GAClD,MAAM,IAAItK,EAAe,sDAAuDD,EAAagpF,oBACzFvpF,EAAa6K,oBAAoBG,SAASN,IAEhD,OAAOA,CACT,CA2BA,cAAAkiI,CAAetoH,EAAwBC,EAAUN,EAAgBvL,GAC/D,MAAM,UAAErV,GAAc3O,KAAKuO,OAErBkb,EAASzpB,KAAK03I,eAAe/8E,EAAiBC,MACpD,GAAInxC,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAGnE,MAAM,MAAE43C,GAAU14B,EASlB,IAAI1sB,EALJk5B,EAAUqzB,aAAa,yBAA0BtxC,EAAwBo8E,GAEzEn+D,EAAUqrB,kBAAkB,iBAAkB3pC,GAC9Cse,EAAU2rB,wBAAwB,iBAAkBjqC,EAAgB,IAAK,GAYzE,MAyJMvZ,EAAahW,KAAKw2I,YAAY7mH,mBAAmBC,EACAC,EACA7L,EACAuL,EA5J7B5I,IACxB,MAAMzP,EAAWyP,EAAQxP,cACzB,GAA8B,MAA1BD,EAAS5D,cACX,GAAIsc,IAA2Bo8E,EAAuBijB,mBAEpDjvH,KAAK+O,mBAAmB4+G,uBAAyB99F,EACjDlb,EAAenI,EAAamH,MAAMlH,EAAiB43G,mBACjBntG,EAASa,eACTb,EAAS5D,aACT,EACA0Q,EACA,MAClChkB,KAAK6jB,UAAUlP,QACV,GAAIib,IAA2Bo8E,EAAuBmjB,YAAa,CAExE,MAAMgpB,EAAkB5rI,EAAQgT,wBAC9Bvf,KAAK+O,mBAAmByQ,cACpB44H,EAAcr+E,EAAM0b,eAAe0iE,GAEnCE,EAAkB9rI,EAAQgT,wBAC9BoH,EAAQuM,oBACJolH,EAAcv+E,EAAM0b,eAAe4iE,GAEnCE,EAAoBC,IACxB,MAAMC,EAAOD,EAAQrhI,cACrB,GAA0B,MAAtBshI,EAAKnlI,aAEPtT,KAAK+O,mBAAmBkkB,iBAAiBtM,EAAQuM,oBAAsB,IACvElzB,KAAK+O,mBAAmBokB,kBACtB5mB,EAAQ6mB,iBAAiBpzB,KAAK+O,mBAAmByQ,eACnDxf,KAAK+O,mBAAmBo/G,WAAat+F,EACrClb,EAAenI,EAAamH,MAAMlH,EAAiB43G,mBACjBo0B,EAAK1gI,eACL0gI,EAAKnlI,aACL,EACA0Q,EACA,MAClChkB,KAAK6jB,UAAUlP,OACV,CACL,MAAMpB,EAAe3H,EAA2BkM,gBAAgB2gI,EAAKnlI,aACLmlI,EAAK1gI,gBACjExE,IAAiB1H,EAAayd,8BAClBtpB,KAAK+O,mBAAmB2pI,kCAEtC/jI,EAAenI,EAAamH,MAAMlH,EAAiB43G,mBACjBo0B,EAAK1gI,eACL0gI,EAAKnlI,aACL,EACA0Q,EACA,MAClChkB,KAAK6jB,UAAUlP,IACNpB,IAAiB1H,EAAayd,8BAC9B/V,IAAiB1H,EAAaolG,kCAC9B19F,IAAiB1H,EAAailG,sBAC9Bv9F,IAAiB1H,EAAa2kG,yBAC9Bj9F,IAAiB1H,EAAamlG,uBAEvCr8F,EAAenI,EAAamH,MAAMlH,EAAiBqb,sBACjB2wH,EAAK1gI,eACL0gI,EAAKnlI,aACLC,EACAyQ,EACA,MAClChkB,KAAK6jB,UAAUlP,KAGfA,EAAenI,EAAamH,MAAMlH,EAAiBqb,sBACjB2wH,EAAK1gI,eACL0gI,EAAKnlI,aACLzH,EAAaklG,yBACb/sF,EACA,MAClChkB,KAAK6jB,UAAUlP,GAEnB,GAGIgkI,EAAuBH,IAC3B,MAAMC,EAAOD,EAAQrhI,cACrB,GAA0B,MAAtBshI,EAAKnlI,aAGPtT,KAAKw2I,YAAYhmH,mBAAmB8nH,GACA,EACAt0H,EACAhkB,KAAK+O,mBAAmBmV,mBACxBtX,EAAmBmkB,cACnB,EACAwnH,OAC/B,CACL,MAAMhlI,EAAe3H,EAA2BkM,gBAAgB2gI,EAAKnlI,aACLmlI,EAAK1gI,gBACjExE,IAAiB1H,EAAa0d,wBAC9BvpB,KAAK+O,mBAAmB6pI,gCAI1B54I,KAAKw2I,YAAYhmH,mBAAmB8nH,GACA,EACAt0H,EACAhkB,KAAK+O,mBAAmBmV,mBACxBtX,EAAmBmkB,cACnB,EACAwnH,GAC3BhlI,IAAiB1H,EAAaolG,kCAC9B19F,IAAiB1H,EAAailG,sBAC9Bv9F,IAAiB1H,EAAa0d,wBAC9BhW,IAAiB1H,EAAa2kG,yBAEvC77F,EAAenI,EAAamH,MAAMlH,EAAiBqb,sBACjB2wH,EAAK1gI,eACL0gI,EAAKnlI,aACLC,EACA,KACA,MAClCvT,KAAK6jB,UAAUlP,KAGfA,EAAenI,EAAamH,MAAMlH,EAAiBqb,sBACjB2wH,EAAK1gI,eACL0gI,EAAKnlI,aACLzH,EAAaklG,yBACb,KACA,MAClC/wG,KAAK6jB,UAAUlP,GAEnB,GAKF3U,KAAKw2I,YAAYhmH,mBAAmB4nH,GACA,EACAp0H,EACAhkB,KAAK+O,mBAAmBmV,mBACxBtX,EAAmByrB,iBACnB,EACAsgH,EACtC,MACK,CAEL,MAAMplI,EAAe3H,EAA2BkM,gBAAgBZ,EAAS5D,aACT4D,EAASa,gBACzEpD,EAAenI,EAAamH,MAAMlH,EAAiBqb,sBACjB5Q,EAASa,eACTb,EAAS5D,aACTC,EACAyQ,EACA,MAClChkB,KAAK6jB,UAAUlP,EACjB,IAQEqB,IAAeG,EAAoBC,KAInCzB,EADEqB,IAAeG,EAAoB0X,SACtBrhB,EAAamH,MAAMlH,EAAiBqb,sBACjB,iDACA,KACAjc,EAAaiiB,mBACb,KACA,MAEnBthB,EAAamH,MAAMlH,EAAiBqb,sBACjB,yBACA,KACAjc,EAAasW,kBACb,KACA,MAEpCniB,KAAK6jB,UAAUlP,GAEnB,CA0BA,+BAAAkkI,CAAgCC,GAC9B,MAAM,UAAEnqI,GAAc3O,KAAKuO,OACrBwqI,EAAoB,CAAC,cAAe,WACpCtvH,EAASzpB,KAAK03I,eAAe/8E,EAAiBG,iBACpD,GAAIrxC,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAEnE,IAAK22H,GAAgE,iBAA7BA,EACtC,MAAM,IAAIhtI,EAAe,wEAAyED,EAAa82B,uBAAwB,MAEzI,IAAIxlB,EACJ,IAAKA,KAAO27H,EACV,IAAKC,EAAkB7gG,SAAS/6B,GAC9B,MAAM,IAAIrR,EAAe,iEAAkED,EAAa6kG,mBAAoB,MAGhI,MAAMsoC,EAAWh5I,KAAKu1H,uBACtBrpI,OAAOwrB,OAAOshI,EAAUF,GACxB3C,EAA2Bl1G,SAAS+3G,GACpCh5I,KAAK+O,mBAAqBiqI,EAC1B9sJ,OAAOwrB,OAAO1X,KAAKw2I,YAAYznI,mBAAoB+pI,EAErD,CAgCA,IAAAlpI,CAAKD,GACH,MAAM,UAAEhB,GAAc3O,KAAKuO,OAErBkb,EAASzpB,KAAK03I,eAAe/8E,EAAiBE,KAAMlrD,GAC1D,GAAI8Z,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAKnE,GAHA0rB,EAAUszB,aAAa,UAAWxxD,EAAS6vB,EAAWpzB,UAGjDpM,KAAKmQ,UAAU3E,EAAemnE,qBAIjChjE,EAAQi7D,4BAGL5qE,KAAKi5I,wCAAwCtpI,IAC9C,MAAM,IAAI7D,EACR,kEACAD,EAAasW,mBAGnBniB,KAAKk5I,uBAAuBvpI,EAC9B,CAEA,uCAAAspI,CAAwCtpI,GACtC,OAAO,CACT,CAsCA,WAAAwpI,CAAYxpI,EACAsrC,OAAUtoC,EACVulH,OAA0BvlH,EAC1BymI,OAA0BzmI,EAC1B28D,OAAa38D,GAEvB,MAAM,UAAEhE,GAAc3O,KAAKuO,OAErBkb,EAASzpB,KAAK03I,eAAe/8E,EAAiBE,KAAMlrD,GAC1D,GAAI8Z,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAEnE0rB,EAAUszB,aAAa,UAAWxxD,EAAS6vB,EAAWpzB,SACtDyhC,EAAUqrB,kBAAkB,UAAWje,GACvCpN,EAAU2rB,wBAAwB,UAAWve,EAAS,KAAM,KAC5DpN,EAAUwrG,oBAAoB,0BAA2BnhB,GACzDrqF,EAAUwrG,oBAAoB,0BAA2BD,GAGzD,MAAMnhB,EAAgBtoH,EAAQkzD,mBAC1Bo1D,SACFtoH,EAAQ+2C,iBAAiB2vF,GAA2B74G,EAAcM,UAEpE,MAAMg0D,EAAUniF,EAAQuiB,aACxB,GAAI4/D,QAA2C,CAC7C,MAAMwnD,EAAej4G,EAAe04B,MAAM0b,eACxCz1E,KAAK+O,mBAAmBymH,eAC1B7lH,EAAQk3C,WAAWyyF,EACrB,CAEAt5I,KAAKk5I,uBAAuBvpI,GAG5B3P,KAAKu5I,0BAA0B5pI,EAAQkzD,mBACRu2E,EACAn+F,EACAi9E,EACA5oD,EACjC,CAuCA,SAAAkqE,CAAUC,EAAkBC,GAC1B,MAAM,UAAE/qI,GAAc3O,KAAKuO,OAErBkb,EAASzpB,KAAK03I,eAAe/8E,EAAiBE,KAAM6+E,GAC1D,GAAIjwH,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAOnE,GAJA0rB,EAAUuzB,sBAAsB,mBAAoBq4E,EAAkBj6G,EAAWpzB,SACjFyhC,EAAUszB,aAAa,eAAgBu4E,EAAcl6G,EAAWpzB,SAEhEstI,EAAa7zF,mBAAkB,GAC3B4zF,EAAkB,CACpBC,EAAahzF,iBAAiB+yF,EAAiB52E,oBAC/C,MAAMivB,EAAU2nD,EAAiBvnH,aACjC,GAAI4/D,QACF,MAAM,IAAIhmF,EAAe,uCACAD,EAAa0zB,wBAExCm6G,EAAan2E,eAAek2E,EAAiBvnH,aAC/C,CACAlyB,KAAKk5I,uBAAuBQ,EAC9B,CAcA,OAAA70H,CAAQC,GACN,MAAM,UAAEnW,GAAc3O,KAAKuO,OAErBkb,EAASzpB,KAAK03I,eAAe/8E,EAAiBG,iBACpD,GAAIrxC,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAInE,OADA0rB,EAAUqzB,aAAa,WAAYp8C,EAAU/X,GACtC/M,KAAKw2I,YAAY3xH,QAAQC,EAClC,CAQA,UAAAxB,GACE,MAAM,UAAE3U,GAAc3O,KAAKuO,OAErBkb,EAASzpB,KAAK03I,eAAe/8E,EAAiBG,iBACpD,GAAIrxC,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAEnEniB,KAAKw2I,YAAYlzH,YACnB,CASA,oBAAAiyG,GACE,MAAM,UAAE5mH,GAAc3O,KAAKuO,OAErBkb,EAASzpB,KAAK03I,eAAe/8E,EAAiBG,iBACpD,GAAIrxC,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAGnE,MAAMpC,EAAa/f,KAAK+O,mBAAmB+b,QAM3C,OALqB9qB,KAAK25I,oBACJ9sI,EAAiBiG,cAAiB9S,KAAKw2I,YAAYvgI,YACvE8J,EAAW65H,8BAA8B55I,KAAKw2I,YAAYvgI,WAAW8oB,wBAGhEhf,CACT,CAqBA,SAAA5P,CAAU0pI,GACR,MAAM,UAAElrI,GAAc3O,KAAKuO,OAErBkb,EAASzpB,KAAK03I,eAAe/8E,EAAiBG,iBACpD,GAAIrxC,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAEnE0rB,EAAUorB,SAAS,iBAAkB4gF,GAErC,MAAMr7H,EAAOxe,KAAKw3I,cAClB,QAAKh5H,IAKmC,kBAAzBA,EAAKq7H,IAAiCr7H,EAAKq7H,GAC5D,CAqBA,aAAAzpI,CAAcypI,GACZ,MAAM,UAAElrI,GAAc3O,KAAKuO,OAErBkb,EAASzpB,KAAK03I,eAAe/8E,EAAiBG,iBACpD,GAAIrxC,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAGnE0rB,EAAUorB,SAAS,iBAAkB4gF,GAErC,MAAM92I,EAAM/C,KAAKuzB,eAAesmH,GAChC,MAAmB,kBAAR92I,EACF2qC,EAASmgC,OAAOpsC,EAAaE,KAAM5+B,GAEzB,iBAARA,EACF2qC,EAASmgC,OAAOpsC,EAAaU,MAAOp/B,GAE1B,iBAARA,EACF2qC,EAASmgC,OAAOpsC,EAAaY,OAAQt/B,GAGvC,IACT,CAEA,cAAAwwB,CAAesmH,GACb,MAAMr7H,EAAOxe,KAAKw3I,cAClB,IAAKh5H,EAAM,OAAO,KAElB,MAAMnyB,EAAQmyB,EAAKq7H,GACnB,YAAkBlnI,IAAVtmB,EAAuB,KAAOA,CACxC,CAYA,eAAAstJ,GACE,MAAM,UAAEhrI,GAAc3O,KAAKuO,OAErBkb,EAASzpB,KAAK03I,eAAe/8E,EAAiBG,iBACpD,GAAIrxC,EACF,MAAM,IAAI3d,EAAe2d,EAAQ5d,EAAasW,kBAAmB,MAEnE,MAAM23H,EAAmB95I,KAAK+5I,cAC9B,OAAQD,GACN,KAAKjtI,EAAiBkO,gBACpB,OAAOiwE,EAAaC,UACtB,KAAKp+E,EAAiBqO,cACpB,OAAO8vE,EAAa9vE,cACtB,KAAKrO,EAAiBiG,aACpB,OAAOk4E,EAAal4E,aACtB,KAAKjG,EAAiBq+E,cACpB,OAAOF,EAAaE,cACtB,KAAKr+E,EAAiB6E,WACtB,KAAK7E,EAAiB0I,iCACtB,KAAK1I,EAAiBuI,gBACtB,KAAKvI,EAAiBiJ,yBACtB,KAAKjJ,EAAiBmtI,uBACtB,KAAKntI,EAAiBgK,kBACtB,KAAKhK,EAAiBotI,yBACtB,KAAKptI,EAAiBoN,oBACtB,KAAKpN,EAAiB6L,yBACpB,OAAOsyE,EAAat5E,WACtB,QACE,CAYE,MAAM,SAAE7C,GAAa7O,KAAKuO,OAE1B,OADAM,EAAS,0BAA0BhC,EAAiByJ,SAASwjI,MACtD,IACT,EAEN,CAOA,WAAAC,GACE,OAAO/5I,KAAKw2I,YAAY9nI,qBAC1B,CAgBA,kBAAAwrI,CAAmBn6H,GACjB,MAAM,UAAEpR,GAAc3O,KAAKuO,OAE3B,OAAO,IAAIwvE,EAAah+D,EAAY/f,KAAM,CAGxCyP,QAASzP,KAAKw2I,YAAY/mI,QAAQD,KAAKxP,KAAKw2I,cAEhD,CAyDA,qBAAAr1H,CAAsBE,GACpB,MAAM,UAAE1S,GAAc3O,KAAKuO,OAE3B,GAAIvO,KAAKm3I,kBACP,MAAM,IAAIrrI,EAAe,sDACAD,EAAa4hB,eACbztB,KAAKm3I,mBAEhC,GAAI,MAAC91H,EAAoE,CACvE,MAAM,UAAEzS,GAAc5O,KAAKuO,MAE7B,CACA,OAAOvO,KAAKw2I,YAAYr1H,sBAAsBE,EAChD,CAmBA,iBAAA0O,CAAkBvN,EAAiByN,EAAiBkqH,EAAcn2H,GAChE6pB,EAAU+pG,mBAAmB,eAAgBuC,GAC7CtsG,EAAUszB,aAAa,kBAAmB3+C,EAAiBt2B,OAAQ2f,EAAa82B,uBAAwB,8CAA8CngB,GACtJqrB,EAAU8rB,SAAS,uBAAwBn3C,EAAgBxY,KAAM6B,EAAa82B,uBAAwB,mDAEtG,MAAMy3G,EAAmB,IAAIhlE,EAAgB5yD,GAC7C,IAAK43H,EAAiB1qB,QACpB,MAAM,IAAI/V,EAAoB,yDAG5B1pF,IACF4d,EAAUuzB,sBAAsB,kBAAmBnxC,EAAiB/jC,OAAQ2f,EAAa82B,uBAAwB,0FAA0F1S,GAC3MoY,EAAyBpH,SAAShR,IAEpC,MAAM1L,EAAWvkB,KAAKq6I,wBAAwB7qI,KAAKxP,KAAMm6I,GAAc,GACvE,OAAOn6I,KAAKw2I,YAAYzmH,kBAAkBqqH,EAAkBnqH,EAAiBjM,EAAgBO,EAG/F,CAgBA,mBAAA4L,CAAoB3N,EAAiB83H,EAAet2H,GAElD,GADA6pB,EAAU+pG,mBAAmB,gBAAiB0C,KACxC93H,aAA2Bt2B,QAC/B,MAAM,IAAI4f,EAAe,mCAAoCD,EAAa82B,wBAE5EkL,EAAU8rB,SAAS,uBAAwBn3C,EAAgBxY,KAAM6B,EAAa82B,uBAAwB,qDAGtG,MAAMpe,EAAWvkB,KAAKq6I,wBAAwB7qI,KAAKxP,KAAMs6I,GAAe,GAExE,OAAOt6I,KAAKw2I,YAAYrmH,oBAAoB3N,EAAiBwB,EAAgBO,EAE/E,CAUA,uBAAA81H,CAAwB97B,EAAQg8B,EAAW7tJ,EAAK08B,GAC9C,MAAM,eAACpF,GAAkBoF,EACnB9V,EAAe5mB,EAAIq7D,WAAWxuC,YAC9BxB,EAAiBrrB,EAAIq7D,WAAWtuC,WAChClG,EAAe3H,EAA2ByU,kBAAkB/M,EAAcyE,GAC1EyK,EAAkB,IAAI4yD,EAC5B5yD,EAAgBktG,aAAU/8G,EAC1B,MAAMsd,EAAkB,IAAIolD,GACtB,gBAAEjuC,GAAoB/F,EAExB30C,EAAI8tJ,qBAAuB9tJ,EAAI8tJ,oBAAoBhrJ,OAAS,GAC9DgzB,EAAgBxY,KAAOo9B,EAAgBI,YAAY96C,EAAI8tJ,qBACvDh4H,EAAgBzuB,KAAO2sH,EAAUt6E,OACxB15C,EAAIghJ,yBAA2BhhJ,EAAIghJ,wBAAwBl+I,OAAS,GAC7EgzB,EAAgBxY,KAAOo9B,EAAgBI,YAAY96C,EAAIghJ,yBACvDlrH,EAAgBzuB,KAAO2sH,EAAUa,iBAEjC/+F,EAAgBxY,UAAQ2I,EACxB6P,EAAgBzuB,UAAO4e,GAGzB6P,EAAgBktG,QAAUhjI,EAAI+tJ,gBAC9BxqH,EAAgBsY,WAAa77C,EAAI8gJ,gBACjCv9G,EAAgB0Y,gBAAkBj8C,EAAIwhJ,0BACtCj+G,EAAgB2Y,qBAAuBl8C,EAAIqiJ,mBAC3C9+G,EAAgBwY,eAAiB/7C,EAAImiJ,gBACrC5+G,EAAgBqY,YAAc57C,EAAIohJ,0BAClC79G,EAAgBuY,QAAU97C,EAAIiiJ,WAC9B1+G,EAAgByY,YAAch8C,EAAIqhJ,iBAElC,IAAIxgH,EAAS,KACS,MAAjBja,GAA0BC,IAAiB1H,EAAampG,oBAAsBzhG,IAAiB1H,EAAaopG,kBAC/G1nF,EAASq3D,EAA2BpiE,EAAgBxY,OAItD,IAAIqjD,EAAU5gD,EAAiB+3G,gBACV,MAAjBlxG,GAGEirG,GAAUg8B,GAAahnI,GAAgB1H,EAAaymG,wBAFxDjlD,EAAU5gD,EAAiBg4G,cAIhBlG,GAAWg8B,GAAchnI,GAAgB1H,EAAa+lG,oBAAsBr+F,GAAgB1H,EAAagmG,8BAClHxkD,EAAU5gD,EAAiBg4G,cAI/B,MAAMi2B,EAAiB,IAAIxmG,EAAemZ,EACtCt1C,EACAzE,EACAC,EACAyQ,EACAuJ,EACA/K,EACAyN,GACJjwB,KAAK6jB,UAAU62H,EACjB,CA0DA,kBAAAr4H,CAAmBs4H,GACjB,MAAM,UAAEhsI,GAAc3O,KAAKuO,OAE3B,GAAIvO,KAAKm3I,kBACP,MAAM,IAAIrrI,EAAe,mDACAD,EAAa4hB,eACbztB,KAAKm3I,mBAEhC,GAAI,MAACwD,EAAkE,CACrE,MAAM,UAAE/rI,GAAc5O,KAAKuO,MAE7B,CACA,OAAOvO,KAAKw2I,YAAYn0H,mBAAmBs4H,EAC7C,CAcA,+BAAA1qI,CAAgCuS,GAC9B,MAAM,gBACJsjB,EAAe,MACfysB,EAAK,MACLwH,GACE14B,EAEJ,IAAIu5G,EAAkB90G,EAAgByB,MAClC/kB,EAAgBzuB,OAAS2sH,EAAUt6E,QACrCw0G,EAAkBp4H,EAAgBktG,QAC9B5pF,EAAgBM,MAChBN,EAAgBO,iBAGtB,MAAMr8B,EAAOwY,EAAgBxY,MAAQ,KAErC,GAAIwY,EAAgBktG,QAAS,CAC3BnkH,EAAOvB,EAAM,qEAIb,OAHsBwY,EAAgBzD,YAAc2hG,EAAUt6E,MAC1DmsB,EAAMG,oBACNqH,EAAM0b,gBACWzrE,EACvB,CAEA,OAAOhK,KAAKkQ,2BAA2B0qI,EAAiB5wI,EAC1D,CASA,0BAAAkG,CAA2B0qI,EAAiB5wI,GAC1C,MAAM,UAAE2E,GAAc3O,KAAKuO,QACrB,uBAAE65C,EAAsB,gBAAEhhB,GAAoB/F,EAG9Cw5G,EAAM76I,KAAKu1H,uBAAuB3iG,kBACxC,IAAK5yB,KAAKmQ,UAAU3E,EAAeomE,qBAA/B,MACAipE,GAAoD,IAAfA,EAAIrrJ,OAC3C,MAAM,IAAIsc,EACR,iFACAD,EAAasW,mBAGjB,MAAM24H,EAAY9wI,GAAQA,EAAK69B,WAAW,QACtC79B,EACAo9B,EAAgBC,oBAAoBuzG,EAAiBC,EAAK7wI,GAE9D,OAAOo+C,EAAuB6R,0BAA0B6gF,EAC1D,CAMA,SAAAj3H,CAAUlP,GACR,IAAKA,EAAc,OACnB,GAAI3U,KAAKojB,UAAW,OAEpB,MAAM,UAAEzU,GAAc3O,KAAKuO,OAE3BvO,KAAK22I,mBAAmBngC,uBAAuBx2G,KACA2U,EACA3U,KAAK22I,mBAAmBrnE,WACzE,CAQA,gBAAA/pD,GACE,MAAM,UAAE5W,GAAc3O,KAAKuO,OAE3B,OAAOvO,KAAKw2I,YAAYjxH,kBAC1B,CAMA,0BAAAwF,CAA2BE,GACzBjrB,KAAKw2I,YAAYzrH,2BAA2BE,EAC9C,CAQA,cAAAysH,CAAeqD,EAAeprI,GAC5B,IAAK3P,KAAKw2I,YAAa,OAAO,EAC9B,IAAIwE,GAAQ,EACZ,MAAMlB,EAAmB95I,KAAKw2I,YAAY9nI,sBAE1C,GAAIorI,IAAqBjtI,EAAiB+X,SACxCo2H,GAAQ,OACH,GAAIvvI,EAAMwgB,SAAS8uH,GACxB,OAAQA,GACN,KAAKpgF,EAAiB1/C,QAChB6+H,IAAqBjtI,EAAiBouI,KACtCnB,IAAqBjtI,EAAiBiG,eACxCkoI,GAAQ,GAEV,MACF,KAAKrgF,EAAiBrmD,WAChBwlI,IAAqBjtI,EAAiBouI,MACxCD,GAAQ,GAEV,MACF,KAAKrgF,EAAiBE,KACtB,KAAKF,EAAiBC,KACpBogF,EACIlB,IAAqBjtI,EAAiBkO,iBACvCpL,GAAYA,EAAQqd,oBAAsBwS,EAAWlzB,wBAAwB2gB,OAChF,MAEF,KAAK0tC,EAAiBG,gBACpBkgF,GAAQ,EACR,MACF,QACEA,GAAQ,OAGZA,GAAQ,EAGV,OAAIA,EACK,KAGF,4BAA4BD,oBAAgCjB,GACrE,CAMA,kBAAAzmH,CAAmB6nH,GACjBl7I,KAAKw3I,cAAgB0D,CACvB,CAMA,sBAAAhC,CAAuBvpI,GAGrB,MAAMwrI,EAAWxrI,EAAQ0zD,iBACzB,GAAI53D,EAAMwR,QAAQk+H,IAAa1vI,EAAM05E,MAAMg2D,EAAShqI,WAClD,MAAM,IAAIrF,EAAe,wCAAyCD,EAAa+kG,eAGjF,MAAMwqC,EAAkBzrI,EAAQk4D,qBAC1BwzE,EAAoBD,QAC1B,GAAIp7I,KAAK+O,mBAAmBusI,yBACvBD,GAAqB1rI,EAAQ45D,wBAAyB,CACzD,MAAM7pE,EAAM,IAAID,KAChBkQ,EAAQs3C,mBAAmBvnD,EAAIg3B,WAC/B/mB,EAAQ45D,wBAAyB,CACnC,CACA,MAAMgyE,EAAiB5rI,EAAQo4D,oBACzByzE,EAAmBD,QACrBv7I,KAAK+O,mBAAmB0sI,yBACvBD,GAAoB7rI,EAAQ25D,yBAC/B35D,EAAQo3C,kBAAkB/mD,KAAKy3I,WAC/B9nI,EAAQ25D,uBAAwB,GAElC,MAAMoyE,EAAW/rI,EAAQg4D,cACnBg0E,EAAaD,QACf17I,KAAK+O,mBAAmB6sI,iBAAmBD,GAC7ChsI,EAAQm3C,YAAY9mD,KAAK+O,mBAAmBo/G,YAU9CnuH,KAAKw2I,YAAYzqH,sBAAsBpc,EACzC,CAUA,yBAAA4pI,CAA0BthB,EAAe4jB,EAAa93H,EAAY+3H,EAAcxsE,GAC9E,GAAI7jE,EAAMw6E,KAAKgyC,GACb,OAEF,MAAM,UAAEtpH,EAAS,UAAE8O,GAAczd,KAAKuO,OAIhCmP,EAAQnT,WAAW,KACvBvK,KAAKw2I,YAAY/mI,QAAQ1C,EAASqxD,oBAElC,WACwBp+D,KAAKu3I,qBAAqBtf,IAE9Cx6G,EAAU,8BAA8Bw6G,IAE5C,CAAE,MAAO3rI,GACPmxB,EAAU,8BAA8Bw6G,IAAiB3rI,EAC3D,CAEA,GAAImf,EAAMwgB,SAAS4vH,GAAc,CAC/B,MAAME,EAAevvI,EAAamH,MAAMyjH,EAAiBhT,gBACjB,kBACA6T,GAExC4jB,EAAY77I,KAAM+7I,EAAczsE,EAClC,GACCvrD,GAAc/jB,KAAK+O,mBAAmBmV,oBAEnCC,EAAiB,IAAI6zG,EAAuBC,EACAv6G,EACAo+H,EACAD,EACAvsE,GAClDtvE,KAAKu3I,qBAAqBtf,GAAiB9zG,CAC7C,CAOA,wBAAA63H,CAAyB/jB,GACvB,MAAM,UAAEtpH,EAAS,UAAE8O,GAAczd,KAAKuO,OAEtC,GAAI9C,EAAMw6E,KAAKgyC,KAAmBj4H,KAAKu3I,qBACrC,OAAO,KAGT,MAAM/5H,EAAMxd,KAAKu3I,qBAAqBtf,GACtC,GAAIz6G,QACF,OAAO,KAGLA,EAAIE,QACN3I,aAAayI,EAAIE,OACjBF,EAAIE,MAAQ,MAGd,WACwB1d,KAAKu3I,qBAAqBtf,IAE9Cx6G,EAAU,8BAA8Bw6G,IAE5C,CAAE,MAAO3rI,GACPmxB,EAAU,8BAA8Bw6G,IAAiB3rI,EAC3D,CACA,OAAOkxB,CACT,CAKA,cAAA5C,GACE,MAAM,UAAEjM,GAAc3O,KAAKuO,OACvBvO,KAAKu3I,sBAEPrrJ,OAAOwb,KAAK1H,KAAKu3I,sBAAsBj9H,QAAS6C,IAC9C,MAAM8+H,EAAUj8I,KAAKg8I,yBAAyB7+H,GAC9C,GAAI8+H,GAAWA,EAAQ9jB,oBAAqB,CAC1C,MAAM4jB,EAAevvI,EAAamH,MAAMyjH,EAAiBjT,gBACjB,kBACAhnG,GACxC8+H,EAAQ9jB,oBAAoBn4H,KAAM+7I,EAAcE,EAAQ3sE,WAC1D,GAGN,CAMA,iBAAApoD,CAAkBg1H,GAChB,MAAM,UAAEvtI,EAAS,SAAEE,GAAa7O,KAAKuO,OAC/Bq1G,EAAcs4B,EACpB,GAAIl8I,KAAK+O,mBAAmBotI,0BAA2B,CACrD,MAAMz8I,EAAM,IAAID,KAChBmkH,EAAYn8C,mBAAqB/nE,EAAIg3B,SACvC,CAEA,GAAIktF,EAAYv8C,iBAAkB,CAChC,MAAM4wD,EAAgBrU,EAAY/gD,mBAClC,GAAIp3D,EAAMwgB,SAASgsG,GAAgB,CACjC,MAAMgkB,EAAUj8I,KAAKg8I,yBAAyB/jB,GAC9C,GAAgB,OAAZgkB,EAKF,OAJAj8I,KAAKw2I,YAAY/mI,QAAQ1C,EAASwxD,0BAElC09E,EAAQ/jB,wBAAwBl4H,KAAM4jH,EAAaq4B,EAAQ3sE,YAK7D,GAAI2oD,EAAcpwF,WAAWwuG,IAK3B,OAFAxnI,EAAS,uEACT7O,KAAKw2I,YAAY/mI,QAAQ1C,EAASiZ,sBAIpC,GAAIiyG,EAAcpwF,WAAWo2C,MACrBF,GAAgB/9E,KAAKy2I,qBAAqBnnE,sBAAsByO,GAMtE,OAFAlvE,EAAS,iEACT7O,KAAKw2I,YAAY/mI,QAAQ1C,EAASiZ,qBAGtC,CACF,CAIAhmB,KAAKy2I,qBAAqBpnE,oBAAoBrvE,KACA4jH,EACA5jH,KAAKy2I,qBAAqBnnE,WAE1E,CASA,gCAAAuoE,CAAiCroH,EAAQpG,EAASugE,GAChD,MAAMzyE,EAAWsY,EAAOrY,eAClB,aACJ7D,EAAY,eACZyE,GACGb,GACC,eAAE8M,GAAmBoF,EAK3B,GAAqB,MAAjB9V,EAAsB,CAExB,MAAMqB,EAAenI,EAAamH,MAAMlH,EAAiBy3G,gBACjBnsG,EACAzE,EACA,EACA0Q,EACA,MACxChkB,KAAK6jB,UAAUlP,EACjB,KAAO,CACL,MAAM0E,EAAkBpM,EAAYO,mBAAmBgiB,EAAOlW,yBAC9DtZ,KAAKw2I,YAAY37H,8BAA8BvH,EACAyE,EACAsB,EACA2K,EACA2lE,EACjD,CACF,CAUA,qCAAAmuD,CAAsCtoH,EAAQpG,EAAS7E,GACrD,MAAM,UAAE5V,GAAc3O,KAAKuO,OAE3B,IAAKihB,EAGH,YADAjL,GAAS,EAAO1Y,EAAa4I,QAAS,EAAG,WAI3C,MAAMyC,EAAWsY,EAAOrY,eAClB,aACJ7D,EAAY,eACZyE,GACGb,EACC3D,EAAe3H,EAA2ByU,kBAAkB/M,EAAcyE,GAE3D,MAAjBzE,GACDC,IAAiB1H,EAAayd,8BAC9B/V,IAAiB1H,EAAa0d,uBAE/BhF,GAAS,EAAM,EAAGjR,EAAcyE,GAEhCwM,GAAS,EAAOhR,EAAcD,EAAcyE,EAEhD,CAUA,4BAAAkgI,CAA6BmE,EAAehzH,GAC1C,MAAMlS,EAAWklI,EAAcjlI,eACzB,aACJ7D,EAAY,eACZyE,GACEb,GACE,eAAE8M,GAAmBoF,EACrB6+G,EAA6B,MAAjB30H,EACd7G,EAAiB63G,wBACjB73G,EAAiB83G,2BACf5uG,EAA2B,MAAjBrC,EACZ,EACA1H,EAA2ByU,kBAAkB/M,EACAyE,GACjD/X,KAAK6jB,UAAUrX,EAAamH,MAAMs0H,EACAlwH,EACAzE,EACAqC,EACAqO,GAEpC,CAUA,6BAAAnJ,CAA8BzD,EACAoC,EACAH,EACA2K,EACA2lE,GAC5B,MAAMp2E,EAAe3H,EAA2BkM,gBAAgBV,EAAUoC,GAC1E,GAAKjG,IAAiB1H,EAAayd,8BAC9BtpB,KAAK+O,mBAAmB2pI,kCACxBnlI,IAAiB1H,EAAa0d,wBAC7BvpB,KAAK+O,mBAAmB6pI,iCAC5B,GAAIjvD,EAAgB,CAElB,MAAMh1E,EAAenI,EAAamH,MAChClH,EAAiBy3G,gBACjB1qG,EACApC,EACA,EACA4M,EACA,MAEFhkB,KAAK6jB,UAAUlP,EACjB,MACK,CAEL,MAAMA,EAAenI,EAAamH,MAChClH,EAAiBw3G,mBACjBzqG,EACApC,EACA7D,EACAyQ,EACA,UAAU3K,KAEZrZ,KAAK6jB,UAAUlP,EACjB,CACF,CAMA,cAAA+7G,GACE,OAAO1wH,KAAK22I,kBACd,CAMA,cAAA7lB,CAAeurB,GACbr8I,KAAK22I,mBAAqB0F,CAC5B,CAMA,gBAAA1rB,GACE,OAAO3wH,KAAKy2I,oBACd,CAMA,gBAAA7lB,CAAiB0rB,GACft8I,KAAKy2I,qBAAuB6F,CAC9B,CAMA,iBAAA/sI,GACE,OAAOvP,KAAKw2I,YAAYjnI,mBAC1B,CAQA,iBAAAqnI,CAAkBL,GAChB,MAAM,SAAE/0H,GAAaxhB,KAAKuO,OACpB89F,EACCkqC,EACDA,EAAc//B,uBAA+B+/B,EAC1C,IAAItqC,EAAmBsqC,GAFH,KAI7B,OAAO,IAAItqC,EAAmB,CAAC/9F,EAASyG,EAAc85D,EAAK8tE,KACzD,MAAM,iBAAEpoG,GAAqBx/B,EAC7B,GAAI03F,EACF,IACEA,EAAkBmK,uBAAuBtoG,EAASyG,EAAc85D,EAAK8tE,EACvE,CAAE,MAAOz3I,GACP,MAAMga,EAAQ5yB,OAAOwrB,OAAO,IAAI5L,EAC9B,wEACEW,EAAiB6J,SAAS69B,KAC1BtoC,EAAamnG,eACb,aAAa,CAAC7+D,EAAkBx/B,EAAc85D,EAAK8tE,MAAQz3I,KAC1D,CACDwf,MAAOxf,EAAGwf,MACVlC,KAAO,CACLrG,MAAO,CACL/R,KAAemqC,EACfksE,cAAe,oBAAoB5zG,EAAiB6J,SAAS69B,KAC7D3lC,KAAe,CAACmG,EAAc85D,EAAK8tE,IAErCz9H,MAAOha,KAIb0c,EAAS1C,EAAM3iB,WAAY2iB,EAAMsD,KACnC,CAEFpiB,KAAK65C,KAAK1F,EAAkBx/B,IAEhC,CAQA,mBAAA+hI,CAAoBJ,GAClB,MAAM,SAAE90H,GAAaxhB,KAAKuO,OAEpB69F,EACCkqC,EACDA,EAAgBjnE,oBAA4BinE,EACzC,IAAIlnE,EAAgBknE,GAFE,KAKzBj2B,EAAgB,oBAAoB5zG,EAAiB6J,SAAS7J,EAAiB4vE,WAC/EmgE,EAAkB,CAAC13I,EAAI6K,EAASopD,IAAW7sE,OAAOwrB,OACtD,IAAI5L,EAAe,2DAA2Du0G,IAC3Dx0G,EAAamnG,gBAChC,CACE1uF,MAAOxf,EAAGwf,MACVlC,KAAO,CACLrG,MAAO,CACL/R,KAAMyC,EAAiB4vE,QACvBgkC,gBACA7xG,KAAM,CAACmB,EAASopD,IAElBj6C,MAAOha,KAIb,OAAO,IAAIsqE,EAAgB,CAAClhE,EAASyB,EAASopD,KAC5C,GAAIqzC,EACF,IACEA,EAAoB/8B,oBAAoBnhE,EAASyB,EAASopD,EAC5D,CAAE,MAAOj0D,GACP,MAAMga,EAAQ09H,EAAgB13I,EAAI6K,EAASopD,GAAQ58D,WACnDqlB,EAAS1C,EAAOA,EAAMsD,KAAMtd,EAC9B,CAEF,IACE9E,KAAKo/G,WAAWzvG,EAClB,CAAE,MAAO7K,GACP9E,KAAK65C,KAAK,QAAS2iG,EAAgB13I,EAAI6K,EAASopD,GAClD,GAEJ,CAMA,qBAAIvrC,GACF,QAASxtB,KAAKm3I,iBAChB,CAMA,sBAAI/8H,GACF,OAAIpa,KAAKwtB,oBACLxtB,KAAKw3I,cACAx3I,KAAKmQ,UAAU3E,EAAemmE,iCADvC,EAIF,CAMA,uBAAIh4D,GACF,OAAI3Z,KAAKwtB,oBACLxtB,KAAKw3I,cACAx3I,KAAKmQ,UAAU3E,EAAegoB,iCADvC,EAIF,CAMA,YAAIjN,GACF,OAAOvmB,KAAKojB,SACd,CAEA,CAAC,4CACC,MAAO,CACL,UAAapjB,KAAKw2I,aAAex2I,KAAKw2I,YAAY/nI,cAAgB,QAClE,UAAazO,KAAKulB,mBAClB,MAAaylE,EAAa10E,SAAStW,KAAK25I,mBAE5C,CAEA,QAAAx9I,GACE,OAAO45B,EAAa/1B,KACtB,EAGF+N,EAAO3hB,QAAQwzD,QAAUA,E,iBCr2EzB,MAAM,kBAAEkC,GAAsB,EAAQ,OAChC,SAAEwV,GAAa,EAAQ,OACvB,yBAAE99B,GAA6B,EAAQ,KAyB7CzrB,EAAO3hB,QAAQ6pH,wBAjBf,cAAsC3+C,EAQpC,WAAAn6D,CAAYshC,EAAQ+4B,EAAQC,GAC1BppD,MAAMowB,EAAQqjB,EAAkBqB,sBAAuBqU,EAAQC,EACjE,CAEA,aAAAC,GACE,OAAOl+B,EAAyBK,aAAeL,EAAyBG,WAC1E,E,iBCxBF,MAAM,YAAEhuB,GAAgB,EAAQ,OAC1B,uBAAEy8C,GAA2B,EAAQ,OACrC,gBAAEtiB,GAAoB,EAAQ,OAC9B,gBAAEsB,GAAoB,EAAQ,MAC9B,UAAEyG,GAAc,EAAQ,MACxB,MAAE0kB,GAAU,EAAQ,OACpB,iBAAExkC,GAAqB,EAAQ,OAC/B,MAAEgsC,GAAU,EAAQ,MAa1BhsC,EAAiBC,uBAAyBD,EAAiBo+E,cAAejkF,IACxE2lB,EAAU8rB,SAAS,YAAazxC,GACzB6xC,EAAM0b,eAAevtD,KAG9B6F,EAAiB0uH,YAAc1uH,EAAiBo+E,cAAcjkF,GAAa,IAAI6xC,EAAM7xC,IAarF6F,EAAiB2uH,8BAAgC3uH,EAAiBo+E,cAAex5C,IAC/E9kB,EAAU8rB,SAAS,YAAahH,GACzBJ,EAAMG,oBAAoBC,KAGnC5kD,EAAO3hB,QAAQuf,YAAcA,EAC7BoC,EAAO3hB,QAAQg8D,uBAAyBA,EACxCr6C,EAAO3hB,QAAQ05C,gBAAkBA,EACjC/3B,EAAO3hB,QAAQg7C,gBAAkBA,EACjCr5B,EAAO3hB,QAAQmmE,MAAQA,EACvBxkD,EAAO3hB,QAAQ2tE,MAAQA,C,iBChDvB,MAAM,wBAAEob,GAA4B,EAAQ,OACtC,gBAAEjtC,GAAoB,EAAQ,OAC9B,gBAAEktC,GAAoB,EAAQ,OAC9B,yBAAEurC,GAA6B,EAAQ,OACvC,qBAAEx4E,GAAyB,EAAQ,OACnC,iBAAEC,GAAqB,EAAQ,OAC/B,gBAAEitC,GAAoB,EAAQ,OAC9B,yBAAEhtC,GAA6B,EAAQ,MACvC,UAAEq4E,GAAc,EAAQ,OACxB,sBAAE38B,EAAqB,2BAAEa,GAA+B,EAAQ,MAEtE72E,EAAO3hB,QAAQ+oF,wBAA0BA,EACzCpnE,EAAO3hB,QAAQ87C,gBAAkBA,EACjCn6B,EAAO3hB,QAAQgpF,gBAAkBA,EACjCrnE,EAAO3hB,QAAQu0H,yBAA2BA,EAC1C5yG,EAAO3hB,QAAQ+7C,qBAAuBA,EACtCp6B,EAAO3hB,QAAQg8C,iBAAmBA,EAClCr6B,EAAO3hB,QAAQipF,gBAAkBA,EACjCtnE,EAAO3hB,QAAQi8C,yBAA2BA,EAC1Ct6B,EAAO3hB,QAAQs0H,UAAYA,EAC3B3yG,EAAO3hB,QAAQ23F,sBAAwBA,EACvCh2E,EAAO3hB,QAAQw4F,2BAA6BA,C,iBCrB5C,MAAM,KAAEzuD,GAAS,EAAQ,MAWzBpoB,EAAO3hB,QAAQk7B,yBAA2B6O,EAAKE,IALd,CAC/B9O,MAAQ,EACRynG,OAAQ,G,iBCRV,MAAM2tB,EAAmB,EAAQ,MAC3BxxI,EAAe,EAAQ,OACvB,cAAE0jC,GAAkB,EAAQ,MAC5B,qBAAE48B,GAAyB,EAAQ,OACnC,MAAEhgE,GAAU,EAAQ,MACpB,SAAE+V,GAAa,EAAQ,OACvB,aAAE1U,GAAiB,EAAQ,MAkBjC,MAAM8vI,EAAgD,CACpD,8BACA,0BACA,uBACA,oBACA,gBACA,aACA,yBACA,eACA,8BACA,0BACA,uBACA,oBACA,gBACA,cACA16H,KAAK,KAED26H,EAAkD,CACtD,oBACA,aACA,gBACA,oBACA,aACA,gBACA,eACA,8BACA,uBACA,0BACA,8BACA,uBACA,0BACA,0BAMI7wE,EACJ,CACA,QACA,UACA,UACA,WAojBF,MAAM8wE,EA7YN,cAAoCjuG,EAIlC,qBAAI7P,GACF,OAAOh/B,KAAK+8I,WACd,CACA,qBAAI/9G,CAAkB3yC,GACpB2T,KAAK+8I,YAAc1wJ,CACrB,CAKA,4BAAI+1D,GACF,OAAOpiD,KAAKg9I,sBACd,CACA,4BAAI56F,CAAyB/1D,GAC3B2T,KAAKg9I,uBAAyB3wJ,CAChC,CAKA,oCAAIgkC,GACF,OAAOrwB,KAAKi9I,qBAAuB,KACrC,CACA,oCAAI5sH,CAAiChkC,GACnC2T,KAAKi9I,oBAAsB5wJ,CAC7B,CAMA,0BAAI6wJ,GACF,OAAOl9I,KAAKm9I,gBACd,CACA,0BAAAC,CAA2B/wJ,GACzB2T,KAAKm9I,iBAAmB9wJ,CAC1B,CAKA,6BAAIgxJ,GACF,OAAOr9I,KAAKm9I,gBACd,CACA,6BAAAvD,CAA8BvtJ,GAC5B2T,KAAKm9I,iBAAmB9wJ,CAC1B,CAKA,wBAAIs0F,GACF,OAAO3gF,KAAKs9I,cACd,CACA,wBAAI38D,CAAqBt0F,GACvB2T,KAAKs9I,eAAiBjxJ,CACxB,CAYA,wBAAIy/E,GACF,OAAOrgE,EAAMwR,QAAQjd,KAAKu9I,uBACtB,KACAv9I,KAAKu9I,qBACX,CACA,wBAAIzxE,CAAqBj8C,GACvB7vB,KAAKu9I,sBAAwB1tH,CAC/B,CAUA,kBAAIq8C,GACF,OAAOzgE,EAAMwR,QAAQjd,KAAKw9I,iBAAmB,GAAKx9I,KAAKw9I,eACzD,CACA,kBAAItxE,CAAer8C,GACjB7vB,KAAKw9I,gBAAkB3tH,CACzB,CAUA,kBAAIu8C,GACF,OAAO3gE,EAAMwR,QAAQjd,KAAKy9I,iBAAmB,GAAKz9I,KAAKy9I,eACzD,CACA,kBAAIrxE,CAAev8C,GACjB7vB,KAAKy9I,gBAAkB5tH,CACzB,CA2BA,mBAAIy8C,GACF,OAAO7gE,EAAMwR,QAAQjd,KAAK09I,kBACtBd,EACA58I,KAAK09I,gBACX,CACA,mBAAIpxE,CAAgBz8C,GAClB7vB,KAAK09I,iBAAmB7tH,CAC1B,CAYA,0BAAI88C,GAEF,YAA8Bh6D,IAA1B3S,KAAK29I,iBAAqF,MAA7Cx3I,QAAQgmF,IAAIyxD,6BAC/B,OAA1B59I,KAAK29I,kBACF39I,KAAK29I,gBACd,CACA,0BAAIhxE,CAAuB98C,GACzB7vB,KAAK29I,iBAAmB9tH,CAC1B,CAaA,kBAAI+8C,GACF,OAAOnhE,EAAMwR,QAAQjd,KAAK69I,iBACtB,KACA79I,KAAK69I,eACX,CACA,kBAAIjxE,CAAe/8C,GACjB7vB,KAAK69I,gBAAkBhuH,CACzB,CAgBA,4BAAIs7C,GACF,OAAO1/D,EAAMwR,QAAQjd,KAAK89I,mBACtB,KACA99I,KAAK89I,iBACX,CACA,4BAAI3yE,CAAyBt7C,GAC3B7vB,KAAK89I,kBAAoBjuH,CAC3B,CAeA,UAAIo9C,GACF,OAAOxhE,EAAMwR,QAAQjd,KAAK+9I,SACtB,GACA/9I,KAAK+9I,OACX,CACA,UAAI9wE,CAAOp9C,GACT7vB,KAAK+9I,QAAUluH,CACjB,CAWA,kBAAIq9C,GACF,OAAOzhE,EAAMwR,QAAQjd,KAAKg+I,eAAiB,GAAKh+I,KAAKg+I,aACvD,CACA,kBAAI9wE,CAAer9C,GACjB7vB,KAAKg+I,cAAgBnuH,CACvB,CAYA,iBAAIu9C,GACF,OAAO3hE,EAAMwR,QAAQjd,KAAKi+I,gBAAkB,GAAKj+I,KAAKi+I,cACxD,CACA,iBAAI7wE,CAAcv9C,GAChB7vB,KAAKi+I,eAAiBpuH,CACxB,CAWA,yBAAIw9C,GACF,OAAO5hE,EAAMwR,QAAQjd,KAAKk+I,sBAAwB,GAAKl+I,KAAKk+I,oBAC9D,CACA,yBAAI7wE,CAAsBx9C,GACxB7vB,KAAKk+I,qBAAuBruH,CAC9B,CAaA,kBAAIy9C,GACF,OAAO7hE,EAAMwR,QAAQjd,KAAKm+I,iBAAmB,GAAKn+I,KAAKm+I,eACzD,CACA,kBAAI7wE,CAAez9C,GACjB7vB,KAAKm+I,gBAAkBtuH,CACzB,CAWA,eAAIuuH,GACF,OAAOp+I,KAAKq+I,YACd,CACA,eAAID,CAAYvuH,GACd7vB,KAAKq+I,aAAexuH,CACtB,CA0BA,oBAAId,GACF,OAAOtjB,EAAMwR,QAAQjd,KAAKw0F,mBAAqB,EAAIx0F,KAAKw0F,iBAC1D,CACA,oBAAIzlE,CAAiBc,GACnB7vB,KAAKw0F,kBAAoB3kE,CAC3B,CA0BA,4BAAIX,GACF,OAAOzjB,EAAMwR,QAAQjd,KAAKs+I,2BACxBxxI,EAAas6G,KAAOpnH,KAAKs+I,yBAC7B,CAEA,4BAAIpvH,CAAyBW,GAC3B7vB,KAAKs+I,0BAA4BzuH,CACnC,CAEA,aAAA0uH,GACE,MAAO,CACL,eAA4Bv+I,KAAKksE,eACjC,eAA4BlsE,KAAKosE,eACjC,gBAA4BpsE,KAAKssE,gBACjC,uBAA4BtsE,KAAK2sE,uBACjC,eAA4B3sE,KAAK4sE,eACjC,yBAA4B5sE,KAAKmrE,yBACjC,OAA4BnrE,KAAKitE,OACjC,eAA4BjtE,KAAKktE,eAAiB,QAAUltE,KAAKktE,eACjE,cAA4BltE,KAAKotE,cACjC,sBAA4BptE,KAAKqtE,sBAAwB,QAAUrtE,KAAKqtE,sBACxE,eAA4BrtE,KAAKstE,eACjC,YAA4BttE,KAAKo+I,YACjC,iBAA4Bp+I,KAAK+uB,iBACjC,yBAA4B/uB,KAAKkvB,yBAErC,GAcF,MAAM08C,UAA0BkxE,EAM9B,WAAA3/I,CAAYmvB,GACVje,MAhoBJ,WAEE,MAAM,2BAAE4lB,GAA+B9oB,EACvC,MAAO,CACLqzI,cAAsB,GACtBC,mBAAsB,GACtBC,eAAsB,GACtBC,cAAsB,GACtBC,oBAAsB,GACtBzB,iBAAsB,KACtBG,eAAsB,aACtBuB,qBAAsB,IAAI5qH,EAC1B6qH,yBAA4B,EAEhC,CAknBUC,GAAgBzyH,EACxB,CAQA,wBAAIk/C,GACF,OAAO//D,EAAMwR,QAAQjd,KAAKg/I,aACpBvzE,EAAqB8gB,MACrBvsF,KAAKg/I,WACb,CACA,wBAAIxzE,CAAqB37C,GACvB7vB,KAAKg/I,YAAcnvH,CACrB,CAWA,eAAIm+F,GACF,OAAOviH,EAAM05E,MAAMnlF,KAAKi/I,cAClB,GACAj/I,KAAKi/I,YACb,CAEA,eAAIjxB,CAAYn+F,GACd7vB,KAAKi/I,aAAepvH,CACtB,CAWA,WAAIk+F,GACF,OAAOtiH,EAAM05E,MAAMnlF,KAAKk/I,UAClB,GACAl/I,KAAKk/I,QACb,CAEA,WAAInxB,CAAQl+F,GACV7vB,KAAKk/I,SAAWrvH,CAClB,CAWA,oBAAIo+F,GACF,OAAOxiH,EAAM05E,MAAMnlF,KAAKm/I,mBAClB,GACAn/I,KAAKm/I,iBACb,CAEA,oBAAIlxB,CAAiBp+F,GACdpkB,EAAM1X,KAAK87B,EAAU,UAMfpkB,EAAM05E,MAAMt1D,GACrBrO,EAAS,qMAITxhB,KAAKm/I,kBAAoBtvH,GAVzBrO,EAAS,iMAITxhB,KAAKm/I,kBAAoB,GAQ7B,CA2CA,OAAIhhH,GACF,OAAO1yB,EAAMwR,QAAQjd,KAAKu+B,MAAQ,GAAKv+B,KAAKu+B,IAC9C,CAEA,OAAIJ,CAAItO,GACN7vB,KAAKu+B,KAAO1O,CACd,CAUA,YAAIgtB,GACF,OAAOpxC,EAAMwR,QAAQjd,KAAKo/I,WAAa,GAAKp/I,KAAKo/I,SACnD,CAEA,YAAIviG,CAAShtB,GACX7vB,KAAKo/I,UAAYvvH,CACnB,CAQA,YAAIy9F,GACF,OAAO7hH,EAAMwR,QAAQjd,KAAKq/I,WAAa,GAAKr/I,KAAKq/I,SACnD,CAEA,YAAI/xB,CAASz9F,GACX7vB,KAAKq/I,UAAYxvH,CACnB,CAgBA,cAAIs+F,GACF,OAAO1iH,EAAMwR,QAAQjd,KAAKs/I,aAAe,GAAKt/I,KAAKs/I,WACrD,CAEA,cAAInxB,CAAWt+F,GACb7vB,KAAKs/I,YAAczvH,CACrB,CAUA,0BAAI89F,GACF,OAAOliH,EAAMwR,QAAQjd,KAAKu/I,UAAY,GAAKv/I,KAAKu/I,QAClD,CACA,0BAAI5xB,CAAuB99F,GACzB7vB,KAAKu/I,SAAW1vH,CAClB,CAQA,WAAI69F,GACF,OAAOjiH,EAAMwR,QAAQjd,KAAKw/I,UAAY,GAAKx/I,KAAKw/I,QAClD,CACA,WAAI9xB,CAAQ79F,GACV7vB,KAAKw/I,SAAW3vH,CAClB,CAWA,gBAAI4vH,GACF,OAAOh0I,EAAMwR,QAAQjd,KAAKw+I,eAAiB,GAAKx+I,KAAKw+I,aACvD,CAKA,gBAAA/rH,CAAiBpmC,GACf2T,KAAKw+I,cAAgBnyJ,CACvB,CAUA,qBAAIumC,GACF,OAAOnnB,EAAMwR,QAAQjd,KAAKy+I,oBAAsB,GAAKz+I,KAAKy+I,kBAC5D,CAKA,qBAAA1rH,CAAsB1mC,GACpB2T,KAAKy+I,mBAAqBpyJ,CAC5B,CAqBA,yBAAIw2B,GACF,OAAIpX,EAAMwR,QAAQjd,KAAKi2D,iBACdj2D,KAAK0/I,6BAEP1/I,KAAKi2D,eACd,CACA,yBAAIpzC,CAAsBgN,GACxB7vB,KAAKi2D,gBAAkBpmC,CACzB,CAKA,gCAAI6vH,GACF,MACM,yBAAEt9F,EAAwB,iCAAE/xB,GAAqCrwB,KACjE2/I,EAAiBv9F,EAA2BA,EAAyB5yD,OAAS,EAE9EowJ,EAA0BD,EAAiBtvH,GADlCsvH,EAAiB,EAAI,IAAO,GAE3C,OAAOvsJ,KAAK9C,IALO,IAKSsvJ,EAC9B,CAwBA,kBAAIpkB,GACF,OAAO/vH,EAAMwR,QAAQjd,KAAK6/I,iBAAmB,GAAK7/I,KAAK6/I,eACzD,CACA,kBAAIrkB,CAAe3rG,GACjB7vB,KAAK6/I,gBAAkBhwH,CACzB,CAcA,yBAAI6rG,GACF,OAAOjwH,EAAMwR,QAAQjd,KAAK8/I,wBAA0B,EAAI9/I,KAAK8/I,sBAC/D,CACA,yBAAIpkB,CAAsB7rG,GACxB7vB,KAAK8/I,uBAAyBjwH,CAChC,CAcA,6BAAI8rG,GACF,OAAOlwH,EAAMwR,QAAQjd,KAAK+/I,4BAA8B,IAAO//I,KAAK+/I,0BACtE,CACA,6BAAIpkB,CAA0B9rG,GAC5B7vB,KAAK+/I,2BAA6BlwH,CACpC,CAqBA,oBAAI4rG,GACF,OAAOhwH,EAAMwR,QAAQjd,KAAKmT,mBAAqB,GAAKnT,KAAKmT,iBAC3D,CACA,oBAAIsoH,CAAiB5rG,GACnB7vB,KAAKmT,kBAAoB0c,CAC3B,CAWA,0BAAIyrH,GACF,OAAO7vI,EAAMwR,QAAQjd,KAAKggJ,qBAA8BhgJ,KAAKggJ,kBAC/D,CACA,0BAAI1E,CAAuBzrH,GACzB7vB,KAAKggJ,mBAAqBnwH,CAC5B,CASA,6BAAIssH,GACF,OAAO1wI,EAAMwR,QAAQjd,KAAKigJ,wBAAiCjgJ,KAAKigJ,qBAClE,CACA,6BAAI9D,CAA0BtsH,GAC5B7vB,KAAKigJ,sBAAwBpwH,CAC/B,CAUA,mBAAI+rH,GACF,OAAOnwI,EAAMwR,QAAQjd,KAAKkgJ,mBAA4BlgJ,KAAKkgJ,gBAC7D,CACA,mBAAItE,CAAgB/rH,GAClB7vB,KAAKkgJ,iBAAmBrwH,CAC1B,CAUA,0BAAI4rH,GACF,OAAOhwI,EAAMwR,QAAQjd,KAAKmgJ,qBAA8BngJ,KAAKmgJ,kBAC/D,CACA,0BAAI1E,CAAuB5rH,GACzB7vB,KAAKmgJ,mBAAqBtwH,CAC5B,CAWA,4BAAItB,GACF,OAAO9iB,EAAMwR,QAAQjd,KAAKogJ,aAAe,IAAOpgJ,KAAKogJ,WACvD,CACA,4BAAI7xH,CAAyBsB,GAC3B7vB,KAAKogJ,YAAcvwH,CACrB,CAWA,2BAAIxE,GACF,OAAO5f,EAAMwR,QAAQjd,KAAKqgJ,mBAAqB,EAAIrgJ,KAAKqgJ,iBAC1D,CACA,2BAAIh1H,CAAwBwE,GAC1B7vB,KAAKqgJ,kBAAoBxwH,CAC3B,CAcA,iBAAI2lG,GACF,OAAO/pH,EAAMwR,QAAQjd,KAAK0+I,gBAAkB,GAAK1+I,KAAK0+I,cACxD,CAKA,iBAAAvrH,CAAkB9mC,GAChB2T,KAAK0+I,eAAiBryJ,CACxB,CAYA,gBAAImzB,GACF,OAAO/T,EAAMwR,QAAQjd,KAAK2+I,eAAiB,GAAK3+I,KAAK2+I,aACvD,CAOA,gBAAA1rH,CAAiB5mC,GACf2T,KAAK2+I,cAAgBtyJ,CACvB,CAWA,sBAAIwhI,GACF,OAAOpiH,EAAMwR,QAAQjd,KAAK4+I,qBAAuB,GAAK5+I,KAAK4+I,mBAC7D,CAKA,sBAAA/H,CAAuBxqJ,GACrB2T,KAAK4+I,oBAAsBvyJ,CAC7B,CAeA,2BAAIkhI,GACF,OAAO9hH,EAAMwR,QAAQjd,KAAKsgJ,mBAAqB,EAAItgJ,KAAKsgJ,iBAC1D,CACA,2BAAI/yB,CAAwB19F,GAC1B7vB,KAAKsgJ,kBAAoBzwH,CAC3B,CAeA,6BAAI29F,GACF,OAAO/hH,EAAMwR,QAAQjd,KAAKugJ,qBAAuB,EAAIvgJ,KAAKugJ,mBAC5D,CACA,6BAAI/yB,CAA0B39F,GAC5B7vB,KAAKugJ,oBAAsB1wH,CAC7B,CAQA,oCAAI6oH,GACF,QAAOjtI,EAAMwR,QAAQjd,KAAKwgJ,qBAA6BxgJ,KAAKwgJ,kBAC9D,CACA,oCAAI9H,CAAiC7oH,GACnC7vB,KAAKwgJ,mBAAqB3wH,CAC5B,CAQA,mCAAI+oH,GACF,QAAOntI,EAAMwR,QAAQjd,KAAKygJ,0BAAkCzgJ,KAAKygJ,uBACnE,CACA,mCAAI7H,CAAgC/oH,GAClC7vB,KAAKygJ,wBAA0B5wH,CACjC,CAUA,wBAAIjX,GACF,OAAOnN,EAAMwR,QAAQjd,KAAK0gJ,uBAAgC1gJ,KAAK0gJ,oBACjE,CACA,wBAAI9nI,CAAqBiX,GACvB7vB,KAAK0gJ,qBAAuB7wH,CAC9B,CAYA,uBAAInQ,GACF,OAAO1f,KAAK6+I,oBACd,CACA,uBAAIn/H,CAAoB3c,GACtB,MAAM,2BAAEkxB,GAA+B9oB,EACvCnL,KAAK6+I,qBAAuB97I,aAAekxB,EACvClxB,EACA,IAAIkxB,EAA2BlxB,EACrC,CAcA,WAAIwb,GACF,OAAO9S,EAAMwR,QAAQjd,KAAKg2E,WAAoBh2E,KAAKg2E,QACrD,CACA,WAAIz3D,CAAQsR,GACV7vB,KAAKg2E,SAAWnmD,CAClB,CAYA,sBAAI3L,GACF,OAAOzY,EAAMwR,QAAQjd,KAAK2gJ,cAAgB,IAAQ3gJ,KAAK2gJ,YACzD,CACA,sBAAIz8H,CAAmB2L,GACrB7vB,KAAK2gJ,aAAe9wH,CACtB,CAqBA,qBAAIumC,GACF,OAAO3qD,EAAMwR,QAAQjd,KAAKm2D,oBAAsB,MAAcn2D,KAAKm2D,kBACrE,CACA,qBAAIC,CAAkBvmC,GACpB7vB,KAAKm2D,mBAAqBtmC,CAC5B,CAiBA,oBAAI03F,GACF,OAAO97G,EAAMwR,QAAQjd,KAAK4gJ,mBAAqB,IAAW5gJ,KAAK4gJ,iBACjE,CACA,oBAAIr5B,CAAiB13F,GACnB7vB,KAAK4gJ,kBAAoB/wH,CAC3B,CAWA,iBAAIymC,GACF,OAAO7qD,EAAMwR,QAAQjd,KAAK6gJ,gBAAkB,QAAgB7gJ,KAAK6gJ,cACnE,CACA,iBAAIvqF,CAAczmC,GAChB7vB,KAAK6gJ,eAAiBhxH,CACxB,CAKA,4BAAIixH,GAGF,MAAO,GAAGn2I,OAAOvP,GAAKqQ,EAAMypE,UAAUl1E,KAAK5E,IAC7C,CAoBA,2BAAI4wB,GACF,OAAOvgB,EAAMwR,QAAQjd,KAAK8+I,0BAA2B,EAAI9+I,KAAK8+I,wBAChE,CACA,2BAAI9yH,CAAwB6D,GAC1B7vB,KAAK8+I,yBAA2BjvH,CAClC,CAMA,CAAC,4CACC,OAAO3jC,OAAOwrB,OAAO1X,KAAKu+I,gBAAiB,CACzC,qBAAoC9yE,EAAqBn1D,SAAStW,KAAKwrE,sBACvE,YAAoCxrE,KAAKguH,YAAc,QAAU,UACjE,QAAoChuH,KAAK+tH,QAAU,QAAU,UAC7D,iBAAoC/tH,KAAKiuH,iBAAmB,QAAU,UACtE,IAAoCjuH,KAAKm+B,IACzC,SAAoCn+B,KAAK68C,SAAW,QAAU78C,KAAK68C,SACnE,SAAoC78C,KAAKstH,SACzC,WAAoCttH,KAAKmuH,WACzC,uBAAoCnuH,KAAK2tH,uBACzC,QAAoC3tH,KAAK0tH,QACzC,aAAoC1tH,KAAKy/I,aACzC,kBAAoCz/I,KAAK4yB,kBACzC,sBAAoC5yB,KAAK6iB,sBACzC,eAAoC7iB,KAAKw7H,eACzC,sBAAoCx7H,KAAK07H,sBACzC,0BAAoC17H,KAAK27H,0BACzC,iBAAoC37H,KAAKy7H,iBACzC,uBAAoCz7H,KAAKs7I,uBACzC,0BAAoCt7I,KAAKm8I,0BACzC,gBAAoCn8I,KAAK47I,gBACzC,uBAAoC57I,KAAKy7I,uBACzC,yBAAoCz7I,KAAKuuB,yBACzC,wBAAoCvuB,KAAKqrB,wBACzC,cAAoCrrB,KAAKw1H,cACzC,aAAoCx1H,KAAKwf,aACzC,mBAAoCxf,KAAK6tH,mBACzC,wBAAoC7tH,KAAKutH,wBACzC,0BAAoCvtH,KAAKwtH,0BACzC,iCAAoCxtH,KAAK04I,iCACzC,qBAAoC14I,KAAK4Y,qBACzC,oBAAoC5Y,KAAK0f,oBACzC,QAAoC1f,KAAKue,QACzC,mBAAoCve,KAAKkkB,mBACzC,kBAAoClkB,KAAKo2D,kBACzC,cAAoCp2D,KAAKs2D,cACzC,wBAAoCt2D,KAAKgsB,yBAE7C,CAQA,QAAA7vB,GACE,OAAOkS,MAAMlS,UACf,EAYAyvE,EAAkBgxE,sBAAwBA,EAQ1ChxE,EAAkBixE,wBAA0BA,EAO5CjxE,EAAkBI,wBAA0BA,EAG5CJ,EAAkBC,8BAAgC,CAChD,MAAa8wE,EAAkC,iBAAK,EACpD,MAAaA,EAAkC,iBAAK,EACpD,MAAaA,EAAkC,iBAAK,EACpD,UAAaA,EAAoC,mBAAK,EACtD,UAAaA,EAAoC,mBAAK,EACtD,UAAa,GAMjB5uI,EAAO3hB,QAAQw/E,kBAAoBA,C,iBCr/CnC,MAAM,KAAEz1C,GAAS,EAAQ,MAsCzBpoB,EAAO3hB,QAAQu+H,sBAAwBx0F,EAAKE,IALd,CAC5Bq1C,mBAAoB,IACpBghB,OAAoB,OAItB3+E,EAAO3hB,QAAQwgG,mBAAqBz2D,EAAKE,IAjCd,CACzBy1F,gBAA8B,EAC9BC,aAA8B,EAC9BC,SAA8B,EAC9BN,OAA8B,EAC9BkC,WAA8B,EAC9BM,WAA8B,EAC9B7C,WAA8B,EAC9BoC,qBAA8B,EAC9BtC,SAA8B,EAC9BS,oBAA8B,EAC9BL,SAA8B,GAC9BU,mBAA8B,GAC9B80B,oBAA8B,GAC9BC,mBAA8B,GAC9BtiI,SAA8B,GAC9BuiI,eAA8B,GAC9BnzB,sBAA8B,GAC9BozB,gBAA8B,GAC9BC,6BAA8B,GAC9BC,mBAA8B,GAC9B9yB,cAA8B,GAC9BO,oBAA8B,GAC9BE,oBAA8B,I,WCnBhC,MAAMsyB,EAAU,oEACVC,EAAU,EACb,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,EAAG,IAAK,GAAI,EAAG,IAAK,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAC7B,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,EAAG,IAAK,GAAI,GAAI,EAAG,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,IAAK,GAAI,GAAI,EAAG,IAAK,GAAI,GAG5B,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACtB,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GACzB,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,GAC5B,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,GAG5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAG5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAC5B,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAE/B,MAAMC,UAAoBr0J,OAI1B,MAAMs0J,EAAgB,CAOpB,aAAAC,CAAcC,GACZ,IAAIrlH,EAAS,GACT5tC,EAAI,EACR,EAAG,CACD,MAAMkzJ,EAAOD,EAAM/hJ,WAAWlR,KACxBmzJ,EAAOF,EAAM/hJ,WAAWlR,KACxBozJ,EAAOH,EAAM/hJ,WAAWlR,KAExBqzJ,EAAOH,GAAQ,EACfI,GAAgB,EAAPJ,IAAa,EAAMC,GAAQ,EAC1C,IAAII,GAAgB,GAAPJ,IAAc,EAAMC,GAAQ,EACrCI,EAAc,GAAPJ,EAEPx9E,MAAMu9E,GACRI,EAAOC,EAAO,GACL59E,MAAMw9E,KACfI,EAAO,IAGT5lH,GAAUglH,EAAQ7lH,OAAOsmH,GACzBzlH,GAAUglH,EAAQ7lH,OAAOumH,GACzB1lH,GAAUglH,EAAQ7lH,OAAOwmH,GACzB3lH,GAAUglH,EAAQ7lH,OAAOymH,EAC3B,OAASxzJ,EAAIizJ,EAAMlyJ,QAEnB,OAAO6sC,CACT,EAQA,aAAA6lH,CAAcR,GACZ,IAAIrlH,EAAS,GACT5tC,EAAI,EAER,EAAG,CACD,KAAO6yJ,EAAQI,EAAM/hJ,WAAWlR,IAAM,IACpCA,IAEF,MAAMqzJ,EAAOR,EAAQI,EAAM/hJ,WAAWlR,MAChCszJ,EAAOT,EAAQI,EAAM/hJ,WAAWlR,MAChCuzJ,EAAOV,EAAQI,EAAM/hJ,WAAWlR,MAChCwzJ,EAAOX,EAAQI,EAAM/hJ,WAAWlR,MAEtC,GAAIqzJ,EAAO,GAAKC,EAAO,GAAKC,EAAO,GAAKC,EAAO,EAG7C,MAAM,IAAIV,EAAY,4BAGxB,MAAMI,EAAQG,GAAQ,EAAMC,GAAQ,EAC9BH,GAAgB,GAAPG,IAAc,EAAMC,GAAQ,EACrCH,GAAgB,EAAPG,IAAa,EAAKC,EAEjC5lH,GAAU74B,OAAOC,aAAak+I,GAEjB,KAATK,IACF3lH,GAAU74B,OAAOC,aAAam+I,IAEnB,KAATK,IACF5lH,GAAU74B,OAAOC,aAAao+I,GAElC,OAASpzJ,EAAIizJ,EAAMlyJ,OAAS,GAE5B,OAAO6sC,CACT,GAGI8lH,EAA2B,oBAAXprH,OAChBqrH,EAA8B,oBAAXjyG,OACnBgtC,EAA0B,oBAATC,KACjBilE,EAAiBD,IAAcjlE,GAAWglE,GAC5C,CACAV,cAAe59I,GAAOssC,OAAOuB,KAAK7tC,EAAK,UAAU1H,SAAS,UAC1D+lJ,cAAer+I,GAAOssC,OAAOuB,KAAK7tC,EAAK,UAAU1H,SAAS,WAE1D,CAAC,EAGCmmJ,EAAmC,oBAAXvrH,OAC1B,CACA0qH,cAAe1qH,OAAa,KAAIvoC,GAAKuoC,OAAa,KAAEvoC,GAAK,KACzD0zJ,cAAenrH,OAAa,KAAIxmC,GAAKwmC,OAAa,KAAExmC,GAAK,MAEzD,CAAC,EAGC+qG,EAAS,CACbt3F,OAASs+I,EAAcb,eACdY,EAAcZ,eACdD,EAAcC,cACvBp+I,OAASi/I,EAAcJ,eACdG,EAAcH,eACdV,EAAcU,eAGzBn0I,EAAO3hB,QAAQkvG,OAASA,C,WClHxBvtF,EAAO3hB,QAAQ4uC,aA3Cf,MAME,WAAA79B,IAAeqR,GACbxO,KAAK28B,QACL38B,KAAKu7B,UAAU/sB,EACjB,CASA,MAAA+sB,IAAU/sB,GAIR,MAHA,IAAIA,GAAM8L,QAAS25C,IACjBj0D,KAAK9C,OAAO8C,KAAKw9D,SAAWh6D,OAAOywD,KAE9Bj0D,IACT,CAKA,KAAA28B,GACE38B,KAAK9C,OAAS,GACd8C,KAAKw9D,MAAQ,CACf,CAOA,QAAArhE,GACE,OAAO6D,KAAK9C,OAAOglB,KAAK,GAC1B,E,iBC5CF,MAAM/W,EAAe,EAAQ,MACvBo3I,EAAuB,EAAQ,MAC/Bn3I,EAAS,EAAQ,OACjB,wBAAEq1B,EAAuB,SAAEgU,GAAa,EAAQ,MAChD,qBAAEg3B,GAAyB,EAAQ,OACnC,MAAEhgE,GAAU,EAAQ,MACpB,aAAEI,EAAY,eAAEC,GAAmB,EAAQ,OAC3C,SAAE0V,EAAQ,SAAE3S,GAAa,EAAQ,OACjC,aAAE/B,GAAiB,EAAQ,OAC3B,kBAAEg1C,GAAsB,EAAQ,OAEhC,iBACJnhB,EAAgB,iBAChB4sE,EAAgB,iBAChBK,EAAgB,WAChBhtE,EAAU,UACVqsE,EAAS,YACTD,EAAW,UACXlsE,EAAS,SACTC,EAAQ,UACRmsE,EAAS,iBACTI,GACE7sE,EAEE+hH,EAAoB,CAAC,QAAS,SAAU,MAAO,OAAQ,OAAQ,SAErE,SAASC,EAAc91C,EAAUzrE,EAAUl3B,GAEzC,MAAM8U,EACJ1T,EAAOgkB,kBAAkBggG,mBACvBluF,EAASl3B,GACTyL,GACE,IAAI3J,EAAe,GAAG6gG,2BAAkC3iG,OAAUyL,IAC/C5J,EAAa0zB,yBACtC,GAAIzgB,EACF,MAAMA,CAEV,CAEA,SAAS+hB,EAAY8rE,EAAUzrE,EAAU/jB,EAAKgwF,EAAcC,EAAUC,GACpE,MAAMtqG,EAAMm+B,EAAS/jB,GACrB,KAAIkwF,GAAqB,OAARtqG,QACI,IAAV,GAA0BoqG,EAAa94E,OAAO1S,KAAK5xB,GAAKA,IAAMgT,IACvE,MAAM,IAAI+I,EAAe,GAAG6gG,2BAAkCxvF,0BACZiwF,IACzBvhG,EAAa82B,uBAE1C,CAGA,SAAS+/G,EAAsB/1C,EAAUzrE,EAAU/jB,EAAK2a,EAAKs1E,EAAUu1C,GACrE,MAAM5/I,EAAMm+B,EAAS/jB,GACrB,KAAIwlI,GAAe5/I,SACE,IAAV,IAA0B+0B,EAAInW,KAAK5xB,GAAKA,EAAEqtD,gBAAkBr6C,EAAIq6C,eACzE,MAAM,IAAItxC,EAAe,GAAG6gG,2BAAkCxvF,0BACZiwF,IACzBvhG,EAAa82B,uBAE1C,CAEA,SAASigH,EAAwBj2C,EAAUzrE,EAAUl3B,GACnD,MAAMjH,EAAMm+B,EAASl3B,GACrB,GAAIyB,EAAMkqE,MAAM5yE,IACVA,EAAIvT,OAAS,EAAG,CAClB,MAAMy8E,EAAcs2E,EAAqB32E,kBAAkBI,wBAAwBhqD,IAAItxB,GAAKA,EAAE0sD,eAC9Fr6C,EAAIuX,QAASk+B,IACX,MAAMqqG,EAAQrqG,EAAS4E,cACvB,GAAI6uB,EAAY5vE,QAAQwmJ,GAAS,EAC/B,MAAM,IAAI/2I,EAAe,GAAG6gG,2BAAkC3iG,qCACDwuC,IACnC3sC,EAAa0zB,yBAG7C,CAEJ,CAEA,SAASujH,EAAmBn2C,EAAUzrE,EAAUl3B,GAC9C,MAAMjH,EAAMm+B,EAASl3B,GACrB,GAAIjH,GAAO0I,EAAMiuD,OAAO32D,KAAS0I,EAAM05E,MAAMpiF,GAAM,CACjD,MAAMggJ,EAAUhgJ,EAAIvG,MAAM,KACpBuvE,EAAYw2E,EAAqB32E,kBAAkBixE,wBACzDkG,EAAQzoI,QAASoyD,IACf,GAAIX,EAAU1vE,QAAQqwE,EAAOjhB,QAAU,EACrC,MAAM,IAAI3/C,EAAe,GAAG6gG,2BAAkC3iG,0CACL0iE,KACzC7gE,EAAa0zB,yBAGnC,CACF,CAGA,SAASyjH,EAA4Br2C,EAAUzrE,EAAUl3B,GACvD,MAAMjH,EAAMm+B,EAASl3B,GACrB,GAAIyB,EAAMypE,UAAUnyE,IAAQ0I,EAAMkqE,MAAM5yE,IAAQA,EAAIvT,OAAS,GAC3D,MAAM,IAAIsc,EAAe,GAAG6gG,2BAAkC3iG,gCAElD6B,EAAa0zB,uBAE7B,CAEA,SAAS0jH,EAAWt2C,EAAUzrE,EAAUl3B,GACtC,MAAMjH,EAAMm+B,EAASl3B,GACfk5I,EAA0B,iBAARngJ,EAAmBA,EAAIvG,MAAM,KAAOuG,EAC5D,IAAK0I,EAAMkqE,MAAMutE,GACf,MAAM,IAAIp3I,EAAe,GAAG6gG,2BAAkC3iG,4CAEpC6B,EAAa82B,wBAEzCugH,EAAS5oI,QAASiwB,IAChB,IAAIpM,EAAM,KACV,IACEA,EAAMsW,EAASlK,EACjB,CAAE,MAAOzlC,GACP,MAAM,IAAIgH,EAAe,GAAG6gG,2BAAkC3iG,gCACLugC,IAC/B1+B,EAAa0zB,uBACzC,CACA,IAAK9zB,EAAMu6E,SAAS7nD,EAAIqa,SAAUgqG,GAChC,MAAM,IAAI12I,EAAe,GAAG6gG,2BAAkC3iG,sBACfm0B,EAAIod,oCACOpd,EAAIqa,YACpC3sC,EAAa0zB,yBAG7C,CASA,SAAS4jH,EAAkCnkH,EAAmBokH,GAC5D,GAAIA,EAAgB5zJ,OAAS,GAR/B,SAAyBwvC,GACvB,OAAQA,IACAA,IAAsB8iB,EAAkBqB,uBACxCnkB,IAAsB8iB,EAAkBoB,aACxClkB,IAAsB8iB,EAAkBmB,YAClD,CAGoCogG,CAAgBrkH,GAAoB,CACpE,MAAMskH,EAAYF,EAAgB5zJ,QAAU,EAAI4zJ,EAAkBA,EAAgB1tJ,MAAM,EAAG,GAC3F,MAAM,IAAIoW,EAAe,yFACTkzB,oBAAoCskH,IAAaz3I,EAAa0zB,uBAChF,CACF,CA4BA,SAASd,EAAOyC,EAAUl3B,EAAM63F,GAC9B,OA3BF,SAAkB3gE,EAAUl3B,EAAMu5I,EAAO1hD,GACvC,MAAM9+F,EAAMm+B,EAASl3B,GACrB,GAAIjH,aAAe9D,MAAO,CAExB,MAAMukJ,EAAczgJ,EAAIvT,OACxB,IAAK,IAAIf,EAAI,EAAGA,EAAI+0J,EAAa/0J,IAAK,CACpC,MAAMg1J,EAAe1gJ,EAAItU,GACzB,GAAKozG,GAIE,GAAIA,KACJp2F,EAAMiuD,OAAO+pF,KAAkBA,EAAaz0H,MAAMu0H,IACrD,OAAO,OALT,GAAI93I,EAAMiuD,OAAO+pF,IAAiBA,EAAaz0H,MAAMu0H,GACnD,OAAO,CAOb,CACA,IAAK1hD,EACH,OAAO,EACF,GAAIA,EACT,OAAO,CAEX,CACA,OAAQp2F,EAAMiuD,OAAO32D,IAAQA,EAAIisB,MAAMu0H,EACzC,CAGSG,CAASxiH,EAAUl3B,EAAM,sBAAuB63F,EACzD,CAEA,MAAMs0C,EAA6B,CACjC,QAAAl1G,CAASzO,GAEP,MAAMziC,EAAI4wC,EAAiBnxB,KAAK,KAAM,oBAAqBgjB,GAmC3D,GAlCAziC,EAAE,MAAO,CAACi9G,GAAc,CAACM,GAAmB,CAAC21C,IAC7ClzJ,EAAE,WAAY,CAACm9G,GAAY,CAACD,EAAW,MACvCl9G,EAAE,WAAY,CAACm9G,GAAY,CAACD,EAAW,MACvCl9G,EAAE,aAAc,CAACm9G,GAAY,CAACD,EAAW,KAAM,CAACw1C,IAChD1yJ,EAAE,yBAA0B,CAACm9G,GAAY,CAACD,EAAW,MACrDl9G,EAAE,UAAW,CAACm9G,GAAY,CAACD,EAAW,KACtCl9G,EAAE,wBAAyB,CAAC+wC,GAAY,CAACC,EAAU,EAAGI,OAAOC,YAC7DrxC,EAAE,wBAAyB,CAAC+wC,GAAY,CAACC,GAAW,EAAGI,OAAOC,YAC9DrxC,EAAE,iBAAkB,CAAC+wC,GAAY,CAACC,GAAW,EAAGI,OAAOC,YACvDrxC,EAAE,mBAAoB,CAAC+wC,GAAY,CAACC,GAAW,EAAGI,OAAOC,YACzDrxC,EAAE,4BAA6B,CAAC+wC,GAAY,CAACC,EAAU,EAAG,MAC1DhxC,EAAE,qBAAsB,CAAC+wC,GAAY,CAACC,EAAU,EAAGI,OAAOC,YAC1DrxC,EAAE,oBAAqB,CAAC+wC,GAAY,CAACC,EAAU,EAAGI,OAAOC,YACzDrxC,EAAE,gBAAiB,CAAC+wC,GAAY,CAACC,EAAU,IAAKI,OAAOC,YAIvDrxC,EAAE,yBAA0B,CAAC6wC,IAC7B7wC,EAAE,4BAA6B,CAAC6wC,IAChC7wC,EAAE,kBAAmB,CAAC6wC,IACtB7wC,EAAE,2BAA4B,CAAC+wC,GAAY,CAACC,EAAU,EAAGI,OAAOC,YAChErxC,EAAE,0BAA2B,CAAC+wC,GAAY,CAACC,EAAU,EAAGI,OAAOC,YAC/DrxC,EAAE,yBAA0B,CAAC6wC,IAC7B7wC,EAAE,0BAA2B,CAAC+wC,GAAY,CAACC,EAAU,EAAG,IACxDhxC,EAAE,4BAA6B,CAAC+wC,GAAY,CAACC,EAAU,EAAG,IAC1DhxC,EAAE,mCAAoC,CAAC6wC,IACvC7wC,EAAE,kCAAmC,CAAC6wC,IACtC7wC,EAAE,uBAAwB,CAAC6wC,IAC3B7wC,EAAE,UAAW,CAAC6wC,IACd7wC,EAAE,mCAAoC,CAAC+wC,GAAY,CAACC,EAAU,EAAGI,OAAOC,YACxErxC,EAAE,UAAW,CAACm9G,IACdn9G,EAAE,cAAe,CAACm9G,IAClBn9G,EAAE,0BAA2B,CAAC+wC,GAAY,CAACC,EAAU,EAAG,IAEpDvO,EAAMwM,mBAAqBxM,EAAM4vB,yBACnC,MAAM,IAAIt2C,EAAe,2HAEAD,EAAa0zB,wBAExC,GAAuC,OAAnC/M,EAAM4vB,+BAAwEzvC,IAAnC6f,EAAM4vB,yBAAwC,CAC3F,IAAKnjD,MAAMC,QAAQszB,EAAM4vB,0BACvB,MAAM,IAAIt2C,EAAe,8DACAD,EAAa82B,wBAExC,GAA8C,IAA1CnQ,EAAM4vB,yBAAyB5yD,OACjC,MAAM,IAAIsc,EAAe,+DACAD,EAAa0zB,uBAE1C,CAEAxvC,EAAE,uBAAwB,CAAC8wC,EAAa4qC,EAAsB,wBAAwB,IACtF,MAAMF,EAAgB/4C,EAAMg5C,uBAAyBC,EAAqBC,mBAC1E,IAAKjtC,EAAOjM,EAAO,OAAO,IAAS+4C,EACjC,MAAM,IAAIz/D,EAAe,2HAC0BD,EAAa0zB,wBAElE,GAAI9zB,EAAMquD,MAAMtnC,EAAMg5C,qBAAsBC,EAAqBihB,QAAS,CACxE,IAAKjuD,EAAOjM,EAAO,OAAO,GACxB,MAAM,IAAI1mB,EAAe,mFACqB2/D,EAAqBihB,kHAG1C7gF,EAAa6kG,oBAExC,GAAIjlG,EAAM05E,MAAM3yD,EAAMu7F,UAAYtiH,EAAM05E,MAAM3yD,EAAMw7F,aAClD,MAAM,IAAIliH,EAAe,gFAEI2/D,EAAqBihB,6TAOzB7gF,EAAa6kG,mBAE1C,MAAYjlG,EAAM05E,MAAM3yD,EAAMu7F,UAAatiH,EAAM05E,MAAM3yD,EAAMw7F,cAC3Dn/G,EAAS,iFAEI48D,EAAqBihB,wFAOlC,GAAIjhF,EAAMypE,UAAU1iD,EAAMwM,oBACtBxM,EAAMwM,oBAAsB8iB,EAAkBuB,UAChD,MAAM,IAAIv3C,EAAe,qFAEAD,EAAa82B,wBAExC,GAAIl3B,EAAMypE,UAAU1iD,EAAM4vB,0BAA2B,CACnD,IAAK32C,EAAMkqE,MAAMnjD,EAAM4vB,0BACrB,MAAM,IAAIt2C,EAAe,yFAEAD,EAAa82B,wBAExC,GAA8C,IAA1CnQ,EAAM4vB,yBAAyB5yD,QAC/BgjC,EAAM4vB,yBAAyB,KAAON,EAAkBuB,UAC1D,MAAM,IAAIv3C,EAAe,yGAEAD,EAAa82B,uBAE1C,CAOA,GALA5yC,EAAE,uBAAwB,CAAC69G,GAAmB,CAACg1C,IAE/C7yJ,EAAE,iBAAkB,CAACm9G,GAAY,CAACw1C,EAAuBH,EAAqB32E,kBAAkBI,wBAAyB,2BAA4B,IACrJj8E,EAAE,iBAAkB,CAACm9G,GAAY,CAACw1C,EAAuBH,EAAqB32E,kBAAkBI,wBAAyB,2BAA4B,IAEjJx5C,EAAM05C,gBAAkB15C,EAAM45C,eAAgB,CAChD,MAAMH,EAAcs2E,EAAqB32E,kBAAkBI,wBAAwBhqD,IAAItxB,GAAKA,EAAE0sD,eAG9F,GAFiB6uB,EAAY5vE,QAAQm2B,EAAM05C,eAAe9uB,eACzC6uB,EAAY5vE,QAAQm2B,EAAM45C,eAAehvB,eAExD,MAAM,IAAItxC,EAAe,kGAEAD,EAAa6kG,mBAE1C,CAEA,GAAIl+E,EAAMs5C,uBAAyBt5C,EAAM05C,gBAAkB15C,EAAM45C,gBAC/D,MAAM,IAAItgE,EAAe,wHAEAD,EAAa6kG,oBAWxC,GARA3gH,EAAE,kBAAmB,CAACm9G,GAAY,CAAC41C,IACnC/yJ,EAAE,yBAA0B,CAAC6wC,KAEzBpO,EAAMm6C,wBAA0BpB,KAClCx7E,EAAE,iBAAkB,CAAC69G,IACrB79G,EAAE,2BAA4B,CAAC69G,GAAmB,CAACo1C,KAGjDz3E,EAAe,CACjBx7E,EAAE,SAAU,CAACm9G,IACbn9G,EAAE,iBAAkB,CAACm9G,IACrBn9G,EAAE,gBAAiB,CAACm9G,IACpBn9G,EAAE,wBAAyB,CAACm9G,IAC5Bn9G,EAAE,iBAAkB,CAACm9G,IAGrB,MAAMy2C,EAAYl4I,EAAMypE,UAAU1iD,EAAMy6C,SAAWz6C,EAAMy6C,OAAOz9E,OAC1Do0J,EACJn4I,EAAMypE,UAAU1iD,EAAM46C,gBACtB56C,EAAM46C,cAAc59E,OAEhBq0J,EACJp4I,EAAMypE,UAAU1iD,EAAM86C,iBACtB96C,EAAM86C,eAAe99E,OAEvB,IAAKm0J,IAAcC,IAAqBC,EACtC,MAAM,IAAI/3I,EAAe,8JAGAD,EAAa0zB,wBAExC,GAAIokH,IAAcC,GAAoBC,GACpC,MAAM,IAAI/3I,EAAe,wHAGAD,EAAa0zB,wBAExC,GAAKqkH,IAAqBC,IAAiBD,GAAoBC,EAC7D,MAAM,IAAI/3I,EAAe,2GAGAD,EAAa0zB,uBAE1C,CAIA,GAFAxvC,EAAE,mBAAoB,CAAC+wC,GAAY,CAACC,EAAU,EAAG,IAE7CvO,EAAMzD,iBAAmB,EAC3B,GAAIyD,EAAM2L,eAAel/B,MAAO,CAE9B,IADeuzB,EAAM2L,IAAI81F,MAAM91F,GAAO1yB,EAAMiuD,OAAOv7B,IAAQA,EAAInP,MAAM,YAEnE,MAAM,IAAIljB,EAAe,6JAIAD,EAAa0zB,uBAE1C,KAAO,KAAI9zB,EAAMiuD,OAAOlnC,EAAM2L,KAS5B,MAAM,IAAIryB,EAEe,+FAAgB0mB,EAAM2L,sBACJ3L,EAAM2L,IACvBtyB,EAAa0zB,wBAZvC,IAAK/M,EAAM2L,IAAInP,MAAM,WACnB,MAAM,IAAIljB,EAAe,gJAIAD,EAAa0zB,uBAQ1C,CAGFxvC,EAAE,2BAA4B,CAAC8wC,EAAa/zB,EAAc,gBAAgB,IAE5E/c,EAAE,oBAAqB,CAAC8wC,EAAaihB,EAAmB,qBAAqB,IAC7E/xD,EAAE,2BACA,CAACw9G,EAAkBzrD,EAAmB,qBACpC,GAAM,GAAO,IAEjBqhG,EAAkC3wH,EAAMwM,kBACNxM,EAAMsuH,0BAEpCtuH,EAAM9S,qBACRvU,EAAa61B,oCAAoCC,SAASzO,EAAM9S,qBAKlE,MAAMokI,EAAiBtxH,EAAMktH,6BACvBqE,EAAiBvxH,EAAM3P,uBACN2P,EAAM4vB,yBACzB5vB,EAAM4vB,yBAAyB5yD,OAC/B,GACiB,GAAKu0J,EAAiBD,GACzCtiI,EACE,sBAAsBuiI,2DACRD,kFAGpB,GAGF/1I,EAAO3hB,QAAQ+pJ,2BAA6BA,C,iBCzZ5C,MAAM,SAAEpqI,GAAa,EAAQ,MA2B7BgC,EAAO3hB,QAAQ2xB,kBAjBf,cAAgChS,EAO9B,WAAA5O,CAAYm3C,EAAMC,EAASyvG,GACzB31I,MAAMimC,GACNpoD,OAAOwrB,OAAO1X,KAAMu0C,GACpBroD,OAAOwrB,OAAO1X,KAAMgkJ,EACtB,CACA,YAAAC,GACE,OAAOjkJ,KAAKkkJ,UACd,E,WCkEFn2I,EAAO3hB,QAAQ88F,UArFf,MACE,WAAA/rF,CAAYq7C,EAAW,EAAG2rG,EAAM,GAK9BnkJ,KAAKmlI,YAAc,GAGnBnlI,KAAKw+F,YAAc,EACnBx+F,KAAKmrF,OAAS,EACdnrF,KAAKsoB,aAAekwB,EACpBx4C,KAAK4oD,aAAe,EACpB5oD,KAAKy+F,QAAU0lD,EACfnkJ,KAAKokJ,WAAa,EAClBpkJ,KAAK8xB,OAAS,EACd9xB,KAAKqkJ,QAAU,EACfrkJ,KAAKwoD,oBAAsB,EAC3BxoD,KAAKioD,QAAU,EACfjoD,KAAKyoB,QAAU,EACfzoB,KAAK0oD,6BAA+B,EAGpC1oD,KAAK+oD,YAAc,KACnB/oD,KAAKuZ,YAAc,EACnBvZ,KAAKyZ,WAAa,KAClBzZ,KAAKm/F,YAAc,KACnBn/F,KAAKq/F,YAAc,KACnBr/F,KAAKioB,sBAAwB,KAC7BjoB,KAAKuxB,gBAAkB,KAEvBvxB,KAAKspD,iBAAc32C,EACnB3S,KAAKwpD,qBAAkB72C,EACvB3S,KAAKkpD,gBAAkB,EACvBlpD,KAAKmpD,oBAAsB,EAC3BnpD,KAAKuqD,eAAY53C,EACjB3S,KAAKm9F,kBAAexqF,EACpB3S,KAAKinB,aAAe,EACpBjnB,KAAK0pD,kBAAoB,EACzB1pD,KAAK4pD,qBAAuB,EAE5B5pD,KAAK6qD,mBAAqB,KAC1B7qD,KAAK4lB,WAAa,KAClB5lB,KAAK8+F,gBAAkB,EACvB9+F,KAAK4+F,aAAe,EACpB5+F,KAAKq9F,gBAAkB,EACvBr9F,KAAKo9F,aAAe,EACpBp9F,KAAK8oD,gBAAkB,KASvB9oD,KAAKmgG,uBAAyB,KAC9BngG,KAAKqgG,iBAAmB,KACxBrgG,KAAKugG,4BAA8B,KACnCvgG,KAAK0qD,wBAA0B,KAG/B1qD,KAAKskJ,kBAAmB,EACxBtkJ,KAAK2xB,cAAgB,EACrB3xB,KAAK4xC,cAAgB,EACrB5xC,KAAK8nD,aAAe,EACpB9nD,KAAK+tC,QAAU,KAKf/tC,KAAKooB,gBAAiB,CACxB,CAEA,eAAA04E,CAAgBh5C,EAAclW,GAC5B5xC,KAAK8nD,aAAeA,EACpB9nD,KAAK4xC,cAAgBA,EACrB5xC,KAAK2xB,cAAgBm2B,EAAelW,CACtC,CAEA,cAAAmvD,CAAenvD,GACb5xC,KAAK4xC,cAAgBA,CACvB,E,iBCvFF,MAAM,KAAEzb,GAAS,EAAQ,MAMzBpoB,EAAO3hB,QAAQ4nC,qBAAuBmC,EAAKE,IAJd,CAC3B3B,aAAc,oC,iBCHhB,MAAM,OAAE4mE,GAAW,EAAQ,OACrB,KAAEzxD,GAAS,EAAQ,OACnB,QAAEx8B,GAAY,EAAQ,OACtB,IAAEnB,GAAQ,EAAQ,OAClB,KAAE80C,GAAS,EAAQ,MAEzBjzC,EAAO3hB,QAAQkvG,OAASA,EACxBvtF,EAAO3hB,QAAQy9C,KAAOA,EACtB97B,EAAO3hB,QAAQihB,QAAUA,EACzBU,EAAO3hB,QAAQ8f,IAAMA,EACrB6B,EAAO3hB,QAAQ40D,KAAOA,C,iBCPtB,MAAM,YAAEioC,GAAgB,EAAQ,OAC1B,QAAE57E,EAAO,KAAE2zC,GAAS,EAAQ,OAC5B,gBAAElb,GAAoB,EAAQ,OAC9B,UAAEn3B,EAAS,SAAEE,GAAa,EAAQ,OAClC,eAAE/C,GAAmB,EAAQ,OAC7B,gBAAEo8B,EAAe,qBACfC,GAAyB,EAAQ,OACnC,iBAAEC,EAAgB,UAAEs4E,GAAc,EAAQ,OAC1C,gBAAEh7E,GAAoB,EAAQ,OAC9B,eAAEr5B,GAAmB,EAAQ,OAC7B,yBAAE6Z,GAA6B,EAAQ,OACvC,mBAAEqoC,GAAuB,EAAQ,OACjC,UAAE26B,GAAc,EAAQ,OACxB,aAAE7oC,GAAiB,EAAQ,OAC3B,YAAE93B,GAAgB,EAAQ,OAC1B,MAAEyhB,GAAU,EAAQ,OACpB,YAAE/8B,GAAgB,EAAQ,KAG1BoyE,EAAa,eAEb,UACJurC,EAAS,WACTC,EAAU,YACVoW,EAAW,YACXU,EAAW,WACXt3F,GACEh9B,EAEEk3I,EAASllE,EAAWhyF,UAAU0+C,UAC9By4G,EAAYnlE,EAAWhyF,UAAUq/C,aACjC+3G,EAAYplE,EAAWhyF,UAAUsgE,aACjC+2F,EAAY,SAAmBnxJ,GACnC,OAAOytD,EAAK+jD,SAAS/kG,KAAK2tD,aAAap6D,EAAM,GAAIyM,KAAK2tD,aAAap6D,IAAM,EAC3E,GAEM,cACJsnC,EAAa,mBACbrtB,GACEP,EAGE03I,EAAsB,CAC1B,CAAC7+G,EAAgByB,OAAQgnB,EAAmBiC,QAC5C,CAAC1qB,EAAgBM,OAAQmoB,EAAmBgC,WAIxCq0F,EAA6B,CACjC,CAAClkC,EAAUa,gBAAiBhzD,EAAmBiC,QAC/C,CAACkwD,EAAUt6E,OAAiBmoB,EAAmBgC,WAG3Cs0F,EAA4B,CAChC,CAACz8G,EAAiBg/E,MAAe,EACjC,CAACh/E,EAAiBusG,WAAe,EACjC,CAACvsG,EAAiBwsG,SAAe,EACjC,CAACxsG,EAAiBysG,cAAe,EACjC,CAACzsG,EAAiBkwF,QAAe,IAG7BwsB,EAA0B,CAC9B,EAAM58G,EAAgB83B,UACtB,EAAM93B,EAAgB+3B,cAGlB8kF,EAA2B,CAC/B,CAAC78G,EAAgB83B,WAAe,EAChC,CAAC93B,EAAgB+3B,cAAe,GAG5B+kF,EAAyB,CAC7B,GAAG,EACH,GAAG,EACH,GAAG,GAGCC,EAAwB,CAC5B,CAAC98G,EAAqBusG,mBAAoB,EAC1C,CAACvsG,EAAqBssG,kBAAoB,GAG5C,SAASyQ,EAAmBv1I,EAASsgB,EAAiBk1H,GAAiB,GACrE,IAAKl1H,EACH,OAEF,MAAM,WACJsY,EAAU,gBACVI,EAAe,qBACfC,EAAoB,eACpBH,EAAc,YACdH,EAAW,QACXE,EAAO,YACPE,GACEzY,EAIAqY,QAA2D31B,IAA3CkyI,EAA0Bv8G,IAC5C34B,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBe,uBACnBu1F,EAA0Bv8G,KAKzB68G,QACYxyI,IAAf41B,QACyC51B,IAAzCoyI,EAAyBx8G,IAEzB54B,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBG,WACnBq2F,EAAyBx8G,KAKzBC,SACF74B,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBgB,SACnB/mB,IAKAC,SACF94B,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBiB,eACnB/mB,IAIJ,IAAIgiC,EAAQ,EACZ,GAAI9hC,QAA2D,CAE7D8hC,GAD6Bw6E,EAAsBt8G,IACjB,EAEpC,CACI8hC,GACF96D,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBW,aACnBub,IAIA7hC,SACFj5B,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBU,eACnBrmB,IAIAF,SACF/4B,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBK,gBAClBlmB,EAAc,EAAM,GAG3B,CAKA,MAAM9hB,UAA0BqiE,EAU9B,WAAA9rF,CAAYmtB,EAAc,EAAGkN,EAAU,GACrCnpB,MAAM,IAAI66E,EAAU3gE,EAAYG,OAAQ,IAGxC1oB,KAAKimB,QAAUqE,EAGftqB,KAAKw3B,QAAUA,CACjB,CAEA,cAAA4tH,CAAel4G,EAAW7iC,EAAU,KAAMg7I,EAAY,MACpD,MAAM/2F,EAAQtuD,KAAKkrH,aAAah+E,GAChC,QAAcv6B,IAAV27C,EAAqB,OACzB,GAAI+2F,GAAa/2F,EAAMzN,YACrB,OAAOwkG,EAAU/3J,KAAKghE,EAAMzN,YAAayN,EAAMxN,YAEjD,MAAMz0D,EAAQiiE,EAAM3N,WACpB,OAAOt2C,EAAUA,EAAQhe,GAASA,CACpC,CAKA,aAAAmhJ,GACE,MAAMl/E,EAAQtuD,KAAKolJ,eAAe72F,EAAmBG,WAAYk8D,EAAW25B,GAC5E,OAAOO,EAAwBx2F,EACjC,CAKA,aAAAmsF,GACE,MAAMnsF,EAAQtuD,KAAKolJ,eAAe72F,EAAmBE,WAAYm8D,EAAW25B,GAI5E,OAHc,IAAVj2F,GACFz/C,EAAS,2DAEJm2I,EAAuB12F,EAChC,CAKA,aAAAvnC,GACE,OAAO/mB,KAAKolJ,eAAe72F,EAAmBQ,uBAAwB67D,EAAW25B,EACnF,CAKA,uBAAArW,GACE,MAAM5/E,EAAQtuD,KAAKolJ,eAAe72F,EAAmBW,aAAc27D,EAAY25B,GAC/E,QAAc7xI,IAAV27C,EACF,OAGF,MAAMg3F,GAAkB,MAARh3F,IAAmB,GACnC,OAAIg3F,IAAWL,EAAsB98G,EAAqBusG,mBACjDvsG,EAAqBusG,kBACnB4Q,IAAWL,EAAsB98G,EAAqBssG,kBACxDtsG,EAAqBssG,sBADvB,CAIT,CAIA,4BAAArG,GAIE,QADwB,KAFVpuI,KAAKolJ,eAAe72F,EAAmBW,aAAc27D,EAAY25B,KAE5C,IAEjC,KAAK,EAML,QAEE,OANF,KAAK,EACH,OAAO,EACT,KAAK,EACH,OAAO,EAKb,CAKA,aAAAlW,GACE,OAAOtuI,KAAKolJ,eAAe72F,EAAmB6gD,YAAa6xB,EAAawjB,EAC1E,CAKA,cAAA1W,GACE,MAAM1hJ,EAAQ2T,KAAKolJ,eAAe72F,EAAmBK,gBAAiBg8D,EAAW25B,GACjF,QAAc5xI,IAAVtmB,EAKJ,QAASA,CACX,CAKA,WAAAyrF,GACE,OAAO93E,KAAKolJ,eAAe72F,EAAmBmC,SAAUljD,EAC1D,CAKA,SAAAmY,GACE,OAAO3lB,KAAKolJ,eAAe72F,EAAmBa,OAAQ6xE,EAAawjB,EACrE,CAKA,QAAA9V,GACE,OAAO3uI,KAAKolJ,eAAe72F,EAAmBgB,SAAU0xE,EAAawjB,EACvE,CAKA,aAAA5V,GACE,OAAO7uI,KAAKolJ,eAAe72F,EAAmBiB,eAAgByxE,EAAawjB,EAC7E,CAKA,qBAAA/W,GACE,OAAO1tI,KAAKolJ,eAAe72F,EAAmBiC,QAChD,CAKA,iBAAAgqF,GACE,OAAOx6I,KAAKolJ,eAAe72F,EAAmBgC,UAChD,CAKA,qBAAAq9E,GACE,MAAMtlG,EACJtoC,KAAKolJ,eAAe72F,EAAmBugD,oBAAqBmyB,EAAawjB,GAC3E,IAAIh7H,EAMJ,OALAv9B,OAAOwb,KAAKm9I,GAA2BvqI,QAAS6C,IAC1C0nI,EAA0B1nI,KAASmrB,IACrC7e,EAAStM,KAGNsM,CACT,CAKA,uBAAAqkH,GACE,MAAMxlG,EACJtoC,KAAKolJ,eAAe72F,EAAmBe,uBAAwB2xE,EAAawjB,GAC9E,IAAIh7H,EAMJ,OALAv9B,OAAOwb,KAAKm9I,GAA2BvqI,QAAS6C,IAC1C0nI,EAA0B1nI,KAASmrB,IACrC7e,EAAStM,KAGNsM,CACT,CAKA,iBAAAmM,GACE,OAAO51B,KAAKolJ,eAAe72F,EAAmBsB,eACnB8xE,EAAa+iB,EAC1C,CAKA,oBAAAa,GACE,OAAOvlJ,KAAKolJ,eAAe72F,EAAmBuB,kBACnB6xE,EAAa+iB,EAC1C,CAKA,cAAA1gF,GACE,OAAOhkE,KAAKolJ,eAAe72F,EAAmBoB,aAAcsxE,EAAawjB,EAC3E,CAKA,uBAAAxW,GACE,QAASjuI,KAAKolJ,eAAe72F,EAAmBS,wBAAyB47D,EAAW25B,EACtF,CAKA,SAAA3sE,GACE,OAAO53E,KAAKolJ,eAAe72F,EAAmBC,OAAQo8D,EAAW25B,EACnE,CAKA,gBAAAxV,GACE,OAAO/uI,KAAKolJ,eAAe72F,EAAmBU,eAAgB27D,EAAW25B,EAC3E,CAKA,qBAAA/V,GACE,OAAOxuI,KAAKolJ,eAAe72F,EAAmBkhD,wCACnBwxB,EAAawjB,EAC1C,CAKA,kBAAA/6B,GACE,OAAO1pH,KAAKolJ,eAAe72F,EAAmByB,kBACnB2xE,EAAa+iB,EAC1C,CAKA,mBAAArX,GACE,OAAOrtI,KAAKolJ,eAAe72F,EAAmBY,mBACnB07D,EAAY25B,EACzC,CAKA,kBAAA/V,GACE,OAAOzuI,KAAKolJ,eAAe72F,EAAmBmhD,kBACnBiyB,EAAa+iB,EAC1C,CAUA,+BAAOrrE,CAAyB3zD,EACApI,GAC9B,MAAM3N,EAAU,IAAIiX,EAAkBV,EAAyBG,cAQ/D,OANe1W,EAAQyJ,UAChBwM,WAAatI,EAEpB3N,EAAQs+C,aAAa,IAAI5N,EAAarW,EAAMk7F,OACN32E,EAAmBa,OACnB1pC,IAC/B/V,CACT,CAYA,gBAAOugB,CACL1N,EACAyN,EACA3S,GAEA,MAAM3N,EAAU,IAAIiX,EAAkBV,EAAyBm0C,QAEhD1qD,EAAQyJ,UAChBwM,WAAatI,EAcpB,MAAMkoI,EAAoBZ,EAA2BpiI,EAAgBzuB,MACrE,QAA0B4e,IAAtB6yI,EAAiC,MAAM,IAAI15I,EAAe,4BAiB9D,OAhBA6D,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACNsgB,EACA3qH,EAAcrY,EAAgBxY,QAIhC2F,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBE,WAClBjsC,EAAgBktG,QAAU,EAAI,IAIjCw1B,EAAmBv1I,EAASsgB,GAErBtgB,CACT,CAUA,gBAAOygB,CACL5N,EACAlF,GAEA,MAAM3N,EAAU,IAAIiX,EAAkBV,EAAyBoyG,QAEhD3oH,EAAQyJ,UAChBwM,WAAatI,EAOpB,MAAMkoI,EAAoBZ,EAA2BpiI,EAAgBzuB,MACrE,QAA0B4e,IAAtB6yI,EAAiC,MAAM,IAAI15I,EAAe,4BAO9D,OANA6D,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACNsgB,EACA3qH,EAAcrY,EAAgBxY,QAGzB2F,CACT,CAaA,8BAAOgpE,CACG40D,EACAkY,EACA1iI,EACA80D,EACAv6D,GACR,MAAMooI,EAAQ,IAAI9+H,EAAkBV,EAAyBsxD,aA0B7D,OAxBkBkuE,EAAMtsI,UACdwM,WAAatI,OAEA3K,IAAnB46H,GACFmY,EAAMz3F,aAAa,IAAI5N,EAAarW,EAAMk7F,OACN32E,EAAmBsB,eACnB09E,SAEhB56H,IAAlB8yI,GACFC,EAAMz3F,aAAa,IAAI5N,EAAarW,EAAMk7F,OACN32E,EAAmBqB,cACnB61F,IAGtCC,EAAMz3F,aAAa,IAAI5N,EAAarW,EAAMk7F,OACN32E,EAAmBC,OACnBzrC,IAEpC2iI,EAAMz3F,aAAa,IAAI5N,EAAarW,EAAMi7F,OACN12E,EAAmBmC,SACnBmnB,GAAY,KAIzC6tE,CACT,CA2BA,6BAAO5Y,CAAuBtqH,EACAyN,EACAu4D,EACAm9D,EACAroI,EACAyF,EACAxE,EACAqnI,EACArY,EAAiBvsF,EAAKgkD,MACtB6gD,EAAoB7kG,EAAKgkD,MACzBriF,GAAU,EACVmyD,OAAsBniE,EACtBi2G,OAAkBj2G,EAClBk2G,OAAmBl2G,EACnBmzI,GAAiB,GA2B7C,MAAMp2B,EAAUltG,EAAgBktG,QAC1Bq2B,EAAgBv9D,EAAS7hD,MACzBq/G,EAAex9D,EAASz0F,KAKxB4b,EAAU,IAAIiX,EAAkBV,EAAyBkyG,MAChDzoH,EAAQyJ,UAChBwM,WAAatI,EAGpB,MAAMkoI,EAAoBb,EAAoBqB,GAC9C,QAA0BrzI,IAAtB6yI,EAAiC,MAAM,IAAI15I,EAAe,4BAuF9D,GAtFA6D,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACNsgB,EACAO,IAIEJ,GACFh2I,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmBkC,UACnBk1F,EAAkBh/G,QAIlBq/G,IAAiBlgH,EAAgBM,QAEnCz2B,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmBsB,eACnB09E,IAGF59H,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBuB,kBACnB+1F,KAKJl2I,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmBC,OACnBzrC,IAIFpT,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBE,WACnBihE,IAOFw1B,EAAmBv1I,EAASsgB,GAAiB,GAEzC1R,GAEF5O,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmByC,QACnB,IAIA40F,GAEFj2I,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBS,wBACnB,IAOA82F,EAEFn2I,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmBI,SACnB,IAEOhsC,GAEThT,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmBI,SACnB,SAGwBh8C,IAAxBmiE,EAAmC,CAErC,IAAImxE,EAAUnxE,EAAoBuiC,kBAClC,GAAIviC,EAAoBlvC,QAAUF,EAAgBsnB,KAAM,CAGtDi5F,EAF0BjlG,EAAKG,WAAW2zB,EAAoBuiC,mBAAmB,GACrC9N,SAAS,IAEvD,CACA55F,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmB0B,sBACnB,CACEl8D,KAAO+gF,EAAoBlvC,MAC3Bv5C,MAAO45J,IAGb,CAuBA,YArBwBtzI,IAApBi2G,GAGFj5G,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmByB,kBACnB44D,IAKAC,SAGFl5G,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBY,mBACnB05D,IAIGl5G,CACT,CAWA,8BAAOq8H,CAAwBtmH,EACApI,GAC7B,MAAM3N,EAAU,IAAIiX,EAAkBV,EAAyBujG,QAU/D,OARe95G,EAAQyJ,UAChBwM,WAAatI,EAEpB3N,EAAQs+C,aAAa,IAAI5N,EAAarW,EAAMk7F,OACN32E,EAAmBa,OACnB1pC,IAG/B/V,CACT,CAEA,+BAAOqhB,CAAyB1T,EACA8Q,GAC9B,MAAMze,EAAU,IAAIiX,EAAkBV,EAAyBmyG,aAU/D,OATe1oH,EAAQyJ,UAChBwM,WAAatI,EAEpB3N,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmBiC,QACnBpiC,EAAM27D,aAGDp6E,CACT,CAcA,aAAOmiI,CAAOpsH,EACAwgI,OAAqBvzI,EACrBoQ,OAAapQ,EACbwzI,OAAuBxzI,GACnC,MAAMhD,EAAU,IAAIiX,EAAkBV,EAAyBC,WA0B/D,GAxBAxW,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmBa,OACnB1pC,IAGEwgI,GACFv2I,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmBsB,eACnBq2F,IAIAnjI,SAGFpT,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACLniH,GAAc,IAAQwrC,EAAmBC,OAASD,EAAmBc,iBACtEtsC,IAIAojI,GAAyBA,EAAqB7nJ,KAAO,EAAI,CAE3D,IAAI+zI,EAAiB,EACrB,MAAM+T,EAAc/5I,EAAegoB,OACnC,IAAI,IAAI5lC,EAAI,EAAGA,EAAI23J,EAAY52J,OAAQf,IACrC4jJ,GAAiB8T,EAAqBvqI,IAAIwqI,EAAY33J,IAAM03J,EAAqB/5G,IAAIg6G,EAAY33J,IAAIe,OAAS,EAGhH,GAAI6iJ,EAAgBzrH,EAAkB0rH,sBACpC,MAAM,IAAIxmI,EAAe,mDAE3B6D,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmB4B,gBACnBg2F,GAEJ,CAEA,OAAOx2I,CACT,CAWA,mBAAO6hI,CAAa9rH,EAAQkjG,OAAkBj2G,EAAWuzI,OAAqBvzI,GAC5E,MAAMhD,EAAU,IAAIiX,EAAkBV,EAAyBujG,QAyB/D,OAvBA95G,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmBa,OACnB1pC,IAGEkjG,GAEFj5G,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmByB,kBACnB44D,IAYGj5G,CACT,CAUA,kCAAOkX,CAA4BnB,EAAQikG,EAAQ08B,EAAU,MAC3D,MAAM12I,EAAU,IAAIiX,EAAkBV,EAAyBQ,kBACzDtP,EAA0B,OAAdivI,EAAsB,IAAM,IAExCz/I,EAAS+I,EAAQyJ,UAcvB,OAbAxS,EAAO2S,YAAcnC,EACrBxQ,EAAO6S,WAAa4sI,EAEpB12I,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMk7F,OACN32E,EAAmBa,OACnB1pC,IAEF/V,EAAQs+C,aAAa,IAAI5N,EACvBrW,EAAMi7F,OACN12E,EAAmBQ,uBACnB46D,EAAS,EAAM,IAEVh6G,CACT,EAIFiX,EAAkB0rH,sBAAwB,GAE1CvkI,EAAO3hB,QAAQw6B,kBAAoBA,C,WCx8BnC,MAAMijB,EAAO,CACXuC,IAAG,CAACrpC,EAAK7N,EAAO61G,IACNhoG,IAAQ7N,GAAW,GAAQ61G,GAAW,EAGhD,GAAA13G,CAAIuuF,EAAQ7+E,EAAK7N,EAAO61G,GACtB,MAAMu7C,GAAW,GAAKv7C,GAAW,EAGjC,OADanpB,IAAW0kE,GAAWpxJ,IADf6N,EAAMujJ,IAAYpxJ,CAGxC,GAGF6Y,EAAO3hB,QAAQy9C,KAAOA,C,wBCbtB97B,EAAO3hB,QAAUssC,QAAQ,K,iBCAzB,MAAM,KAAEvC,GAAS,EAAQ,MAMnBhgB,EAAsB,CAC1BC,GAA6B,EAC7BmqB,KAA6B,EAC7B1S,SAA6B,EAC7B1D,kBAA6B,EAC7BspC,4BAA6B,EAC7Bp9C,iBAA6B,GAG/BtI,EAAO3hB,QAAQ+pB,oBAAsBggB,EAAKE,IAAIlgB,GAI9CpI,EAAO3hB,QAAQ+pB,oBAAoB6vH,cAAc,CAC/C,GAA+B7vH,EAAoBC,GACnD,KAA+BD,EAAoBoqB,KACnD,SAA+BpqB,EAAoB0X,SACnD,kBAA+B1X,EAAoBgU,kBACnD,4BAA+BhU,EAAoBs9C,4BACnD,iBAA8Bt9C,EAAoBE,kB,iBCzBpD,MAAM,KAAEwzB,EAAI,QAAEx8B,GAAY,EAAQ,OAC5B,UAAEuB,EAAS,UAAED,GAAc,EAAQ,OACnC,kBAAEw6E,GAAsB,EAAQ,OAChC,WAAE15D,GAAe,EAAQ,OAG7B2c,IAAK57C,EACL6C,IAAKg5D,GACHxiB,GAEE,UACJK,EAAS,WACTG,GACEh9B,EAEEub,EAAM,CACZA,WAAiB,SAAoBkjB,EAASrqC,GAC5C,GAAKA,EAAS,EAAKqqC,EAAQt8C,OAGzB,OAAO,EAET,IAAI+D,EAAMkO,EACV,MAAM+rD,EAAU1hB,EAAQC,UAAUx4C,GAClCA,IAGA,MAAM0yB,EAAUz1B,EAAKg9D,EAAS,EAAG,GAC3Bh+B,EAAS,IAAIC,EAEnB,GAAMxJ,IAAYkjE,EAAkBU,iBAC9B5jE,IAAYkjE,EAAkBW,iBAC9B7jE,IAAYkjE,EAAkBa,sBAC9B/jE,IAAYkjE,EAAkBc,qBAGlC,OAAO,EAG4Bn+C,EAAQ3vC,SAAS,UAEtD,MAAMu1B,EAAYoa,EAAQ6hB,aAAap6D,GAEvC,GADAA,GAAO,EACFkO,EAASiwB,EAAaoa,EAAQt8C,OAGjC,OAAO,EAET,MAAM+2J,EAAWz6G,EAAQC,UAAUx4C,GAKnC,GAJAA,IAEAi8B,EAAOvJ,QAAUA,EACjBuJ,EAAO65D,SAAWk9D,EACdtgI,IAAYkjE,EAAkBU,iBAChC5jE,IAAYkjE,EAAkBW,gBAE9Bt6D,EAAOlW,wBAA0BwyB,EAAQ3vC,SAAS,SAAU5I,EAAKA,EAAMm+B,EAAY,OAC9E,CACL,MAAM80H,EAAc16G,EAAQC,UAAUx4C,GACtCA,IACAi8B,EAAO45D,qBAAuBt9C,EAAQ3vC,SAAS,SAAU5I,EAAKA,EAAMizJ,GACpEjzJ,GAAOizJ,EACP,MAAMC,EAAa36G,EAAQC,UAAUx4C,GACrCA,IACAi8B,EAAOlW,wBAA0BwyB,EAAQ3vC,SAAS,SAAU5I,EAAKA,EAAMkzJ,GACvElzJ,GAAOkzJ,CACT,CACA,OAAOj3H,CACT,EAEA5G,OAAa,SAAgB4G,GAC3B,GAAMA,EAAOvJ,UAAYkjE,EAAkBU,iBACrCr6D,EAAOvJ,UAAYkjE,EAAkBW,iBACrCt6D,EAAOvJ,UAAYkjE,EAAkBa,sBACrCx6D,EAAOvJ,UAAYkjE,EAAkBc,qBAGzC,OAAO,EAIT,MAAMnrF,EAAO,GACb,IAAI0uD,EAAU,EACdA,EAAUnB,EAAQmB,EAAS,EAAG,EAAG,GACjCA,EAAUnB,EAAQmB,EAASh+B,EAAOvJ,QAAS,EAAG,GAC9CnnB,EAAKtJ,KAAK00C,EAAUsjB,IACpB,IAAI97B,EAAY,EAAIlC,EAAOlW,wBAAwB9pB,OAkBnD,OAjBIggC,EAAOvJ,UAAYkjE,EAAkBa,sBACvCx6D,EAAOvJ,UAAYkjE,EAAkBc,uBACrCv4D,GAAa,EAAIlC,EAAO45D,qBAAqB55F,QAE/CsP,EAAKtJ,KAAK60C,EAAW3Y,IACrB5yB,EAAKtJ,KAAK00C,EAAU1a,EAAO65D,WACvB75D,EAAOvJ,UAAYkjE,EAAkBa,sBACvCx6D,EAAOvJ,UAAYkjE,EAAkBc,sBAGrCnrF,EAAKtJ,KAAK00C,EAAU1a,EAAO45D,qBAAqB55F,SAChDsP,EAAKtJ,KAAKg6B,EAAO45D,sBACjBtqF,EAAKtJ,KAAK00C,EAAU1a,EAAOlW,wBAAwB9pB,SACnDsP,EAAKtJ,KAAKg6B,EAAOlW,0BAEjBxa,EAAKtJ,KAAKg6B,EAAOlW,yBAEZxa,EAAKojB,KAAK,GACnB,GAEAnU,EAAO3hB,QAAQw8B,IAAMA,C,iBC3GrB,MAAM,yBAAE4Q,GAA6B,EAAQ,MAEvCob,EAAwB,CAC5BI,IAAKxb,GAGPzrB,EAAO3hB,QAAQwoD,sBAAwBA,C,iBCNvC,MAAM,UACJjmC,EAAS,UACTC,EAAS,SACTC,EAAQ,SACR2S,EAAQ,UACR/D,GAAc,EAAQ,OAElB,WAAE+2B,GAAe,EAAQ,MACzB,QAAEnnC,EAAO,IACPnB,GAAQ,EAAQ,OAClB,aAAEL,GAAiB,EAAQ,OAC3B,MAAE+nF,GAAU,EAAQ,OACpB,eAAEnW,GAAmB,EAAQ,OAC7B,oBAAEtnE,GAAwB,EAAQ,OAClC,sBAAE8oE,GAA0B,EAAQ,OACpC,0BAAEn1D,GAA8B,EAAQ,OACxC,sBAAEisC,GAA0B,EAAQ,OACpC,oBAAE+/C,GAAwB,EAAQ,OAClC,wBAAE9/C,GAA4B,EAAQ,MAEtClgB,EAAO,EAAQ,MACfD,EAAQ,EAAQ,OAEhB,oBACJsrF,GACE9zH,GACE,gBACJE,GACErB,GACE,SACJgsC,GACE1D,EAKJ,IAAIkyG,GADqC,oBAAX3vH,OAAyBC,OAASD,QAChCggB,UAI9B2vG,EAAwC,EAAQ,MA2b3C,CAGL,MAAM,iBAAE17E,GAAqB,EAAQ,MACrC4oB,EAAM59B,EAAyBgV,GAE/B4oB,EAAM59B,EAAyB,MAQ7B,sBAAA2wF,CAAuBC,GACrB,IAAIt6H,EAAU,CAAC,EACXtsB,KAAKw+B,MACPlS,EAAUtsB,KAAKsrE,mBAGfh/C,EAAe,MAAI,IAAIupB,EAAMgxG,MAAM,CACjCC,WAAW,KAIbx6H,EAAe,MAAI,IAAIwpB,EAAK+wG,MAG9B,MAAME,EAAUz6H,EAAe,MACzB06H,EAAuBD,EAAQ/qG,iBAOrC,OANA+qG,EAAQ/qG,iBAAmB,SAA6Bx9C,EAAM+lB,GAC5D,MAAMksB,EAASu2G,EAAqB15J,KAAK0S,KAAMxB,EAAM+lB,GAErD,OADAksB,EAAOzjD,GAAG,QAAS45J,GACZn2G,CACT,EAEOnkB,CACT,GAEJ,CAEAve,EAAO3hB,QAAQktC,0BAndf,cAAwC08B,EAStC,WAAA74D,CAAYghC,EAAKC,EAASC,EAAQ7L,GAChCnkB,MAAM8vB,EAAKC,EAASC,EAAQ7L,GAI5BxyB,KAAKu+B,KAzBT,SAAkBJ,GAEhB,MAAO,KADGA,EAAInP,MAAM,wBACN,IAChB,CAsBgBi4H,CAAS9oH,GAKrBn+B,KAAK+wC,QAAU,KAKf/wC,KAAKk0F,YAAa,IAAIz0F,MAAOi3B,SAgB/B,CAMA,MAAAo+D,GACE90F,KAAK42D,uBACL52D,KAAKoxC,OAAS2kB,EAAsB/0C,WAEpChhB,KAAK2+B,SACC,IAAIsgD,EACAn1D,EAA0BhW,UAC1B,YACA,EACA,KACA9T,KAAKk0F,YACjB,CAQA,OAAApgC,CAAQ4gC,EAAgB34E,GACtB,GAAI24E,IAAmB10F,KAAK+wC,QAE1B,OAEF,GAAI/wC,KAAKoxC,SAAW2kB,EAAsBwrB,oBAExC,OAEF,MAAM2lE,EAAS,GACT90J,EAAO0jH,EAAoB/5F,EAAM3pB,OAAS0jH,EAAoB,GACpEoxC,EAAO1xJ,KAAK,GAAGumB,EAAM3pB,QAAQA,EAAK4X,SAAS5X,EAAK8tB,qBACzBvN,IAAnBoJ,EAAMkoB,UACRijH,EAAO1xJ,KAAK,kBAAkBumB,EAAMkoB,YAElCloB,EAAMwR,QACR25H,EAAO1xJ,KAAK,WAAWumB,EAAMwR,UAE/B,MAAM7gC,EAAMw6J,EAAOhlI,KAAK,MAEGnG,EAAMhoB,KAAkBgoB,EAAMkoB,SAAkBloB,EAAM3pB,KAAgB2pB,EAAMwR,OACvGvtB,KAAKoxC,OAAS2kB,EAAsBurB,kBACpCthF,KAAKkjB,QAAQ,sBAAsBx2B,IAAOmf,EAAagpF,oBACzD,CAEA,OAAA9gC,GAEE/zD,KAAKmnJ,mBACLnnJ,KAAKonJ,gBACP,CAEA,oBAAAC,GACmC,IAA7BrnJ,KAAKk3D,oBACPl3D,KAAK+zD,UACI/zD,KAAKsnJ,eACdtnJ,KAAKsnJ,eAET,CAOA,OAAA1zG,CAAQ8gD,EAAgB34E,GAEtB,GADAlN,EAAS,kDAAkD6lF,qBAAkC10F,KAAK+wC,WAC9F2jD,IAAmB10F,KAAK+wC,QAE1B,YADAliC,EAAS,4EAGX,GAAI7O,KAAKoxC,SAAW2kB,EAAsBwrB,oBAExC,YADA1yE,EAAS,wDAGX,MAAMniB,EAAOqvB,EAAa,QAAI,KAAMA,EAAMpM,UAAa,GACvDd,EAAS,wCAAwCniB,oBAAsBsT,KAAKoxC,UAExEpxC,KAAKoxC,SAAW2kB,EAAsBwxF,qBACxCvnJ,KAAK42D,uBACL52D,KAAKoxC,OAAS2kB,EAAsBurB,kBACpCthF,KAAKkjB,QAAQ,sBAAsBx2B,IAAOmf,EAAawK,mBAEvDrW,KAAK2+B,SACC,IAAIsgD,EACAn1D,EAA0BpV,WAC1B,mBAAmBhoB,IACnB,KACAmf,EAAawK,iBAAkB,MAE7C,CAMA,SAAAmxI,CAAUzrI,GACJ/b,KAAK0+B,SACP1+B,KAAK0+B,QAAQi/E,kBAAkB5hG,EAAMjd,KAEzC,CAMA,kBAAA63D,GACE9nD,EAAS,uCACT7O,KAAKolC,MAAQ2wB,EAAsBurB,kBACnCthF,KAAK2+B,SAAS,IAAIsgD,EAChBn1D,EAA0BtV,gBAC1B,uBACA,KACA3I,EAAa4I,SAEjB,CAMA,OAAAyB,GACE,GAAIlW,KAAKoxC,SAAW2kB,EAAsB15C,KAExC,OADAoB,EAAU,gCAAgCs4C,EAAsB9zC,OAAOjiB,KAAKoxC,WACrEj7B,EAAoBs9C,4BAE7B,IAAKzzD,KAAKu+B,KAER,OADA/c,EAAS,8BACFrL,EAAoBE,iBAEzBrW,KAAK+wC,SACP/wC,KAAK4zC,QAAQ,4BAGf/kC,EAAS,4CACT,IACE7O,KAAK02D,uBACL12D,KAAKoxC,OAAS2kB,EAAsBqrB,mBACNphF,KAAKynJ,iBAEjCznJ,KAAKynJ,eAAiBznJ,KAAK2mJ,uBAAuB3mJ,KAAK+zD,QAAQvkD,KAAKxP,QAEtE6O,EAAS,uBAOP7O,KAAK+wC,QAAU,IAAI21G,EAAY1mJ,KAAKu+B,KAAM,wBAAyBv+B,KAAKynJ,gBACxEznJ,KAAK+wC,QAAQ22G,QAAU1nJ,KAAK+zD,QAAQvkD,KAAKxP,MAK3CA,KAAK+wC,QAAQkH,WAAa,cAC1Bj4C,KAAK+wC,QAAQwH,OAASv4C,KAAK80F,OAAOtlF,KAAKxP,MACvCA,KAAK+wC,QAAQzwC,UAAYN,KAAKwnJ,UAAUh4I,KAAKxP,MAC7CA,KAAK+wC,QAAQuH,QAAUt4C,KAAK8zD,QAAQtkD,KAAKxP,KAAMA,KAAK+wC,SACpD/wC,KAAK+wC,QAAQM,QAAUrxC,KAAK4zC,QAAQpkC,KAAKxP,KAAMA,KAAK+wC,QAEtD,CAAE,MAAOjyB,GAKP,GAJAjQ,EAAS,qBAAqBiQ,EAAMnP,WACTmP,EAAMwF,MACjCtkB,KAAKoxC,OAAS2kB,EAAsBurB,kBACpCthF,KAAK42D,yBACD93C,aAAiB2+D,GAGnB,MAAM,IAAIA,EAAe,+BAA+B3+D,EAAMnP,UACrCmP,EAAMnJ,SAAW9J,EAAawK,kBAEzD,OALErW,KAAK6jD,WAAa/kC,EAKb3I,EAAoBE,gBAC7B,CAGA,OADAxH,EAAS,2BACFsH,EAAoBC,EAC7B,CAOA,IAAAxG,CAAK9Q,EAAM6xB,GAAQ,GACjB,GAAI3wB,KAAKoxC,SAAW2kB,EAAsB/0C,WACxC,OAAO7K,EAAoBs9C,4BAG7B,MAAMwuB,EAAUnjF,EAAKtP,OACfm4J,EAAe3nJ,KAAKm2D,mBAAqBn2D,KAAKk3D,qBAAwB,EAE5E,IAAMvmC,IAASg3H,EAGb,OAFA3nJ,KAAKy2D,gBAAiB,EAClBz2D,KAAKsnJ,eAAetnJ,KAAKsnJ,gBACtBnxI,EAAoB0X,SAK7B,MAAM+5H,EAAkB5nJ,KAAKq2D,iBACvB6qE,EAAKC,EAAoBriI,GAC/B,GAAImjF,EAAU2lE,EACZ,IAAK,IAAIn5J,EAAI,EAAGA,EAAIwzF,EAASxzF,GAAKm5J,EAChC5nJ,KAAK+wC,QAAQnhC,KAAKsxH,EAAGxrI,MAAMjH,EAAGA,EAAIm5J,SAGpC5nJ,KAAK+wC,QAAQnhC,KAAKsxH,GAKpB,OAFAlhI,KAAKk2D,aAAatqC,cAAgBq2D,IAChCjiF,KAAKk2D,aAAaxqC,WACbvV,EAAoBC,EAC7B,CAMA,iBAAA8gD,GAGE,OAAOl3D,KAAK+wC,QAAU/wC,KAAK+wC,QAAwB,eAAI,CACzD,CAKA,KAAAvsB,CAAMD,GACJvkB,KAAKmiF,eAAiB59D,EACtBvkB,KAAKonJ,gBACP,CAEA,gBAAAD,GACMnnJ,KAAKy2D,gBAAkBz2D,KAAKk3D,oBAAsBl3D,KAAKm2D,qBAEzDn2D,KAAKy2D,gBAAiB,EACtBz2D,KAAK2+B,SACH,IAAIsgD,EAAsBn1D,EAA0B5U,gBAC1B,GAAI,KAAM,EAAGlV,KAAKk0F,aAElD,CAEA,cAAAkzD,GACE,IAAKpnJ,KAAKmiF,eAAgB,OAW1B,MAAMv1F,EAAKoT,KAAKmiF,eAChBniF,KAAKmiF,eAAiB,KACtBv1F,GACF,CAKA,OAAAs2B,CAAQvT,EAASgG,GAgDf,OA7CI3V,KAAKoxC,SAAW2kB,EAAsB15C,OACxCxN,EAAS,gCAAgCc,KAGzC3P,KAAKoxC,OAAS2kB,EAAsBwrB,oBAEhCvhF,KAAK+wC,UACP/wC,KAAK+wC,QAAQoB,QACbnyC,KAAK+wC,QAAQwH,OAAS,KACtBv4C,KAAK+wC,QAAQzwC,UAAY,KACzBN,KAAK+wC,QAAQuH,QAAU,KACvBt4C,KAAK+wC,QAAQM,QAAU,WAAyB,EAChDrxC,KAAK+wC,QAAU,MAGb/wC,KAAKke,gBACPnJ,aAAa/U,KAAKke,eAClBle,KAAKke,mBAAgBvL,GAQvB3S,KAAKy2D,gBAAiB,EAEtBz2D,KAAKoxC,OAAS2kB,EAAsB15C,KAEpCrc,KAAK0+B,QAAU,MAIb1+B,KAAK2+B,WAGP3+B,KAAK2+B,SAAS,IAAIsgD,EAAsBn1D,EAA0BE,iBAC1Bra,GAAW,uBACX,KACAgG,GAAW,EACX3V,KAAKk0F,aAE7Cl0F,KAAK2+B,SAAW,MAGXxoB,EAAoBC,EAC7B,CAMA,UAAAoP,GAEE,MADY,kCAAkCjY,EAAgBvN,KAAKk0F,aAErE,CAEA,sCAAOx6D,GAIL,MAAMukG,EAAS,CAAC,WAAY,UAC5B,OAAK/lF,EAAS+lF,SAAeyoB,IACxBxuG,EAAS+lF,SAAejyC,cACxB9zC,EAAS+lF,SAAepwI,YAMzB,eAAgB64J,EAAYr5J,WAC9BwhB,EAAS,8EACF,IAGTA,EAAS,uFACF,IAXLA,EAAS,qFACF,EAWX,E,GC3bEg5I,EAA2B,CAAC,ECEhC,IAAIC,EDCJ,SAASC,EAAoBC,GAE5B,IAAIC,EAAeJ,EAAyBG,GAC5C,QAAqBr1I,IAAjBs1I,EACH,OAAOA,EAAa77J,QAGrB,IAAI2hB,EAAS85I,EAAyBG,GAAY,CAGjD57J,QAAS,CAAC,GAOX,OAHA87J,EAAoBF,GAAUj6I,EAAQA,EAAO3hB,QAAS27J,GAG/Ch6I,EAAO3hB,OACf,CCnB0B27J,CAAoB,M","sources":["webpack://solclientjs/./node_modules/fflate/lib/node.cjs","webpack://solclientjs/./modules/solclient-session/lib/session-fsm.js","webpack://solclientjs/./modules/solclient-message-publisher/lib/message-publisher.js","webpack://solclientjs/./modules/solclient-transport/lib/web/web-transport-states.js","webpack://solclientjs/./modules/solclient-util/lib/uuid.js","webpack://solclientjs/./modules/solclient-util/lib/process.js","webpack://solclientjs/./modules/solclient-eskit/lib/iterator.js","webpack://solclientjs/./modules/solclient-session/lib/session-request-types.js","webpack://solclientjs/./modules/solclient-message/lib/message-delivery-mode-types.js","webpack://solclientjs/./modules/solclient-message-consumer/api.js","webpack://solclientjs/external node-commonjs \"buffer\"","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-request-result.js","webpack://solclientjs/./modules/solclient-debug/api.js","webpack://solclientjs/./modules/solclient-transport/lib/web/web-transport-capabilities.js","webpack://solclientjs/./modules/solclient-sdt/lib/codec/encode-map.js","webpack://solclientjs/./modules/solclient-util/lib/string-utils.js","webpack://solclientjs/./modules/solclient-session/lib/global-context.js","webpack://solclientjs/./modules/solclient-transport/lib/transport-base.js","webpack://solclientjs/./modules/solclient-smf/lib/codec/priority-user-cos-map.js","webpack://solclientjs/./modules/solclient-transport/lib/base-smf-client.js","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-return-codes.js","webpack://solclientjs/./modules/solclient-message-publisher/lib/message-publisher-properties-validator.js","webpack://solclientjs/./modules/solclient-sdt/lib/validate-sdt-field.js","webpack://solclientjs/./modules/solclient-message/lib/message-outcomes.js","webpack://solclientjs/./node_modules/ws/lib/event-target.js","webpack://solclientjs/./modules/solclient-log/lib/global-binding.js","webpack://solclientjs/./modules/solclient-replaystart/lib/replayStartLocationBeginning.js","webpack://solclientjs/./modules/solclient-destination/lib/destination-util.js","webpack://solclientjs/./modules/solclient-queue/lib/queue-properties-validator.js","webpack://solclientjs/./modules/solclient-factory/lib/solclient-factory-profiles.js","webpack://solclientjs/./modules/solclient-smf/lib/codec/param-parse.js","webpack://solclientjs/./modules/solclient-sdt/api.js","webpack://solclientjs/./modules/solclient-validate/api.js","webpack://solclientjs/./modules/solclient-smf/lib/message-objects/binary-meta-block.js","webpack://solclientjs/./modules/solclient-eskit/lib/mixin.js","webpack://solclientjs/./modules/solclient-factory/lib/solclient-factory-properties.js","webpack://solclientjs/external node-commonjs \"os\"","webpack://solclientjs/./node_modules/ws/lib/sender.js","webpack://solclientjs/./modules/solclient-session/lib/provision-event.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/consumer-fsm-event.js","webpack://solclientjs/./modules/solclient-util/api.js","webpack://solclientjs/./modules/solclient-message-publisher/lib/message-publisher-properties.js","webpack://solclientjs/./node_modules/ws/lib/websocket.js","webpack://solclientjs/./modules/solclient-log/lib/log-levels.js","webpack://solclientjs/./modules/solclient-core/api-internal.js","webpack://solclientjs/./modules/solclient-session/lib/session-fsm-event.js","webpack://solclientjs/./modules/solclient-smf/lib/message-objects/smf-parameter.js","webpack://solclientjs/./modules/solclient-message-publisher/lib/message-ids.js","webpack://solclientjs/./modules/solclient-transport/lib/web/web-transport.js","webpack://solclientjs/./modules/solclient-smf/lib/codec/decode.js","webpack://solclientjs/./modules/solclient-smf/lib/smf-smp-message-type-flags.js","webpack://solclientjs/./modules/solclient-smf/lib/codec/adprotocol.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/transport-acks.js","webpack://solclientjs/./modules/solclient-destination/lib/queue.js","webpack://solclientjs/./modules/solclient-transport/lib/tcp/shuntable-transport.js","webpack://solclientjs/./modules/solclient-fsm/lib/state-context.js","webpack://solclientjs/./modules/solclient-transport/lib/web/web-transport-session-base.js","webpack://solclientjs/./modules/solclient-transport/lib/web/state-websocket-binary.js","webpack://solclientjs/./modules/solclient-validate/lib/parameter.js","webpack://solclientjs/./modules/solclient-destination/lib/destination-from-network.js","webpack://solclientjs/./modules/solclient-smf/lib/smf-transport-session-message-types.js","webpack://solclientjs/./modules/solclient-session/lib/session-operations.js","webpack://solclientjs/external commonjs2 \"utf-8-validate\"","webpack://solclientjs/./modules/solclient-message-consumer/lib/consumer-fsm-event-names.js","webpack://solclientjs/./modules/solclient-log/lib/log-impl.js","webpack://solclientjs/./node_modules/ws/lib/websocket-server.js","webpack://solclientjs/./modules/solclient-stats/lib/stat-types.js","webpack://solclientjs/./modules/solclient-queue/lib/queue-access-types.js","webpack://solclientjs/./modules/solclient-smf/lib/codec/client-ctrl.js","webpack://solclientjs/./modules/solclient-message/lib/message.js","webpack://solclientjs/./modules/solclient-transport/lib/node-tls-opts-mixin.js","webpack://solclientjs/./modules/solclient-sdt/lib/codec/parse-map.js","webpack://solclientjs/./modules/solclient-eskit/lib/lazy.js","webpack://solclientjs/./modules/solclient-sdt/lib/sdt-unsupported-value-error.js","webpack://solclientjs/external node-commonjs \"stream\"","webpack://solclientjs/./modules/solclient-sdt/lib/codec/encode-header.js","webpack://solclientjs/external node-commonjs \"dns\"","webpack://solclientjs/./modules/solclient-message-tracing/api.js","webpack://solclientjs/./modules/solclient-session/lib/message-rx-cb-info.js","webpack://solclientjs/./modules/solclient-smf/lib/codec/transport.js","webpack://solclientjs/./modules/solclient-flow/lib/flow-operation.js","webpack://solclientjs/./modules/solclient-session/lib/capability-types.js","webpack://solclientjs/./modules/solclient-sdt/lib/codec/parse-single-element.js","webpack://solclientjs/./modules/solclient-eskit/lib/make-map.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/message-consumer-properties.js","webpack://solclientjs/./modules/solclient-message-publisher/lib/publisher-fsm.js","webpack://solclientjs/./modules/solclient-sdt/lib/codec/parse-stream.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/queue-browser.js","webpack://solclientjs/./node_modules/ws/lib/constants.js","webpack://solclientjs/./modules/solclient-stats/lib/stats.js","webpack://solclientjs/./modules/solclient-transport/lib/transport-error.js","webpack://solclientjs/./modules/solclient-solcache-session/api.js","webpack://solclientjs/./modules/solclient-log/api.js","webpack://solclientjs/./modules/solclient-transport/lib/web/http/http-transport-session.js","webpack://solclientjs/./modules/solclient-queue/lib/endpoint-name-complaint.js","webpack://solclientjs/./modules/solclient-validate/lib/base-checks.js","webpack://solclientjs/./modules/solclient-message/lib/message-types.js","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-context.js","webpack://solclientjs/./node_modules/ws/lib/permessage-deflate.js","webpack://solclientjs/./modules/solclient-smf/lib/message-objects/smp-message.js","webpack://solclientjs/./modules/solclient-events/lib/timer.js","webpack://solclientjs/external node-commonjs \"zlib\"","webpack://solclientjs/./modules/solclient-transport/lib/web/http/xhr-factory.js","webpack://solclientjs/./modules/solclient-sdt/lib/sdt-destination-types.js","webpack://solclientjs/./modules/solclient-transport/lib/smf-client.js","webpack://solclientjs/./modules/solclient-session/lib/session-states.js","webpack://solclientjs/./modules/solclient-smf/lib/message-objects/keep-alive-message.js","webpack://solclientjs/./modules/solclient-transport/lib/web/web-transport-events.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/message-consumer-event.js","webpack://solclientjs/./modules/solclient-sdt/lib/sdt-value-error-subcodes.js","webpack://solclientjs/./modules/solclient-transport/lib/transport-session-states.js","webpack://solclientjs/./node_modules/ws/lib/buffer-util.js","webpack://solclientjs/./modules/solclient-sdt/lib/codec/parse-float.js","webpack://solclientjs/./modules/solclient-events/api.js","webpack://solclientjs/./modules/solclient-session/lib/authentication-schemes.js","webpack://solclientjs/./modules/solclient-transport/lib/transport-session-event-codes.js","webpack://solclientjs/./modules/solclient-smf/api.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/consumer-state-names.js","webpack://solclientjs/./modules/solclient-smf/lib/smf-smp-message-types.js","webpack://solclientjs/./modules/solclient-fsm/lib/state-machine.js","webpack://solclientjs/./modules/solclient-transport/lib/tsh-state.js","webpack://solclientjs/./node_modules/ws/lib/stream.js","webpack://solclientjs/./modules/solclient-message/lib/message-dump-standard-provider.js","webpack://solclientjs/./modules/solclient-message-publisher/lib/message-publisher-event-names.js","webpack://solclientjs/./modules/solclient-message-publisher/lib/publisher-fsm-event-names.js","webpack://solclientjs/./modules/solclient-transport/lib/tcp/transport-tcp-tls.js","webpack://solclientjs/./modules/solclient-sdt/lib/codec/encode-single-element.js","webpack://solclientjs/./modules/solclient-message/lib/message-dump-flags.js","webpack://solclientjs/./modules/solclient-error/lib/solace-error.js","webpack://solclientjs/./modules/solclient-replaystart/lib/replayStartLocation.js","webpack://solclientjs/./modules/solclient-util/lib/clone.js","webpack://solclientjs/./modules/solclient-transport/lib/web/state-binary.js","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-live-data-actions.js","webpack://solclientjs/./modules/solclient-util/lib/timing-bucket.js","webpack://solclientjs/./modules/solclient-session/lib/subscription-update-timeout-messages.js","webpack://solclientjs/./modules/solclient-factory/api.js","webpack://solclientjs/./modules/solclient-eskit/lib/resolver.js","webpack://solclientjs/external node-commonjs \"events\"","webpack://solclientjs/./modules/solclient-sdt/lib/codec/ieee754lib.js","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-get-result.js","webpack://solclientjs/./modules/solclient-smf/lib/message-objects/transport-smf-message.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/queue-browser-properties.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/message-consumer-acknowledge-modes.js","webpack://solclientjs/./modules/solclient-transport/lib/transport-factory.js","webpack://solclientjs/./modules/solclient-smf/lib/codec/encode.js","webpack://solclientjs/external node-commonjs \"tls\"","webpack://solclientjs/./node_modules/ws/lib/limiter.js","webpack://solclientjs/./modules/solclient-factory/lib/profile-binding.js","webpack://solclientjs/./modules/solclient-session/lib/host-list-dns-filter.js","webpack://solclientjs/./modules/solclient-smf/lib/codec/content-summary-element.js","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-request-types.js","webpack://solclientjs/./node_modules/long/umd/index.js","webpack://solclientjs/./modules/solclient-session/api.js","webpack://solclientjs/./modules/solclient-fsm/lib/exit-point.js","webpack://solclientjs/./modules/solclient-util/lib/api-properties-validators.js","webpack://solclientjs/./modules/solclient-smf/lib/smf-protocols.js","webpack://solclientjs/./modules/solclient-smf/lib/smf-adprotocol-params.js","webpack://solclientjs/./modules/solclient-transport/lib/web/state-base64.js","webpack://solclientjs/./modules/solclient-error/lib/error-subcodes.js","webpack://solclientjs/./modules/solclient-destination/lib/destination.js","webpack://solclientjs/./modules/solclient-transport/lib/web/websocket-close-codes.js","webpack://solclientjs/./modules/solclient-error/lib/operation-error.js","webpack://solclientjs/./modules/solclient-transport/lib/transport-protocol-handler.js","webpack://solclientjs/./index.js","webpack://solclientjs/./modules/solclient-session/lib/session-event-cb-info.js","webpack://solclientjs/./modules/solclient-message-publisher/lib/publisher-state-names.js","webpack://solclientjs/./modules/solclient-error/lib/error-response-subcode-mapper.js","webpack://solclientjs/./modules/solclient-replaystart/lib/replayStartLocationDate.js","webpack://solclientjs/./modules/solclient-eskit/lib/bidi-map.js","webpack://solclientjs/./modules/solclient-destination/lib/subscription-info.js","webpack://solclientjs/./modules/solclient-factory/lib/solclient-factory.js","webpack://solclientjs/./modules/solclient-sdt/lib/codec/parse-destination.js","webpack://solclientjs/external node-commonjs \"https\"","webpack://solclientjs/./modules/solclient-sdt/lib/sdt-stream-container.js","webpack://solclientjs/./modules/solclient-stats/api.js","webpack://solclientjs/./modules/solclient-error/lib/not-implemented-error.js","webpack://solclientjs/./modules/solclient-eskit/lib/assert.js","webpack://solclientjs/./modules/solclient-message-tracing/lib/message-trace-context.js","webpack://solclientjs/./node_modules/ws/lib/validation.js","webpack://solclientjs/./modules/solclient-message-publisher/api.js","webpack://solclientjs/./modules/solclient-fsm/lib/entry-point.js","webpack://solclientjs/./node_modules/ws/lib/extension.js","webpack://solclientjs/./modules/solclient-transport/lib/buffer-smf-client.js","webpack://solclientjs/./modules/solclient-message-publisher/lib/message-publisher-acknowledge-modes.js","webpack://solclientjs/./modules/solclient-events/lib/event-emitter.js","webpack://solclientjs/./modules/solclient-fsm/lib/object.js","webpack://solclientjs/./modules/solclient-queue/lib/queue-descriptor-validator.js","webpack://solclientjs/./modules/solclient-session/lib/session-state-names.js","webpack://solclientjs/./modules/solclient-transport/lib/web/web-transport-fsm.js","webpack://solclientjs/./modules/solclient-queue/lib/queue-types.js","webpack://solclientjs/./modules/solclient-message/api.js","webpack://solclientjs/./modules/solclient-eskit/lib/array-operations.js","webpack://solclientjs/./node_modules/ws/lib/receiver.js","webpack://solclientjs/./modules/solclient-util/lib/url.js","webpack://solclientjs/./modules/solclient-session/lib/session-event-names.js","webpack://solclientjs/./modules/solclient-session/lib/session-event-codes.js","webpack://solclientjs/./modules/solclient-transport/lib/web/http/http-connection.js","webpack://solclientjs/./modules/solclient-sdt/lib/codec/api.js","webpack://solclientjs/./modules/solclient-transport/lib/tcp/transport-tcp-plaintext.js","webpack://solclientjs/./modules/solclient-session/lib/ssl-downgrades.js","webpack://solclientjs/./modules/solclient-session/lib/default-capabilities.js","webpack://solclientjs/./modules/solclient-message/lib/replication-group-message-id.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/message-consumer.js","webpack://solclientjs/external commonjs2 \"bufferutil\"","webpack://solclientjs/./modules/solclient-env/api.js","webpack://solclientjs/./modules/solclient-smf/lib/message-objects/client-ctrl-message.js","webpack://solclientjs/./modules/solclient-message/lib/message-user-cos-types.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/message-consumer-properties-validator.js","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-session.js","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-cb-info.js","webpack://solclientjs/./modules/solclient-transport/lib/tcp/transport-compression.js","webpack://solclientjs/./modules/solclient-error/api.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/message-dispatcher.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/message-consumer-event-names.js","webpack://solclientjs/external node-commonjs \"crypto\"","webpack://solclientjs/./modules/solclient-message-tracing/lib/message-tracing-support.js","webpack://solclientjs/external node-commonjs \"url\"","webpack://solclientjs/./modules/solclient-session/lib/outstanding-data-request.js","webpack://solclientjs/./modules/solclient-session/lib/mutable-session-properties.js","webpack://solclientjs/./modules/solclient-smf/lib/smf-adprotocol-message-types.js","webpack://solclientjs/./modules/solclient-transport/lib/tcp/transport-tls.js","webpack://solclientjs/./modules/solclient-message-tracing/lib/message-trace-context-setter.js","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-session-properties.js","webpack://solclientjs/./modules/solclient-fsm/lib/state.js","webpack://solclientjs/./modules/solclient-message/lib/message-cache-status.js","webpack://solclientjs/./modules/solclient-transport/lib/transport-session-event.js","webpack://solclientjs/./modules/solclient-sdt/lib/sdt-field.js","webpack://solclientjs/./modules/solclient-session/lib/host-list.js","webpack://solclientjs/./modules/solclient-fsm/api.js","webpack://solclientjs/./modules/solclient-validate/lib/check.js","webpack://solclientjs/./modules/solclient-transport/lib/web/http/send-xhr.js","webpack://solclientjs/./modules/solclient-eskit/api.js","webpack://solclientjs/./modules/solclient-sdt/lib/sdt-map-container.js","webpack://solclientjs/./modules/solclient-sdt/lib/codec/encode-integer.js","webpack://solclientjs/./modules/solclient-session/lib/p2p-util.js","webpack://solclientjs/./modules/solclient-smf/lib/codec/api.js","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-return-subcodes.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/application-acks.js","webpack://solclientjs/./node_modules/ws/index.js","webpack://solclientjs/./modules/solclient-smf/lib/smf-parameter-types.js","webpack://solclientjs/./modules/solclient-convert/lib/long.js","webpack://solclientjs/./modules/solclient-fsm/lib/event.js","webpack://solclientjs/./modules/solclient-core/api.js","webpack://solclientjs/./modules/solclient-sdt/lib/sdt-field-types.js","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-get-result-codes.js","webpack://solclientjs/./modules/solclient-eskit/lib/set-operations.js","webpack://solclientjs/./modules/solclient-transport/lib/tcp/api.js","webpack://solclientjs/./modules/solclient-convert/lib/convert.js","webpack://solclientjs/./modules/solclient-smf/lib/codec/parse-smf.js","webpack://solclientjs/./modules/solclient-session/lib/correlated-request.js","webpack://solclientjs/external node-commonjs \"worker_threads\"","webpack://solclientjs/./modules/solclient-transport/lib/transport-client-stats.js","webpack://solclientjs/./modules/solclient-transport/api.js","webpack://solclientjs/./modules/solclient-session/lib/session-event.js","webpack://solclientjs/./node_modules/ws/lib/subprotocol.js","webpack://solclientjs/./modules/solclient-smf/lib/message-objects/api.js","webpack://solclientjs/./modules/solclient-smf/lib/codec/content-summary-types.js","webpack://solclientjs/./modules/solclient-queue/lib/abstract-queue-descriptor.js","webpack://solclientjs/./modules/solclient-error/lib/request-event-codes.js","webpack://solclientjs/./modules/solclient-destination/lib/topic.js","webpack://solclientjs/./modules/solclient-debug/lib/debug.js","webpack://solclientjs/./modules/solclient-stats/lib/stat-bymode.js","webpack://solclientjs/./modules/solclient-smf/lib/message-objects/smf-uh.js","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-session-subscribe-info.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/queue-browser-event-names.js","webpack://solclientjs/./modules/solclient-sdt/lib/sdt-data-types.js","webpack://solclientjs/external node-commonjs \"http\"","webpack://solclientjs/./modules/solclient-smf/lib/message-objects/base-message.js","webpack://solclientjs/./modules/solclient-flow/lib/flow.js","webpack://solclientjs/./modules/solclient-destination/lib/destination-type.js","webpack://solclientjs/./modules/solclient-util/lib/array-utils.js","webpack://solclientjs/./modules/solclient-solcache-session/lib/cache-request.js","webpack://solclientjs/./modules/solclient-flow/api.js","webpack://solclientjs/./modules/solclient-message/lib/message-dump-util.js","webpack://solclientjs/./modules/solclient-sdt/lib/codec/parse-field-header.js","webpack://solclientjs/./modules/solclient-error/lib/request-error.js","webpack://solclientjs/./modules/solclient-convert/lib/hex.js","webpack://solclientjs/./modules/solclient-message-consumer/lib/consumer-flows.js","webpack://solclientjs/./modules/solclient-eskit/lib/enum.js","webpack://solclientjs/./modules/solclient-queue/lib/queue-descriptor.js","webpack://solclientjs/./modules/solclient-transport/lib/web/http/api.js","webpack://solclientjs/external node-commonjs \"util\"","webpack://solclientjs/./modules/solclient-message-consumer/lib/consumer-fsm.js","webpack://solclientjs/./modules/solclient-transport/lib/transport-protocols.js","webpack://solclientjs/./modules/solclient-transport/lib/buffer-queue.js","webpack://solclientjs/external node-commonjs \"constants\"","webpack://solclientjs/./modules/solclient-sdt/lib/codec/parse-integer.js","webpack://solclientjs/external node-commonjs \"net\"","webpack://solclientjs/./modules/solclient-queue/lib/queue-properties.js","webpack://solclientjs/./modules/solclient-replaystart/api.js","webpack://solclientjs/./modules/solclient-util/lib/version.js","webpack://solclientjs/./modules/solclient-queue/lib/queue-discard-behaviors.js","webpack://solclientjs/./modules/solclient-message-tracing/lib/baggage.js","webpack://solclientjs/./modules/solclient-queue/lib/queue-permissions.js","webpack://solclientjs/./modules/solclient-util/lib/api-properties.js","webpack://solclientjs/./modules/solclient-sdt/lib/codec/encode-stream.js","webpack://solclientjs/./modules/solclient-transport/lib/web/api.js","webpack://solclientjs/./modules/solclient-log/lib/console-log-impl.js","webpack://solclientjs/./modules/solclient-session/lib/session.js","webpack://solclientjs/./modules/solclient-transport/lib/web/state-streaming-and-binary.js","webpack://solclientjs/./modules/solclient-destination/api.js","webpack://solclientjs/./modules/solclient-queue/api.js","webpack://solclientjs/./modules/solclient-smf/lib/smf-client-ctrl-message-types.js","webpack://solclientjs/./modules/solclient-session/lib/session-properties.js","webpack://solclientjs/./modules/solclient-smf/lib/smf-client-ctrl-params.js","webpack://solclientjs/./modules/solclient-convert/lib/base64.js","webpack://solclientjs/./modules/solclient-util/lib/string-buffer.js","webpack://solclientjs/./modules/solclient-session/lib/session-properties-validator.js","webpack://solclientjs/./modules/solclient-message-publisher/lib/publisher-fsm-event.js","webpack://solclientjs/./modules/solclient-smf/lib/message-objects/smf-header.js","webpack://solclientjs/./modules/solclient-flow/lib/private-flow-event-names.js","webpack://solclientjs/./modules/solclient-convert/api.js","webpack://solclientjs/./modules/solclient-smf/lib/message-objects/adprotocol-message.js","webpack://solclientjs/./modules/solclient-convert/lib/bits.js","webpack://solclientjs/external node-commonjs \"fs\"","webpack://solclientjs/./modules/solclient-transport/lib/transport-return-codes.js","webpack://solclientjs/./modules/solclient-smf/lib/codec/smp.js","webpack://solclientjs/./modules/solclient-transport/lib/transport-capabilities.js","webpack://solclientjs/./modules/solclient-transport/lib/web/websocket-transport-session.js","webpack://solclientjs/webpack/bootstrap","webpack://solclientjs/webpack/startup"],"sourcesContent":["\"use strict\";\n// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\n// Mediocre shim\nvar Worker;\nvar workerAdd = \";var __w=require('worker_threads');__w.parentPort.on('message',function(m){onmessage({data:m})}),postMessage=function(m,t){__w.parentPort.postMessage(m,t)},close=process.exit;self=global\";\ntry {\n    Worker = require('worker_threads').Worker;\n}\ncatch (e) {\n}\nvar node_worker_1 = {};\nnode_worker_1[\"default\"] = Worker ? function (c, _, msg, transfer, cb) {\n    var done = false;\n    var w = new Worker(c + workerAdd, { eval: true })\n        .on('error', function (e) { return cb(e, null); })\n        .on('message', function (m) { return cb(null, m); })\n        .on('exit', function (c) {\n        if (c && !done)\n            cb(new Error('exited with code ' + c), null);\n    });\n    w.postMessage(msg, transfer);\n    w.terminate = function () {\n        done = true;\n        return Worker.prototype.terminate.call(w);\n    };\n    return w;\n} : function (_, __, ___, ____, cb) {\n    setImmediate(function () { return cb(new Error('async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)'), null); });\n    var NOP = function () { };\n    return {\n        terminate: NOP,\n        postMessage: NOP\n    };\n};\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, i32 = Int32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new i32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return { b: b, r: r };\n};\nvar _a = freb(fleb, 2), fl = _a.b, revfl = _a.r;\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b.b, revfd = _b.r;\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >> 8) | ((x & 0x00FF) << 8)) >> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i) {\n        if (cd[i])\n            ++l[cd[i] - 1];\n    }\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 1; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p + 7) / 8) | 0; };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    return new u8(v.subarray(s, e));\n};\n/**\n * Codes for errors generated within this library\n */\nexports.FlateErrorCode = {\n    UnexpectedEOF: 0,\n    InvalidBlockType: 1,\n    InvalidLengthLiteral: 2,\n    InvalidDistance: 3,\n    StreamFinished: 4,\n    NoStreamHandler: 5,\n    InvalidHeader: 6,\n    NoCallback: 7,\n    InvalidUTF8: 8,\n    ExtraFieldTooLong: 9,\n    InvalidDate: 10,\n    FilenameTooLong: 11,\n    StreamFinishing: 12,\n    InvalidZipData: 13,\n    UnknownCompressionMethod: 14\n};\n// error codes\nvar ec = [\n    'unexpected EOF',\n    'invalid block type',\n    'invalid length/literal',\n    'invalid distance',\n    'stream finished',\n    'no stream handler',\n    ,\n    'no callback',\n    'invalid UTF-8 data',\n    'extra field too long',\n    'date not in range 1980-2099',\n    'filename too long',\n    'stream finishing',\n    'invalid zip data'\n    // determined by unknown compression method\n];\n;\nvar err = function (ind, msg, nt) {\n    var e = new Error(msg || ec[ind]);\n    e.code = ind;\n    if (Error.captureStackTrace)\n        Error.captureStackTrace(e, err);\n    if (!nt)\n        throw e;\n    return e;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, st, buf, dict) {\n    // source length       dict length\n    var sl = dat.length, dl = dict ? dict.length : 0;\n    if (!sl || st.f && !st.l)\n        return buf || new u8(0);\n    var noBuf = !buf;\n    // have to estimate size\n    var resize = noBuf || st.i != 2;\n    // no state\n    var noSt = st.i;\n    // Assumes roughly 33% compression ratio average\n    if (noBuf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                // ensure size\n                if (resize)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8, st.f = final;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                err(1);\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17\n        if (resize)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n            if (!c)\n                err(2);\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;\n                if (!d)\n                    err(3);\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                if (resize)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                if (bt < dt) {\n                    var shift = dl - dt, dend = Math.min(dt, end);\n                    if (shift + bt < 0)\n                        err(3);\n                    for (; bt < dend; ++bt)\n                        buf[bt] = dict[shift + bt];\n                }\n                for (; bt < end; ++bt)\n                    buf[bt] = buf[bt - dt];\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    // don't reallocate for streams or user buffers\n    return bt != buf.length && noBuf ? slc(buf, 0, bt) : buf.subarray(0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n    d[o + 2] |= v >> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return { t: et, l: 0 };\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return { t: v, l: 1 };\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return { t: new u8(tr), l: mbt };\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return { c: cl.subarray(0, cli), n: s };\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a.t, mlb = _a.l;\n    var _b = hTree(df, 15), ddt = _b.t, mdb = _b.l;\n    var _c = lc(dlt), lclt = _c.c, nlc = _c.n;\n    var _d = lc(ddt), lcdt = _d.c, ndc = _d.n;\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        ++lcfreq[lclt[i] & 31];\n    for (var i = 0; i < lcdt.length; ++i)\n        ++lcfreq[lcdt[i] & 31];\n    var _e = hTree(lcfreq, 7), lct = _e.t, mlcb = _e.l;\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + 2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18];\n    if (bs >= 0 && flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >> 5) & 127), p += clct[i] >> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        var sym = syms[i];\n        if (sym > 255) {\n            var len = (sym >> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (sym >> 23) & 31), p += fleb[len];\n            var dst = sym & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (sym >> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[sym]), p += ll[sym];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new i32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, st) {\n    var s = st.z || dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var lst = st.l;\n    var pos = (st.r || 0) & 7;\n    if (lvl) {\n        if (pos)\n            w[0] = st.r >> 3;\n        var opt = deo[lvl - 1];\n        var n = opt >> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = st.p || new u16(32768), head = st.h || new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new i32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index          l/lind  waitdx          blkpos\n        var lc_1 = 0, eb = 0, i = st.i || 0, li = 0, wi = st.w || 0, bs = 0;\n        for (; i + 2 < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && (rem > 423 || !lst)) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = imod - pimod & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = i - dif + j & 32767;\n                                    var pti = prev[ti];\n                                    var cd = ti - pti & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += imod - pimod & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one int32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        for (i = Math.max(i, wi); i < s; ++i) {\n            syms[li++] = dat[i];\n            ++lf[dat[i]];\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        if (!lst) {\n            st.r = (pos & 7) | w[(pos / 8) | 0] << 3;\n            // shft(pos) now 1 less if pos & 7 != 0\n            pos -= 7;\n            st.h = head, st.p = prev, st.i = i, st.w = wi;\n        }\n    }\n    else {\n        for (var i = st.w || 0; i < s + lst; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e >= s) {\n                // write final block\n                w[(pos / 8) | 0] = lst;\n                e = s;\n            }\n            pos = wfblk(w, pos + 1, dat.subarray(i, e));\n        }\n        st.i = s;\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new Int32Array(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Adler32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length | 0;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a & 0xFF00) << 8 | (b & 255) << 8 | (b >> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    if (!st) {\n        st = { l: 1 };\n        if (opt.dictionary) {\n            var dict = opt.dictionary.subarray(-32768);\n            var newDat = new u8(dict.length + dat.length);\n            newDat.set(dict);\n            newDat.set(dat, dict.length);\n            dat = newDat;\n            st.w = dict.length;\n        }\n    }\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/\\s+/g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return fnStr;\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k].buffer) {\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n        }\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            fnStr = wcln(fns[i], fnStr, td_1);\n        ch[id] = { c: wcln(fns[m], fnStr, td_1), e: td_1 };\n    }\n    var td = mrg({}, ch[id].e);\n    return (0, node_worker_1.default)(ch[id].c + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, i32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, ec, hMap, max, bits, bits16, shft, slc, err, inflt, inflateSync, pbf, gopt]; };\nvar bDflt = function () { return [u8, u16, i32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zls]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get opts\nvar gopt = function (o) { return o && {\n    out: o.size && new u8(o.size),\n    dictionary: o.dictionary\n}; };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) { return strm.push(ev.data[0], ev.data[1]); };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id, ext) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else if (!Array.isArray(dat))\n            ext(dat);\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.push = function (d, f) {\n        if (!strm.ondata)\n            err(5);\n        if (t)\n            strm.ondata(err(4, 0, 1), null, !!f);\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        err(6, 'invalid gzip data');\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += (d[10] | d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + (o.filename ? o.filename.length + 1 : 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (o.dictionary && 32);\n    c[1] |= 31 - ((c[0] << 8) | c[1]) % 31;\n    if (o.dictionary) {\n        var h = adler();\n        h.p(o.dictionary);\n        wbytes(c, 2, h.d());\n    }\n};\n// zlib start\nvar zls = function (d, dict) {\n    if ((d[0] & 15) != 8 || (d[0] >> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        err(6, 'invalid zlib data');\n    if ((d[1] >> 5 & 1) == +!dict)\n        err(6, 'invalid zlib data: ' + (d[1] & 32 ? 'need' : 'unexpected') + ' dictionary');\n    return (d[1] >> 3 & 4) + 2;\n};\nfunction StrmOpt(opts, cb) {\n    if (typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n        this.s = { l: 0, i: 32768, w: 32768, z: 32768 };\n        // Buffer length must always be 0 mod 32768 for index calculations to be correct when modifying head and prev\n        // 98304 = 32768 (lookback) + 65536 (common chunk size)\n        this.b = new u8(98304);\n        if (this.o.dictionary) {\n            var dict = this.o.dictionary.subarray(-32768);\n            this.b.set(dict, 32768 - dict.length);\n            this.s.i = 32768 - dict.length;\n        }\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, this.s), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        var endLen = chunk.length + this.s.z;\n        if (endLen > this.b.length) {\n            if (endLen > 2 * this.b.length - 32768) {\n                var newBuf = new u8(endLen & -32768);\n                newBuf.set(this.b.subarray(0, this.s.z));\n                this.b = newBuf;\n            }\n            var split = this.b.length - this.s.z;\n            if (split) {\n                this.b.set(chunk.subarray(0, split), this.s.z);\n                this.s.z = this.b.length;\n                this.p(this.b, false);\n            }\n            this.b.set(this.b.subarray(-32768));\n            this.b.set(chunk.subarray(split), 32768);\n            this.s.z = chunk.length - split + 32768;\n            this.s.i = 32766, this.s.w = 32768;\n        }\n        else {\n            this.b.set(chunk, this.s.z);\n            this.s.z += chunk.length;\n        }\n        this.s.l = final & 1;\n        if (this.s.z > this.s.w + 8191 || final) {\n            this.p(this.b, final || false);\n            this.s.w = this.s.i, this.s.i -= 2;\n        }\n    };\n    return Deflate;\n}());\nexports.Deflate = Deflate;\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6);\n    }\n    return AsyncDeflate;\n}());\nexports.AsyncDeflate = AsyncDeflate;\nfunction deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\nexports.deflate = deflate;\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nfunction deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\nexports.deflateSync = deflateSync;\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    function Inflate(opts, cb) {\n        // no StrmOpt here to avoid adding to workerizer\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        var dict = opts && opts.dictionary && opts.dictionary.subarray(-32768);\n        this.s = { i: 0, b: dict ? dict.length : 0 };\n        this.o = new u8(32768);\n        this.p = new u8(0);\n        if (dict)\n            this.o.set(dict);\n    }\n    Inflate.prototype.e = function (c) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        if (!this.p.length)\n            this.p = c;\n        else if (c.length) {\n            var n = new u8(this.p.length + c.length);\n            n.set(this.p), n.set(c, this.p.length), this.p = n;\n        }\n    };\n    Inflate.prototype.c = function (final) {\n        this.s.i = +(this.d = final || false);\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.s, this.o);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexports.Inflate = Inflate;\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    function AsyncInflate(opts, cb) {\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Inflate(ev.data);\n            onmessage = astrm(strm);\n        }, 7);\n    }\n    return AsyncInflate;\n}());\nexports.AsyncInflate = AsyncInflate;\nfunction inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gopt(ev.data[1]))); }, 1, cb);\n}\nexports.inflate = inflate;\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nfunction inflateSync(data, opts) {\n    return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\nexports.inflateSync = inflateSync;\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        this.l += chunk.length;\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, this.s);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    return Gzip;\n}());\nexports.Gzip = Gzip;\nexports.Compress = Gzip;\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8);\n    }\n    return AsyncGzip;\n}());\nexports.AsyncGzip = AsyncGzip;\nexports.AsyncCompress = AsyncGzip;\nfunction gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\nexports.gzip = gzip;\nexports.compress = gzip;\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nfunction gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\nexports.gzipSync = gzipSync;\nexports.compressSync = gzipSync;\n/**\n * Streaming single or multi-member GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    function Gunzip(opts, cb) {\n        this.v = 1;\n        this.r = 0;\n        Inflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        this.r += chunk.length;\n        if (this.v) {\n            var p = this.p.subarray(this.v - 1);\n            var s = p.length > 3 ? gzs(p) : 4;\n            if (s > p.length) {\n                if (!final)\n                    return;\n            }\n            else if (this.v > 1 && this.onmember) {\n                this.onmember(this.r - p.length);\n            }\n            this.p = p.subarray(s), this.v = 0;\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n        // process concatenated GZIP\n        if (this.s.f && !this.s.l) {\n            this.v = shft(this.s.p) + 9;\n            this.s = { i: 0 };\n            this.o = new u8(0);\n            if (this.p.length)\n                this.push(new u8(0), final);\n        }\n    };\n    return Gunzip;\n}());\nexports.Gunzip = Gunzip;\n/**\n * Asynchronous streaming single or multi-member GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    function AsyncGunzip(opts, cb) {\n        var _this_1 = this;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gunzip(ev.data);\n            strm.onmember = function (offset) { return postMessage(offset); };\n            onmessage = astrm(strm);\n        }, 9, function (offset) { return _this_1.onmember && _this_1.onmember(offset); });\n    }\n    return AsyncGunzip;\n}());\nexports.AsyncGunzip = AsyncGunzip;\nfunction gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0], ev.data[1])); }, 3, cb);\n}\nexports.gunzip = gunzip;\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nfunction gunzipSync(data, opts) {\n    var st = gzs(data);\n    if (st + 8 > data.length)\n        err(6, 'invalid gzip data');\n    return inflt(data.subarray(st, -8), { i: 2 }, opts && opts.out || new u8(gzl(data)), opts && opts.dictionary);\n}\nexports.gunzipSync = gunzipSync;\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && (this.o.dictionary ? 6 : 2), f && 4, this.s);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    return Zlib;\n}());\nexports.Zlib = Zlib;\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10);\n    }\n    return AsyncZlib;\n}());\nexports.AsyncZlib = AsyncZlib;\nfunction zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\nexports.zlib = zlib;\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nfunction zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, opts.dictionary ? 6 : 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\nexports.zlibSync = zlibSync;\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    function Unzlib(opts, cb) {\n        Inflate.call(this, opts, cb);\n        this.v = opts && opts.dictionary ? 2 : 1;\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 6 && !final)\n                return;\n            this.p = this.p.subarray(zls(this.p, this.v - 1)), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                err(6, 'invalid zlib data');\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexports.Unzlib = Unzlib;\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    function AsyncUnzlib(opts, cb) {\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Unzlib(ev.data);\n            onmessage = astrm(strm);\n        }, 11);\n    }\n    return AsyncUnzlib;\n}());\nexports.AsyncUnzlib = AsyncUnzlib;\nfunction unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gopt(ev.data[1]))); }, 5, cb);\n}\nexports.unzlib = unzlib;\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nfunction unzlibSync(data, opts) {\n    return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\nexports.unzlibSync = unzlibSync;\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    function Decompress(opts, cb) {\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n        this.o = StrmOpt.call(this, opts, cb) || {};\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                var _this_2 = this;\n                // enables reuse of this method by AsyncDecompress\n                var cb = function () { _this_2.ondata.apply(_this_2, arguments); };\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(this.o, cb)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(this.o, cb)\n                        : new this.Z(this.o, cb);\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexports.Decompress = Decompress;\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    function AsyncDecompress(opts, cb) {\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n        Decompress.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexports.AsyncDecompress = AsyncDecompress;\nfunction decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\nexports.decompress = decompress;\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nfunction decompressSync(data, opts) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, opts)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, opts)\n            : unzlibSync(data, opts);\n}\nexports.decompressSync = decompressSync;\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k, op = o;\n        if (Array.isArray(val))\n            op = mrg(o, val[1]), val = val[0];\n        if (val instanceof u8)\n            t[n] = [val, op];\n        else {\n            t[n += '/'] = [new u8(0), op];\n            fltn(val, n, t, o);\n        }\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return { s: r, r: slc(d, i - 1) };\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    err(8);\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            err(4);\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (final) {\n            if (r.length)\n                err(8);\n            this.p = null;\n        }\n        else\n            this.p = r;\n        this.ondata(s, final);\n    };\n    return DecodeUTF8;\n}());\nexports.DecodeUTF8 = DecodeUTF8;\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexports.EncodeUTF8 = EncodeUTF8;\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nfunction strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\nexports.strToU8 = strToU8;\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nfunction strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td) {\n        return td.decode(dat);\n    }\n    else {\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (r.length)\n            err(8);\n        return s;\n    }\n}\nexports.strFromU8 = strFromU8;\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                err(9);\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c < 0 && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        err(10);\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >> 1)), b += 4;\n    if (c != -1) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c < 0 ? -c - 2 : c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexports.ZipPassThrough = ZipPassThrough;\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this_1 = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this_1.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexports.ZipDeflate = ZipDeflate;\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this_1 = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this_1.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexports.AsyncZipDeflate = AsyncZipDeflate;\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this_1 = this;\n        if (!this.ondata)\n            err(5);\n        // finishing or finished\n        if (this.d & 2)\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, false);\n        else {\n            var f = strToU8(file.filename), fl_1 = f.length;\n            var com = file.comment, o = com && strToU8(com);\n            var u = fl_1 != file.filename.length || (o && (com.length != o.length));\n            var hl_1 = fl_1 + exfl(file.extra) + 30;\n            if (fl_1 > 65535)\n                this.ondata(err(11, 0, 1), null, false);\n            var header = new u8(hl_1);\n            wzh(header, 0, file, f, u, -1);\n            var chks_1 = [header];\n            var pAll_1 = function () {\n                for (var _i = 0, chks_2 = chks_1; _i < chks_2.length; _i++) {\n                    var chk = chks_2[_i];\n                    _this_1.ondata(null, chk, false);\n                }\n                chks_1 = [];\n            };\n            var tr_1 = this.d;\n            this.d = 0;\n            var ind_1 = this.u.length;\n            var uf_1 = mrg(file, {\n                f: f,\n                u: u,\n                o: o,\n                t: function () {\n                    if (file.terminate)\n                        file.terminate();\n                },\n                r: function () {\n                    pAll_1();\n                    if (tr_1) {\n                        var nxt = _this_1.u[ind_1 + 1];\n                        if (nxt)\n                            nxt.r();\n                        else\n                            _this_1.d = 1;\n                    }\n                    tr_1 = 1;\n                }\n            });\n            var cl_1 = 0;\n            file.ondata = function (err, dat, final) {\n                if (err) {\n                    _this_1.ondata(err, dat, final);\n                    _this_1.terminate();\n                }\n                else {\n                    cl_1 += dat.length;\n                    chks_1.push(dat);\n                    if (final) {\n                        var dd = new u8(16);\n                        wbytes(dd, 0, 0x8074B50);\n                        wbytes(dd, 4, file.crc);\n                        wbytes(dd, 8, cl_1);\n                        wbytes(dd, 12, file.size);\n                        chks_1.push(dd);\n                        uf_1.c = cl_1, uf_1.b = hl_1 + cl_1 + 16, uf_1.crc = file.crc, uf_1.size = file.size;\n                        if (tr_1)\n                            uf_1.r();\n                        tr_1 = 1;\n                    }\n                    else if (tr_1)\n                        pAll_1();\n                }\n            };\n            this.u.push(uf_1);\n        }\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this_1 = this;\n        if (this.d & 2) {\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, true);\n            return;\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this_1.d & 1))\n                        return;\n                    _this_1.u.splice(-1, 1);\n                    _this_1.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, -f.c - 2, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexports.Zip = Zip;\nfunction zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cbd(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cbd(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cbd(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl(err(11, 0, 1), null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\nexports.zip = zip;\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nfunction zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            err(11);\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\nexports.zipSync = zipSync;\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexports.UnzipPassThrough = UnzipPassThrough;\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this_1 = this;\n        this.i = new Inflate(function (dat, final) {\n            _this_1.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexports.UnzipInflate = UnzipInflate;\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this_1 = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this_1.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this_1.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexports.AsyncUnzipInflate = AsyncUnzipInflate;\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this_1 = this;\n        if (!this.onfile)\n            err(5);\n        if (!this.p)\n            err(4);\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_3 = [];\n                        this_1.k.unshift(chks_3);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    err(5);\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this_1.o[cmp_1];\n                                    if (!ctr)\n                                        file_1.ondata(err(14, 'unknown compression type ' + cmp_1, 1), null, false);\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_4 = chks_3; _i < chks_4.length; _i++) {\n                                        var dat = chks_4[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this_1.k[0] == chks_3 && _this_1.c)\n                                        _this_1.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                err(13);\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexports.Unzip = Unzip;\nvar mt = typeof queueMicrotask == 'function' ? queueMicrotask : typeof setTimeout == 'function' ? setTimeout : function (fn) { fn(); };\nfunction unzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cbd(err(13, 0, 1), null);\n            return tAll;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (lft) {\n        var c = lft;\n        var o = b4(data, e + 16);\n        var z = o == 4294967295 || c == 65535;\n        if (z) {\n            var ze = b4(data, e - 12);\n            z = b4(data, ze) == 0x6064B50;\n            if (z) {\n                c = lft = b4(data, ze + 32);\n                o = b4(data, ze + 48);\n            }\n        }\n        var fltr = opts && opts.filter;\n        var _loop_3 = function (i) {\n            var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n            o = no;\n            var cbl = function (e, d) {\n                if (e) {\n                    tAll();\n                    cbd(e, null);\n                }\n                else {\n                    if (d)\n                        files[fn] = d;\n                    if (!--lft)\n                        cbd(null, files);\n                }\n            };\n            if (!fltr || fltr({\n                name: fn,\n                size: sc,\n                originalSize: su,\n                compression: c_1\n            })) {\n                if (!c_1)\n                    cbl(null, slc(data, b, b + sc));\n                else if (c_1 == 8) {\n                    var infl = data.subarray(b, b + sc);\n                    if (sc < 320000) {\n                        try {\n                            cbl(null, inflateSync(infl, { out: new u8(su) }));\n                        }\n                        catch (e) {\n                            cbl(e, null);\n                        }\n                    }\n                    else\n                        term.push(inflate(infl, { size: su }, cbl));\n                }\n                else\n                    cbl(err(14, 'unknown compression type ' + c_1, 1), null);\n            }\n            else\n                cbl(null, null);\n        };\n        for (var i = 0; i < c; ++i) {\n            _loop_3(i);\n        }\n    }\n    else\n        cbd(null, {});\n    return tAll;\n}\nexports.unzip = unzip;\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @param opts The ZIP extraction options\n * @returns The decompressed files\n */\nfunction unzipSync(data, opts) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            err(13);\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295 || c == 65535;\n    if (z) {\n        var ze = b4(data, e - 12);\n        z = b4(data, ze) == 0x6064B50;\n        if (z) {\n            c = b4(data, ze + 32);\n            o = b4(data, ze + 48);\n        }\n    }\n    var fltr = opts && opts.filter;\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!fltr || fltr({\n            name: fn,\n            size: sc,\n            originalSize: su,\n            compression: c_2\n        })) {\n            if (!c_2)\n                files[fn] = slc(data, b, b + sc);\n            else if (c_2 == 8)\n                files[fn] = inflateSync(data.subarray(b, b + sc), { out: new u8(su) });\n            else\n                err(14, 'unknown compression type ' + c_2);\n        }\n    }\n    return files;\n}\nexports.unzipSync = unzipSync;\n","const ConsumerLib = require('solclient-message-consumer');\nconst PublisherLib = require('solclient-message-publisher');\nconst SMFLib = require('solclient-smf');\nconst SolclientFactoryLib = require('solclient-factory');\nconst TransportLib = require('solclient-transport');\n\nconst { assert } = require('solclient-eskit');\nconst { CapabilityType } = require('./capability-types');\nconst { Check } = require('solclient-validate');\nconst { CorrelatedRequest } = require('./correlated-request');\nconst { Destination } = require('solclient-destination');\nconst { ErrorResponseSubcodeMapper,\n        ErrorSubcode,\n        OperationError } = require('solclient-error');\nconst { FsmEvent,\n        State,\n        StateMachine } = require('solclient-fsm');\nconst { Hex } = require('solclient-convert');\nconst { LogFormatter } = require('solclient-log');\nconst { Message,\n        MessageOutcome,\n        MessageDeliveryModeType } = require('solclient-message');\nconst { P2PUtil } = require('./p2p-util');\nconst { SessionEvent } = require('./session-event');\nconst { SessionEventCode } = require('./session-event-codes');\nconst { SessionEventName } = require('./session-event-names');\nconst { SessionFSMEvent } = require('./session-fsm-event');\nconst { SessionRequestType } = require('./session-request-types');\nconst { SessionStateName } = require('./session-state-names');\nconst { SslDowngrade } = require('./ssl-downgrades');\nconst { StatType,\n        StatsByMode } = require('solclient-stats');\nconst { StringUtils } = require('solclient-util');\nconst { SubscriptionUpdateTimeoutMessages } = require('./subscription-update-timeout-messages');\nconst { Codec: SDTCodec } = require('solclient-sdt');\nconst { Convert } = require('solclient-convert');\n\nconst {\n  anythingToBuffer,\n} = Convert;\n\nconst { formatHexString } = Hex;\nconst { stripNullTerminate } = StringUtils;\nconst { STAT_TX_BYMODE_BYTES,\n        STAT_TX_BYMODE_MSGS,\n        STAT_RX_BYMODE_BYTES,\n        STAT_RX_BYMODE_MSGS,\n        STAT_TX_BYMODE_REDELIVERED,\n        STAT_TX_BYMODE_BYTES_REDELIVERED } = StatsByMode;\n\nconst zlib = require('zlib');\nconst fflate = require('fflate');\n\n/**\n * @param {SessionProperties} sessionProperties The shared reference to the properties of the\n *  owning session\n * @param {Session} session The session owning this FSM\n * @extends StateMachine\n * @private\n */\nclass SessionFSM extends StateMachine {\n  constructor(sessionProperties, session, stats, hosts) {\n    super({ name: 'SessionFSM' });\n    const fsm = this;\n    const logFormatter = function logFormatter(...args) {\n      return [\n        `[session-fsm=${fsm.sessionIdHex || '(N/A)'}]`,\n        `[${fsm.getCurrentStateName()}]`,\n        ...args,\n      ];\n    };\n    const logger = this.logger = new LogFormatter(logFormatter);\n    const { LOG_TRACE, LOG_DEBUG, LOG_INFO } = logger;\n    this.log = logger.wrap(this.log, this);\n    this._sessionProperties = sessionProperties;\n    this._session = session;\n    this._sessionStatistics = stats;\n    this._hosts = hosts;\n    this._consumers = new ConsumerLib.ConsumerFlows();\n    // This is a function that generates this interface. It takes the flow as a construction\n    // parameter, and for some methods, produces a partial application using that flow.\n\n    this._flowInterfaceFactory = flow => ({\n      getCorrelationTag:               this.getCorrelationTag.bind(this),\n      incStat:                         this.incStat.bind(this),\n      sendData:                        message => this.send(message, flow, false),\n      sendToTransport:                 message => this.sendToTransport(message, flow, false),\n      sendControl:                     message => this.send(message, flow, true),\n      enqueueRequest:                  this.enqueueOutstandingCorrelatedReq.bind(this),\n      createDestinationFromDescriptor: session.createDestinationFromDescriptor.bind(session),\n      createTemporaryDestination:      session.createTemporaryDestination.bind(session),\n      isCapable:                       session.isCapable.bind(session),\n      getCapability:                   session.getCapability.bind(session),\n      getCurrentStateName:             this.getCurrentStateName.bind(this),\n      updateQueueSubscription:         session.updateQueueSubscription.bind(session),\n\n      get sessionIdHex() {\n        return fsm.sessionIdHex;\n      },\n      get canAck() {\n        return session.canAck;\n      },\n    });\n\n    // Keeping track of transport backpressure (but not AD window exhaustion),\n    // so we can relieve it on transport reconnect:\n    this._userBackpressured = false;\n\n    this.clearCurrentError();\n\n    this.initial(function onInitial() {\n      return this.transitionTo(fsm.SessionDisconnected,\n                               context => context.getStateMachine().reset());\n    });\n\n    /**\n     * Handles events in the unhandledEventHandler callback\n     * @param {SessionFSMEvent} sEvent\n     * @private\n     */\n    this.unhandledEventReaction(function onUnhandledEvent(sEvent) {\n      const curState = fsm.getCurrentState();\n      switch (sEvent.getName()) {\n        case SessionEventName.CREATE_SUBSCRIBER:\n          // CREATE_SUBSCRIBER is only handled in CONNECTED state.\n          // In all other states we just add the consumer to our\n          // list of unbound consumers that need to be bound when\n          // the session up occurs.\n          assert(fsm._consumers, 'collection has lifetime of FSM instance');\n          fsm._consumers.add(sEvent.guaranteedFlowObject);\n          return this;\n        case SessionEventName.DISPOSE:\n          LOG_DEBUG('Handling DISPOSE');\n          return curState.terminate(() => fsm.disposeInternal());\n        case SessionEventName.FLOW_UP:\n          LOG_DEBUG(`Ignoring FLOW_UP event from ${sEvent.guaranteedFlowObject}`);\n          return this;\n        default:\n          LOG_TRACE(`Ignoring event ${sEvent.getName()} in state ${fsm.getCurrentStateName()}`);\n          return this;\n      }\n    });\n\n    this.SessionConnecting = new State({\n      name:          SessionStateName.CONNECTING,\n      parentContext: fsm,\n    }, {\n      //\n      //  handleTransportDestroyed is called in response to TRANSPORT_DESTROYED\n      //  event and if transport create throws an exception. In both case there is\n      //  no underlying transport and the FSM must move on to the next host.\n      handleTransportDestroyed() {\n        // clear connectTimer, if it is still running\n        fsm.clearConnectTimer();\n\n        fsm._currentHost = fsm._hosts.getNextHost();\n        if (fsm._currentHost === null) {\n          return this.transitionToExitPoint(fsm.SessionConnecting, 'ErrorExit');\n        }\n\n        const { connectWaitTimeInMsecs } = fsm._hosts;\n        LOG_TRACE(`Wait time for this host is ${connectWaitTimeInMsecs}`);\n        if (connectWaitTimeInMsecs > 0 && !fsm._connectWaitTimer) {\n          fsm._connectWaitTimer = setTimeout(() => {\n            fsm._connectWaitTimer = null;\n            fsm.processEvent(new SessionFSMEvent({ name: SessionEventName.CONNECT_WAIT_TIMEOUT }));\n          }, connectWaitTimeInMsecs);\n          return this.transitionTo(fsm.WaitingForInterConnectTimeout);\n        }\n        return this.transitionTo(fsm.WaitingForTransport);\n      },\n    })\n      .entry(() => {\n        fsm.setConnectTimer();\n      })\n      .entryPoint('DisconnectTransport', function onDisconnectTransport() {\n        fsm._hosts.reset({ wasConnected: undefined, disconnected: true });\n        //\n        // Set the error event, as we have reset the\n        // host list with disconnected:true, we always take the\n        // errorExit path to DISCONNECTED state after this entryPoint.\n        //\n        fsm._connectFailEvent = SessionEventCode.DISCONNECTED;\n        fsm._connectSuccessEvent = SessionEventCode.DISCONNECTED;\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .entryPoint('ReconnectTransport', function onReconnectTransport() {\n        //\n        // Set the error event, this is only used\n        // if we take the errorExit path\n        //\n        fsm._connectFailEvent = SessionEventCode.DOWN_ERROR;\n        fsm._connectSuccessEvent = SessionEventCode.RECONNECTED_NOTICE;\n        // Should we try to reconnect?\n        const disconnected = fsm._sessionProperties._reconnectRetries === 0;\n        fsm._hosts.reset({ wasConnected: true, disconnected });\n        if (!disconnected) {\n          // workaround to make sure session state is changed to connecting when\n          // application gets the session event\n          // positional parameters for SessionEvent constructor\n          // make sure we get the args and err setup now as by the time\n          // the postEventAction runs currentError will be reset.\n          const err = fsm._currentError || {};\n          const args = [err.eventText,    // infoString\n            err.responseCode,             // responseCode\n            err.errorSubcode,             // errorSubcode\n            undefined,                    // correlationKey ... N/A\n            err.eventReason];             // eventReason\n          fsm.setPostEventAction(() => {\n            fsm.setConnectTimer();\n            fsm.emitSessionEvent(SessionEvent.build(SessionEventCode.RECONNECTING_NOTICE, ...args));\n          });\n        }\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .initial(() => {\n        fsm.clearCurrentError();\n        //\n        // Set the error event this is only used\n        // if we take the errorExit path\n        //\n        fsm._connectFailEvent = SessionEventCode.CONNECT_FAILED_ERROR;\n        fsm._connectSuccessEvent = SessionEventCode.UP_NOTICE;\n\n        // Perform host resolution (guaranteed async; replaces a postEventAction)\n        // Do not perform host list operations until this completes (moved to callback)\n        fsm._hosts.resolveHosts((err) => {\n          if (!fsm._hosts) {\n            LOG_TRACE('Ignoring host filter fail because session was disposed');\n            return null;\n          }\n          if (err) {\n            LOG_TRACE('DNS filter failed:', err);\n            fsm.setCurrentError({\n              errorSubcode: ErrorSubcode.UNRESOLVED_HOSTS,\n              eventText:    err,\n            });\n            fsm._hosts.reset({ disconnected: true });\n            return this.processEvent(new SessionFSMEvent({ name: SessionEventName.EXCEPTION }));\n          }\n\n          // Now that the host list has been scanned, we can reset and get next host\n          fsm._hosts.reset({ wasConnected: false });\n          fsm._currentHost = fsm._hosts.getNextHost();\n          return this.processEvent(new SessionFSMEvent(\n            { name: SessionEventName.DNS_RESOLUTION_COMPLETE }\n          ));\n        });\n        return this.transitionTo(fsm.WaitingForDNS);\n      })\n      .reaction(SessionEventName.DNS_RESOLUTION_COMPLETE, function onDNSComplete() {\n        return this.transitionTo(fsm.WaitingForTransport);\n      })\n      .reaction(SessionEventName.DISCONNECT, function onDisconnect(/* event */) {\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'DisconnectTransport');\n      })\n      .reaction(SessionEventName.CONNECT_TIMEOUT, function onConnectTimeout(/* event */) {\n        fsm.setCurrentError({\n          errorSubcode: ErrorSubcode.TIMEOUT,\n          eventText:    'Connect timeout',\n        });\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .reaction(SessionEventName.SEND_ERROR, function onSendError(sessionEvent) {\n        LOG_INFO(`SEND_ERROR reached SessionConnecting. ${sessionEvent}`);\n        fsm.setCurrentError(sessionEvent);\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .reaction(SessionEventName.EXCEPTION, function onException(errEvent) {\n        fsm.setCurrentError(errEvent);\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .reaction(SessionEventName.TRANSPORT_DESTROYED, function onTransportDestroyed(sessionEvent) {\n        fsm.setCurrentError(sessionEvent);\n        LOG_INFO('TRANSPORT_DESTROYED event');\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .exit(() => {\n        fsm.clearConnectTimer();\n        if (fsm._connectWaitTimer) {\n          clearTimeout(fsm._connectWaitTimer);\n          fsm._connectWaitTimer = null;\n        }\n      })\n      .exitPoint('ConnectedExit', (/* event */) => {\n        // Normal exit to TransportUp.\n        // We need to notify the application they are connected. Use postEventAction to make sure\n        // session state has already changed to TransportUp when application gets the callback.\n        // Use _connectSuccessEvent to send RECONNECTED vs UP depending on entry point.\n        // The text included in the event is currently different for\n        // connect vs reconnect. We should store with as part of _connectSuccessEvent in\n        // the entry point.\n        fsm.setPostEventAction(() => {\n          fsm.emitSessionEvent(SessionEvent.build(fsm._connectSuccessEvent,\n                                                  `'${fsm._hosts.currentHostToString()}'`,\n                                                  200, 0, null, null));\n          if (fsm._userBackpressured) {\n            const sessionEvent = SessionEvent.build(SessionEventCode.CAN_ACCEPT_DATA,\n                                                    '', null, 0, null, '');\n            fsm.emitSessionEvent(sessionEvent);\n            fsm._userBackpressured = false;\n          }\n        });\n        // Clear current error as we have successfully connected or\n        // reconnected.\n        fsm.clearCurrentError();\n        return this.transitionTo(fsm.SessionTransportUp);\n      })\n      .exitPoint('ErrorExit', function onExit(/* event */) {\n        // Notify the application they are disconnected. Use postEventAction to make sure session\n        // state has already changed to disconnected when application gets the callback.\n        fsm.setPostEventAction(() => {\n          const err = fsm._currentError || {};\n          // positional parameters for SessionEvent constructor\n          const args = [err.eventText,    // infoString\n            err.responseCode,             // responseCode\n            err.errorSubcode,             // errorSubcode\n            undefined,                    // correlationKey ... N/A\n            err.eventReason];             // eventReason\n          fsm.emitSessionEvent(SessionEvent.build(fsm._connectFailEvent, ...args));\n        });\n        return this.transitionTo(fsm.SessionDisconnected);\n      });\n\n    this.WaitingForDNS = new State({\n      name:          SessionStateName.WAITING_FOR_DNS,\n      parentContext: fsm.SessionConnecting,\n    });\n\n    this.DestroyingTransport = new State({\n      name:          SessionStateName.DESTROYING_TRANSPORT,\n      parentContext: fsm.SessionConnecting,\n    })\n      .entry(() => {\n        LOG_INFO('Connecting, disposing transport');\n        fsm.clearConnectTimer(); // clear connectTimer, while destroying the transport\n        fsm.destroyTransportSession('Disconnecting session', 0);\n      })\n      .reaction(SessionEventName.TRANSPORT_DESTROYED, function onTransportDestroyed(sessionEvent) {\n        fsm.setCurrentError(sessionEvent);\n        return fsm.SessionConnecting.handleTransportDestroyed.call(this); // this._transport == null at this point \n      });\n\n    this.WaitingForInterConnectTimeout = new State({\n      name:          SessionStateName.WAITING_FOR_INTERCONNECT_TIMEOUT,\n      parentContext: fsm.SessionConnecting,\n    })\n      .reaction(SessionEventName.CONNECT_WAIT_TIMEOUT, function onConnectWaitTimeout(/*event*/) {\n        return this.transitionTo(fsm.WaitingForTransport);\n      });\n\n    this.WaitingForTransport = new State({\n      name:          SessionStateName.WAITING_FOR_TRANSPORT,\n      parentContext: fsm.SessionConnecting,\n    })\n      .initial(() => {\n        const errorMessage = 'Cannot establish transport session: creation failed';\n        fsm.setConnectTimer();\n        fsm.clearCurrentError();\n        try {\n          fsm.initTransport();\n        } catch (e) {\n          this.setCurrentError({\n            eventText:    e.message === errorMessage ? errorMessage : `${errorMessage}: ${e.message}`,\n            errorSubcode: e.subcode || ErrorSubcode.INTERNAL_ERROR,\n            eventReason:  e });\n          return fsm.SessionConnecting.handleTransportDestroyed.call(this);\n        }\n        return this.transitionTo(fsm.WaitingForTransportUp);\n      });\n\n    this.WaitingForTransportUp = new State({\n      name:          SessionStateName.WAITING_FOR_TRANSPORT_UP,\n      parentContext: this.WaitingForTransport,\n    })\n      // This way the code is run only on actual state entry,\n      // not on null transitions (staying in this state)\n      .entry(() => { this._justEntered = true; })\n      .initial(() => {\n        if (!this._justEntered) { return this; }\n        this._justEntered = false;\n        const errorMessage = 'Cannot establish transport session: connection failed';\n        try {\n          const returnCode = fsm._transport.connect();\n          if (returnCode !== TransportLib.TransportReturnCode.OK) {\n            throw new OperationError(\n              errorMessage,\n              ErrorSubcode.CONNECTION_ERROR,\n              TransportLib.TransportReturnCode.describe(returnCode)\n            );\n          }\n          LOG_INFO(`Attempting to connect session '${fsm.sessionId}' to ${fsm._hosts.currentHostToString()}`);\n        } catch (e) {\n          this.setCurrentError({\n            eventText:    e.message === errorMessage ? errorMessage : `${errorMessage}: ${e.message}`,\n            errorSubcode: e.subcode || ErrorSubcode.INTERNAL_ERROR,\n            eventReason:  e });\n          return fsm.SessionConnecting.handleTransportDestroyed.call(this);\n        }\n        return this;\n      })\n      .reaction(SessionEventName.SEND_ERROR, function doNothing(sEvent) {\n        LOG_INFO(`SEND_ERROR while waiting for transport up, doing nothing. ${sEvent}`);\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.TRANSPORT_UP, function onTransportUp(sEvent) {\n        fsm.sessionId = sEvent.sessionId || '';\n        const returnCode = fsm.sendClientCtrlLogin();\n        if (returnCode === TransportLib.TransportReturnCode.OK) {\n          return this.transitionTo(fsm.WaitingForLogin);\n        }\n        const err = {\n          eventText:    'Failed to send Client Control Login',\n          errorSubcode: ErrorSubcode.LOGIN_FAILURE,\n          responseCode: 400,\n        };\n        fsm.setCurrentError(err);\n        return this.transitionTo(fsm.DestroyingTransport);\n      });\n\n    this.WaitingForLogin = new State({\n      name:          SessionStateName.WAITING_FOR_LOGIN,\n      parentContext: fsm.SessionConnecting,\n    })\n      .entry(() => {\n        fsm.setClientCtrlTimer();\n      })\n      .reaction(SessionEventName.TRANSPORT_PROTOCOL_CLIENTCTRL, function onClientCtrl(sEvent) {\n        const clientCtrlMsg = sEvent.smfMsg;\n        const response = clientCtrlMsg.getResponse();\n        const respCode = response.responseCode;\n        const err = {\n          responseCode: respCode,\n        };\n        fsm._responseCode = respCode;\n        if (respCode === 200) {\n          if (!fsm.checkNoLocal(clientCtrlMsg)) {\n            Object.assign(err, {\n              eventText:    'No Local is not supported by the Solace Message Router',\n              errorSubcode: ErrorSubcode.NO_LOCAL_NOT_SUPPORTED,\n            });\n          } else if (!fsm.checkCompressedSsl(clientCtrlMsg)) {\n            Object.assign(err, {\n              eventText:    'Compressed TLS is not supported by the Solace Message Router',\n              errorSubcode: ErrorSubcode.COMPRESSED_TLS_NOT_SUPPORTED,\n            });\n          } else { // Happy path\n            fsm.updateReadonlySessionProps(clientCtrlMsg);\n            return this.transitionTo(fsm.WaitForTransportChange);\n          }\n        } else {\n          const rawSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(respCode,\n                                                                        response.responseString);\n          const subcode = (rawSubcode === ErrorSubcode.UNKNOWN_ERROR) ?\n            ErrorSubcode.LOGIN_FAILURE : rawSubcode;\n          LOG_INFO(`Login failed. Subcode: ${subcode} respCode: ${respCode} ` +\n            `respString: ${response.responseString}`);\n          Object.assign(err, {\n            eventText:    response.responseString,\n            errorSubcode: subcode,\n          });\n        }\n        LOG_TRACE('ClientCtrl error', err);\n        fsm.setCurrentError(err);\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .reaction(SessionEventName.DOWNGRADE_TIMEOUT, function onDowngradeTimeout(/* event */) {\n        if (!fsm._transport.requestDowngrade || fsm._transport.requestDowngrade('ClientCtrl timeout', ErrorSubcode.TIMEOUT) === false) {\n          fsm.setCurrentError({\n            eventText:    'ClientCtrl timeout',\n            errorSubcode: ErrorSubcode.TIMEOUT,\n          });\n          return this.transitionTo(fsm.DestroyingTransport);\n        }\n        // Don't recreate the transport, just try to connect it\n        LOG_TRACE('Downgrade accepted, returning to WaitingForTransportUp');\n        return this.transitionTo(fsm.WaitingForTransportUp);\n      })\n      .exit(() => {\n        fsm.clearClientCtrlTimer();\n      });\n\n    // This is an intermediate state after a successful login.\n    // It gives time to the transport factory (more like a dealership at this point)\n    // to enable compression and/or shut down tls.\n    // The factory may return a new transport immediately,\n    // in which case there is no need to stay in this state.\n    // Or it may return null, and pass the new transport to the callback later.\n    // No messages can be sent while waiting for the callback.\n    this.WaitForTransportChange = new State({\n      name:          SessionStateName.WAITING_FOR_TRANSPORT_CHANGE,\n      parentContext: fsm.SessionConnecting,\n    })\n      .initial(function onInitial() {\n        // Operates on the FSM, must be bound to it.\n        const callback = function onTransportChange(newTransport) {\n          this._transport = newTransport;\n          this.processEvent(new SessionFSMEvent(\n                            { name: SessionEventName.TRANSPORT_CHANGE_DONE }\n          ));\n        };\n        const rc = fsm.updateTransportCompression(callback.bind(fsm));\n        if (rc === null) {\n          // Factory needs time, stay in this state.\n          return this;\n        }\n        fsm._transport = rc;\n        return this.transitionTo(fsm.ReapplyingSubscriptions);\n      })\n      .reaction(SessionEventName.TRANSPORT_CHANGE_DONE, function onTransportChangeDone() {\n        return this.transitionTo(fsm.ReapplyingSubscriptions);\n      });\n\n    this.ReapplyingSubscriptions = new State({\n      name:          SessionStateName.REAPPLYING_SUBSCRIPTIONS,\n      parentContext: fsm.SessionConnecting,\n    })\n      .entry(() => {\n        LOG_INFO('ReapplyingSubscriptions: entry');\n        fsm.copySubscriptionCacheKeys();\n      })\n      .initial(function onInitial() {\n        if (fsm.reapplySubscriptions() === true) {\n          // all subscriptions applied and waiting for a subscription confirm\n          return this.transitionTo(fsm.WaitForSubConfirm);\n        }\n        // flow controlled while reapplying\n        return this.transitionTo(fsm.WaitForCanAcceptData);\n      })\n      .reaction(SessionEventName.SUBSCRIBE_TIMEOUT, function onSubscribeTimeout() {\n        const respText = 'Subscription timeout while reapplying';\n        const subcode = ErrorSubcode.TIMEOUT;\n        fsm.setCurrentError({\n          eventText:    respText,\n          errorSubcode: subcode,\n        });\n        return this.transitionTo(fsm.DestroyingTransport);\n      })\n      .exit(function onExit() {\n        fsm.clearSubscriptionCacheKeys();\n        return this;\n      });\n\n    this.WaitForSubConfirm = new State({\n      name:          SessionStateName.WAITING_FOR_SUBCONFIRM,\n      parentContext: fsm.ReapplyingSubscriptions,\n    })\n      .reaction(SessionEventName.TRANSPORT_PROTOCOL_SMP, function onTransportProtocolSMP(sEvent) {\n        // process rxMsgObj\n        const smfRespHeader = sEvent.smfMsg.smfHeader;\n        const subscriptionStr = stripNullTerminate(sEvent.smfMsg.encodedUtf8Subscription);\n        const respCode = smfRespHeader.pm_respcode;\n        const respText = smfRespHeader.pm_respstr;\n        if (respCode !== 200) {\n          const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(respCode, respText);\n          LOG_INFO(`Waiting for subscription confirmation, got ${respCode} (${errorSubcode}) ` +\n                    `'${respText}' on subscription ${subscriptionStr}`);\n          fsm.setCurrentError({\n            eventText:    respText,\n            responseCode: respCode,\n            errorSubcode,\n          });\n          return this.transitionTo(fsm.DestroyTransport);\n        }\n\n        if (fsm._session.canConnectPublisher &&\n            fsm._defaultPublisher &&\n            fsm._defaultPublisher.isBindWaiting()) {\n          return this.transitionTo(fsm.WaitingForMessagePublisher);\n        }\n        return this.transitionToExitPoint(fsm.SessionConnecting, 'ConnectedExit');\n      });\n\n    this.WaitForCanAcceptData = new State({\n      name:          SessionStateName.WAITING_FOR_CAN_ACCEPT_DATA,\n      parentContext: fsm.ReapplyingSubscriptions,\n    })\n      .reaction(SessionEventName.TRANSPORT_PROTOCOL_SMP, function onTransportProtocolSMP(sEvent) {\n        // process rxMsgObj\n        const smfRespHeader = sEvent.smfMsg.smfHeader;\n        const subscriptionStr = stripNullTerminate(sEvent.smfMsg.encodedUtf8Subscription);\n        const respCode = smfRespHeader.pm_respcode;\n        const respText = smfRespHeader.pm_respstr;\n        // We are not expecting a SMP response as we have not sent a request-confirm\n        // so this is almost assuredly an error response to a subscription add\n        // check respCode anyway.  if its '200 OK' just ignore it.\n        if (respCode !== 200) {\n          const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(respCode, respText);\n          LOG_DEBUG(`Waiting for can accept data, got ${respCode} (subcode ${errorSubcode}) ` +\n            `'${respText}' on subscription ${subscriptionStr}`);\n          fsm.setCurrentError({\n            eventText:    respText,\n            responseCode: respCode,\n            errorSubcode,\n          });\n          return this.transitionTo(fsm.DestroyingTransport);\n        }\n        // unexpected 200 OK repsonse, log it and continue\n        LOG_INFO(`Unexpected 200 OK response to subscription add for ${subscriptionStr}`);\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.TRANSPORT_CAN_ACCEPT_DATA, function onTransportCanAcceptData() {\n        if (fsm.reapplySubscriptions() === true) {\n          // all subscriptions applied and waiting for a subscription confirm\n          return this.transitionTo(fsm.WaitForSubConfirm);\n        }\n        // flow controlled while reapplying\n        return this.internalTransition(null);\n      });\n\n    this.WaitingForMessagePublisher = new State({\n      name:          SessionStateName.WAITING_FOR_PUBFLOW,\n      parentContext: fsm.SessionConnecting,\n    })\n      .entry(() => {\n        // Inform the publisher that the session is up and the flow establishment can begin.\n        fsm._defaultPublisher.connect();\n        fsm.sendPublisherSessionUpEvent(fsm._defaultPublisher);\n      })\n      .reaction(SessionEventName.FLOW_UP, function onEvent() {\n        LOG_TRACE(`Flow up ${this}`);\n        if (!fsm._defaultPublisher.isBindWaiting()) {\n          LOG_TRACE('Publisher up');\n          return this.transitionToExitPoint(fsm.SessionConnecting, 'ConnectedExit');\n        }\n        LOG_TRACE('Waiting for more publishers');\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.FLOW_FAILED, function onEvent(sEvent) {\n        fsm.setCurrentError({\n          eventText:    `Guaranteed Message Publisher Failed: ${sEvent.eventText}`,\n          errorSubcode: ErrorSubcode.LOGIN_FAILURE,\n        });\n        return this.transitionTo(fsm.DestroyingTransport);\n      });\n\n    this.SessionTransportUp = new State({\n      name:          SessionStateName.TRANSPORT_UP,\n      parentContext: fsm,\n    })\n      .entry(function onEntry() {\n        fsm.clearConnectTimer(); // clear connectTimer, once we successfully connect\n        return this;\n      })\n      .initial(function onInitial() {\n        if (fsm._session.canConnectConsumer) {\n          // Inform the subscribers that the session is up and the flow establishment can begin.\n          fsm._consumers.flows.forEach(consumer => fsm.sendConsumerSessionUpEvent(consumer));\n          // Reconnecting flows need session state notification too.\n          fsm._consumers.reconnectingFlows.forEach(\n            consumer => fsm.sendConsumerSessionUpEvent(consumer));\n        }\n        return this.transitionTo(fsm.FullyConnected);\n      })\n      .reaction(SessionEventName.DISCONNECT, function onDisconnect(/* sEvent */) {\n        return this.transitionTo(fsm.SessionDisconnecting);\n      })\n      .reaction(SessionEventName.EXCEPTION, function onException(sEvent) {\n        fsm.setCurrentError(sEvent);\n        fsm.cleanupSession();\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'ReconnectTransport');\n      })\n      .reaction(SessionEventName.SEND_ERROR, function onSendError(sEvent) {\n        fsm.setCurrentError(sEvent);\n        fsm.cleanupSession();\n        LOG_TRACE('Reconnecting transport after SEND_ERROR (not fully connected)');\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'ReconnectTransport');\n      })\n      .reaction(SessionEventName.TRANSPORT_DESTROYED, function onTransportDestroyed(sEvent) {\n        fsm.setCurrentError(sEvent);\n        LOG_INFO('Received unsolicited TRANSPORT_DESTROYED event while transport is up');\n        LOG_TRACE(`TRANSPORT_DESTROYED details: ${sEvent}`);\n        fsm.cleanupSession();\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'ReconnectTransport');\n      })\n      .reaction(SessionEventName.TRANSPORT_PROTOCOL_SMP, function onTransportProtocolSMP(sEvent) {\n        const smfRespHeader = sEvent.smfMsg.smfHeader;\n        const subscriptionStr = stripNullTerminate(sEvent.smfMsg.encodedUtf8Subscription);\n        const respCode = smfRespHeader.pm_respcode;\n        const respText = smfRespHeader.pm_respstr;\n\n        fsm.handleSubscriptionUpdateError(respCode, respText, subscriptionStr, undefined, false);\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.TRANSPORT_CAN_ACCEPT_DATA, function onCanAcceptData(sEvent) {\n        // Notify client for republishing\n        const sessionEvent = SessionEvent.build(SessionEventCode.CAN_ACCEPT_DATA,\n                                                '', null, 0, null, sEvent.toString());\n        fsm.emitSessionEvent(sessionEvent);\n        fsm._userBackpressured = false;\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.CREATE_SUBSCRIBER, function onCreateSubscriber(sEvent) {\n        // Inform the consumer that the session is up and the flow establishment can begin.\n        const consumer = fsm._consumers.add(sEvent.guaranteedFlowObject);\n        fsm.sendConsumerSessionUpEvent(consumer);\n        return this;\n      })\n      .exit(function onExit() {\n        fsm.clearKeepAlive();\n        return this;\n      });\n\n    this.FullyConnected = new State({\n      name:          SessionStateName.FULLY_CONNECTED,\n      parentContext: fsm.SessionTransportUp,\n    })\n      .entry(() => {\n        fsm._connectFailEvent = SessionEventCode.DOWN_ERROR;\n        fsm.scheduleKeepAlive();\n      });\n\n    this.SessionDisconnected = new State({\n      name:          SessionStateName.DISCONNECTED,\n      parentContext: fsm,\n    })\n      .reaction(SessionEventName.DISCONNECT, function onDisconnect(/* sEvent */) {\n        fsm.setPostEventAction(() => {\n          fsm.emitSessionEvent(SessionEvent.build(SessionEventCode.DISCONNECTED));\n        });\n\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.CONNECT, function onConnect(/* sEvent */) {\n        return this.transitionTo(fsm.SessionConnecting);\n      })\n      .reaction(SessionEventName.EXCEPTION, function onException(/* sEvent */) {\n        // do nothing\n        return this.internalTransition(null);\n      });\n    this.SessionDisconnecting = new State({\n      name:          SessionStateName.DISCONNECTING,\n      parentContext: fsm,\n    })\n      .initial(() => {\n        LOG_INFO(`Disconnecting session ${fsm}`);\n        return this.transitionTo(fsm.DisconnectingFlows);\n      })\n      .reaction(SessionEventName.DISCONNECT, function onDisconnect(/* sEvent */) {\n        return this.internalTransition(null);\n      })\n      .reaction(SessionEventName.EXCEPTION, function onException(errEvent) {\n        //\n        // As we are in disconnecting state we have initiated the\n        // disconnect and need to preserve the error subcode that\n        // we set before destroying the transport. The transport, having\n        // no error, will usually return a subcode of zero here.\n        //\n        // This only changes the eventCode, not the subcode. Other properties\n        // are preserved.\n        //\n        fsm.setCurrentError({ errEvent });\n        fsm.cleanupSession();\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'DisconnectTransport');\n      })\n      .reaction(SessionEventName.TRANSPORT_DESTROYED, function onTransportDestroyed(/* sEvent */) {\n        LOG_INFO('Received unsolicited TRANSPORT_DESTROYED while disconnecting transport');\n        fsm.cleanupSession();\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'DisconnectTransport');\n      });\n\n    this.DisconnectingFlows = new State({\n      name:          SessionStateName.DISCONNECTING_FLOWS,\n      parentContext: fsm.SessionDisconnecting,\n    }, {\n      // Get all flows to disconnect. This will need to be called at least once.\n      gatherPendingFlows() {\n        const { MessageConsumerEventName } = ConsumerLib;\n\n        // Don't re-enter synchronously to look for new flows.\n        // Flows disconnect synchronously when they are already disconnected.\n        // If this is the case, they throw; they do not emit an event.\n        // If a consumer flow is up, it will immediately emit a BIND_WAITING event and we\n        // handle that.\n        // Since we know that flow#_disconnectSession neither creates a new flow\n        // nor calls a user callback that could do so, we need not look for new\n        // flows that were created.\n        assert(!this.isGathering);\n        this.isGathering = true;\n\n        const adaptedListenForDestroy = (flow, installfn, downEvents) => {\n          assert(flow, 'Trying to listen to undefined flow');\n          // If we already know about this flow, skip it.\n          if (this.known.has(flow)) return;\n          LOG_TRACE(`Adding pending flow ${flow}`);\n          this.known.add(flow);\n          this.pending.add(flow);\n          const onFlowDown = () => {\n            LOG_TRACE(`Removing flow from pending ${flow}`);\n            downEvents.forEach(event => flow._removeListener(event, onFlowDown));\n            this.pending.delete(flow);\n            if (!this.isGathering) this.checkPendingFlows();\n          };\n          downEvents.forEach(event => installfn.call(flow, event, onFlowDown));\n          try {\n            flow._disconnectSession(); // Session has been disconnected by user\n          } catch (ex) {\n             // Synchronously down\n            LOG_TRACE('Flow disconnect threw');\n            LOG_TRACE(ex);\n            onFlowDown();\n          }\n        };\n\n        // See SOL-13556: sending CloseFlow makes it impossible to recover the flow.\n        // This was the code that sent CloseFlow. I'm leaving it here temporarily\n        // in case we want a clean shutdown that waits for acks.\n        /*\n        const { MessagePublisherEventName } = PublisherLib;\n        if (fsm._defaultPublisher) {\n          adaptedListenForDestroy(fsm._defaultPublisher,\n                                  fsm._defaultPublisher.once,\n                                  [MessagePublisherEventName.DOWN]);\n        }\n        */\n        if (fsm._consumers) {\n          fsm._consumers.flows.forEach((flow) => {\n            adaptedListenForDestroy(flow,\n                                    flow._once,\n                                    [\n                                      MessageConsumerEventName.DOWN,\n                                      MessageConsumerEventName.DOWN_ERROR,\n                                    ]);\n          });\n        }\n\n        this.isGathering = false;\n      },\n      // This function is called whenever a flow comes down, whether sync or async.\n      // The body is wrapped in a basic debounce: if we are re-entering (synchronously),\n      // no new flows will be added.\n      checkPendingFlows() {\n        LOG_TRACE('Waiting for disconnects on', this.pending);\n        if (this.pending.size === 0) {\n          // We are out of pending flows, but look for new flows that were just added\n          this.gatherPendingFlows();\n          // Were any flows just added?\n          if (this.pending.size === 0) {\n            this.proceed();\n          }\n        }\n      },\n      proceed() {\n        // All done!\n        // Clear flow sets so they can be disposed\n        this.known = null;\n        this.pending = null;\n        LOG_INFO('All flows disconnected');\n        fsm.processEvent(new FsmEvent({ name: SessionEventName.FLOWS_DISCONNECTED }));\n      },\n    })\n      .entry(function onEntry() {\n        this.known = new Set();\n        this.pending = new Set();\n        this.checkPendingFlows();\n      })\n      .reaction(SessionEventName.FLOWS_DISCONNECTED, function onFlowsDisconnected() {\n        return this.transitionTo(fsm.FlushingTransport);\n      });\n\n    this.FlushingTransport = new State({\n      name:          SessionStateName.FLUSHING_TRANSPORT,\n      parentContext: fsm.SessionDisconnecting,\n    }, {\n      flushTransport() {\n        fsm.cleanupSession();\n        fsm.flushTransportSession(() => this.onTransportFlushed());\n        this.sessionId = null;\n      },\n      onTransportFlushed() {\n        fsm.processEvent(new FsmEvent({ name: SessionEventName.TRANSPORT_FLUSHED }));\n      },\n    })\n      .entry(function onEntry() {\n        LOG_INFO('Flushing transport');\n        this.flushTransport();\n      })\n      .reaction(SessionEventName.TRANSPORT_FLUSHED, function onTransportFlushed() {\n        LOG_INFO('Handle Transport Flushed');\n        return this.transitionToEntryPoint(fsm.SessionConnecting, 'DisconnectTransport');\n      });\n  }\n\n  /**\n   * @param {Destination} destination The topic to add\n   * @private\n   */\n  addToSubscriptionCache(destination) {\n    if (Check.nothing(destination) || !this._subscriptionCache) {\n      return;\n    }\n\n    const { LOG_DEBUG } = this.logger;\n    const key = destination.name;\n    if (this._subscriptionCache[key] === null ||\n        this._subscriptionCache[key] === undefined) {\n      LOG_DEBUG(`Cache subscription ${key}`);\n      this._subscriptionCache[key] = destination;\n      LOG_DEBUG('Increment cache count');\n      this._subscriptionCacheCount++;\n    } else {\n      LOG_DEBUG(`Cache subscription ${key}`);\n      this._subscriptionCache[key] = destination;\n    }\n  }\n\n  /**\n   * @param {String} correlationTag The tag of the request to cancel\n   * @returns {CorrelatedRequest} The cancelled request\n   * @private\n   */\n  cancelOutstandingCorrelatedReq(correlationTag) {\n    if (Check.nothing(correlationTag) || !this._correlatedReqs) {\n      return null;\n    }\n    const req = this._correlatedReqs[correlationTag];\n    if (req === null || req === undefined) {\n      return null;\n    }\n\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n    LOG_DEBUG(`Cancel outstanding ctrl request correlationTag=${correlationTag\n      }`);\n    if (req.timer) {\n      clearTimeout(req.timer);\n      req.timer = null;\n    }\n    try {\n      const result = delete this._correlatedReqs[correlationTag];\n      if (!result) {\n        LOG_ERROR(`Cannot delete ctrl request ${correlationTag}`);\n      }\n    } catch (e) {\n      LOG_ERROR(`Cannot delete ctrl request ${correlationTag}`, e);\n    }\n    return req;\n  }\n\n\n  /**\n   * @private\n   */\n  cleanupSession() {\n    const { LOG_INFO } = this.logger;\n    LOG_INFO('Clean up session');\n\n    const {\n      ConsumerFSMEvent,\n      ConsumerFSMEventNames,\n    } = ConsumerLib;\n\n    if (this._correlatedReqs) {\n      Object.keys(this._correlatedReqs).forEach(key =>\n        this.cancelOutstandingCorrelatedReq(key));\n    }\n\n    this.clearConnectTimer();\n    this.clearClientCtrlTimer();\n    this.clearKeepAlive();\n    this._consumers.flows.forEach((consumer) => {\n      consumer.processFSMEvent(\n        new ConsumerFSMEvent({ name: ConsumerFSMEventNames.SESSION_DOWN })\n      );\n    });\n    // Reconnecting flows need session state notification too.\n    this._consumers.reconnectingFlows.forEach((consumer) => {\n      consumer.processFSMEvent(\n        new ConsumerFSMEvent({ name: ConsumerFSMEventNames.SESSION_DOWN })\n      );\n    });\n    if (this._defaultPublisher) {\n      this._defaultPublisher.processFSMEvent(\n        new PublisherLib.PublisherFSMEvent({\n          name: PublisherLib.PublisherFSMEventNames.SESSION_DOWN,\n        })\n      );\n    }\n    this._session.cleanupSession();\n  }\n\n  /**\n   * @private\n   */\n  clearClientCtrlTimer() {\n    if (!this._clientCtrlTimer) {\n      return;\n    }\n\n    clearTimeout(this._clientCtrlTimer);\n    this._clientCtrlTimer = null;\n  }\n\n\n  /**\n   * @private\n   */\n  clearConnectTimer() {\n    if (!this._connectTimer) {\n      return;\n    }\n\n    clearTimeout(this._connectTimer);\n    this._connectTimer = undefined;\n  }\n\n  /**\n   * Cancel keep alive task\n   * @private\n   */\n  clearKeepAlive() {\n    const { LOG_INFO } = this.logger;\n\n    if (this._keepAliveTimer) {\n      LOG_INFO('Cancel keepalive timer');\n      clearInterval(this._keepAliveTimer);\n      this._keepAliveTimer = null;\n    }\n\n    this.resetKeepAliveCounter();\n  }\n\n\n  /**\n   * @param {ClientCtrlMessage} clientCtrlMsg The message to parse\n   * @returns {Boolean} true if No Local is supported by the router\n   * @private\n   */\n  checkNoLocal(clientCtrlMsg) {\n    let noLocalSupported = true;\n    if (this._sessionProperties.noLocal === true) {\n      const caps = clientCtrlMsg.getRouterCapabilities();\n      if (!caps) {\n        noLocalSupported = false;\n      } else {\n        // Guard for undefined OR non-boolean capability\n        noLocalSupported = (typeof caps[CapabilityType.NO_LOCAL] === 'boolean') ? caps[CapabilityType.NO_LOCAL] : false;\n      }\n    }\n    return noLocalSupported;\n  }\n\n  /**\n   * Check against an odd router version which OKs logins with TLS downgrade to compression,\n   * but does not actually support it, and just downgrades to plain text instead.\n   * @param {ClientCtrlMessage} clientCtrlMsg The message to parse\n   * @returns {Boolean} false if router should have rejected login for unsupported compressed TLS.\n   * @private\n   */\n  checkCompressedSsl(clientCtrlMsg) {\n    const { LOG_TRACE } = this.logger;\n    if (this._compressedTLS) {\n      const caps = clientCtrlMsg.getRouterCapabilities();\n      if (!caps || typeof caps[CapabilityType.COMPRESSED_SSL] !== 'boolean') {\n        LOG_TRACE('Compressed SSL capability missing.');\n        return false;\n      }\n      return caps[CapabilityType.COMPRESSED_SSL] === true;\n    }\n    return true;\n  }\n\n  /**\n   * Check destination against router capablilities\n   * @param {Destination} destination to verify\n   * @returns {?solace.OperationError} error for caller to throw otherwise null\n   * @private\n   */\n  checkSessionDestinationCapability(destination) {\n    let error = null;\n    if (destination && destination.getType()) {\n      if (destination.getSubscriptionInfo()\n          && (destination.getSubscriptionInfo().isShare\n              || destination.getSubscriptionInfo().isNoExport)\n          && !this._session.isCapable(CapabilityType.SHARED_SUBSCRIPTIONS)) {\n        error = new OperationError(\n          'Shared subscriptions are not allowed by router for this client',\n          ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_SUPPORTED,\n          null);\n      }\n    }\n    return error;\n  }\n\n  /**\n   * Clears the current error exit information for the FSM.\n   */\n  clearCurrentError() {\n    this._currentError = null;\n  }\n\n  /**\n   * @private\n   */\n  clearSubscriptionCacheKeys() {\n    this._subscriptionCacheKeys = null;\n  }\n\n  /**\n   * @private\n   */\n  copySubscriptionCacheKeys() {\n    // reapply subscriptions if applicable\n    this.clearSubscriptionCacheKeys();\n    this._subscriptionCacheKeys = Object.keys(this._subscriptionCache || {});\n\n    // Add the P2P Inbox subscription, so the subscriptionCache always has\n    // at least one subscription.\n    const p2pTopic = P2PUtil.getP2PTopicSubscription(this._sessionProperties.p2pInboxBase);\n    this._subscriptionCacheKeys.push(p2pTopic);\n  }\n\n  createMessagePublisher() {\n    const { LOG_DEBUG } = this.logger;\n    if (!this._sessionProperties.publisherProperties.enabled) {\n      LOG_DEBUG('Publisher is disabled');\n      return;\n    }\n\n    const {\n      MessagePublisher,\n      MessagePublisherEventName,\n    } = PublisherLib;\n    const publisher = new MessagePublisher({\n      properties:              this._sessionProperties.publisherProperties,\n      sessionInterfaceFactory: this._flowInterfaceFactory,\n    });\n    publisher.on(\n      MessagePublisherEventName.UP,\n      () => this.processEvent(new SessionFSMEvent(\n        { name: SessionEventName.FLOW_UP },\n        { guaranteedFlowObject: publisher })));\n    publisher.on(\n      MessagePublisherEventName.CONNECT_FAILED_ERROR,\n      event => this.processEvent(\n        new SessionFSMEvent(\n          { name: SessionEventName.FLOW_FAILED },\n          {\n            guaranteedFlowObject: publisher,\n            event,\n            eventText:            event.description,\n          })));\n\n    publisher.on(MessagePublisherEventName.REJECTED_MESSAGE, (message, ctrlMessage) => {\n      const header = ctrlMessage.smfHeader;\n      const respCode = header.pm_respcode;\n      const respText = header.pm_respstr;\n      const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(respCode, respText);\n      const event = SessionEvent.build(SessionEventCode.REJECTED_MESSAGE_ERROR,\n                                       respText,\n                                       respCode,\n                                       errorSubcode,\n                                       message.getCorrelationKey());\n      event['message'] = message; // eslint-disable-line dot-notation\n      this.emitSessionEvent(event);\n    });\n    publisher.on(MessagePublisherEventName.ACKNOWLEDGED_MESSAGE, (message) => {\n      const event = SessionEvent.build(SessionEventCode.ACKNOWLEDGED_MESSAGE,\n                                       'Message(s) acknowledged',\n                                       undefined,\n                                       0,\n                                       message.getCorrelationKey());\n      event['message'] = message; // eslint-disable-line dot-notation\n      this.emitSessionEvent(event);\n    });\n    publisher.on(MessagePublisherEventName.FLOW_NAME_CHANGED, (data) => {\n      const { messages, count } = data;\n      if (count > 0) {\n        const event = SessionEvent.build(SessionEventCode.REPUBLISHING_UNACKED_MESSAGES,\n                                         `Republishing ${count} messages due to ` +\n          'Guaranteed Message Publisher failed to reconnect');\n        event['messages'] = messages; // eslint-disable-line dot-notation\n        event['count'] = count; // eslint-disable-line dot-notation\n        this.emitSessionEvent(event);\n      }\n    });\n    publisher.on(MessagePublisherEventName.CAN_SEND, () => {\n      this.emitSessionEvent(\n        SessionEvent.build(SessionEventCode.CAN_ACCEPT_DATA,\n                           `${publisher} window is now open and can send`));\n    });\n    publisher.on(MessagePublisherEventName.GUARANTEED_MESSAGING_DOWN, () => {\n      this.emitSessionEvent(\n        SessionEvent.build(\n          SessionEventCode.GUARANTEED_MESSAGE_PUBLISHER_DOWN,\n          'Guaranteed Message Publishing shut down'));\n    });\n    this._defaultPublisher = publisher;\n  }\n\n  sendConsumerSessionUpEvent(consumer) {\n    const {\n      ConsumerFSMEvent,\n      ConsumerFSMEventNames,\n    } = ConsumerLib;\n    const isAD = this._session.canConnectConsumer;\n    const event = new ConsumerFSMEvent({\n      name: isAD\n        ? ConsumerFSMEventNames.SESSION_UP\n        : ConsumerFSMEventNames.SESSION_UP_NO_AD,\n    });\n    event.guaranteedFlowObject = consumer;\n    consumer.processFSMEvent(event);\n  }\n\n  sendPublisherSessionUpEvent(publisher) {\n    const isAD = this._session.canConnectPublisher;\n    const event = new PublisherLib.PublisherFSMEvent({\n      name: isAD\n        ? PublisherLib.PublisherFSMEventNames.SESSION_UP\n        : PublisherLib.PublisherFSMEventNames.SESSION_UP_NO_AD,\n    });\n    event.guaranteedFlowObject = publisher;\n    publisher.processFSMEvent(event);\n  }\n\n  /**\n   * Creates a Guaranteed Messaging Subscriber.\n   *\n   * @param {Object|MessageConsumerProperties} properties Properties for the flow.\n   *  Expected fields: {@link solace.MessageConsumerProperties}\n   * @returns {solace.MessageConsumer} The newly constructed consumer\n   * @private\n   */\n  createMessageConsumer(properties) {\n    const { MessageConsumer } = ConsumerLib;\n    const consumer = new MessageConsumer({\n      properties,\n      sessionInterfaceFactory: this._flowInterfaceFactory,\n    });\n    // use the consumer properties instead of properties to ensure the topicEndpointSubscription\n    // has a Topic object\n    const consumerProperties = consumer.getProperties();\n    if (consumerProperties.topicEndpointSubscription) {\n      //check topic supported\n      const error =\n          this.checkSessionDestinationCapability(consumerProperties.topicEndpointSubscription);\n      if (error) {\n        throw error;\n      }\n    }\n\n    const { LOG_WARN } = this.logger;\n\n    // check for whether the broker session supports the capabilities\n    const settlementOutcomes = consumerProperties.requiredSettlementOutcomes;\n    if (settlementOutcomes && settlementOutcomes.length > 0) {\n      // check the capability bit for settlement outcome (NACK) support or throw OperationError()\n      const isNackRequired = settlementOutcomes.some(v => v === MessageOutcome.FAILED || MessageOutcome.REJECTED);\n      if(isNackRequired && !this._session.isCapable(CapabilityType.AD_APP_ACK_FAILED)) {\n        const outcomeNotSupportedError = `Session.capabilitySettlementOutcomeNotSupported: [ ${\n          settlementOutcomes.map(v => `solace.MessageOutcome.${MessageOutcome.nameOf(v)}`).join(', ')\n        } ]`;\n        // log the operation error as a Warning\n        LOG_WARN(outcomeNotSupportedError);\n        // then throw the error here\n        throw new OperationError(outcomeNotSupportedError, ErrorSubcode.INVALID_OPERATION, null);\n      }\n    }\n    const info = { guaranteedFlowObject: consumer };\n    // Will be added to the guaranteed flow collection by dispatching\n    this.processEvent(\n      new SessionFSMEvent({ name: SessionEventName.CREATE_SUBSCRIBER }, info)\n    );\n    return consumer;\n  }\n\n/**\n   * Creates a Queue Browser.\n   *\n   * @param {Object|QueueBrowserProperties} properties Properties for the queue browser.\n   *  Expected fields: {@link solace.QueueBrowserProperties}\n   * @returns {solace.QueueBrowser} The newly constructed queue browser\n   * @private\n   */\n  createQueueBrowser(properties) {\n    const { MessageConsumerAcknowledgeMode, QueueBrowser } = ConsumerLib;\n    const { LOG_DEBUG } = this.logger;\n\n    LOG_DEBUG(`Creating queue browser with properties:  ${properties}`);\n\n    const consumerProperties = {};\n    consumerProperties.queueDescriptor = properties.queueDescriptor;\n    consumerProperties.acknowledgeMode = MessageConsumerAcknowledgeMode.CLIENT;\n    consumerProperties.browser = true;\n\n    // Optional properties\n    if (Object.prototype.hasOwnProperty.call(properties, 'connectTimeoutInMsecs')) {\n      consumerProperties.connectTimeoutInMsecs = properties.connectTimeoutInMsecs;\n    }\n    if (Object.prototype.hasOwnProperty.call(properties, 'connectAttempts')) {\n      consumerProperties.connectAttempts = properties.connectAttempts;\n    }\n    if (Object.prototype.hasOwnProperty.call(properties, 'windowSize')) {\n      consumerProperties.windowSize = properties.windowSize;\n    }\n    if (Object.prototype.hasOwnProperty.call(properties, 'transportAcknowledgeTimeoutInMsecs')) {\n      consumerProperties.transportAcknowledgeTimeoutInMsecs =\n        properties.transportAcknowledgeTimeoutInMsecs;\n    }\n    if (Object.prototype.hasOwnProperty.call(properties, 'transportAcknowledgeThresholdPercentage')) {\n      consumerProperties.transportAcknowledgeThresholdPercentage =\n        properties.transportAcknowledgeThresholdPercentage;\n    }\n\n    const consumer = this.createMessageConsumer(consumerProperties);\n    const browser = new QueueBrowser(consumer);\n    return browser;\n  }\n\n  /**\n   * @param {String} msg The status message for the operation\n   * @param {Subcode} subcode The subcode reason for the operation\n   * @private\n   */\n  destroyTransportSession(msg, subcode) {\n    if (Check.nothing(this._transport)) {\n      // Just send the event\n      this.processEvent(\n        new SessionFSMEvent({ name: SessionEventName.TRANSPORT_DESTROYED })\n      );\n      return;\n    }\n    const { LOG_INFO, LOG_ERROR } = this.logger;\n    LOG_INFO('Destroy transport session');\n\n    const returnCode = this._transport.destroy(msg, subcode);\n    this._smfClient = null;\n\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      LOG_ERROR(`Failed to destroy transport session, return code: ${\n        TransportLib.TransportReturnCode.describe(returnCode)}`);\n    }\n  }\n\n\n  /**\n   * Release all resources associated with the session.\n   * @private\n   */\n  disposeInternal() {\n    if (this._disposed) {\n      return;\n    }\n\n    const operations = {\n      'transport': () => {\n        this.destroyTransportSession('Disposing', 0);\n        this._transport = null;\n        this._smfClient = null;\n      },\n      'session': () => {\n        this.cleanupSession();\n        this._session = null;\n        this._sessionProperties = null;\n        this._correlatedReqs = null;\n        this._flowInterfaceFactory = null;\n      },\n      'statistics': () => {\n        if (this._sessionStatistics) {\n          this._sessionStatistics.resetStats();\n          this._sessionStatistics = null;\n        }\n        this._kaStats = null;\n      },\n      'subscription cache': () => {\n        if (this._subscriptionCache) {\n          Object.keys(this._subscriptionCache).forEach(\n            key => this.removeFromSubscriptionCache(key)\n          );\n          this._subscriptionCache = null;\n        }\n        this.clearSubscriptionCacheKeys();\n        this._subscriptionCacheCount = 0;\n      },\n      'MessagePublishers': () => {\n        if (this._defaultPublisher) {\n          this._defaultPublisher.dispose();\n          this._defaultPublisher = null;\n        }\n      },\n      'MessageConsumers': () => {\n        this._consumers.disposeAll();\n        this._consumers = null;\n      },\n      'host list': () => {\n        this._currentHost = null;\n        this._hosts = null;\n      },\n    };\n\n    Object.keys(operations).forEach((operationKey) => {\n      const { LOG_TRACE, LOG_INFO } = this.logger;\n      const operation = operations[operationKey];\n      try {\n        LOG_TRACE(`Dispose: ${operationKey}`);\n        operation();\n        LOG_TRACE(`Dispose: ${operationKey} succeeded`);\n      } catch (ex) {\n        LOG_INFO(`Dispose: ${operationKey} failed:`, ex, '...continuing');\n      }\n    });\n    this._disposed = true;\n  }\n\n  emitSessionEvent(event) {\n    // Don't log here; callee does it\n    this._session.sendEvent(event);\n  }\n\n  /**\n   * @param {Number} correlationTag The correlation tag\n   * @param {function} reqTimeoutCb The timeout callback\n   * @param {Number} reqTimeout The timeout in milliseconds\n   * @param {Object} correlationKey The correlation key\n   * @param {function} respRecvCallback The success callback\n   * @private\n   */\n  enqueueOutstandingCorrelatedReq(correlationTag,\n                                  reqTimeoutCb,\n                                  reqTimeout,\n                                  correlationKey,\n                                  respRecvCallback) {\n    if (Check.nothing(correlationTag)) {\n      return;\n    }\n\n    const { LOG_INFO } = this.logger;\n    LOG_INFO(`Enqueue outstanding ctrl request correlationTag=${correlationTag}`);\n    let timer = null;\n    if (reqTimeoutCb) {\n      timer = setTimeout(reqTimeoutCb, reqTimeout || this._sessionProperties.readTimeoutInMsecs);\n    }\n\n    const outstandingReq = new CorrelatedRequest(correlationTag,\n      timer,\n      correlationKey,\n      respRecvCallback);\n    this._correlatedReqs[correlationTag] = outstandingReq;\n  }\n\n  /**\n   * @param {String} errorEventText Description of the error\n   * @param {ErrorSubcode} errorSubcode Subcode for the error\n   * @param {String} [eventReason] The reason for the error\n   * @returns {undefined}\n   * @memberof SessionFSM\n   * @private\n   */\n  errorInFsm(errorEventText, errorSubcode, eventReason = null) {\n    const { LOG_INFO } = this.logger;\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.EXCEPTION });\n    LOG_INFO(`Handling error in FSM: ${errorEventText} ${eventReason && eventReason.stack}`);\n    this.setCurrentError({\n      eventText: errorEventText,\n      errorSubcode,\n      eventReason,\n    });\n    return this.processEvent(sEvent);\n  }\n\n  flushTransportSession(callback) {\n    if (this._transport) {\n      this._transport.flush(callback);\n    } else {\n      callback();\n    }\n  }\n\n  /**\n   * @returns {Number} The next correlation tag\n   * @private\n   */\n  getCorrelationTag() {\n    return this._smfClient.nextCorrelationTag();\n  }\n\n  /**\n   * Get current state name\n   * @returns {String} The name of the current state, or SessionStateName.DISPOSED if the\n   *  FSM is terminated\n   * @private\n   */\n  getCurrentStateName() {\n    const currentState = this.getCurrentState();\n\n    if (!currentState) return null;\n    if (currentState === this.getFinalState()) return SessionStateName.DISPOSED;\n    return this.getCurrentState().getName();\n  }\n\n  /**\n   * Returns the value of a given {@link StatType}.\n   *\n   * @param {StatType} statType The statistic to query.\n   * @returns {?Number} The value for the given stat, if available\n   * @private\n   */\n  getStat(statType) {\n    if (this._sessionStatistics === undefined) {\n      return undefined;\n    }\n    //\n    // TX_TOTAL_DATA_MSGS and TX_TOTAL_DATA_BYTES are summary counters\n    // These stats are calculated as the sum of DIRECT/PERSISTENT/NONPERSISTENT\n    // counters.  This is by design since day one.  As such they do not include\n    // the count of redelivered messages/bytes as TX_PERSISTENT_MSGS and TX_NONPERSISTENT_MSGS\n    // only includes the counts of messages successfully delivered. This is not consistent\n    // with receive stats but it is what it is. This definition is consistent with the other\n    // existing APIs (CCSMP and JCSMP).\n    //\n    if (statType === StatType.TX_TOTAL_DATA_MSGS) {\n      return this._sessionStatistics.getStat(StatType.TX_DIRECT_MSGS) +\n        this._sessionStatistics.getStat(StatType.TX_PERSISTENT_MSGS) +\n        this._sessionStatistics.getStat(StatType.TX_NONPERSISTENT_MSGS);\n    } else if (statType === StatType.TX_TOTAL_DATA_BYTES) {\n      return this._sessionStatistics.getStat(StatType.TX_DIRECT_BYTES) +\n        this._sessionStatistics.getStat(StatType.TX_PERSISTENT_BYTES) +\n        this._sessionStatistics.getStat(StatType.TX_NONPERSISTENT_BYTES);\n    }\n    return this._sessionStatistics.getStat(statType);\n  }\n\n  /**\n   * Gets a transport session information string.\n   * This string is informative only, and applications should not attempt to parse it.\n   *\n   * @returns {String} The current status of the transport\n   */\n  getTransportInfo() {\n    if (Check.nothing(this._transport)) {\n      return 'Not connected.';\n    }\n    return this._transport.getInfoStr();\n  }\n\n  /**\n   * Handle an AD CTRL message given the message, its header, and the previously-identified\n   * candidate flow, which is used if the message has no correlation tag.\n   *\n   * @param {AdProtocolMessage} message The message to handle\n   * @param {SMFHeader} header The header of the message\n   * @returns {SessionFSM} This FSM.\n   * @private\n   */\n  handleADCtrlMessage(message, header) {\n    const flowId = message.getFlowId();\n    const respText = header.pm_respstr;\n    const correlationTag = header.pm_corrtag;\n    const { LOG_INFO, LOG_DEBUG, LOG_WARN } = this.logger;\n\n    if (correlationTag) {\n      // Correlation tag is non-null\n      // Session handles correlated request-reply\n      this.updateRxStats(message);\n\n      LOG_INFO(`Handle SMF response for correlationTag ${correlationTag}`);\n      // find matching correlationTag to cancel timer\n      const cancelledRequest = this.cancelOutstandingCorrelatedReq(correlationTag);\n      if (Check.nothing(cancelledRequest)) {\n        return this.errorInFsm(`Cannot find matching request for response: ${respText}`,\n                               ErrorSubcode.INTERNAL_ERROR);\n      }\n\n      if (cancelledRequest.respRecvdCallback) {\n        // call callback referenced by cancelledRequest\n        // login or update property\n        cancelledRequest.respRecvdCallback(message, cancelledRequest);\n        return this;\n      }\n\n      LOG_DEBUG(`Dropping ADCTRL message due to mismatched correlation tag ${correlationTag}`);\n      this.incStat(StatType.RX_REPLY_MSG_DISCARD);\n      return this;\n    }\n\n    // Unsolicited control message\n    let flow;\n    const msgType = message.msgType;\n    const { SMFAdProtocolMessageType } = SMFLib;\n    switch (msgType) {\n      case SMFAdProtocolMessageType.CLIENTACK:\n      case SMFAdProtocolMessageType.CLIENTNACK:\n      case SMFAdProtocolMessageType.CLOSEPUBFLOW:\n        if (this._defaultPublisher.flowId === flowId) {\n          flow = this._defaultPublisher;\n        } // else drop.\n        break;\n      default:\n        flow = this._consumers.getFlowById(flowId);\n    }\n\n    if (flow && !flow.disposed) {\n      // Found a matching flow\n      this.updateRxStats(message, flow);\n      flow.handleUncorrelatedControlMessage(message);\n      return this;\n    }\n\n    // No matching flow\n    const response = message.getResponse();\n    const rc = response ? `\"${response.responseCode} ${response.responseString}\" ` : '';\n    LOG_WARN(\n      `Dropping ADCTRL.${SMFLib.SMFAdProtocolMessageType.describe(message.msgType)\n      } ${rc}for unknown flow ${flowId}`\n    );\n    this.incStat(StatType.RX_DISCARD_NO_MATCHING_CONSUMER);\n    //If Flow Change Update, respond with \"400 Unknown Flow Id\".\n    if (msgType === SMFAdProtocolMessageType.FLOWCHANGEUPDATE) {\n      const respMsg = SMFLib.AdProtocolMessage.getFlowChangeUpdateResponse(this._flowId, message.getActiveFlow(), \"Unknown Flow Id\");\n      const returnCode = this.sendControl(respMsg);\n      if (TransportLib.TransportReturnCode.OK != returnCode) {\n        LOG_DEBUG(`Failed to send Flow Change Update response for unknown flowId ${flowId}: ${returnCode}`);\n      }\n    }\n    return this;\n  }\n\n  /**\n   * @param {solace.Message} message The AD data message to handle\n   * @param {SMFHeader} header The header for the message\n   * @returns {MessageConsumer} The flow that handled the message, or `null`\n   * @private\n   */\n  handleADTrMessage(message, header) {\n    const { LOG_DEBUG } = this.logger;\n    const flowId = header.pm_ad_flowid;\n    // Get a flow from that ID if possible.\n    const flow = this._consumers.getFlowById(flowId);\n    if (!flow || flow.disposed) {\n      LOG_DEBUG('Dropped incoming AD message for ' +\n                `${flow ? 'disposed' : 'unknown'} flow ID ${flowId}`);\n      this.updateRxStats(message, this._sessionStatistics);\n      this.incStat(StatType.RX_DISCARD_NO_MATCHING_CONSUMER);\n      return null;\n    }\n    this.updateRxStats(message, flow);\n    flow.handleDataMessage(message);\n    return flow;\n  }\n\n  /**\n   * @param {String} correlationTag The correlation tag for the timed out subscription request\n   * @param {String} [timeoutMsg] The reason for the timeout\n   * @private\n   */\n  handleApiSubscriptionTimeout(correlationTag, timeoutMsg) {\n    // remove request from queue\n    if (this._correlatedReqs[correlationTag] === undefined ||\n        this._correlatedReqs[correlationTag] === null) {\n      return;\n    }\n\n    const { LOG_INFO, LOG_ERROR } = this.logger;\n    LOG_INFO(`${timeoutMsg || 'Subscription timeout'} for correlationTag=${correlationTag}`);\n    try {\n      const result = delete this._correlatedReqs[correlationTag];\n      if (!result) {\n        LOG_ERROR(`Cannot delete ctrl request ${correlationTag}`);\n      }\n    } catch (e) {\n      LOG_ERROR(`Cannot delete ctrl request ${correlationTag}, exception: ${e.message}`);\n    }\n  }\n\n  /**\n   * @param {ClientCtrlMessage} message The message to handle\n   * @param {SMFHeader} header The header from the message\n   * @returns {undefined}\n   * @private\n   */\n  handleClientCtrlMessage(message, header) {\n    let correlationTag;\n    const { LOG_INFO } = this.logger;\n    this.updateRxStats(message);\n    if (message.msgType === SMFLib.SMFClientCtrlMessageType.LOGIN) {\n      // Currently, login requests don't use a correlation tag.\n      // Using here a fake internal one to match the request.\n      correlationTag = TransportLib.SMFClient.SMF_CLIENTCTRL_LOGIN_FAKE_CORRELATIONTAG;\n      LOG_INFO('Handle SMF response for ClientCTRL Login');\n    } else {\n      correlationTag = header.pm_corrtag;\n      LOG_INFO(`Handle SMF response for correlationTag ${correlationTag}`);\n    }\n    // find matching correlationTag to cancel timer\n    const cancelledRequest = this.cancelOutstandingCorrelatedReq(correlationTag);\n    if (Check.nothing(cancelledRequest)) {\n      const respText = header.pm_respstr;\n      return this.errorInFsm(`Cannot find matching request for response: ${respText}`,\n                             ErrorSubcode.INTERNAL_ERROR);\n    } else if (cancelledRequest.respRecvdCallback) {\n      // call callback referenced by cancelledRequest\n      // login or update property\n      return cancelledRequest.respRecvdCallback(message);\n    }\n\n    LOG_INFO(`Dropping ClientCtrl message due to mismatched correlation tag ${correlationTag}`);\n    return this.incStat(StatType.RX_REPLY_MSG_DISCARD);\n  }\n\n  /**\n   * @param {ClientCtrlMessage} clientCtrlMsg The message to handle\n   * @private\n   */\n  handleClientCtrlResponse(clientCtrlMsg) {\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.TRANSPORT_PROTOCOL_CLIENTCTRL });\n    sEvent.smfMsg = clientCtrlMsg;\n    this.processEvent(sEvent);\n  }\n\n  /**\n   * @private\n   */\n  handleClientCtrlTimeout() {\n    const { LOG_INFO } = this.logger;\n    LOG_INFO('ClientCtrl timeout for session');\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.DOWNGRADE_TIMEOUT });\n    this.processEvent(sEvent);\n  }\n\n\n  /**\n   * @private\n   */\n  handleConnectTimeout() {\n    const { LOG_INFO } = this.logger;\n    LOG_INFO('Connection timeout. Disconnecting');\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.CONNECT_TIMEOUT });\n    this.processEvent(sEvent);\n  }\n\n  /**\n   * Handle control request timeout\n   * @param {String} correlationTag The correlation tag for the timed out operation\n   * @param {String} timeoutMsg The message associated with the timeout\n   * @private\n   */\n  handleUpdatePropertyTimeout(correlationTag, timeoutMsg) {\n    const { LOG_ERROR } = this.logger;\n    // remove request from queue\n    try {\n      const result = delete this._correlatedReqs[correlationTag];\n      if (!result) {\n        LOG_ERROR(`Cannot delete ctrl request ${correlationTag}`);\n      }\n    } catch (e) {\n      LOG_ERROR(`Cannot delete ctrl request ${correlationTag}, exception: ${e.message}`);\n    }\n\n    // notify client\n    const sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                            timeoutMsg,\n                                            null,\n                                            ErrorSubcode.TIMEOUT,\n                                            null,\n                                            null);\n    this.sendEvent(sessionEvent);\n  }\n\n  /**\n   * @param {SMFHeader} header The header from the rejected message\n   * @private\n   */\n  handleRejectedTrMessage(header) {\n    // It is trmsg response. For direct message, it must be a failure response\n    const respCode = header.pm_respcode;\n    // Strip a trailing null character.\n    const topicNameRaw = header.pm_tr_topicname_bytes;\n    const topicName = topicNameRaw ? topicNameRaw.replace(/\\0/g, '') : '';\n    const respText = header.pm_respstr;\n    const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(respCode, respText);\n    this.emitSessionEvent(SessionEvent.build(\n      SessionEventCode.REJECTED_MESSAGE_ERROR,\n      respText,\n      respCode,\n      errorSubcode,\n      null, //correlation key\n      `Topic: ${topicName}`)\n    );\n  }\n\n  /**\n   * @param {solace.Message} message The SMF message to handle\n   * @returns {undefined}\n   * @private\n   */\n  handleSMFMessage(message) {\n    try {\n      // Stats for this message might affect both the session and the flow. Need to\n      // determine where the message is handled before handling stats.\n      // Some ADCTRL messages have no flow ID but only a correlation tag.\n      // These are OPENFLOW and we count them as handled by the session.\n\n      const header = message.smfHeader;\n\n      if (header.discardMessage) {\n        // UH==2 on an unknown parameter\n        if (this._sessionStatistics) {\n          this._sessionStatistics.incStat(StatType.RX_DISCARD_SMF_UNKNOWN_ELEMENT);\n        }\n        // do nothing.\n        return null;\n      }\n\n      // Each message type handler must call this.updateRxStats(message, target).\n      // The direct/TRmsg path includes the call here in the switch.\n      switch (header.smf_protocol) {\n        case SMFLib.SMFProtocol.TRMSG:\n          if (header.smf_adf) {\n            return this.handleADTrMessage(message, header);\n          }\n          this.updateRxStats(message, this._sessionStatistics);\n          return header.pm_respcode === 0\n            ? this._session.handleDataMessage(message)\n            : this.handleRejectedTrMessage(header);\n\n        case SMFLib.SMFProtocol.ADCTRL:\n         // console.log('ADCTRL message:');\n         // console.log(message);\n          return this.handleADCtrlMessage(message, header);\n\n        case SMFLib.SMFProtocol.CLIENTCTRL:\n          return this.handleClientCtrlMessage(message, header);\n\n        case SMFLib.SMFProtocol.SMP:\n          return this.handleSMPMessage(message, header);\n\n        case SMFLib.SMFProtocol.KEEPALIVE:\n        case SMFLib.SMFProtocol.KEEPALIVEV2:\n          // do nothing\n          return null;\n\n        default:\n          return this.handleUnknownProtocolMessage(message, header);\n      }\n    } catch (e) {\n      const { LOG_ERROR } = this.logger;\n      LOG_ERROR(`Exception in handleSMFMessage, exception: ${e.stack}`);\n      return this.errorInFsm(`Exception in handleSMFMessage: ${e.message}`,\n                             e.subcode || ErrorSubcode.INTERNAL_ERROR,\n                             e);\n    }\n  }\n\n  /**\n   * @param {TransportError} transportError The SMF parsing error passed from the transport\n   * @returns {undefined}\n   * @private\n   */\n  handleSMFParseError(transportError) {\n    // fatal connection error\n\n    // notify client\n    return this.errorInFsm(transportError,\n                           ErrorSubcode.PROTOCOL_ERROR);\n  }\n\n  handleSMPMessage(message, header) {\n    this.updateRxStats(message);\n\n    // find matching correlationTag to cancel timer\n    const cancelledRequest = this.cancelOutstandingCorrelatedReq(header.pm_corrtag || '');\n    /*\n     * If we find the correlationTag and it has a callback associated with it\n     * then call that callback.  It is likely calling back straight to the application\n     * due to a call to session.subscribe() or session.unsubscribe() or\n     * session.updateProperty().\n     * Otherwise just send a TRANSPORT_PROTOCOL_SMP event to the FSM.\n     */\n    if (Check.nothing(cancelledRequest) || Check.nothing(cancelledRequest.respRecvdCallback)) {\n      /*\n       * correlation tag not found, probably an error response to a subscription\n       * request that did not request-confirm,  or it could be one of the\n       * FSM generated subscriptions and the callback is the anonymous function\n       * in state WaitingForSubConfirmm\n       */\n      const sEvent = new SessionFSMEvent({ name: SessionEventName.TRANSPORT_PROTOCOL_SMP });\n      sEvent.smfMsg = message;\n      return this.processEvent(sEvent);\n    }\n\n    // calling through the callback, this should  be a callback in the _session for\n    // applicated generated subscribe/unsubscribe/updateProperty(clientName)\n    return cancelledRequest.respRecvdCallback(message, cancelledRequest);\n  }\n\n  /**\n   * @param {Number} respCode The router response code\n   * @param {String} respText The router response text\n   * @param {String} subscriptionStr The subscription cache key\n   * @param {CorrelatedRequest} request The associated request\n   * @param {Boolean} confirm Whether the user wanted confirmation for the request\n   * @private\n   */\n  handleSubscriptionUpdateError(respCode, respText, subscriptionStr, request, confirm) {\n    const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(respCode, respText);\n\n    //\n    // if it is a not-found or already-present error, it does not affect our subscription\n    // cache, otherwise remove it from the cache.\n    //\n    if (!(errorSubcode === ErrorSubcode.SUBSCRIPTION_ALREADY_PRESENT ||\n      errorSubcode === ErrorSubcode.SUBSCRIPTION_NOT_FOUND)) {\n      // remove from cache\n      this.removeFromSubscriptionCache(subscriptionStr);\n    }\n\n    //\n    // notify the client\n    //\n    this._session.handleSubscriptionUpdateError(respCode,\n                                                respText,\n                                                subscriptionStr,\n                                                request,\n                                                confirm);\n  }\n\n  /**\n   * @param {String} correlationTag The correlation tag for the timed out request\n   * @private\n   */\n  handleSubscriptionTimeout(correlationTag) {\n    // remove request from queue\n    const { LOG_ERROR } = this.logger;\n    try {\n      let result = false;\n      if(this._correlatedReqs) {\n        result = delete this._correlatedReqs[correlationTag];\n      }\n      if (!result) {\n        LOG_ERROR(`Cannot delete ctrl request ${correlationTag}`);\n      }\n    } catch (e) {\n      LOG_ERROR(`Cannot delete ctrl request ${correlationTag}`, e);\n    }\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.SUBSCRIBE_TIMEOUT });\n    this.processEvent(sEvent);\n  }\n\n  /**\n   * @param {TransportSessionEvent} transportEvent The event to handle\n   * @returns {undefined}\n   * @private\n   */\n  handleTransportEvent(transportEvent) {\n    const { LOG_INFO, LOG_WARN } = this.logger;\n    const infoStr = transportEvent.getInfoStr() || '';\n    LOG_INFO(`Receive transport event: ${transportEvent}`);\n\n    let sEvent;\n\n    switch (transportEvent.getTransportEventCode()) {\n      case TransportLib.TransportSessionEventCode.UP_NOTICE:\n        sEvent = new SessionFSMEvent({ name: SessionEventName.TRANSPORT_UP });\n        sEvent.sessionId = transportEvent.getSessionId();\n        this.processEvent(sEvent);\n        break;\n\n      case TransportLib.TransportSessionEventCode.DESTROYED_NOTICE:\n        sEvent = new SessionFSMEvent({ name: SessionEventName.TRANSPORT_DESTROYED });\n        sEvent.sessionId = transportEvent.getSessionId();\n        sEvent.eventText = infoStr;\n        sEvent.errorSubcode = transportEvent.getSubcode();\n        sEvent.eventReason = transportEvent;\n        this._smfClient = null; // calling reset does nothing useful here\n        this._transport = null; // transport has been destroyed\n        this.processEvent(sEvent);\n        break;\n\n      case TransportLib.TransportSessionEventCode.CAN_ACCEPT_DATA:\n        //\n        // unblock the publisher too\n        this.GuaranteedFlowControlledRelief();\n        sEvent = new SessionFSMEvent({ name: SessionEventName.TRANSPORT_CAN_ACCEPT_DATA });\n        sEvent.sessionId = transportEvent.getSessionId();\n        this.processEvent(sEvent);\n        break;\n\n      case TransportLib.TransportSessionEventCode.SEND_ERROR:\n        sEvent = new SessionFSMEvent({ name: SessionEventName.SEND_ERROR });\n        sEvent.sessionId = transportEvent.getSessionId();\n        sEvent.eventText = transportEvent.getInfoStr();\n        sEvent.errorSubcode = transportEvent.getSubcode();\n        sEvent.eventReason = transportEvent;\n        this.processEvent(sEvent);\n        break;\n\n      case TransportLib.TransportSessionEventCode.DATA_DECODE_ERROR:\n      case TransportLib.TransportSessionEventCode.PARSE_FAILURE:\n        // fatal connection error\n        return this.errorInFsm(transportEvent.getInfoStr(),\n                               transportEvent.getSubcode());\n      default:\n        LOG_WARN('Received unknown transport session event', transportEvent);\n    }\n\n    return true;\n  }\n\n  /**\n   * @param {BaseMessage|Message} message The message to handle\n   * @param {SMFHeader} [header] The SMF header from the message, if available\n   * @returns {undefined}\n   * @private\n   */\n  handleUnknownProtocolMessage(message, header) {\n    const { LOG_INFO, LOG_ERROR } = this.logger;\n    // unknown protocol\n    this.updateRxStats(message);\n    if (header && header.smf_protocol === SMFLib.SMFProtocol.TSESSION) {\n      // change state\n      LOG_ERROR(`Received transport session message instead of SMF message, protocol 0x${\n        formatHexString(header.smf_protocol)}`);\n      LOG_ERROR(`Transport MessageType=${message.messageType}, target sessionId=${\n        formatHexString(message.sessionId)}`);\n      // notify client\n      return this.errorInFsm('Received message with unknown protocol',\n                             ErrorSubcode.PARSE_FAILURE);\n    }\n\n    // Drop message of unknown protocol and increment stats\n    if (this._sessionStatistics) {\n      this._sessionStatistics.incStat(StatType.RX_DISCARD_SMF_UNKNOWN_ELEMENT);\n    }\n    LOG_INFO(`Drop message with unknown protocol 0x${formatHexString(header.smf_protocol)}`);\n    return null;\n  }\n\n\n  /**\n   * Increments a session statistic\n   *\n   * @param {StatType} statType The key to increment\n   * @param {?Number} value The amount to increment the value by\n   * @returns {?Number} The new value for the statistic\n   * @private\n   */\n  incStat(statType, value) {\n    return this._sessionStatistics ? this._sessionStatistics.incStat(statType, value) : undefined;\n  }\n\n  /**\n   * @private\n   */\n  initTransport() {\n    const { LOG_INFO } = this.logger;\n    const host = this._currentHost;\n    LOG_INFO(`Creating transport session ${host}`);\n    this._kaStats = { lastMsgWritten: 0, lastBytesWritten: 0 };\n\n    this._smfClient = new TransportLib.SMFClient(\n      rxData => this.handleSMFMessage(rxData),\n      rxError => this.handleSMFParseError(rxError),\n      this\n    );\n\n    this._transport = TransportLib.TransportFactory.createTransport(\n      host,\n      transportEvent => this.handleTransportEvent(transportEvent),\n      this._smfClient,\n      this._sessionProperties.clone(),\n      () => this.sessionIdHex\n    );\n    this.injectTransportInterceptor(this._transportInterceptor);\n  }\n\n  /**\n   * Installs a transport interceptor for the current and any future transports.\n   *\n   * The object methods .installed(instance) and .removed(instance) will be called if present, with\n   * the transport instance as a parameter.\n   *\n   * To stop using transport interceptors, supply a null interceptor argument.\n   *\n   * @param {Object} interceptor An object given access to the internals of the transport instance.\n   * @private\n   */\n  injectTransportInterceptor(interceptor) {\n    this._transportInterceptor = interceptor;\n    if (this._transport) {\n      this._transport.setInterceptor(interceptor);\n    }\n  }\n\n  /**\n   * Call from keep alive scheduled task\n   * @returns {undefined}\n   * @private\n   */\n  keepAliveTimeout() {\n    const { LOG_TRACE, LOG_DEBUG, LOG_INFO } = this.logger;\n    LOG_TRACE('KeepAlive timeout');\n\n    // session is in connected state but hasn't received keep alive response\n    // Less than or equal to because this is the number of *already sent* KAs\n    if (this._keepAliveCounter >= this._sessionProperties.keepAliveIntervalsLimit) {\n      LOG_INFO(`Exceed maximum keep alive intervals limit ${\n                this._sessionProperties.keepAliveIntervalsLimit}`);\n      // stop timers\n      LOG_DEBUG('Stop keep alive timer');\n      if (this._keepAliveTimer) {\n        clearInterval(this._keepAliveTimer);\n      }\n\n      // change session state\n      return this.errorInFsm('Exceed maximum keep alive intervals limit',\n                             ErrorSubcode.KEEP_ALIVE_FAILURE);\n    }\n\n    LOG_TRACE('About to send keep alive');\n\n    const clientStats = this._transport.getClientStats();\n    const prestatMsgWritten = clientStats.msgWritten;\n    const prestatBytesWritten = clientStats.bytesWritten;\n\n    const kaMsg = new SMFLib.KeepAliveMessage();\n    const returnCode = this.send(kaMsg, null, true);\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      /*\n       * TransportReturnCode.NO_SPACE is not possible.\n       * Send is called with the forceAllowEnqueue parameter.\n       * So whatever error is returned is fatal\n       */\n      return this.errorInFsm('Cannot send keep alive message',\n                             ErrorSubcode.KEEP_ALIVE_FAILURE);\n    }\n\n    // We need to avoid incrementing the KA counter if we're in the process of\n    // sending a huge message and we've had no opportunity to write a KA message.\n    // Detection: last KA's snapshot of messages written is unchanged, but number of bytes\n    // written has gone up.\n    if (this._kaStats.lastMsgWritten === prestatMsgWritten &&\n      this._kaStats.lastBytesWritten < prestatBytesWritten) {\n      LOG_DEBUG('Keep alive sent',\n                'Not incrementing keep alive counter due to large message send',\n                `KA count = ${this._keepAliveCounter}`\n      );\n    } else {\n      this._keepAliveCounter++;\n      LOG_TRACE(`Last message written: ${this._kaStats.lastMsgWritten}`);\n      LOG_TRACE(`Last bytes written: ${this._kaStats.lastBytesWritten}`);\n      LOG_TRACE(`Keep alive sent, increment keep alive counter, keep alive count = ${\n        this._keepAliveCounter}`);\n    }\n    this._kaStats.lastBytesWritten = clientStats.bytesWritten;\n    this._kaStats.lastMsgWritten = clientStats.msgWritten;\n\n    return true;\n  }\n\n  /**\n   * Prepares a message for sending and then invoke the transport\n   * send method. For guaranteed messages, pass the transport send\n   * method to the publisher so it can be invoked from there and errors\n   * handled within the publisher FSM.\n   * @param {BaseMessage} message The message to prepare.\n   * @private\n   */\n  prepareAndSendMessage(message) {\n    const {LOG_WARN, LOG_DEBUG} = this.logger\n    if (message instanceof Message) {\n      let returnCode;\n      // Delegate message preparation where appropriate\n      // compress payload if session property is enabled\n      if (this._sessionProperties.payloadCompressionLevel > 0 && ((Check.anything(message._binaryAttachment) && message._binaryAttachment.length > 0) || Check.anything(message._structuredContainer)) ){\n        let compressedAttachment;\n        let origSize = 0;\n        try {\n          if (BUILD_ENV.TARGET_NODE){\n            const options = {\n              level: this._sessionProperties.payloadCompressionLevel,\n              flush: zlib.constants.Z_FINISH\n            };\n            if(Check.anything(message.getSdtContainer())){\n              // const encodedContainer = SDTCodec.encodeSingleElement(message._structuredContainer);\n              const encodedContainer = SDTCodec.encodeSingleElement(message.getSdtContainer());\n              origSize = encodedContainer.length;\n              compressedAttachment = zlib.deflateSync(encodedContainer, options);\n\n            } else {\n              origSize = message._binaryAttachment.length;\n              compressedAttachment = zlib.deflateSync(message._binaryAttachment, options);\n            }\n          } else { //browser\n            const options = {\n              level: this._sessionProperties.payloadCompressionLevel,\n              flush: fflate.Z_FINISH\n            };\n            if(Check.anything(message.getSdtContainer())){\n              const encodedContainer = SDTCodec.encodeSingleElement(message.getSdtContainer());\n\n              const textEncoded = anythingToBuffer(encodedContainer);\n              origSize = textEncoded.length;\n              compressedAttachment = fflate.zlibSync(textEncoded, options);\n            } else {\n              origSize = message._binaryAttachment.length;\n              compressedAttachment = fflate.zlibSync(message._binaryAttachment, options);\n            }\n            compressedAttachment = anythingToBuffer(compressedAttachment);\n          }\n          \n          // This does not consider the size growth from adding \"deflate\" to the ce.\n          // If there alread was a ce: \", deflate\".length = 9 bytes.\n          // If there was no ce but there already was something else in the header map: 15 bytes.\n          // If there was nothing in the header map nor the user property map: 47 bytes.\n          // (use testContext.m_session.getStat(solace.StatType.TX_TOTAL_DATA_BYTES) in a test to \t)\n          if (compressedAttachment.length + 9 < origSize) {\n            message._setCompressedBinaryAttachment(compressedAttachment);\n            Check.nothing(message.getHttpContentEncoding()) ? message._compressedCE = \"deflate\" : message._compressedCE = message.getHttpContentEncoding() + \", deflate\";\n          } else {\n            // It would be nice to cache the encodedContainer instead of re-encoding it right away.\n            LOG_DEBUG(\"Not compressing because it grows the payload! \"+ origSize + \" -> \"+ compressedAttachment.length + \"+ 9\");\n          }\n        } catch(err) {\n          // if error occurred when compressing pass the normal binary attachment\n          LOG_WARN(\"Error occurred while compressing, message attachment was not compressed. Original attachment will be sent. \", err);\n        }\n      }\n    \n      const deliveryMode = message.getDeliveryMode();\n      switch (deliveryMode) {\n\n        case MessageDeliveryModeType.DIRECT:\n          if (!this._transport) return;\n          message._payload_is_memoized = false;\n          message._memoized_csumm = null;\n          message._memoized_payload = null;\n          returnCode = this.sendToTransport(message);\n          break;\n\n        case MessageDeliveryModeType.PERSISTENT:\n        case MessageDeliveryModeType.NON_PERSISTENT:\n          if (!this._defaultPublisher) {\n            const reason = this._session.adLocallyDisabled\n                ? 'locally disabled'\n                : 'remotely unsupported';\n            throw new OperationError('Session does not provide Guaranteed Message Publish capability',\n                                       ErrorSubcode.GM_UNAVAILABLE,\n                                       reason);\n          } else {\n            if (this._gmSendDisallowed) this._gmSendDisallowed(); // throws if present\n            returnCode = this._defaultPublisher.prepareAdMessageAndSend(message);\n          }\n          break;\n\n        default: {\n          const { LOG_ERROR } = this.logger;\n          LOG_ERROR('Unhandled message delivery mode', MessageDeliveryModeType.describe(deliveryMode));\n        }\n      }\n      // Clear internal-use field to free up memory and allow message object reuse by client code.\n      if (Check.anything(message._getCompressedBinaryAttachment())){\n        message._setCompressedBinaryAttachment();\n      }\n      delete message._compressedCE;\n\n      if (returnCode !== TransportLib.TransportReturnCode.OK) {\n        if (returnCode === TransportLib.TransportReturnCode.NO_SPACE) {\n          // Must be DIRECT message because the Publisher handles NO_SPACE returnCode\n          // internally\n          this._userBackpressured = true;\n          throw new OperationError('Cannot send message - no space in transport',\n            ErrorSubcode.INSUFFICIENT_SPACE,\n            TransportLib.TransportReturnCode.describe(returnCode));\n        }\n\n        // This is a fatal session error\n        this.setCurrentError(new OperationError('Cannot send message',\n            ErrorSubcode.INVALID_OPERATION,\n            TransportLib.TransportReturnCode.describe(returnCode)));\n        this.processEvent(new SessionFSMEvent({ name: SessionEventName.EXCEPTION }));\n      }\n    \n    }\n  }\n\n  GuaranteedFlowControlledRelief() {\n    if (this._defaultPublisher) {\n      this._defaultPublisher.processFSMEvent(\n        new PublisherLib.PublisherFSMEvent({\n          name: PublisherLib.PublisherFSMEventNames.CAN_SEND }));\n    }\n  }\n  /**\n   * Reapply subscriptions.\n   * @returns {Boolean} True if all subscriptions were reapplied. False if WOULD_BLOCK.\n   * @private\n   */\n  reapplySubscriptions() {\n    const { LOG_INFO, LOG_DEBUG } = this.logger;\n    const { SolclientFactory: { createTopicDestination } } = SolclientFactoryLib;\n    LOG_INFO(`Reapplying subscriptions, count=${this._subscriptionCacheKeys.length}`);\n    // add subscriptions and ask for confirm on last one\n\n    if (!this._subscriptionCacheKeys) {\n      // Nothing to do\n      return true;\n    }\n\n    try {\n      while (this._subscriptionCacheKeys.length) {\n        //\n        // The key is the topic string (topic.getName()).\n        // sendSubscribe() requires a destination, so we encode it here.\n        //\n        // on entry to reapplySubscriptions we added the P2P topic to\n        // subscriptionCacheKeys but there is no corresponding entry in\n        // _subscriptionCache so we no longer use the key to index that actual\n        // cache.\n        // If it becomes necesary to pass the Topic object to sendSubscribe in a\n        // a future enhancement (perhaps to remember flags like request-confirm) then\n        // this logic here needs to be revisited.\n        const key = this._subscriptionCacheKeys.shift();\n        const requestConfirmation = this._subscriptionCacheKeys.length === 0;\n        const topicDestination = createTopicDestination(key);\n        const rc = this.sendSubscribe(topicDestination,\n                                      requestConfirmation,\n                                      null,\n                                      this._sessionProperties.readTimeoutInMsecs,\n                                      null);\n        if (rc !== TransportLib.TransportReturnCode.OK) {\n          this.errorInFsm(\n            `Error occurred sending subscription: ${TransportLib.TransportReturnCode.describe(rc)}`,\n            ErrorSubcode.INTERNAL_ERROR\n          );\n        }\n      }\n    } catch (e) {\n      if (e instanceof OperationError && e.subcode === ErrorSubcode.INSUFFICIENT_SPACE) {\n        LOG_DEBUG('Apply subscriptions blocked due to insufficient space, wait for can accept data event');\n        return false;\n      }\n      this.errorInFsm(`Unexpected expection occurred while reapplying subscriptions: ${e}`,\n                      e.subcode || ErrorSubcode.INTERNAL_ERROR,\n                      e);\n    }\n    return true;    // sent all subscriptions\n  }\n\n\n  /**\n   * @param {Destination} topic The topic to remove from the subscription cache\n   * @returns {?Destination} The value in the subscription cache at that key\n   * @private\n   */\n  removeFromSubscriptionCache(topic) {\n    if (Check.nothing(topic) || !this._subscriptionCache) {\n      return null;\n    }\n\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n    const key = (topic instanceof Destination) ? topic.name : topic;\n    LOG_DEBUG(`Remove subscription ${key}`);\n    const sub = this._subscriptionCache[key];\n    if (sub === undefined || sub === null) {\n      return null;\n    }\n\n    try {\n      const result = delete this._subscriptionCache[key];\n      if (!result) {\n        LOG_ERROR(`Cannot remove subscription ${key}`);\n      } else {\n        this._subscriptionCacheCount--;\n      }\n    } catch (e) {\n      LOG_ERROR(`Cannot remove subscription ${key}`, e);\n    }\n    return sub;\n  }\n\n\n  /**\n   * Reset the FSM state and release all objects. This method is called once from\n   * SessionFSM.onInitial\n   * @private\n   */\n  reset() {\n    this.resetStats();\n\n    /**\n     * The following fields are disposed when disconnect is called\n     * and recreated when connect is called again.\n     */\n    this.sessionId = null;\n\n    // Need to reschedule keepAliveTimer when some other write operation happens\n    this._keepAliveTimer = null;\n    this.resetKeepAliveCounter();\n    this._correlatedReqs = {};\n\n    this._disposed = false;\n\n    this._smfClient = null;\n    this._kaStats = { lastMsgWritten: 0, lastBytesWritten: 0 };\n\n    /**\n     * The following fields are destroyed when dispose is called\n     * and cannot be reinitialized.\n     */\n    this._subscriptionCache = null;\n    this._subscriptionCacheKeys = null;\n    this._subscriptionCacheCount = 0;\n    if (this._sessionProperties.reapplySubscriptions) {\n      this._subscriptionCache = {};\n    }\n\n    // When negotiating the initial transport, we can fail and transparently reconnect.\n    // this.resetTransportProtocolHandler();\n    // this._lastKnownGoodTransport = null;\n\n    // event and error information\n    this._eventCode = null;\n    this._responseCode = null;\n    this.eventText = null;\n    this.errorSubcode = null;\n    this.eventReason = null;\n  }\n\n  /**\n   * @private\n   */\n  resetKeepAliveCounter() {\n    // Reset the KA counter. Called by the SMFClient on each SMF chunk received (whether full\n    // message or not).\n    this._keepAliveCounter = 0;\n  }\n\n  /**\n   * @returns {?} The result of calling resetStats().\n   * @private\n   */\n  resetStats() {\n    return this._sessionStatistics ? this._sessionStatistics.resetStats() : undefined;\n  }\n\n\n  /**\n   * Schedule keep alive task\n   * @private\n   */\n  scheduleKeepAlive() {\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n    const { keepAliveIntervalInMsecs } = this._sessionProperties;\n    if (keepAliveIntervalInMsecs === 0) {\n      // Keepalives disabled\n      return;\n    }\n\n    if (this._keepAliveTimer) {\n      clearInterval(this._keepAliveTimer);\n    }\n\n    this._keepAliveTimer = setInterval(() => {\n      try {\n        this.keepAliveTimeout();\n      } catch (e) {\n        LOG_ERROR('Error occurred in keepAliveTimeout', e);\n      }\n    }, keepAliveIntervalInMsecs);\n\n    LOG_DEBUG(`Create Keepalive timer with interval: ${keepAliveIntervalInMsecs}ms`);\n  }\n\n  /**\n   * Provide a method for the session object to use to send\n   * messages to the transport.  This method is only used internally by\n   * the FSM.  The session send() API should invoke sendToTransport() directly\n   * so errors are thrown back to the application.\n   *\n   * @param {solace.Message} message The message to send\n   * @param {Object} [statTarget=this._sessionStatistics] The sender of this message, for stats.\n   * @param {Boolean} [forceAllowEnqueue=false] Set to true to force enqueueing of control messages\n   *\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  send(message, statTarget = this._sessionStatistics, forceAllowEnqueue = false) {\n    try {\n      return this.sendToTransport(message, statTarget, forceAllowEnqueue);\n    } catch (ex) {\n      const { LOG_TRACE } = this.logger;\n      // The send operation threw (or we threw locally), which is always a SessionException.\n      LOG_TRACE(`Error sending message: ${ex.message}: ${ex.stack}`);\n      this.errorInFsm(`Send operation failed: ${ex.message}`,\n                      ex.subcode || ErrorSubcode.CONNECTION_ERROR);\n    }\n    return TransportLib.TransportReturnCode.CONNECTION_ERROR;\n  }\n\n  /**\n   * Provide a method for the session object to use to send\n   * messages to the transport.\n   *\n   * @param {solace.Message} message The message to send\n   * @param {Object} [statTarget=this._sessionStatistics] The sender of this message, for stats.\n   * @param {Boolean} [forceAllowEnqueue=false] Set to true to force enqueueing of control messages\n   *\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  sendToTransport(message, statTarget = this._sessionStatistics, forceAllowEnqueue = false) {\n    //const DebugLib = require('solclient-debug');\n    let returnCode = TransportLib.TransportReturnCode.CONNECTION_ERROR;\n\n    if (!this._transport) {\n      throw new OperationError('Transport has been destroyed', ErrorSubcode.INTERNAL_ERROR);\n    }\n    const content = SMFLib.Codec.Encode.encodeCompoundMessage(message);\n    //console.log(\"content:\");\n    //console.log(DebugLib.Debug.formatDumpBytes( content.toString('latin1'), true, 2));\n    returnCode = this._transport.send(content, forceAllowEnqueue);\n    switch (returnCode) {\n      case TransportLib.TransportReturnCode.OK:\n        this.updateTxStats(message, statTarget);\n        break;\n      case TransportLib.TransportReturnCode.NO_SPACE:\n        if (!forceAllowEnqueue) {\n          // This is allowed.\n          break;\n        }\n      // Else fall through\n      default:\n        throw new OperationError(`Transport returned ${TransportLib.TransportReturnCode.describe(returnCode)}`,\n          ErrorSubcode.INTERNAL_ERROR);\n    }\n\n    return returnCode;\n  }\n\n\n  /**\n   * Initiates the ClientCtrl handshake, called from transportSessionEvent callback\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  sendClientCtrlLogin() {\n    const { LOG_INFO, LOG_DEBUG, LOG_TRACE } = this.logger;\n\n    this._compressedTLS =\n      ((this._sessionProperties.compressionLevel > 0) &&\n        (this._currentHost.match(/tcps:/i) !== null));\n    this._plaintextTLS =\n      ((this._currentHost.match(/tcps:/i) !== null) &&\n        (this._sessionProperties.sslConnectionDowngradeTo === SslDowngrade.PLAINTEXT));\n    LOG_TRACE(`sendClientLogin plaintextTLS: ${this._plaintextTLS} _compressedTLS: ${this._compressedTLS}`);\n\n    // Don't use the correlation tag. For Login only, the router won't return it.\n    const clientCtrlMsg = SMFLib.ClientCtrlMessage.getLogin(this._sessionProperties,\n                                                            this._compressedTLS,\n                                                            this._plaintextTLS);\n    const returnCode = this.send(clientCtrlMsg);\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      this._responseCode = null;\n      this.eventReason = null;\n      // notify client\n      if (returnCode === TransportLib.TransportReturnCode.NO_SPACE) {\n        this.eventText = 'Cannot send client control - no space in transport';\n        this.errorSubcode = ErrorSubcode.INSUFFICIENT_SPACE;\n      } else {\n        LOG_INFO(`Cannot send client ctrl, return code\n          ${TransportLib.TransportReturnCode.describe(returnCode)}`);\n        this.eventText = 'Cannot send client ctrl';\n        this.errorSubcode = ErrorSubcode.INVALID_OPERATION;\n      }\n    } else {\n      // enqueue outstanding request, use a fake correlation tag for Login only\n      const correlationTag = TransportLib.SMFClient.SMF_CLIENTCTRL_LOGIN_FAKE_CORRELATIONTAG;\n      LOG_INFO(`Using internally correlationTag=${correlationTag} for tracking ClientCTRL Login`);\n      this.enqueueOutstandingCorrelatedReq(correlationTag,\n                                           null,\n                                           null,\n                                           null,\n                                           rxMsgObj => this.handleClientCtrlResponse(rxMsgObj));\n\n      LOG_DEBUG('Sent client ctrl');\n    }\n    return returnCode;\n  }\n\n  /**\n   *\n   * Internal method for sending subscriptions from SessionConnecting state (reapply or P2P-inbox)\n   *\n   * @param {Destination} topic The topic to subscribe\n   * @param {Boolean} requestConfirmation If true, expect a reply on success also\n   * @param {String} correlationKey The correlation key for the request\n   * @param {Number} requestTimeout The timeout for the request\n   * @param {function} respRecvdCallback The callback on reply received\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  sendSubscribe(topic, requestConfirmation, correlationKey, requestTimeout, respRecvdCallback) {\n    const { LOG_INFO, LOG_DEBUG } = this.logger;\n    assert(topic instanceof Destination, 'sendSubscribe requires a Destination, not a string');\n    LOG_DEBUG('Sending subscribe: ', topic, requestConfirmation, correlationKey);\n    const correlationTag = this.getCorrelationTag();\n    const smpMsg = SMFLib.SMPMessage.getSubscriptionMessage(correlationTag,\n                                                            topic,\n                                                            true, // set add == true\n                                                            requestConfirmation);\n    assert(smpMsg.encodedUtf8Subscription, 'Encoded SMP message was invalid');\n    const returnCode = this.send(smpMsg);\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      LOG_INFO('Subscribe failed', TransportLib.TransportReturnCode.describe(returnCode));\n      return returnCode;\n    }\n    if (requestConfirmation) {\n      this.enqueueOutstandingCorrelatedReq(\n        correlationTag,\n        () => this.handleSubscriptionTimeout(correlationTag),\n        requestTimeout || this._sessionProperties.readTimeoutInMsecs,\n        correlationKey,\n        respRecvdCallback);\n    }\n    return returnCode;\n  }\n\n  /**\n   *\n   * @param {MutableSessionProperty} mutableSessionProperty The property key to change\n   * @param {?} newValue The new value for the property\n   * @param {String} correlationKey The correlation key for the request\n   * @param {Number} requestTimeout The timeout for the request\n   * @param {function} respRecvdCallback The callback on response\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  sendUpdateProperty(mutableSessionProperty,\n                     newValue,\n                     correlationKey,\n                     requestTimeout,\n                     respRecvdCallback) {\n    const correlationTag = this._smfClient.nextCorrelationTag();\n    const smpMsg = SMFLib.ClientCtrlMessage.getUpdate(mutableSessionProperty,\n                                                      newValue,\n                                                      correlationTag);\n\n    const returnCode = this.send(smpMsg);\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      return returnCode;\n    }\n\n    this.enqueueOutstandingCorrelatedReq(\n      correlationTag,\n      () => this.handleUpdatePropertyTimeout(correlationTag),\n      requestTimeout || this._sessionProperties.readTimeoutInMsecs,\n      correlationKey,\n      respRecvdCallback);\n    return returnCode;\n  }\n\n  provisionEndpoint(queueDescriptior, queueProperties, correlationKey, callback) {\n    const { LOG_DEBUG } = this.logger;\n    const correlationTag = this._smfClient.nextCorrelationTag();\n    const message = SMFLib.AdProtocolMessage.getCreate(queueDescriptior, queueProperties, correlationTag);\n    LOG_DEBUG(\"Sending CREATE request\");\n    const rc = this.send(message);\n    if (rc !== TransportLib.TransportReturnCode.OK) {\n      LOG_INFO('Provision failed', TransportLib.TransportReturnCode.describe(rc));\n      return rc;\n    }\n    LOG_DEBUG(\"Saving correlation tag \" + correlationTag + \" for CREATE request\");\n    this.enqueueOutstandingCorrelatedReq(\n        correlationTag,\n        null, //timeout handler\n        0, // timeout in ms\n        correlationKey,\n        callback);\n  }\n\n  deprovisionEndpoint(queueDescriptior, correlationKey, callback) {\n    const { LOG_DEBUG } = this.logger;\n    const correlationTag = this._smfClient.nextCorrelationTag();\n    const message = SMFLib.AdProtocolMessage.getDelete(queueDescriptior, correlationTag);\n    LOG_DEBUG(\"Sending DELETE request\");\n    const rc = this.send(message);\n    if (rc !== TransportLib.TransportReturnCode.OK) {\n      LOG_INFO('Deprovision failed', TransportLib.TransportReturnCode.describe(rc));\n      return rc;\n    }\n\n    LOG_DEBUG(\"Saving correlation tag \" + correlationTag + \" for DELETE request\");\n    this.enqueueOutstandingCorrelatedReq(\n        correlationTag,\n        null, //timeout handler\n        0, // timeout in ms\n        correlationKey,\n        callback);\n  }\n\n  /**\n   * @private\n   */\n  setClientCtrlTimer() {\n    this.clearClientCtrlTimer();\n\n    this._clientCtrlTimer = setTimeout(() => this.handleClientCtrlTimeout(),\n                                       this._sessionProperties.transportDowngradeTimeoutInMsecs);\n  }\n\n  /**\n   * @private\n   */\n  setConnectTimer() {\n    this.clearConnectTimer();\n    // The hosts lists provides the wait time for inter-host timeouts.\n    // This timeout is for the entire list.\n    this._connectTimer = setTimeout(() => this.handleConnectTimeout(),\n                                    this._sessionProperties.connectTimeoutInMsecs);\n  }\n\n  /**\n   * Sets the error exit information for the FSM.\n   *\n   * This applies key-value pairs from properties to the current error object,\n   * but does not allow overwriting and does not allow assignment of null or undefined values.\n   *\n   * Only the following fields are relevant, any other fields transferred to currentError by this\n   * method are eventually ignored:\n   *    * eventText\n   *    * responseCode\n   *    * errorSubcode\n   *    * eventReason\n   *\n   * See SessionConnecting exitPoint 'errorExit'. This is the only place the information in\n   * currentError is extracted.\n   *\n   * Could be implemented as `\n   * this._currentError = Object.assign({}, filter(properties), this._currentError)\n   * `\n   * where `filter` is a key-value filter that works as described above.\n   *\n   * @param {Object} source An object with properties to be applied\n   */\n  setCurrentError(source) {\n    const target = this._currentError || {};\n    const { LOG_TRACE } = this.logger;\n    Object.keys(source).forEach((key) => {\n      if (source[key] === null || source[key] === undefined) return false;\n      if (target[key] !== null && target[key] !== undefined) {\n        LOG_TRACE(`Attempt to overwrite property {key=${key}, current value=${target[key]}, incoming value=${source[key]}}`);\n        return false;\n      }\n      target[key] = source[key];\n      return true;\n    });\n    this._currentError = target;\n  }\n\n\n  /**\n   * Send a subscribe or unsubscribe request on behalf of the API.\n   * @param {Destination} subject The target for the update\n   * @param {Boolean} requestConfirmation Request a success message if true\n   * @param {String} correlationKey The correlation key for the request\n   * @param {Number} requestTimeout The timeout in milliseconds\n   * @param {SessionRequestType} requestType The request type\n   * @param {Boolean} force Ignore the socket buffer size limit and stuff the request in.\n   * @param {function} respRecvdCallback The callback on response\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  subscriptionUpdate(subject,\n                     requestConfirmation,\n                     correlationKey,\n                     requestTimeout,\n                     requestType,\n                     force,\n                     respRecvdCallback) {\n    //check topic supported\n    const error = this.checkSessionDestinationCapability(subject);\n    if (error) {\n      throw error;\n    }\n    const timeoutMsg =\n      SubscriptionUpdateTimeoutMessages[requestType] ||\n      SubscriptionUpdateTimeoutMessages.default;\n    const isSMP = (requestType !== SessionRequestType.REMOVE_DTE_SUBSCRIPTION);\n    const add = (requestType === SessionRequestType.ADD_SUBSCRIPTION ||\n      requestType === SessionRequestType.ADD_P2PINBOX);\n    const correlationTag = this.getCorrelationTag();\n\n    const generateMessage = isSMP\n      ? SMFLib.SMPMessage.getSubscriptionMessage\n      : SMFLib.AdProtocolMessage.getDTEUnsubscribeMessage;\n    const msg = generateMessage(correlationTag,\n                                subject,\n                                add,\n                                requestConfirmation);\n    const returnCode = this.send(msg, undefined, force);\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      return returnCode;\n    }\n\n    if (requestConfirmation) {\n      this.enqueueOutstandingCorrelatedReq(\n        correlationTag,\n        () => this.handleApiSubscriptionTimeout(correlationTag,\n                                                timeoutMsg),\n        requestTimeout || this._sessionProperties.readTimeoutInMsecs,\n        correlationKey,\n        respRecvdCallback);\n    }\n    if (requestType === SessionRequestType.ADD_SUBSCRIPTION &&\n      this._sessionProperties.reapplySubscriptions) {\n      this.addToSubscriptionCache(subject);\n    } else if (requestType === SessionRequestType.REMOVE_SUBSCRIPTION &&\n      this._sessionProperties.reapplySubscriptions) {\n      this.removeFromSubscriptionCache(subject);\n    }\n    return returnCode;\n  }\n\n  /**\n   * Send a queue subscribe or unsubscribe request.\n   * @param {Destination} subject The target for the update\n   * @param {Destination} queue The queue where the subscription is added/removed\n   * @param {Number} requestTimeout The timeout in milliseconds\n   * @param {Boolean} add (if true) or remove (if false).\n   * @param {Boolean} force Ignore the socket buffer size limit and stuff the request in.\n   * @param {function} respRecvdCallback The callback on response\n   * @returns {TransportReturnCode} The RC from the transport\n   * @private\n   */\n  queueSubscriptionUpdate(subject,\n                          queue,\n                          requestTimeout,\n                          add,\n                          force,\n                          respRecvdCallback) {\n    const timeoutMsg =\n      add ? SubscriptionUpdateTimeoutMessages[SessionRequestType.ADD_SUBSCRIPTION] :\n      SubscriptionUpdateTimeoutMessages[SessionRequestType.REMOVE_SUBSCRIPTION];\n    const correlationTag = this.getCorrelationTag();\n\n    const msg = SMFLib.SMPMessage.getQueueSubscriptionMessage(\n      correlationTag,\n      subject,\n      queue,\n      add);\n    const returnCode = this.send(msg, undefined, force);\n\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      return returnCode;\n    }\n\n    this.enqueueOutstandingCorrelatedReq(\n      correlationTag,\n      () => {\n        const origReq = this._correlatedReqs[correlationTag];\n        //TODO maybe just use the cancel method instead (which returns the original request)\n        this.handleApiSubscriptionTimeout(correlationTag,\n                                          timeoutMsg);\n        respRecvdCallback(null, origReq);\n      },\n      requestTimeout || this._sessionProperties.readTimeoutInMsecs,\n      null, // no need for session machinery to track flow correlationKey.\n      respRecvdCallback);\n    return returnCode;\n  }\n\n  /**\n   * @param {BaseMessage|Message} smfMessage The message received\n   * @param {Stats} [target] The statistics target to update, default is session stats\n   * @private\n   */\n  updateRxStats(smfMessage, target = this._sessionStatistics) {\n    if (!target) {\n      return;\n    }\n    const smfHeader = smfMessage.smfHeader;\n    if (!smfHeader) {\n      return;\n    }\n    const deliveryMode = smfHeader.pm_deliverymode || 0;\n    const msgStatKey = STAT_RX_BYMODE_MSGS[deliveryMode];\n    const bytesStatKey = STAT_RX_BYMODE_BYTES[deliveryMode];\n    const msgLength = smfHeader.messageLength;\n\n    switch (smfHeader.smf_protocol) {\n      case SMFLib.SMFProtocol.TRMSG:\n        if (smfHeader.pm_respcode === 0) {\n          target.incStat(StatType.RX_TOTAL_DATA_MSGS);\n          target.incStat(msgStatKey);\n          target.incStat(StatType.RX_TOTAL_DATA_BYTES, msgLength);\n          target.incStat(bytesStatKey, msgLength);\n          if (smfHeader.smf_di) {\n            target.incStat(StatType.RX_DISCARD_MSG_INDICATION);\n          }\n        }\n        break;\n      case SMFLib.SMFProtocol.CLIENTCTRL:\n      case SMFLib.SMFProtocol.SMP:\n      case SMFLib.SMFProtocol.KEEPALIVE:\n      case SMFLib.SMFProtocol.KEEPALIVEV2:\n      case SMFLib.SMFProtocol.ADCTRL:\n        target.incStat(StatType.RX_CONTROL_MSGS);\n        target.incStat(StatType.RX_CONTROL_BYTES, msgLength);\n        break;\n      default:\n    }\n  }\n\n  /**\n  * @param {BaseMessage|Message} smfMessage The message sent\n  * @param {Stats} [target] The statistics target to update, default is session stats\n  * @private\n  */\n  updateTxStats(smfMessage, target = this._sessionStatistics) {\n    if (!target) {\n      return;\n    }\n    if (smfMessage.getReplyTo !== undefined && smfMessage.getReplyTo()) {\n      // update stats\n      target.incStat(StatType.TX_REQUEST_SENT);\n    }\n    const smfHeader = smfMessage.smfHeader;\n    if (!smfHeader) {\n      return;\n    }\n\n    const deliveryMode = smfHeader.pm_deliverymode || 0;\n    let msgStatKey = STAT_TX_BYMODE_MSGS[deliveryMode];\n    let bytesStatKey = STAT_TX_BYMODE_BYTES[deliveryMode];\n    //\n    // If this is a Guaranteed Message we may need to further refine the stats by the redelivered\n    // status\n    if (deliveryMode !== MessageDeliveryModeType.DIRECT) {\n      if (smfMessage.isRedelivered()) {\n        msgStatKey = STAT_TX_BYMODE_REDELIVERED[deliveryMode];\n        bytesStatKey = STAT_TX_BYMODE_BYTES_REDELIVERED[deliveryMode];\n      }\n    }\n    const msgLength = smfHeader.messageLength;\n\n    switch (smfHeader.smf_protocol) {\n      case SMFLib.SMFProtocol.TRMSG:\n        target.incStat(msgStatKey);\n        target.incStat(bytesStatKey, msgLength);\n        break;\n      case SMFLib.SMFProtocol.CLIENTCTRL:\n      case SMFLib.SMFProtocol.SMP:\n      case SMFLib.SMFProtocol.KEEPALIVE:\n      case SMFLib.SMFProtocol.KEEPALIVEV2:\n      case SMFLib.SMFProtocol.ADCTRL:\n        target.incStat(StatType.TX_CONTROL_MSGS);\n        target.incStat(StatType.TX_CONTROL_BYTES, msgLength);\n        break;\n      default:\n    }\n  }\n\n  /**\n   * @param {ClientCtrlMessage} clientCtrlRespMsg The client control message with props\n   * @private\n   */\n  updateReadonlySessionProps(clientCtrlRespMsg) {\n    const props = this._sessionProperties; // Modify session properties in place\n\n    props._setVpnNameInUse(clientCtrlRespMsg.getVpnNameInUseValue() || '');\n    const oldVirtualRouterName = props.virtualRouterName;\n    const newVirtualRouterName = clientCtrlRespMsg.getVridInUseValue() || '';\n    props._setVirtualRouterName(newVirtualRouterName);\n    if (oldVirtualRouterName !== '' && oldVirtualRouterName !== newVirtualRouterName) {\n      this.handleVirtualRouterNameChange(oldVirtualRouterName, newVirtualRouterName);\n    }\n\n    // The Solace Message Router login response should always contain a P2P topic for this client\n    // name. If it doesn't that's an error (and we store \"\").\n    props._setP2pInboxBase(clientCtrlRespMsg.getP2PTopicValue() || '');\n    props._setP2pInboxInUse(P2PUtil.getP2PInboxTopic(props.p2pInboxBase));\n    this._session.updateCapabilities(clientCtrlRespMsg.getRouterCapabilities());\n\n    // Create and cache a guard for GM sending.\n    const gmCap = this._session._getCapability(CapabilityType.GUARANTEED_MESSAGE_PUBLISH);\n    this._gmSendDisallowed = (typeof gmCap === 'boolean' && !gmCap)\n      ? () => {\n        throw new OperationError(\n        'Sending guaranteed message is not allowed by router for this client',\n        ErrorSubcode.INVALID_OPERATION,\n        null);\n      }\n      : null;\n  }\n\n  handleVirtualRouterNameChange(oldName, newName) {\n    if (this._consumers) {\n      this._consumers.flows.forEach(consumer => consumer.onVRNChanged());\n      this._consumers.reconnectingFlows.forEach(consumer => consumer.onVRNChanged());\n    }\n    this.emitSessionEvent(\n      SessionEvent.build(SessionEventCode.VIRTUALROUTER_NAME_CHANGED,\n                         `Virtual router name is changed from ${oldName} to ${newName}`,\n                         null,\n                         0,\n                         null,\n                         null));\n  }\n\n  /**\n   * @returns {String} The session's ID in hexadecimal format\n   * @private\n   */\n  get sessionIdHex() {\n    return this.sessionId && formatHexString(this.sessionId) || 'N/A';\n  }\n\n  updateTransportCompression(callback) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('updateTransportCompression called. ' +\n      `plaintextTLS: ${this._plaintextTLS} _compressedTLS: ${this._compressedTLS}`);\n    if (this._plaintextTLS) {\n      TransportLib.TransportFactory.severTls(this._transport, this._compressedTLS, callback);\n      return null;\n    }\n    if (this._compressedTLS) {\n      const newTransport = TransportLib.TransportFactory.startCompression(this._transport);\n      return newTransport;\n    }\n    // nothing to do.\n    return this._transport;\n  }\n}\n\nmodule.exports.SessionFSM = SessionFSM;\n","const SMFLib = require('solclient-smf');\nconst { Flow, PrivateFlowEventName } = require('solclient-flow');\nconst { LogFormatter } = require('solclient-log');\nconst { MessagePublisherEventName } = require('./message-publisher-event-names');\nconst { MessagePublisherProperties } = require('./message-publisher-properties');\nconst { PublisherFSM } = require('./publisher-fsm');\nconst { PublisherFSMEvent } = require('./publisher-fsm-event');\nconst { PublisherFSMEventNames } = require('./publisher-fsm-event-names');\n\nconst { LOG_WARN } = new LogFormatter();\n\nclass MessagePublisher extends Flow {\n  /**\n   * Represents a Guaranteed Message Publisher.  This object must be used to publish\n   * Guaranteed Messages on a session.\n   *\n   * Publishers are created on sessions.  In this implementation the session functions are provided\n   * by the sessionFSM.  Publishers require the session to provide\n   * basic communications functions:\n   *  * send - send a message to the transport\n   *  * getCorrelationTag - return a unique transport correlation tag\n   *  * enqueueOutstandingCorrelatedReq - enqueue a callback for a received message\n   *    on a correlation tag\n   *\n   * @constructor\n   * @param {Object} properties Expected schema is\n   *  {@link solace.MessagePublisherProperties}\n   * @param {Object} sessionInterfaceFactory The session for the Guaranteed Message Publisher\n   * @private\n   */\n  constructor({ properties, sessionInterfaceFactory } = {}) {\n    const applyProperties = new MessagePublisherProperties(properties);\n    super(applyProperties, sessionInterfaceFactory, {\n      direct: MessagePublisherEventName.ACKNOWLEDGED_MESSAGE,\n      emits:  MessagePublisherEventName.values, // super adds MessageConsumerEventName\n    });\n    this._fsm = this._makeFSM();\n    const logger = new LogFormatter();\n    logger.formatter = function formatter(...args) {\n      return [\n        '[message-publisher]',\n        ...args,\n      ];\n    };\n    this.log = logger.wrap(this.log, this);\n\n    // Doesn't emit anything unless started; won't start unless bindWaiting\n    this._bindWaiting = true;\n\n    this.on(PrivateFlowEventName.BIND_WAITING, this._onBindWaiting.bind(this));\n    this.on(MessagePublisherEventName.CONNECT_FAILED_ERROR, this._onBindFailed.bind(this));\n    this.on(MessagePublisherEventName.DOWN, this._onDown.bind(this));\n    this.on(MessagePublisherEventName.UP, this._onUp.bind(this));\n  }\n\n  _onBindFailed() {\n    this._bindWaiting = false;\n  }\n\n  _onBindWaiting() {\n    this._bindWaiting = true;\n  }\n\n  _onDown() {\n    this._bindWaiting = false;\n  }\n\n  _onUp() {\n    this._bindWaiting = false;\n  }\n\n  /**\n   * @override\n   * @private\n   */\n  _makeFSM() {\n    return new PublisherFSM({\n      publisher:        this,\n      name:             'PublisherFSM',\n      sessionInterface: this._sessionInterface,\n      properties:       this._properties,\n    });\n  }\n\n  /**\n   * @returns {Long} The flow ID of this flow\n   */\n  get flowId() {\n    return this._flowId;\n  }\n  /**\n   * @param {Long} value The flow ID for this flow\n   * @private\n   */\n  set flowId(value) {\n    this._flowId = value;\n  }\n\n  /**\n   * @returns {String} The publisher name set for this flow\n   */\n  get name() {\n    return this._flowName;\n  }\n  /**\n   * @param {String} value The name to set on this flow\n   * @private\n   */\n  set name(value) {\n    this._flowName = value;\n  }\n\n  /**\n   * @returns {Number} The publisher ID set on this flow\n   */\n  get publisherId() {\n    return this._publisherId;\n  }\n  /**\n   * @param {Number} value The publisher ID to set on this flow\n   */\n  set publisherId(value) {\n    this._publisherId = value;\n  }\n\n  /**\n   * @readonly\n   * @returns {solace.MessagePublisherProperties} A clone of the publisher's properties.\n   */\n  get properties() {\n    return this._properties.clone();\n  }\n\n  /**\n   *\n   * @override\n   * @memberof MessagePublisher\n   */\n  connect() {\n    super.connect();\n    if (!this._fsm.getCurrentState()) {\n      this._fsm.start();\n    }\n  }\n\n  /**\n   * Application has disconnected the session, so\n   * disconnects the Guaranteed Message Publisher.\n   * @private\n   */\n  _disconnectSession() {\n    super._disconnectSession();\n    this.processFSMEvent(new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_CLOSE }));\n  }\n\n  /**\n   * @returns {solace.MessagePublisherEventName} The name of the disposed event for this flow\n   * @private\n   */\n  getDisposedEvent() { // eslint-disable-line class-methods-use-this\n    return MessagePublisherEventName.DISPOSED;\n  }\n\n  /**\n   * Handles an incoming ACK for the given message ID.\n   * @param {Long} id The message id for acknowledgement.\n   * @private\n   */\n  handleAck(id) {\n    this.processFSMEvent(new PublisherFSMEvent(\n      { name: PublisherFSMEventNames.ACK },\n      { ack: id }\n    ));\n  }\n\n  /**\n   * Handles an incoming NACK for the given message ID.\n   * @param {Long} id The message id for acknowledgement.\n   * @param {AdCtrlMessage} ctrlMessage The NACK message\n   * @private\n   */\n  handleNack(id, ctrlMessage) {\n    this.processFSMEvent(new PublisherFSMEvent(\n      { name: PublisherFSMEventNames.ACK },\n      { nack: id, ctrlMessage }\n    ));\n  }\n\n  /**\n   * @override\n   */\n  handleUncorrelatedControlMessage(message) {\n    const msgType = message.msgType;\n    const { SMFAdProtocolMessageType } = SMFLib;\n    switch (msgType) {\n      case SMFAdProtocolMessageType.CLIENTACK:\n        {\n          const id = message.getLastMsgIdAcked();\n          if (message.smfHeader.pm_respcode > 299) {\n            this.handleNack(id, message);\n          } else {\n            this.handleAck(id);\n          }\n          break;\n        }\n      case SMFAdProtocolMessageType.CLIENTNACK:\n        {\n          const id = message.getLastMsgIdAcked();\n          this.handleNack(id, message);\n          break;\n        }\n      case SMFAdProtocolMessageType.CLOSEPUBFLOW:\n        this.processFSMEvent(new PublisherFSMEvent(\n          { name: PublisherFSMEventNames.FLOW_UNBOUND })\n        );\n        break;\n      default:\n        LOG_WARN(`Dropping unhandled AD control message for ${this}`,\n                 SMFAdProtocolMessageType.describe(msgType));\n    }\n  }\n\n  /**\n   * Prepares an AD message for publishing on this flow.\n   * @param {Message} dataMsg The message to be prepared for publishing.\n   * @returns {TransportReturnCode} transport level returnCode\n   * @private\n   */\n  prepareAdMessageAndSend(dataMsg) {\n    return this._fsm.prepareAdMessageAndSend(dataMsg);\n  }\n\n  isBindWaiting() {\n    return this._bindWaiting;\n  }\n\n  /**\n   * @returns {String} Formatted inspector output\n   * @private\n   */\n  [util_inspect_custom]() {\n    return Object.assign(super[util_inspect_custom](), {\n      'name':        this.name,\n      'publisherId': this.publisherId,\n    });\n  }\n\n  /**\n   * @override\n   */\n  toString() {\n    return util_inspect(this);\n  }\n\n  /**\n   * Disposes the FSM associated with this flow.\n   *\n   * @private\n   */\n  _disposeFSM() {\n    this.processFSMEvent(new PublisherFSMEvent({ name: PublisherFSMEventNames.DISPOSE }));\n  }\n\n  _isDisconnected() {\n    return this._fsm.isDisconnected();\n  }\n\n}\n\nmodule.exports.MessagePublisher = MessagePublisher;\n","const { Enum } = require('solclient-eskit');\n\n// WebTransport states, used by WebTransport\nconst WebTransportState = {\n  DOWN:        'WebTransportDown',\n  CONNECTING:  'WebTransportConnecting',\n  DOWNGRADING: 'WebTransportDowngrading',\n  DESTROYING:  'WebTransportDestroying',\n  UP:          'WebTransportUp',\n};\n\nmodule.exports.WebTransportState = Enum.new(WebTransportState);\n","function generateUUID() { // Public Domain/MIT\n  let d = new Date().getTime();\n  // if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n  //   d += performance.now(); //use high-precision timer if available\n  // }\n\n\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n  });\n}\n\nmodule.exports.UUID = {\n  generateUUID,\n};\n","\nconst WINDOWS_VERSION_MAP = {\n  '6.4':  '10.0',\n  '6.3':  '8.1',\n  '6.2':  '8',\n  '6.1':  '7',\n  '6.0':  'Vista',\n  '5.2':  'Server 2003',\n  '5.1':  'XP',\n  '5.01': '2000 SP1',\n  '5.0':  '2000',\n  '4.0':  '4.0',\n};\n\nconst NODE_OS_TYPES = {\n  Darwin:     'OSX',\n  Windows_NT: 'Windows',\n};\n\nconst context = typeof window !== 'undefined' ? window : global;\n\nconst DEFAULT = {\n};\n\nconst NODE_PROCESS = {\n  product:  'solclientjs',\n  platform: 'node',\n  agent:    'node',\n  process:  context.process,\n};\n\n// Worst case fallbacks\nconst BROWSER_PROCESS = {\n  product:  'solclientjs',\n  platform: 'unknown',\n  agent:    'Gecko',\n};\n\nfunction getBrowserAgentInfo() {\n  /* eslint-env browser */\n  const navObj = typeof navigator !== 'undefined' ? navigator : null;\n  if (!navObj) return null;\n  const agentStr = navigator.userAgent;\n\n  // Execute these regex checks against the user agent string in this order.\n  // The earlier browsers have a lot of impersonation substrings in their user\n  // agent list so we positively test for them before considering the browsers\n  // that are frequently impersonated.\n  const browsers = [\n    ['edge', /Edge\\/([0-9._]+)/],\n    ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9.]+)(:?\\s|$)/],\n    ['firefox', /Firefox\\/([0-9.]+)(?:\\s|$)/],\n    ['opera', /Opera\\/([0-9.]+)(?:\\s|$)/],\n    ['opera', /OPR\\/([0-9.]+)(:?\\s|$)$/],\n    ['ie', /Trident\\/7\\.0.*rv:([0-9.]+).*\\).*Gecko$/],\n    ['ie', /MSIE\\s([0-9.]+);.*Trident\\/[4-8].0/], // Edit: IE11 in IE9 emu mode uses Trident 8\n    ['ie', /MSIE\\s(7\\.0)/],\n    ['bb10', /BB10;\\sTouch.*Version\\/([0-9.]+)/],\n    ['android', /Android\\s([0-9.]+)/],\n    ['ios', /Version\\/([0-9._]+).*Mobile.*Safari.*/],\n    ['safari', /Version\\/([0-9._]+).*Safari/],\n  ];\n\n  const agentInfo = {\n    browser:  { name: 'unknown', version: '0.0.0' },\n    platform: { os: 'unknown', arch: 'unknown', version: 'unknown' },\n  };\n\n  const agentHas = (...strs) => strs.some(str => agentStr.indexOf(str) >= 0);\n  const firstValue = (...vals) => vals.filter(Boolean).shift();\n\n  Object.assign(\n    agentInfo, // start with fallbacks above\n    // 1. Run the callback below for each browser name/regex-rule pair.\n    // 2. Decompose the pair into variables called `key` and `rule`.\n    browsers.map(([key, rule]) => {\n      // 3. Skip if the rule doesn't match the user agent string.\n      if (!rule.test(agentStr)) return false;\n      // 4. Get the matches for the rule.\n      const match = rule.exec(agentStr);\n      // 5. Extract the version from match group 1.\n      const versionStrs = match && match[1].split(/[._]/).slice(0, 3);\n      // 6. Convert the version strings to numbers.\n      const version = versionStrs.map(str => parseInt(str, 10));\n      // 7. Ensure our version tuple is length 3 by appending 0 elements.\n      while (version.length < 3) version.push(0);\n      // 8. Return an agentInfo object in the same form as above, consuming the version array.\n      return { browser: { name: key, version: version.join('.') } };\n    }).filter(Boolean).shift()); // 9. Filter out anything that returned `false` (#3)...\n    // 10. ...and return the first element.\n\n  // Now try to extract platform info\n  const os = firstValue(\n    agentHas('Windows Phone') && 'WindowsPhone',\n    agentHas('Windows') && 'Windows',\n    agentHas('Linux') && 'Linux',\n    agentHas('like Mac OS X') && 'iOS',\n    agentHas('OS X') && 'OSX',\n    agentHas('Android', 'Adr') && 'Android',\n    agentHas('BB10', 'RIM Tablet OS', 'BlackBerry') && 'BlackBerry'\n  );\n  const versionTests = {\n    'Windows': () => firstValue(\n      agentHas('Win16') && '3.1.1',\n      agentHas('Windows CE') && 'CE',\n      agentHas('Windows 95') && '4.00.950',\n      agentHas('Windows 98; Win 9x 4.90') && '4.90',\n      agentHas('Windows 98') && '4.10',\n      (() => {\n        // Look in the first set of parentheses for a version string key.\n        // This will fail when Windows 16 comes out\n        const parenParts = agentStr.match(/\\(.+?\\)/);\n        const versionPart = parenParts[0];\n        if (!versionPart) return false;\n        const versionMatch = str => versionPart.indexOf(str) >= 0;\n        return firstValue(...Object.keys(WINDOWS_VERSION_MAP).map(k =>\n            versionMatch(k) && WINDOWS_VERSION_MAP[k]));\n      })()\n    ),\n    'OSX':        () => agentStr.match(/OS X ((\\d+[._])+\\d+)\\b/)[1],\n    'Linux':      () => '',\n    'iOS':        () => agentStr.match(/OS ((\\d+[._])+\\d+) like Mac OS X/)[1],\n    'Android':    () => agentStr.match(/(?:Android|Adr) ((\\d+[._])+\\d_)/)[1],\n    'BlackBerry': () => agentStr.match(/(?:Version\\/|RIM Tablet OS )((\\d+\\.)+\\d+)/)[1],\n  };\n  const versionTest = versionTests[os];\n  agentInfo.platform.os = os || 'Unknown';\n  agentInfo.platform.version = (versionTest && versionTest() || '0.0.0').replace(/_/g, '.');\n  return agentInfo;\n}\n/* eslint-env shared-browser-node */\n\ntry {\n  if (BUILD_ENV.TARGET_BROWSER && context.navigator) {\n    // These are historical defaults\n    const safeEncode = str => str.replace(/[^a-zA-Z0-9_/.]/g, '-');\n    Object.assign(BROWSER_PROCESS, {\n      platform:    context.navigator.platform,\n      agent:       context.navigator.product,\n      description: safeEncode(context.navigator.userAgent),\n      navigator:   context.navigator,\n    });\n    const browserAgentInfo = getBrowserAgentInfo();\n    if (browserAgentInfo) {\n      BROWSER_PROCESS.agent = safeEncode(`${browserAgentInfo.browser.name\n                                           }-${browserAgentInfo.browser.version}`);\n      BROWSER_PROCESS.platform = `${BROWSER_PROCESS.agent}-${safeEncode(\n        `${browserAgentInfo.platform.os}-${browserAgentInfo.platform.version}`)}`;\n    }\n  }\n  if (BUILD_ENV.TARGET_NODE && context.process) {\n  //if (false) {\n    const os = require('os'); // eslint-disable-line global-require\n    const ostype = os.type();\n    const osname = NODE_OS_TYPES[ostype] || ostype || 'unknown';\n    const nodeVersionStr = `node-${process.version.substr(1)}`;\n    Object.assign(NODE_PROCESS, {\n      platform:    `${nodeVersionStr}-${osname}-${os.release()}-${os.arch()}`,\n      agent:       nodeVersionStr,\n      description: nodeVersionStr,\n    });\n  }\n} catch (ex) {\n  // Fall back to defaults\n}\n\nconst Process = Object.assign({}, DEFAULT,\n                              BUILD_ENV.TARGET_BROWSER ? BROWSER_PROCESS : {},\n                              BUILD_ENV.TARGET_NODE ? NODE_PROCESS : {});\n\nmodule.exports.Process = Process;\n","/**\n * An object managing a traversal of an Array-like object.\n *\n * @memberof solace\n * @property {function} deref Returns the value the iterator is\n *      referencing.\n * @property {function} incr Increments the iterator's reference in the\n *      iterator's data set.\n * @property {function} end Tests whether the iterator is at the end of\n *      the data set.  This MUST return false when calling deref() or\n *      incr().\n * @private\n */\nclass Iterator {\n\n  /**\n   * Creates an iterator to forward iterate over a specific contiguous\n   * section of an array, specifically in the range [start, end)\n   * @param {Array} arr The array to iterate over\n   * @param {Number} [start=0] The first item the iterator should\n   *  dereference\n   * @param {Number} [end=arr.length] One beyond the last item in the array\n   *  that the iterator should dereference.\n   * @constructor\n   */\n  constructor(arr, start = 0, end = arr.length) {\n    /**\n     * The array being iterated.\n     * @type {Array}\n     * @private\n     */\n    this._arr = arr;\n    /**\n     * The current index of the enumeration.\n     * @private\n     * @type {Number}\n     */\n    this._index = start;\n    /**\n     * The exclusive end index, or the length, of the array.\n     * @type {Number}\n     */\n    this._end = end;\n  }\n\n  /**\n   * Returns the element at the iterator's position.\n   * @returns {Object} The array element at the current position.\n   */\n  deref() {\n    return this._arr[this._index];\n  }\n\n  /**\n   * Increments the iterator.\n   * @returns {Number} The new position of the iterator.\n   */\n  incr() {\n    return ++this._index;\n  }\n\n  /**\n   * Reports whether the iterator has completed its iteration.\n   * @returns {Boolean} True if the iterator has reached the end of the iteration.\n   */\n  end() {\n    return this._index >= this._end;\n  }\n\n  /**\n   * Creates an iterator to forward iterate over a specific contiguous\n   * section of an array, specifically in the range [start, end)\n   *\n   * @param {Array} arr The array to iterate over\n   * @param {Number} [start=0] The first item the iterator should\n   *  dereference\n   * @param {Number} [end=arr.length] One beyond the last item in the array\n   *  that the iterator should dereference.\n   * @returns {solace.Iterator} An iterator to the specified set of data.\n   */\n  static makeIterator(arr, start = 0, end = arr.length) {\n    return new Iterator(arr, start, end);\n  }\n\n}\n\n// Expose both the static constructor function and the class.\nmodule.exports.Iterator = Iterator;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SessionRequestType = {\n  ADD_SUBSCRIPTION:        0,\n  REMOVE_SUBSCRIPTION:     1,\n  ADD_P2PINBOX:            2,\n  REMOVE_P2PINBOX:         3,\n  REMOVE_DTE_SUBSCRIPTION: 100,\n};\n\nmodule.exports.SessionRequestType = Enum.new(SessionRequestType);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of message delivery modes.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MessageDeliveryModeType = {\n  /**\n   * This mode provides at-most-once message delivery. Direct messages have\n   * the following characteristics:\n   *   * They are not retained for clients that are not connected to a Solace Message Router.\n   *   * They can be discarded when congestion or system failures are encountered.\n   *   * They can be reordered in the event of network topology changes.\n   *\n   * Direct messages are most appropriate for messaging applications that require very\n   * high-rate or very low-latency message transmission. Direct Messaging enables\n   * applications to efficiently publish messages to a large number of clients\n   * with matching subscriptions.\n   */\n  DIRECT:         0,\n  /**\n   * A Persistent delivery mode is used for Guaranteed Messaging, and this delivery mode\n   * is most appropriate for applications that require persistent storage of the messages\n   * they send or intend to receive. Persistent messages have the following characteristics:\n   *\n   *  * They cannot be discarded or lost (once they are acknowledged by the Solace Message Router).\n   *  * They cannot be reordered in the event of network topology changes.\n   *  * They cannot be delivered more than once to a single client (unless the redelivered\n   *    message flag is applied).\n   *  * When they match subscriptions on durable endpoints, they are retained for a client\n   *    when that client is not connected.\n   *\n   * Persistent messages are most appropriate for applications that require persistent storage\n   * of the messages they send or intend to receive.\n   */\n  PERSISTENT:     1,\n  /**\n   * This mode is functionally the same as Persistent. It exists to facilitate interaction\n   * with JMS applications. In most situations where you want to use Guaranteed Messaging,\n   * it is recommended that you use {@link solace.MessageDeliveryModeType.PERSISTENT}.\n   */\n  NON_PERSISTENT: 2,\n};\n\nmodule.exports.MessageDeliveryModeType = Enum.new(MessageDeliveryModeType);\n","const { ConsumerFlows } = require('./lib/consumer-flows');\nconst { ConsumerFSMEvent } = require('./lib/consumer-fsm-event');\nconst { ConsumerFSMEventNames } = require('./lib/consumer-fsm-event-names');\nconst { MessageConsumer } = require('./lib/message-consumer');\nconst { MessageConsumerAcknowledgeMode } = require('./lib/message-consumer-acknowledge-modes');\nconst { MessageConsumerEvent } = require('./lib/message-consumer-event');\nconst { MessageConsumerEventName } = require('./lib/message-consumer-event-names');\nconst { MessageConsumerProperties } = require('./lib/message-consumer-properties');\nconst { QueueBrowser } = require('./lib/queue-browser');\nconst { QueueBrowserEventName } = require('./lib/queue-browser-event-names');\nconst { QueueBrowserProperties } = require('./lib/queue-browser-properties');\n\nmodule.exports.ConsumerFlows = ConsumerFlows;\nmodule.exports.ConsumerFSMEvent = ConsumerFSMEvent;\nmodule.exports.ConsumerFSMEventNames = ConsumerFSMEventNames;\nmodule.exports.MessageConsumer = MessageConsumer;\nmodule.exports.MessageConsumerEvent = MessageConsumerEvent;\nmodule.exports.MessageConsumerAcknowledgeMode = MessageConsumerAcknowledgeMode;\nmodule.exports.MessageConsumerEventName = MessageConsumerEventName;\nmodule.exports.MessageConsumerProperties = MessageConsumerProperties;\nmodule.exports.QueueBrowser = QueueBrowser;\nmodule.exports.QueueBrowserEventName = QueueBrowserEventName;\nmodule.exports.QueueBrowserProperties = QueueBrowserProperties;\n","module.exports = require(\"buffer\");","/**\n * @classdesc\n * <b>This class is not exposed for construction by API users. A CacheRequestResult object is\n * provided on the callback (see {@link solace.CacheCBInfo.cacheRequestCallback} when a cache\n * request completes.</b>\n *\n * An object that indicates the termination of a cache request, and provides details how it\n * concluded.\n * @memberof solace\n * @hideconstructor\n */\nclass CacheRequestResult {\n  /*\n   * @param {solace.CacheReturnCode} rc The result of the request.\n   *   * When returnCode === CacheReturnCode.OK, the applicable subcodes are:\n   *     * {@link CacheReturnSubcode.REQUEST_COMPLETE}\n   *     * {@link CacheReturnSubcode.LIVE_DATA_FULFILL}\n   *   * When returnCode === CacheReturnCode.FAIL, applicable subcodes are:\n   *     * {@link CacheReturnSubcode.ERROR_RESPONSE}\n   *     * {@link CacheReturnSubcode.INVALID_SESSION}\n   *     * {@link CacheReturnSubcode.REQUEST_ALREADY_IN_PROGRESS}\n   *   * When returnCode === CacheReturnCode.INCOMPLETE, applicable subcodes are:\n   *     * {@link CacheReturnSubcode.NO_DATA}\n   *     * {@link CacheReturnSubcode.REQUEST_TIMEOUT}\n   *     * {@link CacheReturnSubcode.SUSPECT_DATA}\n   *\n   * @param {solace.CacheReturnSubcode} subcode The subcode result of the request. Provides\n   *    details on the condition that caused the result.\n   * @param {solace.Destination} topic The topic destination on which the request was made.\n   * @param {String} error The error, if any, that caused the current result.\n   */\n  constructor(rc, subcode, topic, error) {\n    this._returnCode = rc;\n    this._subcode = subcode;\n    this._topic = topic;\n    this._error = error;\n  }\n\n  /**\n   * Gets the return code from the cache request result.\n   *\n   * @returns {solace.CacheReturnCode} The return code associated with the result of\n   * the request.\n   */\n  getReturnCode() {\n    return this._returnCode;\n  }\n\n  /**\n   * Gets the return subcode from the cache request result.\n   *\n   * @returns {solace.CacheReturnSubcode} A subcode that gives more detail than\n   * {@link CacheRequestResult#getReturnCode} about the result of the request.\n   */\n  getReturnSubcode() {\n    return this._subcode;\n  }\n\n  /**\n   * Gets the topic object associated with the cache request.\n   *\n   * @returns {solace.Destination} The topic destination supplied for the cache request.\n   */\n  getTopic() {\n    return this._topic;\n  }\n\n\n  /**\n   * Gets the error, if any, associated with the returned result.\n   *\n   * @returns {String} The error associated with the returned result.\n   */\n  getError() {\n    return this._error;\n  }\n}\n\nmodule.exports.CacheRequestResult = CacheRequestResult;\n","const { Debug } = require('./lib/debug');\n\nmodule.exports.Debug = Debug;\n","const HTTPLib = require('./http');\nconst { WebSocketTransportSession } = require('./websocket-transport-session');\n\nconst { HTTPConnection } = HTTPLib;\n\nconst WebTransportCapabilities = {\n  webSocket() { return WebSocketTransportSession.browserSupportsBinaryWebSockets(); },\n  xhrBinary() { return HTTPConnection.browserSupportsXhrBinary(); },\n  streaming() { return HTTPConnection.browserSupportsStreamingResponse(); },\n};\n\nmodule.exports.WebTransportCapabilities = WebTransportCapabilities;\n","const EncodeSingleElementLib = require('./encode-single-element');\nconst UtilLib = require('solclient-util');\nconst { EncodeHeader } = require('./encode-header');\nconst { SDTDataTypes } = require('../sdt-data-types');\nconst { SDTMapContainer } = require('../sdt-map-container');\n\nconst { encodeHeader } = EncodeHeader;\n\nconst EncodeMap = {\n  /**\n   * Encodes an SDT map.\n   * @param  {Object} sdtmap The map to parse\n   * @returns {String}        The map in binary string format\n   */\n  encodeMap(sdtmap) {\n    const buf = [];\n    if (!(sdtmap instanceof SDTMapContainer)) {\n      return null; // skip!\n    }\n    const keys = sdtmap.getKeys();\n    let sdtfield = null;\n    let strKeyField = null;\n    let strKeyName = null;\n    let i;\n    for (i = 0; i < keys.length; i++) {\n      sdtfield = sdtmap.getField(keys[i]);\n      if (sdtfield) {\n        // === KEY ===\n        strKeyName = UtilLib.StringUtils.nullTerminate(keys[i]);\n        strKeyField = encodeHeader(SDTDataTypes.String, strKeyName.length);\n        strKeyField += strKeyName;\n        buf.push(strKeyField);\n\n        // === VALUE ===\n        EncodeSingleElementLib.EncodeSingleElement.encodeSingleElementToBuf(sdtfield, buf);\n      }\n    } // end iter over keys\n    return buf.join('');\n  },\n};\n\nmodule.exports.EncodeMap = EncodeMap;\n","const { StringBuffer } = require('./string-buffer');\n\nconst PAD_LEFT = 0;\nconst PAD_RIGHT = 1;\n\nconst LUT_PRINTABLE = (() => {\n  const tmp = [];\n  for (let c = 0; c < 256; ++c) {\n    tmp[c] = (c < 33 || c > 126) ? '.' : String.fromCharCode(c);\n  }\n  return tmp;\n})();\n\nfunction padLeftRight(str, minLen, padSide, padChar = ' ') {\n  if (typeof str !== 'string') {\n    return str;\n  }\n  if (str.length >= minLen) {\n    return str;\n  }\n\n  const buf = new StringBuffer();\n  for (let i = 0; i < (minLen - str.length); i++) {\n    buf.append(padChar.charAt(0));\n  }\n  switch (padSide) {\n    case PAD_LEFT:\n      return `${buf}${str}`;\n    case PAD_RIGHT:\n      return `${str}${buf}`;\n    default:\n      return str;\n  }\n}\n\nfunction leastSpaces(length, line) {\n  if (!line.length) return length;\n  const spaces = line.match(/^\\s*/)[0].length;\n  return spaces < length ? spaces : length;\n}\n\nfunction capitalizeWord(str) {\n  return `${str.charAt(0).toUpperCase()}${str.substr(1)}`;\n}\n\nfunction isEmptyFun(str) {\n  return (\n    str === undefined ||\n    str === null ||\n    str.length === 0\n  );\n}\n\n/**\n * @private\n * @type {StringUtils}\n */\nconst StringUtils = {};\n\nStringUtils.capitalize = function capitalize(str) {\n  if (!(str && str.length)) {\n    return str;\n  }\n\n  return str.split(' ').map(capitalizeWord).join(' ');\n};\n\nStringUtils.isEmpty = isEmptyFun;\n\nStringUtils.notEmpty = function notEmpty(str) {\n  return !(isEmptyFun(str));\n};\n\nStringUtils.toSafeChars = function toSafeChars(str) {\n  return str.replace(/[^a-zA-Z0-9_/.]/g, '');\n};\n\nStringUtils.padLeft = function padLeft(str, minLen, padChar) {\n  return padLeftRight(str, minLen, PAD_LEFT, padChar);\n};\n\nStringUtils.padRight = function padRight(str, minLen, padChar) {\n  return padLeftRight(str, minLen, PAD_RIGHT, padChar);\n};\n\nStringUtils.nullTerminate = function nullTerminate(str) {\n  if (str === null || str === undefined) {\n    throw new Error('non str in nullTerminate');\n  }\n  const lastChar = str.charCodeAt(str.length - 1);\n  if (lastChar === 0) {\n    return str;\n  }\n  return str + String.fromCharCode(0x00);\n};\n\nStringUtils.stripNullTerminate = function stripNullTerminate(str) {\n  if (str === null || str === undefined) {\n    throw new Error('null str in stripNullTerminate');\n  }\n  const lastChar = str.charCodeAt(str.length - 1);\n  if (lastChar === 0) {\n    return str.substr(0, str.length - 1);\n  }\n  return str;\n};\n\nStringUtils.hexdump = function hexdump(s) {\n  const output = new StringBuffer();\n  const printable = new StringBuffer();\n  const spacer = pos => (pos === 8 || pos === 16 ? '  ' : ' ');\n  let linelen = 0;\n  for (let i = 0, sLength = s.length; i < sLength; i++) {\n    const ccode = s.charCodeAt(i);\n    output.append(padLeftRight(ccode.toString(16), 2, PAD_LEFT));\n    printable.append(LUT_PRINTABLE[ccode] || '.');\n    output.append(spacer(++linelen));\n\n    if (i === s.length - 1) {\n      // input finished: complete the line\n      while (linelen < 16) {\n        output.append(`  ${spacer(++linelen)}`);\n      }\n    }\n\n    if (linelen === 16) {\n      output.append(printable.join(''));\n      output.append('\\n');\n      linelen = 0;\n      printable.clear();\n    }\n  }\n  return output.toString();\n};\n\n/**\n * Use heredoc`....` to create multi-line heredoc strings. Leading blank lines are removed, as are\n * leading spaces, up to the number of spaces on the least-indented line.\n * @param {String} literals The document template\n * @param {...String} substitutions The substitutions to make in the document\n * @returns {String} The interpolated representation of the document\n */\nStringUtils.heredoc = function heredoc(literals, ...substitutions) {\n  const subst = [...substitutions, ''];\n  const lines = literals.map(k => k + subst.shift())\n    .join('')\n    .split(/\\r?\\n/);\n  const spaces = lines.length === 1 ? 0 : lines.reduce(leastSpaces, Infinity);\n  while (lines[0] === '') {\n    lines.shift();\n  }\n  return lines.map(line => line.substring(spaces)).join('\\n');\n};\n\n\nmodule.exports.StringUtils = StringUtils;\n","const { Process } = require('solclient-util');\n\nconst C_2_32 = Math.pow(2, 32);\n\nfunction leftPad(str, len) {\n  if (len > str.length) {\n    return '0'.repeat(len - str.length) + str;\n  }\n  return str;\n}\n\nfunction generateRandomId() {\n  const rand = (Math.random() * C_2_32).toFixed(0);\n  return leftPad(rand.toString(), 10);\n}\n\n/**\n * @private\n */\nconst GlobalContext = {\n\n  sessionCounter: 0,\n  idCounter:      0,\n\n  RandId: generateRandomId(),\n\n  NextSessionCounter() {\n    const count = ++this.sessionCounter;\n    return leftPad(count.toString(), 4);\n  },\n\n  NextId() {\n    return ++this.idCounter;\n  },\n\n  GenerateClientName() {\n    const { product, platform } = Process;\n    const result = `${product}/${platform}/${this.RandId}/${this.NextSessionCounter()}`;\n    return result;\n  },\n\n  GenerateUserIdentification() {\n    const { product, platform } = Process;\n    return `${product}/${platform}/${this.RandId}`;\n  },\n\n  GenerateClientDescription() {\n    return `solclientjs/${Process.description}`.substring(0, 254);\n  },\n};\n\nmodule.exports.GlobalContext = GlobalContext;\n","const { ErrorSubcode, OperationError } = require('solclient-error');\nconst { TransportReturnCode } = require('./transport-return-codes');\n\n// Stubs don't use this\n/* eslint-disable class-methods-use-this */\n// Stubs declare all params\n/* eslint-disable no-unused-vars */\n\n/**\n *\n * Base class for various transports\n * @private\n */\nclass TransportBase {\n  /**\n   * @constructor\n   * @param {URL} url The URL to connect to\n   * @param {function} eventCB The callback to notify on events\n   * @param {SMFClient} client The SMF client to notify on data\n   * @param {Object} transportProps Additional properties to assign to the transport\n   * @param {?Object} [interceptor] The transport interceptor to install\n   */\n  constructor(url, eventCB, client, transportProps, interceptor = null) {\n    this._url = url;\n    this._ssl = TransportBase.useSsl(url);\n    this._client = client;\n    this._eventCB = eventCB;\n    this._props = transportProps;\n    this.setInterceptor(interceptor);\n  }\n\n  /**\n   * Establish underlying transport.\n   * Returns transport return code, to be overridden in subclass\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  connect() { return TransportReturnCode.OK; }\n\n  /**\n   * Destroy the underlying transport.\n   * Returns transport return code, to be overridden in subclass\n   * @param {Boolean} immediate Destroy gracefully if false.\n   * @param {?String} msg The message associated with this operation, if any.\n   * @param {?ErrorSubcode} subcode The subcode associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  destroy(immediate, msg, subcode) { return TransportReturnCode.OK; }\n\n  /**\n   * Force fail the underlying transport's socket to force a failure.\n   * Returns transport return code, to be overridden in subclass\n   * @param {?String} msg The message associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  forceFailure(msg) { return TransportReturnCode.OK; }\n\n  flush(callback) {\n    callback();\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Send encoded SMF message\n   * Returns transport return code, to be overridden in subclass\n   * @param {String} message The encoded SMF message to send\n   * @param {?Boolean} [forceAllowEnqueue=false] If true, do not fail due to transport buffer full\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  send(message, forceAllowEnqueue = false) { return TransportReturnCode.OK; }\n\n  /**\n   * @returns {TransportProtocol} Return transport protocol in use\n   */\n  getTransportProtocol() {\n    return this._props.transportProtocol;\n  }\n\n  /**\n   * @returns {?String} Return transport session information such as sessionId\n   */\n  getInfoStr() { return null; }\n\n  /**\n   * @returns {TransportClientStats} transport statistics\n   */\n  getClientStats() { return null; }\n\n  /**\n   * Check whether or not the transport can be downgraded to the next protocol.\n   * It is possible to downgrade the transport, the existing transport is destroyed and\n   * the new transport connection initiated.\n   * @param {String} msg The message associated with this operation\n   * @param {ErrorSubcode} subcode The subcode associated with this operation\n   * @returns {Boolean} Return true if downgrade is allowed and has been initiated; false otherwise\n   */\n  beginDowngrade(msg, subcode) { return false; }\n\n  /**\n   * Sets the interceptor for this transport. This object has the chance\n   * to intervene before bytes are sent or received.\n   * @param {Object} [interceptor] If set, the interceptor is inserted into the\n   *\n   * @private\n   */\n  setInterceptor(interceptor) {\n    if (this._interceptor) {\n      // Reset original callbacks\n      if (this._interceptor.removed) this._interceptor.removed(this);\n    }\n    this._interceptor = interceptor;\n    if (interceptor) {\n      if (interceptor.installed) interceptor.installed(this);\n    }\n  }\n\n  toString() {\n    return `${this.getTransportProtocol()}${this._ssl ? ' (SSL)' : ''}`;\n  }\n\n  /**\n   * @param {String} url The URL to check\n   * @returns {Boolean} `true` if the URL requires SSL; `false` otherwise\n   * @static\n   */\n  static useSsl(url) {\n    const urlParts = (url || '').split('://');\n    if (urlParts.length === 0 || TransportBase.validSchemes.indexOf(urlParts[0]) < 0) {\n      throw new OperationError(`Invalid url \"${url}\": Only [${\n                               TransportBase.validSchemes.join(', ')}] URL schemes are supported`,\n                               ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n\n    const useSSL = (urlParts[0] === 'https' || urlParts[0] === 'wss' || urlParts[0] === 'tcps');\n    return useSSL;\n  }\n\n}\n\n/**\n * @type {Array.<String>}\n */\nTransportBase.validSchemes = ['http', 'https', 'ws', 'wss', 'tcp', 'tcps'];\n\nmodule.exports.TransportBase = TransportBase;\n\n","const MessageLib = require('solclient-message');\nconst { BidiMap } = require('solclient-eskit');\n\nclass PriorityUserCosMap extends BidiMap {\n  constructor() {\n    super([MessageLib.MessageUserCosType.COS1, 0],\n          [MessageLib.MessageUserCosType.COS2, 1],\n          [MessageLib.MessageUserCosType.COS3, 2]);\n  }\n}\n\nmodule.exports.PriorityUserCosMap = PriorityUserCosMap;\n","class BaseSMFClient {\n  constructor(rxSmfCB, rxMessageErrorCB, session) {\n    this.reset();\n    this._rxSmfCB = rxSmfCB; // callback for parsed msg\n    this._rxMessageErrorCB = rxMessageErrorCB; // invalid UH, etc.\n    this._session = session;\n  }\n\n  reset() {\n    this._correlationCounter = 0;\n  }\n\n  nextCorrelationTag() {\n    // Login uses the max value as a sentinel, so wrap around early\n    if (++this._correlationCounter >= BaseSMFClient.SMF_MAX_CORRELATION) {\n      this._correlationCounter = 1;\n    }\n    // added check to prevent it returning as undefined/null\n    return this._correlationCounter ? this._correlationCounter : 0;\n  }\n}\n\nBaseSMFClient.SMF_MAX_CORRELATION = 0xFFFFFF;\n\n\nmodule.exports.BaseSMFClient = BaseSMFClient;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumeration of CacheReturnCode types.  The method {@link solace.CacheRequestResult#getReturnCode}\n * returns on of these basic results of a cache request.  More details are available in the\n * associated {@link solace.CacheReturnSubcode}, retrieved by\n * {@link solace.CacheRequestResult#getReturnSubcode}.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst CacheReturnCode = {\n  /**\n   * @type {Number}\n   * @description The cache request succeeded.  See the subcode for more information.\n   */\n  OK:         1,\n  /**\n   * @type {Number}\n   * @description The cache request was not processed.  See the subcode for more information.\n   */\n  FAIL:       2,\n  /**\n   * @type {Number}\n   * @description The cache request was processed but could not be completed.  See the subcode for\n   * more information.\n   */\n  INCOMPLETE: 3,\n};\n\nmodule.exports.CacheReturnCode = Enum.new(CacheReturnCode);\n","const { APIPropertiesValidators } = require('solclient-util');\nconst { MessagePublisherAcknowledgeMode } = require('./message-publisher-acknowledge-modes');\n\nconst {\n  validateInstance,\n  valBoolean,\n  valIsMember,\n  valNumber,\n  valRange,\n} = APIPropertiesValidators;\n\n\nconst MessagePublisherPropertiesValidator = {\n  validate(instance) {\n    const v = validateInstance.bind(null, 'MessagePublisherProperties', instance);\n    v('enabled', [valBoolean]);\n    v('windowSize', [valNumber], [valRange, 1, 255]);\n    v('acknowledgeTimeoutInMsecs', [valNumber], [valRange, 20, 60000]);\n    v('acknowledgeMode', [valIsMember, MessagePublisherAcknowledgeMode, 'MessagePublisherAcknowledgeMode']);\n    v('connectRetryCount', [valNumber], [valRange, 0, Number.MAX_VALUE]);\n    v('connectTimeoutInMsecs', [valNumber], [valRange, 50, Number.MAX_VALUE]);\n  },\n};\n\nmodule.exports.MessagePublisherPropertiesValidator = MessagePublisherPropertiesValidator;\n","const DestinationLib = require('solclient-destination');\nconst SDTMapContainerLib = require('./sdt-map-container');\nconst SDTStreamContainerLib = require('./sdt-stream-container');\nconst ValidateLib = require('solclient-validate');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { SDTFieldType } = require('./sdt-field-types');\n\nconst baseTypes = (() => {\n  const result = [];\n  result[SDTFieldType.BOOL] = 'boolean';\n  result[SDTFieldType.UINT8] = 'number';\n  result[SDTFieldType.INT8] = 'number';\n  result[SDTFieldType.UINT16] = 'number';\n  result[SDTFieldType.INT16] = 'number';\n  result[SDTFieldType.UINT32] = 'number';\n  result[SDTFieldType.INT32] = 'number';\n  result[SDTFieldType.UINT64] = 'number';\n  result[SDTFieldType.INT64] = 'number';\n  result[SDTFieldType.WCHAR] = 'string';\n  result[SDTFieldType.STRING] = 'string';\n  result[SDTFieldType.BYTEARRAY] = 'object'; // Uint8Array\n  result[SDTFieldType.FLOATTYPE] = 'number';\n  result[SDTFieldType.DOUBLETYPE] = 'number';\n  return result;\n})();\n\nfunction failInvalidParameter(valueType) {\n  return new OperationError(\n            `Invalid SDT type:value combination, expected value type ${valueType}`,\n            ErrorSubcode.PARAMETER_INVALID_TYPE);\n}\n\nfunction validateSdtField(type, value) {\n  if (baseTypes[type]) {\n    if ((baseTypes[type] === 'boolean' && typeof value !== 'boolean') ||\n            (baseTypes[type] === 'number' && typeof value !== 'number') ||\n            (baseTypes[type] === 'string' && typeof value !== 'string')) {\n      return failInvalidParameter(baseTypes[type]);\n    }\n  }\n  if (type === SDTFieldType.MAP &&\n      !ValidateLib.Check.instanceOf(value, SDTMapContainerLib.SDTMapContainer)) {\n    return failInvalidParameter('SDTMapContainer');\n  }\n  if (type === SDTFieldType.STREAM &&\n      !ValidateLib.Check.instanceOf(value, SDTStreamContainerLib.SDTStreamContainer)) {\n    return failInvalidParameter('SDTStreamContainer');\n  }\n  if (type === SDTFieldType.DESTINATION &&\n      !ValidateLib.Check.instanceOf(value, DestinationLib.Destination)) {\n    return failInvalidParameter('Destination');\n  }\n  return null;\n}\n\nmodule.exports.validateSdtField = validateSdtField;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of supported message settlement outcomes.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MessageOutcome = {\n  /**\n   * Represents a successful message processing acknowledgement outcome.\n   *\n   * (see {@link solace.Message#acknowledge}) for more details\n   */\n  ACCEPTED:         0,\n  /**\n   * Represents a negative acknowledgement outcome, used to signal that the application failed to process\n   * the message.\n   * \n   * Delivery count for the message is incremented. Redelivery will be attempted. Message may\n   * be moved to DMQ once max-redelivered is reached. Message may be delayed if the endpoint has\n   * delayed redelivery configured.\n   */\n  FAILED:           1,\n  // /**\n  //  * Represents a negative acknowledgement outcome, used to signal that the application failed to process\n  //  * the message.\n  //  * \n  //  * Delivery count for the message is NOT incremented. Redelivery will be attempted. Message may\n  //  * be moved to DMQ once max-redelivered is reached. \n  //  * A released message will always be eligible for redelivery, even if redeliveries are disabled. \n  //  * Message is immediately eligible for redelivery, even if endpoint is configured for delayed redelivery.\n  //  */\n  // RELEASED:           2,\n  /**\n   * Represents a negative acknowledgement outcome, used to signal that the application has rejected the\n   * message such as when application determines the message is invalid.\n   * \n   * Message will NOT be redelivered. Message will be moved to DMQ. If DMQ is not configured,\n   * message is deleted.\n   */\n  REJECTED:         3,\n};\n\nmodule.exports.MessageOutcome = Enum.new(MessageOutcome);\n","'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {(Function|Object)} handler The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, handler, options = {}) {\n    for (const listener of this.listeners(type)) {\n      if (\n        !options[kForOnEventAttribute] &&\n        listener[kListener] === handler &&\n        !listener[kForOnEventAttribute]\n      ) {\n        return;\n      }\n    }\n\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = handler;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {(Function|Object)} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n\n/**\n * Call an event listener\n *\n * @param {(Function|Object)} listener The listener to call\n * @param {*} thisArg The value to use as `this`` when calling the listener\n * @param {Event} event The event to pass to the listener\n * @private\n */\nfunction callListener(listener, thisArg, event) {\n  if (typeof listener === 'object' && listener.handleEvent) {\n    listener.handleEvent.call(listener, event);\n  } else {\n    listener.call(thisArg, event);\n  }\n}\n","const { LogLevel } = require('./log-levels');\n\nconst state = {\n  impl:  null,\n  level: LogLevel.INFO,\n};\n\nconst LogBinding = {};\nLogBinding.getImpl = function getImpl() {\n  return state.impl;\n};\n\nLogBinding.setImpl = function setImpl(impl) {\n  state.impl = impl;\n};\n\nLogBinding.getLogLevel = function getLogLevel() {\n  return state.level;\n};\n\nLogBinding.setLogLevel = function setLogLevel(level) {\n  state.level = level;\n};\n\nmodule.exports.GlobalBinding = LogBinding;\n","const { ReplayStartLocation, ReplayStartType } = require('./replayStartLocation');\n/**\n * @classdesc\n *  * <b>This class is not exposed for construction by API users.\n *  Users should obtain an instances from the following:</b>\n *  * {@link solace.SolclientFactory.createReplayStartLocationBeginning}\n *\n * Defines the ReplayStartLocation class.\n * The ReplayStartLocation is set in the corresponding\n * MessageConsumer property {@link solace.MessageConsumerProperties#replayStartLocation}\n *\n * @extends {ReplayStartLocation}\n * @hideconstructor\n * @memberof solace\n */\n\nclass ReplayStartLocationBeginning extends ReplayStartLocation {\n  /**\n   * @private\n   */\n  constructor() {\n    super({\n      _type: ReplayStartType.BEGINNING,\n    });\n  }\n  static [util_inspect_custom]() {\n    return 'BEGINNING';\n  }\n}\n\nmodule.exports.ReplayStartLocationBeginning = ReplayStartLocationBeginning;\n","const SolclientFactoryLib = require('solclient-factory');\nconst { Convert } = require('solclient-convert');\nconst { DestinationType } = require('./destination-type');\nconst { LOG_ERROR } = require('solclient-log');\nconst { SubscriptionInfo } = require('./subscription-info');\nconst { UUID, StringUtils } = require('solclient-util');\n\nconst { ucs2ToUtf8, utf8ToUcs2 } = Convert;\nconst { ProfileBinding } = SolclientFactoryLib;\n\nconst { toSafeChars, stripNullTerminate } = StringUtils;\nconst { ErrorSubcode, OperationError } = require('solclient-error');\n\nconst DESTINATION_PREFIX_FROM_TYPE = {\n  [DestinationType.QUEUE]:           '#P2P/QUE/',\n  [DestinationType.TEMPORARY_QUEUE]: '#P2P/QTMP/',\n};\n\nfunction createTemporaryName(type, vrid, name) {\n  const id = name || UUID.generateUUID();\n  switch (type) {\n    case DestinationType.TOPIC:\n      return `#P2P/TTMP/${vrid}/${id}`;\n    case DestinationType.TEMPORARY_QUEUE:\n      return `#P2P/QTMP/${vrid}/${id}`;\n    default:\n      LOG_ERROR('Unknown/invalid destination type', DestinationType.describe(type));\n  }\n  return undefined;\n}\n\nfunction createPrefix(type) {\n  return DESTINATION_PREFIX_FROM_TYPE[type] || '';\n}\n\nfunction createOperationError(type, errorStr) {\n  return new OperationError(`Invalid ${type}: ${errorStr}`, ErrorSubcode.INVALID_TOPIC_SYNTAX);\n}\n\n// This function validates topics in all code paths -- legacy code paths that relied on validating\n// topics as they were used, and newer code paths that validate Destinations on construction.  We\n// must not add validation here that could break legacy apps that used the deprecated 'new Topic'\n// interface that doesn't perform validation, and subsequently rely on validate-on-use.\n//\n// More strict checks done during Destination construction should be placed in validateAndEncode.\n// @return { error, isWildcarded }.  isWildcarded will not be defined if erorr is defined.\nfunction legacyValidate(type, bytes, name,\n                        exceptionCreator = createOperationError.bind(null, type)) {\n  let error;\n\n  /*\n    * TRB topics can contain any utf-8 character and must be <= 250 bytes\n    * in length.\n    * '*', if present in a level, must be the last character in that level.\n    * May not have empty levels.\n    */\n\n  // Check minimum length using name, since the bytes may include a destination type prefix.\n  // e.g. #P2P/QUE/ should fail on length, not empty level.\n  const nameLength = name.length;\n  if (nameLength < 1) {\n    error = exceptionCreator('Too short (must be >= 1 character).');\n    return { error };\n  }\n\n  // Check maximum length using encoded bytes, since UTF-8 is a variable length encoding.\n  const bytesLength = bytes.length;\n  if (bytesLength > 251) { // null terminator doesn't count\n    error = exceptionCreator(`Too long (encoding must be <= 250 bytes); name is ${\n                             bytesLength - 1} bytes: '${name}'`);\n    return { error };\n  }\n\n  let isWildcarded = false;\n  if (name.charAt(nameLength - 1) === '>') {\n    isWildcarded = true;\n  }\n\n  for (let i = 0; i < nameLength; ++i) {\n    switch (name.charAt(i)) {\n      case '/':\n        if (i === 0 || i === (nameLength - 1) || name.charAt(i - 1) === '/') {\n          error = exceptionCreator(`Empty level(s) in '${name}'@${i}.`);\n          return { error };\n        }\n        break;\n\n      case '*':\n        if ((i < (nameLength - 1)) && (name.charAt(i + 1) !== '/')) {\n          // must not have something other than '/' to the right\n          error = exceptionCreator(`Illegal wildcard(s) in '${name}'@${i}.`);\n          return { error };\n        }\n\n        isWildcarded = true;\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return { isWildcarded };\n}\n\nfunction encodeBytes(bytes) {\n  return ProfileBinding.value.topicUtf8Encode\n    ? `${ucs2ToUtf8(bytes)}\\u0000`\n    : `${bytes}\\u0000`;\n}\n\nfunction decodeBytes(bytes) {\n  return stripNullTerminate(ProfileBinding.value.topicUtf8Encode\n    ? utf8ToUcs2(bytes)\n    : bytes);\n}\n\n/**\n * @param {DestinationType} type The type of destination\n * @param {String} name The name of the destination\n * @returns {Object} {bytes, offset, networkName} The result of the encoding.\n *\n * @private\n */\nfunction encode(type, name) {\n  const prefix = createPrefix(type);\n  const offset = prefix.length;\n  const networkName = prefix + name;\n  const bytes = encodeBytes(networkName);\n  return { bytes, offset, networkName };\n}\n\n/**\n * @param {DestinationType} type The type of destination\n * @param {String} name The name of the destination\n * @param {Function} [exceptionCreator=createOperationError] A function to create an exception if an\n *   error is encountered.\n * @returns {Object} {bytes, error, offset, isWildcarded} The result of the encoding and any\n *      validation error\n *\n * @private\n */\nfunction validateAndEncode(type, name, exceptionCreator = createOperationError.bind(null, type)) {\n  const { bytes, offset } = encode(type, name);\n  const { error: constError, isWildcarded } = legacyValidate(type, bytes, name, exceptionCreator);\n  let error = constError;\n  let subscriptionInfo = {};\n  subscriptionInfo.isWildcarded = isWildcarded;\n\n  // If there was no 'legacy' error, perform an additional check to see if the provided name starts\n  // with a reserved prefix.  It shouldn't.  Prefixes should always be added by us by encode().\n  if (!error) {\n    Object.keys(DESTINATION_PREFIX_FROM_TYPE).some((prefixType) => {\n      const prefix = DESTINATION_PREFIX_FROM_TYPE[prefixType];\n      if (!name.startsWith(prefix)) {\n        return false; // keep processing more array elements.\n      }\n\n      error = exceptionCreator(`Reserved prefix '${prefix}' found at start of '${name}'`);\n      return true;\n    });\n  }\n\n  if (!error) {\n    // parse subscription information from destination name\n    const { error: errorConst, subInfo: subInfoConst } =\n      SubscriptionInfo.parseFromName(name, type);\n    error = errorConst;\n    subscriptionInfo = subInfoConst;\n  }\n\n  return { bytes, offset, error, isWildcarded, subscriptionInfo };\n}\n\nconst DestinationUtil = {\n  createPrefix,\n  createTemporaryName,\n  decodeBytes,\n  encode,\n  encodeBytes,\n  legacyValidate,\n  toSafeChars,\n  validateAndEncode,\n};\n\nmodule.exports.DestinationUtil = DestinationUtil;\n","const { APIPropertiesValidators } = require('solclient-util');\nconst { QueueAccessType } = require('./queue-access-types');\nconst { QueueDiscardBehavior } = require('./queue-discard-behaviors');\nconst { QueuePermissions } = require('./queue-permissions');\n\nconst {\n  validateInstance,\n  valBoolean,\n  valIsMember,\n  valNumber,\n  valRange,\n} = APIPropertiesValidators;\n\n\nconst QueuePropertiesValidator = {\n  validate(instance) {\n    const v = validateInstance.bind(null, 'QueueProperties', instance);\n    if (instance.permissions !== undefined && instance.permissions !== null) {\n      v('permissions', [valIsMember, QueuePermissions, 'QueuePermissions']);\n    }\n    if (instance.accessType !== undefined && instance.accessType !== null) {\n      v('accessType', [valIsMember, QueueAccessType, 'QueueAccessType']);\n    }\n    if (instance.quotaMB !== undefined && instance.quotaMB !== null) {\n      v('quotaMB', [valNumber], [valRange, 0, 2 ** 32 -1]);\n    }\n    if (instance.maxMessageSize !== undefined && instance.maxMessageSize !== null) {\n      v('maxMessageSize', [valNumber], [valRange, 0, 2 ** 32 -1]);\n    }\n    if (instance.respectsTTL !== undefined && instance.respectsTTL !== null) {\n      v('respectsTTL', [valBoolean]);\n    }\n    if (instance.discardBehavior !== undefined && instance.discardBehavior !== null) {\n      v('discardBehavior', [valIsMember, QueueDiscardBehavior, 'QueueDiscardBehavior']);\n    }\n    if (instance.maxMessageRedelivery !== undefined && instance.maxMessageRedelivery !== null) {\n      v('maxMessageRedelivery', [valNumber], [valRange, 0, 255]);\n    }\n  },\n};\n\nmodule.exports.QueuePropertiesValidator = QueuePropertiesValidator;\n","// Preferred configuration for the profile system:\n\n// End user:\n//  opaque profiles, property-style access\n// API implementation:\n//  inherited properties, property-style access\n// A root, forward compatible profile\n// A legacy, backwards compatible profile\n// Feature/milestone profiles that inherit from one of these two configurations\n\n// The lowest-friction way of doing this is using prototype inheritance.\n// Also considered:\n//  getProperty() with child->parent pointers -- mixes string\n//    and property access\n//  ES6 proxies -- not universal and not shimmable\n\n// Necessary to abuse prototype inheritance for static property inheritance:\n/* eslint-disable class-methods-use-this */\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users. Users should obtain an instance from\n * {@link solace.SolclientFactoryProfiles}.</b>\n *\n * A factory profile determines the default functionality of the API. Profiles are predefined\n * combinations of capabilities that represent a mutually-consistent, valid configuration state\n * for API features.\n *\n * The factory may be initialized exactly once, with a single factory profile.\n *\n * Changing which factory profile is used by {@link solace.SolclientFactory.init} may result in\n * different default property values, validation, function signatures and implementations.\n *\n * Changing the factory profile will not change relationships between API methods. That is,\n * assuming all properties and arguments are explicitly set, an application may call the\n * API with the same values as before to cause the same result, unless explicitly noted.\n *\n * If no profile is specified, the default will provide equivalent functionality to\n * SolclientJS version 7.x. New applications are encouraged to use the\n * {@link solace.SolclientFactoryProfiles.version10_5} profile for the best compatibility with\n * other APIs (excluding 7.x JavaScript APIs).\n *\n * @memberof solace\n * @private\n */\nclass FactoryProfile {\n  /**\n   * Returns whether Guaranteed Messaging is enabled for the API. When `true`,\n   * AD publishing capability is enabled by default.\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  get guaranteedMessagingEnabled() { return undefined; }\n\n  /**\n   * Returns whether the API will allow Comet (long-held HTTP request) transports\n   * to be used. If this is `true`, transport protocols may fall back to HTTP\n   * if a connection cannot be established with a preferred protocol.\n   *\n   *  * NOTE: Guaranteed Messaging cannot be enabled if Comet is enabled.\n   *\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  get cometEnabled() { return undefined; }\n\n  /**\n   * Returns whether the API performs UTF-8 encoding on user strings where the SMF\n   * spec requires it.\n   *  * When this is `true`, the API will correctly interoperate with other Solace APIs that send\n   *    UTF-8 encoded topics.\n   *  * When this is `false`, the API will interoperate correctly with 7.x and earlier JavaScript\n   *    APIs, that used an arbitrary encoding for such strings.\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  get topicUtf8Encode() { return undefined; }\n\n  /**\n   * Returns whether the API returns BYTEARRAY SDT values as Strings.\n   *\n   * In older versions (before 10.5) of the API,\n   * an SDTField with type BYTEARRAY returned a String from getValue().\n   * Newer versions (since 10.5),\n   * getValue() for the same type returns an actual ByteArray, unless this property is `true`.\n   *\n   *  * When this is `true`, SDTField.getValue() returns a String for a BYTEARRAY.\n   *  * When this is `false`, SDTField.getValue() returns a ByteArray for a BYTEARRAY.\n   *\n   * @type {Boolean}\n   * @readonly\n   */\n  get byteArrayAsString() { return undefined; }\n\n  [util_inspect_custom]() {\n    return {\n      'guaranteedMessagingEnabled': this.guaranteedMessagingEnabled,\n      'cometEnabled':               this.cometEnabled,\n      'topicUtf8Encode':            this.topicUtf8Encode,\n      'byteArrayAsString':          this.byteArrayAsString,\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\n/**\n * The Version 7 profile for SolclientJS. This profile sets factory and session default values\n * that provide SolclientJS 7.x behaviour, and interoperability with SolclientJS 7.x clients.\n *\n * @namespace\n * @type {solace.FactoryProfile}\n * @name version7\n * @memberof solace.SolclientFactoryProfiles\n * @private\n * @FactoryProfile\n */\nclass Version7Profile extends FactoryProfile {\n  /**\n   * Returns `false`: Guaranteed Messaging is disabled by default to maintain availability of Comet\n   * HTTP transports by default.\n   *\n   * @name solace.SolclientFactoryProfiles.version7.guaranteedMessagingEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  /**\n   * Returns `true`: Guaranteed Messaging is enabled for the API. Note that version 7.x SolclientJS\n   * clients cannot send or receive any messages using Guaranteed Messaging features.\n   *\n   * @name solace.SolclientFactoryProfiles.version7.guaranteedMessagingEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target node\n   */\n  get guaranteedMessagingEnabled() { return !!BUILD_ENV.TARGET_NODE; }\n\n  /**\n   * Returns true: Comet HTTP transports are enabled for the API. The API user may, by default,\n   * select Comet HTTP transport protocol, and the API may fall back to these protocols during a\n   * connection attempt.\n   *\n   * @name solace.SolclientFactoryProfiles.version7.cometEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  /**\n   * Returns false: Comet HTTP transports are not present in Node.js.\n   *\n   * @name solace.SolclientFactoryProfiles.version7.cometEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target node\n   */\n  get cometEnabled() { return !!BUILD_ENV.TARGET_BROWSER; }\n  /**\n   * Returns false: topic UTF-8 encoding is disabled for the API. The network encoding of topics is\n   * compatible with other SolclientJS 7.x clients, and may not be interoperable with other\n   * Solace Messaging APIs.\n   *\n   * @name solace.SolclientFactoryProfiles.version7.topicUtf8Encode\n   * @type {Boolean}\n   * @readonly\n   */\n  get topicUtf8Encode() { return false; }\n\n  /**\n   * Returns true: getValue() of SDTFields of type BYTEARRAY return a string,\n   * and so does getBinaryAttachment().\n   *\n   * @name solace.SolclientFactoryProfiles.version7.byteArrayAsString\n   * @type {Boolean}\n   * @readonly\n   */\n  get byteArrayAsString() { return true; }\n}\nconst legacyInstance = new Version7Profile();\n\n/**\n * The Version 10 profile for SolclientJS. This profile sets factory and session default values\n * that provide the full capability of the API as of version 10.0, including interoperability with\n * other Solace Messaging products.\n *\n * @namespace\n * @name version10\n * @memberof solace.SolclientFactoryProfiles\n * @private\n * @FactoryProfile\n */\nclass Version10Profile extends FactoryProfile {\n  /**\n   * Returns `true`: Guaranteed Messaging is enabled for the API,\n   * with the result that {@link solace.MessagePublisherProperties#enabled} is `true` by default\n   * on platforms that support Guaranteed Messaging publishing.\n   *\n   * Where the {@link solace.TransportType.WS_BINARY} transport is unavailable,\n   * {@link solace.MessagePublisherProperties#enabled} is `false` by\n   * default.\n   *\n   * @name solace.SolclientFactoryProfiles.version10.guaranteedMessagingEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  /**\n   * Returns `true`: Guaranteed Messaging is enabled by default for the API.\n   *\n   * @name solace.SolclientFactoryProfiles.version10.guaranteedMessagingEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target node\n   */\n  get guaranteedMessagingEnabled() {\n    return true;\n  }\n  /**\n   * Returns `false`: Comet HTTP transports are disabled for the API. The API will not select or\n   * fall back to HTTP Comet transport protocols, which are mutually exclusive of Guaranteed\n   * Messaging features.\n   *\n   * @name solace.SolclientFactoryProfiles.version10.cometEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  /**\n   * Returns false: Comet HTTP transports are not present in Node.js.\n   *\n   * @name solace.SolclientFactoryProfiles.version10.cometEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target node\n   */\n  get cometEnabled() {\n    return false;\n  }\n  /**\n   * Returns `true`: the API will encode topics for interoperability with other Solace Messaging\n   * products. SolclientJS 7.x clients may fail to correctly decode when topic names that include\n   * multi-byte UTF-8 code points.\n   *\n   * @name solace.SolclientFactoryProfiles.version10.topicUtf8Encode\n   * @type {Boolean}\n   * @readonly\n   */\n  get topicUtf8Encode() {\n    return true;\n  }\n\n  /**\n   * Returns true: getValue() of SDTFields of type BYTEARRAY return a string,\n   * and so does getBinaryAttachment().\n   *\n   * @name solace.SolclientFactoryProfiles.version10.byteArrayAsString\n   * @type {Boolean}\n   * @readonly\n   */\n  get byteArrayAsString() { return true; }\n}\n\nconst v10Instance = new Version10Profile();\n\n/**\n * The Version 10.5 profile for SolclientJS. This profile sets factory and session default values\n * that provide the full capability of the API as of version 10.5, including interoperability with\n * other Solace Messaging products.\n *\n * @namespace\n * @name version10_5\n * @memberof solace.SolclientFactoryProfiles\n * @private\n * @FactoryProfile\n */\nclass Version105Profile extends FactoryProfile {\n  /**\n   * Returns `true`: Guaranteed Messaging is enabled for the API,\n   * with the result that {@link solace.MessagePublisherProperties#enabled} is `true` by default\n   * on platforms that support Guaranteed Messaging publishing.\n   *\n   * Where the {@link solace.TransportType.WS_BINARY} transport is unavailable,\n   * {@link solace.MessagePublisherProperties#enabled} is `false` by\n   * default.\n   *\n   * @name solace.SolclientFactoryProfiles.version10_5.guaranteedMessagingEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  /**\n   * Returns `true`: Guaranteed Messaging is enabled by default for the API.\n   *\n   * @name solace.SolclientFactoryProfiles.version10_5.guaranteedMessagingEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target node\n   */\n  get guaranteedMessagingEnabled() {\n    return true;\n  }\n  /**\n   * Returns `false`: Comet HTTP transports are disabled for the API. The API will not select or\n   * fall back to HTTP Comet transport protocols, which are mutually exclusive of Guaranteed\n   * Messaging features.\n   *\n   * @name solace.SolclientFactoryProfiles.version10_5.cometEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target browser\n   */\n  /**\n   * Returns false: Comet HTTP transports are not present in Node.js.\n   *\n   * @name solace.SolclientFactoryProfiles.version10_5.cometEnabled\n   * @type {Boolean}\n   * @readonly\n   * @target node\n   */\n  get cometEnabled() {\n    return false;\n  }\n  /**\n   * Returns `true`: the API will encode topics for interoperability with other Solace Messaging\n   * products. SolclientJS 7.x clients may fail to correctly decode when topic names that include\n   * multi-byte UTF-8 code points.\n   *\n   * @name solace.SolclientFactoryProfiles.version10_5.topicUtf8Encode\n   * @type {Boolean}\n   * @readonly\n   */\n  get topicUtf8Encode() {\n    return true;\n  }\n\n  /**\n   * Returns false: getValue() of SDTFields of type BYTEARRAY return a Uint8Array,\n   * and so does getBinaryAttachment().\n   *\n   * @name solace.SolclientFactoryProfiles.version10_5.byteArrayAsString\n   * @type {Boolean}\n   * @readonly\n   */\n  get byteArrayAsString() { return false; }\n}\n\n\nconst forwardInstance = new Version105Profile();\n\n/**\n * The collection of predefined factory profiles available for application use.\n *\n * See each member for a description of its configuration.\n *\n * @namespace\n * @memberof solace\n * @FactoryProfile\n */\nconst SolclientFactoryProfiles = {\n  _legacy:  legacyInstance,\n  _v10:     v10Instance,\n  _forward: forwardInstance,\n  _default: legacyInstance,\n\n  /**\n   * The version 7 profile for browsers. {@link solace.SolclientFactoryProfiles.version7}\n   *\n   * The version 7 profile configures API defaults for interoperability with the\n   * SolclientJS 7.x API, and applications that use it.\n   *\n   * {@link solace.SolclientFactoryProfiles.version7}\n   *\n   * @name version7\n   * @memberof solace.SolclientFactoryProfiles\n   * @type {solace.FactoryProfile}\n   * @target browser\n   * @FactoryProfile\n   */\n  /**\n   * The version 7 profile for Node.JS. {@link solace.SolclientFactoryProfiles.version7}\n   *\n   * A version 7 profile configures API defaults for interoperability with the\n   * SolclientJS 7.x API, and applications that use it.\n   *\n   * {@link solace.SolclientFactoryProfiles.version7}\n   *\n   * @name version7\n   * @memberof solace.SolclientFactoryProfiles\n   * @type {solace.FactoryProfile}\n   * @target node\n   * @FactoryProfile\n   */\n  version7: legacyInstance,\n\n  /**\n   * The version 10 profile for Node.JS.\n   *\n   * The version 10 profile configures API defaults for use with Guaranteed Messaging, and other\n   * Solace Messaging APIs.\n   * It provides a backwards-compatibility mode for existing applications\n   * expecting SDTField.getValue() to return a string for BYTEARRAYs.\n   *\n   * {@link solace.SolclientFactoryProfiles.version10}\n   *\n   * @name version10\n   * @memberof solace.SolclientFactoryProfiles\n   * @type {solace.FactoryProfile}\n   * @target node\n   * @FactoryProfile\n   */\n  /**\n   * The version 10 profile for browsers.\n   *\n   * The version 10 profile configures API defaults for use with Guaranteed Messaging, and other\n   * Solace Messaging APIs.\n   * It provides a backwards-compatibility mode for existing applications\n   * expecting SDTField.getValue() to return a string for BYTEARRAYs.\n   *\n   * {@link solace.SolclientFactoryProfiles.version10}\n   *\n   * @name version10\n   * @memberof solace.SolclientFactoryProfiles\n   * @type {solace.FactoryProfile}\n   * @target browser\n   * @FactoryProfile\n   */\n  version10: v10Instance,\n\n  /**\n   * The version 10.5 profile for browsers.\n   *\n   * The version 10.5 profile configures API defaults for use with Guaranteed Messaging, and other\n   * Solace Messaging APIs.\n   *\n   * {@link solace.SolclientFactoryProfiles.version10_5}\n   *\n   * @name version10_5\n   * @memberof solace.SolclientFactoryProfiles\n   * @type {solace.FactoryProfile}\n   * @target browser\n   * @FactoryProfile\n   */\n  /**\n   * The version 10.5 profile for Node.JS.\n   *\n   * The version 10.5 profile configures API defaults for use with Guaranteed Messaging, and other\n   * Solace Messaging APIs.\n   *\n   * {@link solace.SolclientFactoryProfiles.version10_5}\n   *\n   * @name version10_5\n   * @memberof solace.SolclientFactoryProfiles\n   * @type {solace.FactoryProfile}\n   * @target node\n   * @FactoryProfile\n   */\n  version10_5: forwardInstance,\n\n  [util_inspect_custom]() {\n    return {\n      'version7':    this.version7,\n      'version10':   this.version10,\n      'version10_5': this.version10_5,\n    };\n  },\n\n  toString() {\n    return util_inspect(this);\n  },\n};\n\nmodule.exports.FactoryProfile = FactoryProfile;\nmodule.exports.SolclientFactoryProfiles = SolclientFactoryProfiles;\n","const MessageLib = require('solclient-message');\nconst { BidiMap, Lazy } = require('solclient-eskit');\nconst { Bits, Convert } = require('solclient-convert');\nconst { ContentSummaryElement } = require('./content-summary-element');\nconst { ContentSummaryType } = require('./content-summary-types');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { LOG_ERROR } = require('solclient-log');\nconst { SMFUH } = require('../message-objects');\n\nconst { lazyValue } = Lazy;\nconst {\n  int8ToStr,\n  int16ToStr,\n  int24ToStr,\n  int32ToStr,\n} = Convert;\n\nconst delModeEnumBidiMap = lazyValue(\n  () => {\n    // Single bidirectional map for lookups. Note that the forward\n    // keys are converted to strings.\n    const source = [\n      [0x00, MessageLib.MessageDeliveryModeType.NON_PERSISTENT],\n      [0x01, MessageLib.MessageDeliveryModeType.PERSISTENT],\n      [0x02, MessageLib.MessageDeliveryModeType.DIRECT],\n    ].map(el => [el[0], el[1]]);\n    return new BidiMap(...source);\n  });\nconst lutDelModeToEnum = lazyValue(() => delModeEnumBidiMap.value.forward);\nconst lutEnumToDelMode = lazyValue(() => delModeEnumBidiMap.value.reverse);\n\n/**\n * SMF TLV Param LUT\n * utTypeMap[uh][paramtype] is the binary prefix for a regular (not LW) TLV\n * parameter with uh and paramtype values as accessed in the array.\n *\n * @private\n */\nconst uhTypeMap = (() => {\n  const result = [];\n  const paramTypeBits = 5;\n  const paramTypeCount = Math.pow(2, paramTypeBits);\n  SMFUH.values.forEach((uh) => {\n    result[uh] = [];\n    for (let i = 0; i < paramTypeCount; ++i) {\n      let byte1 = 0;\n      byte1 = Bits.set(byte1, uh, 6, 2);\n      byte1 = Bits.set(byte1, i, 0, paramTypeBits);\n      result[uh][i] = int8ToStr(byte1);\n    }\n  });\n  return result;\n})();\n\n/**\n * SMF TLV length map LUT\n *\n * lenMap[x] === String.fromCharCode(x)\n *\n * @private\n */\nconst lenMap = (new Array(256).fill(null).map((_, idx) => int8ToStr(idx)));\n\n/**\n * SMF Lightweight Param LUT\n *\n * lightMap[uh][paramtype][len] is the prefix for an SMF LWP\n * with uh, paramtype and len values as accessed in the array.\n *\n * @private\n */\nconst lightMap = (() => {\n  const result = [];\n  const paramTypeBits = 3;\n  const paramTypeCount = Math.pow(2, paramTypeBits);\n  const lenBits = 2;\n  const lenCount = Math.pow(2, lenBits);\n  SMFUH.values.forEach((uh) => {\n    result[uh] = [];\n    for (let i = 0; i < paramTypeCount; ++i) {\n      result[uh][i] = [];\n      for (let j = 0; j < lenCount; ++j) {\n        let byte1 = 0;\n        byte1 = Bits.set(byte1, uh, 6, 2);\n        byte1 = Bits.set(byte1, 1, 5, 1);\n        byte1 = Bits.set(byte1, i, 2, 3);\n        byte1 = Bits.set(byte1, j, 0, 2);\n        result[uh][i][j] = int8ToStr(byte1);\n      }\n    }\n  });\n  return result;\n})();\n\nconst ContentSummaryDecodeMap = [\n  ContentSummaryType.XML_META,\n  ContentSummaryType.XML_PAYLOAD,\n  ContentSummaryType.BINARY_ATTACHMENT,\n  ContentSummaryType.CID_LIST,\n  ContentSummaryType.BINARY_METADATA,\n];\n\nconst ParamParse = {};\n\nParamParse.FORCED_LENGTH_MODE = {\n  FIVE:  5,\n  SIX:   6\n};\n\nParamParse.parseTopicQueueOffsets = function parseTopicQueueOffsets(dataBuf, offset) {\n  const result = [];\n  result[0] = dataBuf.readUInt8(offset);\n  result[1] = dataBuf.readUInt8(offset + 1);\n  return result;\n};\n\nParamParse.parseResponseParam = function parseResponseParam(dataBuf, offset, paramLen) {\n  const result = [];\n  result[0] = dataBuf.readInt32BE(offset);\n  if (paramLen > 4) {\n    result[1] = dataBuf.toString('latin1', offset + 4, offset + paramLen);\n  } else {\n    result[1] = '';\n  }\n  return result;\n};\n\nParamParse.parseDeliveryMode = function parseDeliveryMode(dataBuf, offset) {\n  const delmode = dataBuf.readUInt8(offset);\n  const lookup = lutDelModeToEnum.value.get(delmode);\n  return lookup !== undefined ? lookup : MessageLib.MessageDeliveryModeType.DIRECT;\n};\n\nParamParse.encDeliveryMode = function encDeliveryMode(delmode) {\n  const lut = lutEnumToDelMode.value;\n  const lookup = lut.get(delmode);\n  return int8ToStr(lookup !== undefined ? lookup : MessageLib.MessageDeliveryModeType.DIRECT);\n};\n\nParamParse.parseContentSummary = function parseContentSummary(dataBuf, offset, length) {\n  const elements = [];\n  let cumulativeSize = 0;\n  let pos = offset;\n\n  while (pos < offset + length) {\n    const byte1 = dataBuf.readUInt8(pos);\n    const elementType = Bits.get(byte1, 4, 4);\n    const elementDeclaredLength = Bits.get(byte1, 0, 4);\n    let elementSize = 0;\n    switch (elementDeclaredLength) {\n      case 2:\n        elementSize = dataBuf.readUInt8(pos + 1);\n        break;\n      case 3:\n        elementSize = dataBuf.readUInt16BE(pos + 1);\n        break;\n      case 4:\n        elementSize = dataBuf.readUIntBE(pos + 1, 3);\n        break;\n      case 5:\n        elementSize = dataBuf.readInt32BE(pos + 1);\n        break;\n      default:\n        // Allow 1 and continue;\n        break;\n    }\n\n    if (elementDeclaredLength === 0) {\n      LOG_ERROR('Invalid content summary parameter - pos not advancing');\n      return null;\n    }\n    pos += elementDeclaredLength;\n\n    const cst = ContentSummaryDecodeMap[elementType];\n    if (cst === undefined) {\n      LOG_ERROR(`Unhandled element type ${elementType}`);\n    }\n    const currentElement = new ContentSummaryElement(cst, cumulativeSize, elementSize);\n    elements.push(currentElement);\n    cumulativeSize += elementSize;\n  } // end while loop\n  return elements;\n};\n\nParamParse.encContentSummary = function encContentSummary(contentSummaryArr) {\n  const messageElementDescriptions = [];\n  for (let i = 0, n = contentSummaryArr.length; i < n; ++i) {\n    // a ContentSummaryElement\n    const currentContentSummary = contentSummaryArr[i];\n    let currentSizeStr = '';\n    let firstByte = Bits.set(0, currentContentSummary.type, 4, 4);\n    if (currentContentSummary.length <= 255) {\n      // element length: 2\n      firstByte = Bits.set(firstByte, 2, 0, 4);\n      currentSizeStr = int8ToStr(currentContentSummary.length);\n    } else if (currentContentSummary.length <= 65535) {\n      firstByte = Bits.set(firstByte, 3, 0, 4);\n      currentSizeStr = int16ToStr(currentContentSummary.length);\n    } else if (currentContentSummary.length <= 16777215) {\n      firstByte = Bits.set(firstByte, 4, 0, 4);\n      currentSizeStr = int24ToStr(currentContentSummary.length);\n    } else {\n      firstByte = Bits.set(firstByte, 5, 0, 4);\n      currentSizeStr = int32ToStr(currentContentSummary.length);\n    }\n    messageElementDescriptions.push(int8ToStr(firstByte));\n    messageElementDescriptions.push(currentSizeStr);\n  }\n  return messageElementDescriptions.join('');\n};\n\nParamParse.encodeSMFParam = function encodeSMFParam(uh, paramtype, value) {\n  if (value === undefined) {\n    return uhTypeMap[uh][paramtype] + lenMap[2];\n  }\n  const len = value.length;\n  if (len <= 253) {\n    return uhTypeMap[uh][paramtype] + lenMap[len + 2] + value;\n  }\n  return uhTypeMap[uh][paramtype] + lenMap[0] + int32ToStr(len + 6) + value;\n};\n\n\nParamParse.encodeSMFExtendedParam = function encodeSMFExtendedParam(uh, paramtype, value, forcedLengthMode = -1) {\n  let byte1 = 0;\n  byte1 = Bits.set(byte1, (uh ? 1 : 0), 7, 1);\n  const length = ((value === undefined || value === null) ? 0 : value.length);\n  // Bits 1-3 of an extended param (not named in the spec, lengthMode here)\n  // can indicate value lengths 0-8 bytes, or 1-2 byte variable length.\n  const lengthModeMap = { 0: 0, 1: 1, 2: 2, 4: 3, 8: 4 };\n  let lengthMode = 0;\n  let lengthString = '';\n\n  // prevent unsupported value from breaking default behaviour\n  if(forcedLengthMode !== ParamParse.FORCED_LENGTH_MODE.FIVE && forcedLengthMode !== ParamParse.FORCED_LENGTH_MODE.SIX) {\n    forcedLengthMode = -1;\n  }\n\n  // EsLint made me do it.\n  if (Object.prototype.hasOwnProperty.call(lengthModeMap, length)) {\n    lengthMode = lengthModeMap[length];\n  } else if (\n    ((length < 253) && forcedLengthMode !== ParamParse.FORCED_LENGTH_MODE.SIX) \n    || (forcedLengthMode === ParamParse.FORCED_LENGTH_MODE.FIVE)\n  ) {\n    lengthMode = 5;\n    lengthString = int8ToStr(length + 3);\n  } else if (\n    ((length < 256 * 256 - 4) && forcedLengthMode !== ParamParse.FORCED_LENGTH_MODE.FIVE) \n    || (forcedLengthMode === ParamParse.FORCED_LENGTH_MODE.SIX)\n  ) {\n    lengthMode = 6;\n    lengthString = int16ToStr(length + 4);\n  } else {\n    LOG_ERROR(`Extended parameter type ${paramtype} is too long (${length} bytes) `);\n    throw new OperationError(`Extended parameter (${paramtype}) over the 2^16 byte limit`,\n        ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n  }\n\n  byte1 = Bits.set(byte1, lengthMode, 4, 3);\n  byte1 = Bits.set(byte1, (paramtype >> 8), 0, 4);\n  const byte2 = paramtype & 0xFF;\n  return int8ToStr(byte1) + int8ToStr(byte2) + lengthString + value;\n};\n\nParamParse.encLightSMFParam = function encLightSMFParam(uh, paramtype, value) {\n  return lightMap[uh][paramtype][value.length] + value;\n};\n\nmodule.exports.ParamParse = ParamParse;\n","const { Codec } = require('./lib/codec');\nconst { SDTDestType } = require('./lib/sdt-destination-types');\nconst { SDTField } = require('./lib/sdt-field');\nconst { SDTFieldType } = require('./lib/sdt-field-types');\nconst { SDTMapContainer } = require('./lib/sdt-map-container');\nconst { SDTStreamContainer } = require('./lib/sdt-stream-container');\nconst { SDTUnsupportedValueError } = require('./lib/sdt-unsupported-value-error');\nconst { SDTValueErrorSubcode } = require('./lib/sdt-value-error-subcodes');\n\nmodule.exports.Codec = Codec;\nmodule.exports.SDTDestType = SDTDestType;\nmodule.exports.SDTField = SDTField;\nmodule.exports.SDTFieldType = SDTFieldType;\nmodule.exports.SDTMapContainer = SDTMapContainer;\nmodule.exports.SDTStreamContainer = SDTStreamContainer;\nmodule.exports.SDTUnsupportedValueError = SDTUnsupportedValueError;\nmodule.exports.SDTValueErrorSubcode = SDTValueErrorSubcode;\n","const { Check } = require('./lib/check');\nconst { Parameter } = require('./lib/parameter');\n\nmodule.exports.Check = Check;\nmodule.exports.Parameter = Parameter;\n","const { Bits, Convert } = require('solclient-convert');\n\nconst {\n  get: bits,\n} = Bits;\nconst {\n  int8ToStr,\n  int24ToStr,\n} = Convert;\n\n/**\n * @classdesc\n *\n * BinaryMetaBlock represents a binary metadata block in a TrMsg\n *\n * @private\n */\nclass BinaryMetaBlock {\n  constructor(type, payload) {\n    this.type = type;\n    this.payload = payload;\n  }\n\n  asEncodedSmf() {\n    const smf = [];\n    smf.push(int8ToStr(1));\n    smf.push(int8ToStr(this.type));\n    smf.push(int24ToStr(this.payload.length));\n    smf.push(this.payload.toString('latin1'));\n    return smf.join('');\n  }\n\n  static fromEncodedSmf(bufSmf, offset = 0) {\n    if ((bufSmf.length - offset) < 6) {\n      return null; // not enough data\n    }\n    const chunkCount = bufSmf.readUInt8(offset);\n    const fourbyte = bufSmf.readInt32BE(offset + 1);\n    const type = bits(fourbyte, 24, 8);\n    const payloadLen = bits(fourbyte, 0, 24);\n    const payloadOffset = chunkCount * 4 + 1;\n    const payload = bufSmf.slice(offset + payloadOffset, offset + payloadOffset + payloadLen);\n    return new BinaryMetaBlock(type, payload);\n  }\n\n}\n\n\nmodule.exports.BinaryMetaBlock = BinaryMetaBlock;\n","const Mixin = {};\n\n  /**\n   * @param  {Object} target The class to augment\n   * @param  {Object} add The class to mix in.\n   * @returns {Object} The augmented class\n   */\nMixin.mixin = function mixin(target, add) {\n  const targetProto = target.prototype;\n  const addProto = add.prototype;\n  Object.getOwnPropertyNames(addProto).forEach((name) => {\n    if (name === 'constructor') return;\n    Object.defineProperty(targetProto, name, Object.getOwnPropertyDescriptor(addProto, name));\n  });\n  return target;\n};\n\nmodule.exports.Mixin = Mixin;\n","const { APIProperties } = require('solclient-util');\nconst { Check } = require('solclient-validate');\n\nfunction getDefaultLogLevel() {\n  // break dependency loop\n  // eslint-disable-next-line global-require\n  const { LogLevel } = require('solclient-log');\n  return LogLevel.INFO;\n}\n\n/**\n * @classdesc\n * Properties used during initialization of {@link solace.SolclientFactory}.\n *\n * @memberof solace\n */\nclass SolclientFactoryProperties extends APIProperties {\n  /**\n   * Creates an instance of SolclientFactoryProperties.\n   *\n   * @param {Object} [options] The property names and values to apply to this instance\n   * @param {solace.LogLevel} [options.logLevel]  logLevel (default={@link solace.LogLevel.INFO}\n   * @param {solace.LogImpl} [options.logger]     log implementation (default=NULL)\n   * @param {solace.SolclientFactoryProfiles} [options.profile] Javascript profile\n   *  (default={@link solace.SolclientFactoryProfiles.version7})\n   * @memberOf SolclientFactoryProperties\n   */\n  constructor(options) {\n    super({\n      logLevel: getDefaultLogLevel(),\n      logger:   null,\n    }, options);\n  }\n\n  /**\n   * The factory profile to use. The following factory profiles are available:\n   * * {@link solace.SolclientFactoryProfiles.version7}, a backwards-compatible profile\n   *      for existing solClientJS 7.x applications\n   * * {@link solace.SolclientFactoryProfiles.version10}, the recommended profile\n   *      for new applications\n   *\n   * @type {solace.SolclientFactoryProfiles}\n   */\n  get profile() {\n    return this._profile;\n  }\n  set profile(profile) {\n    this._profile = profile;\n  }\n\n  /**\n   * The logging level to use for filtering log events. Messages with a level of lesser importance\n   * than this will be filtered out and not logged.\n   * @type {solace.LogLevel}\n   */\n  get logLevel() {\n    return Check.number(this._logLevel) ? this._logLevel : getDefaultLogLevel();\n  }\n  set logLevel(val) {\n    this._logLevel = val;\n  }\n\n  /**\n   * The logging implementation to use. In the debug API, the log implementation will be called\n   * for every log statement not filtered out by the log level. If no implementation is supplied,\n   * the default implementation will be used, which logs to the global console object.\n   * @type {solace.LogImpl}\n   */\n  get logger() {\n    return this._logger || null;\n  }\n  set logger(val) {\n    this._logger = val;\n  }\n\n  [util_inspect_custom]() {\n    // break dependency loop\n    // eslint-disable-next-line global-require\n    const { LogLevel } = require('solclient-log');\n    return {\n      'logLevel': LogLevel.describe(this._logLevel),\n      'profile':  this._profile,\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.SolclientFactoryProperties = SolclientFactoryProperties;\n","module.exports = require(\"os\");","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex\" }] */\n\n'use strict';\n\nconst { Duplex } = require('stream');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER, kWebSocket, NOOP } = require('./constants');\nconst { isBlob, isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst kByteLength = Symbol('kByteLength');\nconst maskBuffer = Buffer.alloc(4);\nconst RANDOM_POOL_SIZE = 8 * 1024;\nlet randomPool;\nlet randomPoolPointer = RANDOM_POOL_SIZE;\n\nconst DEFAULT = 0;\nconst DEFLATING = 1;\nconst GET_BLOB_DATA = 2;\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {Duplex} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Function} [generateMask] The function used to generate the masking\n   *     key\n   */\n  constructor(socket, extensions, generateMask) {\n    this._extensions = extensions || {};\n\n    if (generateMask) {\n      this._generateMask = generateMask;\n      this._maskBuffer = Buffer.alloc(4);\n    }\n\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._queue = [];\n    this._state = DEFAULT;\n    this.onerror = NOOP;\n    this[kWebSocket] = undefined;\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {(Buffer|String)} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {(Buffer|String)[]} The framed data\n   * @public\n   */\n  static frame(data, options) {\n    let mask;\n    let merge = false;\n    let offset = 2;\n    let skipMasking = false;\n\n    if (options.mask) {\n      mask = options.maskBuffer || maskBuffer;\n\n      if (options.generateMask) {\n        options.generateMask(mask);\n      } else {\n        if (randomPoolPointer === RANDOM_POOL_SIZE) {\n          /* istanbul ignore else  */\n          if (randomPool === undefined) {\n            //\n            // This is lazily initialized because server-sent frames must not\n            // be masked so it may never be used.\n            //\n            randomPool = Buffer.alloc(RANDOM_POOL_SIZE);\n          }\n\n          randomFillSync(randomPool, 0, RANDOM_POOL_SIZE);\n          randomPoolPointer = 0;\n        }\n\n        mask[0] = randomPool[randomPoolPointer++];\n        mask[1] = randomPool[randomPoolPointer++];\n        mask[2] = randomPool[randomPoolPointer++];\n        mask[3] = randomPool[randomPoolPointer++];\n      }\n\n      skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n      offset = 6;\n    }\n\n    let dataLength;\n\n    if (typeof data === 'string') {\n      if (\n        (!options.mask || skipMasking) &&\n        options[kByteLength] !== undefined\n      ) {\n        dataLength = options[kByteLength];\n      } else {\n        data = Buffer.from(data);\n        dataLength = data.length;\n      }\n    } else {\n      dataLength = data.length;\n      merge = options.mask && options.readOnly && !skipMasking;\n    }\n\n    let payloadLength = dataLength;\n\n    if (dataLength >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (dataLength > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(dataLength, 2);\n    } else if (payloadLength === 127) {\n      target[2] = target[3] = 0;\n      target.writeUIntBE(dataLength, 4, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (skipMasking) return [target, data];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, dataLength);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, dataLength);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    const options = {\n      [kByteLength]: buf.length,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x08,\n      readOnly: false,\n      rsv1: false\n    };\n\n    if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, buf, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(buf, options), cb);\n    }\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x09,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x0a,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = byteLength >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    const opts = {\n      [kByteLength]: byteLength,\n      fin: options.fin,\n      generateMask: this._generateMask,\n      mask: options.mask,\n      maskBuffer: this._maskBuffer,\n      opcode,\n      readOnly,\n      rsv1\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, this._compress, opts, cb]);\n      } else {\n        this.getBlobData(data, this._compress, opts, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n    } else {\n      this.dispatch(data, this._compress, opts, cb);\n    }\n  }\n\n  /**\n   * Gets the contents of a blob as binary data.\n   *\n   * @param {Blob} blob The blob\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     the data\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  getBlobData(blob, compress, options, cb) {\n    this._bufferedBytes += options[kByteLength];\n    this._state = GET_BLOB_DATA;\n\n    blob\n      .arrayBuffer()\n      .then((arrayBuffer) => {\n        if (this._socket.destroyed) {\n          const err = new Error(\n            'The socket was closed while the blob was being read'\n          );\n\n          //\n          // `callCallbacks` is called in the next tick to ensure that errors\n          // that might be thrown in the callbacks behave like errors thrown\n          // outside the promise chain.\n          //\n          process.nextTick(callCallbacks, this, err, cb);\n          return;\n        }\n\n        this._bufferedBytes -= options[kByteLength];\n        const data = toBuffer(arrayBuffer);\n\n        if (!compress) {\n          this._state = DEFAULT;\n          this.sendFrame(Sender.frame(data, options), cb);\n          this.dequeue();\n        } else {\n          this.dispatch(data, compress, options, cb);\n        }\n      })\n      .catch((err) => {\n        //\n        // `onError` is called in the next tick for the same reason that\n        // `callCallbacks` above is.\n        //\n        process.nextTick(onError, this, err, cb);\n      });\n  }\n\n  /**\n   * Dispatches a message.\n   *\n   * @param {(Buffer|String)} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += options[kByteLength];\n    this._state = DEFLATING;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        callCallbacks(this, err, cb);\n        return;\n      }\n\n      this._bufferedBytes -= options[kByteLength];\n      this._state = DEFAULT;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (this._state === DEFAULT && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[3][kByteLength];\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[3][kByteLength];\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {(Buffer | String)[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n\n/**\n * Calls queued callbacks with an error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error to call the callbacks with\n * @param {Function} [cb] The first callback\n * @private\n */\nfunction callCallbacks(sender, err, cb) {\n  if (typeof cb === 'function') cb(err);\n\n  for (let i = 0; i < sender._queue.length; i++) {\n    const params = sender._queue[i];\n    const callback = params[params.length - 1];\n\n    if (typeof callback === 'function') callback(err);\n  }\n}\n\n/**\n * Handles a `Sender` error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error\n * @param {Function} [cb] The first pending callback\n * @private\n */\nfunction onError(sender, err, cb) {\n  callCallbacks(sender, err, cb);\n  sender.onerror(err);\n}\n","const { SessionEvent } = require('./session-event');\n\nclass ProvisionEvent extends SessionEvent {\n  /**\n   * @constructor\n   * @param {solace.SessionEventCode} sessionEventCode The event code\n   * @param {String} infoStr Information string\n   * @param {Number} [responseCode] Any associated router response code\n   * @param {solace.ErrorSubcode} [errorSubcode] Any associated error subcode\n   * @param {Object|String|null|undefined} [correlationKey] Any associated correlation key\n   * @param {String} [reason] Any additional information\n   * @param {QueueDescriptor} queueDescriptor Endpoint name and type as returned by the broker\n   * @param {QueueProperties} queueProperties Endpoint proerties as returned by the broker\n   * @private\n   */\n  constructor(\n      sessionEventCode,\n      infoStr,\n      responseCode = undefined,\n      errorSubcode = 0,\n      correlationKey = undefined,\n      reason = undefined,\n      queueDescriptor = null,\n      queueProperties = null) {\n  super([], sessionEventCode, infoStr, responseCode, errorSubcode, correlationKey, reason );\n  this._queueDescriptor = queueDescriptor;\n  this._queueProperties = queueProperties;\n  }\n\n\n  /**\n   * @type {QueueDescriptor}\n   * @description The endpoint name and type as returned by the broker\n   * in the provisioin/deprovision response, if any.\n   * Durability is not set.\n   * Mostly relevant when the endpoint name was not provided in the provision call.\n   * @default null\n   */\n  get queueDescriptor() {\n    return this._queueDescriptor;\n  }\n\n  /**\n   * @internal\n   */\n  set queueDescriptor(value) {\n    this._queueDescriptor = value;\n  }\n\n  /**\n   * @type {QueueProperties}\n   * @description The endpoint properties as returned by the broker\n   * in the provisioin/deprovision response, if any.\n   * Mostly relevant in case of an ENDPOINT_PROPERTY_MISMATCH provision error.\n   * @default null\n   */\n  get queueProperties() {\n    return this._queueProperties;\n  }\n\n  /**\n   * @internal\n   */\n  set queueProperties(value) {\n    this._queueProperties = value;\n  }\n  \n  [util_inspect_custom]() {\n    const result = super[util_inspect_custom]();\n    result.queueDescriptor = this._queueDescriptor;\n    result.queueProperties = this._queueProperties;\n    return result;\n  }\n\n}\n\nmodule.exports.ProvisionEvent = ProvisionEvent;\n","/**\n * Created by rpaulson on 06/02/2017.\n */\nconst { FsmEvent } = require('solclient-fsm');\n\n/**\n *\n * ConsumerFSMEvent extends {@link FsmEvent}.  This object should be used for all events\n * passed to the Subscriber FSM.  This extension provides members to carry information specfic to\n * the Subscriber FSM transitions.\n *\n * @extends FsmEvent\n * @private\n */\nclass ConsumerFSMEvent extends FsmEvent {\n  constructor(spec, details) {\n    super(spec);\n    this.details = details;\n  }\n}\n\nmodule.exports.ConsumerFSMEvent = ConsumerFSMEvent;\n","const { APIProperties } = require('./lib/api-properties');\nconst { APIPropertiesValidators } = require('./lib/api-properties-validators');\nconst { ArrayUtils } = require('./lib/array-utils');\nconst { parseURL } = require('./lib/url');\nconst { Process } = require('./lib/process');\nconst { StringBuffer } = require('./lib/string-buffer');\nconst { StringUtils } = require('./lib/string-utils');\nconst { TimingBucket } = require('./lib/timing-bucket');\nconst { UUID } = require('./lib/uuid');\nconst { Version } = require('./lib/version');\nconst clone = require('./lib/clone');\n\nmodule.exports = {\n  clone,\n  parseURL,\n\n  APIProperties,\n  APIPropertiesValidators,\n  ArrayUtils,\n  Process,\n  StringBuffer,\n  StringUtils,\n  TimingBucket,\n  UUID,\n  Version,\n};\n","const SolclientFactoryLib = require('solclient-factory');\nconst { APIProperties } = require('solclient-util');\nconst { Check } = require('solclient-validate');\nconst { MessagePublisherAcknowledgeMode } = require('./message-publisher-acknowledge-modes');\nconst { TransportCapabilities } = require('solclient-transport');\n\nfunction defaultEnablePublisher() {\n  const { ProfileBinding } = SolclientFactoryLib;\n  const binding = ProfileBinding.value;\n  const globallyEnabled = binding.guaranteedMessagingEnabled;\n  const webSocketAvailable = TransportCapabilities.web.webSocket();\n  return globallyEnabled && webSocketAvailable;\n}\n\nfunction getDefaults() {\n  return {\n    enabled:                   defaultEnablePublisher(),\n    windowSize:                50,\n    acknowledgeTimeoutInMsecs: 2000,\n    acknowledgeMode:           MessagePublisherAcknowledgeMode.PER_MESSAGE,\n    connectRetryCount:         3,\n    connectTimeoutInMsecs:     5000,\n  };\n}\n\n/**\n * @classdesc\n * Properties that define the configuration for a guaranteed message publisher.\n *\n * @memberof solace\n */\nclass MessagePublisherProperties extends APIProperties {\n  /**\n   * @constructor\n   * @param {Object} options Properties to apply to the newly constructed object.\n   */\n  constructor(options) {\n    super(getDefaults(), options || {});\n  }\n  /**\n   * @name solace.MessagePublisherProperties#enabled\n   * @type {Boolean}\n   * @description When enabled, a Guaranteed Messaging Publisher\n   * is automatically created when a session is connected.\n   *\n   * The default value is the same as the value provided to\n   * {@link solace.SolclientFactory.init},\n   * in the profile, {@link solace.SolclientFactoryProperties#profile},\n   * in the field {@link solace.FactoryProfile#guaranteedMessagingEnabled}.\n   */\n  get enabled() {\n    return this._enabled;\n  }\n  set enabled(newValue) {\n    this._enabled = newValue;\n  }\n  /**\n   * @name solace.MessagePublisherProperties#windowSize\n   * @default 50\n   * @type {Number}\n   * @description  Maximum number of messages that can be published\n   * without acknowledgment.\n   *  * The valid range is 1 <= value <= 255\n   */\n  get windowSize() {\n    return Check.defined(this._windowSize)\n      ? this._windowSize\n      : getDefaults().windowSize;\n  }\n  set windowSize(newValue) {\n    this._windowSize = newValue;\n  }\n  /**\n   * @name solace.MessagePublisherProperties#acknowledgeTimeoutInMsecs\n   * @type {Number}\n   * @default 2000\n   * @description  The time to wait for an acknowledgement,\n   * in milliseconds, before retransmitting unacknowledged\n   * messages.\n   *  * The valid range is 20 <= value <= 60000.\n   */\n  get acknowledgeTimeoutInMsecs() {\n    return Check.defined(this._acknowledgeTimeoutInMsecs)\n      ? this._acknowledgeTimeoutInMsecs\n      : getDefaults().acknowledgeTimeoutInMsecs;\n  }\n  set acknowledgeTimeoutInMsecs(newValue) {\n    this._acknowledgeTimeoutInMsecs = newValue;\n  }\n  /**\n   * @name solace.MessagePublisherProperties#acknowledgeMode\n   * @type {solace.MessagePublisherAcknowledgeMode}\n   * @default {@link solace.MessagePublisherAcknowledgeMode.PER_MESSAGE}\n   * @description  The message-router sends windowed acknowledgements\n   * which the API converts to per-message acknowledgement by default. If\n   * acknowledgeMode is Windowed, then the API will simply pass through\n   * the message-router acknowledgements.\n   */\n  get acknowledgeMode() {\n    return this._acknowledgeMode || MessagePublisherAcknowledgeMode.PER_MESSAGE;\n  }\n  set acknowledgeMode(newValue) {\n    this._acknowledgeMode = newValue;\n  }\n  /**\n   * @name solace.MessagePublisherProperties#connectRetryCount\n   * @type {Number}\n   * @default 3\n   * @description The number of times to retry a bind (aka open-flow) request\n   * before deciding the the Guaranteed Message Publisher cannot be started.\n   *  * The valid range 0 <= value.\n   * @private\n   */\n  get connectRetryCount() {\n    return Check.defined(this._connectRetryCount)\n      ? this._connectRetryCount\n      : getDefaults().connectRetryCount;\n  }\n  set connectRetryCount(newValue) {\n    this._connectRetryCount = newValue;\n  }\n  /**\n   * @name solace.MessagePublisherProperties#connectTimeoutInMsecs\n   * @type {Number}\n   * @default 5000\n   * @description  The time to wait for an bind response,\n   * in milliseconds, before retransmitting the bind request.\n   *  * The valid range is 50 <= value</li>\n   * @private\n   */\n  get connectTimeoutInMsecs() {\n    return Check.defined(this._connectTimeoutInMsecs)\n      ? this._connectTimeoutInMsecs\n      : getDefaults().connectTimeoutInMsecs;\n  }\n  set connectTimeoutInMsecs(newValue) {\n    this._connectTimeoutInMsecs = newValue;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      enabled:                   this.enabled,\n      windowSize:                this.windowSize,\n      acknowledgeTimeoutInMsecs: this.acknowledgeTimeoutInMsecs,\n      acknowledgeMode:           MessagePublisherAcknowledgeMode.describe(this.acknowledgeMode),\n      connectRetryCount:         this.connectRetryCount,\n      connectTimeoutInMsecs:     this.connectTimeoutInMsecs,\n    };\n  }\n}\n\nmodule.exports.MessagePublisherProperties = MessagePublisherProperties;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex|Readable$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Duplex, Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst { isBlob } = require('./validation');\n\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst closeTimeout = 30 * 1000;\nconst kAborted = Symbol('kAborted');\nconst protocolVersions = [8, 13];\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._errorEmitted = false;\n    this._extensions = {};\n    this._paused = false;\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._autoPong = options.autoPong;\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * For historical reasons, the custom \"nodebuffer\" type is used by the default\n   * instead of \"blob\".\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get isPaused() {\n    return this._paused;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Boolean} [options.allowSynchronousEvents=false] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      allowSynchronousEvents: options.allowSynchronousEvents,\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    const sender = new Sender(socket, this._extensions, options.generateMask);\n\n    this._receiver = receiver;\n    this._sender = sender;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    sender[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    sender.onerror = senderOnError;\n\n    //\n    // These methods may not be available if `socket` is just a `Duplex`.\n    //\n    if (socket.setTimeout) socket.setTimeout(0);\n    if (socket.setNoDelay) socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    setCloseTimer(this);\n  }\n\n  /**\n   * Pause the socket.\n   *\n   * @public\n   */\n  pause() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = true;\n    this._socket.pause();\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Resume the socket.\n   *\n   * @public\n   */\n  resume() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = false;\n    if (!this._receiver._writableState.needDrain) this._socket.resume();\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'isPaused',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether any\n *     of the `'message'`, `'ping'`, and `'pong'` events can be emitted multiple\n *     times in the same tick\n * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n *     automatically send a pong in response to a ping\n * @param {Function} [options.finishRequest] A function which can be used to\n *     customize the headers of each http request before it is sent\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Function} [options.generateMask] The function used to generate the\n *     masking key\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    allowSynchronousEvents: true,\n    autoPong: true,\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: 'GET',\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  websocket._autoPong = opts.autoPong;\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n  }\n\n  if (parsedUrl.protocol === 'http:') {\n    parsedUrl.protocol = 'ws:';\n  } else if (parsedUrl.protocol === 'https:') {\n    parsedUrl.protocol = 'wss:';\n  }\n\n  websocket._url = parsedUrl.href;\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isIpcUrl = parsedUrl.protocol === 'ws+unix:';\n  let invalidUrlMessage;\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isIpcUrl) {\n    invalidUrlMessage =\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", ' +\n      '\"http:\", \"https:\", or \"ws+unix:\"';\n  } else if (isIpcUrl && !parsedUrl.pathname) {\n    invalidUrlMessage = \"The URL's pathname is empty\";\n  } else if (parsedUrl.hash) {\n    invalidUrlMessage = 'The URL contains a fragment identifier';\n  }\n\n  if (invalidUrlMessage) {\n    const err = new SyntaxError(invalidUrlMessage);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const request = isSecure ? https.request : http.request;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection =\n    opts.createConnection || (isSecure ? tlsConnect : netConnect);\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    ...opts.headers,\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket'\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isIpcUrl) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req;\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalIpc = isIpcUrl;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isIpcUrl\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else if (websocket.listenerCount('redirect') === 0) {\n      const isSameHost = isIpcUrl\n        ? websocket._originalIpc\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalIpc\n          ? false\n          : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n\n    req = websocket._req = request(opts);\n\n    if (websocket._redirects) {\n      //\n      // Unlike what is done for the `'upgrade'` event, no early exit is\n      // triggered here if the user calls `websocket.close()` or\n      // `websocket.terminate()` from a listener of the `'redirect'` event. This\n      // is because the user can also call `request.destroy()` with an error\n      // before calling `websocket.close()` or `websocket.terminate()` and this\n      // would result in an error being emitted on the `request` object with no\n      // `'error'` event listeners attached.\n      //\n      websocket.emit('redirect', websocket.url, req);\n    }\n  } else {\n    req = websocket._req = request(opts);\n  }\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req[kAborted]) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (e) {\n        const err = new SyntaxError(`Invalid URL: ${location}`);\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the\n    // `'upgrade'` event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const upgrade = res.headers.upgrade;\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      allowSynchronousEvents: opts.allowSynchronousEvents,\n      generateMask: opts.generateMask,\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n\n  if (opts.finishRequest) {\n    opts.finishRequest(req, websocket);\n  } else {\n    req.end();\n  }\n}\n\n/**\n * Emit the `'error'` and `'close'` events.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  //\n  // The following assignment is practically useless and is done only for\n  // consistency.\n  //\n  websocket._errorEmitted = true;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream[kAborted] = true;\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    process.nextTick(emitErrorAndClose, websocket, err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = isBlob(data) ? data.size : toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    process.nextTick(cb, err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  const websocket = this[kWebSocket];\n\n  if (!websocket.isPaused) websocket._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._autoPong) websocket.pong(data, !this._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The `Sender` error event handler.\n *\n * @param {Error} The error\n * @private\n */\nfunction senderOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket.readyState === WebSocket.CLOSED) return;\n  if (websocket.readyState === WebSocket.OPEN) {\n    websocket._readyState = WebSocket.CLOSING;\n    setCloseTimer(websocket);\n  }\n\n  //\n  // `socket.end()` is used instead of `socket.destroy()` to allow the other\n  // peer to finish sending queued data. There is no need to set a timer here\n  // because `CLOSING` means that it is already set or not needed.\n  //\n  this._socket.end();\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * Set a timer to destroy the underlying raw socket of a WebSocket.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @private\n */\nfunction setCloseTimer(websocket) {\n  websocket._closeTimer = setTimeout(\n    websocket._socket.destroy.bind(websocket._socket),\n    closeTimeout\n  );\n}\n\n/**\n * The listener of the socket `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the socket `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the socket `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the socket `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents a log level enumeration.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst LogLevel = {\n  /**\n   * Fatal. Rserved for unrecoverable errors.\n   * @type {Number}\n   */\n  FATAL: 0,\n  /**\n   * Error. An internal error to the API or Solace Message Router.\n   * @type {Number}\n   */\n  ERROR: 1,\n  /**\n   * Warn. An external error which may be caused by the application passing invalid\n   * arguments or objects to the API. Often accompanied by an thrown exception.\n   * @type {Number}\n   */\n  WARN:  2,\n  /**\n   * Info. An unexpected event or occurrence that does not affect the sane\n   * operation of the SDK or application.\n   * @type {Number}\n   */\n  INFO:  3,\n  /**\n   * Debug. The highest (least) level of debug logs. Debug logs provide an overview of\n   * the API operation.\n   * @type {Number}\n   */\n  DEBUG: 4,\n  /**\n   * Trace. The loweest (most verbose) level of debug logs.\n   * @type {Number}\n   */\n  TRACE: 5,\n};\n\nmodule.exports.LogLevel = Enum.new(LogLevel);\n","/**\n * SolclientJS internal API for white-box integration testing\n * @private\n */\n\n/* _eslint-disable sort-requires/sort-requires */\n\nconst Convert = require('solclient-convert');\nconst Debug = require('solclient-debug');\nconst Destination = require('solclient-destination');\nconst Error = require('solclient-error');\nconst ESKit = require('solclient-eskit');\nconst Factory = require('solclient-factory');\nconst FSM = require('solclient-fsm');\nconst Log = require('solclient-log');\nconst Message = require('solclient-message');\nconst MessageTracing = require('solclient-message-tracing');\nconst Publisher = require('solclient-message-publisher');\nconst SDT = require('solclient-sdt');\nconst Session = require('solclient-session');\nconst SMF = require('solclient-smf');\nconst SolcacheSession = require('solclient-solcache-session');\nconst TestEnv = require('solclient-env');\nconst Transport = require('solclient-transport');\nconst Util = require('solclient-util');\nconst Validate = require('solclient-validate');\n\nmodule.exports = {\n  Convert,\n  Debug,\n  Destination,\n  Error,\n  ESKit,\n  Factory,\n  FSM,\n  Log,\n  Message,\n  MessageTracing,\n  Publisher,\n  SDT,\n  Session,\n  SMF,\n  SolcacheSession,\n  TestEnv,\n  Transport,\n  Util,\n  Validate,\n};\n","const { ErrorSubcode } = require('solclient-error');\nconst { FsmEvent } = require('solclient-fsm');\nconst { Hex } = require('solclient-convert');\n\nconst { formatHexString } = Hex;\n/**\n * SessionFSMEvent extends {@link FsmEvent}.  This object should be used for all events\n * passed to the SessionFSM.  This extension provides members to carry information specfic to\n * the SessionFSM transitions.\n * @extends FsmEvent\n * @private\n */\nclass SessionFSMEvent extends FsmEvent {\n  constructor(spec, fields) {\n    super(spec);\n    /**\n     * @type {String}\n     * @description Information String for the {SessionEvent}\n     */\n    this.eventText = null;\n    /**\n     * @type {ErrorSubcode}\n     * @description The Solace ErrorSubcode for any generated {SessionEvent}\n     */\n    this.errorSubcode = null;\n    /**\n     * @type {String}\n     * @description The reason string to be included in any generated {SessionEvent}\n     */\n    this.eventReason = null;\n    /**\n     * @type {TransportSMFMessage}\n     * @description A decoded SMF message received from the transport. May be\n     * either a {ClientCtrlMessage} or a {SMPMessage}\n     */\n    this.smfMsg = null;\n    /**\n     * @type {Object}\n     * @description The Transport SessionId retrieved from a {TransportSessionEvent}\n     */\n    this.sessionId = null;\n    /**\n     * @type {Object}\n     * @description The Publisher or Consumer object associated with a GM event.\n     */\n    this.guaranteedFlowObject = null;\n\n    Object.assign(this, fields);\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'eventText':    this.eventText,\n      'eventReason':  this.eventReason,\n      'errorSubcode': ErrorSubcode.describe(this.errorSubcode),\n      'sessionId':    this.sessionId && formatHexString(this.sessionId) || 'N/A',\n    };\n  }\n\n  getExtraStringInfo() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.SessionFSMEvent = SessionFSMEvent;\n","/**\n * @classdesc\n * A representation of an SMF parameter\n *\n * @private\n */\nclass SMFParameter {\n/**\n * @constructor\n * @param {Number} uh The UH value [0..2]\n * @param {SMFParameterType} type The type of SMF parameter\n * @param {*} value The value for this parameter\n * @param {Buffer} buffer instead of value, a buffer, with indexes (begin and end)\n * @param {Number} begin start index in buffer\n * @param {Number} end end index in buffer.\n */\n  constructor(uh, type, value, buffer, begin, end) {\n    this._type = type;\n    this._value = value;\n    this._uh = uh;\n    this._buffer = buffer;\n    this._begin = begin;\n    this._end = end;\n  }\n  getType() {\n    return this._type;\n  }\n  getValue() {\n    if (this._buffer && !this._value) {\n      return this._buffer.toString('latin1', this._begin, this._end);\n    }\n    return this._value;\n  }\n  getUh() {\n    return this._uh;\n  }\n  getBuffer() {\n    return this._buffer;\n  }\n  getBegin() {\n    return this._begin;\n  }\n  getEnd() {\n    return this._end;\n  }\n\n  toString() {\n    return `${this._uh}:0x${this._type.toString(16)} = ${this.getValue()}`;\n  }\n}\n\nmodule.exports.SMFParameter = SMFParameter;\n","const { Long } = require('solclient-convert');\n\nconst DEFAULTS = {\n  _lastAcked: Long.fromNumber(0, true),\n  _lastSent:  Long.fromNumber(0, true),\n  _next:      Long.fromNumber(1, true),\n};\n\nconst longToString = v => v.toString(10);\n\nclass MessageIds {\n  constructor(attrs) {\n    Object.assign(this, DEFAULTS, attrs);\n  }\n\n  get lastAcked() {\n    return this._lastAcked;\n  }\n  set lastAcked(value) {\n    this._lastAcked = Long.fromValue(value);\n  }\n\n  get lastSent() {\n    return this._lastSent;\n  }\n  setLastSent(id) {\n    this._lastSent = Long.fromValue(id);\n    this._next = this._lastSent.add(1);\n  }\n\n  get next() {\n    return this._next;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'lastAcked': longToString(this.lastAcked),\n      'lastSent':  longToString(this.lastSent),\n      'next':      longToString(this.next),\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.MessageIds = MessageIds;\n","const {\n  ErrorSubcode,\n  OperationError,\n} = require('solclient-error');\nconst {\n  HTTPTransportSession,\n} = require('./http');\nconst {\n  LOG_TRACE,\n  LOG_INFO,\n  LOG_ERROR,\n} = require('solclient-log');\nconst { FsmEvent } = require('solclient-fsm');\nconst { TransportBase } = require('../transport-base');\nconst { TransportProtocol } = require('../transport-protocols');\nconst { TransportProtocolHandler } = require('../transport-protocol-handler');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionEventCode } = require('../transport-session-event-codes');\nconst { WebSocketTransportSession } = require('./websocket-transport-session');\nconst { WebTransportEvent } = require('./web-transport-events');\nconst { WebTransportFSM } = require('./web-transport-fsm');\n\n/**\n * @classdesc\n * This class manages all the web based transport protocols.\n * <ul>\n *     <li>{@link TransportProtocol.HTTP_BASE64}\n *     <li>{@link TransportProtocol.HTTP_BINARY}\n *     <li>{@link TransportProtocol.HTTP_BINARY_STREAMING}\n *     <li>{@link TransportProtocol.WS_BINARY}\n * </ul>\n * @extends TransportBase\n * @private\n */\nclass WebTransport extends TransportBase {\n\n  /**\n   * @constructor\n   * @param {URL} url The url to connect to\n   * @param {Function} eventCB The callback for transport events\n   * @param {BaseSMFClient} client An SMF client instance\n   * @param {Object} props Additional transport properties\n   * @param {Function} getId A function that returns this transport's unique ID\n   */\n  constructor(url, eventCB, client, props, getId) {\n    super(url, eventCB, client, props);\n    LOG_TRACE(`webTransportProtocolList ${props.webTransportProtocolList}`);\n    this._transportHandler = new TransportProtocolHandler(url, props.webTransportProtocolList);\n    this._webTransportFsm = new WebTransportFSM(this, getId);\n    this._webTransportFsm.start();\n  }\n\n  notifyEvent(event) {\n    this._eventCB(event);\n  }\n\n  handleDestroyed() {\n    this._transportSession = null;\n  }\n\n  handleTransportEvent(transportEvent) {\n    LOG_INFO(`Web transport receive transport event: ${transportEvent}`);\n    let wEvent;\n    switch (transportEvent.getTransportEventCode()) {\n      case TransportSessionEventCode.UP_NOTICE:\n        wEvent = new FsmEvent({ name: WebTransportEvent.UP_NOTICE });\n        wEvent._transportEvent = transportEvent;\n        this._webTransportFsm.processEvent(wEvent);\n        break;\n\n      case TransportSessionEventCode.DESTROYED_NOTICE:\n        this.handleDestroyed();\n        wEvent = new FsmEvent({ name: WebTransportEvent.DESTROYED_NOTICE });\n        wEvent._transportEvent = transportEvent;\n        this._webTransportFsm.processEvent(wEvent);\n        break;\n\n      case TransportSessionEventCode.SEND_ERROR:\n        wEvent = new FsmEvent({ name: WebTransportEvent.SEND_ERROR });\n        wEvent._transportEvent = transportEvent;\n        this._webTransportFsm.processEvent(wEvent);\n        break;\n\n      case TransportSessionEventCode.CONNECT_TIMEOUT:\n        wEvent = new FsmEvent({ name: WebTransportEvent.CONNECT_TIMEOUT });\n        wEvent._transportEvent = transportEvent;\n        this._webTransportFsm.processEvent(wEvent);\n        break;\n\n      case TransportSessionEventCode.DOWNGRADE_FAILED:\n        this._lastDowngradeSucceeded = false;\n        break;\n\n      case TransportSessionEventCode.DOWNGRADE_SUCCEEDED:\n        this._lastDowngradeSucceeded = true;\n        break;\n\n      default:\n        // All other transport events have no effect on the web transport and are passed through\n        this._eventCB(transportEvent);\n    }\n  }\n\n  /**\n   * @override\n   */\n  connect() {\n    const wEvent = new FsmEvent({ name: WebTransportEvent.CONNECT });\n    this._webTransportFsm.processEvent(wEvent);\n    return TransportReturnCode.OK;\n  }\n\n  connectInternal() {\n    this._transportSession = null;\n    const tpProtocol = this._transportHandler.getTransportProtocol();\n    this._props.transportProtocol = tpProtocol;\n    switch (tpProtocol) {\n      case TransportProtocol.HTTP_BASE64:\n      case TransportProtocol.HTTP_BINARY:\n      case TransportProtocol.HTTP_BINARY_STREAMING:\n        this._transportSession = new HTTPTransportSession(\n          this._url,\n          evt => this.handleTransportEvent(evt),\n          this._client,\n          this._props\n        );\n        break;\n\n      case TransportProtocol.WS_BINARY:\n        this._transportSession = new WebSocketTransportSession(\n          this._url,\n          evt => this.handleTransportEvent(evt),\n          this._client,\n          this._props\n        );\n        break;\n\n      default:\n        LOG_ERROR(`Web transport unrecognized TransportProtocol: ${tpProtocol}`);\n        throw new OperationError(`No transport session provider for scheme: ${tpProtocol}`,\n                                 ErrorSubcode.CONNECTION_ERROR,\n                                 tpProtocol);\n    }\n\n    LOG_INFO(`Connect Transport ${tpProtocol}`);\n    return this._transportSession.connect();\n  }\n\n  /**\n   * @override\n   */\n  destroy(msg, subcode) {\n    const wEvent = new FsmEvent({ name: WebTransportEvent.DESTROY });\n    wEvent._destroyMsg = msg;\n    wEvent._subcode = subcode;\n    this._webTransportFsm.processEvent(wEvent);\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Force fail the underlying transport's socket to force a failure.\n   * Returns transport return code.\n   * @override\n   * @param {?String} msg The message associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  forceFailure(msg) {\n    const errorMsg = (msg !== undefined && msg !== null) ? msg : ''; // default empty\n    LOG_DEBUG(`Destroy Tls transport: ${errorMsg}`);\n    if (this._transportSession) {\n      this._transportSession._socket._sender._socket.destroy(new Error(errorMsg));\n    }\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @param {String} msg The message associated with the downgrade\n   * @param {ErrorSubcode} subcode The subcode associated with the downgrade\n   * @returns {Boolean} `true` if there are downgrade options available. `false` otherwise.\n   * @private\n   */\n  beginDowngrade(msg, subcode) {\n    if (this._transportHandler.canCompleteDowngrade()) {\n      LOG_TRACE('Web transport downgrade');\n      // Destroy the underlying transport session\n      // This will asynchronously cause DESTROYED_NOTICE to be emitted.\n      // The receiver can then call completeDowngrade, which will complete the downgrade.\n      this.destroyInternal(msg, subcode);\n      return true;\n    }\n    LOG_TRACE('Web transport downgrade rejected');\n    return false;\n  }\n\n  completeDowngrade() {\n    if (!this._transportHandler.canCompleteDowngrade()) {\n      return false;\n    }\n    return this._transportHandler.completeDowngrade();\n  }\n\n  destroyInternal(msg, subcode) {\n    if (this._transportSession) {\n      this._transportSession.destroy(msg, subcode);\n    }\n  }\n\n  /**\n   * @override\n   */\n  flush(callback) {\n    return this._transportSession.flush(callback);\n  }\n\n  getConnError() {\n    if (this._transportSession) {\n      return this._transportSession._connError;\n    }\n    return null;\n  }\n\n  /**\n   * @override\n   */\n  getInfoStr() {\n    if (this._transportSession) {\n      return this._transportSession.getInfoStr();\n    }\n    return 'Not connected.';\n  }\n\n  /**\n   * @override\n   */\n  getTransportProtocol() {\n    return this._transportHandler.getTransportProtocol();\n  }\n\n  /**\n   * @override\n   */\n  getClientStats() {\n    if (this._transportSession) {\n      return this._transportSession.getClientStats();\n    }\n    return null;\n  }\n\n  /**\n   * @override\n   */\n  requestDowngrade(msg, subcode) {\n    LOG_TRACE('Creating downgrade request event');\n    this._lastDowngradeSucceeded = undefined; // will be reset by handler for TS DOWNGRADE_ events\n    const wEvent = new FsmEvent({ name: WebTransportEvent.DOWNGRADE });\n    wEvent._downgradeMsg = msg;\n    wEvent._subcode = subcode;\n    this._webTransportFsm.processEvent(wEvent);\n    return this._lastDowngradeSucceeded;\n  }\n\n  /**\n   * @override\n   */\n  send(message, forceAllowEnqueue) {\n    return this._transportSession.send(message, forceAllowEnqueue);\n  }\n}\n\nmodule.exports.WebTransport = WebTransport;\n","const DebugLib = require('solclient-debug');\nconst SolclientDestinationLib = require('solclient-destination');\nconst SolclientMessageLib = require('solclient-message');\nconst { Baggage, TraceContextSetter } = require('solclient-message-tracing');\nconst SolclientSDTLib = require('solclient-sdt');\nconst { BinaryMetaBlock, KeepAliveMessage } = require('../message-objects');\nconst { ContentSummaryType } = require('./content-summary-types');\nconst { Hex, Long, Convert: { stringToUint8Array, anythingToBuffer } } = require('solclient-convert');\nconst { Lazy } = require('solclient-eskit');\nconst { LogFormatter } = require('solclient-log');\nconst { parseAdpAt } = require('./adprotocol');\nconst { parseCCAt } = require('./client-ctrl');\nconst { ParseSMF } = require('./parse-smf');\nconst { PriorityUserCosMap } = require('./priority-user-cos-map');\nconst { SMFProtocol } = require('../smf-protocols');\nconst { SMP } = require('./smp');\nconst { Transport } = require('./transport');\nconst zlib = require('zlib');\nconst fflate = require('fflate');\nconst { Check } = require('solclient-validate');\n\n\nconst { formatHexString } = Hex;\nconst { lazyValue } = Lazy;\nconst { parseSMFAt } = ParseSMF;\nconst { parseSMPAt } = SMP;\nconst { parseTsSmfMsgAt } = Transport;\n\nconst logger = new LogFormatter('[smf-decode]');\nconst { LOG_DEBUG,\n        LOG_ERROR,\n        LOG_WARN } = logger;\n\nconst userCosForPriority = lazyValue(() => new PriorityUserCosMap().reverse);\n\nconst BIN_STRUCTYPES = {\n  0x0A: SolclientMessageLib.MessageType.MAP,\n  0x0B: SolclientMessageLib.MessageType.STREAM,\n  0x07: SolclientMessageLib.MessageType.TEXT,\n};\n\nfunction adaptBinaryMetaToMessage(binaryMeta, messageIn) {\n  const message = messageIn;\n  const messageSdt = SolclientSDTLib.Codec.parseSingleElement(binaryMeta.payload, 0);\n\n  if (!(messageSdt && messageSdt.getType() === SolclientSDTLib.SDTFieldType.STREAM)) {\n    return;\n  }\n\n  const sdtstream = messageSdt.getValue();\n  let sdtfield = sdtstream.getNext();\n  if (sdtfield && sdtfield.getType() === SolclientSDTLib.SDTFieldType.BYTEARRAY\n    && sdtfield._value && sdtfield._value.length > 0) {\n    // Preamble byte array is present\n    let preambleByte0 = sdtfield._value.readUInt8(0);\n    if ((preambleByte0 & 0x40) !== 0){\n      message._setPayloadCompressed(preambleByte0);\n    }\n    if ((preambleByte0 & 0x80) === 0) {\n      // structured message: override default \"BIN\" message type\n      message._messageType = (BIN_STRUCTYPES[preambleByte0 & 0x0F] ||\n                              SolclientMessageLib.MessageType.BINARY);\n    }\n    if (sdtfield._value.length > 1) {\n      const preambleByte1 = sdtfield._value.readUInt8(1);\n      message.setAsReplyMessage((preambleByte1 & 0x80) !== 0);\n    }\n  }\n\n  sdtfield = sdtstream.getNext();\n  if (sdtfield && sdtfield.getType() === SolclientSDTLib.SDTFieldType.MAP) {\n    const sdtMap = sdtfield.getValue();\n    const p = sdtMap.getField('p');\n    const h = sdtMap.getField('h');\n    if (p) {\n      message.setUserPropertyMap(p.getValue());\n    }\n    if (h) {\n      const headerMap = h.getValue();\n      const ci = headerMap.getField('ci');\n      const mi = headerMap.getField('mi');\n      const mt = headerMap.getField('mt');\n      const rt = headerMap.getField('rt');\n      const si = headerMap.getField('si');\n      const sn = headerMap.getField('sn');\n      const ts = headerMap.getField('ts');\n      const ex = headerMap.getField('ex');\n      const ce = headerMap.getField('ce');\n      const ct = headerMap.getField('ct');\n\n      const bag = headerMap.getField('bag'); // get the baggage field\n      const ctx = headerMap.getField('ctx'); // the message creation context field\n\n      if (ci) {\n        message.setCorrelationId(ci.getValue());\n      }\n      if (mi) {\n        message.setApplicationMessageId(mi.getValue());\n      }\n      if (mt) {\n        message.setApplicationMessageType(mt.getValue());\n      }\n      if (rt) {\n        message.setReplyTo(rt.getValue());\n      }\n      if (si) {\n        message.setSenderId(si.getValue());\n      }\n      if (sn) {\n        message.setSequenceNumber(sn.getValueNoThrow());\n      }\n      if (ts) {\n        message.setSenderTimestamp(ts.getValue());\n      }\n      if (ex) {\n        message.setGMExpiration(ex.getValue());\n      }\n      if (ce) {\n        message.setHttpContentEncoding(ce.getValue());\n      }\n      if (ct) {\n        message.setHttpContentType(ct.getValue());\n      }\n      if (bag) {\n        // set the baggage\n        const _baggageObj = new Baggage();\n        _baggageObj.setBaggage(bag.getValue());\n        message._setBaggage(_baggageObj);\n      }\n      if (ctx) {\n        // create a context setter from the bytes or string depending on the active profile\n        const _traceContextSetter = TraceContextSetter.fromTraceContext(ctx.getValue());\n         // use it to set the message creation context, can be null\n        message._setCreationContext(_traceContextSetter);\n      }\n    }\n  }\n}\n\nfunction adaptSmfToMessage(smfHeader, messageIn, stream, offset) {\n  const message = messageIn;\n  message._setDeliverToOne(!!smfHeader.smf_dto);\n  message._setDeliveryMode(smfHeader.pm_deliverymode ||\n                          SolclientMessageLib.MessageDeliveryModeType.DIRECT);\n  if (smfHeader.pm_tr_topicname_bytes !== null) {\n    message._setDestination(\n      SolclientDestinationLib.DestinationFromNetwork.createDestinationFromBytes(\n        smfHeader.pm_tr_topicname_bytes));\n  }\n  message._setDiscardIndication(!!smfHeader.smf_di);\n  message._setElidingEligible(!!smfHeader.smf_elidingEligible);\n  message._setDMQEligible(!!smfHeader.smf_deadMessageQueueEligible);\n  message._setUserCos(userCosForPriority.value.get(smfHeader.smf_priority));\n  message._setPriority(smfHeader.pm_msg_priority);\n  if (smfHeader.pm_userdata) message._setUserData(smfHeader.pm_userdata);\n\n  message.setRedelivered(!!smfHeader.pm_ad_redelflag || !!smfHeader.pm_ad_flowredelflag);\n\n  message.setFlowId(smfHeader.pm_ad_flowid);\n  message.setGuaranteedMessageId(smfHeader.pm_ad_msgid);\n  message.setGuaranteedPreviousMessageId(smfHeader.pm_ad_prevmsgid);\n  message.setPublisherId(smfHeader.pm_ad_publisherid);\n  message.setPublisherMessageId(smfHeader.pm_ad_publishermsgid);\n  message.setTopicSequenceNumber(smfHeader.pm_ad_topicSequenceNumber);\n  if (message.getDeliveryMode() === SolclientMessageLib.MessageDeliveryModeType.DIRECT) {\n    message.setDeliveryCount(-1);\n  } else if (smfHeader.pm_ad_redeliveryCount) {\n    message.setDeliveryCount(smfHeader.pm_ad_redeliveryCount + 1);\n  } else { // AD, but delivery count header not present\n    // Only the flow knows whether the qEndpointBehaviour DC flag was set,\n    // so it overrides the value before passing it to the user with -1 if it wasn't.\n    message.setDeliveryCount(1);\n  }\n\n  // set the suid for the message if present\n  if (smfHeader.pm_ad_spooler_unique_id) {\n    message._setSpoolerUniqueId(smfHeader.pm_ad_spooler_unique_id);\n  }\n  // set the message id of the replication group message id using\n  // ASSURED_DELIVERY_REPLICATION_MATE_ACK_MESSAGE_ID if present\n  // otherwise use ASSURED_DELIVERY_ACK_MESSAGE_ID if present\n  // otherwise let the Mesage.getReplicationGroupMessageId use\n  // the value set by message.setGuaranteedMessageId\n  if (smfHeader.pm_ad_replication_mate_ack_message_id) {\n    message._setSpoolerMessageId(smfHeader.pm_ad_replication_mate_ack_message_id);\n  } else if (smfHeader.pm_ad_local_spooler_message_id) {\n    message._setSpoolerMessageId(smfHeader.pm_ad_local_spooler_message_id);\n  }\n\n  if (Long.isLong(smfHeader.pm_ad_ttl)) {\n    message.setTimeToLive(smfHeader.pm_ad_ttl.toNumber());\n  } else {\n    message.setTimeToLive(smfHeader.pm_ad_ttl);\n  }\n\n  // set the trace span transport context for the message if present\n  if (smfHeader.pm_ts_transport_context) {\n    // create a context setter from the bytes\n    const _traceContextSetter = TraceContextSetter.fromTraceContext(smfHeader.pm_ts_transport_context);\n    // use it to create the transport context\n    message._setTransportContext(_traceContextSetter);\n  }\n\n  // Copy content into fields (from input bytes)\n  const payloadOffset = offset + smfHeader.headerLength;\n  const cs = smfHeader.pm_content_summary;\n\n  if (!(cs && cs.length)) {\n    // No content-summary, assume binary attachment\n    message._setBinaryAttachment(smfHeader.payloadLength > 0\n                                ? stream.slice(payloadOffset,\n                                               payloadOffset + smfHeader.payloadLength)\n                                : undefined);\n    return;\n  }\n\n  for (let i = 0, n = cs.length; i < n; ++i) {\n    const currentChunk = cs[i];\n    const chunkBegin = payloadOffset + currentChunk.position;\n    const chunkEnd = payloadOffset + currentChunk.position + currentChunk.length;\n    switch (currentChunk.type) {\n      case ContentSummaryType.BINARY_ATTACHMENT:\n        message._setBinaryAttachment(stream.slice(chunkBegin, chunkEnd));\n        break;\n      case ContentSummaryType.BINARY_METADATA:\n        {\n          const binaryMeta = BinaryMetaBlock.fromEncodedSmf(stream, chunkBegin);\n\n          message.binaryMetadataChunk = binaryMeta;\n          if (binaryMeta.type === 0) {\n            // we have SDT JMS metadata\n            adaptBinaryMetaToMessage(binaryMeta, message);\n          }\n          break;\n        }\n      case ContentSummaryType.XML_META:\n        message._setXmlMetadata(stream.toString('latin1', chunkBegin, chunkEnd));\n        break;\n      case ContentSummaryType.XML_PAYLOAD:\n        message._setXmlContentInternal(stream.toString('latin1', chunkBegin, chunkEnd));\n        break;\n      default:\n        LOG_ERROR(`Unhandled ContentSummaryType: ${ContentSummaryType.describe(currentChunk.type)}`);\n    }\n  }\n  // uncompress message\n  if(message._getPayloadCompressed() && Check.anything(message.getHttpContentEncoding())){\n    if (message.getHttpContentEncoding().endsWith('deflate')){\n        try {\n          let inflatedAttachment;\n          if (BUILD_ENV.TARGET_NODE) {\n            inflatedAttachment = zlib.inflateSync(message._binaryAttachment);\n          } else {\n            inflatedAttachment = fflate.unzlibSync( message._binaryAttachment);\n            inflatedAttachment = anythingToBuffer(inflatedAttachment);\n          }\n          message._setBinaryAttachment(inflatedAttachment);\n          message._setPayloadCompressed(null);\n\n          // Popping \"deflate\" off the end of the content encoding list.\n          if (message.getHttpContentEncoding().trim() === \"deflate\") {\n            delete message._httpContentEncoding;\n          } else {\n            let newCE = message.getHttpContentEncoding().slice(0, 0-\"deflate\".length).trimRight()\n              if (newCE.endsWith(\",\")) {\n                newCE = newCE.slice(0, -1);\n                message.setHttpContentEncoding(newCE);\n              } else {\n                delete message._httpContentEncoding;\n\t      }\n          }\n        } catch(err){\n          LOG_WARN(\"Message payload was not decompressed, there was an error. Leaving the message body compressed \", err)\n          //LOG_WARN(message.dump());\n          message._messageType = SolclientMessageLib.MessageType.BINARY;\n        }\n    }\n  }\n}\n\nfunction decodeCompoundMessage(dataBuf, pos) {\n  const header = parseSMFAt(dataBuf, pos);\n  if (!header) {\n    LOG_DEBUG('decodeCompoundMessage: SMF parsing failed');\n    return null;\n  }\n  // the parser determined there was a full SMF message\n  const payloadPosition = pos + header.headerLength;\n  const payloadLen = header.payloadLength;\n  let message;\n  switch (header.smf_protocol) {\n    case SMFProtocol.TSESSION:\n      message = parseTsSmfMsgAt(dataBuf, payloadPosition, header);\n      if (!message) break;\n\n      message.smfHeader = header;\n      return message;\n\n    case SMFProtocol.TRMSG:\n      message = new SolclientMessageLib.Message();\n      message._smfHeader = header;\n      adaptSmfToMessage(header, message, dataBuf, pos);\n      return message;\n\n    case SMFProtocol.ADCTRL:\n      message = parseAdpAt(dataBuf, payloadPosition, payloadLen);\n      message.smfHeader = header;\n      return message;\n\n    case SMFProtocol.CLIENTCTRL:\n      message = parseCCAt(dataBuf, payloadPosition, payloadLen);\n      if (!message) break;\n\n      message.smfHeader = header;\n      return message;\n\n    case SMFProtocol.SMP:\n      message = parseSMPAt(dataBuf, payloadPosition);\n      if (!message) break;\n\n      message.smfHeader = header;\n      return message;\n\n    case SMFProtocol.KEEPALIVE:\n    case SMFProtocol.KEEPALIVEV2:\n      message = new KeepAliveMessage();\n      message.smfHeader = header;\n      return message;\n\n    default:\n      LOG_ERROR(`Unknown protocol: 0x${formatHexString(header.smf_protocol)}, ` +\n                `dump message content: \\n${\n                DebugLib.Debug.formatDumpBytes(dataBuf.slice(pos,\n                                                             pos + header.messageLength).toString('latin1'),\n                                               true, 0)}`);\n      break;\n  }\n  return null;\n}\n\nconst Decode = {\n  decodeCompoundMessage,\n};\n\nmodule.exports.Decode = Decode;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFSMPMessageTypeFlags = {\n  FLAG_FILTER:                1,\n  FLAG_PERSIST:               2,\n  SMF_SMP_FLAG_TOPIC:         4,\n  SMF_SMP_FLAG_RESPREQUIRED:  8,\n  SMF_SMP_FLAG_DELIVERALWAYS: 16,\n};\n\nmodule.exports.SMFSMPMessageTypeFlags = Enum.new(SMFSMPMessageTypeFlags);\n","const SMFLib = require('solclient-smf');\nconst { AdProtocolMessage, SMFParameter } = require('../message-objects');\nconst { Bits, Convert } = require('solclient-convert');\nconst { LOG_DEBUG, LOG_INFO, LOG_ERROR } = require('solclient-log');\nconst { ReplayStartType } = require('solclient-replaystart');\n// const { SMFAdProtocolParam } = require('solclient-smf');\n\nconst {\n  get: bits,\n  set: setBits,\n} = Bits;\n\nconst {\n  int8ToStr,\n  int16ToStr,\n  int24ToStr,\n  int32ToStr,\n} = Convert;\n\nfunction parseAdpAt(dataBuf, offset) {\n  if ((offset + 3) > dataBuf.length) {\n    //not enough data\n    LOG_DEBUG('Not enough data to read an ADP message.');\n    return false;\n  }\n  let pos = offset;\n  let onebyte = dataBuf.readUInt8(pos);\n  pos++;\n\n  // var msgRFU = bits(onebyte, 6, 2);\n  const adpVersion = bits(onebyte, 0, 6);\n  let msgLength;\n  let msgType;\n  if (adpVersion < 3) {\n    const twobyte = dataBuf.readUInt16BE(pos);\n    pos += 2;\n    msgType = bits(twobyte, 12, 4);\n    // length in 32 bit words is in the lower 12 bits\n    msgLength = bits(twobyte, 0, 12);\n    // convert length to number of bytes\n    msgLength <<= 2;\n  } else if (adpVersion === 3) {\n    onebyte = dataBuf.readUInt8(pos);\n    pos++;\n    msgType = bits(onebyte, 0, 8);\n    msgLength = dataBuf.readUInt32BE(pos);\n    pos += 4;\n  } else {\n    LOG_ERROR('Found unsupported ADP Version', adpVersion);\n    return false; //unsupported type\n  }\n  //\n  // Verify that the ADP header length does not exceed the entire\n  // contents of the SMF message.\n  if (offset + msgLength > dataBuf.length) {\n    LOG_ERROR(`Invalid Asssured Control Protocol length=${msgLength\n      } exceeds remaining message buffer = ${dataBuf.length - offset}`);\n    return false; // invalid message format\n  }\n  const adpMsg = new AdProtocolMessage(msgType, adpVersion);\n  while (pos < (offset + msgLength)) {\n    onebyte = dataBuf.readUInt8(pos);\n    pos++;\n    const paramUH = bits(onebyte, 6, 2);\n    const paramType = bits(onebyte, 0, 6);\n\n    // Look for and skip padding bytes\n    if (paramType === 0) {\n      continue;\n    }\n    if (pos >= (offset + msgLength)) {\n      LOG_ERROR(`Invalid Asssured Control Protocol parameter=${paramType} at position =${pos}`);\n      return false; // Assured Control parsing fail\n    }\n    let paramLen = dataBuf.readUInt8(pos);\n    let paramValueLen;\n    pos++;\n    // If paramLen == 0, then this is an extended length format\n    // and there is a 4 byte length following the '0'\n    if (paramLen === 0) {\n      // need at least 5 more bytes in the buffer\n      if (pos + 5 > (offset + msgLength)) {\n        LOG_ERROR(`Invalid Asssured Control Protocol parameter=${paramType} at position =${pos}`);\n        return false; // Assured Control parsing fail\n      }\n      paramLen = dataBuf.readUInt32BE(pos);\n      pos += 4;\n      paramValueLen = paramLen - 5;\n    } else {\n      paramValueLen = paramLen - 2;\n    }\n    if (paramLen <= 0) {\n      return false; // Assured Control parsing fail\n    }\n    //\n    // make sure there is enough buffer for paramValueLen\n    if (pos + paramValueLen > offset + msgLength) {\n      LOG_ERROR(`Invalid Asssured Control Protocol parameter=${paramType\n        } length =${paramValueLen} invalid at position =${pos}`);\n      return false; // Assured Control parsing fail\n    }\n    const smfParam = new SMFParameter(paramUH, paramType, null, dataBuf, pos, pos + paramValueLen);\n    adpMsg.addParameter(smfParam);\n    pos += paramValueLen;\n  }\n  return adpMsg;\n}\n\nfunction encAdp0Param(uh, paramtype) {\n  const data = [];\n  let byte1 = 0;\n\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(2)); // length\n  return data.join('');\n}\nfunction encAdp8Param(uh, paramtype, value) {\n  const data = [];\n  let byte1 = 0;\n\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(3)); // length\n  data.push(Convert.int8ToStr(value));\n  return data.join('');\n}\n\nfunction encAdp16Param(uh, paramtype, value) {\n  const data = [];\n  let byte1 = 0;\n\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(4)); // length\n  data.push(Convert.int16ToStr(value));\n  return data.join('');\n}\n\nfunction encAdp32Param(uh, paramtype, value) {\n  const data = [];\n  let byte1 = 0;\n\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(6)); // length\n  data.push(Convert.int32ToStr(value));\n  return data.join('');\n}\n\nfunction encAdp64Param(uh, paramtype, value) {\n  const data = [];\n  let byte1 = 0;\n\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(10)); // length\n  data.push(Convert.int64ToStr(value));\n  return data.join('');\n}\n\n// map of replay start value types to parameter lengths\nconst RSValueLenMap = {};\nRSValueLenMap[ReplayStartType.BEGINNING] = 3; // 2 (TLV) + 1 (replay start type)\nRSValueLenMap[ReplayStartType.DATE] = 11; // 2 (TLV) + 1 (replay start type) + 8 (date value)\nRSValueLenMap[ReplayStartType.RGMID] = 19; //2 (TLV) + 1 (replay start type) + 16 (rgmid value)\n\n// special case for message replay value, a 1 byte type\n// followed by 0 bytes of begining, 8 bytes of date or 16 bytes of rgmid\n// Note replay Start type 0 is handled using encAdp8Param as there is no value\nfunction encAdpReplayParam(uh, paramtype, value) {\n  const data = [];\n  const valType = value.type;\n  const valObj = value.value;\n  let byte1 = 0;\n\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(RSValueLenMap[valType])); // length\n  data.push(Convert.int8ToStr(valType)); // replay start type, 1 == date, 2 == RGMID\n  switch (valType) {\n    case ReplayStartType.DATE:\n      // encode 64 bit date\n      data.push(Convert.int64ToStr(valObj)); // value is Long type\n      break;\n    case ReplayStartType.RGMID:\n      // encode 128 bit replication group message id\n      // expected value object of\n      // {\n      //   suid (Long),\n      //   messageId (Long),\n      // }\n      data.push(Convert.int64ToStr(valObj.suid)); // get Long suid\n      data.push(Convert.int64ToStr(valObj.messageId)); // get Long messageId\n      break;\n    case ReplayStartType.BEGINNING:\n      // in this case there is no value to encode\n      break;\n    default:\n      // should not happen until there are more replay start type but those\n      // should be handled in a case above\n      break;\n  }\n  return data.join('');\n}\n\nfunction encAdp64AckPairParam(uh, paramtype, min, max, outcome = undefined) {\n  const data = [];\n  let byte1 = 0;\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  const paramLength = (outcome == undefined || outcome === 0) ? 18 : 19;\n  data.push(Convert.int8ToStr(byte1));\n  data.push(Convert.int8ToStr(paramLength)); // length\n  data.push(Convert.int64ToStr(min));\n  data.push(Convert.int64ToStr(max));\n  if(outcome != undefined && outcome > 0) { // skip for MessageOutcome.ACCEPTED\n    data.push(Convert.int8ToStr(outcome)); // write the settlement outcome\n  }\n  return data.join('');\n}\n\nfunction encAdpUTF8NTParam(uh, paramtype, value) {\n  // value is already UTF8 encoded and null terminated.\n  const data = [];\n  let byte1 = 0;\n  byte1 = Bits.set(byte1, uh, 6, 2);\n  byte1 = Bits.set(byte1, paramtype, 0, 6);\n  data.push(Convert.int8ToStr(byte1));\n\n  let byte2 = 0;\n  if (value.length <= 253) {\n    byte2 = value.length + 2; // full length of param\n    data.push(Convert.int8ToStr(byte2));\n  } else {\n    byte2 = 0; // extended-length\n    data.push(Convert.int8ToStr(byte2));\n    data.push(Convert.int32ToStr(value.length + 5));\n  }\n  data.push(value);\n  return data.join('');\n}\n\nfunction encAdp(adpMsg) {\n  const paramspace = [];\n  const paramarray = adpMsg.getParameterArray();\n\n  let p;\n  for (p = 0; p < paramarray.length; p++) {\n    const param = paramarray[p];\n    // It's not a flat array, we have gaps!\n    if (param === undefined) {\n      continue;\n    }\n\n    switch (param.getType()) {\n      /*\n       * 8 bit parameters\n       */\n      case SMFLib.SMFAdProtocolParam.WINDOW:\n      case SMFLib.SMFAdProtocolParam.EP_DURABLE:\n      case SMFLib.SMFAdProtocolParam.ACCESSTYPE:\n      case SMFLib.SMFAdProtocolParam.FLOWTYPE:\n      case SMFLib.SMFAdProtocolParam.EP_RESPECTS_TTL:\n      case SMFLib.SMFAdProtocolParam.TRANSACTION_CTRL_MESSAGE_TYPE:\n      case SMFLib.SMFAdProtocolParam.TRANSACTED_SESSION_STATE:\n      case SMFLib.SMFAdProtocolParam.ACTIVE_FLOW_INDICATION:\n      case SMFLib.SMFAdProtocolParam.WANT_FLOW_CHANGE_NOTIFY:\n      case SMFLib.SMFAdProtocolParam.MAX_REDELIVERY:\n        paramspace.push(encAdp8Param(param.getUh(), param.getType(), param.getValue()));\n        break;\n      /*\n       * 16 bit parameters\n       */\n      case SMFLib.SMFAdProtocolParam.EP_BEHAVIOUR:\n      case SMFLib.SMFAdProtocolParam.PARTITION_GROUP_ID:\n        paramspace.push(encAdp16Param(param.getUh(), param.getType(), param.getValue()));\n        break;\n      /*\n       * 32 bit parameters\n       */\n      case SMFLib.SMFAdProtocolParam.FLOWID:\n      case SMFLib.SMFAdProtocolParam.TRANSPORT_WINDOW:\n      case SMFLib.SMFAdProtocolParam.EP_ALLOTHER_PERMISSION:\n      case SMFLib.SMFAdProtocolParam.EP_QUOTA:\n      case SMFLib.SMFAdProtocolParam.EP_MAX_MSGSIZE:\n      case SMFLib.SMFAdProtocolParam.GRANTED_PERMISSION:\n      case SMFLib.SMFAdProtocolParam.TRANSACTED_SESSION_ID:\n      case SMFLib.SMFAdProtocolParam.PUBLISHER_ID:\n        paramspace.push(encAdp32Param(param.getUh(), param.getType(), param.getValue()));\n        break;\n      /*\n       * 64 bit parameters\n       */\n      case SMFLib.SMFAdProtocolParam.LASTMSGIDSENT:\n      case SMFLib.SMFAdProtocolParam.LASTMSGIDACKED:\n      case SMFLib.SMFAdProtocolParam.LASTMSGIDRECEIVED:\n      case SMFLib.SMFAdProtocolParam.TRANSACTION_ID:\n      case SMFLib.SMFAdProtocolParam.ENDPOINT_ERROR_ID:\n        paramspace.push(encAdp64Param(param.getUh(), param.getType(), param.getValue()));\n        break;\n      /*\n       * Replay start location can be either a 0 bit, 64 bit or 128 bit parameter.\n       */\n      case SMFLib.SMFAdProtocolParam.REPLAY_START_LOCATION:\n        {\n          const replayParamVal = param.getValue();\n          if (undefined === replayParamVal.value) {\n            // replay start location with 0 bit values, type only\n            paramspace.push(encAdp8Param(param.getUh(),\n                                         param.getType(),\n                                         replayParamVal.type));  // start location type 0\n          } else {\n            // replay start location with > 0 bit values, type + value\n            paramspace.push(encAdpReplayParam(param.getUh(), param.getType(), replayParamVal));\n          }\n          break;\n        }\n      /*\n       * application ack\n       */\n      case SMFLib.SMFAdProtocolParam.APPLICATION_ACK:\n        {\n          // Unpack this to multiple parameters\n          const ranges = param.getValue(); // this is the Map() of all settlement ACK/NACK ranges\n          const uh = param.getUh();\n          const type = param.getType();\n          // iterate through the Map of ranges per settlement outcome\n          ranges.forEach((settlementRanges, outcome) => {\n            for (let i = 0; i < settlementRanges.length; ++i) {\n              const range = settlementRanges[i];\n              paramspace.push(encAdp64AckPairParam(uh,\n                                                   type,\n                                                   range[0],\n                                                   range[1],\n                                                   outcome));\n            }\n          });\n          break;\n        }\n      /*\n       * string and other variable length parameters\n       */\n      case SMFLib.SMFAdProtocolParam.QUEUENAME:\n      case SMFLib.SMFAdProtocolParam.DTENAME:\n      case SMFLib.SMFAdProtocolParam.TOPICNAME:\n      case SMFLib.SMFAdProtocolParam.FLOWNAME:\n      case SMFLib.SMFAdProtocolParam.SELECTOR:\n      case SMFLib.SMFAdProtocolParam.TRANSACTED_SESSION_NAME:\n        paramspace.push(encAdpUTF8NTParam(param.getUh(), param.getType(), param.getValue()));\n        break;\n      /*\n       * Transaction Publisher Notify\n       */\n      case SMFLib.SMFAdProtocolParam.TRANSACTION_FLOW_DESCRIPTOR_PUB_NOTIFY:\n        break;\n      /*\n       * Transaction Publisher Ack\n       */\n      case SMFLib.SMFAdProtocolParam.TRANSACTION_FLOW_DESCRIPTOR_PUB_ACK:\n        break;\n      /*\n       * Transaction Subscriber Ack\n       */\n      case SMFLib.SMFAdProtocolParam.TRANSACTION_FLOW_DESCRIPTOR_SUB_ACK:\n        break;\n      /*\n       * No Local Parameter has no data\n       * Cut Through Parameter has no data\n       */\n      case SMFLib.SMFAdProtocolParam.NOLOCAL:\n      case SMFLib.SMFAdProtocolParam.CUT_THROUGH:\n        paramspace.push(encAdp0Param(param.getUh(), param.getType()));\n        break;\n      /*\n       * Application Publisher Acknowledge\n       */\n      case SMFLib.SMFAdProtocolParam.APPLICATION_PUB_ACK:\n        break;\n      default:\n        LOG_INFO('Unrecognized ADProtocol Parameter in Message');\n        break;\n    }\n  }\n\n  const paramdata = paramspace.join('');\n\n  const data = [];\n  if (adpMsg.version === 2) {\n    let threebytes = 0;\n    threebytes = setBits(threebytes, 0, 22, 2); // RFU\n    threebytes = setBits(threebytes, adpMsg.version, 16, 6); // RFU\n    threebytes = setBits(threebytes, adpMsg.msgType, 12, 4); // msgtype\n    // length in 32 bit words means the real length must always be a multiple of 4, so pad as\n    // necessary\n\n    // 4 - how many bytes passed a 4 byte boundary\n    let padBytes = 4 - ((3 + paramdata.length) & 0x3);\n    // calculate the total length, 3 bytes header + params, in 32 bit words\n    const length = (3 + paramdata.length + padBytes) >> 2;\n    threebytes = setBits(threebytes, length, 0, 12);\n    data.push(int24ToStr(threebytes)); // first 3B (RFU, version, msgtype, length)\n    data.push(paramdata);\n\n    if (padBytes === 4) padBytes = 0; // don't add 4 pad bytes\n    while (padBytes > 0) {\n      data.push(int8ToStr(0));\n      padBytes--;\n    }\n  } else if (adpMsg.version === 3) {\n    let twobytes = 0;\n    twobytes = setBits(twobytes, 0, 14, 2); // RFU\n    twobytes = setBits(twobytes, adpMsg.version, 8, 6); // version\n    twobytes = setBits(twobytes, adpMsg.msgType, 0, 8); // msgtype\n    data.push(int16ToStr(twobytes)); // first 2B (RFU, version, msgtype)\n    data.push(int32ToStr(6 + paramdata.length)); //length: 6B header + params\n    data.push(paramdata);\n  } else {\n    LOG_ERROR(`Invalid Version ${adpMsg.version} found while encoding`);\n  }\n\n  return data.join('');\n}\n\nmodule.exports.parseAdpAt = parseAdpAt;\nmodule.exports.encAdp = encAdp;\n","const { Enum } = require('solclient-eskit');\nconst { LOG_TRACE,\n        LOG_DEBUG } = require('solclient-log');\nconst { Long } = require('solclient-convert');\n\nconst TransportAckResult = Enum.new({\n  OK:           0,\n  DUPLICATE:    1,\n  OUT_OF_ORDER: 2,\n});\n\nclass TransportAcks {\n  constructor(id = 0) {\n    const base = typeof id === 'number' ? Long.fromNumber(id, true) : Long.fromValue(id);\n    this.lastAcked = base;\n    this._acksPending = 0;\n  }\n\n  reset() {\n    this._acksPending = 0;\n    this.lastAcked = Long.ZERO;\n  }\n\n  tryReceive(messageID, prevMessageID) {\n    if (this._lastReceived.lt(prevMessageID)) {\n      LOG_DEBUG(`Rejecting out of order message: ${prevMessageID} (last received: ${this._lastReceived})`);\n      return TransportAckResult.OUT_OF_ORDER;\n    }\n    if (this._lastReceived.gte(messageID)) {\n      LOG_DEBUG(`Rejecting duplicate message: ${messageID} (last received: ${this._lastReceived})`);\n      // duplicate messages indicate the router is retransmitting because it expects a transport ack\n      this._acksPending++;\n      return TransportAckResult.DUPLICATE;\n    }\n    LOG_TRACE(`Accepting message: ${messageID}`);\n    this._lastReceived = messageID;\n    this._acksPending++;\n    return TransportAckResult.OK;\n  }\n\n  setAcked() {\n    this._lastAcked = Long.fromValue(this._lastReceived);\n    this._acksPending = 0;\n  }\n\n  get acksPending() {\n    return this._acksPending;\n  }\n\n  get lastAcked() {\n    return this._lastAcked;\n  }\n\n  /**\n   * Resets the beginning of the ack sequence to the given value.\n   * @param {Long} value The value to set as last acknowledged ID.\n   */\n  set lastAcked(value) {\n    LOG_TRACE('Setting last acked:', value.toString());\n    Object.assign(this, {\n      _lastAcked:    Long.fromValue(value),\n      _lastReceived: Long.fromValue(value),\n    });\n  }\n\n  get lastReceived() {\n    return this._lastReceived;\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports = {\n  TransportAcks,\n  TransportAckResult,\n};\n","const DestinationUtilLib = require('./destination-util');\nconst { assert } = require('solclient-eskit');\nconst { Destination } = require('./destination');\nconst { DestinationType } = require('./destination-type');\n\n/**\n * @classdesc\n * Represents a Queue, which is a type of {@link solace.Destination}.\n *\n * Instances should be acquired through\n * {@link solace.SolclientFactory.createDurableQueueDestination} or by calling\n * {@link solace.MessageConsumer#getDestination} on a consumer bound to a temporary queue.\n *\n * @extends solace.Destination\n * @memberof solace\n * @private\n */\nclass Queue extends Destination {\n\n  /**\n   * @param {Object} spec The spec for this instance\n   * @private\n   */\n  constructor(spec) {\n    assert(spec.name, 'Queue name not supplied');\n    assert(spec.type === DestinationType.QUEUE\n           || spec.type === DestinationType.TEMPORARY_QUEUE, 'Queue spec.type is invalid');\n    assert(spec.bytes, 'Queue spec missing bytes');\n    assert(spec.offset !== undefined, 'Queue spec missing offset');\n    super(spec);\n  }\n\n  getOffset() {\n    return this._offset;\n  }\n  get offset() {\n    return this.getOffset();\n  }\n\n  [util_inspect_custom]() {\n    return `[Queue ${this.getName()}]`;\n  }\n\n  /**\n   * @static\n   * @param {String} queueName The name of the queue (no prefix)\n   * @returns {Queue} a Queue\n   * @private\n   */\n  static createFromLocalName(queueName) {\n    const encoding = DestinationUtilLib.DestinationUtil.validateAndEncode(\n      DestinationType.QUEUE, queueName);\n    if (encoding.error) {\n      throw encoding.error;\n    }\n    return new Queue({\n      name:             queueName,\n      type:             DestinationType.QUEUE,\n      isValidated:      true,\n      bytes:            encoding.bytes,\n      offset:           encoding.offset,\n      isWildcarded:     encoding.isWildcarded,\n      /* probably don't need this until queues get subscription attributes */\n      subscriptionInfo: encoding.subscriptionInfo,\n    });\n  }\n\n}\n\nmodule.exports.Queue = Queue;\n","const { Duplex } = require('stream');\nconst { LOG_WARN, LOG_TRACE } = require('solclient-log');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionEventCode } = require('../transport-session-event-codes');\n\n/**\n * This is a Duplex Stream encapsulating a Transport.\n * It transparently passes reads, writes, and events until \"shunted\".\n * After that, nothing gets through.\n *\n * The intermediate \"dontEnd\" state allows a TLS shutdown to run its course\n * without closing the underlying transport in the end.\n *\n * Intended lifecycle:\n *\n * 1, create underlying transport\n * 2, create ShuntableTransport with underlying transport\n * 3, pass shuntableTransport to tls.connect\n * 4, connect underlying transport\n *\n * <traffic may flow until TLS shutdown desired>\n *\n * 1, shuntableTransport.dontend();\n * 2, tlsSocket.end();\n * 3, on 'closed' event: take and start using shuntableSocket.socket.\n *\n * For an explanation of _read and _write see\n * https://nodejs.org/api/stream.html#stream_implementing_a_duplex_stream\n *\n * @private\n */\n\nclass ShuntableTransport extends Duplex {\n  constructor(options) {\n    super(options);\n    this._shunted = false;\n    this._dontEnd = false;\n    this._underlyingTransport = options.underlyingTransport;\n    // Buffers data-callback pairs until connected or underlying transport decongests.\n    // Should never have more than 1 item as long as the stream contract is upheld.\n    this._interimBuffer = [];\n    this._transportDrained = true;\n    this._connected = false;\n  }\n\n  shunt() {\n    this._shunted = true;\n  }\n\n  dontEnd() {\n    this._dontEnd = true;\n  }\n\n  _write(chunk, encoding, callback) {\n    if (!this._shunted) {\n      if (!this._transportDrained || !this._connected) {\n        this._interimBuffer.push([chunk, callback]);\n        return;\n      }\n      const rc = this._underlyingTransport.send(chunk);\n      switch (rc) {\n        case TransportReturnCode.OK:\n          this._transportDrained = true;\n          callback();\n          break;\n        case TransportReturnCode.NO_SPACE:\n          this._transportDrained = false;\n          this._interimBuffer.push([chunk, callback]);\n          break;\n        case TransportReturnCode.INVALID_STATE_FOR_OPERATION:\n          this.emit('error',\n                    'Underlying transport in invalid state for send.');\n          break;\n        default:\n          LOG_WARN(`Unknown return code from undelying transport ${rc}`);\n      }\n    }\n  }\n\n  //_read(size) {\n  _read() {\n    if (!this._shunted) {\n      this._underlyingTransport.unpause();\n    }\n  }\n\n  rxDataBuffer(data) {\n    if (!this._shunted) {\n      const noPause = this.push(data);\n      if (!noPause) {\n        this._underlyingTransport.pause();\n      }\n    }\n  }\n\n  // underlying transport event dispatch\n  eventCB(transportEvent) {\n    switch (transportEvent.getTransportEventCode()) {\n      case TransportSessionEventCode.UP_NOTICE:\n        this.onConnect();\n        break;\n      case TransportSessionEventCode.SEND_ERROR:\n        this.onError(transportEvent);\n        break;\n      case TransportSessionEventCode.DESTROYED_NOTICE:\n        this.onClose(transportEvent);\n        break;\n      case TransportSessionEventCode.CAN_ACCEPT_DATA:\n        this.onDrain();\n        break;\n      default:\n        LOG_WARN(`TLS layer got unkown event code ${transportEvent.getTransportEventCode}`);\n    }\n  }\n  onError(transportEvent) {\n    if (!this._shunted) {\n      this.emit('error', transportEvent.getInfoStr());\n    }\n  }\n\n  onClose(transportEvent) {\n    this._connected = false;\n    if (!this._shunted) {\n      LOG_TRACE(`ShuntableTransport emits close for transport event ${transportEvent}`);\n      this.emit('close');\n    }\n  }\n\n  onDrain() {\n    if (!this._shunted) {\n      this._transportDrained = true;\n      if (this._interimBuffer && this._interimBuffer.length > 0) {\n        const resendBuffer = this._interimBuffer;\n        this._interimBuffer = [];\n        resendBuffer.forEach(([data, callback]) => this._write(data, null, callback));\n      }\n      if (!this._transportDrained) {\n        return;\n      }\n      this.emit('drain');\n    }\n  }\n\n  onConnect() {\n    this._connected = true;\n    if (!this._shunted) {\n      this.onDrain(); // flush interimbuffer.\n      this.emit('connect');\n    }\n  }\n\n  end(chunk, encoding, callback) {\n    if (!this._shunted && !this._dontEnd) {\n      if (typeof chunk === 'function') { // sometimes TLS calls end() wrong...\n        this._underlyingTransport.destroy('End from TLS');\n        chunk();\n      } else {\n        const cb = () => { this._underlyingTransport.destroy('End from TLS'); callback(); };\n        this._write(chunk, encoding, cb);\n      }\n    } else if (!this._shunted) {\n      if (typeof chunk !== 'function') { // sometimes TLS calls end() wrong...\n        this._write(chunk, encoding, callback);\n      } else {\n        chunk();\n      }\n    }\n  }\n\n  destroy(error) {\n    if (!this._shunted && !this._dontEnd) {\n      this._underlyingTransport.destroy(error);\n    }\n  }\n\n  /**\n   * Force fail the underlying transport's socket to force a failure.\n   * Returns transport return code.\n   * @param {?String} msg The message associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  forceFailure(msg) {\n    if (!this._shunted && !this._dontEnd && this._underlyingTransport) {\n      return this._underlyingTransport.forceFailure(msg);\n    }\n  }\n\n  setNoDelay(arg) {\n    if (!this.shunted) {\n      LOG_TRACE(`Ignoring setNoDelay(${arg})`);\n    }\n  }\n}\n\nmodule.exports.ShuntableTransport = ShuntableTransport;\n","const StateLib = require('./state');\nconst { FsmObject } = require('./object');\nconst { Iterator } = require('solclient-eskit');\nconst { LOG_TRACE } = require('solclient-log');\n\nconst { makeIterator } = Iterator;\n\n/**\n * React to an event.\n * @callback StateContext.reactionCallback\n * @param {FsmEvent} event The event to react to.\n * @returns {StateContext.ReactionResult} One of the many possible\n *      reaction results that can be created by one of the following methods:\n *          - {@link StateContext#transitionTo}\n *          - {@link FsmState#internalTransition}\n *          - {@link FsmState#externalTransitionTo}\n *          - {@link FsmState#terminate}\n *          - {@link FsmState#eventUnhandled}\n */\n\n\n/**\n * @classdesc\n * This abstract class can host one or more states.  Concrete examples would\n * be a state, which can host one or more inner states, or a state machine,\n * which would typically have multiple top-level states.  It also serves as a\n * context in which transitions can occur.\n * @memberof solace\n * @private\n */\nclass StateContext extends FsmObject {\n  /**\n   * @constructor\n   * @param {Object} spec Object specifier used to implement the named parameter\n   *  idiom.\n   * @param {String} spec.name The name of the context.\n   */\n  constructor(spec) {\n    super(spec);\n    this.impl = this.impl || {};\n    this.impl.logPadding = '';\n  }\n\n  /**\n   * Gets the state-machine that hosts this state context.\n   * @returns {StateMachine} The FSM that hosts this context.\n   */\n  getStateMachine() {\n    return this.impl.ancestorList[0];\n  }\n\n  /**\n   * Sets the initial reaction for the state context.\n   * @param {StateContext.reactionCallback} func The reaction callback to be\n   *      called after the state is entered as the deepest state of a\n   *      transition, or for a state machine when it is started.\n   * @returns {StateContext} The object this function was called on\n   */\n  initial(func) {\n    if (this.impl.initialReaction) {\n      this.log(`Replacing ${this} initialReaction ${this.impl.initialReaction} with ${func}`);\n    }\n    this.impl.initialReaction = func.bind(this);\n    return this;\n  }\n\n  /**\n   * This is used for 'local' transitions.  However, we extend the formal\n   * definition of local transitions here.  The formal definition is that\n   * the dest state is within the src state, and the src state is not\n   * exited.  We extend this definition to include states where the src\n   * state is within dest. In this case, a local transition means that dest\n   * will not be exited and entered and the transition will occur in the\n   * context of dest before executing dest's initial transition.  Note that\n   * this definition of local transition matches that of\n   * {@link https://en.wikipedia.org/wiki/UML_state_machine#Local_versus_external_transitions|Wikipedia}.\n   * But it does not match figure 14.34 or section 14.5.12 of the\n   * {@link http://www.omg.org/spec/UML/2.5/PDF/|Formal UML Specification v2.5}.\n   * Nevertheless, it does seem helpful to be able to express a transition\n   * that does leave the destination state vs. a transition that does not.\n   *\n   * If neither the source nor the dest states are within the other, the\n   * behaviour is the same as an external transition -- src is always exited\n   * and dest is always entered.\n   *\n   * This is included in the StateContext instead of within the State itself\n   * since this can be used by the initial reaction for a state machine.\n   *\n   * @param {State} state The state to transition to.\n   * @param {StateContext.actionCallback} [action] Optional The action to perform as\n   *      part of the transition, if desired.\n   * @returns {StateContext.ReactionResult} the result object used\n   *      internally for further processing of the event.\n   */\n  transitionTo(state, action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: state,\n      action,\n    });\n  }\n\n  /**\n   * Used to terminate the FSM.\n   * @param {StateContext.actionCallback} action An optional action to\n   *      take within the FSM context after all states have been exited.\n   * @returns {StateContext.ReactionResult} The reaction result for the termination.\n   */\n  terminate(action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: this.getStateMachine().getFinalState(),\n      action,\n    });\n  }\n\n  /**\n   * A callback to execute an action as part of a transition in the\n   * appropriate context.\n   *\n   * To be used only by the FSM infrastructure or unit tests.\n   *\n   * @callback StateContext.actionCallback\n   * @param {StateContext} context The context within which the action is\n   *      executed.  When the active state changes, this is done after\n   *      states are exited and before states are entered.  It is the\n   *      deepest context that contains the last exited and first entered\n   *      state as part of the transition.\n   * @param {FsmEvent} event The event that triggered the transition.\n   * @returns {Array.<StateContext>} The context's ancestor list.\n   * @protected\n   */\n  getAncestorList() {\n    return this.impl.ancestorList;\n  }\n\n  /**\n   * Perform a debug log with appropriate padding for the context.  The padding\n   * helps to visualize the level within the hierarchical state machine.\n   * @protected\n   */\n  log(...args) {\n    LOG_TRACE(this.impl.logPadding, ...args);\n  }\n\n  /**\n   * Called when the initial transition for the context needs to be taken.\n   * @param {FsmEvent} [event] The event causing this transition; undefined for the\n   *      FSM's initial transition.\n   * @returns {StateContext.ReactionResult} the result to be processed by\n   *      the FSM infrastructure.\n   * @protected\n   */\n  onInitial(event) {\n    let result;\n\n    if (this.impl.initialReaction) {\n      this.log(`Initial: for ${this}`);\n      result = this.impl.initialReaction(event);\n      if (result.external) {\n        throw new Error(`Initial reaction for ${this} returned external transitions`);\n      }\n      return result;\n    }\n\n    if (!(this instanceof (StateLib.State))) {\n      throw new Error(`Missing initial reaction for ${this}`);\n    }\n\n    // If there is no initial reaction, then we just enter this state.\n    // Technically this is a malformed FSM if there are inner states and\n    // this state has no initial reaction.  We won't police this since it\n    // isn't easily done with the data we are otherwise maintaining (we only\n    // know about parent states, not children), and such a problem would be\n    // easily caught by testing of the FSM.\n    return this.transitionTo(this);\n  }\n\n  /**\n   * After a reaction function has been called, this function processes the\n   * returned {@link StateContext.ReactionResult}.\n   * @param {StateContext.ReactionResult} result The result of a reaction.\n   * @param {FsmEvent|undefined} e The event that triggered the reaction;\n   *      undefined if this was due to the initial reaction.\n   * @returns {State} The active state of the FSM after the ReactionResult was\n   *      processed.\n   * @protected\n   */\n  processReactionResult(result, e) {\n    let curContext = this;\n\n    if (!result.destState) {\n      return this;\n    }\n\n    const destStateIter = this.lowestCommonAncestor(result);\n\n    // exit states until we get to the LCA\n    while (curContext !== destStateIter.deref()) {\n      curContext.onExit();\n      curContext = curContext.getParent();\n    }\n\n    // perform the transition\n    if (result.action) {\n      result.action(curContext, e);\n    }\n\n    curContext.log(`Action: transition to ${result.destState} in context ${curContext}`);\n\n    // Start by incrementing the iterator so we don't enter the\n    // context, which we are already in.  Then enter remaining states\n    // in the list.\n    for (destStateIter.incr(); !destStateIter.end(); destStateIter.incr()) {\n      curContext = destStateIter.deref();\n      curContext.onEntry();\n    }\n\n    // execute the initial transition in the destState.\n    const destInitial = curContext.onInitial(e);\n    if (destInitial.destState !== curContext) {\n      return curContext.processReactionResult(destInitial, e);\n    }\n    return curContext;\n  }\n\n  /**\n   * For a given reactionResult, this function returns an iterator to the\n   * context in which to process a transition from 'self' to\n   * 'reactionResult.destState'.  Advancing the iterator provides the states\n   * that need to be entered after the transition is processed.\n   * @param {ReactionResult} reactionResult An object created with one of the\n   *                                        reaction result methods defined in\n   *                                        either a state context or a state.\n   * @returns {Iterator} The iterator where the first element is the\n   * context in which to execute the transaction, and subsequent elements are\n   * to be entered after executing the transaction.\n   * @protected\n   */\n  lowestCommonAncestor(reactionResult) {\n    const ancestorList = this.impl.ancestorList;\n    const destAncestorList = reactionResult.destState.getAncestorList();\n    let i;\n\n    // Make sure the states belong to the same state machine\n    if (ancestorList[0] !== destAncestorList[0]) {\n      throw new Error(`No common ancestor between (${this} in ${ancestorList[0]}) and (${reactionResult.destState} in ${destAncestorList[0]})`);\n    }\n\n    // Optimize case where the two states are the same.  This would be the\n    // case for internal and self-transitions.\n    if (this === reactionResult.destState) {\n      i = ancestorList.length;\n      if (reactionResult.external) {\n        // self-transition, must exit then re-enter state.  Therefore,\n        // the context is our parent.\n        --i;\n      }\n    } else {\n      for (i = 1; i < ancestorList.length; ++i) {\n        if (ancestorList[i] !== destAncestorList[i]) {\n          break;\n        }\n      }\n\n      // Check if one state is within the other state.\n      if ((i === ancestorList.length) || (i === destAncestorList.length)) {\n        // One state within the other. Check whether this is a local\n        // or an external transition.\n        if (reactionResult.external) {\n          --i;    // Need to exit/re-enter the outermost state\n        }\n      }\n    }\n\n    // Here 'i' points to the first state to be entered after executing the\n    // transition.  We make the iterator with 'i-1' so that the first element\n    // is the context within which to execute the transition.\n    return makeIterator(destAncestorList, i - 1);\n  }\n\n  setLogPadding(padding) {\n    this.impl.logPadding = padding;\n  }\n}\n\n/**\n * @classdesc\n * A ReactionResult is suitable as a return value from a reaction function\n * or an initial reaction.\n * @private\n */\nStateContext.ReactionResult = class {\n  /**\n   * The ReactionResult constructor should never be invoked by users of the\n   * infrastructure. It should only be used by various public methods of\n   * StateContext or State, which return a ReactionResult.\n   *\n   * @param {Object} spec Defined according to members described below for\n   *      events that are handled by the reaction function; undefined if the\n   *      event was not handled by the reaction function.  For initial\n   *      reactions, spec must NOT be undefined.\n   * @param {StateContext} spec.caller The state context from which\n   *      {StateContext.ReactionResult} is being constructed.\n   * @param {State} spec.destState The destination state to\n   *      transition to.\n   * @param {StateContext.actionCallback} [spec.action] The function to call in\n   *      the transition context after the appropriate states have been\n   *      exited, if desired; undefined if no action is to be performed as a\n   *      result of the transition.\n   * @param {Boolean} spec.external True if the transition is an external\n   *      transition; false or undefined otherwise.\n   * @constructor\n   */\n  constructor(spec) {\n    if (!spec || !spec.caller || !(spec.caller instanceof StateContext)) {\n      throw new Error('spec.caller is required to be a StateContext');\n    }\n\n    if (!spec.caller.getStateMachine().isRunning()) {\n      throw new Error('ReactionResult objects can only be created while processing events');\n    }\n    if (spec.destState) {\n      if (!(spec.destState instanceof StateLib.State)) {\n        throw new Error('destState must be a State object');\n      }\n      if (spec.action && (typeof (spec.action) !== 'function')) {\n        throw new Error('action must be a function');\n      }\n      this.destState = spec.destState;\n      this.action = spec.action;\n      this.external = spec.external;\n    }\n  }\n};\n\nmodule.exports.StateContext = StateContext;\n","const {\n  LOG_DEBUG,\n  LOG_TRACE,\n} = require('solclient-log');\nconst { TransportBase } = require('../transport-base');\nconst { TransportClientStats } = require('../transport-client-stats');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionState } = require('../transport-session-states');\n\nconst MAX_BUFFERED_AMOUNT_QUERY_INTERVAL_MS = 4000;\n\n/**\n * Base class for web related transports\n * @extends TransportBase\n * @private\n */\nclass WebTransportSessionBase extends TransportBase {\n  /**\n   * @constructor\n   * @param {URL} url The URL to connect to\n   * @param {function} eventCB The function to call on events\n   * @param {SMFClient} client The function to call on data received.\n   * @param {Object} props Additional object properties for this transport session\n   */\n  constructor(url, eventCB, client, props) {\n    // instanitate instance properties defined in TransportBase\n    super(url, eventCB, client, props);\n\n    /**\n     * @type {Number}\n     */\n    this._connectTimeout = props.transportDowngradeTimeoutInMsecs;\n\n    /**\n     * @type {?number}\n     */\n    this._connectTimer = null;\n\n    /**\n     * @type {TransportClientStats}\n     */\n    this._clientstats = new TransportClientStats();\n\n    /**\n     * Maximum amount of send data than can be queued\n     * @type {Number}\n     */\n    this._sendBufferMaxSize = props.sendBufferMaxSize;\n\n    /**\n     * Maximum payload chunk size in web transport\n     * @type {Number}\n     */\n    this._maxPayloadBytes = props.maxWebPayload;\n\n    /**\n     * Queue to hold data to be sent to the Solace Message Router when we get back a\n     * data token\n     * @type {array}\n     */\n    this._queuedData = [];\n\n    /**\n     * Number of bytes of queued data\n     * @type {Number}\n     */\n    this._queuedDataSize = 0;\n\n    /**\n     * Remember if we have to send an event when there is room in the queue\n     * @type {Boolean}\n     */\n    this._canSendNeeded = false;\n\n    /**\n     * @type {TransportSessionState}\n     */\n    this._state = TransportSessionState.DOWN;\n\n    /**\n     * Any connection error that needs to be propagated up\n     * @type {?Error}\n     */\n    this._connError = null;\n  }\n\n  // override\n  getClientStats() {\n    return this._clientstats;\n  }\n\n  createConnectTimeout() {\n    if (this._connectTimeout > 0) {\n      this._connectTimer = setTimeout(() => {\n        this.connectTimerExpiry();\n      }, this._connectTimeout);\n    }\n  }\n\n  cancelConnectTimeout() {\n    if (this._connectTimer) {\n      clearTimeout(this._connectTimer);\n      this._connectTimer = null;\n    }\n  }\n\n  /* override me */\n  connectTimerExpiry() { // eslint-disable-line class-methods-use-this\n    return undefined;\n  }\n\n  allowEnqueue(datalen) {\n      // Bug 32006: if there's no queued data, we always accept at least one message, even if it\n      // exceeds the sendBufferMaxSize.\n      // If we reject enqueueing something too large because we already have queued data,\n      // that guarantees when the data is flushed we will emit the alertOnDequeue event.\n    return (this._queuedDataSize === 0 ||\n            ((datalen + this._queuedDataSize) <= this._sendBufferMaxSize));\n  }\n\n  enqueueFailNoSpace() {\n    this._canSendNeeded = true;\n    return TransportReturnCode.NO_SPACE;\n  }\n\n  /* override me */\n  flush(callback) { // eslint-disable-line class-methods-use-this\n    callback();\n  }\n\n  getQueuedDataToSend() {\n    // Track messages dequeued.\n    let data = '';\n\n    // Start by trying to fill a complete payload.\n    let bytesAllowed = this._maxPayloadBytes;\n    LOG_TRACE(`getQueuedDataToSend: bytesAllowed=${bytesAllowed}, bufferedAmount=${this.getBufferedAmount ? this.getBufferedAmount() : 'undefined'}`);\n    if (this.getBufferedAmount) {\n      bytesAllowed = this._maxPayloadBytes - this.getBufferedAmount();\n      if (bytesAllowed <= 0) {\n        LOG_DEBUG(`$$ bytesAllowed=${bytesAllowed}, maxPayloadBytes=${this._maxPayloadBytes\n                  }, bufferedAmount=${this.getBufferedAmount()}`);\n        if (BUILD_ENV.TARGET_BROWSER &&\n            (this._bufferedAmountQueryIntervalInMsecs *\n              this._bufferedAmountQueryIntervalDelayMultiplier <=\n              MAX_BUFFERED_AMOUNT_QUERY_INTERVAL_MS)) {\n          this._bufferedAmountQueryIntervalDelayMultiplier *= 2;\n        }\n        return data;\n      }\n      if (BUILD_ENV.TARGET_BROWSER) {\n        this._bufferedAmountQueryIntervalDelayMultiplier = 1;\n      }\n    }\n\n    if (this._queuedDataSize > bytesAllowed) {\n      let payloadSize = bytesAllowed;\n      // Slow path: dequeue and append until we fill the payload.\n      while (payloadSize && this._queuedDataSize) {\n        // Is this element larger than the payload?\n        const elem = this._queuedData[0];\n        const elemLength = elem.length;\n        if (elemLength > payloadSize) {\n          // This element is larger than the payload.\n          data += elem.substr(0, payloadSize);\n          this._queuedData[0] = elem.substr(payloadSize);\n\n          // The rest of the payload space was consumed.\n          this._queuedDataSize -= payloadSize;\n          payloadSize = 0;\n        } else {\n          data += this._queuedData.shift();\n          payloadSize -= elemLength;\n          this._queuedDataSize -= elemLength;\n          this._clientstats.msgWritten++;\n        }\n      }\n    } else {\n      // Shortcut: use the whole buffer, increase the message sent count by the length of the size\n      // queue, and reset the buffer.\n      data = this._queuedData.join('');\n      this._clientstats.msgWritten += this._queuedData.length;\n\n      this._queuedData = [];\n      this._queuedDataSize = 0;\n    }\n\n    LOG_DEBUG(`Sending ${data.length} bytes from queued data`);\n    return data;\n  }\n}\n\nmodule.exports.WebTransportSessionBase = WebTransportSessionBase;\n","const { TransportProtocol } = require('../transport-protocols');\nconst { TSHState } = require('../tsh-state');\nconst { WebTransportCapabilities } = require('./web-transport-capabilities');\n\n/**\n * @classdesc\n * WebSocket transport\n * @memberof solace\n * @private\n */\nclass StateWebSocketBinary extends TSHState {\n  /**\n   * @constructor\n   * @extends TSHState\n   * @param {Boolean} useSsl True if SSL should be used\n   * @param {Function} exitCb Callback to notify on exit\n   * @param {?TSHState} nextState Downgrade target\n   */\n  constructor(useSsl, exitCb, nextState) {\n    super(useSsl, TransportProtocol.WS_BINARY, exitCb, nextState);\n  }\n\n  validateLegal() { // eslint-disable-line class-methods-use-this\n    return WebTransportCapabilities.webSocket();\n  }\n}\n\nmodule.exports.StateWebSocketBinary = StateWebSocketBinary;\n","const { Check } = require('./check');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\n\nconst NO_OBJ = {}; // anonymous object\n\nfunction objectValues(object) {\n  return Object.keys(object).map(k => object[k]);\n}\n\nfunction subcodeSummary(subcode, expected = null, got = NO_OBJ) {\n  const expectedStr = expected ? `; expected: ${expected}` : '';\n  const gotStr = got !== NO_OBJ ? `; got: ${got}` : '';\n  switch (subcode) {\n    case ErrorSubcode.PARAMETER_INVALID_TYPE:\n      return `Parameter type was invalid${expectedStr}${gotStr}`;\n    default:\n      return ErrorSubcode.nameOf(subcode).toLowerCase().replace(/_/, ' ') + expectedStr;\n  }\n}\n\nfunction validateError(name, subcode, message) {\n  throw new OperationError(`Parameter ${name} failed validation`, subcode, message);\n}\n\nfunction validate(name, subcode, message, check, value, ...validatorArgs) {\n  if (!check(value, ...validatorArgs)) {\n    return validateError(name, subcode, message);\n  }\n  return value;\n}\n\nconst typename = x => x && x.constructor && x.constructor.name || typeof x;\n\n/**\n * The Check object is a powerful validation API but it is partially built at runtime by composing\n * functions, and it requires significant boilerplate for parameter validation.\n *\n * The Parameter API expresses concrete validations using the Check API, returning values on success\n * and throwing the appropriate SDK exception on failure. It would be tempting to try to\n * automatically build a Parameter method for every Check method, but this would make Parameter\n * difficult to understand and use.\n *\n * @private\n */\nconst Parameter = {};\n\nParameter.isArray = function isArray(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'array', value)) {\n  return validate(name, subcode, message, Check.isArray, value);\n};\n\nParameter.isBoolean =\nfunction isBoolean(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'boolean', value)) {\n  return validate(name, subcode, message, Check.boolean, value);\n};\n\nParameter.isBooleanOrNothing =\nfunction isBooleanOrNothing(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'boolean or nothing', value)) {\n  return validate(name, subcode, message, Check.boolean.orNothing, value);\n};\n\nParameter.isEnumMember =\nfunction isEnumMember(name, value, memberOfEnum, subcode = ErrorSubcode.PARAMETER_OUT_OF_RANGE, message = subcodeSummary(subcode, `one of [${memberOfEnum.names.join(', ')}]`, value)) {\n  return validate(name, subcode, message, Check.member, value, memberOfEnum);\n};\n\nParameter.isEnumMemberOrNothing =\nfunction isEnumMemberOrNothing(name, value, memberOfEnum, subcode = ErrorSubcode.PARAMETER_OUT_OF_RANGE, message = subcodeSummary(subcode, `one of [${memberOfEnum.names.join(', ')}]`, value)) {\n  return validate(name, subcode, message, Check.member.orNothing, value, memberOfEnum);\n};\n\nParameter.isFunction =\nfunction isFunction(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'function', value)) {\n  return validate(name, subcode, message, Check.function, value);\n};\n\nParameter.isFunctionOrNothing =\nfunction isFunctionOrNothing(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'function or nothing', value)) {\n  return validate(name, subcode, message, Check.function.orNothing, value);\n};\n\nParameter.isInstanceOf =\nfunction isInstanceOf(name, value, instanceOf, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE,\n                      message = subcodeSummary(subcode, instanceOf.name, typename(value))) {\n  return validate(name, subcode, message, Check.instanceOf, value, instanceOf);\n};\n\nParameter.isInstanceOfOrNothing =\nfunction isInstanceOfOrNothing(name, value, instanceOf, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, `${instanceOf.name} or nothing`, typename(value))) {\n  return validate(name, subcode, message, Check.instanceOf.orNothing, value, instanceOf);\n};\n\nParameter.isInstanceOfOrNull =\nfunction isInstanceOfOrNull(name, value, instanceOf, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, `${instanceOf.name} or null`, typename(value))) {\n  return validate(name, subcode, message, Check.instanceOf.orNull, value, instanceOf);\n};\n\nParameter.isInstanceOfOrUndefined =\nfunction isInstanceOfOrUndefined(name, value, instanceOf, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, `${instanceOf.name} or undefined`, typename(value))) {\n  return validate(name, subcode, message, Check.instanceOf.orUndefined, value, instanceOf);\n};\n\nParameter.isMember =\nfunction isMember(name, value, memberOf, subcode = ErrorSubcode.PARAMETER_OUT_OF_RANGE, message = subcodeSummary(subcode, `one of ${memberOf.name}.[${objectValues(memberOf).join(', ')}]`, value)) {\n  return validate(name, subcode, message, Check.member, value, memberOf);\n};\n\nParameter.isNumber =\nfunction isNumber(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'number', value)) {\n  return validate(name, subcode, message, Check.number, value);\n};\n\nParameter.isNumberOrNothing =\nfunction isNumberOrNothing(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'number or nothing', value)) {\n  return validate(name, subcode, message, Check.number.orNothing, value);\n};\n\nParameter.isNumberOrNull =\nfunction isNumberOrNull(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'number or null', value)) {\n  return validate(name, subcode, message, Check.number.orNull, value);\n};\n\nParameter.isRangeCompare =\nfunction isRangeCompare(name, value, operator, operand, subcode = ErrorSubcode.PARAMETER_OUT_OF_RANGE, message = subcodeSummary(subcode, `${operator} ${operand}`, value)) {\n  return validate(name, subcode, message, Check.rangeCompare, value, operator, operand);\n};\n\nParameter.isRangeCompareOrNothing = function isRangeCompareOrNothing(name, value, operator, operand, subcode = ErrorSubcode.PARAMETER_OUT_OF_RANGE, message = subcodeSummary(subcode, `${operator} ${operand} or nothing`, value)) {\n  return validate(name, subcode, message, Check.rangeCompare.orNothing, value, operator, operand);\n};\n\nParameter.isStringOrNull =\nfunction isStringOrNull(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'string or null', value)) {\n  return validate(name, subcode, message, Check.string.orNull, value);\n};\n\n\nParameter.isString =\nfunction isString(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'string', value)) {\n  return validate(name, subcode, message, Check.string, value);\n};\n\nParameter.isStringOrNothing =\nfunction isStringOrNothing(name, value, subcode = ErrorSubcode.PARAMETER_INVALID_TYPE, message = subcodeSummary(subcode, 'string or nothing', value)) {\n  return validate(name, subcode, message, Check.string.orNothing, value);\n};\n\nParameter.isValue =\nfunction isValue(name, value, expected, subcode = ErrorSubcode.PARAMETER_OUT_OF_RANGE, message = subcodeSummary(subcode, `must be ${value}`)) {\n  return validate(name, subcode, message, Check.equal, value, expected);\n};\n\n\nmodule.exports.Parameter = Parameter;\n","const { DestinationType } = require('./destination-type');\nconst { DestinationUtil } = require('./destination-util');\nconst { Queue } = require('./queue');\nconst { Topic } = require('./topic');\n\nconst QUEUE_PREFIX = '#P2P/QUE/';\nconst QUEUE_PREFIX_LEN = QUEUE_PREFIX.length;\nconst TEMPORARY_QUEUE_PREFIX = '#P2P/QTMP/';\n\nfunction createDestinationFromName(networkTopicName, networkTopicBytes = undefined) {\n  if (networkTopicName === null || networkTopicName.length === 0) {\n    return null;\n  }\n\n  const spec = {\n    name:  networkTopicName,\n    bytes: networkTopicBytes || DestinationUtil.encodeBytes(networkTopicName),\n  };\n  if (networkTopicName[0] === '#') {\n    if (networkTopicName.startsWith(QUEUE_PREFIX)) {\n      const offset = QUEUE_PREFIX_LEN;\n      spec.name = networkTopicName.substr(offset);\n      spec.type = DestinationType.QUEUE;\n      spec.offset = offset;\n      return new Queue(spec);\n    } else if (networkTopicName.startsWith(TEMPORARY_QUEUE_PREFIX)) {\n      spec.name = networkTopicName;\n      spec.type = DestinationType.TEMPORARY_QUEUE;\n      spec.offset = 0;\n      return new Queue(spec);\n    }\n  }\n  return new Topic(spec);\n}\n\nfunction createDestinationFromBytes(networkTopicBytes) {\n  if (networkTopicBytes === null || networkTopicBytes.length === 0) {\n    return null;\n  }\n\n  const networkTopicName = DestinationUtil.decodeBytes(networkTopicBytes);\n  return createDestinationFromName(networkTopicName, networkTopicBytes);\n}\n\nconst DestinationFromNetwork = {\n  createDestinationFromBytes,\n  createDestinationFromName,\n};\n\nmodule.exports.DestinationFromNetwork = DestinationFromNetwork;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFTransportSessionMessageType = {\n  CREATE:            0,\n  CREATE_RESP:       1,\n  DESTROY:           2,\n  DESTROY_RESP:      3,\n  DATA:              4,\n  DATA_TOKEN:        5,\n  DATA_STREAM_TOKEN: 6,\n};\n\nmodule.exports.SMFTransportSessionMessageType = Enum.new(SMFTransportSessionMessageType);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SessionOperation = {\n  CONNECT:         'CONNECT',\n  DISCONNECT:      'DISCONNECT',\n  CTRL:            'CTRL',\n  SEND:            'SEND',\n  QUERY_OPERATION: 'QUERY_OPERATION',\n};\n\nmodule.exports.SessionOperation = Enum.new(SessionOperation);\n","module.exports = require(\"utf-8-validate\");","/**\n * Created by rpaulson on 06/02/2017.\n */\nconst { Enum } = require('solclient-eskit');\n\n/********************************************************************************\n * @private\n * Events on the Consumer FSM\n * @enum {string}\n ********************************************************************************/\nconst ConsumerFSMEventNames = {\n  SESSION_UP:                 'SESSION_UP',\n  SESSION_UP_NO_AD:           'SESSION_UP_NO_AD',\n  SESSION_DOWN:               'SESSION_DOWN',\n  SESSION_DISCONNECT:         'SESSION_DISCONNECT',\n  FLOW_FAILED:                'FLOW_FAILED',\n  FLOW_UP:                    'FLOW_UP',\n  FLOW_ACTIVE_IND:            'FLOW_ACTIVE_IND',\n  FLOW_CLOSE:                 'FLOW_CLOSE',\n  FLOW_OPEN:                  'FLOW_OPEN',\n  FLOW_UNBOUND:               'FLOW_UNBOUND',\n  ACK:                        'ACK',\n  ACK_TIMEOUT:                'ACK_TIMEOUT',\n  BIND_TIMEOUT:               'BIND_TIMEOUT',\n  CREATE_TIMEOUT:             'CREATE_TIMEOUT',\n  UNBIND_TIMEOUT:             'UNBIND_TIMEOUT',\n  CAN_SEND:                   'CAN_SEND',\n  TRANSPORT_ERROR:            'TRANSPORT_ERROR',\n  DISPOSE:                    'DISPOSE',\n  VIRTUALROUTER_NAME_CHANGED: 'VIRTUALROUTER_NAME_CHANGED',\n  RECONNECT_INTERVAL_TIMEOUT: 'RECONNECT_INTERVAL_TIMEOUT',\n  BIND_RESPONSE:              'BIND_RESPONSE',\n  CREATE_FAILED:              'CREATE_FAILED',\n  CREATE_SUCCESS:             'CREATE_SUCCESS',\n};\n\nmodule.exports.ConsumerFSMEventNames = Enum.new(ConsumerFSMEventNames);\n","/* eslint-disable class-methods-use-this */ // declare prototype stubs\n\n/**\n * A logging callback. It must accept any valid number of arguments of any type. It must not throw.\n *\n * @callback\n * @function\n * @name solace.LogImpl.loggingCallback\n * @param {...*} args The arguments to log. Typically this is a mixture of strings and\n *  objects to be inspected. A simple implementation might call .toString() on each\n *  argument.\n */\n\n/**\n * @classdesc\n * A class that provides a binding to a log implementation. Applications that need to\n * control API logging must construct a LogImpl\n * instance, a log implementation that can be set in\n * {@link solace.SolclientFactoryProperties#logger}.\n * The binding will call the supplied log methods with the\n * parameters supplied to each.\n * @memberof solace\n */\nclass LogImpl {\n  /**\n   * @param {solace.LogImpl.loggingCallback} trace Callback for {@link solace.LogLevel.TRACE} logs.\n   * @param {solace.LogImpl.loggingCallback} debug Callback for {@link solace.LogLevel.DEBUG} logs.\n   * @param {solace.LogImpl.loggingCallback} info Callback for {@link solace.LogLevel.INFO} logs.\n   * @param {solace.LogImpl.loggingCallback} warn Callback for {@link solace.LogLevel.WARN} logs.\n   * @param {solace.LogImpl.loggingCallback} error Callback for {@link solace.LogLevel.ERROR} logs.\n   * @param {solace.LogImpl.loggingCallback} fatal Callback for {@link solace.LogLevel.FATAL} logs.\n   *\n   * @constructor\n   */\n  constructor(trace, debug, info, warn, error, fatal) {\n    Object.assign(this, {\n      trace,\n      debug,\n      info,\n      warn,\n      error,\n      fatal,\n    });\n  }\n\n  trace() {}\n  debug() {}\n  info() {}\n  warn() {}\n  error() {}\n  fatal() {}\n}\n\nmodule.exports.LogImpl = LogImpl;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst { Duplex } = require('stream');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n   *     automatically send a pong in response to a ping\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n   *     class to use. It must be the `WebSocket` class or class that extends it\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      allowSynchronousEvents: true,\n      autoPong: true,\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      WebSocket,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key = req.headers['sec-websocket-key'];\n    const upgrade = req.headers.upgrade;\n    const version = +req.headers['sec-websocket-version'];\n\n    if (req.method !== 'GET') {\n      const message = 'Invalid HTTP method';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 405, message);\n      return;\n    }\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      const message = 'Invalid Upgrade header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (key === undefined || !keyRegex.test(key)) {\n      const message = 'Missing or invalid Sec-WebSocket-Key header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (version !== 8 && version !== 13) {\n      const message = 'Missing or invalid Sec-WebSocket-Version header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (!this.shouldHandle(req)) {\n      abortHandshake(socket, 400);\n      return;\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Protocol header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        const message =\n          'Invalid or unacceptable Sec-WebSocket-Extensions header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new this.options.WebSocket(null, undefined, this.options);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      allowSynchronousEvents: this.options.allowSynchronousEvents,\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  //\n  // The socket is writable unless the user destroyed or ended it before calling\n  // `server.handleUpgrade()` or in the `verifyClient` function, which is a user\n  // error. Handling this does not make much sense as the worst that can happen\n  // is that some of the data written by the user might be discarded due to the\n  // call to `socket.end()` below, which triggers an `'error'` event that in\n  // turn causes the socket to be destroyed.\n  //\n  message = message || http.STATUS_CODES[code];\n  headers = {\n    Connection: 'close',\n    'Content-Type': 'text/html',\n    'Content-Length': Buffer.byteLength(message),\n    ...headers\n  };\n\n  socket.once('finish', socket.destroy);\n\n  socket.end(\n    `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n      Object.keys(headers)\n        .map((h) => `${h}: ${headers[h]}`)\n        .join('\\r\\n') +\n      '\\r\\n\\r\\n' +\n      message\n  );\n}\n\n/**\n * Emit a `'wsClientError'` event on a `WebSocketServer` if there is at least\n * one listener for it, otherwise call `abortHandshake()`.\n *\n * @param {WebSocketServer} server The WebSocket server\n * @param {http.IncomingMessage} req The request object\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} message The HTTP response body\n * @private\n */\nfunction abortHandshakeOrEmitwsClientError(server, req, socket, code, message) {\n  if (server.listenerCount('wsClientError')) {\n    const err = new Error(message);\n    Error.captureStackTrace(err, abortHandshakeOrEmitwsClientError);\n\n    server.emit('wsClientError', err, socket, req);\n  } else {\n    abortHandshake(socket, code, message);\n  }\n}\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Statistics for sent/received messages and control operations.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst StatType = {\n\n  // ------- SMF and Direct Messaging\n\n  /**\n   * Count of bytes sent as part of data messages.\n   */\n  TX_TOTAL_DATA_BYTES:            0,\n  /**\n   * Count of data messages sent.\n   */\n  TX_TOTAL_DATA_MSGS:             1,\n  /**\n   * Count of bytes sent as part of direct data messages.\n   */\n  TX_DIRECT_BYTES:                2,\n  /**\n   * Count of direct data messages sent.\n   */\n  TX_DIRECT_MSGS:                 3,\n  /**\n   * Count of bytes sent as part of control messages.\n   */\n  TX_CONTROL_BYTES:               4,\n  /**\n   * Count of control messages sent.\n   */\n  TX_CONTROL_MSGS:                5,\n  /**\n   * Count of request messages sent.\n   */\n  TX_REQUEST_SENT:                6,\n  /**\n   * Count of request timeouts that occurred.\n   */\n  TX_REQUEST_TIMEOUT:             7,\n  /**\n   * Count of bytes received as part of data messages.\n   */\n  RX_TOTAL_DATA_BYTES:            8,\n  /**\n   * Count of data messages received.\n   */\n  RX_TOTAL_DATA_MSGS:             9,\n  /**\n   * Count of bytes received as part of direct data messages.\n   */\n  RX_DIRECT_BYTES:                10,\n  /**\n   * Count of direct data messages received.\n   */\n  RX_DIRECT_MSGS:                 11,\n  /**\n   * Count of bytes received as part of control messages.\n   */\n  RX_CONTROL_BYTES:               12,\n  /**\n   * Count of control messages received.\n   */\n  RX_CONTROL_MSGS:                13,\n  /**\n   * Count discard message indications received on incoming messages.\n   */\n  RX_DISCARD_MSG_INDICATION:      14,\n  /**\n   * Count of reply messaged received.\n   */\n  RX_REPLY_MSG_RECVED:            15,\n  /**\n   * Count of received reply messages that were discarded.\n   */\n  RX_REPLY_MSG_DISCARD:           16,\n  /**\n   * @description\n   * Count of messages discarded due to the presence of an unknown element or\n   * unknown protocol in the SMF header.\n   */\n  RX_DISCARD_SMF_UNKNOWN_ELEMENT: 17,\n\n  // ------- SolCache Session\n\n  /**\n   * @description\n   * Count of cache requests sent. One conceptual request (i.e. one API call)\n   * may involve many requests and replies.\n   */\n  CACHE_REQUEST_SENT:                     18,\n  /**\n   * @description\n   * Count of OK responses to cache requests.\n   */\n  CACHE_REQUEST_OK_RESPONSE:              19,\n  /**\n   * @description\n   * Count of cache requests that returned a failure response.\n   */\n  CACHE_REQUEST_FAIL_RESPONSE:            20,\n  /**\n   * @description\n   * Count of cache replies discarded because a request has been fulfilled.\n   */\n  CACHE_REQUEST_FULFILL_DISCARD_RESPONSE: 21,\n  /**\n   * @description\n   * Count of cached messages delivered to the application.\n   */\n  RX_CACHE_MSG:                           22,\n  /**\n   * @description\n   * Count of cache requests that were incomplete.\n   */\n  CACHE_REQUEST_INCOMPLETE_RESPONSE:      23,\n  /**\n   * @description\n   * The cache session operation completed when live data arrived on the requested topic.\n   */\n  CACHE_REQUEST_LIVE_DATA_FULFILL:        24,\n\n  // ------ Guaranteed Messaging\n\n  /**\n   * Count of bytes sent as part of persistent data messages.\n   */\n  TX_PERSISTENT_BYTES:                25,\n  /**\n   * Count of persistent data messages sent.\n   */\n  TX_PERSISTENT_MSGS:                 26,\n  /**\n   * Count of non-persistent data bytes sent.\n   */\n  TX_NONPERSISTENT_BYTES:             27,\n  /**\n   * Count of non-persistent data messages sent.\n   */\n  TX_NONPERSISTENT_MSGS:              28,\n  /**\n   * The number of bytes redelivered in Persistent messages.\n   */\n  TX_PERSISTENT_BYTES_REDELIVERED:    29,\n  /**\n   * The number of Persistent messages redelivered.\n   */\n  TX_PERSISTENT_REDELIVERED:          30,\n  /**\n   * The number of bytes redelivered in Non-Persistent messages.\n   */\n  TX_NONPERSISTENT_BYTES_REDELIVERED: 31,\n  /**\n   * The number of Non-Persistent messages redelivered.\n   */\n  TX_NONPERSISTENT_REDELIVERED:       32,\n  /**\n   * The number of acknowledgments received.\n   */\n  TX_ACKS_RXED:                       33,\n  /**\n   * The number of times the transmit window closed.\n   */\n  TX_WINDOW_CLOSE:                    34,\n  /**\n   * The number of times the acknowledgment timer expired.\n   */\n  TX_ACK_TIMEOUT:                     35,\n  /**\n   * Count of bytes received as part of persistent data messages.\n   */\n  RX_PERSISTENT_BYTES:                36,\n  /**\n   * Count of persistent data messages received.\n   */\n  RX_PERSISTENT_MSGS:                 37,\n  /**\n   * Count of bytes received as part of non-persistent data messages.\n   */\n  RX_NONPERSISTENT_BYTES:             38,\n  /**\n   * Count of non-persistent data messages received.\n   */\n  RX_NONPERSISTENT_MSGS:              39,\n  /**\n   * Count of acknowledgements sent to the Solace Message Router\n   * for guaranteed messages received by the API.\n   */\n  RX_ACKED:                           40,\n  /**\n   * Count of guaranteed messages discarded for being duplicates.\n   */\n  RX_DISCARD_DUPLICATE:               41,\n  /**\n   * Count of guaranteed messages discarded due to no match message consumer for the message.\n   */\n  RX_DISCARD_NO_MATCHING_CONSUMER:    42,\n  /**\n   * Count of guaranteed messages discarded for being received out of order.\n   */\n  RX_DISCARD_OUT_OF_ORDER:            43,\n  /**\n   * Count of received persistent and non-persistent messages that were rejected.\n   */\n  RX_SETTLE_REJECTED:       44,\n  /**\n   * Count of received persistent and non-persistent messages that were failed.\n   */\n  RX_SETTLE_FAILED:         45,\n  /**\n   * Count of received persistent and non-persistent messages that were accepted manually (no auto-acks).\n   */\n  RX_SETTLE_ACCEPTED:       46,\n};\n\nmodule.exports.StatType = Enum.new(StatType);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents the possible endpoint access types. The corresponding endpoint property is\n * {@link solace.QueueProperties#accessType}.\n *\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst QueueAccessType = {\n  /**\n   * @description An exclusive endpoint. The first client to bind\n   * receives the stored messages on the Endpoint.\n   * @type {String}\n   */\n  EXCLUSIVE:    'EXCLUSIVE',\n  /**\n   * @description A non-exclusive (shared) Queue. Each client to bind\n   * receives messages in a round robin fashion.\n   * @type {String}\n   */\n  NONEXCLUSIVE: 'NONEXCLUSIVE',\n};\n\nmodule.exports.QueueAccessType = Enum.new(QueueAccessType);\n","const { Bits, Convert } = require('solclient-convert');\nconst { ClientCtrlMessage, SMFParameter } = require('../message-objects');\nconst { LOG_ERROR } = require('solclient-log');\n\nconst {\n  get: bits,\n  set: setBits,\n} = Bits;\n\nconst {\n  int8ToStr, /*strToInt8,*/\n  int16ToStr, /*strToInt16,*/\n  int32ToStr, /*strToUInt32,*/\n} = Convert;\n\nfunction parseCCAt(dataBuf, offset, payloadLen) {\n  const ccMsg = new ClientCtrlMessage();\n  if (payloadLen < 6 || offset + 6 > dataBuf.length) {\n      // not enough data! Return empty.\n      // This is required because we can get an empty CC payload as a router response\n    return ccMsg;\n  }\n\n  let pos = offset;\n  const twobytes = dataBuf.readUInt16BE(pos);\n  pos += 2;\n    // var uh = bits(twobytes, 15, 1);\n  const version = bits(twobytes, 8, 3);\n  const msgType = bits(twobytes, 0, 8);\n  const len = dataBuf.readUInt32BE(pos);\n  pos += 4;\n\n    // Sanity check: we support ClientCtrl v1\n  if (version !== 1) {\n    LOG_ERROR(`Unsupported ClientCtrl version ${version}`);\n    return false;\n  }\n\n  if (len <= 0 || (offset + len) > dataBuf.length) {\n    return false;\n  }\n\n  ccMsg.msgType = msgType;\n  ccMsg.version = version;\n  while (pos < (offset + len)) {\n    const onebyte = dataBuf.readUInt8(pos);\n    pos++;\n    const paramUh = bits(onebyte, 7, 1);\n    const paramType = bits(onebyte, 0, 7);\n    const paramLen = dataBuf.readUInt32BE(pos);\n    if (paramLen <= 0) {\n      return false; // SMF parsing fail\n    }\n\n    pos += 4;\n    const paramValueLen = paramLen - 5;\n    const smfP = new SMFParameter(paramUh, paramType, null, dataBuf, pos, pos + paramValueLen);\n    ccMsg.addParameter(smfP);\n    pos += paramValueLen;\n  }\n  return ccMsg;\n}\n\nfunction encCC(ccMsg) {\n  const paramSpace = [];\n  const paramArray = ccMsg.getParameterArray();\n    /*\n    ClientCtrl Parameter formatting:\n        1 byte uh/type\n        4 bytes length\n        N bytes value\n     */\n  for (let p = 0, n = paramArray.length; p < n; ++p) {\n    const currentParam = paramArray[p];\n      // It's not a flat array, we have gaps!\n    if (currentParam === undefined) {\n      continue;\n    }\n    let currentParamOneByte = 0;\n    currentParamOneByte = setBits(currentParamOneByte, currentParam.getUh(), 7, 1);\n    currentParamOneByte = setBits(currentParamOneByte, currentParam.getType(), 0, 7);\n    paramSpace.push(int8ToStr(currentParamOneByte));\n    paramSpace.push(int32ToStr(currentParam.getValue().length + 5));\n    paramSpace.push(currentParam.getValue());\n  }\n\n  const paramData = paramSpace.join('');\n  let twobytes = 0;\n  twobytes = setBits(twobytes, 0, 15, 1); // uh\n  twobytes = setBits(twobytes, 0, 11, 4); // RFU\n  twobytes = setBits(twobytes, 1, 8, 3); // version\n  twobytes = setBits(twobytes, ccMsg.msgType, 0, 8); // msgtype\n\n  const data = [];\n  data.push(int16ToStr(twobytes)); // first 2B (uh, version, msgtype)\n  data.push(int32ToStr(6 + paramData.length)); // length: 6B header + params\n  data.push(paramData);\n  return data.join('');\n}\n\nmodule.exports.parseCCAt = parseCCAt;\nmodule.exports.encCC = encCC;\n","const { clone } = require('solclient-util'); // using the modified local clone version\nconst SolclientFactoryLib = require('solclient-factory');\nconst { Codec: SDTCodec } = require('solclient-sdt');\nconst { Convert } = require('solclient-convert');\nconst { Destination } = require('solclient-destination');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { LOG_DEBUG, LOG_WARN } = require('solclient-log');\nconst { MessageCacheStatus } = require('./message-cache-status');\nconst { MessageDeliveryModeType } = require('./message-delivery-mode-types');\nconst { MessageDumpFlag } = require('./message-dump-flags');\nconst { MessageDumpUtil } = require('./message-dump-util');\nconst { MessageType } = require('./message-types');\nconst { MessageOutcome } = require('./message-outcomes');\nconst { MessageUserCosType } = require('./message-user-cos-types');\nconst { Parameter } = require('solclient-validate');\nconst { RgmidFactory } = require('./replication-group-message-id');\nconst { SDTField, SDTFieldType, SDTMapContainer, SDTUnsupportedValueError } = require('solclient-sdt');\nconst { Baggage, MessageTracingSupport, TraceContext, TraceContextSetter } = require('solclient-message-tracing');\n\nconst { ProfileBinding } = SolclientFactoryLib;\n\nconst {\n  utf8ToUcs2,\n  anythingToBuffer,\n} = Convert;\nconst {\n  isBoolean,\n  isEnumMember,\n  isInstanceOf,\n  isInstanceOfOrNothing,\n  isNumberOrNothing,\n  isStringOrNothing,\n} = Parameter;\n\n// When a message is cloned for sending,\n// * We assume that it may NOT include circular references.\n//   These are also unsupported in the encoder.\n// * We assume that all properties to be cloned are enumerable.\n//   This has significant (~10% AD send rate) performance impact.\n\nconst MESSAGE_CLONE_OPTIONS = { circular: false, includeNonEnumerable: false };\n\n/**\n * Function called on construct/reset. Sets the initial values for fields that have them.\n * @param {Message} message The message to initialize\n * @internal\n */\nfunction initMessage(message) {\n  message._deliveryMode = MessageDeliveryModeType.DIRECT;\n  message._userCos = MessageUserCosType.COS1;\n  message._cacheStatus = MessageCacheStatus.LIVE;\n  message._spoolerUniqueId = undefined;\n  /* message._spoolerMessageId does not to be set to undefined\n   * message._spoolerMessageId should only be set when\n   * message._spoolerUniqueId is set to a value\n   * other than undefined or RgmidFactory.INVALID_SUID\n   */\n  message._priority = undefined;\n  message._deliveryCount = -1; // Makes the accessor throw, never returned to user.\n\n  // for tracing support\n  message._traceContextSetter = null;\n  message._creationContext = null;\n  message._transportContext = null;\n  message._baggage = new Baggage();\n}\n\n/**\n * Function called on reset only. Clears every field in the message. Call #initMessage\n * to set initial values.\n * @param {Message} message The message to clear\n * @internal\n */\nfunction clearMessage(message) {\n  const fields = Object.keys(message);\n  fields.forEach(f => delete message[f]);\n}\n\n/**\n * Function called to clear extended var-len message properties\n * @param {Message} message The message to update\n * @internal\n */\nfunction clearExtendedVarLenParameters(message) {\n  // clear the tracing support params since\n  // they use extended var-len encoding\n  message._transportContext = null;\n}\n\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users. Users should obtain an instance from\n * {@link solace.SolclientFactory.createMessage}</b>\n * <p>\n * A message is a container that can be used to store and send messages to and from the\n * Solace Message Router.\n *\n * Applications manage the lifecycle of a message; a message is created by calling\n * {@link solace.SolclientFactory.createMessage} and is freed by dereferencing it.\n *\n * API operations that cache or mutate messages always take a copy. A message may\n * be created, mutated by the API user, and sent multiple times.\n *\n * The Message Object provides methods to manipulate the common Solace\n * message header fields that are optionally sent in the binary metadata\n * portion of the Solace message.\n *\n * Applications can also use the structured data API {@link solace.Message#setSdtContainer}\n * to add containers (maps or streams) and their fields to the binary payload or\n * to the User Property map contained within the binary metadata.\n *\n * This does not prevent applications from ignoring these\n * methods and sending payload in the binary payload as an opaque binary field for\n * end-to-end communications\n *\n * @memberof solace\n * @extends solace.MessageTracingSupport\n */\nclass Message extends MessageTracingSupport {\n\n  /**\n   * @constructor\n   * @hideconstructor\n   **/\n  constructor() {\n    super(); // call the tracing support constructor\n    initMessage(this);\n  }\n\n  /**\n   * Gets the payload type ({@link solace.MessageType}) of the message. A message has a\n   * structured payload if one was attached via {@link solace.Message#setSdtContainer} otherwise\n   * if the payload is attached via {@link Message@setBinaryAttachment} then it\n   * is unstructured ({@link solace.MessageType#BINARY})\n   *\n   * @returns {solace.MessageType} The structured payload type.\n   * @default {solace.MessageType.BINARY}\n   */\n  getType() {\n    return this._messageType || MessageType.BINARY; // This is OK; BINARY === 0.\n  }\n\n  /**\n   * Sets the application-provided message ID.\n   * @param {?String} value The new value for the application-provided message ID.\n   */\n  setApplicationMessageId(value) {\n    this._applicationMessageId = isStringOrNothing('applicationMessageId', value);\n  }\n\n  /**\n   * Gets the application-provided message ID.\n   * @returns {?String} The application provided message ID.\n   */\n  getApplicationMessageId() {\n    return this._applicationMessageId;\n  }\n\n  /**\n   * Sets the application message type. This value is used by applications\n   * only, and is passed through the API and Solace Message Router untouched.\n   * @param {?String} value The application message type.\n   */\n  setApplicationMessageType(value) {\n    this._applicationMessageType = isStringOrNothing('applicationMessageType', value);\n  }\n\n  /**\n   * Gets the application message type. This value is used by applications\n   * only, and is passed through the API and Solace Message Router untouched.\n   * @returns {?String} The application message type.\n   */\n  getApplicationMessageType() {\n    return this._applicationMessageType;\n  }\n\n  /**\n   * Gets the binary attachment part of the message.\n   *\n   * Backward compatibility note: Using the version10 factory profile or older,\n   * the binary attachment is returned as a 'latin1' String:\n   * Each character has a code in the range * 0-255\n   * representing the value of a single received byte at that position.\n   *\n   * @returns {Uint8Array|String|null} A TypedArray view of the binary attachment.\n   */\n  getBinaryAttachment() {\n    if (this._binaryAttachment && ProfileBinding.value.byteArrayAsString) {\n      return this._binaryAttachment.toString('latin1');\n    }\n    return this._binaryAttachment;\n  }\n\n  /**\n   * Sets the binary attachment part of the message.\n   *\n   * The binary attachment is conceptually an array of bytes.\n   * When this method is used, the message payload type is {@link solace.MessageType#BINARY}\n   * See {@link solace.Message#getType}.\n   *\n   * Applications may set the binary attachment to NULL or undefined to\n   * remove the binary attachment and create a message with no payload.\n   *\n   * The following types are accepted:\n   *   Buffer (the nodeJS native type or equivalent)\n   *   ArrayBuffer,\n   *   Any DataView or TypedArray,\n   *   'latin1' String for backwards compatibility:\n   *     each character has a code in the range 0-255\n   *     representing exactly one byte in the attachment.\n   *\n   * @param {Uint8Array|ArrayBufferLike|DataView|String|null|undefined} value Sets the binary attachment part of the message.\n   */\n  setBinaryAttachment(value) {\n    if (value) {\n      this._messageType = MessageType.BINARY;\n    }\n    this._setBinaryAttachment(anythingToBuffer(value));\n  }\n  _setBinaryAttachment(value) {\n    this._binaryAttachment = value;\n  }\n\n  /**\n   * Given a Message containing a cached message, return the cache Request Id that\n   * the application set in the call to {@link solace.CacheSession#sendCacheRequest}.\n   *\n   * @returns {?Number} The request ID of the cache request associated with this message.\n   */\n  getCacheRequestId() {\n    return this._cacheRequestId;\n  }\n\n  /**\n   * @private\n   * @param {Number} cacheRequestID The cache request ID associated with this message\n   */\n  _setCacheRequestID(cacheRequestID) {\n    this._cacheRequestId = cacheRequestID;\n  }\n\n  /**\n   * Gets the correlation ID.  The message Correlation Id\n   * is carried in the Solace message headers unmodified by the API and\n   * the Solace Message Router. This field may be used for peer-to-peer\n   * message synchronization and is commonly used for correlating\n   * a request to a reply. See {@link solace.Session#sendRequest}.\n   * @returns {?String} The correlation ID associated with the message.\n   */\n  getCorrelationId() {\n    return this._correlationId;\n  }\n\n  /**\n   * Sets the correlation ID. The message Correlation Id\n   * is carried in the Solace message headers unmodified by the API and\n   * the Solace Message Router. This field may be used for peer-to-peer\n   * message synchronization and is commonly used for correlating\n   * a request to a reply. See {@link solace.Session#sendRequest}.\n   * @param {String|null|undefined} value The correlation ID to associate with the message.\n   */\n  setCorrelationId(value) {\n    this._correlationId = isStringOrNothing('correlationId', value);\n  }\n\n  /**\n   * Gets the correlation Key. A correlation key is used to correlate\n   * a message with its acknowledgement or rejection. The correlation key is an object that is\n   * passed back to the client during the router acknowledgement or rejection.\n   *\n   * The correlation key is a local reference\n   * used by applications generating Guaranteed messages. Messages that are\n   * sent in either {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   * {@link solace.MessageDeliveryModeType.NON_PERSISTENT} mode may set the correlation key.\n   * @returns {?Object} The correlation Key associated with the message,\n   * or <code>null</code>, if unset.\n   */\n  getCorrelationKey() {\n    return this._correlationKey || null;\n  }\n\n  /**\n   * Sets the correlation Key. A correlation key is used to correlate\n   * a message with its acknowledgement or rejection. The correlation key is an object that is\n   * passed back to the client during the router acknowledgement or rejection.\n   *\n   * The correlation key is a local reference\n   * used by applications generating Guaranteed Messages. Messages that are\n   * sent in either {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   * {@link solace.MessageDeliveryModeType.NON_PERSISTENT} mode may set the correlation key. If this\n   * method is used, the correlation information is returned\n   * when the {@link solace.SessionEventCode#event:ACKNOWLEDGED_MESSAGE} event\n   * is later received for an acknowledged message or when the\n   * {@link solace.SessionEventCode#event:REJECTED_MESSAGE_ERROR} is received for a rejected\n   * message.\n   *\n   * The API only maintains a reference to the passed object.  If the application requires the\n   * contents are unmodified for proper correlation, then it is the application's responsibility\n   * to ensure the contents of the object are not modified.\n   *\n   * Important: <b>The Correlation Key is not included in the\n   * transmitted message and is only used with the local API</b>\n   * @param {Object|String|null|undefined} value The correlation Key to associate with the message.\n   */\n  setCorrelationKey(value) {\n    this._correlationKey = value;\n  }\n\n  /**\n   * Gets whether the message is configured for delivering to one client only.\n   * @returns {Boolean} indicates whether the message is configured for\n   * delivering to one client only.\n   * @deprecated use Shared Subscriptions instead.\n   */\n  isDeliverToOne() {\n    return this._deliverToOne || false;\n  }\n\n  /**\n   * Sets whether the message is configured for delivering to one client only.\n   * @param {Boolean} value whether the message is configured for delivering to one client only.\n   * @deprecated use Shared Subscriptions instead.\n   * @default false\n   */\n  setDeliverToOne(value) {\n    this._setDeliverToOne(this._deliverToOne = isBoolean('deliverToOne', value));\n  }\n  _setDeliverToOne(value) {\n    this._deliverToOne = value;\n  }\n\n  /**\n   * Gets the delivery mode of the message.\n   * @returns {solace.MessageDeliveryModeType} representing the delivery mode of the message.\n   */\n  getDeliveryMode() {\n    return this._deliveryMode;\n  }\n\n  /**\n   * Sets the delivery mode of the message.\n   * @param {solace.MessageDeliveryModeType} value The message delivery mode.\n   * @default MessageDeliveryModeType.DIRECT\n   */\n  setDeliveryMode(value) {\n    this._setDeliveryMode(isEnumMember('deliveryMode', value, MessageDeliveryModeType));\n  }\n  _setDeliveryMode(value) {\n    this._deliveryMode = value;\n  }\n\n  /**\n   * Gets the destination to which the message was published.\n   * @returns {?Destination} The destination to which a message was published.\n   */\n  getDestination() {\n    return this._destination;\n  }\n\n  /**\n   * Sets the destination ({@link solace.DestinationType#Topic} or\n   * {@link solace.DestinationType#Queue}) to publish the message to.\n   * @param {Destination} value The destination to publish the message to.\n   */\n  setDestination(value) {\n    this._setDestination(isInstanceOf('destination', value, Destination));\n  }\n  _setDestination(value) {\n    this._destination = value;\n  }\n\n  /**\n   * Indicates whether one or more messages have been discarded prior\n   * to the current message. This indicates congestion discards only and\n   * is not affected by message eliding.\n   * @returns {Boolean} Returns true if one or more messages have been\n   * discarded prior to the current message; otherwise, it returns false.\n   */\n  isDiscardIndication() {\n    return this._discardIndication || false;\n  }\n\n  /**\n   * @private\n   * @param {Boolean} value The new value for discard indication\n   */\n  setDiscardIndication(value) {\n    this._setDiscardIndication(isBoolean('discardIndication', value));\n  }\n  _setDiscardIndication(value) {\n    this._discardIndication = value;\n  }\n\n  /**\n   * Returns whether the message is eligible for eliding.\n   * <p>\n   * Message eliding enables filtering of data to avoid transmitting\n   * every single update to a subscribing client.\n   * <p>\n   * This property does not indicate whether the message was elided.\n   *\n   * @returns {Boolean} indicates whether the message is eligible for eliding.\n   */\n  isElidingEligible() {\n    return this._elidingEligible || false;\n  }\n\n  /**\n   * Sets whether the message is eligible for eliding.\n   * <p>\n   * Message eliding enables filtering of data to avoid transmitting\n   * every single update to a subscribing client.\n   * <p>\n   * This property does not indicate whether the message was elided.\n   *\n   * @param {Boolean} value sets whether the message is eligible for eliding.\n   * @default false\n   */\n  setElidingEligible(value) {\n    this._setElidingEligible(isBoolean('setElidingEligible', value));\n  }\n  _setElidingEligible(value) {\n    this._elidingEligible = value;\n  }\n\n  /**\n   * Gets the Http Content Encoding\n   * @returns {?String} the http content encoding, if set.\n   */\n    getHttpContentEncoding() {\n      return this._httpContentEncoding;\n    }\n  \n    /**\n     * Sets the Http Content Encoding\n     * @param {String} value The http content encoding.\n     */\n    setHttpContentEncoding(value) {\n      this._httpContentEncoding = isStringOrNothing(\"httpContentEncoding\", value);\n      if (this._httpContentEncoding === \"\") {\n        delete this._httpContentEncoding;\n      }\n    }\n  \n    /**\n     * Gets the Http Content Type\n     * @returns {?String} the http content type, if set.\n     */\n     getHttpContentType() {\n      return this._httpContentType;\n    }\n  \n    /**\n     * Sets the Http Content Type\n     * @param {String} value The http content type.\n     */\n    setHttpContentType(value) {\n      this._httpContentType = isStringOrNothing('httpContentType', value);\n      if (this._httpContentType === \"\") {\n        delete this._httpContentType;\n      }\n    }\n    \n\n  /// ---------------------------------------------------------\n  // * Internal use only methods on the message, for fields set by the internal\n  // * publisher\n  /// ---------------------------------------------------------\n\n  /**\n   * @returns {Number} The publisher ID\n   * @private\n   */\n  getPublisherId() {\n    return this._publisherId;\n  }\n  /**\n   * @param {Number} value  The publisher ID to set\n   * @private\n   */\n  setPublisherId(value) {\n    this._publisherId = value;\n  }\n\n  /**\n   * @returns {Number} The publisher message ID\n   * @private\n   */\n  getPublisherMessageId() {\n    return this._publisherMsgId;\n  }\n  /**\n   * @param {Number} value The publisher message ID to set\n   * @private\n   */\n  setPublisherMessageId(value) {\n    this._publisherMsgId = value;\n  }\n\n  /// -------------------------------------------------------------\n  // * User-settable properties for publishing\n  /// -------------------------------------------------------------\n\n  /**\n   * @returns {Number} The Guaranteed Message TTL, in milliseconds.\n   */\n  getTimeToLive() {\n    return this._timeToLive;\n  }\n  /**\n   * @param {Number} value The Guaranteed Message TTL to set, in milliseconds.\n   *\n   * The time to live is the number of milliseconds the message may be stored on the\n   * Solace Message Router before the message is discarded or moved to a Dead Message\n   * Queue. See {@link solace.Message.setDMQEligible}.\n   *\n   * Setting the Time To Live to zero disables TTL for the message.\n   *\n   * This property is only valid for Guaranteed messages (Persistent and Non-Persistent).\n   * It has no effect when used in conjunction with other message types unless the message\n   * is promoted by the appliance to a Guaranteed message.\n   *\n   * The maxium allowed time to live is 3.1536E11 (315360000000) which is\n   * approximately 10 years.\n   * @default 0\n   */\n  setTimeToLive(value) {\n    const MAX_MESSAGE_TTL_MS = (10 * 365 * 24 * 60 * 60 * 1000); // approximately 10 years\n\n    // Allow parser and initializer to set timeToLive to undefined\n    if (value === null || value === undefined) {\n      this._timeToLive = value;\n      return;\n    }\n    if (typeof value !== 'number' || isNaN(value)) {\n      throw new OperationError('Invalid type for time to live',\n        ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    if (value < 0 || value > MAX_MESSAGE_TTL_MS) {\n      throw new OperationError('Invalid time to live value',\n        ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    this._timeToLive = value;\n  }\n\n  /**\n   * @returns {Number|undefined} The Guaranteed Message expiration value.\n   * The expiration time is the UTC time\n   * (that is, the number of milliseconds from midnight January 1, 1970 UTC) when the\n   * message is to expire.\n   */\n  getGMExpiration() {\n    return this._expiration;\n  }\n  /**\n   * Set the expiration time field. The expiration time is the UTC time\n   * (that is, the number of milliseconds from midnight January 1, 1970 UTC) when the\n   * message is to expire. The expiration time is carried in the message when set to\n   * a non-zero value. Expiration time is not included when this value is set to zero or\n   * undefined\n   *\n   * The message expiration time is carried to clients that receive the message\n   * unmodified and does not effect the life cycle of the message. Use\n   * {@link solace.Message#setTimeToLive} to enforce message expiry in the network.\n   *\n   * @param {?Number} value The new Guaranteed Message expiration value\n   */\n  setGMExpiration(value) {\n    this._expiration = isNumberOrNothing('GMExpiration', value);\n  }\n\n  /**\n   * @returns {Boolean} Whether this message is Guaranteed Message DMQ eligible\n   */\n  isDMQEligible() {\n    return this._dmqEligible || false;\n  }\n  /**\n   * @param {Boolean} value The new value for Guaranteed Message DMQ (Dead Message Queue) Eligible.\n   * When this property is set, when the message expires in the network\n   * the message is saved on a appliance dead message queue. Otherwise the expired message is\n   * discarded. See {@link solace.Message#setTimeToLive}.\n   * @default false\n   */\n  setDMQEligible(value) {\n    this._setDMQEligible(isBoolean('DMQEligible', value));\n  }\n  _setDMQEligible(value) {\n    this._dmqEligible = value;\n  }\n\n  /// ---------------------------------------------------------\n  // * Internal use only methods on the message, for fields set by the consumer flow\n  /// ---------------------------------------------------------\n\n  /**\n   * @returns {Long} The ID of the flow that received this message\n   * @private\n   */\n  getFlowId() {\n    return this._flowId;\n  }\n  /**\n   * @param {Long} value The flow ID that received this message\n   * @private\n   */\n  setFlowId(value) {\n    this._flowId = value;\n  }\n\n  /**\n   * @returns {Long} The Guaranteed Message prevMsgId\n   * @private\n   */\n  getGuaranteedPreviousMessageId() {\n    return this._guaranteedPrevMsgId;\n  }\n  /**\n   * @param {Long} value The Guaranteed Message prevMsgId to set\n   * @private\n   */\n  setGuaranteedPreviousMessageId(value) {\n    this._guaranteedPrevMsgId = value;\n  }\n\n  /**\n   * @param {Long} value Spooler unique id value\n   * @private\n   */\n  _setSpoolerUniqueId(value) {\n    this._spoolerUniqueId = value;\n  }\n\n  /**\n   * @returns {?Long} value of Spooler unique id\n   * @private\n   */\n  _getSpoolerUniqueId() {\n    // This can be set via the smf header or by the message consumer\n    // using _setSpoolerUniqueId.\n    // The message consumer check if a data message has a suid set\n    // the updates the consumer stored value for suid from the message value.\n    // If the message does not have a suid the message consumer sets the suid\n    // of the message using _setSpoolerUniqueId.\n    // See consumer-fsm.acceptMessage for details.\n    if (this._spoolerUniqueId === undefined) {\n      return RgmidFactory.INVALID_SUID;\n    }\n    return this._spoolerUniqueId;\n  }\n\n  /// ---------------------------------------------------------\n  // * Properties set by the Message Consumer\n  /// ---------------------------------------------------------\n\n  /**\n   * @returns {?solace.MessageConsumer} The associated Message Consumer, if received by a consumer\n   */\n  getMessageConsumer() {\n    return this._consumer;\n  }\n  /**\n   * @param {solace.MessageConsumer} value The Message Consumer to associate with this message\n   * @private\n   */\n  setMessageConsumer(value) {\n    this._consumer = value;\n  }\n\n  /**\n   * This message ID is NOT a universal unique identifier for the message.\n   * There is no use for this message ID in an application.\n   * Internally this message ID is used when a message is acknowledged\n   * calling Message.acknowledge().\n   * No other meaning should be inferred from the value of this message ID.\n   * @returns {?Long} A field in the message structure intended for internal use.\n   * @deprecated There is no useful purpose for this method. Do not use it.\n   */\n  getGuaranteedMessageId() {\n    return this._guaranteedMsgId;\n  }\n  /**\n   * @param {Long} value The Guaranteed Message msgId to set\n   * @private\n   */\n  setGuaranteedMessageId(value) {\n    this._guaranteedMsgId = value;\n  }\n\n  /**\n   * @param {Long} value Spooler message id value, this can be the mateAckId or the AckId\n   * @private\n   */\n  _setSpoolerMessageId(value) {\n    this._spoolerMessageId = value;\n  }\n\n  /**\n   * Returns the Replication Group Message Id\n   * @returns {?solace.ReplicationGroupMessageId} The replication group message id\n   *  assigned by the router.\n   */\n  getReplicationGroupMessageId() {\n    if (this._spoolerUniqueId === undefined\n       || RgmidFactory.INVALID_SUID.eq(this._spoolerUniqueId)) {\n      return undefined;\n    }\n    /* use this._spoolerMessageId if possible otherwise use this._guaranteedMsgId */\n    const smid = this._spoolerMessageId || this._guaranteedMsgId;\n    /* Note smid as this._guaranteedMsgId must have a value\n     * if this._spoolerUniqueId is not RgmidFactory.INVALID_SUID */\n    return RgmidFactory.from({ suid: this._spoolerUniqueId, msgid: smid });\n  }\n\n  /**\n   * Returns the Topic Sequence Number.  If there is no topic sequence number\n   * undefined is returned.\n   * @returns {?Long} The Topic Sequence number assigned to this message by the Message Router.\n   */\n  getTopicSequenceNumber() {\n    return this._topicSequenceNumber;\n  }\n\n  /**\n   * @param {Long} topicSeqNo The Topic Sequence Number to set\n   * @private\n   */\n  setTopicSequenceNumber(topicSeqNo) {\n    this._topicSequenceNumber = topicSeqNo;\n  }\n\n  /**\n   * Returns the delivery count.\n   *\n   * @returns {Number|undefined} The delivery count reported by the broker.\n   * @throws {solace.OperationError} if endpoint does not report delivery count (message is not persistent).\n   */\n\n  getDeliveryCount() {\n    if (this._deliveryCount === -1) {\n      throw new OperationError('Endpoint does not report delivery count.',\n        ErrorSubcode.INVALID_OPERATION);\n    } // else\n    return this._deliveryCount;\n  }\n\n  /**\n   * @param {Number} deliveryCount on this message.\n   * @private\n   */\n  setDeliveryCount(deliveryCount) {\n    this._deliveryCount = deliveryCount;\n  }\n\n\n  /**\n   * Settles this message in a requested way.\n   *\n   * If the {@link solace.MessageConsumer} on which this message was received is configured to use\n   * {@link solace.MessageConsumerAckMode.CLIENT}, then when a message is received by an\n   * application, the application must call this method to explicitly acknowledge reception of the\n   * message. This frees local and router resources associated with an unacknowledged message.\n   *\n   * The API does not send acknowledgments immediately. It stores the state for\n   * acknowledged messages internally and acknowledges messages, in bulk, when a\n   * threshold or timer is reached.\n   *\n   * @param {solace.MessageOutcome} messageSettlementOutcome type of the settlement outcome, not expected to be {@code null}\n   * @throws {@link solace.OperationError}\n   *  * if broker does not support the specified outcome option;\n   *  * if the flow was created without specifying required {@link MessageOutcome}\n   *    Options within the consumer properties;\n   *  * if the associated {@link solace.Session} is configured\n   *    to use SUPPORTED_MESSAGE_ACK_AUTO (the default behaviour),\n   *    the use of {@link MessageOutcome#REJECTED}\n   *    and {@link MessageOutcome#FAILED} are not supported;\n   *  * if the associated {@link solace.Session} is not connected;\n   *    subcode: {@link solace.ErrorSubcode.SESSION_NOT_CONNECTED}\n   *  * if the associated {@link solace.MessageConsumer} is not connected\n   *    subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}\n   *\n   *    @see {@link solace.MessageOutcome}for detailed explanation of available options\n   */\n  settle(messageSettlementOutcome) {\n    // implementation here\n    // validation checks here\n    if (this._acked) {\n      throw new OperationError('Message can only be settled once',\n        ErrorSubcode.MESSAGE_ALREADY_ACKNOWLEDGED);\n    }\n    if (this._deliveryMode === MessageDeliveryModeType.DIRECT) {\n      throw new OperationError('Cannot settle a DIRECT message',\n        ErrorSubcode.MESSAGE_DELIVERY_MODE_MISMATCH);\n    }\n    if (!this._consumer) {\n      throw new OperationError('Cannot settle a locally-created message',\n        ErrorSubcode.MESSAGE_DELIVERY_MODE_MISMATCH);\n    }\n    if (!this._consumer._sessionInterface.canAck) {\n      throw new OperationError('Cannot settle using associated session',\n        ErrorSubcode.SESSION_NOT_CONNECTED);\n    }\n    if (!this._consumer.canAck) {\n      throw new OperationError('Cannot settle using associated Message Consumer',\n        ErrorSubcode.INVALID_OPERATION);\n    }\n    if (this._consumer.getProperties().browser) {\n      throw new OperationError('Messages delivered to a Queue Browser can only be deleted by calling QueueBrowser.removeMessageFromQueue()',\n        ErrorSubcode.INVALID_OPERATION);\n    }\n    // check to ensure that you cannot manually settle a message with acknowledgeMode = AUTO\n    if (this._consumer._fsm.hasAutoAckSupport) {\n      LOG_WARN(`Consumer configured to auto-acknowledge messages, so message ${\n        this._guaranteedMsgId} cannot be application settled`);\n      return;\n    }\n\n    // validate the settlement outcome and send correct Enum value\n    const settlementOutcome = messageSettlementOutcome;\n    if (MessageOutcome.values.indexOf(settlementOutcome) === -1) {\n      throw new OperationError(`Settlement outcome for message must be valid`,\n        ErrorSubcode.INVALID_OPERATION);\n    }\n\n    // check that the broker consumer session has support for the outcome and \n    const doesConsumerSupportOutcome = this._consumer.getProperties().requiredSettlementOutcomes.some(v => v === settlementOutcome);\n    // that the session was created with support for the outcome\n    if (settlementOutcome != MessageOutcome.ACCEPTED && !doesConsumerSupportOutcome) {\n      throw new OperationError(`solace.MessageOutcome.${MessageOutcome.nameOf(settlementOutcome)} not supported for this Message Consumer`,\n        ErrorSubcode.INVALID_OPERATION);\n    }\n\n    // actual settlement logic\n    this._consumer.applicationSettle(this._guaranteedMsgId, settlementOutcome);\n    this._acked = true; // also set as ACKed/settled\n  }\n\n  /**\n   * Returns whether settle(solace.MessageOutcome) has been called on this message.\n   *\n   * @readonly\n   * @type {Boolean}\n   */\n  get isSettled() {\n    return this._acked || false;\n  }\n\n  /**\n   * Internal validation checks before we attempt to acknowledge this message.\n   * @private\n   */\n  _validateBeforeAcknowledge() {\n    if (this._acked) {\n      throw new OperationError('Message can only be acknowledged once',\n        ErrorSubcode.MESSAGE_ALREADY_ACKNOWLEDGED);\n    }\n    if (this._deliveryMode === MessageDeliveryModeType.DIRECT) {\n      throw new OperationError('Cannot acknowledge a DIRECT message',\n        ErrorSubcode.MESSAGE_DELIVERY_MODE_MISMATCH);\n    }\n    if (!this._consumer) {\n      throw new OperationError('Cannot acknowledge a locally-created message',\n        ErrorSubcode.MESSAGE_DELIVERY_MODE_MISMATCH);\n    }\n    if (!this._consumer._sessionInterface.canAck) {\n      throw new OperationError('Cannot acknowledge using associated session',\n        ErrorSubcode.SESSION_NOT_CONNECTED);\n    }\n    if (!this._consumer.canAck) {\n      throw new OperationError('Cannot acknowledge using associated Message Consumer',\n        ErrorSubcode.INVALID_OPERATION);\n    }\n    if (this._consumer.getProperties().browser) {\n      throw new OperationError('Messages delivered to a Queue Browser can only be deleted by calling QueueBrowser.removeMessageFromQueue()',\n        ErrorSubcode.INVALID_OPERATION);\n    }\n  }\n\n  /**\n   * Acknowledges this message.\n   * This is the same as calling {@link solace.Message#settle(solace.MessageOutcome.ACCEPTED)}.\n   * Internally uses Message.settle() with the ACCEPTED MessageOutcome.\n   *\n   * If the {@link solace.MessageConsumer} on which this message was received is configured to use\n   * {@link solace.MessageConsumerAckMode.CLIENT}, then when a message is received by an\n   * application, the application must call this method to explicitly acknowledge reception of the\n   * message. This frees local and router resources associated with an unacknowledged message.\n   *\n   * The API does not send acknowledgments immediately. It stores the state for\n   * acknowledged messages internally and acknowledges messages, in bulk, when a\n   * threshold or timer is reached.\n   *\n   * @throws {@link solace.OperationError}\n   *  * if this message was not received via Guaranteed Message;\n   *    subcode: {@link solace.ErrorSubcode.MESSAGE_DELIVERY_MODE_MISMATCH}\n   *  * if the associated {@link solace.Session} is not connected;\n   *    subcode: {@link solace.ErrorSubcode.SESSION_NOT_CONNECTED}\n   *  * if the associated {@link solace.MessageConsumer} is not connectedl\n   *    subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  acknowledge() {\n    // call all the validations before we acknowledge message\n    this._validateBeforeAcknowledge();\n\n    // check to ensure that you cannot manually settle a message with acknowledgeMode = AUTO\n    if (this._consumer._fsm.hasAutoAckSupport) {\n      LOG_WARN(`Consumer configured to auto-acknowledge messages, so message ${\n        this._guaranteedMsgId} cannot be application acknowledge`);\n      return;\n    }\n\n    // use settlement implementation with ACCEPTED outcome\n    this._consumer.applicationAck(this._guaranteedMsgId, false);\n    this._acked = true; // also set message as acked/settled\n  }\n\n  /**\n   * Used by the message-dispatcher to auto-acknowledge this message.\n   * @internal\n   */\n  _autoAcknowledge() {\n    // call all the validations before we acknowledge message\n    this._validateBeforeAcknowledge();\n\n    // use settlement implementation with ACCEPTED outcome\n    this._consumer.applicationAck(this._guaranteedMsgId, true);\n    this._acked = true; // also set message as acked/settled\n  }\n\n  /**\n   * Returns whether acknowledge() has been called on this message.\n   *\n   * @readonly\n   * @type {Boolean}\n   */\n  get isAcknowledged() {\n    return this._acked || false;\n  }\n\n  /**\n   * Test if the Acknowledge Immediately message property is set or not.\n   * When the Acknowledge Immediately property is set to true on an outgoing\n   * Guaranteed Message,\n   * it indicates that the Solace Message Router should Acknowledge this message\n   * immediately upon receipt.\n   *\n   * This property, when set by a publisher, may or may not be removed by the\n   * Solace Message Router prior to delivery to a consumer, so message consumers\n   * must not expect the property value indicates how the message was\n   * originally published\n   * @returns {Boolean} Whether this message was set to acknowledge immediately.\n   */\n  isAcknowledgeImmediately() {\n    return this._ackImmediately || false;\n  }\n  /**\n   * Set the optional Acknoweledge Immediately message property.\n   * When the Acknowledge Immediately property is set to true on an outgoing Guaranteed Message,\n   * it indicates that the Solace Message Router should acknoweledge this message\n   * immediately upon receipt. By default the property is set to false on newly created messages.\n   *\n   * This property, when set by a publisher, may or may not be removed by the appliance\n   * prior to delivery to a consumer, so message consumers must not expect the property value\n   * indicates how the message was originally published. Therefore if a received message\n   * is forwarded by the application, the Acknowledge Immediately property should be\n   * explicitly set to the desired value (true or false).\n   *\n   * Setting this property on an outgoing direct message has no effect.\n   *\n   * @param {Boolean} value Whether to acknowledge this message immediately.\n   */\n  setAcknowledgeImmediately(value) {\n    this._setAcknowledgeImmediately(isBoolean('acknowledgeImmediately', value));\n  }\n  _setAcknowledgeImmediately(value) {\n    this._ackImmediately = value;\n  }\n\n  /**\n   * Gets the cache status of this message.\n   *\n   * @returns {?solace.MessageCacheStatus} The cache status of this message. The status\n   * will be MessageCacheStatus.LIVE unless the message was returned in a\n   * reply to a cache request.\n   */\n  getCacheStatus() {\n    return this._cacheStatus;\n  }\n\n  /**\n   * @param {solace.MessageCacheStatus} cacheStatus The new cache status for this message\n   * @private\n   */\n  _setCacheStatus(cacheStatus) {\n    this._cacheStatus = cacheStatus;\n  }\n\n  /**\n   * Returns whether the message's reply field is set, indicating\n   * that this message is a reply to a previous request. See {@link solace.Session#sendRequest}.\n   * @returns {Boolean} Indicates the state of the reply field.\n   */\n  isReplyMessage() {\n    return this._replyMessage || false;\n  }\n\n  /**\n   * Indicates whether the message has been marked as redelivered by the Solace Message Router.\n   * @returns {Boolean} Indicates whether the redelivered flag is set.\n   */\n  isRedelivered() {\n    return this._redelivered || false;\n  }\n  /**\n   * @param {Boolean} value The redelivered flag\n   * @private\n   */\n  setRedelivered(value) {\n    this._redelivered = value;\n  }\n\n  /**\n   * Sets the <i>reply</i> field of the message.\n   * @param {Boolean} value Sets whether to flag the message as a reply.\n   */\n  setAsReplyMessage(value) {\n    this._replyMessage = isBoolean('asReplyMessage', value);\n  }\n\n  /**\n   * Gets the receive timestamp (in milliseconds, from midnight, January 1, 1970 UTC).\n   * @returns {?Number} The receive timestamp, if set.\n   */\n  getReceiverTimestamp() {\n    return this._receiverTimestamp;\n  }\n\n  /**\n   * Gets the replyTo destination\n   * @returns {?solace.Destination} The value of the replyTo destination, if set.\n   */\n  getReplyTo() {\n    return this._replyTo;\n  }\n\n  /**\n   * Sets the replyTo destination\n   * @param {solace.Destination} value The replyTo destination.\n   */\n  setReplyTo(value) {\n    this._replyTo = isInstanceOfOrNothing('replyTo', value, Destination);\n  }\n\n  /**\n   * Returns the Sender's ID.\n   * @returns {?String} The Sender's ID, if set.\n   */\n  getSenderId() {\n    return this._senderId;\n  }\n\n  /**\n   * Sets the Sender ID for the message\n   * @param {String} value The Sender ID for the message.\n   */\n  setSenderId(value) {\n    this._senderId = isStringOrNothing('senderId', value);\n  }\n\n  /**\n   * Gets the send timestamp (in milliseconds, from midnight, January 1,\n   * 1970 UTC).\n   * @returns {?Number} The send timestamp, if set.\n   */\n  getSenderTimestamp() {\n    return this._senderTimestamp;\n  }\n\n  /**\n   * Sets the send timestamp (in milliseconds, from midnight, January 1,\n   * 1970 UTC). This field can be generated automatically during message\n   * publishing, but it will not be generated if previously set to a non-null value by this method.\n   * See {@link solace.SessionProperties#generateSendTimestamps}.\n   *\n   * An application that publishes the same {@link solace.Messsage} multiple times and\n   * also wants generted timestamps on each messages, should set the sender timestamp\n   * to undefined after each call to {@link solace.Session#send}.\n   * @param {?Number} value The value to set as the send timestamp.\n   */\n  setSenderTimestamp(value) {\n    this._senderTimestamp = isNumberOrNothing('senderTimestamp', value);\n  }\n\n  /**\n   * Gets the sequence number.\n   * <p>\n   * This is an application-defined field,\n   * see <code>{@link solace.Message#setSequenceNumber}()</code>.\n   * @returns {?Number} The sequence number, if set\n   * @throws {@link solace.SDTUnsupportedValueError} in case the sequence number is out of range.\n   */\n  getSequenceNumber() {\n    if (this._sequenceNumberError) {\n      throw this._sequenceNumberError;\n    }\n    return this._sequenceNumber;\n  }\n\n  /**\n   * Sets the application-defined sequence number. If the sequence number\n   * is not set, or set to undefined, and {@link solace.SessionProperties#generateSequenceNumber}\n   * is true, then a sequence number is automatically generated for each sent message.\n   * @param {?Number} value The sequence number.\n   */\n  setSequenceNumber(value) {\n    if (value instanceof SDTUnsupportedValueError) {\n      this._sequenceNumberError = value;\n    } else {\n      this._sequenceNumber = isNumberOrNothing('sequenceNumber', value);\n      this._sequenceNumberError = undefined;\n      //TODO: this is probably wrong. Shouldn't it be cleared if value === undefined?\n      this._autoSequenceNumber = false;\n    }\n  }\n\n  /**\n   * Gets the Class of Service (CoS) value for the message.\n   * The Class of Service has different semantics for direct and guaranteed messages.\n   *\n   * For messages published with {@link solace.MessageDeliveryModeType.DIRECT}, the\n   * class of service selects the weighted round-robin delivery queue when the\n   * message is forwarded to a consumer.  {@link solace.MessageUserCosType.COS1} are the\n   * lowest priority messages and will use the Solace Message Router D-1 delivery queues.\n   *\n   * For messages published as guaranteed messages\n   * ({@link solace.MessageDeliveryModeType.PERSISTENT} or\n   * {@link solace.MessageDeliveryModeType.NON_PERSISTENT}), messages published\n   * with {@link solace.MessageUserCosType.COS1} can be rejected by the Solace Message Router if\n   * that message would cause any queue or topic-endpoint to exceed its configured\n   * low-priority-max-msg-count.\n   *\n   * @returns {solace.MessageUserCosType} The COS value.\n   */\n  getUserCos() {\n    return this._userCos;\n  }\n\n  /**\n   * Gets the Message Priority Parameter (JMS Priority) value for the message.\n   * Numerical values between 0 and 255 are valid return values,\n   * undefined means the parameter is not present.\n   *\n   * If destination queues and topic endpoints for this message\n   * are configured to respect message priority,\n   * the values 0 through 9 can be used to affect the priority\n   * of delivery to consumers of those queues or topic endpoints.\n   * For the purposes of prioritized message delivery,\n   * values larger than 9 are treated the same as 9.\n   *\n   * @returns {Number} The Message Priority Parameter value.\n   */\n  getPriority() {\n    return this._priority;\n  }\n\n  /**\n   * Sets the Class of Service (CoS) value for the message.\n   *\n   * The Class of Service has different semantics for direct and guaranteed messages.\n   *\n   * For messages published with {@link solace.MessageDeliveryModeType.DIRECT}, the\n   * class of service selects the weighted round-robin delivery queue when the\n   * message is forwarded to a consumer.  {@link solace.MessageUserCosType#COS1} are the\n   * lowest priority messages and will use the Solace Message Router D-1 delivery queues.\n   *\n   * For messages published as guaranteed messages\n   * ({@link solace.MessageDeliveryModeType.PERSISTENT} or\n   * {@link solace.MessageDeliveryModeType.NON_PERSISTENT}), messages published\n   * with {@link solace.MessageUserCosType#COS1} can be rejected by the Solace Message Router if\n   * that message would cause any queue or topic-endpoint to exceed its configured\n   * low-priority-max-msg-count.\n   *\n   * @param {solace.MessageUserCosType} value The COS value.\n   * @default {solace.MessageUserCosType#COS1}\n   */\n  setUserCos(value) {\n    this._setUserCos(isEnumMember('userCos', value, MessageUserCosType));\n  }\n  _setUserCos(value) {\n    this._userCos = value;\n  }\n\n  /**\n   * Sets the Message Priority Parameter (JMS Priority) value for the message.\n   * Numerical values between 0 and 255 are accepted,\n   * use undefined to unset.\n   *\n   * If destination queues and topic endpoints for this message\n   * are configured to respect message priority,\n   * the values 0 through 9 can be used to affect the priority\n   * of delivery to consumers of those queues or topic endpoints.\n   * For the purposes of prioritized message delivery, values larger than 9\n   * are treated the same as 9.\n   *\n   * @param {?Number} value The priority value.\n   */\n  setPriority(value) {\n    if (value === undefined || value === null) {\n      this._setPriority(undefined);\n      return;\n    }\n    if (typeof value !== 'number' || isNaN(value)) {\n      throw new OperationError('Invalid type for message priority',\n        ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    if (value < 0 || value > 255) {\n      throw new OperationError('Invalid priority value',\n        ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    this._setPriority(value);\n  }\n\n  _setPriority(value) {\n    this._priority = value;\n  }\n\n  /**\n   * Gets the user data part of the message.\n   * @returns {String} The user data part of the message, if set.\n   */\n  getUserData() {\n    return this._userData;\n  }\n\n  /**\n   * Sets the user data part of the message.\n   * @param {String} value The user data part of the message.\n   */\n  setUserData(value) {\n    this._setUserData(isStringOrNothing('userData', value));\n  }\n  _setUserData(value) {\n    this._userData = value;\n  }\n\n  /**\n   * Gets the XML content part of the message.\n   * Notice that the content is encoded as UTF-8 characters,\n   * it needs to be decoded as JavaScript surrogate pair: decodeURIComponent(escape(value))\n   * @returns {?String} The XML content part of the message, if set.\n   */\n  getXmlContent() {\n    return this._xmlContent;\n  }\n\n  /**\n   * Gets the XML content part of the message decoded from UTF-8 encoding of the characters.\n   * @returns {?String} The XML content part of the message. Returns <code>null</code> if not\n   * present.\n   */\n  getXmlContentDecoded() {\n    return this._xmlContent ? utf8ToUcs2(this._xmlContent) : this._xmlContent;\n  }\n\n  /**\n   * Sets the XML content part of the message.\n   * The content is encoded by replacing each instance of certain characters\n   * by one, two, three, or four escape sequences representing the\n   * UTF-8 encoding of the character.\n   * @param {String} value The XML content part of the message.\n   */\n  setXmlContent(value) {\n    const setValue = isStringOrNothing('xmlContent', value);\n    this._xmlContent = setValue ? unescape(encodeURIComponent(setValue)) : setValue;\n  }\n\n  /**\n   * Internal set for the XML content part of the message.\n   * @param {String} value The XML content part of the message.\n   * @private\n   */\n  _setXmlContentInternal(value) {\n    this._xmlContent = isStringOrNothing('xmlContentInternal', value);\n  }\n\n  /**\n   * Sets the message's XML metadata section.\n   * @param {String} value The XML metadata.\n   */\n  setXmlMetadata(value) {\n    this._setXmlMetadata(isStringOrNothing('xmlMetadata', value));\n  }\n  _setXmlMetadata(value) {\n    this._xmlMetadata = value;\n  }\n\n  /**\n   * Gets the message's XML metadata section.\n   * @returns {?String} The XML metadata, if set.\n   */\n  getXmlMetadata() {\n    return this._xmlMetadata;\n  }\n\n  /**\n   * @private\n   */\n  get binaryMetadataChunk() {\n    return this._binaryMetaChunk || null;\n  }\n  /**\n   * @param {?String} meta The meta chunk to set\n   * @private\n   */\n  set binaryMetadataChunk(meta) {\n    this._binaryMetaChunk = meta;\n  }\n\n  /**\n   * @private\n   */\n  get smfHeader() {\n    return this._smfHeader;\n  }\n  /**\n   * @param {SMFHeader} val The SMF header to set\n   * @private\n   */\n  set smfHeader(val) {\n    this._smfHeader = val;\n  }\n\n  /**\n   * @private\n   */\n  get hasAutoSequenceNumber() {\n    return this._autoSequenceNumber || false;\n  }\n  /**\n   * @param {Boolean} value Value to set\n   * @private\n   */\n  set hasAutoSequenceNumber(value) {\n    this._autoSequenceNumber = value;\n  }\n\n  /**\n   * @private\n   */\n  get hasAutoSenderTimestamp() {\n    return this._autoSenderTimestamp || false;\n  }\n  /**\n   * @param {Number} value Value to set\n   * @private\n   */\n  set hasAutoSenderTimestamp(value) {\n    this._autoSenderTimestamp = value;\n  }\n\n  /**\n   * Gets the user property map carried in the message binary metadata.\n   *\n   * @returns {?solace.SDTMapContainer} The user properties map, if set.\n   */\n  getUserPropertyMap() {\n    return this._userPropertyMap;\n  }\n\n  /**\n   * Allows users to specify their own user properties to be carried\n   * in the message binary metadata separate from the payload.\n   * @param {?SDTMapContainer} value The user property map.\n   */\n  setUserPropertyMap(value) {\n    this._userPropertyMap = isInstanceOfOrNothing('userPropertyMap', value, SDTMapContainer);\n  }\n\n  /**\n   * Makes this message a strutured data message by assigning it a\n   * structured data type (SDT) container payload (such as a\n   * {@link solace.SDTMapContainer}, {@link solace.SDTStreamContainer}\n   * or a {@link solace.SDTFieldType.String}, which is transported in the binary attachment field.\n   *\n   * Assigning a SDT container updates the message's Type property to\n   * the appropriate value.\n   *\n   * The container argument must be a {@link solace.SDTField} with a type\n   * of {@link solace.SDTFieldType.MAP}, {@link solace.SDTFieldType.STREAM},\n   * or {@link solace.SDTFieldType.STRING}.\n   *\n   * @param {?solace.SDTField} container The SDTField container to send in this message.\n   */\n  setSdtContainer(container) {\n    const structuredContainer = isInstanceOfOrNothing('sdtContainer', container, SDTField);\n    if (structuredContainer === null || structuredContainer === undefined) {\n      // clear\n      this._structuredContainer = null;\n      this.setBinaryAttachment(null);\n      return;\n    }\n\n    this._setBinaryAttachment(null);\n    const sdtType = structuredContainer.getType();\n    switch (sdtType) {\n      case SDTFieldType.MAP:\n        this._messageType = MessageType.MAP;\n        break;\n      case SDTFieldType.STREAM:\n        this._messageType = MessageType.STREAM;\n        break;\n      case SDTFieldType.STRING:\n        this._messageType = MessageType.TEXT;\n        break;\n      default:\n        throw new OperationError('Invalid parameter: expected SDTField Type of ' +\n          'MAP, STREAM, or STRING.',\n          ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    this._structuredContainer = structuredContainer;\n  }\n\n  /**\n   * Gets the message's structured data container, if this is a structured data message.\n   *\n   * @returns {SDTField|null} A field with a payload of {String}, {@link SDTMapContainer},\n   * or {@link SDTStreamContainer} if one was set in the message; otherwise, null.\n   */\n  getSdtContainer() {\n    const msgType = this.getType();\n    const binaryAttachment = this._binaryAttachment;\n    const binaryAttachmentLength = binaryAttachment ? binaryAttachment.length : 0;\n\n    if (msgType === MessageType.BINARY) {\n      LOG_DEBUG(`getSdtContainer returned null, reason: msgType=${msgType}`);\n      return null;\n    }\n\n    // MAP, STREAM or TEXT\n    // Use cached structured container if available\n    if (typeof this._structuredContainer !== 'undefined') {\n      return this._structuredContainer;\n    }\n\n    if (binaryAttachmentLength === 0) {\n      LOG_DEBUG(`getSdtContainer returned null, reason: len=${binaryAttachmentLength}`);\n      this._structuredContainer = null;\n    } else {\n      // Last resort: Decode binary attachment.\n      // Cache structured container for later access\n      this._structuredContainer = SDTCodec.parseSingleElement(binaryAttachment, 0);\n    }\n\n\n    return this._structuredContainer;\n  }\n\n  /*\n   * returns a compressed binary attachment\n   * Used internally on the encode path.\n   * @returns {Uint8Array} A compressed array based on the binaryAttachment\n   * @private\n   */\n  _getCompressedBinaryAttachment() {\n    return this._compressedBinaryAttachment;\n  }\n  \n  /*\n   * Sets the compressed attachment for the messsage \n   * based on the level that was set in payloadCompressionLevel\n   * Used internally on the encode path.\n   * @param {Uint8Array} value sets the compressed attachment\n   * @private \n   */\n  _setCompressedBinaryAttachment(value) {\n    this._compressedBinaryAttachment = value;\n  }\n\n  /*\n   * Used internally on the decode path, it's the flag from the preamble.\n   * @returns {Boolean} value if the binary attachment was compressed\n   * @private \n   */\n  _getPayloadCompressed() {\n    return this._payloadCompressed; \n  }\n\n  /*\n   * Used internally on the decode path, it's the flag from the preamble.\n   * @param {Boolean} \n   * @private \n  */\n  _setPayloadCompressed(value) {\n    this._payloadCompressed = value;\n  }\n\n  // Message Tracing Section\n\n  /**\n   * Gets the sequence number.\n   * <p>\n   * This is an application-defined field,\n   * see <code>{@link solace.Message#setSequenceNumber}()</code>.\n   * @returns {?Number} The sequence number, if set\n   * @throws {@link solace.SDTUnsupportedValueError} in case the sequence number is out of range.\n   */\n  getSequenceNumber() {\n    if (this._sequenceNumberError) {\n      throw this._sequenceNumberError;\n    }\n    return this._sequenceNumber;\n  }\n\n  /**\n   * Retrieves a {@link solace.TraceContextSetter} object that is used to modify \n   * an appropriate TraceContext associated with a message transparently.\n   * When no context is stored in a message it will create and store a creation \n   * context with a message that can be used as an initial\n   * transport context at the same time. \n   * It will never override an existing message creation context. \n   * When creation context is present or only transport context is present, it will\n   * override an existing transport context information with a newly provided one.\n   * \n   * @returns {solace.TraceContextSetter} Transport context setter object associated with this message; never expected to be null\n   */\n  getTraceContextSetter() {\n    // return the parent method\n    return super.getTraceContextSetter();\n  }\n\n  /**\n   * Retrieves a {@link solace.TraceContext} object used for carrying over of the distributed tracing\n   * message creation context information usable by intermediary instrumentation across\n   * service boundaries. It allows correlating the producer with the consumers of a message,\n   * regardless of intermediary instrumentation. It must not be altered by intermediaries.\n   *\n   * @returns {solace.TraceContext} Message creation context object associated with this message;\n   */\n  getCreationContext() {\n    // call the parent method. Returns a readonly copy\n    return super.getCreationContext();\n  }\n \n  /**\n   * Retrieves a {@link solace.TraceContext} object used for carrying over \n   * of the distributed tracing transport context information usable or modifiable \n   * by intermediary instrumentation across service boundaries. \n   * It allows correlating the producer and the consumer with an intermediary.\n   * It also allows correlating multiple intermediaries among each other.\n   *\n   * @returns {solace.TraceContext} Transport context object associated with this message;\n   */\n  getTransportContext() {\n    // call the parent method. Returns a readonly copy\n    return super.getTransportContext();\n  }\n\n  /**\n   * Set the transport context.\n   * Called when the message is received from broker\n   * \n   * @param {solace.TraceContextSetter} contextSetter \n   */\n  setTransportContext(contextSetter) {\n    // call the parent method.\n    super._setTransportContext(contextSetter);\n  }\n\n  /**\n   * Retrieves a {@link solace.Baggage} carrier object used for carrying over of the distributed tracing\n   * message baggage information across service boundaries.  It must not be altered by\n   * intermediaries.\n   *\n   * @return {solace.Baggage} baggage carrier object associated with this message,\n   */\n  getBaggage() {\n    // returns the parent method baggage instance\n    // used for setting and retriving the baggage value \n    return super.getBaggage();\n  }\n\n  /**\n   * Produces a human-readable dump of the message's properties and\n   * contents. Applications must not parse the output, as its format is\n   * not a defined part of the API and subject to change.\n   *\n   * <p>\n   * Output can be controlled by the <code>flags</code> parameter. The values are:\n   * <ul>\n   * <li>{@link MessageDumpFlag.MSGDUMP_BRIEF} Display only the length of the\n   *                          binary attachment, xml attachment, and user property map\n   * <li>{@link MessageDumpFlag.MSGDUMP_FULL} Display the entire message.\n   * </ul>\n   * </p>\n   *\n   * @param {Number} [flags]  Optional flags controlling the output, such as whether\n   *                          to include verbose (binary dump) information\n   * @returns {String} A string representation of the message.\n   */\n  dump(flags = MessageDumpFlag.MSGDUMP_FULL) {\n    const validFlags = isEnumMember('flags', flags, MessageDumpFlag);\n    return MessageDumpUtil.dump(this, validFlags);\n  }\n\n  /**\n   * Clones the message\n   * @returns {Message} A clone of this message\n   * @private\n   */\n  clone() {\n    return clone(this, MESSAGE_CLONE_OPTIONS);\n  }\n\n  /**\n   * Releases all memory associated with this message. All values are reinitialized\n   * to defaults. The message is no longer associated with any session or consumer.\n   */\n  reset() {\n    clearMessage(this);\n    initMessage(this);\n  }\n\n  /**\n   * Clears all extended var-len message properties on this message.\n   * The message no longer has any extended variable length\n   * properties set.\n   * \n   * @internal\n   */\n  clearExtendedVarLenParams() {\n    clearExtendedVarLenParameters(this);\n  }\n}\n\n/**\n * A standard property key that clients should use if they want to\n * group messages into different queue partitions.\n * Expected value is UTF-8 encoded up to 255 bytes long string.\n */\nMessage.SOLCLIENT_USER_PROP_QUEUE_PARTITION_KEY = 'JMSXGroupID';\n\nmodule.exports.Message = Message;\n","const fs = require('fs');\nconst tls = require('tls');\nconst SolclientSessionLib = require('solclient-session');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { LOG_TRACE, LOG_DEBUG, LOG_WARN } = require('solclient-log');\nconst { parseURL } = require('solclient-util');\n\n/**\n * Node TLS socket option generation factored out from WS transport, shared with Tcp transport.\n * Internal mixin class, not intended to be publicly visible.\n * @private\n */\n\nclass NodeTLSOptsMixin {\n  /**\n   * Overwrite Node.js default hostname check callback by verifying cnNameList against subject CN\n   * in the server certificate. If cnNameList is a empty string, it means all CNs are acceptable.\n   * @param {String} host The hostname for checking\n   * @param {String} cert The server certificate for checking\n   * @name solace.WebTransportSession#checkCertificateCNs\n   * @returns {?Error} Any error generated by the certificate check\n   * @private\n   */\n  checkCertificateCNs(host, cert) {\n    if (this._props.sslTrustedCommonNameList && this._props.sslTrustedCommonNameList.length > 0) {\n      // no Closure Compiler externs for certificates\n      LOG_DEBUG('server cert:', cert);\n      const subject = cert['subject']; // eslint-disable-line dot-notation\n      let valid = false;\n      if (subject) {\n        const cn = subject['CN']; // eslint-disable-line dot-notation\n        valid = this._props.sslTrustedCommonNameList.some(name =>\n          name.toLowerCase() === cn.toLowerCase()\n        );\n      }\n      if (!valid) {\n        const error = new Error('Server certificate not trusted - no common name match');\n        error.reason = 'Server certificate not trusted - no common name match';\n        error.host = host;\n        error.cert = cert;\n        return error;\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Create the TLS options object used in wss:// and tcps:// connection establishment.\n   * The same options are needed by the ws and tls socket constructors.\n   * @returns {Object} WebSocket/TLSSocket options object\n   * @private\n   */\n  createTLSOptions() {\n    /* eslint-disable dot-notation */\n    const props = this._props;\n    const options = {};\n    const useClientCert = (\n      props.authenticationScheme === SolclientSessionLib.AuthenticationScheme.CLIENT_CERTIFICATE\n    );\n\n    // available tls options:\n    //  pfx, key, passphrase, cert, ca, ciphers, rejectUnauthorized,\n    //  secureProtocol, secureOptions, checkServerIdentity\n\n    const constMap = SolclientSessionLib.SessionProperties.SslProtocolExcludeConstantMap;\n    options['secureOptions'] = constMap['sslv2'] | constMap['sslv3'];\n    (props.sslExcludedProtocols || []).forEach((protocol) => {\n      options['secureOptions'] |= constMap[protocol.toLowerCase()];\n    });\n\n    // TLS min/maxVersion are case sensitive.\n    const supported = SolclientSessionLib.SessionProperties.SUPPORTED_SSL_PROTOCOLS;\n    const supportedLC = supported.map(p => p.toLowerCase());\n    if (props.tlsMinProtocol) {\n      const minIndex = supportedLC.indexOf(props.tlsMinProtocol.toLowerCase())\n      options['minVersion'] = supported[minIndex];\n    } else {\n      // Yes, you can lock yourself out by setting max to 1.1 and leaving min at default. \n      // It's also the nodeJS default as of 2025, but we want to cement it in for ourselves for now.\n      options['minVersion'] = 'TLSv1.2'\n    }\n\n    if (props.tlsMaxProtocol) {\n      const maxIndex = supportedLC.indexOf(props.tlsMaxProtocol.toLowerCase())\n      options['maxVersion'] = supported[maxIndex];\n    }\n\n    if (props.sslCipherSuites) {\n      // This is a bit weird but actually makes sense:\n      // nodeJS has one cipher list for pre- and post-TLSv1.3.\n      // The TLSv1.3 ones, which we don't want to make changeable via session props, start with \"TLS_\" .\n      // nodeJS also has platform level defaults and configs for ciphers, which we do want to respect for TLSv1.3 .\n      // So if the user suppliess a pre-TLSv1.3 cipher list, we add the TLSv1.3 ones from DEFAULT_CIPHERS to it.\n\n      const default_ciphers = tls.DEFAULT_CIPHERS.split(':').map(c => c.trim());\n      const default_tls13_ciphers = default_ciphers.filter(c => c.startsWith(\"TLS_\"))\n\n      const ciphers = props.sslCipherSuites.split(',');\n      const trimmed = ciphers.map(cipher => cipher.trim());\n      options['ciphers'] = default_tls13_ciphers.concat(trimmed).join(':');\n    }\n\n    options['rejectUnauthorized'] = props.sslValidateCertificate;\n\n    // only set checkServerIdentity callback if rejectUnauthorized\n    if (options['rejectUnauthorized'] && Array.isArray(props.sslTrustedCommonNameList)) {\n      options['checkServerIdentity'] = this.checkCertificateCNs.bind(this);\n    }\n\n    // only set trust stores and and checkServerIdentity callback\n    // if rejectUnauthorized is true or authClientCert\n    if ((options['rejectUnauthorized'] || useClientCert) &&\n      props.sslTrustStores && props.sslTrustStores.length) {\n      const tsContents = [];\n      props.sslTrustStores.forEach((tsFile) => {\n        try {\n          tsContents.push(fs.readFileSync(tsFile));\n        } catch (e) {\n          LOG_WARN(`Failed to load trust store ${tsFile}`, e.message);\n          LOG_TRACE('Error details:', e.stack || e);\n          throw new OperationError(`Failed to load trust store ${tsFile}`,\n            ErrorSubcode.FAILED_LOADING_TRUSTSTORE,\n            e);\n        }\n      });\n      options['ca'] = tsContents;\n    }\n\n\n    if (useClientCert) {\n      if (props.sslPfx) {\n        try {\n          options['pfx'] = fs.readFileSync(props.sslPfx);\n          options['passphrase'] = props.sslPfxPassword;\n        } catch (e) {\n          LOG_WARN(`Failed to load pfx file ${props.sslPfx}`, e.message);\n          LOG_TRACE('Error details:', e.stack || e);\n          throw new OperationError(`Failed to load pfx ${props.sslPfx}`,\n            ErrorSubcode.FAILED_LOADING_CERTIFICATE_AND_KEY, e);\n        }\n      }\n      if (props.sslPrivateKey) {\n        try {\n          options['key'] = fs.readFileSync(props.sslPrivateKey);\n          options['passphrase'] = props.sslPrivateKeyPassword;\n        } catch (e) {\n          LOG_WARN(`Failed to load private key ${props.sslPrivateKey}`, e.message);\n          LOG_TRACE('Error details:', e.stack || e);\n          throw new OperationError(`Failed to load private key ${props.sslPrivateKey}`,\n            ErrorSubcode.FAILED_LOADING_CERTIFICATE_AND_KEY, e);\n        }\n      }\n      if (props.sslCertificate) {\n        try {\n          options['cert'] = fs.readFileSync(props.sslCertificate);\n        } catch (e) {\n          LOG_WARN(`Failed to load certificate file ${props.sslCertificate}`, e.message);\n          LOG_TRACE('Error details:', e.stack || e);\n          throw new OperationError(`Failed to load certificate ${props.sslCertificate}`,\n            ErrorSubcode.FAILED_LOADING_CERTIFICATE_AND_KEY, e);\n        }\n      }\n    }\n    //SNI\n    const hostname = parseURL(this._url).hostname;\n    options['servername'] = hostname;\n    return options;\n    /* eslint-enable dot-notation */\n  }\n\n}\n\nmodule.exports.NodeTLSOptsMixin = NodeTLSOptsMixin;\n","const ParseSingleElementLib = require('./parse-single-element');\nconst { LOG_ERROR } = require('solclient-log');\nconst { ParseFieldHeader } = require('./parse-field-header');\nconst { SDTDataTypes } = require('../sdt-data-types');\nconst { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\nconst { SDTMapContainer } = require('../sdt-map-container');\n\nconst ParseMap = {};\nParseMap.parseMapAt = function parseMapAt(dataBuf, offset, datalen) {\n  const mapObj = new SDTMapContainer();\n  let pos = offset;\n  while (pos < offset + datalen) {\n    // === key field ===\n    const keyFieldHeader = ParseFieldHeader.parseFieldHeader(dataBuf, pos);\n    pos += keyFieldHeader[3]; // consumed bytes\n    // pos now points to start of string\n    if (keyFieldHeader[0] !== SDTDataTypes.String) {\n      // Fail!\n      LOG_ERROR(\"Error parsing SDTMAP, expected to find a string field as map key, and didn't\");\n      LOG_ERROR(`Type of key: ${keyFieldHeader[0]}`);\n      return SDTField.create(SDTFieldType.MAP, null);\n    }\n    const keyString = dataBuf.toString('latin1', pos, pos + keyFieldHeader[2] - 1);\n    pos += keyFieldHeader[2];\n\n    // === value field ===\n    // pos now points to start of next value\n    const valueFieldHeader = ParseFieldHeader.parseFieldHeader(dataBuf, pos);\n    const valueField = ParseSingleElementLib.ParseSingleElement.parseSingleElement(dataBuf, pos);\n    pos += valueFieldHeader[1]; // declared field length\n    if (valueField) {\n      mapObj.addField(keyString, valueField);\n    }\n  }\n  return SDTField.create(SDTFieldType.MAP, mapObj);\n};\n\nmodule.exports.ParseMap = ParseMap;\n","const DEFAULT_PROPERTY_OPTIONS = {\n  enumerable: true,\n};\n\nfunction setPropertyValue(target, key, value, options = null) {\n  Object.defineProperty(\n          target,\n          key,\n          Object.assign({ value }, DEFAULT_PROPERTY_OPTIONS, options));\n}\n\n\nfunction lazyProperty(target, key, evalFn) {\n  Object.defineProperty(\n    target,\n    key,\n    Object.assign({\n      configurable: true, // Allow replacing this property with resolved value.\n      get:          () => {\n        // The getter evaluates the function provided.\n        // It replaces itself with the value it resolves.\n        const result = evalFn(target, key);\n        setPropertyValue(target, key, result);\n        return result;\n      },\n      set: (value) => {\n        setPropertyValue(target, key, value);\n      },\n    }, DEFAULT_PROPERTY_OPTIONS));\n  return target;\n}\n\nfunction lazyProperties(target, obj) {\n  Object.keys(obj).forEach((k) => {\n    lazyProperty(target, k, obj[k]);\n  });\n  return obj;\n}\n\nfunction lazyValue(evalFn) {\n  return lazyProperty({}, 'value', evalFn);\n}\n\nconst Lazy = {\n  lazyProperties,\n  lazyProperty,\n  lazyValue,\n};\n\nmodule.exports.Lazy = Lazy;\n","const DebugLib = require('solclient-debug');\nconst { SolaceError } = require('solclient-error');\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n *\n * Represents a SDT unsupported value error.  An SDT field was assigned a value that is within\n * the type range for the given SDT type, but is not supported on this platform/runtime.\n * This occurs when a received {@link solace.SDTContainerMap} or {@link solace.SDTContainerStream}\n * contains a field with a value that can not represented in the local architecture.\n * Possible causes include:\n * * receive 64 bit integer that cannot be represented accurately in a javaScript number. JavaScript\n *   numbers are floats and can only hold a 48 bit integer without loss of precission. Any integer\n *   greater than 281474976710655 or less than -281474976710655 will cause this exception.\n * @hideconstructor\n * @extends solace.SolaceError\n * @memberof solace\n */\nclass SDTUnsupportedValueError extends SolaceError {\n  /*\n   * @constructor\n   * @param {String} message The message associated with this error\n   * @param {SDTValueErrorSubcode} subcode The subcode associated with this error\n   * @param {Object} sourceData The original representation of the value\n   */\n  constructor(message, subcode, sourceData) {\n    /**\n     * The name of the error.\n     * @name solace.SDTUnsupportedValueError#name\n     * @type {String}\n     * @readonly\n     * @description 'SDTUnsupportedValue'\n     */\n    super('SDTUnsupportedValue', message);\n    /**\n     * The subcode for the error. see {@link solace.SDTValueErrorSubcode}\n     * @name solace.SDTUnsupportedValueError#subcode\n     * @type {solace.SDTValueErrorSubcode}\n     */\n    this.subcode = subcode;\n    this.sourceData = sourceData || '';\n  }\n\n  inspect() {\n    return super.inspect({\n      subcode:    null,\n      sourceData: v => DebugLib.Debug.formatDumpBytes(v, false, 0),\n    });\n  }\n\n  getSubcode() {\n    return this.subcode;\n  }\n\n  getSourceData() {\n    return this.sourceData;\n  }\n}\n\n\nmodule.exports.SDTUnsupportedValueError = SDTUnsupportedValueError;\n","module.exports = require(\"stream\");","const { Convert } = require('solclient-convert');\nconst { SDTDataTypes } = require('../sdt-data-types');\n\nconst EncodeHeader = {};\nEncodeHeader.encodeHeader = function encodeHeader(tag, valueLen) {\n  // Tag in first 6 bits, then (lenbytes-1) in 2 bits\n  let byte0 = (tag << 2) & 0xFF;\n  let strSdtLen = null;\n\n  if (tag === SDTDataTypes.Map || tag === SDTDataTypes.Stream) {\n    // force 4 bytes\n    strSdtLen = Convert.int32ToStr(valueLen + 5);\n    byte0 |= 3; // 4 length bytes\n  } else if (valueLen + 2 <= 255) {\n    strSdtLen = Convert.int8ToStr(valueLen + 2);\n    byte0 |= 0; // 1 length byte\n  } else if (valueLen + 3 <= 65535) {\n    strSdtLen = Convert.int16ToStr(valueLen + 3);\n    byte0 |= 1; // 2 length bytes\n  } else {\n    strSdtLen = Convert.int32ToStr(valueLen + 5);\n    byte0 |= 3; // 4 length bytes\n  }\n  const ret = Convert.int8ToStr(byte0) + strSdtLen;\n  return ret;\n};\n\nmodule.exports.EncodeHeader = EncodeHeader;\n","module.exports = require(\"dns\");","const { Baggage } = require('./lib/baggage');\nconst { TraceContext } = require('./lib/message-trace-context');\nconst { TraceContextSetter } = require('./lib/message-trace-context-setter');\nconst { MessageTracingSupport } = require('./lib/message-tracing-support');\n\nmodule.exports.Baggage = Baggage;\nmodule.exports.TraceContext = TraceContext;\nmodule.exports.TraceContextSetter = TraceContextSetter;\nmodule.exports.MessageTracingSupport = MessageTracingSupport;\n","/**\n * @classdesc\n *\n * Encapsulates the session's message receive callback function and\n * an optional user-specified object.\n *\n * This class is passed to {@link solace.SolclientFactory.createSession} when creating a session.\n * @deprecated The {@link solace.Session} is an <b>EventEmitter</b>.\n * Use <tt>sessionObject.on({@link solace.SessionEventCode.MESSAGE})</tt> instead.\n *\n * @memberof solace\n */\nclass MessageRxCBInfo {\n\n  /**\n   * Creates an instance of MessageRxCBInfo.\n   *\n   * @param {function(Session, Message, Object)} messageRxCBFunction\n   *          Invoked by the API when a message is received\n   *          over the session. The prototype of this function is the\n   *          following: ({@link solace.Session},\n   *                      {@link solace.Message},\n   *                      {Object})\n   * @param {Object} userObject\n   *          An optional user-specified object passed on every message receive callback.\n   *\n   * @memberof solace\n   */\n  constructor(messageRxCBFunction, userObject) {\n    /**\n     * @type {function(Session, Message, Object)}\n     * @description The prototype of this function is the\n     * following: ({@link solace.Session}, {@link solace.Message}, userObject {Object})\n     */\n    this.messageRxCBFunction = messageRxCBFunction;\n\n    /**\n     * @type {Object}\n     * @description user-specified object\n     */\n    this.userObject = userObject;\n  }\n}\n\nmodule.exports.MessageRxCBInfo = MessageRxCBInfo;\n","const { Bits, Convert } = require('solclient-convert');\nconst { Lazy } = require('solclient-eskit');\nconst { LOG_ERROR } = require('solclient-log');\nconst { SMFTransportSessionMessageType } = require('../smf-transport-session-message-types');\nconst { TransportSMFMessage } = require('../message-objects');\n\nconst {\n  get: bits,\n} = Bits;\nconst {\n  int16ToStr,\n  int32ToStr,\n} = Convert;\nconst { lazyValue } = Lazy;\n\n// ========== TSSMF ==========\nfunction remains(dataBuf, offset) {\n  return dataBuf.length - offset;\n}\n\nfunction parseTsSmfHdrAt(dataBuf, offset, smfheader) {\n  let pos = offset;\n  if (remains(dataBuf, pos) < 10) {\n    LOG_ERROR('TsSmf parse failed: not enough data, expected at least 10B');\n    return false;\n  }\n\n  const transportSMFMessage = new TransportSMFMessage();\n  transportSMFMessage.smfHeader = smfheader;\n  const twobyte = dataBuf.readUInt16BE(pos);\n  pos += 2;\n  transportSMFMessage.uh = bits(twobyte, 15, 1);\n  transportSMFMessage.messageType = bits(twobyte, 8, 7);\n  const tsHdrLen = bits(twobyte, 0, 8);\n  transportSMFMessage.tsHeaderLength = tsHdrLen;\n  transportSMFMessage.sessionId = dataBuf.toString('latin1', pos, pos + 8);\n  pos += 8;\n\n  if (transportSMFMessage.messageType ===\n      SMFTransportSessionMessageType.CREATE_RESP) {\n    // parse extra chunk: routerTag\n    const rtrTagLen = dataBuf.readUInt8(pos);\n    pos++;\n    if (remains(dataBuf, pos) < rtrTagLen) {\n      LOG_ERROR(`TsSmf parse failed: not enough data for RouterTag, expected ${rtrTagLen}B`);\n      return false;\n    }\n    transportSMFMessage.routerTag = dataBuf.toString('latin1', pos, pos + rtrTagLen);\n    pos += rtrTagLen;\n  }\n\n  // FFWD any remaining TsSmf padding?\n  pos = offset + tsHdrLen;\n\n  // Length of encapsulated message payload:\n  // the SMF msg payload length - bytes consumed in TsSmf\n\n  if (smfheader.payloadLength === 0xffffffff) {\n    // special \"streaming\" unknown-length header\n    transportSMFMessage.payloadLength = smfheader.payloadLength;\n  } else {\n    transportSMFMessage.payloadLength = smfheader.payloadLength - tsHdrLen;\n  }\n  return transportSMFMessage; // Header with no payload field\n}\n\n// Generates an SMF header up to, but not including the the total length\n// This is fixed for all client generated transport session messages\nconst tsHeaderPreLength = lazyValue(() => (\n  int32ToStr(0x03140001) +  // SMF version, TransportSession, TTL\n  int32ToStr(12)            // Header length\n));\n\nconst tsDestroyHeaderPreSid = lazyValue(() => (\n  tsHeaderPreLength.value + // Header up to the message length field\n  int32ToStr(22) +          // Total length\n  int16ToStr(0x820a)        // msgType(destroy), length\n));\n\nconst tsCreateHeader = lazyValue(() => (\n  tsHeaderPreLength.value + // Header up to the message length field\n  int32ToStr(22) +          // Total length\n  int16ToStr(0x800a) +      // msgType(create), length\n  int32ToStr(0) +           // Session ID (first half)\n  int32ToStr(0)             // Session ID (second half)\n));\n\nconst tsDataTokenPreSid = lazyValue(() => (\n  int32ToStr(0x03940001) +\n  int32ToStr(12) +\n  int32ToStr(22) +\n  int16ToStr(0x850a)\n));\n\nconst tsDataStreamTokenPreSid = lazyValue(() => (\n  int32ToStr(0x03940001) +\n  int32ToStr(12) +\n  int32ToStr(24) +\n  int16ToStr(0x860c)\n));\n\n// Generate a full Transport Session Create header\nfunction genTsCreateHeader() {\n  return tsCreateHeader.value;\n}\n\n// Generate a full Transport Session Destroy header\nfunction genTsDestroyHeader(sid) {\n  return (\n    tsDestroyHeaderPreSid.value +\n    sid                       // Session ID\n  );\n}\n\n// Generate a data token message\nfunction genTsDataTokenMsg(sid) {\n  return (\n    tsDataTokenPreSid.value +\n    sid\n  );\n}\n\n// Generate a STREAMING data token message\nfunction genTsDataStreamTokenMsg(sid, paddingBytes) {\n  return (\n    tsDataStreamTokenPreSid.value +\n    sid +\n    ((paddingBytes && paddingBytes > 0) ? int16ToStr(paddingBytes) : int16ToStr(0x0000))\n  );\n}\n\nfunction genTsDataMsgHeaderParts(sid) {\n  return [\n    (int32ToStr(0x03940001) + int32ToStr(12)),\n    (int16ToStr(0x840a) + sid),\n  ];\n}\n\nfunction parseTsSmfMsgAt(dataBuf, offset, smfheader) {\n  const transportSMFMessage = parseTsSmfHdrAt(dataBuf, offset, smfheader);\n  if (!transportSMFMessage) {\n    return null;\n  }\n\n    // need to FF to pos\n  const pos = offset + transportSMFMessage.tsHeaderLength;\n\n    // Length of encapsulated message payload:\n    // the SMF msg payload length - bytes consumed in TsSmf\n  if (remains(dataBuf, pos) < transportSMFMessage.payloadLength) {\n    LOG_ERROR(`Couldn't read full encapsulated TsSmf payload, expected ${transportSMFMessage.payloadLength}B`);\n    return null;\n  }\n\n  transportSMFMessage.payload =\n                            dataBuf.slice(pos, pos + transportSMFMessage.payloadLength);\n  return transportSMFMessage;\n}\n\nconst Transport = {\n  genTsCreateHeader,\n  genTsDestroyHeader,\n  genTsDataTokenMsg,\n  genTsDataStreamTokenMsg,\n  genTsDataMsgHeaderParts,\n  parseTsSmfHdrAt,\n  parseTsSmfMsgAt,\n};\n\nmodule.exports.Transport = Transport;\n","const { Enum } = require('solclient-eskit');\n\nconst FlowOperation = {\n  CONNECT:         'FlowOperation_CONNECT',\n  DISCONNECT:      'FlowOperation_DISCONNECT',\n  START:           'FlowOperation_START',\n  STOP:            'FlowOperation_STOP',\n  DISPOSE:         'FlowOperation_DESTROY',\n  GET_STATS:       'FlowOperation_GET_STATS',\n  RESET_STATS:     'FlowOperation_RESET_STATS',\n  GET_PROPERTIES:  'FlowOperation_GET_PROPERTIES',\n  GET_DESTINATION: 'FlowOperation_GET_DESTINATION',\n};\n\nmodule.exports.FlowOperation = Enum.new(FlowOperation);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of peer capabilities.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst CapabilityType = {\n  /**\n   * Peer's software load version. Type: string.\n   */\n  PEER_SOFTWARE_VERSION:        0,\n  /**\n   * Peer's software release date. Type: string.\n   */\n  PEER_SOFTWARE_DATE:           1,\n  /**\n   * Peer's platform. Type: string.\n   */\n  PEER_PLATFORM:                2,\n  /**\n   * Speed (in Mbps) of the port the client connects to. Type: number.\n   */\n  PEER_PORT_SPEED:              3,\n  /**\n   * Type of the port the client has connected to (currently 0: Ethernet). Type: number.\n   */\n  PEER_PORT_TYPE:               4,\n  /**\n   * Maximum size of a Direct message (in bytes), including all optional message headers and data.\n   * Type: number.\n   */\n  MAX_DIRECT_MSG_SIZE:          5,\n  /**\n   * Peer's router name. Type: string.\n   *\n   * This property is useful when sending SEMP requests to a peer's SEMP topic, which may be\n   * constructed as `#P2P/routername/#client/SEMP`.\n   */\n  PEER_ROUTER_NAME:             6,\n  /**\n   * Peer supports message eliding. Type: boolean.\n   */\n  MESSAGE_ELIDING:              7,\n  /**\n   * Peer supports NoLocal option (client may avoid receiving messages published by itself).\n   */\n  NO_LOCAL:                     8,\n  /**\n   * Peer supports Guaranteed Message Consumer connections for receiving guaranteed messages.\n   */\n  GUARANTEED_MESSAGE_CONSUME:   9,\n  /**\n   * Peer supports temporary endpoints.\n   */\n  TEMPORARY_ENDPOINT:           10,\n  /**\n   * Peer supports Guaranteed Message Publisher connections for sedning guaranteed messages.\n   */\n  GUARANTEED_MESSAGE_PUBLISH:   11,\n  /**\n   * Peer supports Guaranteed Messages Browser connections for receiving guaranteed messages\n   */\n  GUARANTEED_MESSAGE_BROWSE:    12,\n  /**\n   * Peer supports creating/modify/disposing endpoints.\n   */\n  ENDPOINT_MGMT:                13,\n  /**\n   * Peer supports selectors on Guaranteed Message Consumers.\n   */\n  SELECTOR:                     14,\n  /**\n   * Maximum size of a Direct message (in bytes), including all optional message headers and data.\n   * Type: number.\n   */\n  MAX_GUARANTEED_MSG_SIZE:      15,\n  /**\n   * Peer supports Guaranteed Messaging Consumer state change updates. Type: boolean\n   */\n  ACTIVE_CONSUMER_INDICATION:   16,\n  /**\n   * Peer accepts compressed (DEFLATE) data. Type: boolean.\n   */\n  COMPRESSION:                  17,\n  /**\n   * Peer supports Guaranteed Messaging cut-through. Type: boolean\n   * @deprecated since broker v9.10.0.12\n   */\n  CUT_THROUGH:                  18,\n  /**\n   * Peer supports provisioned queue and topic-endpoint discard behavior. Type: boolean\n   */\n  ENDPOINT_DISCARD_BEHAVIOR:    19,\n  /**\n   * Peer supports Guaranteed Messaging message TTL and Dead-Message Queues. Type: boolean\n   */\n  ENDPOINT_MESSAGE_TTL:         20,\n  /**\n   * Peer accepts JNDI queries. Type: boolean.\n   */\n  JNDI:                         21,\n  /**\n   * Peer supports per topic sequence numbering for Guaranteed Messaging messages. Type: boolean\n   */\n  PER_TOPIC_SEQUENCE_NUMBERING: 22,\n  /**\n   * Peer supports QueueSubscriptionAdd for managing subscriptions on queue endpoints.\n   * Type: boolean\n   */\n  QUEUE_SUBSCRIPTIONS:          23,\n  /**\n   * Peer supports add/remove subscriptions for a specified clientName. Type: boolean\n   */\n  SUBSCRIPTION_MANAGER:         24,\n  /**\n   * Peer supports transacted sessions. Type: boolean.\n   */\n  TRANSACTED_SESSION:           25,\n  /**\n   * Peer support Message Replay. Type: boolean.\n   */\n  MESSAGE_REPLAY:               26,\n  /**\n   * Peer supports TLS downgrade to compression (encrypted and plaintext) Type: boolean\n   */\n  COMPRESSED_SSL:               27,\n  /**\n   * The peer can support \\#share and \\#noexport subscriptions\n   * Type: Boolean\n   */\n  SHARED_SUBSCRIPTIONS:         28,\n  /**\n   * The EndpointErrorId in replay bind responses can be trusted.\n   */\n  BR_REPLAY_ERRORID:            29,\n  /**\n   * Support for ApplicationAck optional outcomes \"failed\" and \"rejected\".\n   */\n  AD_APP_ACK_FAILED:            30,\n  /**\n   * Broker supports variable-length SMF extended parameters.\n   */\n  VAR_LEN_EXT_PARAM:            31,\n};\n\n/**\n * Represents an enumeration of client capabilities.\n * These are sent in the ClientCtrl login messages.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst ClientCapabilityType = {\n  /**\n   * Client implements acknowledgements to router unsolicited unbinds.\n   * Always true.\n   */\n  UNBIND_ACK: 0,\n  /**\n   * Indicates whether a client will process an EndpointErrorId in a BindResponse message.\n   * Always true\n   */\n  BR_ERRORID: 1,\n  /**\n   * Indicates whether a client supports Partitioned Queues\n   * and whether a PartitionGroupId will be proccessed in a BindResponse message.\n   * Always true\n   * \n   * @since 10.12.0\n   */\n   PQ: 2,\n};\nmodule.exports.CapabilityType = Enum.new(CapabilityType);\nmodule.exports.ClientCapabilityType = Enum.new(ClientCapabilityType);\n","const { Convert } = require('solclient-convert');\nconst { LOG_DEBUG } = require('solclient-log');\nconst { ParseDestination } = require('./parse-destination');\nconst { ParseFieldHeader } = require('./parse-field-header');\nconst { ParseFloat } = require('./parse-float');\nconst { ParseInteger } = require('./parse-integer');\nconst { ParseMap } = require('./parse-map');\nconst { ParseStream } = require('./parse-stream');\nconst { SDTDataTypes } = require('../sdt-data-types');\nconst { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\n\nconst {\n  utf8ToUcs2,\n} = Convert;\nconst { parseFieldHeader } = ParseFieldHeader;\nconst { parseFloatField } = ParseFloat;\nconst { parseIntegerField } = ParseInteger;\nconst { parseMapAt } = ParseMap;\nconst { parseStreamAt } = ParseStream;\nconst { parseDestination } = ParseDestination;\n\nconst ParseSingleElement = {\n  // Parse single SDT element, returns SDTField\n  parseSingleElement(dataBuf, offset) {\n    const fieldHeader = parseFieldHeader(dataBuf, offset);\n    if (!fieldHeader) {\n      LOG_DEBUG(`parseSingleElement return false, fieldHeader=${fieldHeader}`);\n      return null;\n    }\n\n    const pos = offset + fieldHeader[3];\n\n    // For use inside switch\n    const elemValLen = fieldHeader[2];\n\n    switch (fieldHeader[0]) {\n      case SDTDataTypes.Null:\n        return SDTField.create(SDTFieldType.NULLTYPE, null);\n      case SDTDataTypes.Boolean:\n        return SDTField.create(SDTFieldType.BOOL, dataBuf.readUInt8(pos) !== 0);\n      case SDTDataTypes.Integer:\n        return parseIntegerField(true, dataBuf, pos, elemValLen);\n      case SDTDataTypes.UnsignedInteger:\n        return parseIntegerField(false, dataBuf, pos, elemValLen);\n      case SDTDataTypes.Float:\n        return parseFloatField(dataBuf, pos, elemValLen);\n      case SDTDataTypes.Char:\n        return SDTField.create(SDTFieldType.WCHAR,\n                               String.fromCharCode(dataBuf.readUInt16BE(pos)));\n      case SDTDataTypes.ByteArray:\n        return SDTField.create(SDTFieldType.BYTEARRAY,\n                               dataBuf.slice(pos, pos + elemValLen));\n      case SDTDataTypes.String:\n        // strip last byte (null-terminator)\n        return SDTField.create(SDTFieldType.STRING,\n                               utf8ToUcs2(dataBuf.toString('latin1', pos, pos + elemValLen - 1)));\n      case SDTDataTypes.Destination:\n        return parseDestination(dataBuf, pos, elemValLen);\n      case SDTDataTypes.SMFMessage:\n        return SDTField.create(SDTFieldType.SMF_MESSAGE, dataBuf.slice(pos, pos + elemValLen));\n      case SDTDataTypes.Map:\n        return parseMapAt(dataBuf, pos, elemValLen);\n      case SDTDataTypes.Stream:\n        return parseStreamAt(dataBuf, pos, elemValLen);\n      default:\n        // removed toString conversion as a test\n        return SDTField.create(SDTFieldType.UNKNOWN,\n                               dataBuf.toString('latin1', pos, pos + elemValLen));\n    }\n  },\n};\n\nconst StringToBuffer = {\n  stringToBuffer(str) {\n    const BufferImpl = require('buffer').Buffer;\n    return BufferImpl.from(str, 'latin1');\n  },\n};\n\nmodule.exports.ParseSingleElement = ParseSingleElement;\nmodule.exports.StringToBuffer = StringToBuffer;\n","\n// Avoid closure compiler nonsense\nmodule.exports.makeMap = function makeMap(...keyValuePairs) {\n  const result = {};\n  for (let i = 0; i < keyValuePairs.length; i += 2) {\n    result[keyValuePairs[i]] = keyValuePairs[i + 1];\n  }\n  return result;\n};\n","const QueueLib = require('solclient-queue');\nconst { APIProperties } = require('solclient-util');\nconst { Check } = require('solclient-validate');\nconst { MessageConsumerAcknowledgeMode } = require('./message-consumer-acknowledge-modes');\nconst { Topic } = require('solclient-destination');\n\nconst DEFAULTS = {\n  queueDescriptor:                         undefined,\n  queueProperties:                         undefined,\n  connectTimeoutInMsecs:                   10000,\n  connectAttempts:                         3,\n  topicEndpointSubscription:               undefined,\n  // selector: undefined,\n  acknowledgeMode:                         MessageConsumerAcknowledgeMode.AUTO,\n  requiredSettlementOutcomes:              [], // MessageOutcome.ACCEPTED is not required to be set and always supported\n  transportAcknowledgeTimeoutInMsecs:      1000,\n  transportAcknowledgeThresholdPercentage: 60,\n  activeIndicationEnabled:                 false,\n  noLocal:                                 false,\n  windowSize:                              255,\n  _browser:                                false,\n  replayStartLocation:                     undefined,\n  reconnectAttempts:                       -1,\n  reconnectIntervalInMsecs:                3000,\n  createIfMissing:                         false,\n};\n\n/**\n * @classdesc\n * Defines the properties for a {@link solace.MessageConsumer}.\n *\n * @memberof solace\n */\nclass MessageConsumerProperties extends APIProperties {\n  constructor(options) {\n    super(DEFAULTS, options);\n  }\n\n  /**\n   * Defines the queue from which to consume.\n   *  * For durable queues and durable topic endpoints, this must be a\n   *    {@link solace.QueueDescriptor} unless\n   *    {@link solace.MessageConsumerProperties#createIfMissing} is set.\n   *  * When an {@link solace.AbstractQueueDescriptor} is used, the name is generated when\n   *    the {@link solace.MessageConsumer} is connected. The generated descriptor can be queried\n   *    from the consumer after it has successfully connected by calling\n   *    {@link solace.MessageConsumer#getProperties}.\n   * @type {solace.QueueDescriptor}\n   */\n  get queueDescriptor() {\n    return Check.something(this._queueDescriptor)\n      ? this._queueDescriptor\n      : DEFAULTS.queueDescriptor;\n  }\n  set queueDescriptor(value) {\n    if (value instanceof QueueLib.AbstractQueueDescriptor) {\n      this._queueDescriptor = value;\n    } else if (value) {\n      this._queueDescriptor = value.name\n        ? new QueueLib.QueueDescriptor(value)\n        : new QueueLib.AbstractQueueDescriptor(value);\n    } else {\n      this._queueDescriptor = value;\n    }\n  }\n\n  /**\n   * Gets the properties of the remote queue.\n   *  * For temporary queues and temporary topic endpoints,\n   *    or if {@link solace.MessageConsumerProperties#createIfMissing} is true,\n   *    these properties define the endpoint that is created.\n   *  * For durable queues, these must be unset on consumer creation\n   *    unless {@link solace.MessageConsumerProperties#createIfMissing} is set.\n   *    The values will be populated\n   *    after the queue is connected and can be retrieved by calling\n   *    {@link solace.MessageConsumer#getProperties}.\n   * @type {solace.QueueProperties|null|undefined}\n   * @default undefined\n   */\n  get queueProperties() {\n    return Check.something(this._queueProperties)\n      ? this._queueProperties\n      : DEFAULTS.queueProperties;\n  }\n  set queueProperties(value) {\n    if (value) {\n      this._queueProperties = new QueueLib.QueueProperties(value);\n    } else {\n      this._queueProperties = value;\n    }\n  }\n\n  // ------------ Properties controlling connection of the consumer ----------------\n  /**\n   * The bind timeout in milliseconds when creating a connection to the Solace Message Router.\n   *  * The valid range is >= 50.\n   * @type {Number}\n   * @default 10000\n   */\n  get connectTimeoutInMsecs() {\n    return Check.something(this._bindTimeoutInMsecs)\n      ? this._bindTimeoutInMsecs\n      : DEFAULTS.connectTimeoutInMsecs;\n  }\n  set connectTimeoutInMsecs(value) {\n    this._bindTimeoutInMsecs = value;\n  }\n\n  /**\n   * Gets and sets the maximum number of bind attempts when creating a connection to the\n   * Solace Message Router.\n   *  * The valid range is >= 1.\n   * @type {Number}\n   * @default 3\n   */\n  get connectAttempts() {\n    return Check.something(this._connectAttempts)\n      ? this._connectAttempts\n      : DEFAULTS.connectAttempts;\n  }\n  set connectAttempts(val) {\n    this._connectAttempts = val;\n  }\n\n  // ------------ Properties applied to the queue when connecting ----------------\n\n  /**\n   * This must be undefined if the type of the\n   * {@link solace.MessageConsumerProperties#queueDescriptor} is not\n   * {@link solace.QueueType.TOPIC_ENDPOINT}.\n   *\n   * If {@link solace.MessageConsumerProperties#queueDescriptor} is\n   * not durable, or {@link solace.MessageConsumerProperties#createIfMissing} is true,\n   * this may be left undefined to generate the topic endpoint's\n   * destination. When generated, the destination can be obtained from\n   * the {@link solace.MessageConsumer} after it is connected by calling\n   * {@link solace.MessageConsumer#getDestination}.\n   *\n   * @type {solace.Destination}\n   * @default undefined\n   */\n  get topicEndpointSubscription() {\n    return this._topicEndpointSubscription;\n  }\n  set topicEndpointSubscription(val) {\n    // Avoid instanceof check failing on Node 4?\n    if (typeof val === 'string') {\n      this._topicEndpointSubscription = Topic.createFromName(val);\n    } else {\n      this._topicEndpointSubscription = val;\n    }\n  }\n\n  // ----------- Properties controlling an established connection to a queue --------------\n\n  /**\n   * The Application Acknowledgement mode for the Message Consumer.\n   *\n   * When the acknowledgement mode is {@link solace.MessageConsumerAcknowledgeMode.CLIENT},\n   * a message is Application Acknowledged when the application calls\n   * {@link solace.Message#acknowledge} on that message.\n   *\n   * When the acknowledge mode is {@link solace.MessageConsumerAcknowledgeMode.AUTO}, a message is\n   * Application Acknowledged by the API after all\n   * {@link solace.MessageConsumerEventName#event:MESSAGE}\n   * listeners are called and none throw an exception. If a message handler throws, the message\n   * can still be acknowledged by calling {@link solace.Message#acknowledge}, but this would not be\n   * a recommended practice.\n   *\n   * When received messages are Application Acknowledged they are removed from the Guaranteed\n   * Message storage on the Solace Message Router. Message Consumer Application Acknowledged,\n   * <b>only</b> remove messages from the Solace Message Router.\n   *\n   * In particular, withholding Message Consumer Acknowledgemnts does not stop\n   * message delivery. For Message Consumer flow control (aka transport acknowledgemeent) see\n   * {@link solace.MessageConsumer#stop}/{@link solace.MessageConsumer#start}. Message Consumer\n   * flow control may also be imlpemented by removing the\n   * {@link solace.MessageConsumerEventName#event:MESSAGE} listener.\n   *\n   * Flow control and transport acknowledgements characteristics are defined by\n   * {@link solace.MessageConsumerProperties#transportAcknowledgeThresholdPercentage} and\n   * {@link solace.MessageConsumerProperties#transportAcknowledgeTimeoutInMsecs}\n   *\n   * @type {solace.MessageConsumerAcknowledgeMode}\n   * @default solace.MessageConsumerAcknowledgeMode.AUTO\n   */\n  get acknowledgeMode() {\n    return Check.something(this._acknowledgeMode)\n      ? this._acknowledgeMode\n      : DEFAULTS.acknowledgeMode;\n  }\n  set acknowledgeMode(value) {\n    this._acknowledgeMode = value;\n  }\n\n  /**\n   * The required settlement outcomes for the Message Consumer.\n   *\n   * A session is created with SUPPORTED_MESSAGE_ACK_CLIENT by setting\n   * the requiredSettlementOutcomes property to support negative acknowledgment outcomes.\n   *\n   * The {@link solace.MessageOutcome.ACCEPTED} outcome is not required to be set and is always\n   * supported as a settlement outcome.\n   *\n   * When the requiredSettlementOutcomes include either {@link solace.MessageOutcome.FAILED}\n   * or {@link solace.MessageOutcome.REJECTED}, a message can be settled with any of these outcomes.\n   *\n   * The {@link solace.Message#acknowledge} method internally calls the {@link solace.Message#settle}\n   * with the {@link solace.MessageOutcome.ACCEPTED} passed as the settlement outcome for that message.\n   *\n   * When received messages are Application Acknowledged/Settled with\n   * a {@link solace.MessageOutcome.ACCEPTED} outcome, they are removed from the Guaranteed\n   * Message storage on the Solace Message Router.\n   *\n   * In particular, withholding Message Consumer Acknowledgemnts does not stop\n   * message delivery. For Message Consumer flow control (aka transport acknowledgemeent) see\n   * {@link solace.MessageConsumer#stop}/{@link solace.MessageConsumer#start}. Message Consumer\n   * flow control may also be imlpemented by removing the\n   * {@link solace.MessageConsumerEventName#event:MESSAGE} listener.\n   *\n   * Flow control and transport acknowledgements characteristics are defined by\n   * {@link solace.MessageConsumerProperties#transportAcknowledgeThresholdPercentage} and\n   * {@link solace.MessageConsumerProperties#transportAcknowledgeTimeoutInMsecs}\n   *\n   * @type {Array.<solace.MessageOutcome>}\n   * @default []\n   */\n  get requiredSettlementOutcomes() {\n    return Check.something(this._requiredSettlementOutcomes)\n      && Check.array(this._requiredSettlementOutcomes)\n      ? this._requiredSettlementOutcomes\n      : DEFAULTS.requiredSettlementOutcomes;\n  }\n  set requiredSettlementOutcomes(value) {\n    this._requiredSettlementOutcomes = value;\n  }\n\n  /**\n   * The transport acknowledgement timeout for guaranteed messaging.\n   * When the {@link solace.MessageConsumerProperties#transportAcknowledgeTimeoutInMsecs}\n   * is not exceeded, acknowledgements will be returned to the router at intervals not\n   * less than this value.\n   *   * The valid range is 20 <= transportAcknowledgeTimeoutInMsecs <= 1500.\n   * @type {Number}\n   * @default 1000\n   * @deprecated\n   */\n  get acknowledgeTimeoutInMsecs() {\n    return Check.something(this._transportAcknowledgeTimeoutInMsecs)\n      ? this._transportAcknowledgeTimeoutInMsecs\n      : DEFAULTS.transportAcknowledgeTimeoutInMsecs;\n  }\n  set acknowledgeTimeoutInMsecs(val) {\n    this._transportAcknowledgeTimeoutInMsecs = val;\n  }\n\n  /**\n   * The threshold for sending an acknowledgement, as a percentage.\n   * The API sends a transport acknowledgment every\n   * N messages where N is calculated as this percentage of the transport\n   * window size if the endpoint's max-delivered-unacked-msgs-per-flow\n   * setting at bind time is greater than or equal to the transport\n   * window size. Otherwise, N is calculated as this percentage of the\n   * endpoint's max-delivered-unacked-msgs-per-flow setting at bind time.\n   * * The valid range is 1 <= transportAcknowledgeThresholdPercentage <= 75.\n   * @type {Number}\n   * @default 60\n   * @deprecated\n   */\n  get acknowledgeThreshold() {\n    return Check.something(this._transportAcknowledgeThresholdPercentage)\n      ? this._transportAcknowledgeThresholdPercentage\n      : DEFAULTS.transportAcknowledgeThresholdPercentage;\n  }\n  set acknowledgeThreshold(value) {\n    this._transportAcknowledgeThresholdPercentage = value;\n  }\n\n  /**\n   * The transport acknowledgement timeout for guaranteed messaging.\n   * When the {@link solace.MessageConsumerProperties.transportAcknowledgeTimeoutInMsecs}\n   * is not exceeded, acknowledgements will be returned to the router at intervals not less than\n   * this value.\n   *   * The valid range is 20 <= transportAcknowledgeTimeoutInMsecs <= 1500.\n   * @type {Number}\n   * @default 1000\n   */\n  get transportAcknowledgeTimeoutInMsecs() {\n    return Check.something(this._transportAcknowledgeTimeoutInMsecs)\n      ? this._transportAcknowledgeTimeoutInMsecs\n      : DEFAULTS.transportAcknowledgeTimeoutInMsecs;\n  }\n  set transportAcknowledgeTimeoutInMsecs(val) {\n    this._transportAcknowledgeTimeoutInMsecs = val;\n  }\n\n  /**\n   * The threshold for sending an acknowledgement, as a percentage.\n   * The API sends a transport acknowledgment every\n   * N messages where N is calculated as this percentage of the transport\n   * window size if the endpoint's max-delivered-unacked-msgs-per-flow\n   * setting at bind time is greater than or equal to the transport\n   * window size. Otherwise, N is calculated as this percentage of the\n   * endpoint's max-delivered-unacked-msgs-per-flow setting at bind time.\n   * * The valid range is 1 <= transportAcknowledgeThresholdPercentage <= 75.\n   * @type {Number}\n   * @default 60\n   */\n  get transportAcknowledgeThresholdPercentage() {\n    return Check.something(this._transportAcknowledgeThresholdPercentage)\n      ? this._transportAcknowledgeThresholdPercentage\n      : DEFAULTS.transportAcknowledgeThresholdPercentage;\n  }\n  set transportAcknowledgeThresholdPercentage(value) {\n    this._transportAcknowledgeThresholdPercentage = value;\n  }\n\n  /**\n   * @description When enabled, a Guaranteed Messaging Consumer requests Active and Inactive\n   * events from the router and emits them to interested listeners.\n   * @type {Boolean}\n   * @default false\n   * @see {@link solace.MessageConsumerEventName.ACTIVE}\n   * @see {@link solace.MessageConsumerEventName.INACTIVE}\n   */\n  get activeIndicationEnabled() {\n    return Check.something(this._activeIndicationEnabled)\n      ? this._activeIndicationEnabled\n      : DEFAULTS.activeIndicationEnabled;\n  }\n  set activeIndicationEnabled(newValue) {\n    this._activeIndicationEnabled = newValue;\n  }\n\n  /**\n   * When enabled, a Guaranteed Messaging Consumer does not receive messages published\n   * in the same Session, even if the endpoint contains a subscription that matches the published\n   * message.\n   * @type {Boolean}\n   * @default false\n   */\n  get noLocal() {\n    return Check.something(this._noLocal)\n      ? this._noLocal\n      : DEFAULTS.noLocal;\n  }\n  set noLocal(newValue) {\n    this._noLocal = newValue;\n  }\n\n  /**\n   * The window size for Guaranteed Message delivery.  This is the maximum number of messages that\n   * will be prefetched from the Solace Messaging Router and queued internally by the API while\n   * waiting for the application to accept delivery of the messages.\n   *   * The valid range is 1 <= windowSize <= 255.\n   * @type {Number}\n   * @default 255\n   */\n  get windowSize() {\n    return Check.something(this._windowSize)\n      ? this._windowSize :\n      DEFAULTS.windowSize;\n  }\n  set windowSize(val) {\n    this._windowSize = val;\n  }\n\n  /**\n   * When enabled, a Guaranteed Messaging Consumer will connect as a queue browser\n   * @type {Boolean}\n   * @default false\n   * @private\n   * @internal\n   */\n  get browser() {\n    return Check.something(this._browser)\n      ? this._browser :\n      DEFAULTS._browser;\n  }\n  set browser(newValue) {\n    this._browser = newValue;\n  }\n  /**\n   * When a Flow is created, the application may request replay of messages from the replay log,\n   * even messages that have been previously delivered and removed the from topic endpoint or queue.\n   * The default is undefined, and indicates that no replay is requested.\n   *\n   * When defined the replay start location must be a {@link solace.ReplayStartLocation} object\n   * as returned by\n   * {@link solace.SolClientFactory.createReplayStartLocationBeginning} or\n   * {@link solace.SolClientFactory.createReplayStartLocationDate}.\n   *\n   * The {@link solace.ReplayStartLocation} returned by\n   * {@link solace.SolClientFactory.createReplayStartLocationBeginning}\n   * indicate that all messages available should be replayed.\n   *\n   * The replay start location returned by\n   * {@link solace.SolClientFactory.createReplayStartLocationDate}\n   * indicates that all messages logged since a given date must be retrieved.\n   * @type {solace.ReplayStartLocation}\n   * @default undefined.\n   */\n  get replayStartLocation() {\n    return Check.something(this._replayStartLocation)\n      ? this._replayStartLocation :\n        DEFAULTS.replayStartLocation;\n  }\n  set replayStartLocation(newValue) {\n    this._replayStartLocation = newValue;\n  }\n\n  /**\n   * When a connected flow receives an unsolicited unbind event with subcode\n   * REPLAY_STARTED or GM_UNAVAILABLE, the SDK can reconnect the flow automatically.\n   * This property controls the flow auto reconnect feature:\n   * 0: Disable flow auto reconnect for this consumer flow.\n   * -1: Enable flow auto reconnect for this consumer flow, infiinite retries (default)\n   * <n, positive number>: Enable flow auto reconnect for this consumer flow, n retries.\n   *\n   * When the flow auto rebind is enabled, DOWN_ERRORs with REPLAY_STARTED and GM_UNAVAILABLE\n   * are handled internally, and not (immediately) emitted to the application.\n   * A RECONNECTING event (with the same subcode) is emitted instead,\n   * ideally followed by a RECONNECTED event when the reconnect succeedes.\n   * In case of REPLAY_STARTED, the window of message IDs and acknowledgements are reset\n   * to allow replay packets to be passed to the application without marking them as duplicates.\n   * In case of GM_UNAVAILABLE, flow state is preserved.\n   *\n   * If reconnecting fails after exhausting the number of retries, a DOWN_ERROR is emitted\n   * with the details of the last retry.\n   *\n   *\n   * @type {Number}\n   * @default -1\n   */\n  get reconnectAttempts() {\n    return Check.something(this._reconnectAttempts)\n      ? this._reconnectAttempts :\n        DEFAULTS.reconnectAttempts;\n  }\n  set reconnectAttempts(newValue) {\n    this._reconnectAttempts = newValue;\n  }\n\n  /**\n   * Time to wait between flow auto reconnect attempts, in milliseconds.\n   * See {@link solace.MessageConsumerProperties.reconnectAttempts}\n   * Defaults to 3 seconds (3000)\n   *  * The valid range is >= 50.\n   *\n   * @type {Number}\n   * @default 3000\n   */\n  get reconnectIntervalInMsecs() {\n    return Check.something(this._reconnectIntervalInMsecs)\n      ? this._reconnectIntervalInMsecs :\n        DEFAULTS.reconnectIntervalInMsecs;\n  }\n  set reconnectIntervalInMsecs(newValue) {\n    this._reconnectIntervalInMsecs = newValue;\n  }\n\n  /**\n   * If the endpoint is durable, it won't be auto-created unless this flag is set.\n   * This flag has no effect for temporary endpoints, those are always created if missing.\n   * This flag has no effect for existing endpoints.\n   *\n   * Off by default for backwards compatibility.\n   *\n   * @type {Boolean}\n   * @default false\n   *\n   */\n  get createIfMissing() {\n    return Check.something(this._createIfMissing)\n      ? this._createIfMissing :\n        DEFAULTS.createIfMissing;\n  }\n\n  set createIfMissing(newValue) {\n    this._createIfMissing = newValue;\n  }\n\n}\nmodule.exports.MessageConsumerProperties = MessageConsumerProperties;\n","const SMFLib = require('solclient-smf');\n// No idea why the usual import idiom does not work.\n//const { CapabilityType } = require('solclient-session');\nconst SolclientSession = require('solclient-session');\nconst { ErrorResponseSubcodeMapper,\n        ErrorSubcode,\n        OperationError } = require('solclient-error');\nconst { LogFormatter } = require('solclient-log');\nconst { Long } = require('solclient-convert');\nconst { MessageIds } = require('./message-ids');\nconst { MessagePublisherAcknowledgeMode } = require('./message-publisher-acknowledge-modes');\nconst { MessagePublisherEventName } = require('./message-publisher-event-names');\nconst { PrivateFlowEventName } = require('solclient-flow');\nconst { PublisherFSMEvent } = require('./publisher-fsm-event');\nconst { PublisherFSMEventNames } = require('./publisher-fsm-event-names');\nconst { PublisherStateNames } = require('./publisher-state-names');\nconst { State, StateMachine } = require('solclient-fsm');\nconst { StatType } = require('solclient-stats');\nconst { TransportReturnCode } = require('solclient-transport');\n\nconst ConnectReason = {\n  INIT:     0, // never connected: message renumbering required\n  RESUME:   1, // connected before\n  FAILOVER: 2, // after a DR failover: message renumbering and message republish event required\n};\n\nclass PublisherFSM extends StateMachine {\n  constructor({ publisher, name, sessionInterface, properties } = {}) {\n    super({ name });\n    /** @type {MessagePublisher} */\n    const fsm = this;\n    const currentState = () => {\n      const state = fsm.getCurrentState();\n      return state ? state.getName() : '<not running>';\n    };\n    this.logger = new LogFormatter((...args) => [\n      `[session=${sessionInterface.sessionIdHex}]`,\n      `[message-publisher-fsm=${publisher.flowIdDec}]`,\n      `[${currentState()}]`,\n      ...args,\n    ]);\n    this.log = this.logger.wrap(this.log, this);\n    const {\n      LOG_TRACE,\n      LOG_DEBUG,\n      LOG_INFO,\n      LOG_WARN,\n    } = this.logger;\n\n    Object.assign(this, {\n      _publisher:                 publisher,\n      _acknowledgeMode:           properties.acknowledgeMode,\n      _acknowledgeTimeoutInMsecs: properties.acknowledgeTimeoutInMsecs,\n      _sessionInterface:          sessionInterface,\n      _windowSize:                properties.windowSize,\n      _stateEvents:               [],\n    });\n    // The publisher is not even constructed when publisherProperties.enabled is false\n    // so we could just set _guaranteedEnabled to true, but lets be thorough as at\n    // some point we may want to have sendADMessage() be responsible for throwing all\n    // errors. As it is, when publisher properties enabled is false, the session-fsm\n    // throws an error and when the message-spool is shutdown (close-flow received) the\n    // publisher-fsm thtows and error.\n    this._guaranteedEnabled = properties.enabled;\n    this._sendWindow = properties.windowSize;\n    this._resetConnectedInfo();\n    this._notifiedWindowClosed = false;\n    // We need a boolean to track the transport flow\n    // controlled state. prepareAdMessageAndSend is called by the\n    // session to prepare a message for publish and we\n    // need to return whether or not we are flow controlled\n    // without invoking the FSM or calling methods on the\n    // FSM.\n    // We consider all down states and all resending states equal\n    // to flow-controlled as in all states me must queue the message\n    // to the unacked list and not attempt to send directly.\n    // This is strictly a performance issue.\n    this._transportFlowControlled = true;\n\n    this.initial(function onInitial() {\n      return this.transitionTo(fsm.PublisherUnbound,\n                               (context) => {\n                                 LOG_TRACE(`Starting ${context.getStateMachine().getName()}`);\n                               }\n      );\n    });\n\n    fsm.unhandledEventReaction(function onUnhandledEvent(event) {\n      switch (event.getName()) {\n        case PublisherFSMEventNames.FLOW_UNBOUND:\n          // the router has closed the flow, likely due to operator\n          // shutdown on the message spool. Throw on any attempt\n          // to publish\n          this._guaranteedEnabled = false;\n          this._publisher.emit(MessagePublisherEventName.GUARANTEED_MESSAGING_DOWN);\n          return this.transitionTo(\n            fsm.PublisherUnbound,\n            (context) => {\n              LOG_TRACE(`Received close publisher for ${context.getStateMachine().getName()}`);\n            });\n        case PublisherFSMEventNames.DISPOSE:\n          LOG_TRACE('Received dispose request');\n          break;\n        case PublisherFSMEventNames.TRANSPORT_FULL:\n          LOG_TRACE('Received TRANSPORT_FULL');\n          break;\n        case PublisherFSMEventNames.CAN_SEND:\n          // This is ok because the session just sends the publisher CAN_SEND whenever received\n          // from transport, even if the publisher is not in use, or hasn't caused the flow control\n          LOG_TRACE('Received CAN_SEND when not flow controlled');\n          break;\n        default:\n          LOG_TRACE(`Ignoring event ${event.getName()}`);\n      }\n      return this;\n    });\n\n    fsm.PublisherUnbound = new State({\n      name:          PublisherStateNames.UNBOUND,\n      parentContext: fsm,\n    }, {\n      emitDownAndBindWaiting() {\n        LOG_TRACE('Emit down and bind waiting');\n        publisher.emit(MessagePublisherEventName.DOWN);\n        publisher.emit(PrivateFlowEventName.BIND_WAITING);\n      },\n    })\n      .entry(function onEntry() {\n        this.emitDownAndBindWaiting();\n        fsm._connectRetryCount = properties.connectRetryCount;\n      })\n      .reaction(PublisherFSMEventNames.FLOW_UNBOUND, function onFlowUnbind() {\n        return this.internalTransition();\n      })\n      .reaction(PublisherFSMEventNames.SESSION_UP, function onSessionUp() {\n        return this.transitionTo(fsm.PublisherOpenFlowSent);\n      });\n\n    fsm.PublisherOpenFlowSent = new State({\n      name:          PublisherStateNames.OPENFLOWSENT,\n      parentContext: fsm,\n    }, {\n      emitOpenFlowFailedError(details) {\n        publisher.emit(MessagePublisherEventName.CONNECT_FAILED_ERROR, details);\n      },\n      /**\n       * @param {AdProtocolMessage} adpMsg An OPENFLOW response.\n       * @description Handle an incoming Guaranteed Messaging Protocol Message.\n       * @returns {?} The result of processing an event, or null if no event was dispatched.\n       * @private\n       */\n      handleOpenFlowResponse(adpMsg) {\n        const smfRespHeader = adpMsg.smfHeader;\n        const respCode = smfRespHeader.pm_respcode;\n        /*\n         * Assured Control Protocol messages are received on publisher and consumer flows. The\n         * message types for each are unique, so we can determine whether it is a publisher or\n         * consumer by message type.  A specific publisher or consumer is found by the flowId, or\n         * by the correlation tag in the case of OPEN-FLOW (publisher) or BIND (consumer) responses.\n         */\n        if (adpMsg.msgType !== SMFLib.SMFAdProtocolMessageType.OPENPUBFLOW) {\n          return fsm.processEvent(new PublisherFSMEvent(\n              { name: PublisherFSMEventNames.FLOW_FAILED },\n              {\n                returnCode:  respCode,\n                description: `Unexpected response: ${SMFLib.SMFAdProtocolMessageType.describe(adpMsg.msgType)}`,\n              }\n          ));\n        }\n\n        /*\n         * The response code will indicate whether we create a PUB_FLOW_UP (200 OK) event\n         * or a PUB_FLOW_FAIL (any other response) event, or treat this as an invalid\n         * message (received a OPEN-PUB-FLOW request).\n         */\n\n        if (respCode === null) {\n          // Drop message and increment stats\n          publisher.incStat(StatType.RX_DISCARD_SMF_UNKNOWN_ELEMENT);\n          LOG_DEBUG(`Drop Open-Publisher-Flow Request message on sessionId 0x${\n                    sessionInterface.sessionIdHex}`);\n          return null;\n        }\n\n        if (respCode !== 200) {\n          const respStr = smfRespHeader.pm_respstr;\n          const mappedSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(respCode, respStr);\n          return fsm.processEvent(new PublisherFSMEvent(\n            { name: PublisherFSMEventNames.FLOW_FAILED },\n            {\n              subcode:     mappedSubcode,\n              returnCode:  respCode,\n              description: respStr,\n            })\n          );\n        }\n\n        LOG_TRACE('Handling OPENPUBFLOW message');\n\n        // typical response: { lastmsgidacked window flowid flowname publisher_id }\n\n        const lastMsgIDAcked = adpMsg.getLastMsgIdAcked();\n        const window = adpMsg.getWindow();\n        const flowId = adpMsg.getFlowId();\n        const flowName = adpMsg.getFlowName();\n        const publisherId = adpMsg.getPublisherId();\n\n        LOG_DEBUG(`OPENPUBFLOW response attributes: lastMsgIDAcked=${lastMsgIDAcked} window=${window} flowId=${flowId} flowName=${flowName} publisherId=${publisherId}`);\n\n        LOG_TRACE(`Local before handling response: ${fsm._messageIds}`);\n\n        if (window === undefined) {\n          return fsm.processEvent(\n            new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_FAILED },\n                                  { description: 'Window parameter not found' })\n          );\n        }\n        if (window > this._windowSize) {\n          return fsm.processEvent(\n            new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_FAILED },\n                                  { description: 'Invalid window negotiation' })\n          );\n        }\n        // reduce sendWindow by the size of unAckedList but do not reduce below zero\n        fsm._sendWindow = window - fsm._unackedList.length;\n        if (fsm._sendWindow < 0) fsm._sendWindow = 0;\n\n        // update publisher info before renumbering\n        Object.assign(fsm._publisher, {\n          name: flowName,\n          flowId,\n          publisherId,\n        });\n        // we may have been disabled by a previous closeFlow messsage, now that\n        // we know hte message spool is enabled again, set _guaranteedEnabled back\n        // to true\n        fsm._guaranteedEnabled = true;\n\n        if ((fsm._connectReason === ConnectReason.INIT) ||\n          (fsm._connectReason === ConnectReason.FAILOVER)) {\n          // reset 'lastSent' before renumbering\n          fsm._messageIds.setLastSent(lastMsgIDAcked);\n\n          LOG_DEBUG(`Renumbering unacked/unsent messages: fsm._messageIds=${fsm._messageIds}, lastMsgIDAcked=${lastMsgIDAcked}, type=${fsm._connectReason}`);\n          if (fsm._connectReason === ConnectReason.FAILOVER) {\n            publisher.emit(MessagePublisherEventName.FLOW_NAME_CHANGED, {\n              messages: [...fsm._unackedList],\n              count:    fsm._unackedList.length,\n            });\n          }\n          fsm._connectReason = ConnectReason.RESUME;\n          fsm._unackedList.forEach((message) => {\n            const oldId = message.getGuaranteedMessageId();\n            fsm._renumber(message);\n            LOG_TRACE(`Renumbering message ID: from ${oldId} to ${message.getGuaranteedMessageId()}`);\n            fsm._messageIds.setLastSent(message.getGuaranteedMessageId());\n          });\n        } else {\n          fsm._unackedList.forEach((message) => {\n            message.setFlowId(flowId);\n            message.setPublisherId(publisher.publisherId);\n            LOG_TRACE(`Set FlowId to ${flowId} in msg# ${message.getGuaranteedMessageId()}`);\n          });\n        }\n        // Either way, make sure none of the messages is above the size limit:\n        const payloadSizeLimit = fsm._sessionInterface.getCapability(SolclientSession.CapabilityType.MAX_GUARANTEED_MSG_SIZE).getValue();\n        fsm._unackedList.forEach((message) => {\n          if (payloadSizeLimit < message._memoized_payload.length) {\n            LOG_WARN(`Message size ${message._memoized_payload.length} above broker limit ${payloadSizeLimit}`);\n          }\n        });\n\n\n        if (fsm._unackedList.length) {\n          fsm._handleAck(lastMsgIDAcked, false, adpMsg, true);\n          // the starting point for retransmitting.  If lastMsgIdAcked doesn't\n          // ack anything this does not get updates, causing us to possible send\n          // messages out of order, or not start sending at all\n          fsm._firstUnackedToSend = fsm._unackedList[0];\n        } else {\n          fsm._messageIds.lastAcked = Long.fromValue(lastMsgIDAcked);\n        }\n        LOG_TRACE(`Local after applying lastMsgIDAcked: ${fsm._messageIds}`);\n\n        return fsm.processEvent(\n          new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_UP }));\n      },\n      /**\n       * @returns {?} The result of processing an BIND_TIMEOUT event\n       * @private\n       */\n      handleOpenFlowTimeout() {\n        LOG_INFO('Open publisher connection timeout');\n        return fsm.processEvent(\n          new PublisherFSMEvent({ name: PublisherFSMEventNames.BIND_TIMEOUT }));\n      },\n      handleUnknownFlowName() {\n        LOG_INFO('Flow name unknown, republish required');\n        // Don't send the FLOW_NAME_CHANGED message yet -- it specifically indicates\n        // that duplicate messages should be expected. Wait until the flow is successfully\n        // connected and messages are being renumbered.\n        fsm._resetConnectedInfo(true);\n        return this.externalTransitionTo(fsm.PublisherOpenFlowSent);\n      },\n      /**\n       * Send a Publisher Open Flow Request.\n       * @private\n       */\n      sendOpenFlow() {\n        const correlationTag = sessionInterface.getCorrelationTag();\n        LOG_TRACE(`sendOpenFlow correlationTag: ${correlationTag}`);\n        const openPubFlowMsg = SMFLib.AdProtocolMessage.getOpenMessagePublisher(\n          fsm._messageIds.lastAcked,\n          fsm._messageIds.lastSent,\n          properties.windowSize,\n          fsm._publisher._flowName,\n          correlationTag\n        );\n        LOG_TRACE('sendOpenFlow openPubFlowMsg constituents:');\n        LOG_TRACE(`fsm._messageIds.lastAcked:${fsm._messageIds.lastAcked} fsm._messageIds.lastSent:${fsm._messageIds.lastSent} properties.windowSize:${properties.windowSize} fsm._publisher._flowName:${fsm._publisher._flowName} `);\n        sessionInterface.sendControl(openPubFlowMsg);\n        sessionInterface.enqueueRequest(correlationTag,\n                                        () => this.handleOpenFlowTimeout(),\n                                        properties.connectTimeoutInMsecs,\n                                        null,\n                                        rxMsgObj => this.handleOpenFlowResponse(rxMsgObj));\n        LOG_TRACE('Sent open publisher connection');\n      },\n    })\n      .entry(function onEntry() {\n        try {\n          this.sendOpenFlow();\n        } catch (e) {\n          LOG_WARN(`Exception during bind attempt: ${e}`);\n          fsm.processEvent(new PublisherFSMEvent({ name: PublisherFSMEventNames.SESSION_DOWN }));\n        }\n      })\n      .reaction(PublisherFSMEventNames.FLOW_CLOSE, function onFlowClose() {\n        return this.transitionTo(fsm.PublisherCloseFlowSent);\n      })\n      .reaction(PublisherFSMEventNames.FLOW_UP, function onFlowUp() {\n        return this.transitionTo(fsm.PublisherUp);\n      })\n      .reaction(PublisherFSMEventNames.SESSION_DOWN, function onSessionDown() {\n        return this.transitionTo(fsm.PublisherUnbound);\n      })\n      .reaction(PublisherFSMEventNames.BIND_TIMEOUT, function onOpenFlowTimeout() {\n        if (fsm._connectRetryCount > 0) {\n          fsm._connectRetryCount--;\n          return this.externalTransitionTo(fsm.PublisherOpenFlowSent);\n        }\n        this.emitOpenFlowFailedError({\n          subcode:     ErrorSubcode.TIMEOUT,\n          description: 'Open publisher connection failed due to timeout',\n        });\n        return this.transitionTo(fsm.PublisherUnbound);\n      })\n      .reaction(PublisherFSMEventNames.FLOW_FAILED, function onFlowFailed(pEvent) {\n        const { subcode, returnCode, description } = pEvent;\n        LOG_TRACE(`FLOW_FAILED in PublisherOpenFlowSent state: subcode: ${subcode}, returnCode: ${returnCode}, description: ${description}`);\n        switch (pEvent.subcode) {\n          case ErrorSubcode.UNKNOWN_FLOW_NAME:\n            // DR or long HA failover\n            return this.handleUnknownFlowName();\n          // case ErrorSubcode.GM_NOT_READY: Fail the session\n          default:\n            this.emitOpenFlowFailedError({\n              event: pEvent,\n              subcode,\n              returnCode,\n              description,\n            });\n            // Otherwise, the flow is invalid\n            fsm._resetConnectedInfo();\n        }\n        return this.transitionTo(fsm.PublisherUnbound);\n      });\n\n    fsm.PublisherCloseFlowSent = new State({\n      name:          PublisherStateNames.CLOSEFLOWSENT,\n      parentContext: fsm,\n    }, {\n      handleCloseFlowResponse(response) {\n        const smfRespHeader = response.smfHeader;\n        const respCode = smfRespHeader.pm_respcode;\n\n        if (response.msgType !== SMFLib.SMFAdProtocolMessageType.CLOSEPUBFLOW) {\n          return fsm.processEvent(new PublisherFSMEvent(\n            { name: PublisherFSMEventNames.FLOW_FAILED },\n            {\n              returnCode:  respCode,\n              description: `Unexpected response: ${SMFLib.SMFAdProtocolMessageType.describe(response.msgType)}`,\n            }));\n        }\n\n        if (respCode === null) {\n          // Drop message  and increment stats\n          publisher.incStat(StatType.RX_DISCARD_SMF_UNKNOWN_ELEMENT);\n          LOG_DEBUG(`Drop Close-Publisher-Flow Request message on sessionId 0x${\n                    sessionInterface.sessionIdHex}`);\n          return null;\n        }\n\n        if (respCode !== 200) {\n          fsm.processEvent(\n            new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_FAILED },\n                                  {\n                                    returnCode:  respCode,\n                                    description: smfRespHeader.pm_respstr,\n                                  }));\n        }\n\n        return fsm.processEvent(\n          new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_UNBOUND }));\n      },\n\n      handleCloseFlowTimeout() {\n        LOG_INFO('Close publisher connection timeout.');\n        return fsm.processEvent(\n          new PublisherFSMEvent({ name: PublisherFSMEventNames.UNBIND_TIMEOUT }));\n      },\n\n      sendCloseFlow() {\n        const correlationTag = sessionInterface.getCorrelationTag();\n        const closePubFlowMsg = SMFLib.AdProtocolMessage.getCloseMessagePublisher(\n          fsm._publisher.flowId,\n          correlationTag\n        );\n        sessionInterface.sendControl(closePubFlowMsg);\n        sessionInterface.enqueueRequest(correlationTag,\n                                        () => this.handleCloseFlowTimeout(),\n                                        properties.connectTimeoutInMsecs,\n                                        null,\n                                        rxMsgObj => this.handleCloseFlowResponse(rxMsgObj));\n        LOG_TRACE('Sent close publisher connection');\n      },\n    })\n      .entry(function onEntry() {\n        this.sendCloseFlow();\n        return this;\n      })\n      .reaction(PublisherFSMEventNames.ACK, function onAck(event) {\n        fsm._handleAckEvent(event);\n        return this.internalTransition();\n      })\n      .reaction(PublisherFSMEventNames.FLOW_UNBOUND, function onFlowUnbound() {\n        return this.transitionTo(fsm.PublisherUnbound);\n      })\n      .reaction(PublisherFSMEventNames.FLOW_FAILED, function onCloseFlowFailed(/*pEvent*/) {\n        this.transitionTo(fsm.PublisherUnbound);\n      })\n      .reaction(PublisherFSMEventNames.UNBIND_TIMEOUT, function onCloseFlowTimeout() {\n        return this.transitionTo(fsm.PublisherCloseFlowSent);\n      });\n\n    fsm.PublisherUp = new State({\n      name:          PublisherStateNames.UP,\n      parentContext: fsm,\n    }, {\n      emitFlowUp() {\n        publisher.emit(MessagePublisherEventName.UP);\n      },\n    })\n      .initial(function initial() {\n        return this.transitionTo(\n          fsm._unackedList.length\n            ? fsm.PublisherRetransmitting\n            : fsm.PublisherDataXfer\n        );\n      })\n      .entry(function onEntry() {\n        // The state isn't changed on entry, so don't emit yet.\n        LOG_DEBUG('Flow is UP');\n        fsm._scheduleStateEvents(fsm.PublisherUp, () => this.emitFlowUp());\n        return this;\n      })\n      .reaction(PublisherFSMEventNames.ACK, function onAck(event) {\n        LOG_DEBUG('Ack received');\n        fsm._handleAckEvent(event);\n        return this.internalTransition();\n      })\n      .reaction(PublisherFSMEventNames.ACK_TIMEOUT, function onAckTimeout() {\n        // the starting point when we get the CAN_SEND\n        fsm._firstUnackedToSend = fsm._unackedList[0];\n        return this.transitionTo(fsm.PublisherRetransmitting);\n      })\n        .reaction(PublisherFSMEventNames.FLOW_CLOSE, function onFlowClose() {\n          return this.transitionTo(fsm.PublisherCloseFlowSent);\n        })\n        .reaction(PublisherFSMEventNames.SESSION_DOWN, function onSessionDown() {\n          return this.transitionTo(fsm.PublisherUnbound);\n        })\n        .reaction(PublisherFSMEventNames.TRANSPORT_FULL, function onWindowClosed() {\n          return this.internalTransition();\n        });\n\n    fsm.PublisherDataXfer = new State({\n      name:          PublisherStateNames.DATA_XFER,\n      parentContext: fsm.PublisherUp,\n    })\n      .entry(() => {\n        // publisher is up and capable of sending GM messages directly from the application\n        fsm._transportFlowControlled = false;\n        fsm._scheduleStateEvents(fsm.PublisherDataXfer, () => fsm._maybeEmitCanSend());\n      })\n      .reaction(PublisherFSMEventNames.TRANSPORT_FULL, function onTransportFull() {\n        return this.transitionTo(fsm.PublisherFlowControlled);\n      })\n      .exit(() => {\n        // publisher cannot send messages to transport and must queue in unAckedList until\n        // re-entering PublisherDataXfer\n        // set a FSM boolean that is checked in prepareADMessageAndSend() we\n        // need to avoid FSM interactions on the fast path so resort to\n        // this boolean.\n        fsm._transportFlowControlled = true;\n      });\n\n    fsm.PublisherFlowControlled = new State({\n      name:          PublisherStateNames.FLOW_CONTROLLED,\n      parentContext: fsm.PublisherUp,\n    })\n      .reaction(PublisherFSMEventNames.TRANSPORT_FULL, function onTransportFull() {\n        // Unusual event, as only the FSM can send messages when we're in flow-controlled state\n        LOG_INFO('Attempt to send while flow controlled');\n        // Fall out and do the action for PublisherUp\n        return this.internalTransition();\n      })\n      .reaction(PublisherFSMEventNames.CAN_SEND, function onCanSend() {\n        //\n        // start sending from tune unAcked list.\n        return this.transitionTo(fsm.PublisherRetransmitting);\n      });\n\n    fsm.PublisherRetransmitting = new State({\n      name:          PublisherStateNames.RETRANSMITTING,\n      parentContext: fsm.PublisherUp,\n    }, {\n      retransmit() {\n        try {\n          fsm._resendFromUnacked();\n        } catch (ex) {\n          // Resend failed:\n          if (ex instanceof OperationError && ex.subcode === ErrorSubcode.INSUFFICIENT_SPACE) {\n            LOG_DEBUG('Publisher resendFromUnacked blocked due to insufficient space, wait for CAN_SEND');\n            fsm.processEvent(\n              new PublisherFSMEvent({ name: PublisherFSMEventNames.TRANSPORT_FULL }));\n          } else {\n            // send failed.  Fail the publisher\n            LOG_INFO(`Publisher resendFromUnacked failed: ${ex}`);\n            fsm.processEvent(\n              new PublisherFSMEvent({ name: PublisherFSMEventNames.FLOW_FAILED }));\n          }\n        }\n      },\n    })\n      .entry(function onEntry() {\n        this.retransmit();\n      })\n      .reaction(PublisherFSMEventNames.RESEND_COMPLETE, function onResendComplete() {\n        return this.transitionTo(fsm.PublisherDataXfer);\n      })\n      .reaction(PublisherFSMEventNames.TRANSPORT_FULL, function onTransportFull() {\n        // Transport flow controlled while resending/recovering from flow control. Go\n        // to flow controlled state and wait for CAN_SEND\n        LOG_DEBUG(`Transport full while retransmitting, unacked remaining: ${fsm._unackedList.length}`);\n        // Fall out and do the action for PublisherUp\n        return this.transitionTo(fsm.PublisherFlowControlled);\n      });\n  }\n\n  isDisconnected() {\n    if (!this.getCurrentState()) return true;\n    return !!this.getActiveState(PublisherStateNames.UNBOUND);\n  }\n\n  /**\n\n   * Prepare and send a Guaranteed Message. This method updates FSM variables including\n   * lastSendMessage.\n   *\n   * @private\n   * @param {Message} dataMsg The message to prepare\n   * @returns {TransportReturnCode} return the status from the transport send\n   */\n  prepareAdMessageAndSend(dataMsg) {\n    if (!this._guaranteedEnabled) {\n      throw new OperationError('Session does not provide Guaranteed Message Publish capability',\n        ErrorSubcode.GM_UNAVAILABLE,\n        'close flow received from message-router');\n    }\n    if (this._sendWindow <= 0) {\n      this._publisher.incStat(StatType.TX_WINDOW_CLOSED);\n      this._notifiedWindowClosed = true;\n      throw new OperationError(\n        'Guaranteed Message Window Closed',\n        ErrorSubcode.INSUFFICIENT_SPACE\n      );\n    }\n\n\n    const unackedList = this._unackedList;\n    const {\n      LOG_TRACE,\n      LOG_DEBUG,\n      LOG_INFO,\n      LOG_WARN,\n    } = this.logger;\n\n    if (dataMsg._payload_is_memoized) {\n      dataMsg._payload_is_memoized = false;\n      dataMsg._memoized_csumm = undefined;\n      dataMsg._memoized_payload = undefined;\n    }\n    const dupMsg = dataMsg.clone();\n    const payloadSize = SMFLib.Codec.Encode.adaptMessageToSmf_payloadMemoize(dupMsg);\n    var payloadSizeLimit = 0;\n    try {\n      payloadSizeLimit = this._sessionInterface.getCapability(SolclientSession.CapabilityType.MAX_GUARANTEED_MSG_SIZE).getValue();\n      LOG_TRACE(`Payload size limit: ${payloadSizeLimit}`);\n    } catch (e) {\n      LOG_INFO('Can\\'t pre-check payload size, broker not connected yet?');\n      LOG_TRACE(e.stack);\n    }\n    if ((0 < payloadSizeLimit) && (payloadSize > payloadSizeLimit)) {\n      throw new OperationError(\n        `Encoded payload size (${payloadSize}) exceeds broker size limit (MAX_GUARANTEED_MSG_SIZE, ${payloadSizeLimit})`,\n        ErrorSubcode.MESSAGE_TOO_LARGE\n      );\n    }\n\n    --this._sendWindow;\n    this._renumber(dupMsg);\n    this._cloneNumbers(dupMsg, dataMsg);\n\n    unackedList.push(dupMsg);\n    // Update the messgeIds, lastSend/next values only on a successful send or enqueue,\n    // from this point on we will return OK from this send method.\n    const msgId = dupMsg.getGuaranteedMessageId();\n    this._messageIds.setLastSent(msgId);\n    LOG_TRACE(`Prepare and send AD message ID = ${msgId}, \n      unackedListSize = ${unackedList.length}, sendWindow = ${this._sendWindow}`);\n    // Note that the transport sender can be flow controlled at the transport\n    // level, which means the message should not be sent. So simply return\n    // We also consider set-up/down-states as _transportFlowControlled. We must be up\n    // and not retransmitting to\n    // send directly from application space.\n    if (this._transportFlowControlled) {\n      // we may receive acknowledgements while transport flow controlled which can\n      // cause our firstUnAckedToSend to become undefined, if this is the first message\n      // queued in that case, set firstUnAckedToSend\n      if (this._firstUnackedToSend === undefined) {\n        this._firstUnackedToSend = dupMsg;\n      }\n      return TransportReturnCode.OK;\n    }\n    // We use the session sendToTransport directly which may throw or  otherwise\n    // return an error. If so, catch the eror and remove the message from the unackedlist\n    // before rethrowing the error.\n    let returnCode;\n    try {\n      returnCode = this._sessionInterface.sendToTransport(dupMsg);\n      if (returnCode !== TransportReturnCode.OK) {\n        if (returnCode === TransportReturnCode.NO_SPACE) {\n          returnCode = TransportReturnCode.OK;\n          this._firstUnackedToSend = dupMsg;  // the starting point when we get the CAN_SEND\n          this.processEvent(new PublisherFSMEvent({ name: PublisherFSMEventNames.TRANSPORT_FULL }));\n        } else {\n          //\n          LOG_DEBUG(`prepareAdMessageAndSend: saw returnCode = ${returnCode}`);\n        }\n      } else {\n        // The message has successfully been sent once. Set the redelivered flag in case we need to\n        // resend it later.\n        dupMsg.setRedelivered(true);\n      }\n      // TBD: Should we start AckTimer when flow controlled?\n      this._startAckTimer();\n    } catch (ex) {\n      if (ex instanceof OperationError) {\n        LOG_DEBUG(`prepareAdMessageAndSend: caught OperationError: ${ErrorSubcode.describe(ex.subcode)} - ${ex.message}`);\n        // OperationErrors are encoding or other errors caused by the field contents the\n        // application has set on the message.  So we throw the error back at the\n        // application after undoing the queueing operations.\n        unackedList.pop();\n        this._messageIds.setLastSent(dupMsg.getGuaranteedPreviousMessageId());\n        ++this._sendWindow;\n        throw (ex);\n      } else {\n        LOG_DEBUG(`prepareAdMessageAndSend: caught ${ex.message}`);\n        throw ex;\n      }\n    }\n    return TransportReturnCode.OK;\n  }\n\n  _handleAckEvent(event) {\n    this._publisher.incStat(StatType.TX_ACKS_RXED);\n    this._handleAck(event.ack || event.nack, !!event.nack, event.ctrlMessage);\n  }\n\n  _handleAck(id, nack, ctrlMessage = undefined, openFlow = false) {\n    const {\n      _messageIds: messageIds,\n      _unackedList: unackedList,\n    } = this;\n    const { LOG_DEBUG, LOG_INFO } = this.logger;\n\n    if (messageIds.lastAcked.gte(id)) {\n      if (openFlow) {\n        LOG_DEBUG(`Implicit acks up to date: remote ack for ${id}, local ids ${this._messageIds}`);\n      } else {\n        LOG_INFO(`Dropping ack: remote ack for ${id}, local ids ${this._messageIds}`);\n      }\n      return;\n    }\n\n    const reportAcked = [];\n\n    // Assumption: the unacked message list is in increasing order of message ID.\n    // The assured message ID should be automatically generated, immutable and\n    // monotonically increasing.\n\n    // While the acked ID is greater than an element at the beginning of the unacked list...\n    while (unackedList.length &&\n           id.gte(unackedList[0].getGuaranteedMessageId())) {\n      // That unacked message is now acked. Shift it off and append to list of acked.\n      reportAcked.push(unackedList.shift());\n    }\n\n    // if we have removed the firstUnacked, reset it to the beginning of the list\n    if (unackedList.indexOf(this._firstUnackedToSend) === -1) {\n      this._firstUnackedToSend = unackedList[0];\n    }\n\n\n    // Recover some window space from the acked IDs.\n    this._sendWindow += reportAcked.length;\n    LOG_DEBUG('Send window size is now', this._sendWindow);\n\n\n    // The last acked ID is now the one we received.\n    // Don't let an exception in event dispatching prevent this from being set -- do it now.\n    messageIds.lastAcked = id;\n\n    // If we're NACKing, it's only the last message.\n    const reportNacked = nack ? reportAcked.pop() : null;\n\n    // Any ACKs?\n    // reportAcked is constant from here on\n    const numAcked = reportAcked.length;\n    if (numAcked) {\n      if (this._acknowledgeMode === MessagePublisherAcknowledgeMode.PER_MESSAGE) {\n        LOG_DEBUG(`Ack received: lastAckedMsgId=${id}, numAckedMsgs=${numAcked}, numUnackedMsgs=${unackedList.length}`);\n        for (let i = 0; i < numAcked; ++i) {\n          this._publisher.emit(MessagePublisherEventName.ACKNOWLEDGED_MESSAGE, reportAcked[i]);\n        }\n      } else {\n        const lastAckedMessage = reportAcked[numAcked - 1];\n        LOG_DEBUG(`Acking single message with ID ${lastAckedMessage.getGuaranteedMessageId()} from router ack on ${id}`);\n        this._publisher.emit(MessagePublisherEventName.ACKNOWLEDGED_MESSAGE, lastAckedMessage);\n      }\n    }\n\n    // Terminating NACK?\n    if (reportNacked) {\n      LOG_DEBUG(`Nacking single message with ID ${reportNacked.getGuaranteedMessageId()} from router ack on ${id}`);\n      this._publisher.emit(MessagePublisherEventName.REJECTED_MESSAGE, reportNacked, ctrlMessage);\n    }\n\n    LOG_DEBUG('Unacked messages remaining: ', unackedList.length);\n\n    if (unackedList.length) {\n      // There are more messages to be acked. Reset the ack timer.\n      this._resetAckTimer();\n    } else {\n      this._clearAckTimer();\n    }\n    //\n    // send can-send to applicatino if necessary.\n    this._maybeEmitCanSend();\n  }\n\n  _maybeEmitCanSend() {\n    const { LOG_TRACE } = this.logger;\n    if (!this._notifiedWindowClosed) return;\n    if (this._sendWindow === 0) {\n      // Should log this since it is called AFTER the state change\n      LOG_TRACE('Suppressing CAN_SEND with zero window available');\n      return;\n    }\n    this._notifiedWindowClosed = false; // Set before emitting in case we re-enter\n    this._publisher.emit(MessagePublisherEventName.CAN_SEND);\n  }\n\n  _resendFromUnacked() {\n    const { LOG_ERROR, LOG_INFO, LOG_DEBUG } = this.logger;\n    // We choose to start the ack timer after the message resend. The resend could\n    // take longer than the ack timeout in poor conditions.\n    //\n    // If any message is successfully resent, we need to restart the ack timer,\n    // even if we are throwing.\n    const list = this._unackedList;\n    let resendIndex = list.indexOf(this._firstUnackedToSend);\n    if (resendIndex === -1) {\n      // first Unacked may be null if all have been resent alreadygrunt -\n      // in which case the list  should be empty\n      if (this._firstUnackedToSend) {\n        LOG_ERROR(`Could not find first Unacked Messages in unacked message list: msgId = ${this._firstUnackedToSend.getGuaranteedMessageId}`);\n      }\n      if (list.length === 0) {\n        // Nothing to resend: return to DataXfer\n        LOG_DEBUG(`Nothing to resend: ${this._messageIds.toString()}`);\n        this.processEvent(\n          new PublisherFSMEvent({ name: PublisherFSMEventNames.RESEND_COMPLETE })\n        );\n      }\n      return;\n    }\n    LOG_DEBUG(`Resending unacked messages from ${resendIndex} to ${list.length - 1}: `,\n              list.map(m => m.getGuaranteedMessageId().toString()));\n    while (resendIndex < list.length) {\n      if (list[resendIndex].getPublisherId() !== this._publisher.publisherId) {\n        LOG_ERROR(`Resending on invalid publisherId '${list[resendIndex].getPublisherId()}'when it should be '${this._publisher.publisherId}'`);\n      }\n      const returnCode = this._sessionInterface.sendData(list[resendIndex]);\n      if (returnCode === TransportReturnCode.NO_SPACE) {\n        // the starting point when we get the CAN_SEND from the transport\n        this._firstUnackedToSend = list[resendIndex];\n        LOG_INFO('Publisher sendMessage blocked due to insufficient space, wait for CAN_SEND');\n        this.processEvent(\n          new PublisherFSMEvent({ name: PublisherFSMEventNames.TRANSPORT_FULL }));\n        return;\n      }\n      if (returnCode !== TransportReturnCode.OK) {\n        // session-FSM is already processing the error\n        return;\n      }\n      // The message has successfullly been sent once. Set the redelivered flag in case we need to\n      // resend it later\n      list[resendIndex].setRedelivered(true);\n      resendIndex++;\n      this._startAckTimer();\n    }\n    // Resend successful: return to DataXfer\n    LOG_DEBUG(`Resend complete: ${this._messageIds.toString()}`);\n    this.processEvent(\n      new PublisherFSMEvent({ name: PublisherFSMEventNames.RESEND_COMPLETE })\n    );\n  }\n\n  _resetConnectedInfo(failover = false) {\n    const { LOG_DEBUG } = this.logger;\n    LOG_DEBUG('Resetting connected flow info');\n\n    if (this._ackTimer) this._clearAckTimer();\n\n    Object.assign(this, {\n      _messageIds: new MessageIds(),\n    });\n\n    Object.assign(this._publisher, {\n      publisherId: undefined,\n      flowId:      undefined,\n      flowName:    null,\n    });\n\n    if (failover) {\n      this._connectReason = ConnectReason.FAILOVER;\n    } else {\n      // Full reset\n      this._unackedList = [];\n      this._connectReason = ConnectReason.INIT;\n    }\n  }\n\n  _clearAckTimer() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE(`Clear ack timer ${this._ackTimer ? this._ackTimer : 'undefined or null or zero'}`);\n    if (!this._ackTimer) return;\n    clearTimeout(this._ackTimer);\n    this._ackTimer = null;\n  }\n\n  _emitStateEvents() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Emitting deferred state events');\n    while (this._stateEvents.length) {\n      const pair = this._stateEvents.shift();\n      const state = pair[0];\n      const event = pair[1];\n      // If the state requesting this event is still active...\n      if (this.getActiveState(state.getName())) {\n        // then do its action\n        event.apply(state);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  _handleAckTimeout() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Ack Timeout');\n    this._ackTimer = null;\n    this._publisher.incStat(StatType.TX_ACK_TIMEOUT);\n    this.processEvent(new PublisherFSMEvent({ name: PublisherFSMEventNames.ACK_TIMEOUT }));\n  }\n\n  /**\n   * If the remote flow changes, any remote state applied to the unacked messages needs to\n   * be reapplied.\n   *\n   * @param {solace.Message} message The message to renumber.\n   * @private\n   */\n  _renumber(message) {\n    const messageIds = this._messageIds;\n    const current = messageIds.next;\n    message.setGuaranteedPreviousMessageId(messageIds.lastSent);\n    message.setGuaranteedMessageId(current);\n\n    const publisher = this._publisher;\n    message.setFlowId(publisher.flowId);\n    message.setPublisherId(publisher.publisherId);\n  }\n\n  _cloneNumbers(fromMsg, toMsg) {\n    toMsg.setGuaranteedPreviousMessageId(fromMsg.getGuaranteedPreviousMessageId());\n    toMsg.setGuaranteedMessageId(fromMsg.getGuaranteedMessageId());\n    toMsg.setFlowId(fromMsg.getFlowId());\n    toMsg.setPublisherId(fromMsg.getPublisherId());\n  }\n\n  _resetAckTimer() {\n    this._clearAckTimer();\n    this._startAckTimer();\n  }\n\n  _scheduleStateEvents(state, event) {\n    this._stateEvents.push([state, event]);\n    this._setPostEventAction(() => this._emitStateEvents(), 'Emit state events');\n  }\n\n  _setPostEventAction(action, desc = 'No action') {\n    const { LOG_DEBUG, LOG_WARN } = this.logger;\n    if (this._postEventAction && this._postEventAction.desc === desc) {\n      LOG_DEBUG('Keeping same post event action');\n      return;\n    }\n\n    if (this._postEventAction && this._postEventAction.desc) {\n      LOG_WARN(`Replacing post event action ${this._postEventAction.desc} with ${desc}`);\n    }\n    this._postEventAction = { action: action || (() => {}), desc };\n    this.setPostEventAction(() => {\n      this._postEventAction.action();\n      this._postEventAction = null;\n    });\n  }\n\n  /**\n   * @private\n   */\n  _startAckTimer() {\n    // const { LOG_TRACE } = this.logger;\n    // LOG_TRACE(`Start ack timer ${this._ackTimer ? this._ackTimer : 'undefined or null or zero'\n    //           }: ${this._acknowledgeTimeoutInMsecs} ms`);\n    if (this._ackTimer) return;\n    this._ackTimer = setTimeout(() => this._handleAckTimeout(),\n                                this._acknowledgeTimeoutInMsecs);\n  }\n\n}\n\nmodule.exports.PublisherFSM = PublisherFSM;\n","const ParseSingleElementLib = require('./parse-single-element');\nconst { ParseFieldHeader } = require('./parse-field-header');\nconst { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\nconst { SDTStreamContainer } = require('../sdt-stream-container');\n\nconst ParseStream = {};\nParseStream.parseStreamAt = function parseStreamAt(dataBuf, offset, datalen) {\n  const streamObj = new SDTStreamContainer();\n  let pos = offset;\n  while (pos < offset + datalen) {\n    const valueFieldHeader = ParseFieldHeader.parseFieldHeader(dataBuf, pos);\n    const valueField = ParseSingleElementLib.ParseSingleElement.parseSingleElement(dataBuf, pos);\n    pos += valueFieldHeader[1]; // declared field length\n    if (valueField) {\n      streamObj.addField(valueField);\n    }\n  }\n  return SDTField.create(SDTFieldType.STREAM, streamObj);\n};\n\nmodule.exports.ParseStream = ParseStream;\n","const { EventEmitter } = require('solclient-events');\nconst { LogFormatter } = require('solclient-log');\nconst { MessageConsumerEventName } = require('./message-consumer-event-names');\nconst { QueueBrowserEventName } = require('./queue-browser-event-names');\n\nfunction formatEventName(eventName) {\n  return `QueueBrowserEventName.${QueueBrowserEventName.describe(eventName)}`;\n}\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * A Queue Browser is created by calling {@link solace.Session#createQueueBrowser}.\n *\n * A Queue Browser allows client applications to look at messages spooled on Endpoints\n * without removing them. Messages are browsed from oldest to newest.\n * After being browsed, messages are still available for consumption over normal flows.\n * However, it is possible to selectively remove messages from the persistent store of an Endpoint.\n * In this case, these removed messages will no longer be available for consumption.\n\n * Note: If browsing a queue with an active consumer, no guarantee is made that the browser will\n * receive all messages published to the queue. The consumer can receive and acknowledge messages\n * before they are delivered to the browser.\n *\n * One typical application is to use Browsers to allow message bus administrators to remove stuck\n * Guaranteed messages from an Endpoint without having to modify or disrupt existing applications.\n * A message can get stuck if:\n *\n *  1) It has been received by an application, but for some reason, that application has failed to\n *     acknowledge it.\n *  2) All active message selectors have failed to match this particular message and therefore the\n *     message bus has not delivered it to any client yet. The current release only supports\n *     browsing Endpoints of type Queue.\n *\n * Note that the delivery restrictions imposed by the queues Access type\n * (exclusive or non-exclusive), do not apply when browsing messages with a Browser.\n *\n * Browser characteristics and behavior are defined by {@link solace.QueueBrowserProperties}.\n * The properties can also be supplied as a simple key-value {Object}. The queue descriptor,\n * {@link solace.QueueBrowserProperties#queueDescriptor} must be specified to identify the\n * Guaranteed Message Queue on the Solace Message Router.\n *\n * The Browser is an EventEmitter, and will emit events to which the application may choose to\n * subscribe, such as the connection to the Solace Message Router going up or down.\n *\n * If a registered listener for an emitted event throws an exception, this is caught and emitted as\n * an 'error'.\n *\n * @fires solace.QueueBrowserEventName#CONNECT_FAILED_ERROR\n * @fires solace.QueueBrowserEventName#DISPOSED\n * @fires solace.QueueBrowserEventName#DOWN\n * @fires solace.QueueBrowserEventName#DOWN_ERROR\n * @fires solace.QueueBrowserEventName#GM_DISABLED\n * @fires solace.QueueBrowserEventName#MESSAGE\n * @fires solace.QueueBrowserEventName#UP\n *\n * @hideconstructor\n * @memberof solace\n */\nclass QueueBrowser extends EventEmitter {\n  constructor(messageConsumer) {\n    super({\n      direct: QueueBrowserEventName.MESSAGE,\n      emits:  QueueBrowserEventName.values,\n      formatEventName,\n    });\n\n    this._messageConsumer = messageConsumer;\n    this.logger = new LogFormatter((...args) =>\n      ['[queue-browser]', ...args]);\n\n    this._setupEventListers();\n  }\n\n  _setupEventListers() {\n    // Listen to message consumer events, redispatch as queue browser events\n    this._messageConsumer.on(MessageConsumerEventName.UP, this._onConsumerUp.bind(this));\n\n    this._messageConsumer.on(MessageConsumerEventName.CONNECT_FAILED_ERROR,\n                             this._onConsumerConnectFailed.bind(this));\n\n    this._messageConsumer.on(MessageConsumerEventName.DOWN, this._onConsumerDown.bind(this));\n\n    this._messageConsumer.on(MessageConsumerEventName.DOWN_ERROR,\n                             this._onConsumerDownError.bind(this));\n\n    this._messageConsumer.on(MessageConsumerEventName.MESSAGE, this._onConsumerMessage.bind(this));\n\n    this._messageConsumer.on(MessageConsumerEventName.DISPOSED,\n                             this._onConsumerDisposed.bind(this));\n\n    this._messageConsumer.on(MessageConsumerEventName.GM_DISABLED,\n                             this._onConsumerGMDisabled.bind(this));\n  }\n\n  _onConsumerMessage(event) {\n    this.emit(QueueBrowserEventName.MESSAGE, event);\n  }\n\n  _onConsumerUp(event) {\n    this.emit(QueueBrowserEventName.UP, event);\n  }\n\n  _onConsumerConnectFailed(event) {\n    this.emit(QueueBrowserEventName.CONNECT_FAILED_ERROR, event);\n  }\n\n  _onConsumerDown(event) {\n    this.emit(QueueBrowserEventName.DOWN, event);\n  }\n\n  _onConsumerDownError(event) {\n    this.emit(QueueBrowserEventName.DOWN_ERROR, event);\n  }\n\n  _onConsumerDisposed(event) {\n    this.emit(QueueBrowserEventName.DISPOSED, event);\n  }\n\n  _onConsumerGMDisabled(event) {\n    this.emit(QueueBrowserEventName.GM_DISABLED, event);\n  }\n\n  /**\n   * Connects the queue browser immediately. The application should add event listeners (see\n   * {@link solace.QueueBrowserEventName}). If there is no listener added for\n   * {@link solace.QueueBrowserEventName#event:MESSAGE} then up to a window\n   * {@link solace.QueueBrowserProperties.windowSize} of messages can be queued internally.\n   * before calling this method.\n   *\n   * @throws {solace.OperationError}\n   *  * if consumer is not supported by router for this client.\n   *  subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   *\n   */\n  connect() {\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n    try {\n      LOG_DEBUG('Connecting the queue browser\\'s message consumer');\n      this._messageConsumer.connect();\n    } catch (error) {\n      LOG_ERROR(error.toString());\n      throw error;\n    }\n  }\n\n  /**\n   * Initiates an orderly disconnection of the queue browser. The API will send an unbind request.\n   * Any messages subsequently received are discarded silently.\n   * When the unbind message is acknowledged, the application\n   * receives a {@link solace.QueueBrowserEventName#event:DOWN} event if it has set a listener\n   * for that event.\n   *\n   * @throws {solace.OperationError}\n   * * if the Message Consumer is disconnected.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  disconnect() {\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n\n    try {\n      LOG_DEBUG('Disconnecting the queue browser\\'s message consumer');\n      this._messageConsumer.disconnect();\n    } catch (error) {\n      LOG_ERROR(error.toString());\n      throw error;\n    }\n  }\n\n  /**\n   * Begins delivery of messages to this queue browser. This method opens the protocol window\n   * to the Solace Message Router so further messages can be received.\n   *\n   * A newly created queue browser is in started state.\n   *\n   * If the queue browser was already started, this method has no effect.\n   *\n   * A consumer is stopped by calling {@link solace.QueueBrowser.stop}\n   *\n   * @throws {solace.OperationError}\n   * * if the Queue BrowserMessage Consumer is disposed.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   * * if the Message Consumer is disconnected.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  start() {\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n    try {\n      LOG_DEBUG('Starting the queue browser\\'s message consumer');\n      this._messageConsumer.start();\n    } catch (error) {\n      LOG_ERROR(error.toString());\n      throw error;\n    }\n  }\n\n  /**\n   * Stops messages from being delivered to this queue browser from the Solace Message Router.\n   * Messages may continue to be prefetched by the API and queued internally\n   * until {@link solace.QueueBrowser#start} is called.\n   *\n   * If the queue browser was already stopped, this method has no effect.\n   *\n   * @throws {solace.OperationError}\n   * * if the Queue Browser is disconnected.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  stop() {\n    const { LOG_DEBUG, LOG_ERROR } = this.logger;\n    try {\n      LOG_DEBUG('Stopping the queue browser\\'s message consumer');\n      this._messageConsumer.stop();\n    } catch (error) {\n      LOG_ERROR(error.toString());\n      throw error;\n    }\n  }\n\n  /**\n   * Removes a message from the queue by acknowledging it.\n   *\n   * The {@link solace.QueueBrowser} does not automatically acknowledge messages.\n   * once they have been received.\n   *\n   * The API does not send acknowledgments immediately. It stores the state for\n   * acknowledged messages internally and acknowledges messages, in bulk, when a\n   * threshold or timer is reached.\n   *\n   * @param {Message} message The message to remove\n   */\n  removeMessageFromQueue(message) {\n    // ack the message to delete it\n    this._messageConsumer.applicationAck(message._guaranteedMsgId);\n    message._acked = true;\n  }\n\n}\n\nmodule.exports.QueueBrowser = QueueBrowser;\n","'use strict';\n\nconst BINARY_TYPES = ['nodebuffer', 'arraybuffer', 'fragments'];\nconst hasBlob = typeof Blob !== 'undefined';\n\nif (hasBlob) BINARY_TYPES.push('blob');\n\nmodule.exports = {\n  BINARY_TYPES,\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  hasBlob,\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n","const { EventEmitter } = require('solclient-events');\nconst { StatType } = require('./stat-types');\n\n/**\n * @private\n */\nclass Stats extends EventEmitter {\n  constructor(parent) {\n    super();\n\n    this._parent = parent;\n    this._statsMap = [];\n    StatType.values.forEach((value) => {\n      this._statsMap[value] = 0;\n    });\n  }\n\n  resetStats() {\n    this.emit('reset');\n    // The stat types are sequential, so .fill(0) would work, but the API design\n    // doesn't really guarantee this so overwriting every existing index is safer.\n    this._statsMap = this._statsMap.map(() => 0);\n  }\n\n  incStat(statType, value = 1) {\n    // should we validate statType?\n    this._statsMap[statType] += value;\n    if (this._parent) {\n      this._parent.incStat(statType, value);\n    }\n  }\n\n  getStat(statType) {\n    return this._statsMap[statType];\n  }\n\n}\n\nmodule.exports.Stats = Stats;\n","const { SolaceError } = require('solclient-error');\n\n/**\n * @classdesc\n * An error thrown when an error occurs on the transport session.\n * <p>\n * Applications are not expected to instantiate this type.\n *\n * @memberof solace\n * @private\n */\nclass TransportError extends SolaceError {\n  /**\n   * Creates an instance of TransportError.\n   * @constructor\n   * @param {String} message The message associated with this error\n   * @param {ErrorSubcode} subcode The subcode for this error\n   * @private\n   */\n  constructor(message, subcode) {\n    super('TransportError', message);\n    this.subcode = subcode;\n  }\n\n  toString() {\n    return `${super.toString()}, subcode=${this.subcode}`;\n  }\n}\n\nmodule.exports.TransportError = TransportError;\n","const { CacheCBInfo } = require('./lib/cache-cb-info');\nconst { CacheContext } = require('./lib/cache-context');\nconst { CacheLiveDataAction } = require('./lib/cache-live-data-actions');\nconst { CacheRequest } = require('./lib/cache-request');\nconst { CacheRequestResult } = require('./lib/cache-request-result');\nconst { CacheReturnCode } = require('./lib/cache-return-codes');\nconst { CacheReturnSubcode } = require('./lib/cache-return-subcodes');\nconst { CacheSession } = require('./lib/cache-session');\nconst { CacheSessionProperties } = require('./lib/cache-session-properties');\n\nmodule.exports.CacheCBInfo = CacheCBInfo;\nmodule.exports.CACHE_REQUEST_PREFIX = CacheContext.CACHE_REQUEST_PREFIX;\nmodule.exports.CacheLiveDataAction = CacheLiveDataAction;\nmodule.exports.CacheRequestResult = CacheRequestResult;\nmodule.exports.CacheReturnCode = CacheReturnCode;\nmodule.exports.CacheReturnSubcode = CacheReturnSubcode;\nmodule.exports.CacheRequest = CacheRequest;\nmodule.exports.CacheSession = CacheSession;\nmodule.exports.CacheSessionProperties = CacheSessionProperties;\n\n","const { ConsoleLogImpl } = require('./lib/console-log-impl');\nconst { GlobalBinding } = require('./lib/global-binding');\nconst { LogImpl } = require('./lib/log-impl');\nconst { LogLevel } = require('./lib/log-levels');\n\nconst { Parameter } = require('solclient-validate');\nconst { SolclientFactory } = require('solclient-factory');\n\nconst {\n  isEnumMember,\n  isFunction,\n} = Parameter;\n\nconst {\n  getImpl,\n  getLogLevel,\n  setImpl,\n  setLogLevel,\n} = GlobalBinding;\n\nconst forwarder = {};\nfunction buildLogForwarder() {\n  Object.assign(forwarder, {\n    trace(...args) {\n      const impl = getImpl();\n      if (impl && impl.trace && getLogLevel() >= LogLevel.TRACE) {\n        impl.trace.apply(null, ['solclientjs: ', ...args]);\n      }\n    },\n\n    debug(...args) {\n      const impl = getImpl();\n      if (impl && impl.debug && getLogLevel() >= LogLevel.DEBUG) {\n        impl.debug.apply(null, ['solclientjs: ', ...args]);\n      }\n    },\n\n    info(...args) {\n      const impl = getImpl();\n      if (impl && impl.info && getLogLevel() >= LogLevel.INFO) {\n        impl.info.apply(null, ['solclientjs: ', ...args]);\n      }\n    },\n\n    warn(...args) {\n      const impl = getImpl();\n      if (impl && impl.warn && getLogLevel() >= LogLevel.WARN) {\n        impl.warn.apply(null, ['solclientjs: ', ...args]);\n      }\n    },\n\n    error(...args) {\n      const impl = getImpl();\n      if (impl && impl.error && getLogLevel() >= LogLevel.ERROR) {\n        impl.error.apply(null, ['solclientjs: ', ...args]);\n      }\n    },\n\n    fatal(...args) {\n      const impl = getImpl();\n      if (impl && impl.fatal) {\n        impl.fatal.apply(null, ['solclientjs: ', ...args]);\n      }\n    },\n  });\n}\nbuildLogForwarder(); // stripped by production build\n\nfunction addGlobalFuncs(source, target) {\n  Object.keys(forwarder).forEach((k) => {\n    target[`LOG_${k.toUpperCase()}`] = source[k];\n  });\n}\n\nclass LogFormatter {\n  constructor(formatter) {\n    this._formatter = (() => {\n      if (typeof formatter === 'function') return formatter;\n      if (typeof formatter === 'string') return function prepend(...args) { return [formatter, ...args]; };\n      if (!formatter) return function passthrough(...args) { return [...args]; };\n      return formatter;\n    })();\n    const self = this;\n    Object.keys(forwarder).forEach((key) => {\n      this[key] = function forward(...args) {\n        return forwarder[key].apply(null, self._formatter(...args));\n      };\n    });\n    addGlobalFuncs(this, this);\n  }\n\n  get formatter() {\n    return this._formatter;\n  }\n  set formatter(func) {\n    this._formatter = func;\n  }\n\n  wrap(genericFunction, targetSelf) {\n    const self = this;\n    return function genericLogWrapper(...args) {\n      return genericFunction.apply(targetSelf, self._formatter(...args));\n    };\n  }\n\n}\n\n/**\n * Gets the current log level, which was set by {@link solace.SolclientFactory.init} or a\n * subsequent call to {@link solace.SolclientFactory.setLogLevel}.\n *\n * @returns {solace.LogLevel} The current log level.\n */\nSolclientFactory.getLogLevel = () => getLogLevel();\n\n  /**\n   * This method changes the current log level from the level set when\n   * {@link solace.SolclientFactory.init} was called.\n   *\n   * @param {solace.LogLevel} newLevel The new log level to set.\n   * @throws {solace.OperationError} Invalid log level\n   */\nSolclientFactory.setLogLevel = (newLevel) => {\n  isEnumMember('logLevel', newLevel, LogLevel);\n  setLogLevel(newLevel);\n};\n\nSolclientFactory.addInitializer((props) => {\n  setLogLevel(props.logLevel);\n\n  const logger = props.logger || getImpl() || new ConsoleLogImpl();\n  // Validate that the supplied log implementation is a superset of LogImpl\n  Object.keys(new LogImpl()).forEach(key => isFunction(`logger.${key}`, logger[key]));\n\n  setImpl(logger);\n});\n\naddGlobalFuncs(forwarder, module.exports);\nmodule.exports.LogImpl = LogImpl;\nmodule.exports.LogLevel = LogLevel;\nmodule.exports.Binding = GlobalBinding;\nmodule.exports.ConsoleLogImpl = ConsoleLogImpl;\nGlobalBinding.setImpl(new ConsoleLogImpl());\nmodule.exports.LogFormatter = LogFormatter;\n","const DebugLib = require('solclient-debug');\nconst SMFLib = require('solclient-smf');\nconst { Check } = require('solclient-validate');\nconst { Convert, Hex } = require('solclient-convert');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { HTTPConnection } = require('./http-connection');\nconst { LogFormatter } = require('solclient-log');\nconst { SMFClient } = require('../../smf-client');\nconst { TransportError } = require('../../transport-error');\nconst { TransportProtocol } = require('../../transport-protocols');\nconst { TransportReturnCode } = require('../../transport-return-codes');\nconst { TransportSessionEvent } = require('../../transport-session-event');\nconst { TransportSessionEventCode } = require('../../transport-session-event-codes');\nconst { TransportSessionState } = require('../../transport-session-states');\nconst { WebTransportSessionBase } = require('../web-transport-session-base');\n\nconst { int32ToStr, strToByteArray, strToHexArray } = Convert;\nconst { formatHexString } = Hex;\n\nconst {\n  LOG_TRACE,\n  LOG_DEBUG,\n  LOG_ERROR,\n  LOG_INFO,\n} = new LogFormatter('[http-transport-session]');\n\n/**\n * @private\n * @namespace Values for tracking current state of incoming streaming data\n */\nconst PacketReadState = {\n  READING_HEADER: 0,\n  STREAMING:      1,\n};\n\n// eslint-disable-next-line global-require\nconst BufferImpl = require('buffer').Buffer;\n\n/**\n * @private\n */\nconst MSIE_TRANSPORT_PADDING = 257;\n\nfunction adaptURL(url) {\n  const v = url.match(/(ws|http)(s?:\\/\\/.+)/);\n  return `http${v[2]}`;\n}\n\n/** ===========================================================================\n * HTTPTransportSession :\n *\n * This contains all data and code required to maintain HTTP transport sessions\n * with Solace routers\n * ============================================================================\n * @extends WebTransportSessionBase\n * @private\n */\nclass HTTPTransportSession extends WebTransportSessionBase {\n  constructor(baseUrl, eventCB, client, props) {\n    // Our internal data format (for now) is binary string, so we wrap the callback\n    // in a function that does the required conversion to ArrayBuffer.\n    super(baseUrl,\n          eventCB,\n          client,\n          props);\n\n    // const self = this;\n    // logger.formatter = function formatter(...args) {\n    //   return [self.sessionIdHex, ...args];\n    // };\n\n    // Set to true if we have the data token that we need for sending data to the router\n    this._haveToken = true;\n\n    // Maximum payload chunk size in web transport\n    this._confMaxWebPayload = props.maxWebPayload;\n    this._maxPayloadBytes = 0;\n\n    // Timer that will keep track of the destroy time\n    this._destroyTimer = null;\n    this._destroyTimeout = props.connectTimeoutInMsecs;\n\n    // The URL used for create messages\n    this._createUrl = adaptURL(baseUrl);\n\n    // The URL used for all other messages - it will have the router tag appended\n    // after the session has been created\n    this._routerUrl = this._createUrl;\n\n    // SMF client (instantiated after session is created)\n    this._rxChannelClient = null;\n    // Send data connection (instantiated after session is created)\n    this._httpSendConn = null;\n\n    // Receive data connection (instantiated after session is created)\n    this._httpReceiveConn = null;\n\n    // Data Token SMF header - this is preformatted for performance\n    // It will be set after session is created\n    this._smfDataTokenTSHeader = null;\n\n    // Router Tag - a string that will be added to HTTP request URLs\n    this._routerTag = '';\n\n    // Session ID - 8-byte identifier that will associate this client\n    // with client resources on the router\n    this._sid = null;\n\n    if (props.transportProtocol === null || props.transportProtocol === undefined) {\n      throw new OperationError('transportProtocol is not set', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n\n    this._transportProtocol = props.transportProtocol;\n    this._useBinaryTransport = false;\n    this._useStreamingTransport = false;\n    this._streamingTransportPadding = 0;\n\n    this._useBinaryTransport = (props.transportProtocol !== TransportProtocol.HTTP_BASE64);\n    this._useStreamingTransport = (props.transportProtocol ===\n                                   TransportProtocol.HTTP_BINARY_STREAMING);\n\n    // extra state for STREAMING transport\n    this._incomingBuffer = '';\n    this._packetReadState = PacketReadState.READING_HEADER;\n\n    const agent = navigator.userAgent || '';\n    if (agent.match(/trident/i) || agent.match(/msie/i)) {\n      this._streamingTransportPadding = MSIE_TRANSPORT_PADDING;\n    }\n\n    if (props.transportContentType === null || props.transportContentType === undefined) {\n      throw new OperationError('transportContentType is not set', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    this._contentType = props.transportContentType;\n  }\n\n  /**\n   * @override\n   */\n  connectTimerExpiry() {\n    LOG_INFO('HTTP transport connect timeout');\n    this.destroyCleanup('HTTP transport connect timeout', ErrorSubcode.TIMEOUT);\n  }\n\n  get sessionIdHex() {\n    return (this._sid) ? formatHexString(this._sid) : '';\n  }\n\n  updateMaxWebPayload() {\n    // 22 Bytes of TransportSMF wrapping overhead\n    const trLessEncapSMF = this._confMaxWebPayload - 22;\n    // Base64 has a 4:3 expansion\n    this._maxPayloadBytes = this._useBinaryTransport\n      ? trLessEncapSMF\n      : Math.floor(trLessEncapSMF * 0.75);\n  }\n\n  /**\n   * Connect transport session to router\n   * @returns {TransportReturnCode} The result of the operation\n   */\n  connect() {\n    // Check that we we are in an acceptable state for connection\n    if (this._state !== TransportSessionState.DOWN) {\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n\n    return this.connectInternal();\n  }\n\n  connectInternal() {\n    // Create the XHR to talk to the router\n    this._connError = null;\n    try {\n      this._createConn = new HTTPConnection(this._createUrl,\n                                            !(this._useBinaryTransport),\n                                            false,\n                                            (rc, data) => this.handleCreateResponse(rc, data),\n                                            (rc, data) => this.handleCreateConnFailure(rc, data),\n                                            this._contentType);\n    } catch (e) {\n      LOG_INFO(`Failed to create connection to router: ${e.message}`);\n      this._connError = e;\n      return TransportReturnCode.CONNECTION_ERROR;\n    }\n    if (Check.nothing(this._createConn)) {\n      LOG_INFO('Failed to create connection to router');\n      return TransportReturnCode.CONNECTION_ERROR;\n    }\n\n    // Get an SMF transport session create message\n    const createMsg = SMFLib.Codec.Transport.genTsCreateHeader();\n\n    if (this._state === TransportSessionState.WAITING_FOR_CREATE) {\n      // already connecting (this is likely a retry with Base64 encoding)\n      LOG_DEBUG('Connect attempt while in WAITING_FOR_CREATE (retry)');\n    } else {\n      this.createConnectTimeout();\n      // Set the current state\n      this._state = TransportSessionState.WAITING_FOR_CREATE;\n    }\n\n    // Send the create message to the router.  When the response is received, the\n    // handleCreateResponse method will be called\n    try {\n      this._createConn.send(createMsg);\n    } catch (connError) {\n      LOG_INFO(`Error connecting: ${connError.message}`);\n      LOG_TRACE('Error details:', connError.stack || connError);\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      this.cancelConnectTimeout();\n      if (connError instanceof TransportError) {\n        this._connError = connError;\n      } else {\n        this._connError = new TransportError(\n          `Could not create HTTP transport session: ${connError.message}`,\n          connError.subcode || ErrorSubcode.CONNECTION_ERROR);\n      }\n      return TransportReturnCode.CONNECTION_ERROR;\n    }\n\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Destroy transport session to router\n   * @param {String} msg The message associated with the operation\n   * @param {ErrorSubcode} subcode The subcode associated with the operation\n   * @returns {TransportReturnCode} The result of the operation\n   */\n  destroy(msg, subcode) {\n    LOG_TRACE(`Destroy transport session when in state ${this._state}`);\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY ||\n        this._state === TransportSessionState.DOWN) {\n      // Nothing to do\n      return TransportReturnCode.OK;\n    }\n\n    if (this._state === TransportSessionState.CONNECTION_FAILED ||\n        this._state === TransportSessionState.WAITING_FOR_CREATE) {\n      // The connections are in an unreliable state - we will just\n      // kill our local object and let the router clean itself up with its inactivity timer\n      LOG_INFO('The connection is in unreliable state, close transport');\n      this.destroyCleanup(msg, subcode, true);\n      return TransportReturnCode.OK;\n    }\n\n    LOG_INFO('Destroy transport session immediately');\n    // Set the current state\n    this._state = TransportSessionState.WAITING_FOR_DESTROY;\n\n    // Abort any current requests for this session\n    if (this._httpSendConn !== null) {\n      LOG_INFO('Destroy transport session: abort sendConn');\n      this._httpSendConn.abort();\n    }\n    if (this._httpReceiveConn !== null) {\n      LOG_INFO('Destroy transport session: abort receiveConn');\n      this._httpReceiveConn.abort();\n    }\n\n    // Start a timer\n    this._destroyTimer = setTimeout(() => {\n      this.destroyTimerExpiry();\n    }, this._destroyTimeout);\n\n    // Send the destroy message over new HTTPConnection to the router so that the async abort\n    // can properly finish in the old _httpSendConn.\n    // When the response is received, the handleDestroyResponse method will be called.\n    this._httpSendConn = new HTTPConnection(\n        this._routerUrl,\n        !(this._useBinaryTransport), false,\n        (rc, data) => this.handleRxDataToken(rc, data), // RxData callback\n        (rc, data) => this.handleSendFailure(rc, data), // connection close or error callback\n        this._contentType,\n        true);\n\n    // Get an SMF transport session destroy message\n    const destroyMsg = SMFLib.Codec.Transport.genTsDestroyHeader(this._sid);\n\n    LOG_TRACE(`destroy message: ${strToHexArray(destroyMsg)}`);\n    this._httpSendConn.send(destroyMsg);\n\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Send data over the connection - this requires a send token\n   * @param {String} dataIn The data to send\n   * @param {Boolean} [forceAllowEnqueue=false] If `true`, do not fail due to out of space\n   * @returns {TransportReturnCode} The result of the operation\n   */\n  send(dataIn, forceAllowEnqueue = false) {\n    let data = dataIn;\n    // LOG_TRACE(`HTTPTransportSession:send ${data.length}, tx_queued:${this._queuedDataSize}`);\n    if (this._state !== TransportSessionState.SESSION_UP) {\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n\n    // Check to see if we already have queued data\n    if ((this._queuedData.length > 0) || (!this._haveToken)) {\n      return this.enqueueData(data, forceAllowEnqueue);\n    }\n\n    // Check if we need to chop up the payload\n    let remainder = null;\n    if (data.length > this._maxPayloadBytes) {\n      remainder = data.substr(this._maxPayloadBytes);\n      data = data.substr(0, this._maxPayloadBytes);\n\n      // If no space for remainder, return FAIL without sending anything.\n      if (!this.allowEnqueue(remainder.length)) {\n        return this.enqueueFailNoSpace();\n      }\n\n    // LOG_DEBUG(\"$$ send dataChunk:\" + data.length + \", remainderChunk:\" + remainder.length);\n    }\n\n    // We have the token, so send the data\n    this._haveToken = false;\n\n    const transportPacketLen = (this._smfDataTSHeaderParts[0].length + 4 +\n                                this._smfDataTSHeaderParts[1].length + data.length);\n\n    this._httpSendConn.send(this._smfDataTSHeaderParts[0] +\n                            int32ToStr(transportPacketLen) +\n                            this._smfDataTSHeaderParts[1] +\n                            data);\n    this._clientstats.bytesWritten += data.length;\n\n    if (remainder) {\n      // The message was partially sent. The message written count will be incremented\n      // when its last bytes go out.\n      return this.enqueueData(remainder, null);\n    }\n\n    // The whole message was sent.\n    this._clientstats.msgWritten++;\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Push data onto the pending send queue as long as it doesn't violate\n   * the max stored message size\n   * @param {String} data The data to enqueue\n   * @param {Boolean} [forceAllowEnqueue=false] If `true`, don't fail due to no space.\n   * @returns {TransportReturnCode} The result of the operation.\n   */\n  enqueueData(data, forceAllowEnqueue = false) {\n    const dataLen = data.length;\n\n    // LOG_DEBUG(\"enqueueing data: \" + data.length + \", queue depth: \" + this._queuedDataSize);\n    if (forceAllowEnqueue || this.allowEnqueue(dataLen)) {\n      this._queuedDataSize += dataLen;\n      this._queuedData.push(data);\n    } else {\n      return this.enqueueFailNoSpace();\n    }\n\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Set the data in the preformatted headers.  The headers are set up this way\n   * for performance reasons\n   * @param {String} sid The session ID to incorporate into the headers\n   */\n  initPreformattedHeaders(sid) {\n    // _smfDataTSHeaderParts is a two entry array - one part before the total length\n    // and the other after.  The total length is not known until actual data is sent\n    this._smfDataTSHeaderParts = SMFLib.Codec.Transport.genTsDataMsgHeaderParts(sid);\n\n    // _smfDataTokenTSHeader is a single header that all data-token messages require\n    if (this._useStreamingTransport) {\n      this._smfDataTokenTSHeader = SMFLib.Codec.Transport.genTsDataStreamTokenMsg(\n        sid,\n        this._streamingTransportPadding);\n    } else {\n      this._smfDataTokenTSHeader = SMFLib.Codec.Transport.genTsDataTokenMsg(sid);\n    }\n  }\n\n  /**\n   * @override\n   */\n  flush(callback) {\n    if (this._queuedDataSize) {\n      this._flushCallback = callback;\n    } else {\n      callback();\n    }\n  }\n\n  /**\n   * Check if there is any data waiting to be sent to the router.\n   * If there is, send it.\n   */\n  sendQueuedData() {\n    if (this._queuedDataSize === 0) {\n      return;\n    }\n    this._haveToken = false;\n    const data = this.getQueuedDataToSend();\n    const transportPacketLen = this._smfDataTSHeaderParts[0].length + 4 +\n                               this._smfDataTSHeaderParts[1].length + data.length;\n\n    this._httpSendConn.send(this._smfDataTSHeaderParts[0] +\n                            int32ToStr(transportPacketLen) +\n                            this._smfDataTSHeaderParts[1] +\n                            data);\n    this._clientstats.bytesWritten += data.length;\n\n\n    if (this._canSendNeeded) {\n      this._canSendNeeded = false;\n      this._eventCB(\n        new TransportSessionEvent(TransportSessionEventCode.CAN_ACCEPT_DATA,\n                                  '',\n                                  null,\n                                  0,\n                                  this._sid));\n    }\n\n    if (this._flushCallback) {\n      const cb = this._flushCallback;\n      this._flushCallback = null;\n      cb();\n    }\n  }\n\n  // Internal Callbacks\n\n  // Called when a create response message has been received\n  handleCreateResponse(tsRc, response) {\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY ||\n        this._state === TransportSessionState.DOWN) {\n      LOG_DEBUG('Received create response on a destroyed transport session, ignore');\n      return;\n    }\n\n    // Was: stop the connect timer. We don't do that in this transport now.\n    // We wait for the login response.\n\n    // We know whether we're using Base64 or not, so update our max payload size.\n    this.updateMaxWebPayload();\n\n    if (tsRc !== TransportReturnCode.OK) {\n      LOG_INFO(`Received create response with return code ${TransportReturnCode.describe(tsRc)}`);\n      if (tsRc === TransportReturnCode.DATA_DECODE_ERROR) {\n        this.destroyCleanup('Received data decode error on create session response', ErrorSubcode.DATA_DECODE_ERROR);\n      } else {\n        this.destroyCleanup('Failed to handle create session response', ErrorSubcode.CONNECTION_ERROR);\n      }\n      return;\n    }\n\n    if (response.length === 0) {\n      return; // null read indicating end of stream\n    }\n\n    // Parse the Transport Session SMF\n    const parsedResponse = SMFLib.Codec.Decode.decodeCompoundMessage(BufferImpl.from(response, 'latin1'), 0);\n    if (!parsedResponse) {\n      LOG_ERROR('Could not parse create response as SMF. Destroying transport');\n      this.destroyCleanup('Failed to parse create response message', ErrorSubcode.CONNECTION_ERROR);\n      return;\n    }\n\n    const smfresponse = parsedResponse.getResponse();\n    if (smfresponse.responseCode !== 200) {\n      this.destroyCleanup(`Transport create request failed (${smfresponse.responseCode}, ${smfresponse.responseString})`,\n                          ErrorSubcode.CONNECTION_ERROR);\n      return;\n    }\n\n    this.cancelConnectTimeout();\n    this._createConn.abort();\n    this._createConn = null;\n    this._state = TransportSessionState.SESSION_UP;\n    this._sid = parsedResponse.sessionId;\n    this._routerTag = parsedResponse.routerTag;\n\n    // Trim any parameters off the create url before using it for the routerUrl\n    this._routerUrl = this._createUrl.replace(/\\?.*/, '');\n    if (this._routerTag !== '') {\n      this._routerUrl = this._routerUrl + this._routerTag;\n    }\n\n    this.initPreformattedHeaders(this._sid);\n    const useBase64 = !this._useBinaryTransport;\n    const useStreaming = this._useStreamingTransport;\n\n    // Create the two connections to the router\n    // By now, getXhrObj() should not throw any exception inside HTTPConnection constructor\n    this._httpSendConn = new HTTPConnection(this._routerUrl, useBase64, false,\n        (rc, data) => this.handleRxDataToken(rc, data), // RxData callback\n        (rc, data) => this.handleSendFailure(rc, data), // connection close or error callback\n        this._contentType);\n    if (this._useStreamingTransport) {\n      // When the transport is HTTP_BINARY_STREAMING the SMF encapsulation\n      // is complete, the SMF header indicates a message length of 0xFFFFFFFF\n      // and after decoding just the header alone the data is passed through\n      // to the session layer, so we must use a simplified SMF parser and a\n      // stateful data callback in that case.\n      this._httpReceiveConn = new HTTPConnection(this._routerUrl, useBase64, useStreaming,\n            (rc, data) => this.handleRxStreaming(rc, data), // RxData Callback\n            (rc, data) => this.handleSendFailure(rc, data), // connection close or error callback\n            this._contentType,\n            true);\n    } else {\n      // Create a SMF client for the Receive Data channel, when http is used.\n      // SMF messages are encapsualated in a solace http-transport which is itself\n      // encapsulated in SMF.  So create an SMF client that will callback with\n      // an smfMessage construct to the HTTPTransportSession.\n      this._rxChannelClient = new SMFClient(\n            rxData => this.handleSmfMessage(rxData),\n            rxError => this.handleSmfParseError(rxError),\n            null);    // we don't have a 'session' for this client. It's just a parser.\n      this._httpReceiveConn = new HTTPConnection(this._routerUrl, useBase64, useStreaming,\n            (rc, data) => this.handleRxData(rc, data), // RxData Callback\n            (rc, data) => this.handleSendFailure(rc, data), // connection close or error callback\n            this._contentType);\n    }\n\n    // Give the router the data token so that it will be able to send data\n    this._httpReceiveConn.send(this._smfDataTokenTSHeader);\n\n    // Send the event to the application letting it know that the session is up\n    this._eventCB(\n      new TransportSessionEvent(TransportSessionEventCode.UP_NOTICE,\n                                smfresponse.responseString,\n                                smfresponse.responseCode,\n                                0,\n                                parsedResponse.sessionId));\n  }\n\n  // Called when receiving a destroy response\n  handleDestroyResponse(response) {\n    LOG_DEBUG('Handle destroy response');\n    // Stop the timer\n    this.cancelDestroyTimeout();\n    const innerResponse = response.getResponse();\n    const responseString = innerResponse ? innerResponse.responseString : '';\n    this.destroyCleanup(\n      `${responseString} handled Destroy Response addressed to session ${\n      formatHexString(response.sessionId)}, on session ${formatHexString(this._sid)}`,\n      0);\n  }\n\n  handleSmfMessage(tsmsg) {\n    const smfHeader = tsmsg.smfHeader;\n    if (smfHeader.smf_protocol !== SMFLib.SMFProtocol.TSESSION) {\n      this.handleSmfParseError(`Unexpected Message Prototcol (${smfHeader.smf_protocol}) on ReceiveData connection`);\n      return;\n    }\n\n      // we have found a transport SMF, can we now read the Transport SMF chunk\n    const data = tsmsg.payload;\n    const TotalPayloadToRead = tsmsg.payloadLength;\n\n    switch (tsmsg.messageType) {\n      case SMFLib.SMFTransportSessionMessageType.DESTROY_RESP:\n        this.handleDestroyResponse(tsmsg);\n        return;\n\n      case SMFLib.SMFTransportSessionMessageType.DATA:\n        if (tsmsg.sessionId !== this._sid) {\n          // The router may have given us an error code; if so, include in the error message.\n          const smfErrResponse = tsmsg.getResponse();\n          const responseErrStr = smfErrResponse\n              ? (` (${smfErrResponse.responseCode} ${smfErrResponse.responseString})`)\n              : '';\n          const responseCode = smfErrResponse ? smfErrResponse.responseCode : null;\n\n          LOG_DEBUG(`HandleRxData Bad Session ID received in message. Expected: ${strToByteArray(this._sid)\n                        }, Received: ${strToByteArray(tsmsg.sessionId)}${responseErrStr}`);\n\n          this._state = TransportSessionState.CONNECTION_FAILED;\n          this._eventCB(new TransportSessionEvent(TransportSessionEventCode.PARSE_FAILURE,\n                        `Session ID mismatch in data message, expected: ${formatHexString(this._sid)}, got: ${\n                        formatHexString(tsmsg.sessionId)}, ${responseErrStr}`,\n                        responseCode,\n                        ErrorSubcode.PROTOCOL_ERROR, this._sid));\n          return;\n        }\n\n        // pass-through encapsulated data to parent\n        if (TotalPayloadToRead > 0) {\n          this._client.rxDataBuffer(data);\n        }\n        break;\n      default:\n        // Unexpected message type\n        this.handleSmfParseError(`Unexpected message type (${\n                    tsmsg.messageType}) on ReceiveData connection`);\n    }\n  }\n\n  handleSmfParseError() {\n    this._eventCB(new TransportSessionEvent(TransportSessionEventCode.DATA_DECODE_ERROR,\n        'Received data decode error', null,\n        ErrorSubcode.DATA_DECODE_ERROR, this._sid));\n  }\n\n  // Called when data is received on the connection\n  handleRxData(tsRc, data) {\n    if (this._httpReceiveConn === null || this._rxChannelClient === null) {\n      if (this._state === TransportSessionState.DOWN) {\n        LOG_INFO('Transport session is down, ignore data from receive connection');\n      } else {\n        LOG_ERROR(`Transport session is not in working state, state: ${this._state}`);\n      }\n      return;\n    }\n\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_DEBUG('Transport session is being destroyed, ignore data from receive connection, ' +\n               `dump first 64 bytes (or fewer) of data:\\n${\n                 DebugLib.Debug.formatDumpBytes(data.substring(0, 64), true, 0)}`);\n      return;\n    }\n\n    this._httpReceiveConn.recStat('GotData');\n    if (tsRc !== TransportReturnCode.OK) {\n      this.handleRxError(tsRc, data);\n      return;\n    }\n\n    if (data.length === 0) {\n      LOG_DEBUG('Send write token to router');\n      this._httpReceiveConn.send(this._smfDataTokenTSHeader);\n    } else {\n      this._rxChannelClient.rxDataString(data);\n    } // end have data to process\n  }\n\n  // Called when data is received on a HTTP_BINARY_STREAMING connection\n  handleRxStreaming(tsRc, data) {\n    if (this._httpReceiveConn === null) {\n      if (this._state === TransportSessionState.DOWN) {\n        LOG_DEBUG('Transport session is down, ignore data from receive connection');\n      } else {\n        LOG_ERROR(`Transport session is not in working state, state: ${this._state}`);\n      }\n      return;\n    }\n\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_DEBUG('Transport session is being destroyed, ignore data from streaming receive ' +\n               `connection, dump first 64 bytes (or fewer) of data:\\n${\n               DebugLib.Debug.formatDumpBytes(data.substring(0, 64), true, 0)}`);\n      return;\n    }\n\n    this._httpReceiveConn.recStat('GotData');\n    if (tsRc !== TransportReturnCode.OK) {\n      this.handleRxError(tsRc, data);\n      return;\n    }\n\n    if (data.length === 0) {\n      LOG_TRACE('Send write token to router');\n      this._packetReadState = PacketReadState.READING_HEADER;\n      this._httpReceiveConn.send(this._smfDataTokenTSHeader);\n      return;\n    }\n\n    // pass-through encapsulated data to parent\n    if (this._packetReadState === PacketReadState.STREAMING) {\n      this._client.rxDataString(data);\n      return;\n    }\n\n    this._incomingBuffer += data;\n    const smfheader = SMFLib.Codec.ParseSMF.parseSMFAt(BufferImpl.from(this._incomingBuffer, 'latin1'),\n                                                       0, true);\n    if (smfheader) {\n        // we have a valid smf header, see if there is a transport header and session-id\n      const tsmsg = SMFLib.Codec.Transport.parseTsSmfHdrAt(BufferImpl.from(this._incomingBuffer, 'latin1'),\n                                                           smfheader.headerLength,\n                                                           smfheader);\n      if (!tsmsg) {\n        // Not tsMsg but there is an smf header, just return until more data arrives\n        return;\n      }\n\n      // We have the transport message header too, if it is a DATA message enter\n      // STREAMING state\n      switch (tsmsg.messageType) {\n        case SMFLib.SMFTransportSessionMessageType.DESTROY_RESP:\n          this.handleDestroyResponse(tsmsg);\n          return;\n\n        case SMFLib.SMFTransportSessionMessageType.DATA:\n          if (tsmsg.sessionId !== this._sid) {\n            // The router may have given us an error code, if so, include in the error message.\n            const smfErrResponse = tsmsg.getResponse();\n            const responseErrStr = smfErrResponse\n                ? (` (${smfErrResponse.responseCode} ${smfErrResponse.responseString})`)\n                : '';\n            const responseCode = smfErrResponse ? smfErrResponse.responseCode : null;\n\n            LOG_DEBUG(`HandleRxData Bad Session ID received in message.  Expected: ${strToByteArray(this._sid)\n                        }, Received: ${strToByteArray(tsmsg.sessionId)}${responseErrStr}`);\n            LOG_DEBUG(`First 64 bytes (or fewer) of message: ${strToByteArray(data.substr(0, 64))}`);\n\n            this._state = TransportSessionState.CONNECTION_FAILED;\n            this._eventCB(\n              new TransportSessionEvent(TransportSessionEventCode.PARSE_FAILURE,\n                                        `Session ID mismatch in data message, expected: ${formatHexString(this._sid)}, got: ${\n                                        formatHexString(tsmsg.sessionId)}, ${responseErrStr}`,\n                                        responseCode,\n                                        ErrorSubcode.PROTOCOL_ERROR, this._sid));\n            return;\n          }\n          // all is good. We can now STREAM the rest of the data until a empty message is received.\n          this._packetReadState = PacketReadState.STREAMING;\n          // pass-through any remaining data\n          if (this._incomingBuffer.length > (smfheader.headerLength + tsmsg.tsHeaderLength)) {\n            this._client.rxDataString(\n              this._incomingBuffer.substr(smfheader.headerLength + tsmsg.tsHeaderLength));\n          }\n          this._incomingBuffer = '';\n          return;\n\n        default:\n          // Unexpected message type\n          throw new TransportError(`Unexpected message type (${tsmsg.messageType}) on ReceiveData connection`, 0);\n      }\n    } else if (SMFLib.Codec.ParseSMF.isSMFHeaderAvailable(BufferImpl.from(this._incomingBuffer, 'latin1'), 0) &&\n               !SMFLib.Codec.ParseSMF.isSMFHeaderValid(BufferImpl.from(this._incomingBuffer, 'latin1'), 0)) {\n      // Probably lost framing\n      LOG_ERROR(`Couldn't decode message due to invalid smf header, dump first 64 bytes (or fewer) of buffer content:\\n${\n                 DebugLib.Debug.formatDumpBytes(this._incomingBuffer.substring(0, 64), true, 0)}`);\n\n      const errorInfo = 'Error parsing incoming message - invalid SMF header detected';\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      this._eventCB(\n        new TransportSessionEvent(TransportSessionEventCode.PARSE_FAILURE,\n                                  errorInfo, null,\n                                  ErrorSubcode.PROTOCOL_ERROR,\n                                  null));\n    }\n  }\n\n  // Called when data is received on the httpDataSend\n  handleRxDataToken(tsRc, data) {\n    if (tsRc !== TransportReturnCode.OK) {\n      this.handleRxError(tsRc, data);\n      return;\n    }\n\n    if (data.length === 0) {\n      return; // handle End of Stream\n    }\n\n    const parsedResponse = SMFLib.Codec.Decode.decodeCompoundMessage(BufferImpl.from(data, 'latin1'), 0);\n    if (!parsedResponse) {\n      if (this._state !== TransportSessionState.WAITING_FOR_DESTROY) {\n        this._state = TransportSessionState.CONNECTION_FAILED;\n        this._eventCB(new TransportSessionEvent(TransportSessionEventCode.PARSE_FAILURE,\n                'Failed to parse received data message', null,\n                ErrorSubcode.PROTOCOL_ERROR, this._sid));\n      } else {\n        this.destroyCleanup('Failed to parse received data message', ErrorSubcode.PROTOCOL_ERROR);\n      }\n      return;\n    }\n\n    if (parsedResponse.messageType === SMFLib.SMFTransportSessionMessageType.DESTROY_RESP) {\n      this.handleDestroyResponse(parsedResponse);\n      return;\n    }\n\n    if (parsedResponse.sessionId !== this._sid) {\n        // The router may have given us an error code, if so, include in the error message.\n      const smfErrResponse = parsedResponse.getResponse();\n      const responseErrStr = smfErrResponse ?\n            (` (${smfErrResponse.responseCode} ${smfErrResponse.responseString})`) :\n            '';\n      const responseCode = smfErrResponse ? smfErrResponse.responseCode : null;\n\n      LOG_DEBUG(`HandleRxDataToken Bad SID received in message.  Expected: ${strToByteArray(this._sid)\n            }, Received: ${strToByteArray(parsedResponse.sessionId)}${responseErrStr}`);\n      LOG_DEBUG(`First 64 bytes (or fewer) of message: ${strToByteArray(data.substr(0, 64))}`);\n\n      if (this._state !== TransportSessionState.WAITING_FOR_DESTROY) {\n        this._state = TransportSessionState.CONNECTION_FAILED;\n        this._eventCB(new TransportSessionEvent(TransportSessionEventCode.PARSE_FAILURE,\n                `Session ID mismatch in response message, expected: ${formatHexString(this._sid)}, got: ${formatHexString(parsedResponse.sessionId)}, ${responseErrStr}`,\n                responseCode, ErrorSubcode.PROTOCOL_ERROR, this._sid));\n      } else {\n        this.destroyCleanup('Session ID mismatch in response message', ErrorSubcode.PROTOCOL_ERROR);\n      }\n      return;\n    }\n\n    if (parsedResponse.messageType ===\n        SMFLib.SMFTransportSessionMessageType.DATA_TOKEN ||\n        parsedResponse.messageType ===\n        SMFLib.SMFTransportSessionMessageType.DATA_STREAM_TOKEN) {\n      this._haveToken = true;\n      this._httpSendConn.recStat('GotToken');\n      // this._eventCB(\n      //    new TransportSessionEvent(TransportSessionEventCode.NOTIFY_GOT_TOKEN, \"\", null, null));\n      this.sendQueuedData();\n    } else {\n        // Unexpected message type\n      throw (new TransportError(`Unexpected message type (${\n            parsedResponse.messageType}) on SendData connection`, 0));\n    }\n  }\n\n  handleRxError(tsRc) {\n    LOG_INFO(`handleRxError, transport return code ${TransportReturnCode.name(tsRc)}`);\n    this._state = TransportSessionState.CONNECTION_FAILED;\n    if (tsRc === TransportReturnCode.DATA_DECODE_ERROR) {\n      this._eventCB(new TransportSessionEvent(TransportSessionEventCode.DATA_DECODE_ERROR,\n            'Received data decode error', null,\n            ErrorSubcode.DATA_DECODE_ERROR, this._sid));\n    } else {\n      this._eventCB(new TransportSessionEvent(TransportSessionEventCode.SEND_ERROR,\n            'Connection error',\n            ErrorSubcode.CONNECTION_ERROR, this._sid));\n    }\n  }\n\n  // Called when there is an error on a connection or the connection is aborted\n  handleSendFailure(status, msg) {\n    // failed to send message, if it is a destroy message, just complete the destroy process\\\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_INFO(`Connection destroy failure (${msg}) while in state ${this._state}`);\n      this.destroyCleanup(`Connection destroy failure: ${msg}`, ErrorSubcode.CONNECTION_ERROR);\n    } else {\n      // Failed to send message, return error to upper layer which may  tear the session down\n      LOG_INFO(`Connection failure (${msg}) while in state ${this._state}`);\n      this._eventCB(new TransportSessionEvent(TransportSessionEventCode.SEND_ERROR,\n            `Connection error: ${msg}`, status,\n            ErrorSubcode.CONNECTION_ERROR, this._sid));\n    }\n  }\n\n  // Called when there is an error on a connection for a session create request\n  handleCreateConnFailure(status, msg) {\n    if (this._state === TransportSessionState.DOWN) {\n      return;\n    }\n\n    LOG_INFO(`Connection create failure (${msg}) while in state ${this._state}`);\n    this.destroyCleanup(`Connection create failure: ${msg}`, ErrorSubcode.CONNECTION_ERROR);\n  }\n\n  // Called when the destroy timer expires\n  destroyTimerExpiry() {\n    this.destroyCleanup('Destroy request timeout', ErrorSubcode.CONNECTION_ERROR);\n  }\n\n  cancelDestroyTimeout() {\n    if (this._destroyTimer) {\n      clearTimeout(this._destroyTimer);\n      this._destroyTimer = null;\n    }\n  }\n\n  /**\n   * Called after receiving ts destroy response from router\n   * @param {String} infoStr The informational string to pass along\n   * @param {ErrorSubcode} subcode The subcode associated with the event\n   * @param {Boolean} asyncSendEvent If true, always send the event asynchronously.\n   */\n  destroyCleanup(infoStr, subcode, asyncSendEvent) {\n    LOG_DEBUG(`Destroy cleanup: ${infoStr}`);\n\n    // Abort any current requests for this session\n    if (this._createConn) {\n      LOG_DEBUG('Destroy cleanup: Abort createConn');\n      this._createConn.abort();\n    }\n    if (this._httpSendConn) {\n      LOG_DEBUG('Destroy cleanup: Abort sendConn');\n      this._httpSendConn.abort();\n    }\n    if (this._httpReceiveConn) {\n      LOG_DEBUG('Destroy cleanup: Abort receiveConn');\n      this._httpReceiveConn.abort();\n    }\n\n    // Clear most internal state\n    this._createUrl = null;\n    this._routerUrl = null;\n    this._createConn = null;\n    this._httpSendConn = null;\n    this._httpReceiveConn = null;\n    this._smfDataTokenTSHeader = null;\n    this._rxChannelClient = null;\n    this._routerTag = '';\n    this._queuedData = [];\n    this._queuedDataSize = 0;\n    this._canSendNeeded = false;\n\n    // Clear timers.\n    this.cancelDestroyTimeout();\n    this.cancelConnectTimeout();\n\n    // Set final state\n    this._state = TransportSessionState.DOWN;\n\n    // Send the event to the application letting it know that the session is down\n    const finalize = () => {\n      // Check whether the callback was cleared before the timeout completes.\n      if (this._eventCB) {\n        this._eventCB(\n            new TransportSessionEvent(TransportSessionEventCode.DESTROYED_NOTICE,\n                                      infoStr || 'Session is destroyed',\n                                      null,\n                                      subcode || 0,\n                                      this._sid));\n      }\n\n      // release reference to smf client object\n      this._client = null;\n      // release reference to session object\n      this._eventCB = null;\n    };\n\n    if (asyncSendEvent) {\n      setTimeout(finalize, 0); // opportunity to use setImmediate instead\n    } else {\n      finalize();\n    }\n  }\n\n  getInfoStr() {\n    const str = `HTTPTransportSession; sid=${\n        formatHexString(this._sid)\n        }; routerTag=${this._routerTag}`;\n    return str;\n  }\n\n}\n\nmodule.exports.HTTPTransportSession = HTTPTransportSession;\n","const { Enum } = require('solclient-eskit');\n\n// Enum name, regexp, enum value, TE applicable\nconst nameChecks = [\n  [\"EMPTY_STRING\", /^$/, \"Zero length\", true],\n  [\"LT\", /</, \"Less than sign (<)\", true],\n  [\"GT\", />/, \"Greater than sign (>)\", true],\n  [\"ASTERISK\", /\\*/, \"Asterisk (*)\", true],\n  [\"QUESTION_MARK\", /\\?/, \"Question mark (?)\", true],\n  [\"AMPERSAND\", /&/, \"Ampersand (&)\", true],\n  [\"SEMICOLON\", /;/, \"Semicolon (;)\", true],\n  [\"LEADING_SLASH\", /^\\//, \"Starts with a slash (/).\", false],\n  [\"TRAILING_SLASH\", /\\/$/, \"Ends with a slash (/).\", false],\n  [\"DOUBLE_SLASH\", /\\/\\//, \"Empty level (//)\", false],\n  [\"TOO_LONG\", /.{200,}/, \"Longer than 200 characters\", true],\n  //[\"NO_ISSUE\", undefined, \"\"]\n];\n\n/**\n * The most frequent problems with endpoint names.\n *\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst EndpointNameComplaint = {\n  EMPTY_STRING: \"Zero length\",\n  LT: \"Less than sign (<)\",\n  GT: \"Greater than sign (>)\",\n  ASTERISK: \"Asterisk (*)\",\n  QUESTION_MARK: \"Question mark (?)\",\n  AMPERSAND: \"Ampersand (&)\",\n  SEMICOLON: \"Semicolon (;)\",\n  LEADING_SLASH: \"Starts with a slash (/).\",\n  TRAILING_SLASH: \"Ends with a slash (/).\",\n  DOUBLE_SLASH: \"Empty level (//)\",\n  TOO_LONG: \"Longer than 200 characters\",\n  NO_ISSUE: \"\"\n};\n\n//This should work, but the typescript generator doesn't like it.\n/*\nconst EndpointNameComplaint = {};\nnameChecks.forEach((triplet)=>{\n  EndpointNameComplaint[triplet[0]] = triplet[2];\n})\n*/\n\nfunction explainInvalidEndpointName(name, isTE) {\n  //complaints are ordered by probability\n  for (i in nameChecks) {\n    const triplet = nameChecks[i];\n    if (isTE && !triplet[3]) {\n      // Slash-related issues are queue only, so those rules are marked \"false\" in the check list.\n      continue;\n    }\n    if (name.match(triplet[1])) {\n      return triplet[2];\n    }\n  }\n  // This is an empty string because it's falsy.\n  return EndpointNameComplaint.NO_ISSUE;\n} \t\n\nmodule.exports.EndpointNameComplaint = Enum.new(EndpointNameComplaint);\n//module.exports.EndpointNameComplaint = EndpointNameComplaint;\nmodule.exports.explainInvalidEndpointName = explainInvalidEndpointName;\n","const EPSILON = 1e6;\n\n/**\n * @param {Array} arr The array to flatten\n * @returns {Array} A maximally flattened array. The original array is not modified.\n * @private\n */\nfunction flatten(arr) {\n  return arr.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n}\n\n/**\n * @private\n */\nconst BaseChecks = (() => {\n  const result = {\n    /**\n     * Checks whether a value is undefined or null.\n     *\n     * @param   {*} value The value to check.\n     *\n     * @returns {Boolean} True if the value is undefined or null.\n     *\n     * @private\n     */\n    nothing(value) {\n      return (value === undefined || value === null);\n    },\n\n    /**\n     * Checks whether a value is anything, i.e. not undefined or null.\n     *\n     * @param   {*} value The value to check.\n     *\n     * @returns {Boolean} True unless the value is undefined or null.\n     *\n     * @private\n     */\n    anything(value) {\n      return !BaseChecks.nothing(value);\n    },\n\n    /**\n     * Checks whether a value is undefined. Uses the conservative\n     * typeof check for compatibility with particularly ill-behaved\n     * libraries that redefine <code>undefined</code>.\n     *\n     * @param   {*} value The value to check.\n     *\n     * @returns {Boolean} True if the value is undefined.\n     *\n     * @private\n     */\n    undefined(value) {\n      return typeof value === 'undefined';\n    },\n\n    /**\n     * Checks whether a value is defined. This is true for any value with\n     * a type that is not 'undefined'.\n     *\n     * @param {any} value The value to check\n     * @returns {Boolean} True if the value is defined.\n     *\n     * @private\n     */\n    defined(value) {\n      return !BaseChecks.undefined(value);\n    },\n\n    /**\n     * Checks whether a value is an array.\n     *\n     * @param   {*} value The value to check.\n     *\n     * @returns {Boolean} True if the value is an array.\n     *\n     * @private\n     */\n    array(value) {\n      return BaseChecks.anything(value) && Array.isArray(value);\n    },\n\n    /**\n     * Checks whether a value is an object. If a value is an array, it is not an object.\n     * If a value is null, it is not an object.\n     *\n     * @param   {*} value The value to check.\n     *\n     * @returns {Boolean} True if the value is an object (and not an array).\n     *\n     * @private\n     */\n    object(value) {\n      return (!BaseChecks.array(value) &&\n              value !== null &&\n              (typeof value === 'object' || value instanceof Object));\n    },\n\n    /**\n     * Checks whether a value is an instance of the given type.\n     *\n     * @param   {*} val The value to check.\n     * @param   {Object} type The type to check.\n     *\n     * @returns {Boolean} True if type is in value's prototype chain.\n     *\n     * @private\n     */\n    instanceOf(val, type) {\n      return BaseChecks.object(val) && val instanceof type;\n    },\n\n    /**\n     * Checks whether a value's typeof is equal to the given type string.\n     *\n     * @param {*} val The value to check.\n     * @param {String} type The type string for comparison.\n     *\n     * @returns {Boolean} True if typeof(val) == type\n     *\n     * @private\n     */\n    type(val, type) {\n      return typeof val === type; /* dynamic */ // eslint-disable-line valid-typeof\n    },\n\n    /**\n     * Checks whether a value is an instance of any of the given types.\n     *\n     * @param   {*} val The value to check.\n     * @param   {Object} types The types to check.\n     *\n     * @returns {Boolean} True if any element of types is in val's prototype chain.\n     *\n     * @private\n     */\n    instanceOfAny(val, ...types) {\n      return (BaseChecks.array(types) &&\n              flatten(types).some(type => BaseChecks.instanceOf(val, type)));\n    },\n\n    /**\n     * Checks whether the given value is empty.\n     *\n     * Emptiness is determined using the following checks:\n     *\n     * <ol>\n     *  <li>If an object is nothing, it is empty.</li>\n     *  <li>If it is an object, and it has no keys of its own, it is empty.</li>\n     *  <li>If it has a length property, it is empty if length === 0.</li>\n     *  <li>If none of the above apply, the object is not empty.</li>\n     * </ol>\n     *\n     * @param   {*} val The value to check.\n     *\n     * @returns {Boolean} True if the value is empty.\n     *\n     * @private\n     */\n    empty(val) {\n      if (BaseChecks.nothing(val)) return true;\n      if (BaseChecks.object(val)) {\n        if (Object.keys(val).length === 0) {\n          return true;\n        }\n      }\n      if (val.length === 0) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * A user-defined check.\n     *\n     * @param   {*} val The value to check\n     * @param   {Function} fn The function(val) to use.\n     *\n     * @returns {Boolean} The result of the function, coerced to a boolean.\n     *\n     * @private\n     */\n    truthy(val, fn) {\n      return !!fn(val);\n    },\n\n    rangeGe(val, rangeMinInclusive) {\n      return val >= rangeMinInclusive;\n    },\n\n    rangeGt(val, rangeMin) {\n      return val > rangeMin;\n    },\n\n    rangeLe(val, rangeMaxInclusive) {\n      return val <= rangeMaxInclusive;\n    },\n\n    rangeLt(val, rangeMax) {\n      return val < rangeMax;\n    },\n\n    rangeCompare(val, operator, operand, ...args) {\n      switch (operator) {\n        case '=':\n        case '==':\n        case '===':\n          return val === operand;\n        case '~=':\n        case '=~':\n          {\n            const epsilon = args[0] || EPSILON;\n            return Math.abs(val - operand) < epsilon;\n          }\n        case '<':\n          return val < operand;\n        case '<=':\n          return val <= operand;\n        case '>':\n          return val > operand;\n        case '>=':\n          return val >= operand;\n        default:\n          throw new Error(`Illegal operator for rangeCompare: ${operator}`);\n      }\n    },\n\n    NaN(val) {\n      return Number.isNaN(val);\n    },\n\n    /**\n     * Checks whether val is included in the object. If obj is an array, val is included if\n     * val is an element of the array. Otherwise, if obj is an object, val is included if\n     * val is one of the keys of obj.\n     *\n     * @param   {*} val The value to test\n     * @param   {*} obj The object to test\n     *\n     * @returns {Boolean} True if the value is included in the object\n     */\n    included(val, obj) {\n      if (BaseChecks.nothing(obj)) {\n        return false;\n      }\n      if (obj.includes) {\n        return obj.includes(val);\n      }\n      if (Array.isArray(obj)) {\n        // Not exactly Array.prototype.includes, which uses SameValueZero (+0 == -0)\n        return obj.indexOf(val) >= 0;\n      }\n      if (BaseChecks.object(obj)) {\n        const keys = Object.keys(obj);\n        return BaseChecks.included(val, keys);\n      }\n      return false;\n    },\n\n    /**\n     * Checks whether val is equal to expected.\n     *\n     * @param {any} val The value to check.\n     * @param {any} expected The expected value.\n     * @returns {Boolean} True if the value was equal to the expected value.\n     */\n    equal(val, expected) {\n      return val === expected;\n    },\n\n    /**\n     * Checks whether the given value appears as an attribute value in the given attributes object,\n     * e.g. whether an enumeration contains the given value. If the attributes object is an array,\n     * the array membership check {@link #included} is used instead.\n     *\n     * @param   {*} val The value to check.\n     * @param   {Object} obj The object with attributes to check.\n     *\n     * @returns {Boolean} True if attrs has any attribute equal to val.\n     */\n    member(val, obj) {\n      return (BaseChecks.anything(obj) &&\n              (BaseChecks.array(obj)\n                ? BaseChecks.included(val, obj)\n                : Object.keys(obj).some(k => obj[k] === val))\n      );\n    },\n\n    boolean(v) {\n      return BaseChecks.type(v, 'boolean');\n    },\n\n    number(v) {\n      return BaseChecks.type(v, 'number');\n    },\n\n    string(v) {\n      return BaseChecks.type(v, 'string');\n    },\n\n    function(v) {\n      return BaseChecks.type(v, 'function');\n    },\n  };\n\n  /**\n   * Checks whether an object is none. This is the same check as <code>nothing</code>\n   * @see {@link nothing}\n   */\n  result.none = result.nothing;\n\n  /**\n   * Checks whether an object is something. This is the same check as <code>anything</code>\n   */\n  result.something = result.anything;\n\n  // Add check-loosening suffixes, (t | null), (t | undefined) and (t | null | undefined).\n  // Do the t check last, just in case it is not (null | undefined) safe.\n  Object.keys(result).forEach((key) => {\n    /**\n     * .orNull checks. These are equivalent to the similarly named check, but also pass if the value\n     * supplied was equal to null.\n     *\n     * @param {*} val The value to check.\n     * @param {*} args The arguments to forward to the base validator.\n     *\n     * @returns {Boolean} True if the value was null or passed the similarly named validator.\n     */\n    result[key].orNull = function orNull(val, ...args) {\n      return val === null || result[key](val, ...args);\n    };\n\n    /**\n     * .orUndefined checks. These are equivalent to the similarly named check, but also pass if the\n     * value supplied was equal to null.\n     *\n     * @param {*} val The value to check.\n     * @param {*} args The arguments to forward to the base validator.\n     *\n     * @returns {Boolean} True if the value was null or passed the similarly named validator.\n     */\n    result[key].orUndefined = function orUndefined(val, ...args) {\n      return val === undefined || result[key](val, ...args);\n    };\n\n    /**\n     * .orNothing checks. These are equivalent to the similarly named check, but also pass if the\n     * value supplied was null or undefined.\n     *\n     * @param {*} val The value to check.\n     * @param {*} args The arguments to forward to the base validator.\n     *\n     * @returns {Boolean} True if the value was null or passed the similarly named validator.\n     */\n    result[key].orNothing = function orNothing(val, ...args) {\n      return result.nothing(val) || result[key](val, ...args);\n    };\n  });\n\n  return result;\n})();\n\nmodule.exports.BaseChecks = BaseChecks;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of message payload types\n * (see {@link solace.Message#getBinaryAttachment})\n *\n * A message may contain unstructured byte data, or a structured container.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MessageType = {\n  /**\n   * Binary message (unstructured bytes stored in the binary attachment message part).\n   * @type {Number}\n   */\n  BINARY: 0,\n  /**\n   * Structured map message.\n   * @type {Number}\n   */\n  MAP:    1,\n  /**\n   * Structured stream message.\n   * @type {Number}\n   */\n  STREAM: 2,\n  /**\n   * Structured text message.\n   * @type {Number}\n   */\n  TEXT:   3,\n};\n\nmodule.exports.MessageType = Enum.new(MessageType);\n","/**\n * @private\n * @static\n */\nconst CacheContext = {\n  /**\n   * A prefix appearing on the request IDs of all requests associated with a Solcache session.\n   * @type {String}\n   * @private\n   */\n  CACHE_REQUEST_PREFIX: '#CRQ',\n\n  /**\n   * A global counter generating unique correlation IDs for cache requests.\n   * @private\n   */\n  cacheRequestCorrelationId: 0,\n};\n\nmodule.exports.CacheContext = CacheContext;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) {\n        data = new FastBuffer(data.buffer, data.byteOffset, data.length - 4);\n      }\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n\n  //\n  // The choice to employ `zlib.reset()` over `zlib.close()` is dictated by the\n  // fact that in Node.js versions prior to 13.10.0, the callback for\n  // `zlib.flush()` is not called if `zlib.close()` is used. Utilizing\n  // `zlib.reset()` ensures that either the callback is invoked or an error is\n  // emitted.\n  //\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n\n  if (this[kError]) {\n    this[kCallback](this[kError]);\n    return;\n  }\n\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","const { assert } = require('solclient-eskit');\nconst { BaseMessage } = require('./base-message');\nconst { Destination, DestinationUtil } = require('solclient-destination');\nconst { SMFHeader } = require('./smf-header');\nconst { SMFProtocol } = require('../smf-protocols');\nconst { SMFSMPMessageType } = require('../smf-smp-message-types');\nconst { SMFSMPMessageTypeFlags } = require('../smf-smp-message-type-flags');\n\n/**\n * Represents an SMP request or reply message\n * @memberof solace\n * @private\n */\nclass SMPMessage extends BaseMessage {\n\n  /**\n   * Creates an instance of SMPMessage.\n   *\n   * @memberOf SMPMessage\n   */\n  constructor() {\n    super(new SMFHeader(SMFProtocol.SMP, 1));\n\n    // Field: msgtype\n    this.msgType = 0;\n\n    // Field: subscription string\n    this.encodedUtf8Subscription = null;\n    this.encodedUtf8QueueName = null;\n\n    this.smpFlags = (0 | SMFSMPMessageTypeFlags.SMF_SMP_FLAG_TOPIC); // default flags\n\n    this._encodedQueueName = null; // unused in solclientjs\n    this._encodedClientName = null; // unused in solclientjs\n  }\n\n  isFlag(flagMask) {\n    return (this.smpFlags & flagMask);\n  }\n\n  setFlag(flagMask, value) {\n    if (value) {\n      this.smpFlags |= flagMask;\n    } else {\n      this.smpFlags &= (~flagMask);\n    }\n  }\n\n  static getSubscriptionMessage(correlationTag, topic, add, requestConfirm) {\n    assert(topic instanceof Destination, 'Topics are not UCS-2 strings. Pass a Topic object.');\n    const smp = new SMPMessage();\n    smp.msgType = add\n      ? SMFSMPMessageType.ADDSUBSCRIPTION\n      : SMFSMPMessageType.REMSUBSCRIPTION;\n    smp.encodedUtf8Subscription = topic.getBytes();\n    assert(smp.encodedUtf8Subscription, 'Topic had no encoding');\n    smp.setFlag(SMFSMPMessageTypeFlags.SMF_SMP_FLAG_TOPIC, true);\n    if (requestConfirm) {\n      smp.setFlag(SMFSMPMessageTypeFlags.SMF_SMP_FLAG_RESPREQUIRED, true);\n    }\n\n    // Always put a correlation tag\n    smp._smfHeader.pm_corrtag = correlationTag;\n    return smp;\n  }\n\n  static getQueueSubscriptionMessage(correlationTag, topic, queue, add) {\n    assert(topic instanceof Destination, 'Topics are not UCS-2 strings. Pass a Topic object.');\n    const smp = new SMPMessage();\n    smp.msgType = add\n      ? SMFSMPMessageType.ADDQUEUESUBSCRIPTION\n      : SMFSMPMessageType.REMQUEUESUBSCRIPTION;\n    smp.encodedUtf8QueueName = DestinationUtil.encodeBytes(queue.getName());\n    smp.encodedUtf8Subscription = topic.getBytes();\n    assert(smp.encodedUtf8Subscription, 'Topic had no encoding');\n    assert(smp.encodedUtf8QueueName, 'Queue had no encoding');\n    smp.setFlag(SMFSMPMessageTypeFlags.SMF_SMP_FLAG_TOPIC, true);\n    smp.setFlag(SMFSMPMessageTypeFlags.SMF_SMP_FLAG_RESPREQUIRED, true);\n    // TODO: true for remove, false for add? Typo in the spec?\n    smp.setFlag(SMFSMPMessageTypeFlags.SMF_SMP_FLAG_PERSIST, true);\n\n    // Always put a correlation tag\n    smp._smfHeader.pm_corrtag = correlationTag;\n    return smp;\n  }\n\n\n}\n\n\nmodule.exports.SMPMessage = SMPMessage;\n","/**\n * @private\n */\nclass Timer {\n  /**\n   * Creates an instance of Timer.\n   * @param {function} cancel The action to perform on cancellation\n   */\n  constructor(cancel) {\n    this.cancel = () => {\n      this.cancel = () => {}; // change to no-op\n      cancel();\n    };\n  }\n\n  /**\n   * @static\n   * @param {Number} interval The interval for the timer, in milliseconds.\n   * @param {function} onInterval The function to invoke on expiration.\n   * @param {any} [args] Any arguments to pass to the onExpire callback.\n   * @returns {Timer} A new timer object.\n   */\n  static newInterval(interval, onInterval, ...args) {\n    const timerRef = setInterval(onInterval, interval, ...args);\n    return new Timer(() => clearInterval(timerRef));\n  }\n\n  /**\n   * @static\n   * @param {Number} timeout The timeout for the timer, in milliseconds.\n   * @param {function} onExpire The function to invoke on expiration.\n   * @param {any} [args] Any arguments to pass to the onExpire callback.\n   * @returns {Timer} A new timer object.\n   */\n  static newTimeout(timeout, onExpire, ...args) {\n    const timerRef = setTimeout(onExpire, timeout, ...args);\n    return new Timer(() => clearTimeout(timerRef));\n  }\n}\n\nmodule.exports.Timer = Timer;\n","module.exports = require(\"zlib\");","const { ErrorSubcode } = require('solclient-error');\nconst { TransportError } = require('../../transport-error');\n\n/* eslint-env browser */\nconst XHRFactory = {\n  /**\n   * Creates an XHR object.\n   *\n   * @param {Boolean} [allowFail=false] If `true`, return null on failure; otherwise throw.\n   * @throws {TransportError}\n   * @returns {XMLHttpRequest} The new XHR object\n   */\n  create(allowFail = false) {\n    const xhr = typeof XMLHttpRequest !== 'undefined' ? new XMLHttpRequest() : null;\n    if (!allowFail && !xhr) {\n      throw new TransportError('Failed to create an XMLHTTPRequest',\n                                 ErrorSubcode.CREATE_XHR_FAILED);\n    }\n    return xhr;\n  },\n};\n\nmodule.exports.XHRFactory = XHRFactory;\n","const { DestinationType } = require('solclient-destination');\nconst { Enum } = require('solclient-eskit');\n\n/**\n * An enumeration of all SDT data types.\n * @enum {number}\n * @namespace\n * @memberof solace\n * @private\n */\nconst SDTDestType = {\n  [DestinationType.TOPIC]:           0x00,\n  [DestinationType.QUEUE]:           0x01,\n  [DestinationType.TEMPORARY_QUEUE]: 0x01,\n};\n\nmodule.exports.SDTDestType = Enum.new(SDTDestType);\n","/* eslint-disable global-require */\nconst { BaseSMFClient } = require('./base-smf-client');\n\n// Got rid of anonymous function that checked browser and set smf-client\n// Now ignoring string-smf-client and setting it straight to buffer-smf-client\n// const SMFClient = require('./buffer-smf-client').BufferSMFClient;\n\nconst SMFClient = (() => {\n  // Got rid of the inconsequential ifs for old IE versions in 2024 (again?)\n  /* eslint-env shared-browser-node */\n  return require('./buffer-smf-client').BufferSMFClient;\n})();\n\nSMFClient.SMF_CLIENTCTRL_LOGIN_FAKE_CORRELATIONTAG = BaseSMFClient.SMF_MAX_CORRELATION;\n\nmodule.exports.SMFClient = SMFClient;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SessionState = {\n  /**\n   * The session is connecting.\n   */\n  CONNECTING:    1,\n  /**\n   * The session is connected.\n   */\n  CONNECTED:     2,\n  /**\n   * The session experienced an error.\n   */\n  SESSION_ERROR: 3,\n  /**\n   * The session is disconnecting.\n   */\n  DISCONNECTING: 4,\n  /**\n   * The session is disconnected.\n   */\n  DISCONNECTED:  5,\n\n};\n\nmodule.exports.SessionState = Enum.new(SessionState);\n","const { BaseMessage } = require('./base-message');\nconst { SMFHeader } = require('./smf-header');\nconst { SMFProtocol } = require('../smf-protocols');\n\nclass KeepAliveMessage extends BaseMessage {\n  constructor() {\n    super(new SMFHeader(SMFProtocol.KEEPALIVEV2, 2));\n    this._smfHeader.smf_uh = 2;\n  }\n}\n\nmodule.exports.KeepAliveMessage = KeepAliveMessage;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumeration of Web Transport events.\n * @enum {string}\n * @namespace\n * @memberof solace\n * @private\n */\nconst WebTransportEvent = {\n  /**\n   * The Session Layer has issued a connect request\n   */\n  CONNECT:          'Connect',\n  /**\n   * The Session Layer has issued a destroy request\n   */\n  DESTROY:          'Destroy',\n  /**\n   * A downgrade request has been received from an FSM.\n   */\n  DOWNGRADE:        'Downgrade',\n  /**\n   * The underlying transport has been destroyed. Seen in\n   * response to calling destroy() and in some cases when\n   * the transport is destroyed by the peer.\n   */\n  DESTROYED_NOTICE: 'DestroyedNotice',\n  /**\n   * The underlying transport timed out in its connection attempt.\n   * The managing component should abort this connection attempt\n   * and begin a downgrade if available.\n   */\n  CONNECT_TIMEOUT:  'ConnectTimeout',\n  /**\n   * The underlying transport is active and ready for traffic.\n   */\n  UP_NOTICE:        'UpNotice',\n  /**\n   * The transport encountered an error sending data.\n   */\n  SEND_ERROR:       'SendError',\n};\n\nmodule.exports.WebTransportEvent = Enum.new(WebTransportEvent);\n","const { ErrorSubcode } = require('solclient-error');\n\n\n/**\n * Message consumer event objects. A {@link solace.MessageConsumer} will emit\n * these events related to queue subscription management:\n * MessageConsumerEventName.SUBSCRIPTION_OK and\n * MessageConsumerEventName.SUBSCRIPTION_ERROR.\n *\n * Similar to SessionEvent.\n * Also compatible with RequestError.\n *\n * @memberof solace\n */\nclass MessageConsumerEvent {\n  /**\n   * @constructor\n   * @param {String} messageConsumerEventName one of the MessageConsumerEventNames.\n   * @param {String} infoStr Information string\n   * @param {Number} [responseCode] Any associated router response code\n   * @param {solace.ErrorSubcode} [errorSubcode] Any associated error subcode\n   * @param {Object|String|null|undefined} [correlationKey] Any associated correlation key\n   * @param {String} [reason] Any additional information\n   * @private\n   */\n  constructor(\n    messageConsumerEventName,\n    infoStr,\n    responseCode = undefined,\n    errorSubcode = 0,\n    correlationKey = undefined,\n    reason = undefined) {\n    this._messageConsumerEventName = messageConsumerEventName;\n    this._infoStr = infoStr;\n    this._responseCode = responseCode;\n    this._errorSubcode = errorSubcode;\n    this._correlationKey = correlationKey; // optional\n    this._reason = reason; // optional\n  }\n\n  /**\n   * @type {String}\n   * @description the appropriate MessageConsumerEventName\n   *\n   *   MessageConsumerEventName.SUBSCRIPTION_OK or\n   *   MessageConsumerEventName.SUBSCRIPTION_ERROR.\n   */\n  get messageConsumerEventName() {\n    return this._messageConsumerEventName;\n  }\n\n  /**\n   * @type {String}\n   * @description the appropriate MessageConsumerEventName\n   *\n   *   MessageConsumerEventName.SUBSCRIPTION_OK or\n   *   MessageConsumerEventName.SUBSCRIPTION_ERROR.\n   */\n  get name() {\n    return this._messageConsumerEventName;\n  }\n\n  /**\n   * @type {String}\n   * @description if applicable, an information string returned by the Solace Message Router.\n   */\n  get infoStr() {\n    return this._infoStr;\n  }\n\n  /**\n   * @type {?Number}\n   * @description if applicable, a response code returned by the Solace Message Router.\n   */\n  get responseCode() {\n    return this._responseCode;\n  }\n\n  /**\n   * @type {?solace.ErrorSubcode}\n   * @description if applicable, an error subcode. Defined in {@link solace.ErrorSubcode}\n   * same as subcode.\n   */\n  get errorSubcode() {\n    return this._errorSubcode;\n  }\n\n  /**\n   * @type {?solace.ErrorSubcode}\n   * @description if applicable, an error subcode. Defined in {@link solace.ErrorSubcode}\n   * Same as errorSubcode.\n   */\n  get subcode() {\n    return this._errorSubcode;\n  }\n\n  /**\n   * @type {?Object}\n   * @description A user-specified object\n   * made available in the response or confirmation event by including it as a\n   * parameter in the orignal API call.  If the user did not specify a\n   * correlationKey, it will be <code>null</code>.\n   * @default null\n   */\n  get correlationKey() {\n    return this._correlationKey;\n  }\n\n  /**\n   * @type {?String}\n   * @description Additional information if it is applicable.\n   *\n   * In case of subscribe or publish events, it constains the topic.\n   */\n  get reason() {\n    return this._reason;\n  }\n  /**\n   * @param {Object} value The reason info object\n   * @internal\n   */\n  set reason(value) {\n    this._reason = value;\n  }\n\n  /**\n   * @type {?solace.SessionEventCode}\n   * @description Only here for compatibility with the RequestError exception class.\n   * Always returns undefined for a MessageConsumerEvent.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  get requestEventCode() {\n    return undefined;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'messageConsumerEventName': this.messageConsumerEventName,\n      'infoStr':                  this.infoStr,\n      'responseCode':             this.responseCode,\n      'errorSubcode':             ErrorSubcode.describe(this.errorSubcode),\n      'correlationKey':           this.correlationKey ? this.correlationKey.toString() : null,\n      'reason':                   this.reason ? this.reason : null,\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.MessageConsumerEvent = MessageConsumerEvent;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumeration of {@link solace.SDTUnsuportedValueError} causes.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst SDTValueErrorSubcode = {\n  /**\n   * @type {Number}\n   * @description\n   * The value for this field may be valid on other platforms, but is outside the\n   * range that is supported on this platform for the given type.\n   */\n  VALUE_OUTSIDE_SUPPORTED_RANGE: 1,\n};\n\nmodule.exports.SDTValueErrorSubcode = Enum.new(SDTValueErrorSubcode);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Transport session states, used by WebSocketTransportSession and HTTPTransportSession\n * @enum {number}\n * @private\n */\nconst TransportSessionState = {\n  DOWN:                0,\n  WAITING_FOR_CREATE:  1,\n  SESSION_UP:          2,\n  WAITING_FOR_DESTROY: 4,\n  CONNECTION_FAILED:   5,\n};\n\nmodule.exports.TransportSessionState = Enum.new(TransportSessionState);\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) {\n    return new FastBuffer(target.buffer, target.byteOffset, offset);\n  }\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.length === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.length);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = new FastBuffer(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = new FastBuffer(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\nmodule.exports = {\n  concat,\n  mask: _mask,\n  toArrayBuffer,\n  toBuffer,\n  unmask: _unmask\n};\n\n/* istanbul ignore else  */\nif (!process.env.WS_NO_BUFFER_UTIL) {\n  try {\n    const bufferUtil = require('bufferutil');\n\n    module.exports.mask = function (source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    };\n\n    module.exports.unmask = function (buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","const { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\n\nconst ParseFloat = {};\nParseFloat.parseFloatField = function parseFloatField(buf, pos, len) {\n  switch (len) {\n    case 4:\n      return SDTField.create(SDTFieldType.FLOATTYPE, buf.readFloatBE(pos));\n    case 8:\n      return SDTField.create(SDTFieldType.DOUBLETYPE, buf.readDoubleBE(pos));\n    default:\n      return SDTField.create(SDTFieldType.UNKNOWN, buf.toString('latin1', pos, pos + len));\n  }\n};\n\nmodule.exports.ParseFloat = ParseFloat;\n","const { EventEmitter } = require('./lib/event-emitter');\nconst { Timer } = require('./lib/timer');\n\nmodule.exports = {\n  EventEmitter,\n  Timer,\n};\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents authentication schemes that can be used. The corresponding session\n * property is {@link solace.SessionProperties#authenticationScheme}.\n *\n * @readonly\n * @enum {String}\n * @memberof solace\n * @namespace\n */\nconst AuthenticationScheme = {\n  /**\n   * @description Username/Password based authentication scheme.\n   * @type {String}\n   */\n  BASIC:                       'AuthenticationScheme_basic',\n  /**\n   * @name solace.AuthenticationScheme.CLIENT_CERTIFICATE\n   * @default AuthenticationScheme_clientCertificate\n   * @description Client-side certificate based authentication scheme.\n   * @see {@link solace.SessionProperties#sslPfx}\n   * @see {@link solace.SessionProperties#sslPfxPassword}\n   * @see {@link solace.SessionProperties#sslPrivateKey}\n   * @see {@link solace.SessionProperties#sslPrivateKeyPassword}\n   * @see {@link solace.SessionProperties#sslCertificate}\n   * @type {String}\n   * @target node\n   */\n  /**\n   * @description Client-side certificate based authentication scheme.  The certificate and\n   *   private key are provided by the browser.\n   * @type {String}\n   * @target browser\n   */\n  CLIENT_CERTIFICATE:          'AuthenticationScheme_clientCertificate',\n  /**\n   * @deprecated Use {@link solace.AuthenticationScheme.BASIC} instead.\n   * @type {String}\n   */\n  AUTHENTICATION_SCHEME_BASIC: 'AuthenticationScheme_basic',\n\n  /**\n   * @deprecated Use {@link solace.AuthenticationScheme.CLIENT_CERTIFICATE} instead.\n   * @type {String}\n   */\n  AUTHENTICATION_SCHEME_CLIENT_CERTIFICATE: 'AuthenticationScheme_clientCertificate',\n\n  /**\n   * @default AuthenticationScheme_oauth2\n   * @description Oauth2 authentication scheme.\n   * @see {@link solace.SessionProperties#accessToken}\n   * @see {@link solace.SessionProperties#idToken}\n   * @see {@link solace.SessionProperties#issuerIdentifier}\n   * @type {String}\n   */\n  OAUTH2: 'AuthenticationScheme_oauth2',\n};\n\nmodule.exports.AuthenticationScheme = Enum.new(AuthenticationScheme);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Defines the possible TransportSessionEvent codes.\n * @private\n * @enum {number}\n */\nconst TransportSessionEventCode = {\n  // Raised when TransportSession is up and ready to send/receive data\n  UP_NOTICE:           1,\n  // Raised if the session is destroyed\n  DESTROYED_NOTICE:    2,\n  // Raised when the send queue had reached its maximum, but now has space again\n  CAN_ACCEPT_DATA:     4,\n  // Raised when there is a decode error on received data.  The app should destroy the session\n  DATA_DECODE_ERROR:   5,\n  // Raised when there is a decode error on received data.  The app should destroy the session\n  PARSE_FAILURE:       6,\n  // Raised when the connection times out. The app should attempt downgrade if available.\n  CONNECT_TIMEOUT:     7,\n  // There was an error sending a message on an etablished transport\n  SEND_ERROR:          8,\n  // The requested downgrade was rejected.\n  DOWNGRADE_FAILED:    10,\n  // The requested downgrade completed.\n  DOWNGRADE_SUCCEEDED: 11,\n};\n\nmodule.exports.TransportSessionEventCode = Enum.new(TransportSessionEventCode);\n","const CodecLib = require('./lib/codec');\nconst { AdProtocolMessage, BinaryMetaBlock, ClientCtrlMessage, KeepAliveMessage, SMPMessage } = require('./lib/message-objects');\nconst { SMFAdProtocolMessageType } = require('./lib/smf-adprotocol-message-types');\nconst { SMFAdProtocolParam } = require('./lib/smf-adprotocol-params');\nconst { SMFClientCtrlMessageType } = require('./lib/smf-client-ctrl-message-types');\nconst { SMFClientCtrlParam } = require('./lib/smf-client-ctrl-params');\nconst { SMFParameterType, SMFExtendedParameterType } = require('./lib/smf-parameter-types');\nconst { SMFProtocol } = require('./lib/smf-protocols');\nconst { SMFSMPMessageType } = require('./lib/smf-smp-message-types');\nconst { SMFSMPMessageTypeFlags } = require('./lib/smf-smp-message-type-flags');\nconst { SMFTransportSessionMessageType } = require('./lib/smf-transport-session-message-types');\n\nmodule.exports.AdProtocolMessage = AdProtocolMessage;\nmodule.exports.BinaryMetaBlock = BinaryMetaBlock;\nmodule.exports.ClientCtrlMessage = ClientCtrlMessage;\nmodule.exports.Codec = CodecLib;\nmodule.exports.KeepAliveMessage = KeepAliveMessage;\nmodule.exports.SMFAdProtocolMessageType = SMFAdProtocolMessageType;\nmodule.exports.SMFAdProtocolParam = SMFAdProtocolParam;\nmodule.exports.SMFClientCtrlMessageType = SMFClientCtrlMessageType;\nmodule.exports.SMFClientCtrlParam = SMFClientCtrlParam;\nmodule.exports.SMFParameterType = SMFParameterType;\nmodule.exports.SMFProtocol = SMFProtocol;\nmodule.exports.SMFSMPMessageTypeFlags = SMFSMPMessageTypeFlags;\nmodule.exports.SMFSMPMessageType = SMFSMPMessageType;\nmodule.exports.SMFTransportSessionMessageType = SMFTransportSessionMessageType;\nmodule.exports.SMPMessage = SMPMessage;\nmodule.exports.SMFExtendedParameterType = SMFExtendedParameterType;\n","const { Enum } = require('solclient-eskit');\n\nconst ConsumerStateNames = {\n  UNBOUND:                       'UNBOUND',\n  UNBOUND_AWAIT_SESSION_UP:      'UNBOUND_AWAIT_SESSION_UP',\n  UNBOUND_AWAIT_FLOWOPEN:        'UNBOUND_AWAIT_FLOWOPEN',\n  UNBOUND_AWAIT_ANY:             'UNBOUND_AWAIT_ANY',\n  BIND_SENT:                     'BIND_SENT',\n  FLOW_UP:                       'FLOW_UP',\n  FLOW_UP_XFER:                  'FLOW_UP_XFER',\n  FLOW_UP_XFER_INACTIVE:         'FLOW_UP_XFER_INACTIVE',\n  UNBIND_SENT:                   'UNBIND_SENT',\n  RECONNECTING:                  'RECONNECTING',\n  RECONNECTING_BIND_SENT:        'RECONNECTING_BIND_SENT',\n  RECONNECTING_AWAIT_SESSION_UP: 'RECONNECTING_AWAIT_SESSION_UP',\n  RECONNECTING_AWAIT_TIMER:      'RECONNECTING_AWAIT_TIMER',\n  CREATE_SENT:                   'CREATE_SENT',\n};\n\nmodule.exports.ConsumerStateNames = Enum.new(ConsumerStateNames);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFSMPMessageType = {\n  ADDSUBSCRIPTION:              0x00,\n  REMSUBSCRIPTION:              0x01,\n  ADDQUEUESUBSCRIPTION:         0x02,\n  REMQUEUESUBSCRIPTION:         0x03,\n  ADDSUBSCRIPTIONFORCLIENTNAME: 0x04,\n  REMSUBSCRIPTIONFORCLIENTNAME: 0x05,\n};\n\nmodule.exports.SMFSMPMessageType = Enum.new(SMFSMPMessageType);\n","const { LOG_ERROR } = require('solclient-log');\nconst { State } = require('./state');\nconst { StateContext } = require('./state-context');\n\n/**\n * @classdesc\n * This is a state machine that can host states.  States themselves can also\n * host inner states in a hierarchical manner.  This class also provides the\n * basic interface for manipulating the current state via processing of\n * events, and querying the current state through 'getActiveState' methods.\n *\n * @private\n * @memberof solace\n */\nclass StateMachine extends StateContext {\n  /**\n   * @constructor\n   *\n   * @param {Object} spec The object specifier for the FSM.\n   * @param {String} spec.name The name of the FSM, used in debug logs.\n   */\n  constructor(spec) {\n    if (spec.parentContext) {\n      throw new Error(`State machine cannot have parent state: ${spec.parentContext}`);\n    }\n    super(spec);\n    this.impl.ancestorList = [this];\n    this.impl.eventQueue = [];\n    this.impl.finalState = new State({ name: 'impl.final', parentContext: this });\n    this.impl.handleUncaughtException = (ev, exc) => {\n      LOG_ERROR(`Uncaught exception in ${this} while processing ${ev}: ${exc.stack}`);\n      return this.terminate();\n    };\n  }\n\n  /**\n   * This method enqueues the given function, and begins execution of queued functions if\n   * they aren't already executing.\n   * @param {Function} func The function to enqueue and execute.\n   * @returns {Boolean} `true` if the supplied function has completed; false if it was deferred.\n   */\n  process(func) {\n    const { impl } = this;\n    const { eventQueue } = impl;\n\n    eventQueue.push(func);\n    if (impl.processingEvents) {\n      return false;\n    }\n    impl.processingEvents = true;\n\n    while (eventQueue.length) {\n      const evt = eventQueue.shift();\n      evt.apply(this);\n    }\n\n    impl.processingEvents = false;\n    this._onEventCompletion();\n    return true;\n  }\n\n  /**\n   * This method starts a state machine after it has been created and states\n   * have been associated and configured any time getCurrentState() returns\n   * undefined.  This would be after initial creation and after the state\n   * machine has terminated (i.e. transitioned to the final state).\n   */\n  start() {\n    if (this.getCurrentState()) {\n      throw new Error(`Cannot start ${this.getName()}; it is already started.`);\n    }\n\n    this.process(() => {\n      const result = this.onInitial();\n\n      // A state machine's onInitial must specify a destState, the state\n      // cannot be the state machine itself, and the state must have the\n      // state machine as the top ancestor.\n      if (result.destState === undefined) {\n        throw new Error(`Missing destination state from initial transition for ${this}`);\n      }\n\n      if (result.destState === this) {\n        throw new Error(`Destination state for initial transition for ${this} cannot be the FSM.`);\n      }\n\n      const destAncestorList = result.destState.getAncestorList();\n      if (destAncestorList[0] !== this) {\n        throw new Error(`Invalid destination state (${result.destState\n          }) from initial transition for state machine (${this\n          }); destState ancestor (${destAncestorList[0]})`);\n      }\n\n      this.impl.currentState = this.processReactionResult(result);\n    });\n  }\n\n  /**\n   * Used to query whether the state machine is currently running\n   * @returns {Boolean} `true` if the state machine is processing events; false otherwise.\n   */\n  isRunning() {\n    return this.impl.processingEvents;\n  }\n\n  /**\n   * This is the main function to invoke an FSM with an event.\n   * @param {FsmEvent} evt The event to be processed by the FSM.\n   */\n  processEvent(evt) {\n    const { impl } = this;\n    if (!this.process(() => {\n      this.log(`Processing event ${evt}`);\n      let result;\n      if (impl.currentState) {\n        try {\n          result = impl.currentState.handleEvent(evt);\n          impl.currentState = impl.currentState.processReactionResult(result, evt);\n        } catch (exc) {\n          this.log(`Caught exception ${exc}, continuing`);\n          result = impl.handleUncaughtException.call(impl.currentState,\n                                                     evt,\n                                                     exc);\n          impl.currentState = impl.currentState.processReactionResult(result, evt);\n        }\n      }\n    })) {\n      // Didn't run immediately\n      this.log(`Deferring event ${evt}`);\n    }\n  }\n\n  /**\n   * Terminates the FSM by transitioning the FSM to its final state. After\n   * this returns, the FSM may be started again with @link start.  This method\n   * should only be called externally from the FSM, not from within a reaction.\n   * To terminate the FSM within a reaction, use the\n   * {@link StateContext.ReactionResult} returned by {@link State#terminate}.\n   */\n  terminateFsm() {\n    const curState = this.getCurrentState();\n    if (!curState) {\n      return;\n    }\n    if (this.impl.processingEvents) {\n      throw new Error('Cannot terminate state machine while FSM is processing ' +\n            'events. To terminate the FSM from within a reaction, return ' +\n            'State~terminate() from a reaction.');\n    }\n    this.process(() => {\n      const result = curState.terminate();\n      this.impl.currentState = curState.processReactionResult(result);\n    });\n  }\n\n  /**\n   * This should only be called from within the context of a reaction\n   * function, which is to say a function called by the FSM infrastructure\n   * that returns {@link StateContext~ReactionResult}.  The purpose of this\n   * function is to set a function to be called after the currently\n   * executing event is completely handled, which includes the execution of\n   * any events that have been or will be queued as a result of processing\n   * the current event.\n   *\n   * Typical uses of this would be to set a function that does one of:\n   * 1. Throws an exception to the caller.\n   * 2. Calls an application callback.\n   * @param {Function} postEventAction function to call when the FSM has finished\n   *  processing events.  The context (i.e. 'this') will be the FSM when it\n   *  is called.\n   */\n  setPostEventAction(postEventAction) {\n    if (!this.impl.processingEvents) {\n      throw new Error('Cannot set post event hook unless FSM is processing events.');\n    }\n    if (!postEventAction || typeof postEventAction !== 'function') {\n      // TBD: Do we need to allow clearing of the hook?  Not that\n      // I'm aware of for the known use cases.  If we want to allow\n      // it, I propose adding a 'clearPostEventAction' rather than\n      // allowing null or undefined as the argument.\n      throw new Error(`postEventAction must be a function; got (${postEventAction})`);\n    }\n    this.impl.postEventAction = postEventAction.bind(this);\n  }\n\n  /**\n   * Called by the FSM when it finishes processing events.  If a\n   * postEventAction had been set, it will be called, then cleared.\n   * @private\n   */\n  _onEventCompletion() {\n    const action = this.impl.postEventAction;\n    if (action) {\n      this.impl.postEventAction = undefined;\n      this.log('Running post event action');\n      action.apply(this);\n    }\n  }\n\n  /**\n   * Returns the innermost active state.\n   *\n   * If regions were implemented, this would return an iterator to innermost\n   * active states.\n   *\n   * @returns {StateContext} The innermost active state.\n   */\n  getCurrentState() {\n    return this.impl.currentState;\n  }\n\n  /**\n   * Gets an active state by name.  Returns undefined if the named state is\n   * not currently active.\n   *\n   * Note the returned state may not be the innermost state as returned by\n   * {@link StateMachine#getCurrentState}.  If the innermost active state is not\n   * returned, the returned state is guaranteed to contain the innermost active\n   * state.\n   *\n   * @param {String} name The name of the state to be retrieved.\n   * @returns {?StateContext} The state with the specified name, if the\n   *      state is active; undefined otherwise.  Note the returned state may not\n   *      be the innermost active state.\n   */\n  getActiveState(name) {\n    const activeStates = this.impl.currentState.getAncestorList();\n    // Don't include the first ancestor in the loop since it is the state\n    // machine itself, not a state.\n    for (let i = 1; i < activeStates.length; ++i) {\n      if (activeStates[i].getName() === name) {\n        return activeStates[i];\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Checks if the named state is currently active.\n   * @param {String} name The name of the state to be queried.\n   * @returns {Boolean} Whether or not the named state is active.\n   */\n  isStateActive(name) {\n    return this.getActiveState(name) !== undefined;\n  }\n\n  /**\n   * Allows a reaction to be registered for unhandled events in the FSM.  The\n   * default reaction is to log the unhandled event at debug and remain in the\n   * current state with no other side effects.\n   * @param {StateContext.reactionCallback} r The reaction to be invoked when an\n   *      event is unhandled by the FSM.\n   * @returns {StateMachine} This StateMachine object.\n   */\n  unhandledEventReaction(r) {\n    if (typeof r !== 'function') {\n      throw new Error(`In ${this}: unhandled event reaction must be a function; got ${r}`);\n    }\n    this.impl.handleUnhandledEvent = r.bind(this);\n    return this;\n  }\n\n  /**\n   * This allows a reaction to be registered for uncaught exceptions while\n   * processing events.  Generally, it is preferred to catch exceptions from\n   * within reaction functions.  However, this is a good way to safeguard\n   * against missed exceptions.  Usually an error should be logged here,\n   * which is the default behaviour.\n   *\n   * Also note that this is only called for either:\n   * - an exception thrown from an event reaction;\n   * - an exception thrown from a transition action\n   * If exceptions are thrown from within state entry, exit, initials, etc,\n   * this function is not invoked.  These functions may end up getting\n   * invoked from the transition taken as a result of the exception in the\n   * first place.  The generate another exception would be difficult to\n   * handle in a sensible way.  Users of this infrastructure must always\n   * catch exceptions from these functions.\n   *\n   * @param {fsm.StateContext.reactionCallback} r The reaction to be\n   *      invoked when an exception has not been caught by another of the\n   *      FSM's reactionCallbacks.  When this function is invoked, 'this'\n   *      will be the FSM's current state.\n   * @returns {StateMachine} `this`, for method chaining.\n   */\n  uncaughtExceptionReaction(r) {\n    if (typeof r !== 'function') {\n      throw new Error(`In ${this}: Uncaught exception reaction must be a function; got ${r}`);\n    }\n    this.impl.handleUncaughtException = r;\n    return this;\n  }\n\n  /**\n   * Used by the implementation to get the final state.  This should never be\n   * used by applications.  Their only need to reference this state should be\n   * indirectly via the {@link State#terminate} function.\n   * @returns {State} The FSM's final state, which is a hidden implementation\n   *      detail of the FSM.\n   * @protected\n   */\n  getFinalState() {\n    return this.impl.finalState;\n  }\n}\n\nmodule.exports.StateMachine = StateMachine;\n","const {\n  LOG_INFO,\n  LOG_WARN,\n} = require('solclient-log');\nconst { Process } = require('solclient-util');\n\n/**\n * @classdesc\n * Base class for transports\n * @memberof solace\n * @private\n */\nclass TSHState {\n  /**\n   * @constructor\n   * @param {Boolean} useSsl True if SSL should be used\n   * @param {TransportProtocol} tpProtocol The protocol to use for this state\n   * @param {Function} exitCallback The callback to notify on exit\n   * @param {?TSHState} nextState The TSH state to use on downgrade\n   */\n  constructor(useSsl, tpProtocol, exitCallback, nextState) {\n    this._ssl = !!useSsl;\n    this._transportProtocol = tpProtocol;\n    this._exitCallback = exitCallback;\n    this._nextState = nextState;\n    this._unsupportedRuntimeMessage =\n      `${this._transportProtocol} not supported by this runtime: ${Process.userAgent}`;\n  }\n\n  getNextState() {\n    return this._nextState;\n  }\n\n  setNextState(nextState) {\n    this._nextState = nextState;\n  }\n\n  getTransportProtocol() {\n    return this._transportProtocol;\n  }\n\n  getUseSsl() {\n    return this._ssl;\n  }\n\n  // Override me\n  validateLegal() { // eslint-disable-line class-methods-use-this\n    return true;\n  }\n\n  onEnter() {\n    if (!this.validateLegal()) {\n      if (this._nextState && this._exitCallback) {\n        this._exitCallback(this._nextState, this._unsupportedRuntimeMessage);\n      } else {\n        LOG_WARN(`${this._unsupportedRuntimeMessage}, no next state.`);\n      }\n    }\n  }\n\n  completeDowngrade(err) {\n    if (this._nextState && this._exitCallback) {\n      LOG_INFO(`Connect failed (${err}), try next state.`);\n      this._exitCallback(this._nextState, 'Connect failed');\n      return true;\n    }\n    LOG_WARN(`Connect failed (${err}), no next state.`);\n    return false;\n  }\n\n  toString() {\n    return this._transportProtocol + (this._ssl ? ' (SSL)' : '');\n  }\n\n}\n\nmodule.exports.TSHState = TSHState;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^WebSocket$\" }] */\n'use strict';\n\nconst WebSocket = require('./websocket');\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let terminateOnDestroy = true;\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg, isBinary) {\n    const data =\n      !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n\n    if (!duplex.push(data)) ws.pause();\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.isPaused) ws.resume();\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","const DebugLib = require('solclient-debug');\nconst MessageDumpUtilLib = require('./message-dump-util');\nconst { Destination } = require('solclient-destination');\nconst { LOG_ERROR } = require('solclient-log');\nconst { Long } = require('solclient-convert');\nconst { MessageCacheStatus } = require('./message-cache-status');\nconst { MessageDeliveryModeType } = require('./message-delivery-mode-types');\nconst { MessageDumpFlag } = require('./message-dump-flags');\nconst { MessageUserCosType } = require('./message-user-cos-types');\nconst { SDTMapContainer, SDTFieldType } = require('solclient-sdt');\nconst { StringUtils } = require('solclient-util');\n\n\nconst MessageDumpStandardProvider = {\n\n  fpDestination(message/* , flags*/) {\n    const dest = message.getDestination();\n    if (dest !== null && dest instanceof Destination) {\n      return ['Destination', true, dest.toString(), null];\n    }\n    return ['Destination', false, '', null];\n  },\n\n  fpSenderId(message/* , flags*/) {\n    return ['SenderId', (message.getSenderId() !== undefined && message.getSenderId() !== null), message.getSenderId(), null];\n  },\n\n  fpAppmsgType(message/* , flags*/) {\n    return ['AppMessageType', (message.getApplicationMessageType() !== undefined && message.getApplicationMessageType() !== null),\n      message.getApplicationMessageType(), null];\n  },\n\n  fpAppMsgId(message/* , flags*/) {\n    return ['AppMessageID', (message.getApplicationMessageId() !== undefined && message.getApplicationMessageId() !== null),\n      message.getApplicationMessageId(), null];\n  },\n\n  fpSequenceNumber(message/* , flags*/) {\n    const sequenceNum = message.getSequenceNumber();\n    if (typeof sequenceNum === 'number') {\n      return ['SequenceNumber', true, sequenceNum, null];\n    }\n    return ['SequenceNumber', false, '', null];\n  },\n\n  fpTopicSequenceNumber(message/*, flags */) {\n    const topicSeqNo = message.getTopicSequenceNumber();\n    if (Long.isLong(topicSeqNo)) {\n      return ['TopicSequenceNumber', true, topicSeqNo.toString(), null];\n    }\n    return ['TopicSequenceNumber', false, '', null];\n  },\n\n  fpCorrelationId(message/* , flags*/) {\n    return ['CorrelationId', (message.getCorrelationId() !== undefined && message.getCorrelationId() !== null),\n      message.getCorrelationId(), null];\n  },\n\n  fpHttpContentType(message /*, flags*/) {\n    return ['HTTP Content Type', (message.getHttpContentType() !== undefined && message.getHttpContentType() !== null),\n      message.getHttpContentType(), null];\n  },\n\n  fpHttpContentEncoding(message /*, flags*/) {\n    return ['HTTP Content Encoding', (message.getHttpContentEncoding() !== undefined && message.getHttpContentEncoding() !== null),\n      message.getHttpContentEncoding(), null];\n  },\n\n  fpSendTimestamp(message/* , flags*/) {\n    const timestamp = message.getSenderTimestamp();\n    if (typeof timestamp === 'number') {\n      const mdu = MessageDumpUtilLib.MessageDumpUtil;\n      return ['SendTimestamp', true,\n        `${timestamp} (${mdu.formatDate(timestamp)})`, null];\n    }\n    return ['SendTimestamp', false, '', null];\n  },\n\n  fpRcvTimestamp(message/* , flags*/) {\n    const timestamp = message.getReceiverTimestamp();\n    if (typeof timestamp === 'number') {\n      const mdu = MessageDumpUtilLib.MessageDumpUtil;\n      return ['RcvTimestamp', true,\n        `${timestamp} (${mdu.formatDate(timestamp)})`, null];\n    }\n    return ['RcvTimestamp', false, '', null];\n  },\n\n  fpClassOfService(message/* , flags*/) {\n    const cos = message.getUserCos();\n    if (typeof cos === 'number') {\n      return ['Class Of Service', true, MessageUserCosType.nameOf(message.getUserCos()), null];\n    }\n    return ['Class Of Service', false, '', null];\n  },\n\n//  fpPriority(message/* , flags*/) {\n//    const prio = message.getPriority() !== undefined ? message.getPriority() : 'undefined';\n//    return ['Message Priority', true, prio, null];\n//  },\n\n  fpDeliveryMode(message/* , flags*/) {\n    const mode = message.getDeliveryMode();\n    if (typeof mode === 'number') {\n      return ['DeliveryMode', true, MessageDeliveryModeType.nameOf(message.getDeliveryMode()), null];\n    }\n    return ['DeliveryMode', false, '', null];\n  },\n\n  fpGuaranteedMsgId(message/*, flags*/) {\n    const msgId = message.getGuaranteedMessageId();\n    if (Long.isLong(msgId)) {\n      return ['Message Id', true, msgId.toString(10), null];\n    }\n    return ['Message Id', false, '', null];\n  },\n\n  fpReplicationGroupMessageId(message/* , flags*/) {\n    const rgmid = message.getReplicationGroupMessageId();\n    if (rgmid === undefined) {\n      return ['Replication Group Message Id', false, '', null];\n    }\n    return ['Replication Group Message Id', true, rgmid.toString(), null];\n  },\n\n  fpTimeToLive(message/* , flags */) {\n    const timeToLive = message.getTimeToLive();\n    if (typeof timeToLive === 'number') {\n      const mdu = MessageDumpUtilLib.MessageDumpUtil;\n      const d = new Date();\n      return ['TimeToLive', true,\n        `${timeToLive} (${mdu.formatDate(d.getTime() + timeToLive)})`, null];\n    }\n    return ['TimeToLive', false, '', null];\n  },\n\n  fpExpiration(message/*, flags*/) {\n    const timestamp = message.getGMExpiration();\n    if (typeof timestamp === 'number') {\n      const mdu = MessageDumpUtilLib.MessageDumpUtil;\n      return ['Expiration', true,\n        `${timestamp} (${mdu.formatDate(timestamp)})`, null];\n    }\n    return ['Expiration', false, '', null];\n  },\n\n  fpMessageDMQEligible(message/* , flags*/) {\n    return ['DMQ Eligible', message.isDMQEligible(), '', null];\n  },\n\n  fpMessageRedelivered(message/* , flags*/) {\n    return ['Message Re-delivered', message.isRedelivered(), '', null];\n  },\n\n  fpMessageDeliveryCount(message/* , flags*/) {\n    //TODO: exception handling!\n    try {\n      return ['Message Delivery Count', true, message.getDeliveryCount(), null];\n    } catch (e) {\n      return ['Message Delivery Count', false, '', null];\n    }\n  },\n\n  fpDiscardIndication(message/* , flags*/) {\n    return ['Discard Indication', message.isDiscardIndication(), '', null];\n  },\n\n  fpAckImmediately(message/* , flags*/) {\n    return ['ACK Immediately', message.isAcknowledgeImmediately(), '', null];\n  },\n\n  fpElidingEligible(message/* , flags*/) {\n    return ['Eliding Eligible', message.isElidingEligible(), '', null];\n  },\n\n  fpReplyMessage(message/* , flags*/) {\n    return ['Reply Message', message.isReplyMessage(), '', null];\n  },\n\n  fpReplyTo(message/* , flags*/) {\n    const replyTo = message.getReplyTo();\n    if (replyTo !== null && replyTo instanceof Destination) {\n      return ['ReplyTo', true, replyTo.toString(), null];\n    }\n    return ['ReplyTo', false, '', null];\n  },\n\n  fpDeliverToOne(message/* , flags*/) {\n    return ['Deliver To One', message.isDeliverToOne(), '', null];\n  },\n\n  fpCacheMessage(message/* , flags*/) {\n    return ['Message from cache', message.getCacheStatus() !== MessageCacheStatus.LIVE, '', null];\n  },\n\n  fpCacheRequestId(message/*, flags */) {\n    const cacheRequestId = message.getCacheRequestId();\n    if (typeof cacheRequestId === 'number') {\n      return ['Cache Request Id', true, cacheRequestId, null];\n    }\n    return ['Cache Request Id', false, '', null];\n  },\n\n  fpUserPropertyMap(message, flags) {\n    const propMap = message.getUserPropertyMap();\n    if (propMap !== null && propMap instanceof SDTMapContainer) {\n      const value = `${propMap.getKeys().length} entries`;\n      let detailValue = null;\n      if (flags === MessageDumpFlag.MSGDUMP_FULL) {\n        try {\n          const mdu = MessageDumpUtilLib.MessageDumpUtil;\n          detailValue = mdu.printMap(propMap, 2);\n        } catch (e) {\n          LOG_ERROR(e.message, e.stack);\n          detailValue = 'Error';\n        }\n      }\n      return ['User Property Map', true, value, detailValue];\n    }\n    return ['User Property Map', false, '', null];\n  },\n\n  fpCorrelationTag(message/*, flags*/) {\n    const strValue = message.getCorrelationKey();\n    return ['Correlation Tag Pointer', (strValue !== undefined && strValue !== null),\n      strValue, null];\n  },\n\n  fpUserData(message/* , flags*/) {\n    if (StringUtils.notEmpty(message.getUserData())) {\n      return ['User Data', true, `len=${message.getUserData().length}`,\n        DebugLib.Debug.formatDumpBytes(message.getUserData(), true, 2)];\n    }\n    return ['User Data', false, '', null];\n  },\n\n  fpXmlMetadata(message, flags) {\n    const xmlMetadata = message.getXmlMetadata();\n    if (StringUtils.notEmpty(xmlMetadata)) {\n      const value = `len=${xmlMetadata.length}`;\n      let detailValue = null;\n      if (flags === MessageDumpFlag.MSGDUMP_FULL) {\n        detailValue = DebugLib.Debug.formatDumpBytes(xmlMetadata, true, 2);\n      }\n      return ['XML Metadata', true, value, detailValue];\n    }\n    return ['XML Metadata', false, '', null];\n  },\n\n\n  fpTracingCreationContext(message, flags) {\n    const _creationContext = message.getCreationContext();\n\n    const isPresent = (_creationContext != null\n      && _creationContext.getTraceId() != null\n      && _creationContext.getSpanId() != null);\n\n    let detailValue = null;\n    if (flags && flags === MessageDumpFlag.MSGDUMP_FULL) {\n      detailValue = (_creationContext != null) ? _creationContext.toString() : null;\n    }\n    return ['Tracing CreationContext', isPresent, detailValue, null];\n  },\n\n  fpTracingTransportContext(message, flags) {\n    const _transportContext = message.getTransportContext();\n\n    const isPresent = (_transportContext != null\n      && _transportContext.getTraceId() != null\n      && _transportContext.getSpanId() != null);\n\n    let detailValue = null;\n    if (flags && flags === MessageDumpFlag.MSGDUMP_FULL) {\n      detailValue = (_transportContext != null) ? _transportContext.toString() : null;\n    }\n    return ['Trace Context SMF Parameter', isPresent, detailValue, null];\n  },\n\n  fpTracingBaggage(message, flags) {\n    const isPresent = (message.getBaggage() != null\n      && message.getBaggage().getBaggage() != null);\n\n    let detailValue = null;\n    if (flags && flags === MessageDumpFlag.MSGDUMP_FULL) {\n      const _baggage = message.getBaggage();\n      detailValue = (_baggage != null) ? _baggage.getBaggage() : null;\n    }\n    return ['Tracing Baggage', isPresent, detailValue, null];\n  },\n\n  fpSdtStream(message, flags) {\n    const sdtFieldValue = message.getSdtContainer();\n    if (sdtFieldValue !== null && sdtFieldValue.getType() === SDTFieldType.STREAM) {\n      const mdu = MessageDumpUtilLib.MessageDumpUtil;\n      const value = `${mdu.countItems(sdtFieldValue.getValue())} entries`;\n      let detailValue = null;\n      if (flags === MessageDumpFlag.MSGDUMP_FULL) {\n        try {\n          detailValue = mdu.printStream(sdtFieldValue.getValue(), 2);\n        } catch (e) {\n          LOG_ERROR(e.message, e.stack);\n          detailValue = 'Error';\n        }\n      }\n      return ['SDT Stream', true, value, detailValue];\n    }\n    return ['SDT Stream', false, '', null];\n  },\n\n  fpSdtMap(message, flags) {\n    const sdtFieldValue = message.getSdtContainer();\n    if (sdtFieldValue !== null && sdtFieldValue.getType() === SDTFieldType.MAP) {\n      const value = `${sdtFieldValue.getValue().getKeys().length} entries`;\n      let detailValue = null;\n      if (flags === MessageDumpFlag.MSGDUMP_FULL) {\n        try {\n          const mdu = MessageDumpUtilLib.MessageDumpUtil;\n          detailValue = mdu.printMap(sdtFieldValue.getValue(), 2);\n        } catch (e) {\n          LOG_ERROR(e.message, e.stack);\n          detailValue = 'Error';\n        }\n      }\n      return ['SDT Map', true, value, detailValue];\n    }\n    return ['SDT Map', false, '', null];\n  },\n\n  fpBinaryAttachment(message, flags) {\n    if (!message._binaryAttachment || message._binaryAttachment.length < 1) {\n      return ['Binary Attachment', false, '', null];\n    }\n    const att = message._binaryAttachment.toString('latin1');\n    const value = `len=${att.length}`;\n    let detailValue = null;\n    if (flags === MessageDumpFlag.MSGDUMP_FULL) {\n      detailValue = DebugLib.Debug.formatDumpBytes(att, true, 2);\n    }\n    return ['Binary Attachment', true, value, detailValue];\n  },\n\n  fpXmlContent(message, flags) {\n    const xml = message.getXmlContent();\n    if (StringUtils.notEmpty(xml)) {\n      const value = `len=${xml.length}`;\n      let detailValue = null;\n      if (flags === MessageDumpFlag.MSGDUMP_FULL) {\n        detailValue = DebugLib.Debug.formatDumpBytes(xml, true, 2);\n      }\n      return ['XML', true, value, detailValue];\n    }\n    return ['XML', false, '', null];\n  },\n\n};\n\nmodule.exports.MessageDumpStandardProvider = MessageDumpStandardProvider;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * The publisher currently isn't exposed, and its events are dispatched\n * via the Session. These events are therefore private. They should\n * be moved to MessageConsumerEventName when they are made public.\n * @private\n */\nconst MessagePublisherEventName = Enum.new({\n  ACKNOWLEDGED_MESSAGE:      'MessagePublisherEventName_acknowledgedMessage',\n  CONNECT_FAILED_ERROR:      'MessagePublisherEventName_connectFailedError',\n  CAN_SEND:                  'MessagePublisherEventName_canSend',\n  DISPOSED:                  'MessagePublisherEventName_disposed',\n  DOWN:                      'MessagePublisherEventName_down',\n  FLOW_NAME_CHANGED:         'MessagePublisherEventName_flowNameChanged',\n  GUARANTEED_MESSAGING_DOWN: 'MessagePublisherEventName_guaranteedMessagingDown',\n  REJECTED_MESSAGE:          'MessagePublisherEventName_rejectedMessage',\n  DISCONNECT_FAILED_ERROR:   'MessagePublisherEventName_disconnectFailedError',\n  UP:                        'MessagePublisherEventName_up',\n  TRANSPORT_FULL:            'MessagePublisherEventName_transportFull',\n});\n\nmodule.exports.MessagePublisherEventName = MessagePublisherEventName;\n","const { Enum } = require('solclient-eskit');\n\n/********************************************************************************\n * @private\n * Events on the Publisher FSM\n * @enum {string}\n ********************************************************************************/\nconst PublisherFSMEventNames = {\n  SESSION_UP:       'PublisherSessionUp',\n  SESSION_UP_NO_AD: 'PublisherSessionUpNoAD',\n  SESSION_DOWN:     'PublisherSessionDown',\n  FLOW_FAILED:      'MessagePublisherFailed',\n  FLOW_UP:          'MessagePublisherUp',\n  FLOW_CLOSE:       'MessagePublisherClose',\n  FLOW_UNBOUND:     'MessagePublisherUnbound',\n  TRANSPORT_FULL:   'PublisherTransportFull',\n  ACK:              'PublisherAck',\n  ACK_TIMEOUT:      'PublisherAckTimeout',\n  BIND_TIMEOUT:     'PublisherBindTimeout',\n  UNBIND_TIMEOUT:   'PublisherUnbindTimeout',\n  CAN_SEND:         'PublisherCanSend',\n  TRANSPORT_ERROR:  'PublisherTransportError',\n  RESEND_COMPLETE:  'PublisherResendComplete',\n  DISPOSE:          'PublisherDispose',\n};\n\nmodule.exports.PublisherFSMEventNames = Enum.new(PublisherFSMEventNames);\n","const net = require('net');\nconst tls = require('tls');\nconst { ErrorSubcode } = require('solclient-error');\nconst { Hex } = require('solclient-convert');\nconst { LOG_TRACE, LOG_DEBUG, LOG_WARN, LOG_ERROR } = require('solclient-log');\nconst { mixin } = require('solclient-eskit');\nconst { NodeTLSOptsMixin } = require('../node-tls-opts-mixin');\nconst { parseURL } = require('solclient-util');\nconst { TransportBase } = require('../transport-base');\nconst { TransportClientStats } = require('../transport-client-stats');\nconst { TransportError } = require('../transport-error');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionEvent } = require('../transport-session-event');\nconst { TransportSessionEventCode } = require('../transport-session-event-codes');\nconst { TransportSessionState } = require('../transport-session-states');\n\nconst {\n  formatHexString,\n} = Hex;\n\n/**\n *\n * Tcp (smf) transport with TLS (tcps://) support.\n * Only works in node.js.\n * Modelled after the WebSocket transport mostly,\n * except there is no downgrade mechanism.\n * There is no separate \"Transport\" class\n * to manage the downgrade FSM:\n * The TransportSession is the Transport.\n\n * @private\n */\nclass TcpTlsTransport extends TransportBase {\n\n  constructor(url, eventCB, client, props) {\n    // instanitate instance properties defined in TransportBase\n    super(url, eventCB, client, props);\n\n    /**\n     * @private\n     * @type {TransportClientStats}\n     */\n    this._clientstats = new TransportClientStats();\n\n    /**\n     * Maximum amount of send data than can be queued.\n     * NodeJS socket.write accepts all writes, growing a\n     * user space buffer indefinitely.\n     * The TCP transport (same as WS transport)\n     * manages the size of that buffer to stay below this limit.\n     * @private\n     * @type {Number}\n     */\n    this._sendBufferMaxSize = props.sendBufferMaxSize;\n\n    /*\n     * When true, the upper layer was told NO_SPACE and must be notified\n     * of the next \"drained\" event.\n     * @private\n     * @type {Boolean}\n     */\n    this._canSendNeeded = false;\n\n    /*\n     * One-shot flush callback.\n     * Set on flush(), ran and cleared on socket drain event.\n     * @private\n     */\n    this._flushCallback = null;\n\n    /**\n     * Flag to keep track of socket drained state:\n     * Set to false when socket.write returns false,\n     * (indicating user-space buffering)\n     * Set to true on socket drain events.\n     * (indicating the user space buffer has flushed to the OS.)\n     * @type {Boolean}\n     * @private\n     */\n    this._drained = true;\n\n    /**\n     * @type {TransportSessionState}\n     * @private\n     */\n    this._state = TransportSessionState.DOWN;\n\n    /**\n     * @type {?Socket}\n     * @private\n     */\n    //this._socket = null;\n    // Always the raw socket, which is stable from connect() until disconnect().\n    this._tlsSocket = null;\n    // Always the socket to write to.\n    // could be _rawsocket, _tlsSocket, or _compressor.\n    this._writable = null;\n\n    /**\n     * Save the Event in the onError listener\n     * Use it in onClose to populate the event.\n     * (Tcp socket calls onError with the error then onClose.\n     * WS socket calls only onClose and passes the error directly.)\n     * @private\n     * @type {?Error}\n     */\n    this._socketError = null;\n\n    /**\n     * @type {?string}\n     * @private\n     */\n    this._sessionId = new Date().getTime();\n\n    // Some whitebox tests expect a transport->transportSession nesting.\n    this._transportSession = this;\n\n    this._props.transportProtocol = null;\n  }\n\n  /**\n   * @override\n   */\n  getClientStats() {\n    return this._clientstats;\n  }\n\n  setClientStats(newValue) {\n    this._clientstats = newValue;\n  }\n\n  rehome(eventCB, client) {\n    this._eventCB = eventCB;\n    this._client = client;\n  }\n  /**\n   * Extracts host and port from the router URL.\n   * @private\n   * @param {String} urlString the url\n   * @returns {{String, Number}} host and port\n   */\n  parseHostPort(urlString) {\n    let port = null;\n    const urlParsed = parseURL(urlString);\n    if (urlParsed.protocol !== 'tcp:' && urlParsed.protocol !== 'tcps:') {\n      // Should not happen.\n      LOG_ERROR(`Tcp Transport: URL with unexpected scheme: ${urlParsed.protocol}`);\n    }\n    const host = urlParsed.hostname;\n    port = urlParsed.port;\n    if (port === null) {\n      if (this._ssl) {\n        port = 55443;\n      } else {\n        port = this._compressionLevel > 0 ? 55003 : 55555;\n      }\n    }\n    // The rest of the URL (path, etc) is ignored.\n    LOG_TRACE(`Parsing url ${urlString} -> host: ${host} , port: ${port}`);\n    return { host, port };\n  }\n\n  /**\n   * Socket callback.\n   * Bind the socket on setup to avoid stray errors from old sockets\n   * in quick connect()-destroy()-connect() scenarios.\n   * @private\n   * @param {Socket} originalSocket the original socket\n   * @param {Buffer} data the data\n   */\n  onData(originalSocket, data) {\n    // We do not collect Rx stats.\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY ||\n      originalSocket !== this._rawSocket) {\n      LOG_DEBUG('TcpTransportSession stray onData for previous socket, ignoring.');\n      return;\n    }\n    if (this._client) {\n      this._client.rxDataBuffer(data);\n    }\n  }\n\n  /**\n   * Socket callback.\n   * Bind the socket on setup to avoid stray errors from old sockets\n   * in quick connect()-destroy()-connect() scenarios.\n   * @private\n   * @param {Socket} originalSocket the original socket\n   * @param {Error} error the error\n   */\n  onError(originalSocket, error) {\n    if (originalSocket !== this._rawSocket) {\n      LOG_DEBUG('TcpTransportSession stray onError for previous socket, ignoring.');\n      return;\n    }\n\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_TRACE('Tcp transport is being destroyed, ignore error');\n      return;\n    }\n    LOG_DEBUG(`Tcp transport connection error ${error}`);\n    // net.socket invokes the error handler before the close handler.\n    // Websocket does not, and that's what the upper layer expects.\n    // Suppressing the \"double tap\" error events when connected,\n    // saving the error for the onClose handler in _socketerror.\n    if (this._state !== TransportSessionState.SESSION_UP) {\n      if (this._state === TransportSessionState.WAITING_FOR_CREATE) {\n        //There won't be an onClose invocation, so destroying right away.\n        LOG_DEBUG(`Tcp transport connection error during establishment. ${error}`);\n        this._state = TransportSessionState.CONNECTION_FAILED;\n        this._destroy(originalSocket, `Connection failed. Message:${error.message}`, ErrorSubcode.CONNECTION_ERROR);\n      } else {\n        this._eventCB(\n          new TransportSessionEvent(\n            TransportSessionEventCode.SEND_ERROR,\n            `Connection error${error}`,\n            null,\n            ErrorSubcode.CONNECTION_ERROR, null));\n      }\n    } else { // we rely on the close listener to notify the upper layer.\n      this._socketError = error;\n    }\n  }\n\n  /**\n   * Socket callback.\n   * Bind the socket argument to guard against stray invocations in a\n   * quick connect()-destroy()-connect() scenario.\n   * @private\n   * @param {Socket} originalSocket original socket\n   * @param {Boolean} hadError wheter there was an error\n   */\n  onClose(originalSocket, hadError) {\n    if (originalSocket !== this._rawSocket) {\n      LOG_DEBUG('TcpTransportSession stray onClose for previous socket, ignoring.');\n      return;\n    }\n\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_TRACE('Tcp transport is being destroyed, ignore close');\n      return;\n    }\n    const msg = hadError ? 'with error' : 'cleanly';\n    const errorMsg = this._socketError && this._socketError.message;\n    this._socketError = null; // clear on read.\n    LOG_DEBUG(`Tcp transport connection is closed ${msg}. Message: ${errorMsg}`);\n    this._state = TransportSessionState.CONNECTION_FAILED;\n    this._destroy(this._rawSocket, `Connection closed ${msg}. Message:${errorMsg}`,\n                  ErrorSubcode.COMMUNICATION_ERROR);\n  }\n\n  /**\n   * Callback for Socket.connect.\n   * Bind the socket argument to guard against stray invocations in a\n   * quick connect()-destroy()-connect() scenario.\n   * @private\n   * @param {Socket} originalSocket original socket\n   */\n  onOpen(originalSocket) {\n    LOG_TRACE('TcpTransportSession received socket open event.');\n    if (originalSocket !== this._rawSocket) {\n      LOG_DEBUG('TcpTransportSession stray onOpen for previous socket, ignoring.');\n      return;\n    }\n    if (this._state !== TransportSessionState.WAITING_FOR_CREATE) {\n      LOG_DEBUG(`TcpTransportSession stray onOpen when in state ${this._state}, ignoring.`);\n      return;\n    }\n\n    this._state = TransportSessionState.SESSION_UP;\n      // Send the event to the application letting it know that the session is up\n    this._eventCB(\n          new TransportSessionEvent(\n              TransportSessionEventCode.UP_NOTICE,\n              'Connected',\n              0,\n              null,\n              this._sessionId));\n  }\n\n  /**\n   * Establish underlying transport.\n   * @override\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  connect() {\n    if (this._state !== TransportSessionState.DOWN) {\n      LOG_ERROR(`Invalid state for operation: ${TransportSessionState.nameOf(this._state)}`);\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n    if (this._rawSocket) {\n      LOG_ERROR('TCP transport can not connect once _rawsocket exists.');\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n    if (!this._url) {\n      LOG_WARN('Cannot connect to null URL');\n      return TransportReturnCode.CONNECTION_ERROR;\n    }\n\n    LOG_DEBUG('Establishing Tcp transport session');\n    try {\n      this._state = TransportSessionState.WAITING_FOR_CREATE;\n      const { host, port } = this.parseHostPort(this._url);\n      LOG_DEBUG('Constructing socket');\n      // Luckily raw and tls sockets have the same API.\n      this._rawSocket = new net.Socket();\n      this._rawSocket.connect(port, host);\n      const tlsOptions = this.createTLSOptions();\n      tlsOptions.socket = this._rawSocket;\n      this._tlsSocket = tls.connect(tlsOptions);\n      this._tlsSocket.on('secureConnect', this.onOpen.bind(this, this._rawSocket));\n      this._writable = this._tlsSocket;\n      LOG_TRACE('Assigning properties to socket');\n      // WARNING!\n      // This is the kind of thing that breaks on minification.\n      // Re-run unit tests in production mode when changed:\n      // grunt --gruntfile=Gruntfile_Production.js\n      // When broken, consult the closure compiler exceptions file:\n      // (sdk-root)/builder/template/-common/env/externs.js\n      this._writable.on('data', this.onData.bind(this, this._rawSocket));\n      this._writable.on('error', this.onError.bind(this, this._rawSocket));\n      this._writable.on('close', this.onClose.bind(this, this._rawSocket));\n      this._writable.on('drain', this.onDrain.bind(this, this._rawSocket));\n      this._writable.setNoDelay(true);\n\n      LOG_TRACE('Prepared socket');\n    } catch (error) {\n      LOG_DEBUG(`Error connecting: ${error}`);\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      throw new TransportError(`Could not create Tcp socket: ${error.message}`,\n        error.subcode || ErrorSubcode.CONNECTION_ERROR);\n    }\n    LOG_DEBUG('Tcp transport is connecting');\n\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Destroy the underlying transport.\n   * Returns transport return code.\n   * @override\n   * @param {?String} msg The message associated with this operation, if any.\n   * @param {?ErrorSubcode} subcode The subcode associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  destroy(msg, subcode) {\n    // No need to flush the decompressor,\n    // the upper layer is not interested in any more data.\n    return this._destroy(this._rawSocket, msg, subcode);\n  }\n\n  _destroy(originalSocket, msg, subcode) {\n    if (originalSocket !== this._rawSocket) {\n      LOG_DEBUG('TcpTransportSession stray _destroy for previous socket, ignoring.');\n      return TransportReturnCode.OK;\n    }\n    if (this._state !== TransportSessionState.DOWN) {\n      LOG_DEBUG(`Destroy Tcp transport: ${msg}`);\n      // Set state for connection teardown.\n      this._state = TransportSessionState.WAITING_FOR_DESTROY;\n\n      const onerrorStub = function onerrorStub() { };\n      if (this._writable) {\n        this._writable.removeAllListeners();\n        this._writable.on('error', onerrorStub); // Prevent unhandled errors\n        this._writable.end();\n        this._rawSocket = null;\n        this._writable = null;\n      }\n\n      this._canSendNeeded = false;\n      this._flushCallback = null;\n      this._drained = true;\n      this._state = TransportSessionState.DOWN;\n      this._client = null; // Don't accept data.\n    }\n\n    // always send a DESTROYED_NOTICE in response to a destroy() even\n    // if we think the transport is already destroyed\n    LOG_TRACE(`Destroying TCP transport. msg: ${msg} subcode: ${subcode}`);\n    if (this._eventCB) {\n      this._eventCB(new TransportSessionEvent(TransportSessionEventCode.DESTROYED_NOTICE,\n                                              msg || 'Session is destroyed',\n                                              null,\n                                              subcode || 0,\n                                              this._sessionId));\n      // Release references to other components\n      this._eventCB = null;\n    }\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Force fail the underlying transport's socket to force a failure.\n   * Returns transport return code.\n   * @override\n   * @param {?String} msg The message associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  forceFailure(msg) {\n    if (this._state !== TransportSessionState.DOWN) {\n      const errorMsg = (msg !== undefined && msg !== null) ? msg : ''; // default empty\n      LOG_DEBUG(`Destroy Tls transport: ${errorMsg}`);\n      if (this._rawSocket && !this._tlsSocket){\n        this._rawSocket.destroy(new Error(errorMsg));\n      } else if (this._writable) {\n        // destroy the writable which should be the _tlsSocket\n        this._writable.destroy(new Error(errorMsg));\n      }\n    }\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @override\n   * @description Intended for clean shutdowns.\n   * Callback is invoked when all nodejs-buffered data\n   * has been flushed to the OS socket.\n   */\n  flush(callback) {\n    if (this._drained) {\n      LOG_DEBUG('Transport emitting FLUSH immediately.');\n      callback();\n    } else if (callback) {\n      this._flushCallback = callback;\n    }\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @override\n   * @description Send encoded SMF message\n   * Returns transport return code.\n   * @param {String} message The encoded SMF message to send\n   * @param {?Boolean} [forceAllowEnqueue=false] If true, do not fail due to transport buffer full\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  send(message, forceAllowEnqueue = false) {\n    if (this._state !== TransportSessionState.SESSION_UP) {\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n    // Limiting socket buffer size to _sendBufferMaxSize unless\n    // the force flag was set\n    // or the socket is drained, in which case any size message goes.\n    if (forceAllowEnqueue\n      || this._drained\n      || message.length < this._sendBufferMaxSize - this._writable.bufferSize) {\n      // _drained keeps track of \"overflowing\" writes.\n      // nodejs never refuses a write but warns when it starts buffering.\n      this._drained = this._writable.write(message, 'ascii');\n      if (this._clientstats) {\n        this._clientstats.bytesWritten += message.length;\n        ++this._clientstats.msgWritten;\n      }\n      return TransportReturnCode.OK;\n    }\n    // We'll unblock the user on the next onDrain.\n    this._canSendNeeded = true;\n    return TransportReturnCode.NO_SPACE;\n  }\n\n  /**\n   * Socket callback.\n   * Bind the socket on setup to avoid stray errors from old sockets\n   * in quick connect()-destry()-connect() scenarios.\n   * @private\n   * @param {Socket} originalSocket the original socket\n   */\n  onDrain(originalSocket) {\n    if (originalSocket !== this._rawSocket) {\n      LOG_DEBUG('TcpTransportSession stray onDrain for previous socket, ignoring.');\n      return;\n    }\n    this._drained = true;\n\n    if (this._flushCallback) {\n      LOG_DEBUG('Transport emitting FLUSH after drain.');\n      const prevCallback = this._flushCallback;\n      this._flushCallback = null;\n      prevCallback();\n    }\n\n    if (this._canSendNeeded) {\n      LOG_TRACE('Transport emitting CAN_ACCEPT_DATA');\n      this._canSendNeeded = false;\n      this._eventCB(\n        new TransportSessionEvent(TransportSessionEventCode.CAN_ACCEPT_DATA,\n                                  '', null, 0, this._sessionId));\n    }\n  }\n\n  /**\n   * @override\n   */\n  getInfoStr() {\n    const str = `TcpTransportSession; sid=${formatHexString(this._sessionId)}`;\n    return str;\n  }\n\n}\n\nmixin(TcpTlsTransport, NodeTLSOptsMixin);\n\nmodule.exports.TcpTlsTransport = TcpTlsTransport;\n","const DestinationLib = require('solclient-destination');\nconst { Convert } = require('solclient-convert');\nconst { EncodeHeader } = require('./encode-header');\nconst { EncodeInteger } = require('./encode-integer');\nconst { EncodeMap } = require('./encode-map');\nconst { EncodeStream } = require('./encode-stream');\nconst { IEEE754LIB } = require('./ieee754lib');\nconst { SDTDataTypes } = require('../sdt-data-types');\nconst { SDTDestType } = require('../sdt-destination-types');\nconst { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\nconst { StringUtils } = require('solclient-util');\n\nconst { encodeHeader } = EncodeHeader;\nconst { int48ToStr } = EncodeInteger;\nconst { encodeMap } = EncodeMap;\nconst { encodeStream } = EncodeStream;\n\nconst { nullTerminate } = StringUtils;\n\nconst C_2_48 = Math.pow(2, 48);\n\n// UCS-2 --> UTF-8 conversion\nfunction strencode(data) {\n  return unescape(encodeURIComponent(data));\n}\n\n// Encode an SDTField into provided buffer buf\nfunction encodeSingleElementToBuf(sdtfield, buf) {\n  if (!(sdtfield instanceof SDTField)) {\n    return false;\n  }\n  // we write the header at the end, once we know the size\n  const value = sdtfield.getValue();\n  let fieldVal = null;\n  let tag = 0; // SMF TAG\n  switch (sdtfield.getType()) {\n    case SDTFieldType.BOOL:\n      tag = SDTDataTypes.Boolean;\n      fieldVal = Convert.int8ToStr(value ? 1 : 0);\n      break;\n    case SDTFieldType.UINT8:\n      tag = SDTDataTypes.UnsignedInteger;\n      fieldVal = Convert.int8ToStr(value);\n      break;\n    case SDTFieldType.INT8:\n      tag = SDTDataTypes.Integer;\n      fieldVal = Convert.int8ToStr(value);\n      break;\n    case SDTFieldType.UINT16:\n      tag = SDTDataTypes.UnsignedInteger;\n      fieldVal = Convert.int16ToStr(value);\n      break;\n    case SDTFieldType.INT16:\n      tag = SDTDataTypes.Integer;\n      fieldVal = Convert.int16ToStr(value);\n      break;\n    case SDTFieldType.UINT32:\n      tag = SDTDataTypes.UnsignedInteger;\n      fieldVal = Convert.int32ToStr(value);\n      break;\n    case SDTFieldType.INT32:\n      tag = SDTDataTypes.Integer;\n      fieldVal = Convert.int32ToStr(value);\n      break;\n    case SDTFieldType.UINT64:\n      tag = SDTDataTypes.UnsignedInteger;\n      fieldVal = String.fromCharCode(0) + String.fromCharCode(0) + int48ToStr(value);\n      break;\n    case SDTFieldType.INT64:\n      tag = SDTDataTypes.Integer;\n      if (value >= 0) {\n        fieldVal = String.fromCharCode(0) + String.fromCharCode(0) + int48ToStr(value);\n      } else {\n        fieldVal = (String.fromCharCode(0xFF) +\n                    String.fromCharCode(0xFF) +\n                    int48ToStr(C_2_48 + value));\n      }\n      break;\n    case SDTFieldType.WCHAR:\n      tag = SDTDataTypes.Char;\n      fieldVal = Convert.int16ToStr(value.charCodeAt(0));\n      break;\n    case SDTFieldType.STRING:\n      tag = SDTDataTypes.String;\n      fieldVal = nullTerminate(strencode(value));\n      break;\n    case SDTFieldType.BYTEARRAY:\n      tag = SDTDataTypes.ByteArray;\n      fieldVal = value.toString('latin1');\n      break;\n    case SDTFieldType.FLOATTYPE:\n      tag = SDTDataTypes.Float;\n      fieldVal = IEEE754LIB.toIEEE754Single(value);\n      break;\n    case SDTFieldType.DOUBLETYPE:\n      tag = SDTDataTypes.Float;\n      fieldVal = IEEE754LIB.toIEEE754Double(value);\n      break;\n    case SDTFieldType.MAP:\n      tag = SDTDataTypes.Map;\n      fieldVal = encodeMap(value);\n      break;\n    case SDTFieldType.STREAM:\n      tag = SDTDataTypes.Stream;\n      fieldVal = encodeStream(value);\n      break;\n    case SDTFieldType.DESTINATION:\n      tag = SDTDataTypes.Destination;\n      if (value instanceof DestinationLib.Destination) {\n        fieldVal = Convert.int8ToStr(SDTDestType[value.getType()])\n          + value.getBytes();\n      }\n      break;\n    case SDTFieldType.NULLTYPE:\n      tag = SDTDataTypes.Null;\n      fieldVal = '';\n      break;\n    case SDTFieldType.UNKNOWN:\n      fieldVal = null;\n      break;\n    default:\n  }\n  if (fieldVal !== null) {\n    const hdr = encodeHeader(tag, fieldVal.length);\n    buf.push(hdr);\n    buf.push(fieldVal);\n    return true;\n  }\n\n  return false;\n}\n\nfunction encodeSingleElement(sdtfield) {\n  const buf = [];\n  encodeSingleElementToBuf(sdtfield, buf);\n  return buf.join('');\n}\n\nconst EncodeSingleElement = {\n  encodeSingleElement,\n  encodeSingleElementToBuf,\n};\n\nmodule.exports.EncodeSingleElement = EncodeSingleElement;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of message dump formats. It controls\n * the output of {@link solace.Message#dump}.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MessageDumpFlag = {\n  /**\n   * Display only the length of the binary attachment, XML content and user property maps.\n   */\n  MSGDUMP_BRIEF: 0,\n  /**\n   * Display the entire message contents.\n   */\n  MSGDUMP_FULL:  1,\n};\n\nmodule.exports.MessageDumpFlag = Enum.new(MessageDumpFlag);\n","/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * The base class for all errors thrown by the API.\n * @hideconstructor\n * @extends {Error}\n *\n * @memberof solace\n */\nclass SolaceError extends Error {\n  constructor(type, message, constructor) {\n    super(message || '');\n    /**\n     * Error Message.\n     * @name solace.SolaceError#message\n     * @type {String}\n     */\n    this.message = message; // force set\n    /**\n     * The name of the error.\n     * @name solace.SolaceError#name\n     * @type {String}\n     */\n    this.name = type;\n\n    // ES6 error semantics are disappointing\n    // Cleaner stack capture for V8-based VMs\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, constructor);\n    } else {\n      this.stack = new Error().stack;\n    }\n  }\n\n}\n\nmodule.exports.SolaceError = SolaceError;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumeration for smf replay start location value type\n * @private\n */\nconst ReplayStartType = Enum.new({\n  // the value of the Enum is the value of the smf type\n  BEGINNING: 0x00,\n  DATE:      0x01,\n  RGMID:     0x02,\n});\n\n/**\n * @classdesc\n *  * <b>This class is not exposed for construction by API users.\n *  Users should obtain an instances from one of the following:</b>\n * * {@link solace.SolclientFactory.createReplayStartLocationBeginning}\n * * {@link solace.SolclientFactory.createReplayStartLocationDate}\n *\n * Defines the ReplayStartLocation class.\n * The ReplayStartLocation is set in the corresponding\n * MessageConsumer property {@link solace.MessageConsumerProperties#replayStartLocation}\n * The single member variable, _replayStartTime is undefined in ReplayStartLocationBeginning and\n * contains the elapsed time in milliseconds since the epoch in ReplayStartLocationDate\n *\n * @hideconstructor\n * @memberof solace\n */\n\nclass ReplayStartLocation {\n  /**\n   * @constructor\n   * @param {SObject} spec The ReplayStartLocation spec\n   * Use the factory methods on {@link solace.SolclientFactory}.\n   * @private\n   */\n  constructor(spec) {\n    Object.assign(this, spec);\n    if (this._type === undefined) {\n      // use default replay start location type when not specified\n      this._type = ReplayStartType.BEGINNING;\n    }\n  }\n  /**\n   * @returns {String} A generic description of the Destination.\n   */\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.ReplayStartLocation = ReplayStartLocation;\nmodule.exports.ReplayStartType = ReplayStartType;\n","/**\n * Copyright (c) 2011-2016 Paul Vorbach and contributors.\n * \n * Permission is hereby granted, free of charge, to any person obtaining \n * a copy of this software and associated documentation files \n * (the Software), to deal in the Software without restriction, \n * including without limitation the rights to use, copy, modify, \n * merge, publish, distribute, sublicense, and/or sell copies of \n * the Software, and to permit persons to whom the Software is \n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included \n * in all copies or substantial portions of the Software.\n * THE SOFTWARE IS PROVIDED AS IS, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * The is a local modified version of the clone npm module (https://www.npmjs.com/package/clone).\n * According to its description, it offers a foolproof deep cloning \n * of objects, arrays, numbers, strings, maps, sets, \n * promises, etc. in JavaScript.\n * \n * I refactored it to be compatible with Webpack.\n * Refator List:\n * - update the use of the 'var' keyword to 'let' and 'const' where appropriate.\n * - Made the variable names more clearer and intuitive (clean code)\n * - I used ES6 contants/definitions where possible.\n * \n * Original can be found Here:\n * - On Npm -> https://www.npmjs.com/package/clone\n * - On GitHub -> https://github.com/pvorb/node-clone\n * \n * Created by oodigie on 26/05/2023.\n */\n\n'use strict';\n\nconst clone = (function() {\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nlet nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nlet nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nlet nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  const allParents = [];\n  const allChildren = [];\n\n  const useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    let child;\n    let proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      const index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      let keyChild, valueChild;\n      parent.forEach(function(value, key) {\n        keyChild = _clone(key, depth - 1);\n        valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      let entryChild;\n      parent.forEach(function(value) {\n        entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (let i in parent) {\n      let attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      const symbols = Object.getOwnPropertySymbols(parent);\n      for (let i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        let symbol = symbols[i];\n        let descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      const allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (let i = 0; i < allPropertyNames.length; i++) {\n        let propertyName = allPropertyNames[i];\n        let descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  let emptyCloneFunc = function () {};\n  emptyCloneFunc.prototype = parent;\n  return new emptyCloneFunc();\n};\n\n// private utility functions\n\nfunction __objToStr(obj) {\n  return Object.prototype.toString.call(obj);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(obj) {\n  return typeof obj === 'object' && __objToStr(obj) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(obj) {\n  return typeof obj === 'object' && __objToStr(obj) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(obj) {\n  return typeof obj === 'object' && __objToStr(obj) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(regExpOptions) {\n  let flags = '';\n  if (regExpOptions.global) flags += 'g';\n  if (regExpOptions.ignoreCase) flags += 'i';\n  if (regExpOptions.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n\n})();\n\nmodule.exports = clone;\n","const { TransportProtocol } = require('../transport-protocols');\nconst { TSHState } = require('../tsh-state');\nconst { WebTransportCapabilities } = require('./web-transport-capabilities');\n\n/**\n * @classdesc\n * HTTP Binary transport\n * @memberof solace\n * @private\n */\nclass StateBinary extends TSHState {\n  /**\n   * @constructor\n   * @extends TSHState\n   * @param {Boolean} useSsl True if SSL should be used\n   * @param {Function} exitCb Callback to notify on exit\n   * @param {?TSHState} nextState Downgrade target\n   */\n  constructor(useSsl, exitCb, nextState) {\n    super(useSsl, TransportProtocol.HTTP_BINARY, exitCb, nextState);\n  }\n\n  validateLegal() { // eslint-disable-line class-methods-use-this\n    return WebTransportCapabilities.xhrBinary();\n  }\n}\n\nmodule.exports.StateBinary = StateBinary;\n\n","const { Enum } = require('solclient-eskit');\n\n/**\n * solace.CacheLiveDataAction\n * Enumeration of CacheLiveDataAction values, specifying how the CacheSession should handle\n * live data associated with a cache request in progress.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst CacheLiveDataAction = {\n  /**\n   * @type {Number}\n   * @description End the cache request when live data arrives that matches the topic.\n   * Note that wildcard cache requests must always be {@link CacheLiveDataAction.FLOW_THRU}.\n   */\n  FULFILL:   1,\n  /**\n   * @type {Number}\n   * @description Queue arriving live data that matches the topic, until the cache request\n   * completes. Note that wildcard cache requests must always be {@link\n   * solace.CacheLiveDataAction.FLOW_THRU}.\n   */\n  QUEUE:     2,\n  /**\n   * @type {Number}\n   * @description Continue the outstanding cache request while allowing live data to flow through to\n   * the application.\n   * Note that wildcard cache requests must always be {@link CacheLiveDataAction.FLOW_THRU}.\n   */\n  FLOW_THRU: 3,\n};\n\nmodule.exports.CacheLiveDataAction = Enum.new(CacheLiveDataAction);\n","class TimingBucket {\n  constructor(name, interval) {\n    this.name = name;\n    this.interval = interval;\n    this.buckets = [];\n  }\n\n  get bucketCount() {\n    let c = 0;\n    for (let i = 0, n = this.buckets.length; i < n; ++i) {\n      c += this.buckets[i] || 0;\n    }\n    return c;\n  }\n\n  log(v) {\n    if (v === undefined || isNaN(v)) {\n      return;\n    }\n    const normalized = Math.floor(v / this.interval) * this.interval;\n    this.buckets[normalized] = this.buckets[normalized] || 0;\n    this.buckets[normalized]++;\n  }\n\n  toString() {\n    const cont = [];\n    this.buckets.forEach((i) => {\n      cont.push(`${i}: ${this.buckets[i]}`);\n    });\n    return `{${cont.join(', ')}}`;\n  }\n}\n\nmodule.exports.TimingBucket = TimingBucket;\n","const { SessionRequestType } = require('./session-request-types');\n\nmodule.exports = {\n  SubscriptionUpdateTimeoutMessages: {\n    [SessionRequestType.ADD_SUBSCRIPTION]:        'Add subscription request timeout',\n    [SessionRequestType.REMOVE_SUBSCRIPTION]:     'Remove subscription request timeout',\n    [SessionRequestType.ADD_P2PINBOX]:            'Add P2P inbox subscription timeout',\n    [SessionRequestType.REMOVE_P2PINBOX]:         'Remove P2P inbox subscription timeout',\n    [SessionRequestType.REMOVE_DTE_SUBSCRIPTION]: 'Remove endpoint topic subscription',\n    default:                                      'Request timeout',\n  },\n};\n","const { FactoryProfile, SolclientFactoryProfiles } = require('./lib/solclient-factory-profiles');\nconst { ProfileBinding } = require('./lib/profile-binding');\nconst { SolclientFactory } = require('./lib/solclient-factory');\nconst { SolclientFactoryProperties } = require('./lib/solclient-factory-properties');\n\nmodule.exports.FactoryProfile = FactoryProfile;\nmodule.exports.ProfileBinding = ProfileBinding;\nmodule.exports.SolclientFactoryProfiles = SolclientFactoryProfiles;\nmodule.exports.SolclientFactoryProperties = SolclientFactoryProperties;\nmodule.exports.SolclientFactory = SolclientFactory;\n\n","const { Lazy } = require('./lazy');\n\nconst { lazyProperty } = Lazy;\n\nfunction traversePath(commonSource, keySource, pathArr) {\n  return pathArr.reduce((source, value) => {\n    if (typeof value === 'string') {\n      return source[value];\n    }\n    return value;\n  }, keySource);\n}\n\n/**\n * @classdesc\n * Deferred resolution for imports. A heavyweight method of breaking circular dependencies.\n * Each specified key (see below) is resolved once by a function that lazily evaluates a\n * path.\n * <pre>\n * const resolved = new Resolver({\n *  foo: [FooLib, 'fooContainer'],        // Resolves foo from FooLib.fooContainer.foo lazily\n *  bar: ['foo'],                         // Resolves bar from previously defined foo lazily\n *  'baz,quux': [FooLib, 'bazsAndQuuxes'] // baz = FooLib.bazsAndQuuxes.baz,\n *                                        // quux = FooLib.bazsAndQuuxes.quux\n * });\n * </pre>\n * In most cases this is equivalent to using FooLib.fooContainer.foo, et cetera, directly.\n * Prefer that approach unless the dependencies are deeply hierarchical. Prefer the Resolver\n * when one-time evaluation and aliasing a path makes the code more DRY and readable.\n * @private\n */\nclass Resolver {\n  constructor(options, source) {\n    // For every key...\n    Object.keys(options).forEach((compoundKey) => {\n      // Split out key names if multiple were provided\n      compoundKey.split(',').map(k => k.trim()).forEach((key) => {\n        // Build a path array. The key name is the implicit last element.\n        const rawPath = options[compoundKey];\n        const path = typeof rawPath === 'string' ? rawPath.split('.') : rawPath;\n        const pathArr = (Array.isArray(path) ? path : [path]).concat(key);\n        // Create a defer for this key.\n        lazyProperty(this, key, () => traversePath(source, this, pathArr));\n      });\n    });\n  }\n\n  static resolve(options, source) {\n    return new Resolver(options, source);\n  }\n}\n\n\nmodule.exports.Resolver = Resolver;\n","module.exports = require(\"events\");","const IEEE754LIB = {\n  /**\n   * @preserve\n   * The MIT License\n   *\n   * Copyright (c) 2010 Alan Gutierrez\n   *\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\n   * of this software and associated documentation files (the \"Software\"), to deal\n   * in the Software without restriction, including without limitation the rights\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n   * copies of the Software, and to permit persons to whom the Software is\n   * furnished to do so, subject to the following conditions:\n   *\n   * The above copyright notice and this permission notice shall be included in\n   * all copies or substantial portions of the Software.\n   *\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n   * THE SOFTWARE.\n   */\n\n  toIEEE754(vIn, ebits, fbits) {\n    let v = vIn;\n    const bias = (1 << (ebits - 1)) - 1;\n\n    // Compute sign, exponent, fraction\n    let s;\n    let e;\n    let f;\n    if (isNaN(v)) {\n      e = (1 << bias) - 1;\n      f = 1;\n      s = 0;\n    } else if (v === Infinity || v === -Infinity) {\n      e = (1 << bias) - 1;\n      f = 0;\n      s = (v < 0) ? 1 : 0;\n    } else if (v === 0) {\n      e = 0;\n      f = 0;\n      s = (1 / v === -Infinity) ? 1 : 0;\n    } else {\n      s = v < 0;\n      v = Math.abs(v);\n\n      if (v >= Math.pow(2, 1 - bias)) {\n        const ln = Math.min(Math.floor(Math.log(v) / Math.LN2), bias);\n        e = ln + bias;\n        f = (v * Math.pow(2, fbits - ln)) - Math.pow(2, fbits);\n      } else {\n        e = 0;\n        f = v / Math.pow(2, 1 - bias - fbits);\n      }\n    }\n\n    // Pack sign, exponent, fraction\n    const bits = [];\n    for (let i = fbits; i; i -= 1) {\n      bits.push(f % 2 ? 1 : 0);\n      f = Math.floor(f / 2);\n    }\n    for (let i = ebits; i; i -= 1) {\n      bits.push(e % 2 ? 1 : 0);\n      e = Math.floor(e / 2);\n    }\n    bits.push(s ? 1 : 0);\n    bits.reverse();\n    let str = bits.join('');\n\n    // Bits to bytes\n    const bytes = [];\n    while (str.length) {\n      bytes.push(parseInt(str.substring(0, 8), 2));\n      str = str.substring(8);\n    }\n    return bytes;\n  },\n\n  fromIEEE754(bytes, ebits, fbits) {\n    // Bytes to bits\n    const bits = [];\n    for (let i = bytes.length; i; i -= 1) {\n      let byteI = bytes[i - 1];\n      for (let j = 8; j; j -= 1) {\n        bits.push(byteI % 2 ? 1 : 0);\n        byteI >>= 1;\n      }\n    }\n    bits.reverse();\n    const str = bits.join('');\n\n    // Unpack sign, exponent, fraction\n    const bias = (1 << (ebits - 1)) - 1;\n    const s = parseInt(str.substring(0, 1), 2) ? -1 : 1;\n    const e = parseInt(str.substring(1, 1 + ebits), 2);\n    const f = parseInt(str.substring(1 + ebits), 2);\n\n    // Produce number\n    if (e === (1 << ebits) - 1) {\n      return f !== 0 ? NaN : s * Infinity;\n    }\n    if (e > 0) {\n      return s * Math.pow(2, e - bias) * (1 + f / Math.pow(2, fbits));\n    }\n    if (f !== 0) {\n      return s * Math.pow(2, -(bias - 1)) * (f / Math.pow(2, fbits));\n    }\n    return 0;\n  },\n  strToByteArr(str) {\n    const bytes = [];\n    for (let i = 0; i < str.length; i++) { bytes.push(str.charCodeAt(i) & 0xFF); }\n    return bytes;\n  },\n  byteArrToStr(bytes) {\n    const str = [];\n    for (let i = 0; i < bytes.length; i++) { str.push(String.fromCharCode(bytes[i] & 0xFF)); }\n    return str.join('');\n  },\n  fromIEEE754Double(b) { return this.fromIEEE754(this.strToByteArr(b), 11, 52); },\n  toIEEE754Double(v) { return this.byteArrToStr(this.toIEEE754(v, 11, 52)); },\n  fromIEEE754Single(b) { return this.fromIEEE754(this.strToByteArr(b), 8, 23); },\n  toIEEE754Single(v) { return this.byteArrToStr(this.toIEEE754(v, 8, 23)); },\n};\n\nmodule.exports.IEEE754LIB = IEEE754LIB;\n","const { CacheGetResultCode } = require('./cache-get-result-codes');\n\nconst DEFAULTS = {\n  messageID:         null,\n  version:           0,\n  responseCode:      CacheGetResultCode.INVALID,\n  responseString:    '',\n  matchTopic:        '',\n  sessionID:         null,\n  isSuspect:         null,\n  hasMore:           null,\n  hasTimestamps:     null,\n  replyTo:           null,\n  messageStream:     null,\n  clusterNameStream: null,\n};\n\n/**\n * @classdesc CacheGetResult encapsulates the result of a cache get request\n * @private\n */\nclass CacheGetResult {\n  /*\n   * @constructor\n   */\n  constructor(options = DEFAULTS) {\n    Object.assign(this, options);\n  }\n\n  readFromStream(stream) {\n    this.messageID = stream.getNext().getValue();\n    this.version = stream.getNext().getValue();\n    this.responseCode = stream.getNext().getValue();\n    this.responseString = stream.getNext().getValue();\n    // SD claims instanceName is present here but empirically, it's not\n\n    this.matchTopic = stream.getNext().getValue();\n    this.sessionID = stream.getNext().getValue();\n    this.isSuspect = stream.getNext().getValue();\n    this.hasMore = stream.getNext().getValue();\n\n    this.hasTimestamps = stream.getNext().getValue();\n\n    if (stream.hasNext()) { // first stream\n      this.messageStream = stream.getNext().getValue();\n    }\n    if (stream.hasNext()) { // if two streams, first was cluster name stream\n      this.clusterNameStream = this.messageStream;\n      this.messageStream = stream.getNext().getValue();\n    }\n  }\n}\n\nmodule.exports.CacheGetResult = CacheGetResult;\n","const { BaseMessage } = require('./base-message');\n\n/**\n * @classdesc\n * Transport SMF Message\n * @memberof solace\n * @private\n */\nclass TransportSMFMessage extends BaseMessage {\n  /**\n   * @constructor\n   */\n  constructor() {\n    super(null, null);\n    this.uh = 0;\n    this.messageType = null;\n    this.sessionId = null;\n    this.routerTag = null;\n    this.payload = null;\n    this.payloadLength = 0;\n    this.tsHeaderLength = 0;\n  }\n}\n\nmodule.exports.TransportSMFMessage = TransportSMFMessage;\n","const QueueLib = require('solclient-queue');\nconst { APIProperties } = require('solclient-util');\nconst { Check } = require('solclient-validate');\n\nconst DEFAULTS = {\n  queueDescriptor:                         undefined,\n  connectTimeoutInMsecs:                   10000,\n  connectAttempts:                         3,\n  windowSize:                              255,\n  transportAcknowledgeTimeoutInMsecs:      1000,\n  transportAcknowledgeThresholdPercentage: 60,\n};\n\n/**\n * @classdesc\n * Defines the properties for a {@link solace.QueueBrowser}.\n *\n * @memberof solace\n */\nclass QueueBrowserProperties extends APIProperties {\n  constructor(options) {\n    super(DEFAULTS, options);\n  }\n\n  /**\n   * Defines the queue from which to consume.\n   *  * For durable queues and durable topic endpoints, this must be a\n   *    {@link solace.QueueDescriptor}.\n   * @type {solace.QueueDescriptor}\n   */\n  get queueDescriptor() {\n    return Check.something(this._queueDescriptor)\n      ? this._queueDescriptor\n      : DEFAULTS.queueDescriptor;\n  }\n  set queueDescriptor(value) {\n    if (value) {\n      this._queueDescriptor = new QueueLib.QueueDescriptor(value);\n    } else {\n      this._queueDescriptor = value;\n    }\n  }\n\n  // ------------ Properties controlling connection of the consumer ----------------\n  /**\n   * The bind timeout in milliseconds when creating a connection to the Solace Message Router.\n   *  * The valid range is >= 50.\n   * @type {Number}\n   * @default 10000\n   */\n  get connectTimeoutInMsecs() {\n    return Check.something(this._bindTimeoutInMsecs)\n      ? this._bindTimeoutInMsecs\n      : DEFAULTS.connectTimeoutInMsecs;\n  }\n  set connectTimeoutInMsecs(value) {\n    this._bindTimeoutInMsecs = value;\n  }\n\n  /**\n   * Gets and sets the maximum number of bind attempts when creating a connection to the\n   * Solace Message Router.\n   *  * The valid range is >= 1.\n   * @type {Number}\n   * @default 3\n   */\n  get connectAttempts() {\n    return Check.something(this._connectAttempts)\n      ? this._connectAttempts\n      : DEFAULTS.connectAttempts;\n  }\n  set connectAttempts(val) {\n    this._connectAttempts = val;\n  }\n\n  // ----------- Properties controlling an established connection to a queue --------------\n  /**\n   * The window size for Guaranteed Message delivery.  This is the maximum number of messages that\n   * will be prefetched from the Solace Messaging Router and queued internally by the API while\n   * waiting for the application to accept delivery of the messages.\n   *   * The valid range is 1 <= windowSize <= 255.\n   * @type {Number}\n   * @default 255\n   */\n  get windowSize() {\n    return Check.something(this._windowSize)\n      ? this._windowSize :\n      DEFAULTS.windowSize;\n  }\n  set windowSize(val) {\n    this._windowSize = val;\n  }\n\n  /**\n   * The transport acknowledgement timeout for guaranteed messaging in milliseconds.\n   * When the {@link solace.QueueBrowserProperties.transportAcknowledgeTimeoutInMsecs} is not\n   * exceeded, acknowledgements will be returned to the router at intervals not less than\n   * this value.\n   *   * The valid range is 20 <= transportAcknowledgeTimeoutInMsecs <= 1500.\n   * @type {Number}\n   * @default 1000\n   */\n  get transportAcknowledgeTimeoutInMsecs() {\n    return Check.something(this._transportAcknowledgeTimeoutInMsecs)\n      ? this._transportAcknowledgeTimeoutInMsecs\n      : DEFAULTS.transportAcknowledgeTimeoutInMsecs;\n  }\n  set transportAcknowledgeTimeoutInMsecs(val) {\n    this._transportAcknowledgeTimeoutInMsecs = val;\n  }\n\n  /**\n   * The threshold for sending an acknowledgement, as a percentage.\n   * The API sends a transport acknowledgment every\n   * N messages where N is calculated as this percentage of the transport\n   * window size if the endpoint's max-delivered-unacked-msgs-per-flow\n   * setting at bind time is greater than or equal to the transport\n   * window size. Otherwise, N is calculated as this percentage of the\n   * endpoint's max-delivered-unacked-msgs-per-flow setting at bind time.\n   * * The valid range is 1 <= transportAcknowledgeThresholdPercentage <= 75.\n   * @type {Number}\n   * @default 60\n   */\n  get transportAcknowledgeThresholdPercentage() {\n    return Check.something(this._transportAcknowledgeThresholdPercentage)\n      ? this._transportAcknowledgeThresholdPercentage\n      : DEFAULTS.transportAcknowledgeThresholdPercentage;\n  }\n  set transportAcknowledgeThresholdPercentage(value) {\n    this._transportAcknowledgeThresholdPercentage = value;\n  }\n\n}\n\nmodule.exports.QueueBrowserProperties = QueueBrowserProperties;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * An enumeration of consumer acknowledgement modes. The corresponding\n * MessageConsumer property {@link solace.MessageConsumerProperties#acknowledgeMode}\n * configures how acknowledgments are generated for received Guaranteed messages.\n *\n * When received messages are acknowledged they are removed from the Guaranteed\n * Message storage on the Solace Message Router. Message Consumer acknowledgements,\n * <b>only</b> remove messages from the Solace Message Router.\n *\n * In particular, withholding Message Consumer Acknowledgemnts does not stop\n * message delivery. For Message Consumer flow control see\n * {@link solace.MessageConsumer.stop}/{@link solace.MessageConsumer.start}. Message Consumer\n * flow control may also be imlpemented by removing the\n * {@link solace.MessageConsumerEventName#event:MESSAGE} listener.\n *\n * @memberof solace\n * @enum {string}\n * @namespace\n */\nconst MessageConsumerAcknowledgeMode = {\n  /**\n   * The API automatically acknowledges any message that was delivered to all\n   * {@link solace.MessageConsumerEventName#event:MESSAGE} listeners with no exception thrown\n   * on any of them.\n   */\n  AUTO:   'AUTO',\n  /**\n   * The API acknowledges a message only when the application calls\n   * {@link solace.Message#acknowledge}.\n   */\n  CLIENT: 'CLIENT',\n};\n\nmodule.exports.MessageConsumerAcknowledgeMode = Enum.new(MessageConsumerAcknowledgeMode);\n","const { LOG_TRACE } = require('solclient-log');\nconst { TcpRawTransport, CompressedTransport, TlsOnlyTransport, TcpTlsTransport } = BUILD_ENV.TARGET_NODE ? require('./tcp') : {};\nconst { WebTransport } = require('./web');\n\nconst TransportFactory = {\n  createTransport(host, eventCB, client, props, getId) {\n    const url = host;\n    Object.assign(props, {\n      connectTimeoutInMsecs: 100000,\n    });\n    // TCP transport is dictated by the URL (tcp:// or tcps://)\n    // It is unaffected by the transportProtocol config parameter.\n    if (TcpRawTransport && url.trim().startsWith('tcp')) {\n      if (!url.trim().startsWith('tcps')) {\n        if (props.compressionLevel === 0) {\n          LOG_TRACE('createTransport raw tcp');\n          return new TcpRawTransport(url, eventCB, client, props);\n        } // else { //compressed plaintext right off the bat.\n        LOG_TRACE('createTransport compressed plaintex.');\n        const compressingLayer = new CompressedTransport(eventCB, client, props);\n        const plaintextTransport =\n          new TcpRawTransport(url,\n                              compressingLayer.eventCB.bind(compressingLayer),\n                              compressingLayer, props);\n        compressingLayer.setClientStats(plaintextTransport.getClientStats());\n        plaintextTransport.setClientStats(null);\n        compressingLayer.setUnderlyingTransport(plaintextTransport);\n        return compressingLayer;\n      } //else { //tcps\n      if (props.sslConnectionDowngradeTo !== 'PLAIN_TEXT') { //no downgrade\n        LOG_TRACE('createTransport monolithic tls');\n        return new TcpTlsTransport(url, eventCB, client, props);\n      } //else { // Composite TLS transport anticipating downgrade.\n      LOG_TRACE('createTransport composite tls (anticipating downgrade)');\n      // passing URL for SNI.\n      const tlsLayer = new TlsOnlyTransport(url, eventCB, client, props);\n      const plaintextTransport =\n        new TcpRawTransport(url,\n                            tlsLayer.eventCB.bind(tlsLayer),\n                            tlsLayer, props);\n      tlsLayer.setClientStats(plaintextTransport.getClientStats());\n      plaintextTransport.setClientStats(null);\n      tlsLayer.setUnderlyingTransport(plaintextTransport);\n      return tlsLayer;\n    }\n    LOG_TRACE('createTransport WebTransport');\n    return new WebTransport(url, eventCB, client, props, getId);\n  },\n\n  startCompression(uncompressedTransport) {\n    const eventCB = uncompressedTransport._eventCB;\n    const client = uncompressedTransport._client;\n    const props = uncompressedTransport._props;\n\n    const compressingLayer = new CompressedTransport(eventCB, client, props);\n    uncompressedTransport.rehome(compressingLayer.eventCB.bind(compressingLayer),\n                                 compressingLayer);\n    compressingLayer.setClientStats(uncompressedTransport.getClientStats());\n    uncompressedTransport.setClientStats(null);\n    compressingLayer.setUnderlyingTransport(uncompressedTransport);\n    compressingLayer.connect();\n    return compressingLayer;\n  },\n\n  severTls(encryptedTransport, compress, callback) {\n    if (!compress) {\n      encryptedTransport.tlsShutdown(callback);\n    } else {\n      const precallback = plaintextTransport => callback(this.startCompression(plaintextTransport));\n      //encryptedTransport.tlsShutdown(precallback.bind(this));\n      encryptedTransport.tlsShutdown(precallback);\n    }\n  },\n};\n\nmodule.exports.TransportFactory = TransportFactory;\n","const MessageLib = require('solclient-message');\nconst { Base64, Bits, Convert } = require('solclient-convert');\nconst { BinaryMetaBlock, SMFHeader, SMPMessage } = require('../message-objects');\nconst { Check } = require('solclient-validate');\nconst { ClientCtrlMessage, KeepAliveMessage, AdProtocolMessage } = require('../message-objects');\nconst { Codec: SDTCodec } = require('solclient-sdt');\nconst { ContentSummaryElement } = require('./content-summary-element');\nconst { ContentSummaryType } = require('./content-summary-types');\nconst { DestinationType } = require('solclient-destination');\nconst { encAdp } = require('./adprotocol');\nconst { encCC } = require('./client-ctrl');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { Lazy } = require('solclient-eskit');\nconst { LOG_TRACE, LOG_INFO } = require('solclient-log');\nconst { ParamParse } = require('./param-parse');\nconst { PriorityUserCosMap } = require('./priority-user-cos-map');\nconst { SDTField, SDTFieldType, SDTMapContainer, SDTStreamContainer } = require('solclient-sdt');\nconst { SMFParameterType, SMFExtendedParameterType } = require('../smf-parameter-types');\nconst { SMFProtocol } = require('../smf-protocols');\nconst { SMP } = require('./smp');\n\nconst { encode: base64Encode } = Base64;\nconst { set: setBits } = Bits;\nconst {\n  int8ToStr,\n  int16ToStr,\n  int24ToStr,\n  int32ToStr,\n  int64ToStr,\n  uint8ArrayToString,\n} = Convert;\nconst { lazyValue } = Lazy;\nconst {\n  encContentSummary,\n  encDeliveryMode,\n  encLightSMFParam,\n  encodeSMFParam,\n  encodeSMFExtendedParam,\n  FORCED_LENGTH_MODE,\n} = ParamParse;\nconst { encodeSingleElement } = SDTCodec;\nconst { encSmp } = SMP;\n\nconst priorityForUserCos = lazyValue(() => new PriorityUserCosMap().forward);\n\nfunction addContentElementToArrays(csumm, payloadArray, dataChunk, cstype) {\n  if (Check.anything(dataChunk) && dataChunk.length > 0) {\n    const cse = new ContentSummaryElement(cstype, NaN, dataChunk.length);\n    csumm.push(cse);\n    payloadArray.push(dataChunk);\n\n  }\n}\n\nfunction addToMapIfPresent(headerMap, key, type, value) {\n  if (Check.anything(value)) {\n    headerMap.addField(key, SDTField.create(type, value));\n  }\n}\n\n// Return the binary attachment as string, sets the binaryMetaData on the message.\n// Not nice, but fast.\nfunction adaptMessageToBinaryMeta(message) {\n  let result;\n  // solace header map\n  const headerMap = new SDTMapContainer();\n  addToMapIfPresent(headerMap, 'ci', SDTFieldType.STRING, message.getCorrelationId());\n  addToMapIfPresent(headerMap, 'mi', SDTFieldType.STRING, message.getApplicationMessageId());\n  addToMapIfPresent(headerMap, 'mt', SDTFieldType.STRING, message.getApplicationMessageType());\n  addToMapIfPresent(headerMap, 'rt', SDTFieldType.DESTINATION, message.getReplyTo());\n  addToMapIfPresent(headerMap, 'si', SDTFieldType.STRING, message.getSenderId());\n  addToMapIfPresent(headerMap, 'sn', SDTFieldType.INT64, message.getSequenceNumber());\n  addToMapIfPresent(headerMap, 'ts', SDTFieldType.INT64, message.getSenderTimestamp());\n  addToMapIfPresent(headerMap, 'ex', SDTFieldType.INT64, message.getGMExpiration());\n  addToMapIfPresent(headerMap, 'ce', SDTFieldType.STRING, message._compressedCE ? message._compressedCE : message.getHttpContentEncoding());\n  addToMapIfPresent(headerMap, 'ct', SDTFieldType.STRING, message.getHttpContentType());\n\n  // the baggage value in the correct format. See - https://www.w3.org/TR/baggage/\n  const _baggage = message.getBaggage();\n  addToMapIfPresent(headerMap, 'bag', SDTFieldType.STRING, (_baggage ? _baggage.getBaggage() : null));\n  // message creation context will never be null\n  // set the encoded bytes into the map\n  const _creationContext = message.getCreationContext();\n  addToMapIfPresent(\n    headerMap, 'ctx', SDTFieldType.BYTEARRAY,\n    (_creationContext ? _creationContext.getEncodedTraceContext() : null)\n  );\n\n  // container map: solace headers + user prop map\n  const sdtMap = new SDTMapContainer();\n  if (message.getUserPropertyMap()) {\n    sdtMap.addField('p', SDTField.create(SDTFieldType.MAP, message.getUserPropertyMap()));\n  }\n  if (headerMap.getKeys().length > 0) {\n    sdtMap.addField('h', SDTField.create(SDTFieldType.MAP, headerMap));\n  }\n\n  let preambleByte0 = 0;\n\n  if (Check.anything(message._getCompressedBinaryAttachment())){\n    preambleByte0 |= 0x40;\n  }\n  \n  switch (message.getType()) {\n    case MessageLib.MessageType.BINARY:\n      preambleByte0 |= 0x80;\n      break;\n    case MessageLib.MessageType.MAP:\n      preambleByte0 |= 0x0A;\n      if (Check.nothing(message._getCompressedBinaryAttachment())) {\n        result = encodeSingleElement(message._structuredContainer);\n      } \n      break;\n    case MessageLib.MessageType.STREAM:\n      preambleByte0 |= 0x0B;\n      if (Check.nothing(message._getCompressedBinaryAttachment())) {\n        result = encodeSingleElement(message._structuredContainer);\n      } \n      break;\n    case MessageLib.MessageType.TEXT:\n      preambleByte0 |= 0x07;\n      if (Check.nothing(message._getCompressedBinaryAttachment())) {\n        result = encodeSingleElement(message._structuredContainer);\n      }\n      break;\n    default:\n      LOG_INFO(`Unhandled messageType: ${message.getType()}`);\n      break;\n  }\n  const preambleByte1 = message.isReplyMessage() ? 0x80 : 0;\n  const sdtPreamble = SDTField.create(SDTFieldType.BYTEARRAY,\n                                      String.fromCharCode(preambleByte0, preambleByte1));\n\n  // Putting it all together: a stream with the preamble and map\n  const sdtStreamContainer = new SDTStreamContainer();\n  sdtStreamContainer.addField(sdtPreamble);\n  sdtStreamContainer.addField(SDTField.create(SDTFieldType.MAP, sdtMap));\n\n  const binaryMeta = new BinaryMetaBlock();\n  binaryMeta.type = 0;\n  binaryMeta.payload = encodeSingleElement(SDTField.create(SDTFieldType.STREAM,\n                                                           sdtStreamContainer));\n  message.binaryMetadataChunk = binaryMeta;\n  return result;\n}\n\nfunction adaptMessageToSmf_nonPayload(message, smfHeaderIn) {\n  const smfHeader = smfHeaderIn;\n  const deliveryMode = message.getDeliveryMode();\n\n  smfHeader.smf_dto = message.isDeliverToOne();\n  smfHeader.pm_deliverymode = deliveryMode;\n  smfHeader.smf_adf = deliveryMode === MessageLib.MessageDeliveryModeType.DIRECT ? 0 : 1;\n  smfHeader.smf_di = message.isDiscardIndication();\n  smfHeader.smf_elidingEligible = message.isElidingEligible();\n  smfHeader.smf_deadMessageQueueEligible = message.isDMQEligible();\n  smfHeader.pm_ad_flowid = message.getFlowId();\n  smfHeader.pm_ad_publisherid = message.getPublisherId();\n  smfHeader.pm_ad_publishermsgId = message.getPublisherMessageId();\n  smfHeader.pm_ad_msgid = message.getGuaranteedMessageId();\n  smfHeader.pm_ad_prevmsgid = message.getGuaranteedPreviousMessageId();\n  smfHeader.pm_ad_ttl = message.getTimeToLive();\n  smfHeader.pm_ad_ackimm = message.isAcknowledgeImmediately();\n  smfHeader.pm_ad_redelflag = message.isRedelivered();\n\n  // get the transport context, if available\n  const _transportContext = message.getTransportContext();\n  if(_transportContext != null) {\n    // set the encoded Uint8 array into the header property\n    smfHeader.pm_ts_transport_context = _transportContext.getEncodedTraceContext();\n  }\n  \n  const dest = message.getDestination();\n  if (dest) {\n    smfHeader.pm_tr_topicname_bytes = dest.getBytes();\n    if (dest.type === DestinationType.QUEUE ||\n        dest.type === DestinationType.TEMPORARY_QUEUE) {\n      const { offset } = dest;\n      smfHeader.pm_queue_len = smfHeader.pm_tr_topicname_bytes.length - offset;\n      smfHeader.pm_queue_offset = offset;\n    }\n  }\n\n  smfHeader.smf_priority = priorityForUserCos.value.get(message.getUserCos());\n\n  if (message.getPriority() !== undefined\n    && typeof message.getPriority() === 'number'\n    && message.getPriority() <= 255\n    && message.getPriority() >= 0) {\n    smfHeader.pm_msg_priority = message.getPriority();\n  } else {\n    smfHeader.pm_msg_priority = null;\n  }\n\n  const userData = message.getUserData();\n  smfHeader.pm_userdata = (userData === null || userData === undefined)\n    ? null\n    : message.getUserData();\n}\n\nfunction adaptMessageToSmf_payloadMemoize(message) {\n  let encodedSdtPayload;\n\n  // Setup user properties, header properties, msgtype\n  if (message.getCorrelationId() ||\n      message.getApplicationMessageId() ||\n      message.getApplicationMessageType() ||\n      message.getReplyTo() ||\n      message.getSenderId() ||\n      message.getSequenceNumber() ||\n      message.getSenderTimestamp() ||\n      message.getUserPropertyMap() ||\n      message.isReplyMessage() ||\n      message.getCreationContext() ||\n      message._compressedCE ||\n      message.getHttpContentEncoding() ||\n      message.getHttpContentType() ||\n      (message.getBaggage() && message.getBaggage().getBaggage()) ||\n      (message.getType() !== MessageLib.MessageType.BINARY)) {\n    // add SDT binary metadata\n    encodedSdtPayload = adaptMessageToBinaryMeta(message);\n  }\n\n  // Build array of ContentSummaryElements\n  const csumm = [];\n  const payload = [];\n\n  addContentElementToArrays(csumm, payload,\n                            message.getXmlMetadata(), ContentSummaryType.XML_META);\n  addContentElementToArrays(csumm, payload,\n                            message.getXmlContent(), ContentSummaryType.XML_PAYLOAD);\n  if (encodedSdtPayload) {\n    addContentElementToArrays(csumm, payload,\n                              encodedSdtPayload, ContentSummaryType.BINARY_ATTACHMENT);\n  } else {\n    if (Check.anything(message._getCompressedBinaryAttachment())){\n      addContentElementToArrays(csumm, payload, \n        message._getCompressedBinaryAttachment().toString('latin1'), ContentSummaryType.BINARY_ATTACHMENT);\n    } else {\n      addContentElementToArrays(csumm, payload,\n        message._binaryAttachment ? message._binaryAttachment.toString('latin1') : '', ContentSummaryType.BINARY_ATTACHMENT);\n    }\n  }\n  const binaryMeta = message.binaryMetadataChunk;\n  if (binaryMeta !== null) {\n    const binaryMetaSMF = binaryMeta.asEncodedSmf();\n    const MAX_24BITS = 16777215;\n    if (binaryMetaSMF.length > MAX_24BITS) {\n      LOG_TRACE(`binary-meta data (${binaryMetaSMF.length}) over the ${MAX_24BITS} limit`);\n      throw new OperationError(`binary-meta data (${binaryMetaSMF.length}) over the ${MAX_24BITS} limit`, ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    } else {\n      addContentElementToArrays(csumm, payload, binaryMetaSMF, ContentSummaryType.BINARY_METADATA);\n    }\n  }\n\n  message._memoized_csumm = csumm;\n  message._memoized_payload = payload.join(''); \n  message._payload_is_memoized = true;\n  return message._memoized_payload ? message._memoized_payload.length : 0;\n}\n\nfunction adaptMessageToSmf_payloadFinalize(message, smfHeaderIn) {\n  const smfHeader = smfHeaderIn;\n  if (!message._payload_is_memoized) {\n    adaptMessageToSmf_payloadMemoize(message);\n  }\n  const csumm = message._memoized_csumm;\n  const payloadBytes = message._memoized_payload;\n  if (csumm.length === 0 ||\n      (csumm.length === 1 && csumm[0].type === ContentSummaryType.BINARY_ATTACHMENT)) {\n    // NULL or RAW payload (no content-summary)\n    //  Was this here to invert the condition?\n    // LOG_TRACE('NULL or RAW payload (no content-summary)');\n  } else {\n    smfHeader.pm_content_summary = csumm;\n  }\n\n  smfHeader.payload = payloadBytes;\n}\n\nfunction adaptMessageToSmf(message, smfHeaderIn) {\n  adaptMessageToSmf_payloadFinalize(message, smfHeaderIn);\n  adaptMessageToSmf_nonPayload(message, smfHeaderIn);\n}\n\n/**\n * Creates an array of all values that fit in the given number of bits.\n * e.g. bitRange(1) => [0, 1], bitRange(2) => [0, 1, 2, 3]\n * @param {Number} bits The number of bits in the range\n * @returns {Number} All values that fit in that number of bits\n * @private\n */\nconst bitRange = bits => Array.from(Array(Math.pow(2, bits))).map((el, i) => i);\nconst maskValues = (shift, bits) => bitRange(bits).map(val => setBits(0, val, shift, bits));\nconst DI_BIT = maskValues(31, 1);\nconst ELIDING_ELIGIBLE_BIT = maskValues(30, 1);\nconst DTO_BIT = maskValues(29, 1);\nconst ADF_BIT = maskValues(28, 1);\nconst DMQE_BIT = maskValues(27, 1);\nconst VERSION_BITS = maskValues(24, 3);\nconst UH_BITS = maskValues(22, 2);\nconst PROTOCOL_BITS = maskValues(16, 6);\nconst PRIORITY_BITS = maskValues(12, 4);\nconst TTL_BITS = maskValues(0, 8);\nconst QT_OFFSET_BYTES = maskValues(8, 8);\nconst QT_LEN_BYTES = maskValues(0, 8);\n\nfunction encodeSMF(header) {\n  // First 4 bytes: protocol, ttl, etc\n  let w1 = 0;\n\n  // PERF: single expression to make w1 const\n  w1 |= DI_BIT[header.smf_di && 1 || 0];\n  w1 |= ELIDING_ELIGIBLE_BIT[header.smf_elidingEligible && 1 || 0];\n  w1 |= DTO_BIT[header.smf_dto && 1 || 0];\n  w1 |= ADF_BIT[header.smf_adf && 1 || 0];\n  w1 |= DMQE_BIT[header.smf_deadMessageQueueEligible && 1 || 0];\n  w1 |= VERSION_BITS[header.smf_version || 0];\n  w1 |= UH_BITS[header.smf_uh || 0];\n  w1 |= PROTOCOL_BITS[header.smf_protocol || 0];\n  w1 |= PRIORITY_BITS[header.smf_priority || 0];\n  w1 |= TTL_BITS[header.smf_ttl || 0]; // PERF: or set w1 to ttl initially.\n\n  const params = [];\n  // Encode all standard SMF parameters\n  // Topic name and queue/topic offsets are supposed to come first\n  if (header.pm_tr_topicname_bytes) {\n    params.push(encodeSMFParam(2, SMFParameterType.TR_TOPICNAME,\n                               `${header.pm_tr_topicname_bytes}`));\n  }\n  if (header.pm_queue_len) {\n    params.push(encLightSMFParam(0, SMFParameterType.LIGHT_QUEUE_NAME_OFFSET,\n                                 int16ToStr(QT_OFFSET_BYTES[header.pm_queue_offset] |\n                                            QT_LEN_BYTES[header.pm_queue_len])));\n  }\n  if (header.pm_topic_len) {\n    params.push(encLightSMFParam(0, SMFParameterType.LIGHT_TOPIC_NAME_OFFSET,\n                                 int16ToStr(QT_OFFSET_BYTES[header.pm_topic_offset] |\n                                            QT_OFFSET_BYTES[header.pm_topic_len])));\n  }\n\n  if (header.pm_corrtag !== null && header.pm_corrtag !== undefined) {\n    params.push(encLightSMFParam(0, SMFParameterType.LIGHT_CORRELATION,\n                                 int24ToStr(header.pm_corrtag)));\n  }\n  if (header.pm_ad_ackimm) {\n    params.push(encLightSMFParam(0, SMFParameterType.LIGHT_ACK_IMMEDIATELY,\n                                 ''));\n  }\n\n  if (header.pm_msg_priority !== null) {\n    params.push(encodeSMFParam(0, SMFParameterType.MESSAGEPRIORITY,\n                               int8ToStr(header.pm_msg_priority)));\n  }\n  if (header.pm_userdata !== null && header.pm_userdata !== '') {\n    params.push(encodeSMFParam(0, SMFParameterType.USERDATA,\n                               header.pm_userdata));\n  }\n  if (header.pm_username) {\n    // do a sloppy base64 (no newlines)\n    params.push(encodeSMFParam(0, SMFParameterType.USERNAME,\n                               base64Encode(header.pm_username)));\n  }\n  if (header.pm_password) {\n    // do a sloppy base64 (no newlines)\n    params.push(encodeSMFParam(0, SMFParameterType.PASSWORD,\n                               base64Encode(header.pm_password)));\n  }\n  if (header.pm_respcode) {\n    // Flow Change Update Response is the first example.\n    params.push(encodeSMFParam(0, SMFParameterType.RESPONSE,\n                               int32ToStr(header.pm_respcode) + header.pm_respstr));\n  }\n\n  if (header.pm_deliverymode !== null) {\n    params.push(encodeSMFParam(0, SMFParameterType.DELIVERY_MODE,\n                               encDeliveryMode(header.pm_deliverymode)));\n  }\n\n  if (header.pm_ad_msgid !== undefined) {\n    params.push(encodeSMFParam(2, SMFParameterType.ASSURED_MESSAGE_ID,\n                               int64ToStr(header.pm_ad_msgid)));\n    params.push(encodeSMFParam(2, SMFParameterType.ASSURED_PREVMESSAGE_ID,\n                               int64ToStr(header.pm_ad_prevmsgid)));\n  }\n\n  if (header.pm_ad_flowid) {\n    params.push(encodeSMFParam(0, SMFParameterType.ASSURED_FLOWID,\n                               int32ToStr(header.pm_ad_flowid)));\n  }\n\n  // header.pm_ad_redelflag\n  // Ad redelivered\n  if (header.pm_ad_redelflag) {\n    params.push(encodeSMFParam(0, SMFParameterType.ASSURED_REDELIVERED_FLAG, undefined));\n  }\n  // header.pm_ad_flowredelflag\n\n  if (header.pm_ad_ttl !== undefined) {\n    params.push(encodeSMFParam(0, SMFParameterType.AD_TIMETOLIVE,\n                               int64ToStr(header.pm_ad_ttl)));\n  }\n\n  // sequence number?\n\n  if (header.pm_ad_publisherid) {\n    params.push(encodeSMFParam(0, SMFParameterType.PUBLISHER_ID,\n                               int32ToStr(header.pm_ad_publisherid)));\n  }\n\n  if (header.pm_ad_publisherMsgId) {\n    params.push(encodeSMFParam(0, SMFParameterType.PUBLISHER_MSGID,\n                               int64ToStr(header.pm_ad_publisherMsgId)));\n  }\n\n  // transactions: ackmessageid, transactionid, transactionflags\n\n  if (header.pm_content_summary) {\n    params.push(encodeSMFParam(2, SMFParameterType.MESSAGE_CONTENT_SUMMARY,\n                               encContentSummary(header.pm_content_summary)));\n  }\n  // done common SMF parameters!\n\n  // pre-collect and push extended parameters (once we have any)\n\n  let extendedStreamContents = '';\n  let extendedUH = 0;\n\n  if (header.pm_oauth2_access_token) {\n    extendedStreamContents += encodeSMFExtendedParam(0,\n                                                     SMFExtendedParameterType.OAUTH2_ACCESS_TOKEN,\n                                                     header.pm_oauth2_access_token);\n    extendedUH = extendedUH || 0;\n  }\n\n  if (header.pm_oidc_id_token) {\n    extendedStreamContents += encodeSMFExtendedParam(0,\n                                                     SMFExtendedParameterType.OIDC_ID_TOKEN,\n                                                     header.pm_oidc_id_token);\n    extendedUH = extendedUH || 0;\n  }\n\n  if (header.pm_oauth2_issuer_identifier) {\n    extendedStreamContents += encodeSMFExtendedParam(0,\n                                                     SMFExtendedParameterType\n                                                     .OAUTH2_ISSUER_IDENTIFIER,\n                                                     header.pm_oauth2_issuer_identifier);\n    extendedUH = extendedUH || 0;\n  }\n\n  if (header.pm_ts_transport_context) {\n    extendedStreamContents += encodeSMFExtendedParam(0,\n                                                     SMFExtendedParameterType.TS_TRANSPORT_CONTEXT,\n                                                     uint8ArrayToString(header.pm_ts_transport_context),\n                                                     FORCED_LENGTH_MODE.SIX);\n    extendedUH = extendedUH || 0;\n  }\n\n  if (extendedStreamContents.length > 0) {\n    params.push(encodeSMFParam(extendedUH,\n                               SMFParameterType.EXTENDED_TYPE_STREAM,\n                               extendedStreamContents));\n  }\n\n  // compute header size and full message size\n  const encodedParams = params.join('');\n  const hdrlen = 12 + encodedParams.length;\n  const msglen = hdrlen + header.payloadLength;\n\n  // ? Already encoded. Why bother?\n  header.setMessageSizes(hdrlen, header.payloadLength);\n\n  return (\n    int32ToStr(w1) +\n    int32ToStr(hdrlen) +\n    int32ToStr(msglen) +\n    encodedParams\n  );\n}\n\nfunction encodeCompoundMessage(msg) {\n  let payload = '';\n  if (msg instanceof MessageLib.Message) {\n    if (!msg.smfHeader) {\n      msg.smfHeader = new SMFHeader(SMFProtocol.TRMSG, 255);\n    }\n    adaptMessageToSmf(msg, msg._smfHeader);\n    payload = msg._smfHeader.payload;\n  } else if (msg instanceof ClientCtrlMessage) {\n    payload = encCC(msg);\n  } else if (msg instanceof SMPMessage) {\n    payload = encSmp(msg);\n  } else if (msg instanceof KeepAliveMessage) {\n    LOG_TRACE('Skipping retrieve payload as there is none in a KeepAliveMessage');\n  } else if (msg instanceof AdProtocolMessage) {\n    payload = encAdp(msg);\n  }\n  const header = msg.smfHeader;\n  header.setPayloadSize(payload.length);\n  const encodedHeader = encodeSMF(header);\n  return encodedHeader + payload;\n}\n\nconst Encode = {\n  encodeCompoundMessage,\n  encodeSMF,\n  adaptMessageToSmf_payloadMemoize,\n};\n\nmodule.exports.Encode = Encode;\n","module.exports = require(\"tls\");","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","const { OperationError } = require('solclient-error');\n\nlet binding = null;\n\nconst ProfileBinding = {\n  get value() {\n    if (binding === null) {\n      throw new OperationError('Profile binding not initialized. Call solace.SolclientFactory.init');\n    }\n    return binding;\n  },\n  set value(value) {\n    // private, so we'll allow it for testing\n    binding = value;\n  },\n};\n\nmodule.exports.ProfileBinding = ProfileBinding;\n","const { LOG_TRACE } = require('solclient-log');\nconst { parseURL } = require('solclient-util');\n\nlet hostListDNSFilter;\nif (BUILD_ENV.TARGET_NODE) {\n  /* eslint-env node */\n  /* eslint-disable global-require */\n  const dns = require('dns');\n  /* eslint-enable global-require */\n\n  // util.promisify is Node 8. This converts an (err, result) callback to a promise.\n  // The purpose is to allow us to use Promise.all, which deals with waiting until\n  // all promises are resolved, and returning the results in correctly ordered array.\n  const dnsLookupPromise = (url, options) => new Promise((resolve) => {\n    const host = parseURL(url).hostname;\n    LOG_TRACE('looking up', url, '=>', host);\n    dns.lookup(host, options, (error, result) => {\n      LOG_TRACE('DNS result', error, result);\n      return error === null\n        ? resolve({ url, host, address: result, resolved: true })\n        : resolve(\n          { url,\n            host,\n            resolved: true,\n            error:    {\n              code:     error['code'], // eslint-disable-line dot-notation\n              errno:    error['errno'], // eslint-disable-line dot-notation\n              hostname: error['hostname'], // eslint-disable-line dot-notation\n              syscall:  error['syscall'], // eslint-disable-line dot-notation\n            },\n          });\n    });\n  });\n\n  /**\n   * Resolution calls back with an array of the following:\n   * `{ url: 'http://example.com/foo', host: 'example.com', address: '10.0.0.1', resolved: true }`\n   * or, on error\n   * `{ url: 'http://example.com/foo', host: 'example.com', resolved: true, error: {\n   *    code: 'ENOTFOUND', errno: 'ENOTFOUND', syscall: 'getaddrinfo'\n   *  } }`\n   *\n   * If resolution could not be performed, because of platform limitations, the callback receives\n   * the following:\n   * `{ url: 'http://example.com/foo', host: 'example.com', address: 'example.com', resolved: false }`\n   *\n   * Even if no DNS lookup is performed, the function can still fail if an invalid URL is provided.\n   *\n   * The function always calls back asynchronously.\n   *\n   * @param {Array.<String>} urls Array of URLs to resolve\n   * @param {function} cb A function called back with results as described above\n   * @private\n   */\n  hostListDNSFilter = function hostListDNSFilterNode(urls, cb) {\n    const promises = urls.map(url => dnsLookupPromise(\n      url,\n      { 'verbatim': true }\n    ));\n    // Call back (null, [{host:, address:}, ...]) if all successful\n    // Call back (err, undefined) fast if any error\n    Promise.all(promises).then(resolved => cb(null, resolved)).catch(err => cb(err));\n  };\n} else {\n  /* eslint-env browser */\n  // Create an always-async callback that allows all hosts.\n  //hostListDNSFilter = (urls, cb) => setImmediate(() => {\n  hostListDNSFilter = (urls, cb) => setTimeout(() => {\n    try {\n      const result = urls.map((url) => {\n        const host = parseURL(url).host;\n        return { url, host, address: host, resolved: false };\n      });\n      return cb(null, result);\n    } catch (e) {\n      return cb(e);\n    }\n  }, 0);\n}\n\nmodule.exports.hostListDNSFilter = hostListDNSFilter;\n","class ContentSummaryElement {\n  constructor(type = null, position = 0, length = 0) {\n    this.type = type;\n    this.position = position;\n    this.length = length;\n  }\n}\n\nmodule.exports.ContentSummaryElement = ContentSummaryElement;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst CacheRequestType = {\n  INVALID:                       0,\n  BULK_MSG:                      1,\n  REGISTER_REQUEST:              2,\n  REGISTER_RESPONSE:             3,\n  HEARTBEAT_REQUEST:             4,\n  HEARTBEAT_RESPONSE:            5,\n  EVENT_NOTIFY:                  6,\n  EVENT_ACK:                     7,\n  ACTION_REQUEST:                8,\n  ACTION_RESPONSE:               9,\n  GET_REQUEST:                   10,\n  GET_RESPONSE:                  11,\n  GET_NEXT_REQUEST:              12,\n  GET_NEXT_RESPONSE:             13,\n  SET_REQUEST:                   14,\n  SET_RESPONSE:                  15,\n  GET_MSG_REQUEST:               16,\n  GET_MSG_RESPONSE:              17,\n  GET_NEXT_MSG_REQUEST:          18,\n  GET_NEXT_MSG_RESPONSE:         19,\n  UNREGISTER_IND:                20,\n  BULK_SET_REQUEST:              21,\n  BULK_SET_RESPONSE:             22,\n  PURGE_MSG_SEQUENCE_REQUEST:    23,\n  PURGE_MSG_SEQUENCE_RESPONSE:   24,\n  GET_MSG_SEQUENCE_REQUEST:      25,\n  GET_NEXT_MSG_SEQUENCE_REQUEST: 26,\n  GET_TOPIC_INFO_REQUEST:        27,\n  GET_TOPIC_INFO_RESPONSE:       28,\n  READY_MARKER:                  29,\n  GET_TOPIC_INFO_REQUEST_RANGE:  30,\n  SYNC_READY_MARKER:             31,\n  VACUUM_REQUEST:                32,\n  VACUUM_RESPONSE:               33,\n};\n\nmodule.exports.CacheRequestType = Enum.new(CacheRequestType);\n","// GENERATED FILE. DO NOT EDIT.\nvar Long = (function(exports) {\n  \"use strict\";\n  \n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  \n  /**\n   * @license\n   * Copyright 2009 The Closure Library Authors\n   * Copyright 2020 Daniel Wirtz / The long.js Authors.\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   *\n   * SPDX-License-Identifier: Apache-2.0\n   */\n  // WebAssembly optimizations to do native i64 multiplication and divide\n  var wasm = null;\n  \n  try {\n    wasm = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports;\n  } catch (e) {// no wasm support :(\n  }\n  /**\n   * Constructs a 64 bit two's-complement integer, given its low and high 32 bit values as *signed* integers.\n   *  See the from* functions below for more convenient ways of constructing Longs.\n   * @exports Long\n   * @class A Long class for representing a 64 bit two's-complement integer value.\n   * @param {number} low The low (signed) 32 bits of the long\n   * @param {number} high The high (signed) 32 bits of the long\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @constructor\n   */\n  \n  \n  function Long(low, high, unsigned) {\n    /**\n     * The low 32 bits as a signed value.\n     * @type {number}\n     */\n    this.low = low | 0;\n    /**\n     * The high 32 bits as a signed value.\n     * @type {number}\n     */\n  \n    this.high = high | 0;\n    /**\n     * Whether unsigned or not.\n     * @type {boolean}\n     */\n  \n    this.unsigned = !!unsigned;\n  } // The internal representation of a long is the two given signed, 32-bit values.\n  // We use 32-bit pieces because these are the size of integers on which\n  // Javascript performs bit-operations.  For operations like addition and\n  // multiplication, we split each number into 16 bit pieces, which can easily be\n  // multiplied within Javascript's floating-point representation without overflow\n  // or change in sign.\n  //\n  // In the algorithms below, we frequently reduce the negative case to the\n  // positive case by negating the input(s) and then post-processing the result.\n  // Note that we must ALWAYS check specially whether those values are MIN_VALUE\n  // (-2^63) because -MIN_VALUE == MIN_VALUE (since 2^63 cannot be represented as\n  // a positive number, it overflows back into a negative).  Not handling this\n  // case would often result in infinite recursion.\n  //\n  // Common constant values ZERO, ONE, NEG_ONE, etc. are defined below the from*\n  // methods on which they depend.\n  \n  /**\n   * An indicator used to reliably determine if an object is a Long or not.\n   * @type {boolean}\n   * @const\n   * @private\n   */\n  \n  \n  Long.prototype.__isLong__;\n  Object.defineProperty(Long.prototype, \"__isLong__\", {\n    value: true\n  });\n  /**\n   * @function\n   * @param {*} obj Object\n   * @returns {boolean}\n   * @inner\n   */\n  \n  function isLong(obj) {\n    return (obj && obj[\"__isLong__\"]) === true;\n  }\n  /**\n   * @function\n   * @param {*} value number\n   * @returns {number}\n   * @inner\n   */\n  \n  \n  function ctz32(value) {\n    var c = Math.clz32(value & -value);\n    return value ? 31 - c : c;\n  }\n  /**\n   * Tests if the specified object is a Long.\n   * @function\n   * @param {*} obj Object\n   * @returns {boolean}\n   */\n  \n  \n  Long.isLong = isLong;\n  /**\n   * A cache of the Long representations of small integer values.\n   * @type {!Object}\n   * @inner\n   */\n  \n  var INT_CACHE = {};\n  /**\n   * A cache of the Long representations of small unsigned integer values.\n   * @type {!Object}\n   * @inner\n   */\n  \n  var UINT_CACHE = {};\n  /**\n   * @param {number} value\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromInt(value, unsigned) {\n    var obj, cachedObj, cache;\n  \n    if (unsigned) {\n      value >>>= 0;\n  \n      if (cache = 0 <= value && value < 256) {\n        cachedObj = UINT_CACHE[value];\n        if (cachedObj) return cachedObj;\n      }\n  \n      obj = fromBits(value, 0, true);\n      if (cache) UINT_CACHE[value] = obj;\n      return obj;\n    } else {\n      value |= 0;\n  \n      if (cache = -128 <= value && value < 128) {\n        cachedObj = INT_CACHE[value];\n        if (cachedObj) return cachedObj;\n      }\n  \n      obj = fromBits(value, value < 0 ? -1 : 0, false);\n      if (cache) INT_CACHE[value] = obj;\n      return obj;\n    }\n  }\n  /**\n   * Returns a Long representing the given 32 bit integer value.\n   * @function\n   * @param {number} value The 32 bit integer in question\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromInt = fromInt;\n  /**\n   * @param {number} value\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromNumber(value, unsigned) {\n    if (isNaN(value)) return unsigned ? UZERO : ZERO;\n  \n    if (unsigned) {\n      if (value < 0) return UZERO;\n      if (value >= TWO_PWR_64_DBL) return MAX_UNSIGNED_VALUE;\n    } else {\n      if (value <= -TWO_PWR_63_DBL) return MIN_VALUE;\n      if (value + 1 >= TWO_PWR_63_DBL) return MAX_VALUE;\n    }\n  \n    if (value < 0) return fromNumber(-value, unsigned).neg();\n    return fromBits(value % TWO_PWR_32_DBL | 0, value / TWO_PWR_32_DBL | 0, unsigned);\n  }\n  /**\n   * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.\n   * @function\n   * @param {number} value The number in question\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromNumber = fromNumber;\n  /**\n   * @param {number} lowBits\n   * @param {number} highBits\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromBits(lowBits, highBits, unsigned) {\n    return new Long(lowBits, highBits, unsigned);\n  }\n  /**\n   * Returns a Long representing the 64 bit integer that comes by concatenating the given low and high bits. Each is\n   *  assumed to use 32 bits.\n   * @function\n   * @param {number} lowBits The low 32 bits\n   * @param {number} highBits The high 32 bits\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBits = fromBits;\n  /**\n   * @function\n   * @param {number} base\n   * @param {number} exponent\n   * @returns {number}\n   * @inner\n   */\n  \n  var pow_dbl = Math.pow; // Used 4 times (4*8 to 15+4)\n  \n  /**\n   * @param {string} str\n   * @param {(boolean|number)=} unsigned\n   * @param {number=} radix\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromString(str, unsigned, radix) {\n    if (str.length === 0) throw Error('empty string');\n  \n    if (typeof unsigned === 'number') {\n      // For goog.math.long compatibility\n      radix = unsigned;\n      unsigned = false;\n    } else {\n      unsigned = !!unsigned;\n    }\n  \n    if (str === \"NaN\" || str === \"Infinity\" || str === \"+Infinity\" || str === \"-Infinity\") return unsigned ? UZERO : ZERO;\n    radix = radix || 10;\n    if (radix < 2 || 36 < radix) throw RangeError('radix');\n    var p;\n    if ((p = str.indexOf('-')) > 0) throw Error('interior hyphen');else if (p === 0) {\n      return fromString(str.substring(1), unsigned, radix).neg();\n    } // Do several (8) digits each time through the loop, so as to\n    // minimize the calls to the very expensive emulated div.\n  \n    var radixToPower = fromNumber(pow_dbl(radix, 8));\n    var result = ZERO;\n  \n    for (var i = 0; i < str.length; i += 8) {\n      var size = Math.min(8, str.length - i),\n          value = parseInt(str.substring(i, i + size), radix);\n  \n      if (size < 8) {\n        var power = fromNumber(pow_dbl(radix, size));\n        result = result.mul(power).add(fromNumber(value));\n      } else {\n        result = result.mul(radixToPower);\n        result = result.add(fromNumber(value));\n      }\n    }\n  \n    result.unsigned = unsigned;\n    return result;\n  }\n  /**\n   * Returns a Long representation of the given string, written using the specified radix.\n   * @function\n   * @param {string} str The textual representation of the Long\n   * @param {(boolean|number)=} unsigned Whether unsigned or not, defaults to signed\n   * @param {number=} radix The radix in which the text is written (2-36), defaults to 10\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromString = fromString;\n  /**\n   * @function\n   * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromValue(val, unsigned) {\n    if (typeof val === 'number') return fromNumber(val, unsigned);\n    if (typeof val === 'string') return fromString(val, unsigned); // Throws for non-objects, converts non-instanceof Long:\n  \n    return fromBits(val.low, val.high, typeof unsigned === 'boolean' ? unsigned : val.unsigned);\n  }\n  /**\n   * Converts the specified value to a Long using the appropriate from* function for its type.\n   * @function\n   * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val Value\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long}\n   */\n  \n  \n  Long.fromValue = fromValue; // NOTE: the compiler should inline these constant values below and then remove these variables, so there should be\n  // no runtime penalty for these.\n  \n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_16_DBL = 1 << 16;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_24_DBL = 1 << 24;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;\n  /**\n   * @type {!Long}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_24 = fromInt(TWO_PWR_24_DBL);\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var ZERO = fromInt(0);\n  /**\n   * Signed zero.\n   * @type {!Long}\n   */\n  \n  Long.ZERO = ZERO;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var UZERO = fromInt(0, true);\n  /**\n   * Unsigned zero.\n   * @type {!Long}\n   */\n  \n  Long.UZERO = UZERO;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var ONE = fromInt(1);\n  /**\n   * Signed one.\n   * @type {!Long}\n   */\n  \n  Long.ONE = ONE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var UONE = fromInt(1, true);\n  /**\n   * Unsigned one.\n   * @type {!Long}\n   */\n  \n  Long.UONE = UONE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var NEG_ONE = fromInt(-1);\n  /**\n   * Signed negative one.\n   * @type {!Long}\n   */\n  \n  Long.NEG_ONE = NEG_ONE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var MAX_VALUE = fromBits(0xFFFFFFFF | 0, 0x7FFFFFFF | 0, false);\n  /**\n   * Maximum signed value.\n   * @type {!Long}\n   */\n  \n  Long.MAX_VALUE = MAX_VALUE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var MAX_UNSIGNED_VALUE = fromBits(0xFFFFFFFF | 0, 0xFFFFFFFF | 0, true);\n  /**\n   * Maximum unsigned value.\n   * @type {!Long}\n   */\n  \n  Long.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var MIN_VALUE = fromBits(0, 0x80000000 | 0, false);\n  /**\n   * Minimum signed value.\n   * @type {!Long}\n   */\n  \n  Long.MIN_VALUE = MIN_VALUE;\n  /**\n   * @alias Long.prototype\n   * @inner\n   */\n  \n  var LongPrototype = Long.prototype;\n  /**\n   * Converts the Long to a 32 bit integer, assuming it is a 32 bit integer.\n   * @this {!Long}\n   * @returns {number}\n   */\n  \n  LongPrototype.toInt = function toInt() {\n    return this.unsigned ? this.low >>> 0 : this.low;\n  };\n  /**\n   * Converts the Long to a the nearest floating-point representation of this value (double, 53 bit mantissa).\n   * @this {!Long}\n   * @returns {number}\n   */\n  \n  \n  LongPrototype.toNumber = function toNumber() {\n    if (this.unsigned) return (this.high >>> 0) * TWO_PWR_32_DBL + (this.low >>> 0);\n    return this.high * TWO_PWR_32_DBL + (this.low >>> 0);\n  };\n  /**\n   * Converts the Long to a string written in the specified radix.\n   * @this {!Long}\n   * @param {number=} radix Radix (2-36), defaults to 10\n   * @returns {string}\n   * @override\n   * @throws {RangeError} If `radix` is out of range\n   */\n  \n  \n  LongPrototype.toString = function toString(radix) {\n    radix = radix || 10;\n    if (radix < 2 || 36 < radix) throw RangeError('radix');\n    if (this.isZero()) return '0';\n  \n    if (this.isNegative()) {\n      // Unsigned Longs are never negative\n      if (this.eq(MIN_VALUE)) {\n        // We need to change the Long value before it can be negated, so we remove\n        // the bottom-most digit in this base and then recurse to do the rest.\n        var radixLong = fromNumber(radix),\n            div = this.div(radixLong),\n            rem1 = div.mul(radixLong).sub(this);\n        return div.toString(radix) + rem1.toInt().toString(radix);\n      } else return '-' + this.neg().toString(radix);\n    } // Do several (6) digits each time through the loop, so as to\n    // minimize the calls to the very expensive emulated div.\n  \n  \n    var radixToPower = fromNumber(pow_dbl(radix, 6), this.unsigned),\n        rem = this;\n    var result = '';\n  \n    while (true) {\n      var remDiv = rem.div(radixToPower),\n          intval = rem.sub(remDiv.mul(radixToPower)).toInt() >>> 0,\n          digits = intval.toString(radix);\n      rem = remDiv;\n      if (rem.isZero()) return digits + result;else {\n        while (digits.length < 6) digits = '0' + digits;\n  \n        result = '' + digits + result;\n      }\n    }\n  };\n  /**\n   * Gets the high 32 bits as a signed integer.\n   * @this {!Long}\n   * @returns {number} Signed high bits\n   */\n  \n  \n  LongPrototype.getHighBits = function getHighBits() {\n    return this.high;\n  };\n  /**\n   * Gets the high 32 bits as an unsigned integer.\n   * @this {!Long}\n   * @returns {number} Unsigned high bits\n   */\n  \n  \n  LongPrototype.getHighBitsUnsigned = function getHighBitsUnsigned() {\n    return this.high >>> 0;\n  };\n  /**\n   * Gets the low 32 bits as a signed integer.\n   * @this {!Long}\n   * @returns {number} Signed low bits\n   */\n  \n  \n  LongPrototype.getLowBits = function getLowBits() {\n    return this.low;\n  };\n  /**\n   * Gets the low 32 bits as an unsigned integer.\n   * @this {!Long}\n   * @returns {number} Unsigned low bits\n   */\n  \n  \n  LongPrototype.getLowBitsUnsigned = function getLowBitsUnsigned() {\n    return this.low >>> 0;\n  };\n  /**\n   * Gets the number of bits needed to represent the absolute value of this Long.\n   * @this {!Long}\n   * @returns {number}\n   */\n  \n  \n  LongPrototype.getNumBitsAbs = function getNumBitsAbs() {\n    if (this.isNegative()) // Unsigned Longs are never negative\n      return this.eq(MIN_VALUE) ? 64 : this.neg().getNumBitsAbs();\n    var val = this.high != 0 ? this.high : this.low;\n  \n    for (var bit = 31; bit > 0; bit--) if ((val & 1 << bit) != 0) break;\n  \n    return this.high != 0 ? bit + 33 : bit + 1;\n  };\n  /**\n   * Tests if this Long's value equals zero.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isZero = function isZero() {\n    return this.high === 0 && this.low === 0;\n  };\n  /**\n   * Tests if this Long's value equals zero. This is an alias of {@link Long#isZero}.\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.eqz = LongPrototype.isZero;\n  /**\n   * Tests if this Long's value is negative.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  LongPrototype.isNegative = function isNegative() {\n    return !this.unsigned && this.high < 0;\n  };\n  /**\n   * Tests if this Long's value is positive or zero.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isPositive = function isPositive() {\n    return this.unsigned || this.high >= 0;\n  };\n  /**\n   * Tests if this Long's value is odd.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isOdd = function isOdd() {\n    return (this.low & 1) === 1;\n  };\n  /**\n   * Tests if this Long's value is even.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isEven = function isEven() {\n    return (this.low & 1) === 0;\n  };\n  /**\n   * Tests if this Long's value equals the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.equals = function equals(other) {\n    if (!isLong(other)) other = fromValue(other);\n    if (this.unsigned !== other.unsigned && this.high >>> 31 === 1 && other.high >>> 31 === 1) return false;\n    return this.high === other.high && this.low === other.low;\n  };\n  /**\n   * Tests if this Long's value equals the specified's. This is an alias of {@link Long#equals}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.eq = LongPrototype.equals;\n  /**\n   * Tests if this Long's value differs from the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.notEquals = function notEquals(other) {\n    return !this.eq(\n    /* validates */\n    other);\n  };\n  /**\n   * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.neq = LongPrototype.notEquals;\n  /**\n   * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.ne = LongPrototype.notEquals;\n  /**\n   * Tests if this Long's value is less than the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.lessThan = function lessThan(other) {\n    return this.comp(\n    /* validates */\n    other) < 0;\n  };\n  /**\n   * Tests if this Long's value is less than the specified's. This is an alias of {@link Long#lessThan}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.lt = LongPrototype.lessThan;\n  /**\n   * Tests if this Long's value is less than or equal the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.lessThanOrEqual = function lessThanOrEqual(other) {\n    return this.comp(\n    /* validates */\n    other) <= 0;\n  };\n  /**\n   * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.lte = LongPrototype.lessThanOrEqual;\n  /**\n   * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.le = LongPrototype.lessThanOrEqual;\n  /**\n   * Tests if this Long's value is greater than the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.greaterThan = function greaterThan(other) {\n    return this.comp(\n    /* validates */\n    other) > 0;\n  };\n  /**\n   * Tests if this Long's value is greater than the specified's. This is an alias of {@link Long#greaterThan}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.gt = LongPrototype.greaterThan;\n  /**\n   * Tests if this Long's value is greater than or equal the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.greaterThanOrEqual = function greaterThanOrEqual(other) {\n    return this.comp(\n    /* validates */\n    other) >= 0;\n  };\n  /**\n   * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.gte = LongPrototype.greaterThanOrEqual;\n  /**\n   * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.ge = LongPrototype.greaterThanOrEqual;\n  /**\n   * Compares this Long's value with the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {number} 0 if they are the same, 1 if the this is greater and -1\n   *  if the given one is greater\n   */\n  \n  LongPrototype.compare = function compare(other) {\n    if (!isLong(other)) other = fromValue(other);\n    if (this.eq(other)) return 0;\n    var thisNeg = this.isNegative(),\n        otherNeg = other.isNegative();\n    if (thisNeg && !otherNeg) return -1;\n    if (!thisNeg && otherNeg) return 1; // At this point the sign bits are the same\n  \n    if (!this.unsigned) return this.sub(other).isNegative() ? -1 : 1; // Both are positive if at least one is unsigned\n  \n    return other.high >>> 0 > this.high >>> 0 || other.high === this.high && other.low >>> 0 > this.low >>> 0 ? -1 : 1;\n  };\n  /**\n   * Compares this Long's value with the specified's. This is an alias of {@link Long#compare}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {number} 0 if they are the same, 1 if the this is greater and -1\n   *  if the given one is greater\n   */\n  \n  \n  LongPrototype.comp = LongPrototype.compare;\n  /**\n   * Negates this Long's value.\n   * @this {!Long}\n   * @returns {!Long} Negated Long\n   */\n  \n  LongPrototype.negate = function negate() {\n    if (!this.unsigned && this.eq(MIN_VALUE)) return MIN_VALUE;\n    return this.not().add(ONE);\n  };\n  /**\n   * Negates this Long's value. This is an alias of {@link Long#negate}.\n   * @function\n   * @returns {!Long} Negated Long\n   */\n  \n  \n  LongPrototype.neg = LongPrototype.negate;\n  /**\n   * Returns the sum of this and the specified Long.\n   * @this {!Long}\n   * @param {!Long|number|string} addend Addend\n   * @returns {!Long} Sum\n   */\n  \n  LongPrototype.add = function add(addend) {\n    if (!isLong(addend)) addend = fromValue(addend); // Divide each number into 4 chunks of 16 bits, and then sum the chunks.\n  \n    var a48 = this.high >>> 16;\n    var a32 = this.high & 0xFFFF;\n    var a16 = this.low >>> 16;\n    var a00 = this.low & 0xFFFF;\n    var b48 = addend.high >>> 16;\n    var b32 = addend.high & 0xFFFF;\n    var b16 = addend.low >>> 16;\n    var b00 = addend.low & 0xFFFF;\n    var c48 = 0,\n        c32 = 0,\n        c16 = 0,\n        c00 = 0;\n    c00 += a00 + b00;\n    c16 += c00 >>> 16;\n    c00 &= 0xFFFF;\n    c16 += a16 + b16;\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c32 += a32 + b32;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c48 += a48 + b48;\n    c48 &= 0xFFFF;\n    return fromBits(c16 << 16 | c00, c48 << 16 | c32, this.unsigned);\n  };\n  /**\n   * Returns the difference of this and the specified Long.\n   * @this {!Long}\n   * @param {!Long|number|string} subtrahend Subtrahend\n   * @returns {!Long} Difference\n   */\n  \n  \n  LongPrototype.subtract = function subtract(subtrahend) {\n    if (!isLong(subtrahend)) subtrahend = fromValue(subtrahend);\n    return this.add(subtrahend.neg());\n  };\n  /**\n   * Returns the difference of this and the specified Long. This is an alias of {@link Long#subtract}.\n   * @function\n   * @param {!Long|number|string} subtrahend Subtrahend\n   * @returns {!Long} Difference\n   */\n  \n  \n  LongPrototype.sub = LongPrototype.subtract;\n  /**\n   * Returns the product of this and the specified Long.\n   * @this {!Long}\n   * @param {!Long|number|string} multiplier Multiplier\n   * @returns {!Long} Product\n   */\n  \n  LongPrototype.multiply = function multiply(multiplier) {\n    if (this.isZero()) return this;\n    if (!isLong(multiplier)) multiplier = fromValue(multiplier); // use wasm support if present\n  \n    if (wasm) {\n      var low = wasm[\"mul\"](this.low, this.high, multiplier.low, multiplier.high);\n      return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n    }\n  \n    if (multiplier.isZero()) return this.unsigned ? UZERO : ZERO;\n    if (this.eq(MIN_VALUE)) return multiplier.isOdd() ? MIN_VALUE : ZERO;\n    if (multiplier.eq(MIN_VALUE)) return this.isOdd() ? MIN_VALUE : ZERO;\n  \n    if (this.isNegative()) {\n      if (multiplier.isNegative()) return this.neg().mul(multiplier.neg());else return this.neg().mul(multiplier).neg();\n    } else if (multiplier.isNegative()) return this.mul(multiplier.neg()).neg(); // If both longs are small, use float multiplication\n  \n  \n    if (this.lt(TWO_PWR_24) && multiplier.lt(TWO_PWR_24)) return fromNumber(this.toNumber() * multiplier.toNumber(), this.unsigned); // Divide each long into 4 chunks of 16 bits, and then add up 4x4 products.\n    // We can skip products that would overflow.\n  \n    var a48 = this.high >>> 16;\n    var a32 = this.high & 0xFFFF;\n    var a16 = this.low >>> 16;\n    var a00 = this.low & 0xFFFF;\n    var b48 = multiplier.high >>> 16;\n    var b32 = multiplier.high & 0xFFFF;\n    var b16 = multiplier.low >>> 16;\n    var b00 = multiplier.low & 0xFFFF;\n    var c48 = 0,\n        c32 = 0,\n        c16 = 0,\n        c00 = 0;\n    c00 += a00 * b00;\n    c16 += c00 >>> 16;\n    c00 &= 0xFFFF;\n    c16 += a16 * b00;\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c16 += a00 * b16;\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c32 += a32 * b00;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c32 += a16 * b16;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c32 += a00 * b32;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;\n    c48 &= 0xFFFF;\n    return fromBits(c16 << 16 | c00, c48 << 16 | c32, this.unsigned);\n  };\n  /**\n   * Returns the product of this and the specified Long. This is an alias of {@link Long#multiply}.\n   * @function\n   * @param {!Long|number|string} multiplier Multiplier\n   * @returns {!Long} Product\n   */\n  \n  \n  LongPrototype.mul = LongPrototype.multiply;\n  /**\n   * Returns this Long divided by the specified. The result is signed if this Long is signed or\n   *  unsigned if this Long is unsigned.\n   * @this {!Long}\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Quotient\n   */\n  \n  LongPrototype.divide = function divide(divisor) {\n    if (!isLong(divisor)) divisor = fromValue(divisor);\n    if (divisor.isZero()) throw Error('division by zero'); // use wasm support if present\n  \n    if (wasm) {\n      // guard against signed division overflow: the largest\n      // negative number / -1 would be 1 larger than the largest\n      // positive number, due to two's complement.\n      if (!this.unsigned && this.high === -0x80000000 && divisor.low === -1 && divisor.high === -1) {\n        // be consistent with non-wasm code path\n        return this;\n      }\n  \n      var low = (this.unsigned ? wasm[\"div_u\"] : wasm[\"div_s\"])(this.low, this.high, divisor.low, divisor.high);\n      return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n    }\n  \n    if (this.isZero()) return this.unsigned ? UZERO : ZERO;\n    var approx, rem, res;\n  \n    if (!this.unsigned) {\n      // This section is only relevant for signed longs and is derived from the\n      // closure library as a whole.\n      if (this.eq(MIN_VALUE)) {\n        if (divisor.eq(ONE) || divisor.eq(NEG_ONE)) return MIN_VALUE; // recall that -MIN_VALUE == MIN_VALUE\n        else if (divisor.eq(MIN_VALUE)) return ONE;else {\n          // At this point, we have |other| >= 2, so |this/other| < |MIN_VALUE|.\n          var halfThis = this.shr(1);\n          approx = halfThis.div(divisor).shl(1);\n  \n          if (approx.eq(ZERO)) {\n            return divisor.isNegative() ? ONE : NEG_ONE;\n          } else {\n            rem = this.sub(divisor.mul(approx));\n            res = approx.add(rem.div(divisor));\n            return res;\n          }\n        }\n      } else if (divisor.eq(MIN_VALUE)) return this.unsigned ? UZERO : ZERO;\n  \n      if (this.isNegative()) {\n        if (divisor.isNegative()) return this.neg().div(divisor.neg());\n        return this.neg().div(divisor).neg();\n      } else if (divisor.isNegative()) return this.div(divisor.neg()).neg();\n  \n      res = ZERO;\n    } else {\n      // The algorithm below has not been made for unsigned longs. It's therefore\n      // required to take special care of the MSB prior to running it.\n      if (!divisor.unsigned) divisor = divisor.toUnsigned();\n      if (divisor.gt(this)) return UZERO;\n      if (divisor.gt(this.shru(1))) // 15 >>> 1 = 7 ; with divisor = 8 ; true\n        return UONE;\n      res = UZERO;\n    } // Repeat the following until the remainder is less than other:  find a\n    // floating-point that approximates remainder / other *from below*, add this\n    // into the result, and subtract it from the remainder.  It is critical that\n    // the approximate value is less than or equal to the real value so that the\n    // remainder never becomes negative.\n  \n  \n    rem = this;\n  \n    while (rem.gte(divisor)) {\n      // Approximate the result of division. This may be a little greater or\n      // smaller than the actual value.\n      approx = Math.max(1, Math.floor(rem.toNumber() / divisor.toNumber())); // We will tweak the approximate result by changing it in the 48-th digit or\n      // the smallest non-fractional digit, whichever is larger.\n  \n      var log2 = Math.ceil(Math.log(approx) / Math.LN2),\n          delta = log2 <= 48 ? 1 : pow_dbl(2, log2 - 48),\n          // Decrease the approximation until it is smaller than the remainder.  Note\n      // that if it is too large, the product overflows and is negative.\n      approxRes = fromNumber(approx),\n          approxRem = approxRes.mul(divisor);\n  \n      while (approxRem.isNegative() || approxRem.gt(rem)) {\n        approx -= delta;\n        approxRes = fromNumber(approx, this.unsigned);\n        approxRem = approxRes.mul(divisor);\n      } // We know the answer can't be zero... and actually, zero would cause\n      // infinite recursion since we would make no progress.\n  \n  \n      if (approxRes.isZero()) approxRes = ONE;\n      res = res.add(approxRes);\n      rem = rem.sub(approxRem);\n    }\n  \n    return res;\n  };\n  /**\n   * Returns this Long divided by the specified. This is an alias of {@link Long#divide}.\n   * @function\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Quotient\n   */\n  \n  \n  LongPrototype.div = LongPrototype.divide;\n  /**\n   * Returns this Long modulo the specified.\n   * @this {!Long}\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Remainder\n   */\n  \n  LongPrototype.modulo = function modulo(divisor) {\n    if (!isLong(divisor)) divisor = fromValue(divisor); // use wasm support if present\n  \n    if (wasm) {\n      var low = (this.unsigned ? wasm[\"rem_u\"] : wasm[\"rem_s\"])(this.low, this.high, divisor.low, divisor.high);\n      return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n    }\n  \n    return this.sub(this.div(divisor).mul(divisor));\n  };\n  /**\n   * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\n   * @function\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Remainder\n   */\n  \n  \n  LongPrototype.mod = LongPrototype.modulo;\n  /**\n   * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\n   * @function\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Remainder\n   */\n  \n  LongPrototype.rem = LongPrototype.modulo;\n  /**\n   * Returns the bitwise NOT of this Long.\n   * @this {!Long}\n   * @returns {!Long}\n   */\n  \n  LongPrototype.not = function not() {\n    return fromBits(~this.low, ~this.high, this.unsigned);\n  };\n  /**\n   * Returns count leading zeros of this Long.\n   * @this {!Long}\n   * @returns {!number}\n   */\n  \n  \n  LongPrototype.countLeadingZeros = function countLeadingZeros() {\n    return this.high ? Math.clz32(this.high) : Math.clz32(this.low) + 32;\n  };\n  /**\n   * Returns count leading zeros. This is an alias of {@link Long#countLeadingZeros}.\n   * @function\n   * @param {!Long}\n   * @returns {!number}\n   */\n  \n  \n  LongPrototype.clz = LongPrototype.countLeadingZeros;\n  /**\n   * Returns count trailing zeros of this Long.\n   * @this {!Long}\n   * @returns {!number}\n   */\n  \n  LongPrototype.countTrailingZeros = function countTrailingZeros() {\n    return this.low ? ctz32(this.low) : ctz32(this.high) + 32;\n  };\n  /**\n   * Returns count trailing zeros. This is an alias of {@link Long#countTrailingZeros}.\n   * @function\n   * @param {!Long}\n   * @returns {!number}\n   */\n  \n  \n  LongPrototype.ctz = LongPrototype.countTrailingZeros;\n  /**\n   * Returns the bitwise AND of this Long and the specified.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other Long\n   * @returns {!Long}\n   */\n  \n  LongPrototype.and = function and(other) {\n    if (!isLong(other)) other = fromValue(other);\n    return fromBits(this.low & other.low, this.high & other.high, this.unsigned);\n  };\n  /**\n   * Returns the bitwise OR of this Long and the specified.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other Long\n   * @returns {!Long}\n   */\n  \n  \n  LongPrototype.or = function or(other) {\n    if (!isLong(other)) other = fromValue(other);\n    return fromBits(this.low | other.low, this.high | other.high, this.unsigned);\n  };\n  /**\n   * Returns the bitwise XOR of this Long and the given one.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other Long\n   * @returns {!Long}\n   */\n  \n  \n  LongPrototype.xor = function xor(other) {\n    if (!isLong(other)) other = fromValue(other);\n    return fromBits(this.low ^ other.low, this.high ^ other.high, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits shifted to the left by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shiftLeft = function shiftLeft(numBits) {\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;else if (numBits < 32) return fromBits(this.low << numBits, this.high << numBits | this.low >>> 32 - numBits, this.unsigned);else return fromBits(0, this.low << numBits - 32, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits shifted to the left by the given amount. This is an alias of {@link Long#shiftLeft}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shl = LongPrototype.shiftLeft;\n  /**\n   * Returns this Long with bits arithmetically shifted to the right by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  LongPrototype.shiftRight = function shiftRight(numBits) {\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;else if (numBits < 32) return fromBits(this.low >>> numBits | this.high << 32 - numBits, this.high >> numBits, this.unsigned);else return fromBits(this.high >> numBits - 32, this.high >= 0 ? 0 : -1, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits arithmetically shifted to the right by the given amount. This is an alias of {@link Long#shiftRight}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shr = LongPrototype.shiftRight;\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  LongPrototype.shiftRightUnsigned = function shiftRightUnsigned(numBits) {\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    if (numBits < 32) return fromBits(this.low >>> numBits | this.high << 32 - numBits, this.high >>> numBits, this.unsigned);\n    if (numBits === 32) return fromBits(this.high, 0, this.unsigned);\n    return fromBits(this.high >>> numBits - 32, 0, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shru = LongPrototype.shiftRightUnsigned;\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  LongPrototype.shr_u = LongPrototype.shiftRightUnsigned;\n  /**\n   * Returns this Long with bits rotated to the left by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  LongPrototype.rotateLeft = function rotateLeft(numBits) {\n    var b;\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    if (numBits === 32) return fromBits(this.high, this.low, this.unsigned);\n  \n    if (numBits < 32) {\n      b = 32 - numBits;\n      return fromBits(this.low << numBits | this.high >>> b, this.high << numBits | this.low >>> b, this.unsigned);\n    }\n  \n    numBits -= 32;\n    b = 32 - numBits;\n    return fromBits(this.high << numBits | this.low >>> b, this.low << numBits | this.high >>> b, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits rotated to the left by the given amount. This is an alias of {@link Long#rotateLeft}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  \n  LongPrototype.rotl = LongPrototype.rotateLeft;\n  /**\n   * Returns this Long with bits rotated to the right by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  LongPrototype.rotateRight = function rotateRight(numBits) {\n    var b;\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    if (numBits === 32) return fromBits(this.high, this.low, this.unsigned);\n  \n    if (numBits < 32) {\n      b = 32 - numBits;\n      return fromBits(this.high << b | this.low >>> numBits, this.low << b | this.high >>> numBits, this.unsigned);\n    }\n  \n    numBits -= 32;\n    b = 32 - numBits;\n    return fromBits(this.low << b | this.high >>> numBits, this.high << b | this.low >>> numBits, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits rotated to the right by the given amount. This is an alias of {@link Long#rotateRight}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  \n  LongPrototype.rotr = LongPrototype.rotateRight;\n  /**\n   * Converts this Long to signed.\n   * @this {!Long}\n   * @returns {!Long} Signed long\n   */\n  \n  LongPrototype.toSigned = function toSigned() {\n    if (!this.unsigned) return this;\n    return fromBits(this.low, this.high, false);\n  };\n  /**\n   * Converts this Long to unsigned.\n   * @this {!Long}\n   * @returns {!Long} Unsigned long\n   */\n  \n  \n  LongPrototype.toUnsigned = function toUnsigned() {\n    if (this.unsigned) return this;\n    return fromBits(this.low, this.high, true);\n  };\n  /**\n   * Converts this Long to its byte representation.\n   * @param {boolean=} le Whether little or big endian, defaults to big endian\n   * @this {!Long}\n   * @returns {!Array.<number>} Byte representation\n   */\n  \n  \n  LongPrototype.toBytes = function toBytes(le) {\n    return le ? this.toBytesLE() : this.toBytesBE();\n  };\n  /**\n   * Converts this Long to its little endian byte representation.\n   * @this {!Long}\n   * @returns {!Array.<number>} Little endian byte representation\n   */\n  \n  \n  LongPrototype.toBytesLE = function toBytesLE() {\n    var hi = this.high,\n        lo = this.low;\n    return [lo & 0xff, lo >>> 8 & 0xff, lo >>> 16 & 0xff, lo >>> 24, hi & 0xff, hi >>> 8 & 0xff, hi >>> 16 & 0xff, hi >>> 24];\n  };\n  /**\n   * Converts this Long to its big endian byte representation.\n   * @this {!Long}\n   * @returns {!Array.<number>} Big endian byte representation\n   */\n  \n  \n  LongPrototype.toBytesBE = function toBytesBE() {\n    var hi = this.high,\n        lo = this.low;\n    return [hi >>> 24, hi >>> 16 & 0xff, hi >>> 8 & 0xff, hi & 0xff, lo >>> 24, lo >>> 16 & 0xff, lo >>> 8 & 0xff, lo & 0xff];\n  };\n  /**\n   * Creates a Long from its byte representation.\n   * @param {!Array.<number>} bytes Byte representation\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @param {boolean=} le Whether little or big endian, defaults to big endian\n   * @returns {Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBytes = function fromBytes(bytes, unsigned, le) {\n    return le ? Long.fromBytesLE(bytes, unsigned) : Long.fromBytesBE(bytes, unsigned);\n  };\n  /**\n   * Creates a Long from its little endian byte representation.\n   * @param {!Array.<number>} bytes Little endian byte representation\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBytesLE = function fromBytesLE(bytes, unsigned) {\n    return new Long(bytes[0] | bytes[1] << 8 | bytes[2] << 16 | bytes[3] << 24, bytes[4] | bytes[5] << 8 | bytes[6] << 16 | bytes[7] << 24, unsigned);\n  };\n  /**\n   * Creates a Long from its big endian byte representation.\n   * @param {!Array.<number>} bytes Big endian byte representation\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBytesBE = function fromBytesBE(bytes, unsigned) {\n    return new Long(bytes[4] << 24 | bytes[5] << 16 | bytes[6] << 8 | bytes[7], bytes[0] << 24 | bytes[1] << 16 | bytes[2] << 8 | bytes[3], unsigned);\n  };\n  \n  var _default = Long;\n  exports.default = _default;\n  return \"default\" in exports ? exports.default : exports;\n})({});\nif (typeof define === 'function' && define.amd) define([], function() { return Long; });\nelse if (typeof module === 'object' && typeof exports==='object') module.exports = Long;\n","const { AuthenticationScheme } = require('./lib/authentication-schemes');\nconst { CapabilityType, ClientCapabilityType } = require('./lib/capability-types');\nconst { MessageRxCBInfo } = require('./lib/message-rx-cb-info');\nconst { MutableSessionProperty } = require('./lib/mutable-session-properties');\nconst { Session } = require('./lib/session');\nconst { SessionEvent } = require('./lib/session-event');\nconst { ProvisionEvent } = require('./lib/provision-event');\nconst { SessionEventCBInfo } = require('./lib/session-event-cb-info');\nconst { SessionEventCode } = require('./lib/session-event-codes');\nconst { SessionEventName } = require('./lib/session-event-names');\nconst { SessionProperties } = require('./lib/session-properties');\nconst { SessionState } = require('./lib/session-states');\n\nconst { SolclientFactory } = require('solclient-factory');\nconst { SslDowngrade } = require('./lib/ssl-downgrades');\n\n/**\n * Creates a session instance.\n * @param {solace.SessionProperties} sessionProperties Properties to configure the session.\n * @param {solace.MessageRxCBInfo} [messageCallbackInfo] <b>Deprecated:</b>\n *    Callback method for messages.  Instead applications should receive message events via\n *    `session.on(solace.SessionEventCode.MESSAGE, (message) => { ... });`\n * @param {solace.SessionEventCBInfo} [eventCallbackInfo] <b>Deprecated:</b> Callback method for\n *    events on the <i>Session</i>. Instaead applications should receive session events via\n *    `session.on(solace.SessionEventCode.<code>, (event) => { ... });`\n * @returns {solace.Session} The newly-created session.\n * @throws {solace.OperationError} if the parameters have an invalid type or value.\n *                          Subcode: {@link ErrorSubcode.PARAMETER_INVALID_TYPE}.\n * @method\n * @name solace.SolclientFactory.createSession\n */\nSolclientFactory.createSession = SolclientFactory.createFactory(\n  (sessionProperties, messageCallbackInfo, eventCallbackInfo) =>\n    new Session(sessionProperties, messageCallbackInfo, eventCallbackInfo));\n\n\nmodule.exports.AuthenticationScheme = AuthenticationScheme;\nmodule.exports.CapabilityType = CapabilityType;\nmodule.exports.ClientCapabilityType = ClientCapabilityType;\nmodule.exports.MessageRxCBInfo = MessageRxCBInfo;\nmodule.exports.MutableSessionProperty = MutableSessionProperty;\nmodule.exports.Session = Session;\nmodule.exports.SessionEventCBInfo = SessionEventCBInfo;\nmodule.exports.SessionEventCode = SessionEventCode;\nmodule.exports.SessionEvent = SessionEvent;\nmodule.exports.ProvisionEvent = ProvisionEvent;\nmodule.exports.SessionEventName = SessionEventName;\nmodule.exports.SessionProperties = SessionProperties;\nmodule.exports.SessionState = SessionState;\nmodule.exports.SslDowngrade = SslDowngrade;\n","const StateLib = require('./state');\nconst { FsmObject } = require('./object');\n\n/**\n * @classdesc\n * This object type represents an exitPoint for a particular FSM state.\n *\n * Note this initial implementation isn't particularly efficient, but it is\n * very simple by making use of two state objects (one just inside of and\n * one just outside of) the state the exitPoint belongs to.  If necessary, we\n * could optimize this if we wish.\n * @private\n */\nclass ExitPoint extends FsmObject {\n\n  /**\n  * @constructor\n  * @param {Object} spec The object specifier used to implement the named\n  *      parameter idiom.\n  * @param {fsm.State} spec.state The state that the exitPoint belongs\n  *      to.\n  * @param {String} spec.exitPointName The name of the exitPoint.\n  * @param {fsm.StateContext~reactionCallback} spec.func The reaction\n  *      function for the exitPoint, which defines where to transition to\n  *      after state has been exited.\n  */\n  constructor(spec) {\n    super({ name: spec.exitPointName });\n\n    let outerState;\n    // The inner portion of the exitPoint accepts incoming transitions before\n    // exiting the exitPoint's state.  Then the exitPoint's state is exited\n    // through the use of the innerExitPoint's initial transition.\n    this.impl.innerState = new StateLib.State({\n      name:          `${spec.state.getName()} innerExitPoint: ${spec.exitPointName}`,\n      parentContext: spec.state,\n    }).initial(() => spec.state.transitionTo(outerState));\n\n        // The job of the outer portion of the exitPoint is to follow a\n        // transition as specified by the application's reaction function.\n    outerState = new StateLib.State({\n      name:          `${spec.state.getName()} outerExitPoint: ${spec.exitPointName}`,\n      parentContext: spec.state.getParent(),\n    }).initial(spec.func);\n  }\n\n  getDestState() {\n    return this.impl.innerState;\n  }\n}\n\nmodule.exports.ExitPoint = ExitPoint;\n","const { Check } = require('solclient-validate');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\n\nconst APIPropertiesValidators = {\n  validateInstance(typeDesc, instance, name, ...args) {\n    args.forEach((check) => {\n      const validator = check.shift();\n      const validatorArgs = [typeDesc, instance, name, ...check];\n      validator(...validatorArgs);\n    });\n  },\n\n  valInstance(typeDesc, instance, name, typeInstance, typeInstanceDesc) {\n    if (!Check.instanceOf(instance[name], typeInstance)) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                               }' must be instance of ${typeInstanceDesc}`);\n    }\n  },\n\n  valNotEmpty(typeDesc, instance, name) {\n    if (Check.none(instance[name]) || instance[name] === '') {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                             }' cannot be empty.`,\n                             ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n  },\n\n  valLength(typeDesc, instance, name, max) {\n    if (Check.string(instance[name]) && instance[name].length > max) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                             }' exceeded max length ${max}`,\n                             ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n  },\n\n  valRange(typeDesc, instance, name, min, max) {\n    if (Check.number(instance[name]) && (instance[name] < min || instance[name] > max)) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                              }' out of range [${min}; ${max}].`,\n                              ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n  },\n\n  valString(typeDesc, instance, name) {\n    if (!Check.string(instance[name])) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                             }' must be type string; was ${typeof instance[name]}`,\n                             ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n  },\n\n  valNumber(typeDesc, instance, name) {\n    if (!Check.number(instance[name])) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                             }' must be type number; was ${typeof instance[name]}`,\n                             ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n  },\n\n  valBoolean(typeDesc, instance, name) {\n    const val = instance[name];\n    if (!Check.boolean(val)) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                             }' must be type boolean; was ${typeof val}`,\n                             ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n  },\n\n  valIsMember(typeDesc, instance, key, enumInstance, enumName, allowNull = false) {\n    const val = instance[key];\n    if (allowNull && (val === null || val === undefined)) return;\n    if (enumInstance.values.indexOf(val) >= 0) return;\n    throw new OperationError(`${typeDesc} validation: Property '${key\n                             }'=${val} must be a member of ${enumName}`,\n                             ErrorSubcode.PARAMETER_INVALID_TYPE);\n  },\n\n  valStringOrArray(typeDesc, instance, name) {\n    const val = instance[name];\n    if (typeof val !== 'string' && !Array.isArray(val)) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                                }' must be a string or array`,\n                                ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n  },\n\n  valArrayIsMember(typeDesc, instance, name, enumInstance, enumName,\n                   allowUndefined, allowEmpty, allowDuplicate) {\n    const val = instance[name];\n    if ((val === undefined || val === null)) {\n      if (allowUndefined) {\n        return;\n      }\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                              }' must be type Array`,\n                              ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n\n    if (!Array.isArray(instance[name])) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                              }' must be type Array`,\n                              ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    if (!allowEmpty && instance[name].length === 0) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                              }' cannot be empty`,\n                              ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n\n    instance[name].forEach((ele, index) => {\n      if (!enumInstance.values.includes(ele)) {\n        throw new OperationError(`${typeDesc} validation: Property '${name\n                                }' must be an array of ${enumName}`,\n                                ErrorSubcode.PARAMETER_INVALID_TYPE);\n      }\n      if (!allowDuplicate) {\n        if (instance[name].indexOf(ele, index + 1) >= 0) {\n          throw new OperationError(`${typeDesc} validation: Property '${name\n                          }' cannot have duplicate element value`,\n                          ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n        }\n      }\n    });\n  },\n\n  valArrayOfString(typeDesc, instance, name) {\n    const val = instance[name];\n    if (Check.something(val)) {\n      if (!Array.isArray(val)) {\n        throw new OperationError(`${typeDesc} validation: Property '${name\n                               }' must be type Array`,\n                               ErrorSubcode.PARAMETER_INVALID_TYPE);\n      }\n      val.forEach((ele) => {\n        if (typeof ele !== 'string') {\n          throw new OperationError(`${typeDesc} validation: Property '${name\n                                 }' must be an array of string`,\n                                 ErrorSubcode.PARAMETER_INVALID_TYPE);\n        }\n      });\n    }\n  },\n\n  valTopicString(typedesc, instance, name) {\n    // Pardon this late import. I need to break a circular dependency.\n    // eslint-disable-next-line global-require\n    const { DestinationUtil, DestinationType } = require('solclient-destination');\n    module.exports.APIPropertiesValidators.valString(typedesc, instance, name);\n    const val = instance[name];\n    const result = DestinationUtil.validateAndEncode(DestinationType.TOPIC, val);\n    if (result.error) {\n      throw new OperationError(`${typedesc} validation: Property '${name}' must be ` +\n                               `a valid topic string: ${result.error}`,\n                              ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n  },\n\n  valTopicStringOrEmpty(typedesc, instance, name) {\n    const val = instance[name];\n    if (val && val.length) {\n      module.exports.APIPropertiesValidators.valTopicString(typedesc, instance, name);\n    }\n  },\n};\n\nmodule.exports.APIPropertiesValidators = APIPropertiesValidators;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * SMFProtocol\n * @private\n * @enum {number}\n */\nconst SMFProtocol = {\n  CSPF:               0x01,\n  CSMP:               0x02,\n  PUBMSG:             0x03,\n  XMLLINK:            0x04,\n  WSE:                0x05,\n  SEMP:               0x06,\n  SUBCTRL:            0x07,\n  PUBCTRL:            0x08,\n  ADCTRL:             0x09,\n  KEEPALIVE:          0x0a,\n  KEEPALIVEV2:        0x0b,\n  CLIENTCTRL:         0x0c,\n  TRMSG:              0x0d,\n  JNDI:               0x0e,\n  SMP:                0x0f,\n  SMRP:               0x10,\n  SMF_IN_SMF:         0x11,\n  SMF_IN_RV:          0x12,\n  ADCTRL_PASSTHROUGH: 0x13,\n  TSESSION:           0x14,\n\n};\n\nmodule.exports.SMFProtocol = Enum.new(SMFProtocol);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFAdProtocolParam = {\n  LASTMSGIDSENT:                           0x01,\n  LASTMSGIDACKED:                          0x02,\n  WINDOW:                                  0x03,\n  TRANSPORT_PRIORITY:                      0x04,\n  APPLICATION_ACK:                         0x05,\n  FLOWID:                                  0x06,\n  QUEUENAME:                               0x07,\n  DTENAME:                                 0x08,\n  TOPICNAME:                               0x09,\n  FLOWNAME:                                0x0a,\n  EP_DURABLE:                              0x0b,\n  ACCESSTYPE:                              0x0c,\n  SELECTOR:                                0x0d,\n  TRANSPORT_WINDOW:                        0x0e,\n  LINGER_OPTION:                           0x0f,\n  LASTMSGIDRECEIVED:                       0x10,\n  EP_ALLOTHER_PERMISSION:                  0x11,\n  FLOWTYPE:                                0x12,\n  EP_QUOTA:                                0x13,\n  EP_MAX_MSGSIZE:                          0x14,\n  GRANTED_PERMISSIONS:                     0x15,\n  EP_RESPECTS_TTL:                         0x16,\n  TRANSACTION_CTRL_MESSAGE_TYPE:           0x17,\n  TRANSACTED_SESSION_ID:                   0x18,\n  TRANSACTED_SESSION_NAME:                 0x19,\n  TRANSACTION_ID:                          0x1a,\n  TRANSACTED_SESSION_STATE:                0x1b,\n  TRANSACTION_FLOW_DESCRIPTOR_PUB_NOTIFY:  0x1c,\n  TRANSACTION_FLOW_DESCRIPTOR_PUB_ACK:     0x1d,\n  TRANSACTION_FLOW_DESCRIPTOR_SUB_ACK:     0x1e,\n  NOLOCAL:                                 0x1f,\n  ACTIVE_FLOW_INDICATION:                  0x20,\n  WANT_FLOW_CHANGE_NOTIFY:                 0x21,\n  EP_BEHAVIOUR:                            0x22,\n  PUBLISHER_ID:                            0x23,\n  APPLICATION_PUB_ACK:                     0x24,\n  NUM_MESSAGES_SPOOLED:                    0x25,\n  CUT_THROUGH:                             0x26,\n  PUBLISHER_FLAGS:                         0x27,\n  APP_MSG_ID_TYPE:                         0x28,\n  QUEUE_ENDPOINT_HASH:                     0x29,\n  MAX_REDELIVERY:                          0x2a,\n  PAYLOAD:                                 0x2b,\n  ENDPOINT_ID:                             0x2c,\n  ACK_SEQUENCE_NUMBER:                     0x2d,\n  ACK_RECONCILE_REQUEST:                   0x2e,\n  START_OF_ACK_RECONCILE:                  0x2f,\n  TIMESTAMP:                               0x30,\n  MAX_DELIVERED_UNACKED_MESSAGES_PER_FLOW: 0x31,\n  REPLAY_START_LOCATION:                   0x33,\n  ENDPOINT_ERROR_ID:                       0x34,\n  SPOOLER_UNIQUE_ID:                       0x36,\n  PARTITION_GROUP_ID:                      0x38,\n};\n\nmodule.exports.SMFAdProtocolParam = Enum.new(SMFAdProtocolParam);\n","const { TransportProtocol } = require('../transport-protocols');\nconst { TSHState } = require('../tsh-state');\n\n/**\n * @classdesc\n * HTTP Base64 transport\n * @memberof solace\n * @private\n */\nclass StateBase64 extends TSHState {\n  /**\n   * @constructor\n   * @extends TSHState\n   * @param {Boolean} useSsl True if SSL should be used\n   * @param {Function} exitCb Callback to notify on exit\n   * @param {?TSHState} nextState Downgrade target\n   */\n  constructor(useSsl, exitCb, nextState) {\n    super(useSsl, TransportProtocol.HTTP_BASE64, exitCb, nextState);\n  }\n}\n\nmodule.exports.StateBase64 = StateBase64;\n\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Defines an error subcode enumeration which is returned as a property of\n * the errors/exceptions thrown by the API. The subcode provides more detailed\n * error information.\n *\n * The following subcodes can apply to error responses resulting from\n * any API method.\n * * {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}\n * * {@link solace.ErrorSubcode.PARAMETER_CONFLICT}\n * * {@link solace.ErrorSubcode.INTERNAL_ERROR}\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst ErrorSubcode = {\n  /////////////\n  // SESSION //\n  /////////////\n  /**\n   * Errors that do not have a proper subcode.\n   */\n  UNKNOWN_ERROR:                                 0xFFFFFFFF,\n  /**\n   * No error is associated with this event.\n   */\n  NO_ERROR:                                      0,\n  /**\n   * The session is already connected.\n   */\n  // SESSION_ALREADY_CONNECTED: 1,\n  /**\n   * The session is not connected.\n   */\n  SESSION_NOT_CONNECTED:                         2,\n  /**\n   * The performed session operation is invalid given the state\n   * or configuration of the session.\n   * @deprecated Use {@link solace.ErrorSubCode.INVALID_OPERATION}\n   */\n  INVALID_SESSION_OPERATION:                     3,\n  /**\n   * The performed session operation is invalid given the state\n   * or configuration of the session.\n   */\n  INVALID_OPERATION:                             3,\n  /**\n   * An API call failed due to a timeout.\n   */\n  TIMEOUT:                                       4,\n  /////////////////\n  // MESSAGE VPN //\n  /////////////////\n  /**\n   * The Message VPN name configured for the session does not exist.\n   *\n   * Causes:\n   *  * 403 Message VPN Not Allowed\n   */\n  MESSAGE_VPN_NOT_ALLOWED:                       5,\n  /**\n   * The Message VPN name set for the session (or the default VPN if none\n   * was set) is currently shutdown on the router.\n   *\n   * Causes:\n   *  * 503 Message VPN Unavailable\n   */\n  MESSAGE_VPN_UNAVAILABLE:                       6,\n  ////////////\n  // CLIENT //\n  ////////////\n  /**\n   * The username for the client is administratively shutdown\n   * on the router.\n   *\n   * Causes:\n   *  * 403 Client Username Is Shutdown\n   */\n  CLIENT_USERNAME_IS_SHUTDOWN:                   7,\n  /**\n   * The username for the session has not been set and dynamic\n   * clients are not allowed.\n   *\n   * Causes:\n   *  * 403 Dynamic Clients Not Allowed\n   */\n  DYNAMIC_CLIENTS_NOT_ALLOWED:                   8,\n  /**\n   * The session is attempting to use a client name that is\n   * in use by another client, and the router is configured to reject the\n   * new session.\n   * A client name cannot be used by multiple clients in the same Message\n   * VPN.\n   *\n   * Causes:\n   *  * 403 Client Name Already In Use\n   */\n  CLIENT_NAME_ALREADY_IN_USE:                    9,\n  /**\n   * The client name chosen has been rejected as invalid by the router.\n   *\n   * Causes:\n   *  * 400 Client Name Parse Error\n   */\n  CLIENT_NAME_INVALID:                           10,\n  /**\n   * The client login is not currently possible because a previous\n   * instance of same client was being deleted.\n   *\n   * Causes:\n   *  * 503 Subscriber Delete In Progress\n   */\n  CLIENT_DELETE_IN_PROGRESS:                     11,\n  /**\n   * The client login is not currently possible because the maximum\n   * number of active clients on router has already been reached.\n   *\n   * Causes:\n   *  * 503 Too Many Clients\n   *  * 503 Too Many Connections for VPN\n   */\n  TOO_MANY_CLIENTS:                              12,\n  /**\n   * The client could not log into the router.\n   *\n   * Causes:\n   *  * 401 error codes\n   *  * 404 error codes\n   *  * Failed to send a session setup message in the transport.\n   */\n  LOGIN_FAILURE:                                 13,\n  //////////\n  // VRID //\n  //////////\n  /**\n   * An attempt was made to connect to the wrong IP address on\n   * the router (must use CVRID if configured), or the router CVRID has\n   * changed and this was detected on reconnect.\n   *\n   * Causes:\n   *  * 403 Invalid Virtual Router Address\n   */\n  INVALID_VIRTUAL_ADDRESS:                       14,\n  /////////\n  // ACL //\n  /////////\n  /**\n   * The client login to the router was denied because the\n   * IP address/netmask combination used for the client is designated in the\n   * ACL (Access Control List) profile associated with that client.\n   *\n   * Causes:\n   *  * 403 Forbidden\n   */\n  CLIENT_ACL_DENIED:                             15,\n  /**\n   * Adding a subscription was denied because it matched a\n   * subscription that was defined as denied on the ACL (Access Control List)\n   * profile associated with the client.\n   *\n   * Causes:\n   *  * 403 Subscription ACL Denied\n   */\n  SUBSCRIPTION_ACL_DENIED:                       16,\n  /**\n   * A message could not be published because its topic matched\n   * a topic defined as denied on the ACL (Access Control List) profile\n   * associated with the client.\n   *\n   * Causes:\n   *  * 403 Publish ACL Denied\n   */\n  PUBLISH_ACL_DENIED:                            17,\n  ////////////////\n  // VALIDATION //\n  ////////////////\n  /**\n   * An API call was made with an out-of-range parameter.\n   */\n  PARAMETER_OUT_OF_RANGE:                        18,\n  /**\n   * An API call was made with a parameter combination\n   * that is not valid.\n   */\n  PARAMETER_CONFLICT:                            19,\n  /**\n   * An API call was made with a parameter of incorrect type.\n   */\n  PARAMETER_INVALID_TYPE:                        20,\n  //////////////////\n  // FATAL ERRORS //\n  //////////////////\n  /**\n   *  An API call had an internal error (not an application fault).\n   */\n  INTERNAL_ERROR:                                21,\n  /**\n   * An API call failed due to insufficient space in the transport\n   * buffer to accept more data,\n   * or due to exhaustion of the Guaranteed Messaging Window on a publisher.\n   * After an insufficient space error of either kind, the\n   * listeners on the {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}\n   * event are notified when it is possible to retry the failed operation.\n   */\n  INSUFFICIENT_SPACE:                            22,\n  /**\n   * The message router has rejected the request. All available\n   * resources of the requested type are in use.\n   *\n   * Causes:\n   *  * 400 Not Enough Space\n   */\n  OUT_OF_RESOURCES:                              23,\n  /**\n   * An API call failed due to a protocol error with the router\n   * (not an application fault).\n   */\n  PROTOCOL_ERROR:                                24,\n  /**\n   * An API call failed due to a communication error. This typically indicates the\n   * transport connection to the message router has been unexpectedly closed.\n   */\n  COMMUNICATION_ERROR:                           25,\n  ////////////////\n  // KEEP ALIVE //\n  ////////////////\n  /**\n   * The session keep-alive detected a failed session.\n   */\n  KEEP_ALIVE_FAILURE:                            26,\n  /////////////////////\n  // MESSAGE RELATED //\n  /////////////////////\n  /**\n   * An attempt was made to use a topic which is longer\n   * than the maximum that is supported.\n   */\n  // TOPIC_TOO_LARGE: 27,\n  /**\n   * A send call was made that did not have a topic in a mode\n   * where one is required (for example, client mode).\n   */\n  TOPIC_MISSING:                                 28,\n  /**\n   *  An attempt was made to send a message with a total\n   * size greater than that supported by the protocol. (???)\n   */\n  //  MAX_TOTAL_MSGSIZE_EXCEEDED: 29,\n  /**\n   * An attempt was made to send a message with user data larger\n   * than the maximum that is supported.\n   */\n  // USER_DATA_TOO_LARGE: 30,\n  /**\n   * An attempt was made to use a topic which has a syntax that\n   * is not supported.\n   *\n   * Causes:\n   *  * 400 Topic Parse Error\n   */\n  INVALID_TOPIC_SYNTAX:                          31,\n  /**\n   * The client attempted to send a message larger than that\n   * supported by the router.\n   *\n   * Causes:\n   *  * 400 Document Is Too Large\n   *  * 400 Message Too Long\n   */\n  MESSAGE_TOO_LARGE:                             32,\n  /**\n   * The router could not parse an XML message.\n   *\n   * Causes:\n   *  * 400 XML Parse Error\n   */\n  XML_PARSE_ERROR:                               33,\n  ///////////////////\n  // SUBSCRIPTIONS //\n  ///////////////////\n  /**\n   * The client attempted to add a subscription that already\n   * exists. This subcode is only returned if the session property\n   * 'IgnoreDuplicateSubscriptionError' is not enabled.\n   *\n   * Causes:\n   * 400 Subscription Already Exists)\n   */\n  SUBSCRIPTION_ALREADY_PRESENT:                  34,\n  /**\n   * The client attempted to remove a subscription which did not exist.\n   * This subcode is only returned if the session property\n   * 'IgnoreDuplicateSubscriptionError' is not enabled.\n   *\n   * Causes:\n   * 400 Subscription Not Found)\n   */\n  SUBSCRIPTION_NOT_FOUND:                        35,\n  /**\n   * The client attempted to add/remove a subscription that\n   * is not valid.\n   *\n   * Causes:\n   *  * 400 Subscription Parse Error\n   */\n  SUBSCRIPTION_INVALID:                          36,\n  /**\n   * The router rejected a subscription add or remove request\n   * for a reason not separately enumerated.\n   */\n  SUBSCRIPTION_ERROR_OTHER:                      37,\n  /**\n   * The client attempted to add a subscription that\n   * exceeded the maximum number allowed.\n   *\n   * Causes:\n   *  * 400 Max Num Subscriptions Exceeded\n   */\n  SUBSCRIPTION_TOO_MANY:                         38,\n  /**\n   *  The client attempted to add a subscription which already\n   * exists but it has different properties.\n   *\n   * Causes:\n   *  * 400 Subscription Attributes Conflict With Existing Subscription\n   */\n  SUBSCRIPTION_ATTRIBUTES_CONFLICT:              39,\n  /**\n   * The client attempted to establish a session with No Local\n   * enabled and the capability is not supported by the router.\n   */\n  NO_LOCAL_NOT_SUPPORTED:                        40,\n  ////////////////////\n  // UNKNOWN ERRORS //\n  ////////////////////\n  /**\n   * The router rejected a control message for another reason\n   * not separately enumerated.\n   */\n  // CONTROL_ERROR_OTHER: 41,\n  /**\n   * The router rejected a data message for a reason\n   * not separately enumerated.\n   */\n  DATA_ERROR_OTHER:                              42,\n  //////////////////////\n  // TRANSPORT ERRORS //\n  //////////////////////\n  /**\n   * Failed to create the HTTP connection.\n   */\n  CREATE_XHR_FAILED:                             43,\n  /**\n   * Failed to create the transport.\n   */\n  CONNECTION_ERROR:                              44,\n  /**\n   * Failed to decode the data.\n   */\n  DATA_DECODE_ERROR:                             45,\n  /**\n   * @deprecated\n   * The session was inactive for too long.\n   *\n   * Causes:\n   * * 400 Inactivity Timeout\n   */\n  INACTIVITY_TIMEOUT:                            46,\n  /**\n   * @deprecated\n   * The router does not know this session's identifier.\n   *\n   * Causes:\n   * * 400 Unknown Transport Session Identfier\n   */\n  UNKNOWN_TRANSPORT_SESSION_ID:                  47,\n  /**\n   * @deprecated This subcode is not used since 10.0.0.\n   * Guaranteed Messages (with a delivery mode other than DIRECT) are not supported.\n   */\n  AD_MESSAGING_NOT_SUPPORTED:                    48,\n  /**\n   * @deprecated\n   * Creating the WebSocket transport failed.\n   */\n  CREATE_WEBSOCKET_FAILED:                       49,\n  /**\n   * An attempt to perform an operation using a VPN that is configured to be\n   * STANDBY for replication.\n   *\n   * Causes:\n   * * 403 Replication Is Standby\n   */\n  REPLICATION_IS_STANDBY:                        50,\n  ////////////////////\n  // Authentication //\n  ////////////////////\n  /**\n   * Basic authentication is administratively shut down on the\n   * router.\n   *\n   * Causes:\n   *  * 403 Basic Authentication is Shutdown\n   */\n  BASIC_AUTHENTICATION_IS_SHUTDOWN:              51,\n  /**\n   * Client certificate authentication is administratively\n   * shut down on the router.\n   *\n   * Causes:\n   *  * 403 Client Certificate Authentication Is Shutdown\n   */\n  CLIENT_CERTIFICATE_AUTHENTICATION_IS_SHUTDOWN: 52,\n  //////////////////////\n  // Guaranteed Messaging //\n  //////////////////////\n  /**\n   * Guaranteed Messaging services are not enabled on the router.\n   *\n   * Causes:\n   *  * 503 Service Unavailable\n   */\n  GM_UNAVAILABLE:                                100,\n  /**\n   * The session attempted to connect to a Guaranteed Message Publisher\n   * that does not exist on this router.\n   * All unacked messages held by the API are renumbered and redelivered. This subCode\n   * is handled internally and will not be seen by the application. After successfully\n   * renumbereing and redelivering the messages, if any messages are resent, listeners\n   * on the @{link solace.SessionEventCode#event:REPUBLISHING_UNACKED_MESSAGES} event are\n   * invoked.\n   *\n   * Causes:\n   * * 400 Unknown Flow Name\n   * @private\n   */\n  UNKNOWN_FLOW_NAME:                             111,\n  /**\n   * Already bound to the Queue or not authorized to bind to the Queue.\n   *\n   * Causes:\n   *  * 400 Already Bound\n   */\n  ALREADY_BOUND:                                 112,\n  /**\n   * An attempt was made to bind to a Guaranteed Messaging Topic Endpoint with an\n   * invalid topic.\n   *\n   * Causes:\n   *  * 400 Invalid Topic Name\n   */\n  INVALID_TOPIC_NAME_FOR_TOPIC_ENDPOINT:         113,\n  /**\n   * An attempt was made to bind to an unknown Queue name (for example, not\n   * configured on the router).\n   *\n   * Causes:\n   *  * 503 Unknown Queue\n   */\n  UNKNOWN_QUEUE_NAME:                            114,\n  /**\n   * An attempt was made to perform an operation on an unknown Guaranteed Messaging\n   * Topic Endpoint name (for example, not configured on router).\n   *\n   * Causes:\n   *  * 503 Unknown Durable Topic Endpoint\n   */\n  UNKNOWN_TOPIC_ENDPOINT_NAME:                   115,\n  /**\n   * An attempt was made to bind to a Guaranteed Messaging Queue that has already reached\n   * its maximum number of clients.\n   *\n   * Causes:\n   *  * 503 Max clients exceeded for Queue\n   */\n  MAX_CLIENTS_FOR_QUEUE:                         116,\n  /**\n   * An attempt was made to bind to a Guaranteed Messaging Topic Endpoint that has already\n   * reached its maximum number of clients.\n   *\n   * Causes:\n   *  * 503 Max clients exceeded for durable Topic Endpoint\n   */\n  MAX_CLIENTS_FOR_TE:                            117,\n  /**\n   * An unexpected unbind response was received for a Guaranteed Messaging Queue or Topic\n   * Endpoint (for example, the Queue or Topic Endpoint was deleted from the router).\n   */\n  UNEXPECTED_UNBIND:                             118,\n  /**\n   * The specified Guaranteed Messaging Queue was not found when publishing a message.\n   *\n   * Causes:\n   *  * 400 Queue Not Found\n   */\n  QUEUE_NOT_FOUND:                               119,\n  /**\n   * Message was not delivered because the Guaranteed Message spool is over its\n   * allotted space quota.\n   *\n   * Causes:\n   *  * 503 Spool Over Quota\n   */\n  SPOOL_OVER_QUOTA:                              120,\n  /**\n   * An attempt was made to operate on a shutdown Guaranteed Messaging queue.\n   *\n   * Causes:\n   *  * 503 Queue Shutdown\n   */\n  QUEUE_SHUTDOWN:                                121,\n  /**\n   * An attempt was made to operate on a shutdown Guaranteed Messaging Topic Endpoint.\n   *\n   * Causes:\n   *  * 503 Durable Topic Endpoint Shutdown\n   *  * 503 TE Shutdown\n   *  * 503 Endpoint Shutdown\n   */\n  TOPIC_ENDPOINT_SHUTDOWN:                       122,\n  /**\n   * An attempt was made to bind to or create a Guaranteed Messaging Queue or Topic\n   * Endpoint, and the router is out of resources.\n   *\n   * Causes:\n   *  * 503 No More Non-Durable Queue or Topic Endpoint\n   */\n  NO_MORE_NON_DURABLE_QUEUE_OR_TOPIC_ENDPOINT:   123,\n  /**\n   * An attempt was made to create a Queue or Topic Endpoint that already exists.\n   * This subcode is only returned if\n   * {@link solace.SessionProperties.ignoreProvisionEndpointExists} was not set for the current\n   * session.\n   *\n   * Causes:\n   *  * 400 Endpoint Already Exists\n   */\n  ENDPOINT_ALREADY_EXISTS:                       124,\n  /**\n   * An attempt was made to delete or create a Queue or Topic Endpoint when the\n   * Session does not have authorization for the action. This subcode is also returned when an\n   * attempt is made to remove a message from an endpoint when the Session does not have 'consume'\n   * authorization, or when an attempt is made to add or remove a Topic subscription from a Queue\n   * when the Session does not have 'modify-topic' authorization.\n   *\n   * Causes:\n   *  * 403 Permission Not Allowed\n   */\n  PERMISSION_NOT_ALLOWED:                        125,\n  /**\n   * An attempt was made to bind to a Queue or Topic Endpoint with an invalid\n   * selector.\n   *\n   * Causes:\n   *  * 400 Invalid Selector\n   */\n  INVALID_SELECTOR:                              126,\n  /**\n   * Publishing the message was denied due to exceeding the maximum spooled message\n   * count.\n   *\n   * Causes:\n   *  * 503 Max message usage exceeded\n   */\n  MAX_MESSAGE_USAGE_EXCEEDED:                    127,\n  /**\n   * An attempt was made to create a dynamic durable endpoint, and it was found to\n   * exist with different properties.\n   *\n   * Causes:\n   *  * 400 Endpoint Property Mismatch\n   */\n  ENDPOINT_PROPERTY_MISMATCH:                    128,\n  /**\n   * The client attempted to publish an Guaranteed Messaging message to a topic that\n   * did not have any guaranteed subscription matches, or only matched a replicated topic.\n   *\n   * Causes:\n   *  * 503 No Subscription Match\n   */\n  NO_SUBSCRIPTION_MATCH:                         129,\n  /**\n   * The application attempted to acknowledge a message that arrived via a delivery\n   * mode that does not allow acknowledgements.\n   */\n  MESSAGE_DELIVERY_MODE_MISMATCH:                130,\n  /**\n   * The message was already acknowledged.\n   */\n  MESSAGE_ALREADY_ACKNOWLEDGED:                  131,\n  /**\n   * The API-supplied subscription did not match when attempting to bind to a\n   * non-exclusive durable topic endoint.\n   *\n   * Causes:\n   *  * 403 Subscription Does Not Match\n   */\n\n  SUBSCRIPTION_DOES_NOT_MATCH:                       133,\n  /**\n   * The API-supplied selector did not match when attempting to bind to a\n   * non-exclusive durable topic endpoint.\n   *\n   * Causes:\n   *  * 403 Selector Does Not Match\n   */\n  SELECTOR_DOES_NOT_MATCH:                           134,\n  /**\n   * The subscriber has provided an incorrectly formatted durable topic endpoint name.\n   *\n   * Causes:\n   *  * 400 Invalid Durable Topic Endpoint Name\n   */\n  INVALID_DTE_NAME:                                  135,\n  /**\n   * The unsubscribe request was denied by the router because the durable topic endpoint\n   * had one or more clients bound.\n   *\n   * Causes:\n   *  * 400 Unsubscribe Not Allowed, Client(s) Bound To DTE\n   */\n  UNSUBSCRIBE_NOT_ALLOWED_CLIENTS_BOUND:             136,\n  /**\n   * An application callback threw an error back to the API. The reason property describes\n   * the error that occurred.\n   */\n  CALLBACK_ERROR:                                    137,\n  /**\n   * A published message was discarded by the router because it will not be published\n   * anywhere based on the NoLocal properties. This can be considered normal.\n   *\n   * Causes:\n   * * 400 Nolocal Discard\n   */\n  NOLOCAL_DISCARD:                                   138,\n  /**\n   * The operation is delayed because Guaranteed Messaging is not ready on the router.\n   *\n   * Causes:\n   * 507 Ad Not Ready\n   */\n  GM_NOT_READY:                                      140,\n  /**\n   * The message was rejected because one or more matching endpoints'\n   * reject-low-priority-msg-limit was exceeded.\n   *\n   * Causes:\n   * * 503 Low Priority Msg Congestion\n   */\n  LOW_PRIORITY_MSG_CONGESTION:                       141,\n  /**\n   * The specified endpoint quota was out of range.\n   *\n   * Causes:\n   * 400 Quota Out Of Range\n   */\n  QUOTA_OUT_OF_RANGE:                                142,\n  /**\n   * Unable to load the certificate from the TrustStore for a SSL\n   * secured session.\n   */\n  FAILED_LOADING_TRUSTSTORE:                         143,\n  /**\n   * The client failed to load certificate and/or private key files.\n   */\n  FAILED_LOADING_CERTIFICATE_AND_KEY:                144,\n  /**\n   * DNS resolution failed for all hostnames.\n   */\n  UNRESOLVED_HOSTS:                                  145,\n  /**\n   * Replay is not supported on the Solace Message Router\n   */\n  REPLAY_NOT_SUPPORTED:                              146,\n  /**\n   *  Replay is not enabled in the message-vpn\n   */\n  REPLAY_DISABLED:                                   147,\n  /**\n   *  The client attempted to start replay on a flow bound to a non-exclusive endpoint\n   */\n  CLIENT_INITIATED_REPLAY_NON_EXCLUSIVE_NOT_ALLOWED: 148,\n  /**\n   *  The client attempted to start replay on an inactive flow\n   */\n  CLIENT_INITIATED_REPLAY_INACTIVE_FLOW_NOT_ALLOWED: 149,\n  /**\n   *  N/A - Browser Flows are not supported.\n   */\n  CLIENT_INITIATED_REPLAY_BROWSER_FLOW_NOT_ALLOWED:  150,\n  /**\n   *  Replay is not supported on temporary endpoints\n   * @deprecated since 10.3.1 - Replay is now supported on Temp Endpoints\n   */\n  REPLAY_TEMPORARY_NOT_SUPPORTED:                    151,\n  /**\n   *  The client attempted to start a replay but provided an unknown start location type.\n   */\n  UNKNOWN_START_LOCATION_TYPE:                       152,\n  /**\n   *  A replay in progress on a flow was administratively cancelled, causing the flow to be unbound\n   */\n  REPLAY_CANCELLED:                                  153,\n  /**\n   *  A replay in progress on a flow failed because messages to be replayed were trimmed\n   *  from the replay log\n   */\n  REPLAY_MESSAGE_UNAVAILABLE:                        154,\n  /**\n   *  A replay was requested but the requested start time is not available in the replay log\n   */\n  REPLAY_START_TIME_NOT_AVAILABLE:                   155,\n  /**\n   *  The Solace Message Router attempted to replay a message, but the queue/topic\n   *  endpoint rejected the message to the sender\n   */\n  REPLAY_MESSAGE_REJECTED:                           156,\n  /**\n   *  A replay in progress on a flow failed because the replay log was modified\n   */\n  REPLAY_LOG_MODIFIED:                               157,\n  /**\n   * Endpoint error ID in the bind request does not match the endpoint's error ID.\n   */\n  MISMATCHED_ENDPOINT_ERROR_ID:                      158,\n  /**\n   * A replay was requested, but the router does not have sufficient resources\n   * to fulfill the request, due to too many active replays.\n   */\n  OUT_OF_REPLAY_RESOURCES:                           159,\n\n  /**\n   * A replay was in progress on a Durable Topic Endpoint (DTE)\n   * when its topic or selector was modified, causing the replay to fail.\n   */\n  TOPIC_OR_SELECTOR_MODIFIED_ON_DURABLE_TOPIC_ENDPOINT:         160,\n  /**\n   *  A replay in progress on a flow failed\n   */\n  REPLAY_FAILED:                                                161,\n  /**\n   *  A replay was started on the queue or DTE, either by another client or by the router.\n   */\n  REPLAY_STARTED:                                               162,\n  /**\n   * Router does not support Compressed TLS\n   */\n  COMPRESSED_TLS_NOT_SUPPORTED:                                 163,\n  /**\n   * The client attempted to add a shared subscription, but the capability is not supported\n   * by the appliance.\n   */\n  SHARED_SUBSCRIPTIONS_NOT_SUPPORTED:                           164,\n  /**\n   * The client attempted to add a shared subscription on a client that is not permitted to\n   * use shared subscriptions.\n   */\n  SHARED_SUBSCRIPTIONS_NOT_ALLOWED:                             165,\n  /**\n   * The client attempted to add a shared subscription to a queue or topic endpoint.\n   */\n  SHARED_SUBSCRIPTIONS_ENDPOINT_NOT_ALLOWED:                    166,\n  /**\n   * A replay was requested but the requested start message is not available in the replay log.\n   */\n  REPLAY_START_MESSAGE_NOT_AVAILABLE:                           167,\n  /**\n   * Replication Group Message Id are not comparable.\n   * Messages must be published to the same broker or HA pair for their Replicaton Group\n   * Message Id to be comparable.\n   */\n  MESSAGE_ID_NOT_COMPARABLE:                                    168,\n  /**\n   * Replay is not supported on anonymous queue\n   * - 403 Replay Not Supported on Anonymous Queue\n   */\n  REPLAY_ANONYMOUS_QUEUE_NOT_SUPPORTED:                         169,\n  /**\n   * Browser flows to Partitioned Queues are not permitted.\n   * - 403 Browsing Not Supported on Partitioned Queue\n   */\n  PARTITIONED_QUEUE_BROWSING_NOT_SUPPORTED:                     170,\n  /**\n   * Egress selectors are not permitted when binding to a Partitioned Queue.\n   * - 403 Selectors Not Supported on Partitioned Queue\n   */\n  PARTITIONED_QUEUE_SELECTORS_NOT_SUPPORTED:                    171,\n  /**\n   * Replay Not Supported on Anonymous Queue Without Subscriptions\n   * - 403 Replay Not Supported on Anonymous Queue Without Subscriptions\n   */\n  REPLAY_ANONYMOUS_QUEUE_WITHOUT_SUBSCRIPTIONS_NOT_SUPPORTED:   172,\n  /**\n   * The message was rejected because the appliance has been configured\n   * to reject messages when sync replication mode is ineligible.\n   * - 503 Sync Replication Ineligible (Reject Messages when Synchronous Replication Mode is Ineligible)\n   * \n   * * The transaction was started as a synchronous replicated transaction,\n   * but replication became ineligible during the transaction.\n   * - 503 Sync Replication Ineligible (Replication Ineligible during Synchronous Replicated Transaction)\n   */\n  SYNC_REPLICATION_INELIGIBLE:                                  173,\n  /**\n   * An attempt was made to bind to a durable TE or Queue \n   * with a flow property of non-durable.\n   *\n   * Causes:\n   *  * 400 Invalid Queue or Topic Endpoint Durability\n   */\n  INVALID_QUEUE_OR_TOPIC_ENDPOINT_DURABILITY:                   174,\n  /**\n   * Provisioning failed due to invalid queue name. \n   *\n   * Causes:\n   *  * 400 Invalid Queue Name\n   */\n  INVALID_QUEUE_NAME:                   175,\n  /**\n   * Provisioning failed due to invalid topic endpoint name. \n   *\n   * Causes:\n   *  * 400 Invalid Topic Endpoint Name\n   */\n  INVALID_TE_NAME:                   176,\n  /**\n   * Provisioning failed because the requested max message size was too large. \n   *\n   * Causes:\n   *  * 400 Message Size Out Of Range\n   */\n  MESSAGE_SIZE_OUT_OF_RANGE:         177,\n  /**\n   * Provisioning failed because the requested permissions are not supported. \n   *\n   * Causes:\n   *  * 400 Unsupported permissions\n   */\n  UNSUPPORTED_PERMISSIONS:         178,\n  /**\n   * Provisioning failed because the requested permissions are not supported. \n   *\n   * Causes:\n   *  * 503 Max endpoints exceeded\n   */\n  MAX_ENDPOINTS_EXCEEDED:         179,\n  /**\n   * Provisioning failed because router is unable to perform Assured Delivery. \n   *\n   * Causes:\n   *  * 507 Assured Delivery Not Ready\n   */\n  ASSURED_DELIVERY_NOT_READY:         180,\n  /**\n   * Provisioning failed due to a queue template configuration error on the broker. \n   *\n   * Causes:\n   *  * 503 Copy-from queue template missing\n   */\n  COPY_FROM_QUEUE_TEMPLATE_MISSING:         181,\n  /**\n   * Provisioning failed due to a topic endpoint template configuration error on the broker. \n   *\n   * Causes:\n   *  * 503 Copy-from topic-endpoint template missing\n   */\n  COPY_FROM_TE_TEMPLATE_MISSING:         182,\n};\n\nmodule.exports.ErrorSubcode = Enum.new(ErrorSubcode);\n","const { DestinationType } = require('./destination-type');\nconst { DestinationUtil } = require('./destination-util');\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users. Users should obtain an instances from\n * one of the following:</b>\n * * {@link solace.SolclientFactory.createTopicDestination}\n * * {@link solace.SolclientFactory.createDurableQueueDestination}\n * * {@link solace.MessageConsumer#getDestination}\n * * {@link solace.SDTField#getValue} when {@link solace.SDTField#getType} returns\n *   {@link solace.SDTFieldType.DESTINATION}.\n *\n * Represents a message destination.\n *\n * Publishers can send messages to topics or queues, to which subscribers can subscribe or\n * bind. A Destination specifies the target of such an operation.\n * @hideconstructor\n * @memberof solace\n */\nclass Destination {\n\n  /*\n   * @constructor\n   * @param {String|solace.Destination|Object} spec The name of the destination, or, the\n   *  destination to copy. If this is a {@link solace.Destination} then all other parameters are\n   *  ignored.\n   * @param {solace.DestinationType} [type=solace.DestinationType.Topic] The type of destination\n   *  to create\n   * @deprecated since 10.0 Applications should not call this constructor.\n   *  Use the factory methods on {@link solace.SolclientFactory}.\n   **/\n  constructor(spec, type = DestinationType.TOPIC) {\n    if (typeof spec === 'object') {\n      this._name = spec.name;\n      this._type = spec.type;\n      this._bytes = spec.bytes;\n      this._offset = spec.offset;\n      if (spec.isValidated) {\n        this._isValidated = true;\n        this._isWildcarded = spec.isWildcarded;\n        this._subscriptionInfo = spec.subscriptionInfo || {};\n      } else {\n        this._isValidated = false;\n        this._subscriptionInfo = {};\n      }\n    } else {\n      this._name = spec;\n      this._type = type;\n\n      // Don't validate encoding for deprecated construction path.\n      // This path would have more restrictions now, and it allows\n      // sdkperf a path for arbitrary topic construction.\n      const result = DestinationUtil.encode(type, spec);\n      this._bytes = result.bytes;\n      this._offset = result.offset;\n      this._isValidated = false;\n      this._subscriptionInfo = {};\n    }\n  }\n\n  /**\n   * @returns {String} The destination name specified at creation time.\n   */\n  getName() {\n    return this._name;\n  }\n\n  /**\n   * @type {String}\n   * @readonly\n   */\n  get name() {\n    return this.getName();\n  }\n\n  /**\n   * @returns {solace.DestinationType} The destination type\n   */\n  getType() {\n    return this._type;\n  }\n\n  /**\n   * @type {solace.DestinationType}\n   * @readonly\n   */\n  get type() {\n    return this.getType();\n  }\n\n  /**\n   * @returns {String} Returns the null-terminated UTF-8 encoded destination bytes.\n   *\n   * @private\n   */\n  getBytes() {\n    return this._bytes;\n  }\n  get bytes() {\n    return this.getBytes();\n  }\n\n  getOffset() {\n    return this._offset;\n  }\n  get offset() {\n    return this.getOffset();\n  }\n\n  /**\n   * This provides the legacy validation that was done post-creation and is used in some code paths\n   * on use.  It is preferred to use non-deprecated ways of creating destinations, which do\n   * validation on create instead.\n   * @throws OperationError if the destination is not valid.\n   * @private\n   */\n  validate() {\n    if (this._isValidated) {\n      if (this._error) throw this._error;\n      return;\n    }\n\n    const { error, isWildcarded } =\n      DestinationUtil.legacyValidate(this.type, this.bytes, this.name);\n    this._isValidated = true;\n    if (error) {\n      this._error = error;\n      throw error;\n    }\n    this._isWildcarded = isWildcarded;\n  }\n\n  /**\n   * This is really only useful for topics.  If a queue name contains a wildcarded construct, it is\n   * up to the router what to do -- it would either reject it or treat the wildcard as literal.  But\n   * it is included here for all destination types since we have the info.\n   * @returns {Boolean} True if the underlying name represents a wildcarded topic; false otherwise.\n   * @throws {OperationError} If the destination is not valid.\n   * @private\n   */\n  isWildcarded() {\n    this.validate();\n    return this._isWildcarded;\n  }\n\n  /**\n   * @returns {Object} subscriptionInfo object or empty object\n   * @private\n   */\n  getSubscriptionInfo() {\n    return this._subscriptionInfo || {};\n  }\n\n  /**\n   * @returns {String} A generic description of the Destination.\n   */\n  toString() {\n    return util_inspect(this);\n  }\n\n  /**\n   * @param {*} other The other object for comparison\n   * @returns {Boolean} True if the passed destination is the same\n   * @private\n   */\n  equals(other) {\n    if (!(other instanceof Destination)) {\n      return false;\n    }\n    return (this.toString().valueOf() === other.toString().valueOf());\n  }\n}\n\nmodule.exports.Destination = Destination;\n","module.exports.WebSocketCloseCodes = {\n  0: {\n    name:        'Unknown code',\n    description: 'No status code was returned by the operation',\n  },\n  1000: {\n    name:        'Normal Closure',\n    description: 'The connection closed normally',\n  },\n  1001: {\n    name:        'Going Away',\n    description: 'The endpoint is going away due to a server failure or client navigation',\n  },\n  1002: {\n    name:        'Protocol Error',\n    description: 'A WebSocket protocol error occurred',\n  },\n  1003: {\n    name:        'Unsupported Data',\n    description: 'The endpoint cannot handle the specified data type',\n  },\n  1004: {\n    name:        'Reserved',\n    description: '',\n  },\n  1005: {\n    name:        'No Status Recvd',\n    description: 'Expected a status code but none was provided',\n  },\n  1006: {\n    name:        'Abnormal Closure',\n    description: 'No close frame was received before remote hangup',\n  },\n  1007: {\n    name:        'Invalid Frame Payload Data',\n    description: 'A message contained data inconsistent with its encoding',\n  },\n  1008: {\n    name:        'Policy Violation',\n    description: 'A message violated endpoint policy',\n  },\n  1009: {\n    name:        'Message Too Big',\n    description: 'A data frame was too large',\n  },\n  1010: {\n    name:        'Missing Extension',\n    description: 'The endpoint did not negotiate an expected extension',\n  },\n  1011: {\n    name:        'Internal Error',\n    description: 'The server encountered an unexpected condition that prevented it from fulfilling the request',\n  },\n  1012: {\n    name:        'Service Restart',\n    description: 'The server is restarting',\n  },\n  1013: {\n    name:        'Try Again Later',\n    description: 'The server is terminating the connection due to a temporary condition',\n  },\n  1014: {\n    name:        'Bad Gateway',\n    description: 'A gateway or proxy received an invalid response from the upstream server',\n  },\n  1015: {\n    name:        'TLS Handshake',\n    description: 'The connection was closed due to a failure to perform a TLS handshake',\n  },\n};\n","const { SolaceError } = require('./solace-error');\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * An error thrown by the API when an operational error is encountered.\n * @memberof solace\n * @extends {solace.SolaceError}\n * @hideconstructor\n */\nclass OperationError extends SolaceError {\n\n  /*\n   * @constructor\n   * @param {String} message The message to include in the error.\n   * @param {Number} [subcode] The subcode. See {@link ErrorSubcode} for valid values\n   * @param {Object} [reason] Embedded error or exception (optional)\n   */\n  constructor(message, subcode, reason) {\n    /**\n     * The name of the error.\n     * @name solace.OperationError#name\n     * @type {String}\n     * @readonly\n     * @description 'OperationError'\n     */\n    super('OperationError', message, OperationError);\n    /**\n     * The subcode for the error. @see {@link solace.ErrorSubcode}\n     * @name solace.OperationError#subcode\n     * @type {solace.ErrorSubcode}\n     */\n    this.subcode = subcode;\n    /**\n     * The reason for the error: an embedded error object or exception.\n     * @name solace.OperationError#reason\n     * @type {Object}\n     */\n    this.reason = reason;\n  }\n\n}\n\nmodule.exports.OperationError = OperationError;\n","const WebTransportsLib = require('./web');\nconst { Lazy } = require('solclient-eskit');\nconst { LOG_TRACE } = require('solclient-log');\nconst { TransportBase } = require('./transport-base');\nconst { TransportProtocol } = require('./transport-protocols');\n\nconst { lazyValue } = Lazy;\n\n// Define transportProtocol to transport mapping\nconst lutTransportProtocols = lazyValue(() => {\n  const protocols = {\n    [TransportProtocol.HTTP_BASE64]:           WebTransportsLib.StateBase64,\n    [TransportProtocol.HTTP_BINARY]:           WebTransportsLib.StateBinary,\n    [TransportProtocol.HTTP_BINARY_STREAMING]: WebTransportsLib.StateStreamingAndBinary,\n    [TransportProtocol.WS_BINARY]:             WebTransportsLib.StateWebSocketBinary,\n  };\n  return protocols;\n});\n\n/**\n * @classdesc\n * Handles web transport selection and downgrade without creating the actual transport\n * session object\n * @memberof solace\n * @private\n */\nclass TransportProtocolHandler {\n  constructor(url, webTransportProtocolList) {\n    const useSSL = TransportBase.useSsl(url);\n    let transport = null;\n    let downgradeTransport = null;\n    webTransportProtocolList.slice().reverse().forEach((el) => {\n      const TransportConstructor = lutTransportProtocols.value[el];\n      transport = new TransportConstructor(useSSL, this.switchState.bind(this), downgradeTransport);\n      downgradeTransport = transport;\n    });\n    this._transport = transport;\n    this._transport.onEnter();\n  }\n\n  getTransportProtocol() {\n    return this._transport.getTransportProtocol();\n  }\n\n  completeDowngrade(err) {\n    return this._transport.completeDowngrade(err);\n  }\n\n  canCompleteDowngrade() {\n    return (this._transport.getNextState() !== null);\n  }\n\n  toString() {\n    return this._transport.toString();\n  }\n\n  switchState(newState, reason) {\n    LOG_TRACE(`Switching ${this._transport} => ${newState} (${reason})`);\n    this._transport = newState;\n    newState.onEnter();\n  }\n}\n\nmodule.exports.TransportProtocolHandler = TransportProtocolHandler;\n","// Node entry point\n//global.BUILD_ENV = require('./define.config.js');\nmodule.exports = require('solclient-core');\n\n","/**\n * @classdesc\n * Encapsulates the session's event callback function and an optional user-specified object.\n *\n * This class is passed to {@link solace.SolclientFactory.createSession} when creating a session.\n * @deprecated The {@link solace.Session} is an <b>EventEmitter</b>.  Register event handlers\n * against {@link solace.SessionEventCode} events instead.\n *\n * @memberof solace\n */\n\nclass SessionEventCBInfo {\n\n  /**\n   * Creates an instance of SessionEventCBInfo.\n   *\n   * @param {function(Session, SessionEvent, Object, Object)} sessionEventCBFunction\n   *  invoked by the Messaging API when a session event occurs. The prototype\n   *  of this function is the following: ({@link solace.Session},\n   *                                      {@link solace.SessionEvent},\n   *                                      {Object}})\n   * @param {Object} userObject An optional user-specified object passed on\n   * every session event callback.\n   */\n  constructor(sessionEventCBFunction, userObject) {\n    /**\n     * @type {Object}\n     * @description user-specified object\n     */\n    this.userObject = userObject;\n\n    /**\n     * @type {function}\n     * @description The prototype of this function is the\n     * following:\n     * ({@link solace.Session}, {@link solace.SessionEvent},\n     * userObject {Object}, RFUObject {Object})\n     */\n    this.sessionEventCBFunction = sessionEventCBFunction;\n  }\n}\n\nmodule.exports.SessionEventCBInfo = SessionEventCBInfo;\n","const { Enum } = require('solclient-eskit');\n\n/********************************************************************************\n * @private\n * @enum {string}\n * State names on the Publisher FSM\n ********************************************************************************/\nconst PublisherStateNames = {\n  UNBOUND:         'PublisherUnbound',\n  OPENFLOWSENT:    'PublisherOpenFlowSent',\n  UP:              'PublisherUp',\n  FAILED:          'PublisherFailed',\n  CLOSEFLOWSENT:   'PublisherCloseFlowSent',\n  DATA_XFER:       'PublisherDataXfer',\n  FLOW_CONTROLLED: 'MessagePublisherFlowControlled',\n  RETRANSMITTING:  'PublisherRetransmitting',\n};\n\nmodule.exports.PublisherStateNames = Enum.new(PublisherStateNames);\n","const { ErrorSubcode } = require('./error-subcodes');\nconst { makeMap } = require('solclient-eskit');\n\n/* eslint-disable max-len */\n\nconst SC = ErrorSubcode;\n\nconst ROOT_MAPPING = makeMap(\n  400, makeMap(\n    'client name parse error', SC.CLIENT_NAME_INVALID,\n    'document is too large', SC.MESSAGE_TOO_LARGE,\n    'inactivity timeout', SC.INACTIVITY_TIMEOUT,\n    'max num subscriptions exceeded', SC.SUBSCRIPTION_TOO_MANY,\n    'message too long', SC.MESSAGE_TOO_LARGE,\n    'nolocal discard', SC.NOLOCAL_DISCARD,\n    'not enough space', SC.OUT_OF_RESOURCES,\n    'subscription already exists', SC.SUBSCRIPTION_ALREADY_PRESENT,\n    'subscription attributes conflict with existing subscription', SC.SUBSCRIPTION_ATTRIBUTES_CONFLICT,\n    'subscription not found', SC.SUBSCRIPTION_NOT_FOUND,\n    'subscription parse error', SC.SUBSCRIPTION_INVALID,\n    'topic parse error', SC.INVALID_TOPIC_SYNTAX,\n    'unknown transport session identifier', SC.UNKNOWN_TRANSPORT_SESSION_ID,\n    'xml parse error', SC.XML_PARSE_ERROR,\n    'unsupported ssl downgrade value', SC.LOGIN_FAILURE\n  ),\n  401, makeMap(\n    '', SC.LOGIN_FAILURE\n  ),\n  403, makeMap(\n    'basic authentication is shutdown', SC.BASIC_AUTHENTICATION_IS_SHUTDOWN,\n    'client certificate authentication is shutdown', SC.CLIENT_CERTIFICATE_AUTHENTICATION_IS_SHUTDOWN,\n    'client name already in use', SC.CLIENT_NAME_ALREADY_IN_USE,\n    'client username is shutdown', SC.CLIENT_USERNAME_IS_SHUTDOWN,\n    'dynamic clients not allowed', SC.DYNAMIC_CLIENTS_NOT_ALLOWED,\n    'invalid virtual router address', SC.INVALID_VIRTUAL_ADDRESS,\n    'forbidden', SC.CLIENT_ACL_DENIED,\n    'message vpn not allowed', SC.MESSAGE_VPN_NOT_ALLOWED,\n    'publish acl denied', SC.PUBLISH_ACL_DENIED,\n    'replication is standby', SC.REPLICATION_IS_STANDBY,\n    'selector does not match', SC.SELECTOR_DOES_NOT_MATCH,\n    'subscription acl denied', SC.SUBSCRIPTION_ACL_DENIED,\n    'subscription does not match', SC.SUBSCRIPTION_DOES_NOT_MATCH,\n    'compression is shutdown', SC.LOGIN_FAILURE,\n    'shared subscriptions not supported on topic endpoints', SC.SHARED_SUBSCRIPTIONS_ENDPOINT_NOT_ALLOWED,\n    'shared subscriptions not supported on queues', SC.SHARED_SUBSCRIPTIONS_ENDPOINT_NOT_ALLOWED,\n    'shared subscription permission denied', SC.SHARED_SUBSCRIPTIONS_NOT_ALLOWED\n  ),\n  404, makeMap(\n    '', SC.LOGIN_FAILURE\n  ),\n  503, makeMap(\n    'low priority msg congestion', SC.LOW_PRIORITY_MSG_CONGESTION,\n    'message vpn unavailable', SC.MESSAGE_VPN_UNAVAILABLE,\n    'replication is standby', SC.REPLICATION_IS_STANDBY,\n    'service unavailable', SC.GM_UNAVAILABLE,\n    'spool over quota', SC.SPOOL_OVER_QUOTA,\n    'subscriber delete in progress', SC.CLIENT_DELETE_IN_PROGRESS,\n    'too many clients', SC.TOO_MANY_CLIENTS,\n    'too many connections for vpn', SC.TOO_MANY_CLIENTS,\n    'max message usage exceeded', SC.MAX_MESSAGE_USAGE_EXCEEDED\n  ),\n  507, makeMap(\n    'ad not ready', SC.GM_NOT_READY\n  )\n);\n\nconst AD_MAPPING = makeMap(\n  'PARENT', ROOT_MAPPING,\n  400, makeMap(\n    'already bound', SC.ALREADY_BOUND,\n    'endpoint already exists', SC.ENDPOINT_ALREADY_EXISTS,\n    'subscription already exists', SC.SUBSCRIPTION_ALREADY_PRESENT,\n    'already exists', SC.ENDPOINT_ALREADY_EXISTS,\n    'endpoint property mismatch', SC.ENDPOINT_PROPERTY_MISMATCH,\n    'invalid durable topic endpoint name', SC.INVALID_DTE_NAME,\n    'invalid selector', SC.INVALID_SELECTOR,\n    'invalid topic name', SC.INVALID_TOPIC_NAME_FOR_TOPIC_ENDPOINT,\n    'invalid queue or topic endpoint durability', SC.INVALID_QUEUE_OR_TOPIC_ENDPOINT_DURABILITY,\n    'queue not found', SC.QUEUE_NOT_FOUND,\n    'quota out of range', SC.QUOTA_OUT_OF_RANGE,\n    'unknown flow name', SC.UNKNOWN_FLOW_NAME,\n    'unsubscribe not allowed', SC.UNSUBSCRIBE_NOT_ALLOWED_CLIENTS_BOUND,\n    'invalid queue name', SC.INVALID_QUEUE_NAME,\n    'invalid topic endpoint name', SC.INVALID_TE_NAME,\n    'message size out of range', SC.MESSAGE_SIZE_OUT_OF_RANGE,\n    'unsupported permissions', SC.UNSUPPORTED_PERMISSIONS,\n  ),\n  403, makeMap(\n    'permission not allowed', SC.PERMISSION_NOT_ALLOWED,\n    'client initiated replay not allowed on non-exclusive topic endpoint', SC.CLIENT_INITIATED_REPLAY_NON_EXCLUSIVE_NOT_ALLOWED,\n    'client initiated replay not allowed on non-exclusive queue', SC.CLIENT_INITIATED_REPLAY_NON_EXCLUSIVE_NOT_ALLOWED,\n    'client initiated replay from inactive flow not allowed', SC.CLIENT_INITIATED_REPLAY_INACTIVE_FLOW_NOT_ALLOWED,\n    'client initiated replay from browser flow not allowed', SC.CLIENT_INITIATED_REPLAY_BROWSER_FLOW_NOT_ALLOWED,\n    // 'replay not supported on temporary topic endpoint', SC.REPLAY_TEMPORARY_NOT_SUPPORTED,\n    'replay not supported on temporary queue', SC.REPLAY_TEMPORARY_NOT_SUPPORTED,\n    'replay not supported on anonymous queue', SC.REPLAY_ANONYMOUS_QUEUE_NOT_SUPPORTED,\n    'replay not supported on anonymous queue without subscriptions', SC.REPLAY_ANONYMOUS_QUEUE_WITHOUT_SUBSCRIPTIONS_NOT_SUPPORTED,\n    'unknown start location type', SC.UNKNOWN_START_LOCATION_TYPE,\n    'mismatched endpoint error id', SC.MISMATCHED_ENDPOINT_ERROR_ID,\n    'replay start message unavailable', SC.REPLAY_START_MESSAGE_NOT_AVAILABLE,\n    'browsing not supported on partitioned queue', SC.PARTITIONED_QUEUE_BROWSING_NOT_SUPPORTED,\n    'selectors not supported on partitioned queue', SC.PARTITIONED_QUEUE_SELECTORS_NOT_SUPPORTED\n  ),\n  503, makeMap(\n    'durable topic endpoint shutdown', SC.TOPIC_ENDPOINT_SHUTDOWN,\n    'endpoint shutdown', SC.TOPIC_ENDPOINT_SHUTDOWN,\n    'max clients exceeded for durable topic endpoint', SC.MAX_CLIENTS_FOR_TE,\n    'max clients exceeded for topic endpoint', SC.MAX_CLIENTS_FOR_TE,\n    'max clients exceeded for queue', SC.MAX_CLIENTS_FOR_QUEUE,\n    'no more non-durable queue or topic endpoint', SC.NO_MORE_NON_DURABLE_QUEUE_OR_TOPIC_ENDPOINT,\n    'no subscription match', SC.NO_SUBSCRIPTION_MATCH,\n    'queue shutdown', SC.QUEUE_SHUTDOWN,\n    'te shutdown', SC.TOPIC_ENDPOINT_SHUTDOWN,\n    'unknown durable topic endpoint', SC.UNKNOWN_TOPIC_ENDPOINT_NAME,\n    'unknown queue', SC.UNKNOWN_QUEUE_NAME,\n    'replay disabled', SC.REPLAY_DISABLED,\n    'replay cancelled', SC.REPLAY_CANCELLED,\n    'replay message unavailable', SC.REPLAY_MESSAGE_UNAVAILABLE,\n    'replay started', SC.REPLAY_STARTED,\n    'replayed message rejected by topic endpoint', SC.REPLAY_MESSAGE_REJECTED,\n    'replayed message rejected by queue\"', SC.REPLAY_MESSAGE_REJECTED,\n    'replay log modified', SC.REPLAY_LOG_MODIFIED,\n    'mismatched endpoint error id', SC.MISMATCHED_ENDPOINT_ERROR_ID,\n    'out of replay resources', SC.OUT_OF_REPLAY_RESOURCES,\n    'topic or selector modified on durable topic endpoint', SC.TOPIC_OR_SELECTOR_MODIFIED_ON_DURABLE_TOPIC_ENDPOINT,\n    'replay failed', SC.REPLAY_FAILED,\n    'replay start time not available', SC.REPLAY_START_TIME_NOT_AVAILABLE,\n    'replay start message unavailable', SC.REPLAY_START_MESSAGE_NOT_AVAILABLE,\n    'sync replication ineligible', SC.SYNC_REPLICATION_INELIGIBLE,\n    'max endpoints exceeded', SC.MAX_ENDPOINTS_EXCEEDED,\n    'copy-from queue template missing', SC.COPY_FROM_QUEUE_TEMPLATE_MISSING,\n    'copy-from topic-endpoint template missing', SC.COPY_FROM_TE_TEMPLATE_MISSING,\n  ),\n  507, makeMap(\n    'assured delivery not ready', SC.ASSURED_DELIVERY_NOT_READY,\n  )\n);\n\nfunction getSubcodeMappingInner(root, respErrorCode, respStr) {\n  if (respErrorCode === 200) {\n    // success response, error subcode is 0 -  transport session use 0 as OK\n    return 0;\n  }\n  const codeMap = root[respErrorCode] || {};\n  const searchKey = (respStr || '').toLowerCase();\n  const foundKey = Object.keys(codeMap)\n    .find(mapKey => mapKey === searchKey || searchKey.indexOf(mapKey) >= 0);\n\n  if (foundKey) {\n    return codeMap[foundKey];\n  }\n\n  if (codeMap['']) {\n    return codeMap[''];\n  }\n\n  /* eslint-disable dot-notation */\n  // Don't access string keys via dot properties\n  if (root['PARENT']) {\n    return getSubcodeMappingInner(root['PARENT'], respErrorCode, respStr);\n  }\n  /* eslint-enable dot-notation */\n\n  return undefined;\n}\n\nfunction getSubcodeMapping(root, respErrorCode, respStr) {\n  const result = getSubcodeMappingInner(root, respErrorCode, respStr);\n  if (result === undefined) {\n    return SC.UNKNOWN_ERROR;\n  }\n  return result;\n}\n\n/**\n * @classdesc\n * Return {ErrorSubcode} based on response code and response string\n * from the router.\n * @private\n */\nconst ErrorResponseSubcodeMapper = {\n  /**\n   * @param {Number} respErrorCode The response code (an HTTP-like integer) to use in the lookup.\n   * @param {String} respStr The response string to use in the lookup.\n   * @returns {solace.ErrorSubcode} The subcode found, or ErrorSubcode.UNKNOWN_ERROR if not found.\n   * @static\n   * @private\n   */\n  getErrorSubcode(respErrorCode, respStr) {\n    return getSubcodeMapping(ROOT_MAPPING, respErrorCode, respStr);\n  },\n\n  getADErrorSubcode(respErrorCode, respStr) {\n    return getSubcodeMapping(AD_MAPPING, respErrorCode, respStr);\n  },\n};\n\nmodule.exports.ErrorResponseSubcodeMapper = ErrorResponseSubcodeMapper;\n","const { ReplayStartLocation, ReplayStartType } = require('./replayStartLocation');\n/**\n * @classdesc\n *  * <b>This class is not exposed for construction by API users.\n *  Users should obtain an instances from the following:</b>\n *  * {@link solace.SolclientFactory.createReplayStartLocationDate}\n *\n * Defines the ReplayStartLocation class.\n * The ReplayStartLocation is set in the corresponding\n * MessageConsumer property {@link solace.MessageConsumerProperties#replayStartLocation}\n *\n * @extends ReplayStartLocation\n * @hideconstructor\n * @memberof solace\n */\n\nclass ReplayStartLocationDate extends ReplayStartLocation {\n  /**\n   * @param {Object} spec The topic spec\n   * @private\n   */\n  constructor(spec) {\n    super({\n      _replayStartValue: spec.getTime(),\n      _type:             ReplayStartType.DATE,\n    });\n  }\n  [util_inspect_custom]() {\n    return `[Epoch Time: ${this._replayStartValue}]`;\n  }\n  /**\n   * @static\n   * @param {Date} dateTime The Date for the replay start location\n   * @returns {ReplayStartLocation} the ReplayStartLocation\n   * @private\n   */\n  static createReplayStartLocationDate(dateTime) {\n    return new ReplayStartLocationDate(dateTime);\n  }\n}\n\nmodule.exports.ReplayStartLocationDate = ReplayStartLocationDate;\n","/**\n * @private\n */\nclass BidiMap {\n  constructor(...pairs) {\n    this.forward = new Map();\n    this.reverse = new Map();\n    pairs.forEach((p) => {\n      this.setValues(p[0], p[1]);\n    });\n  }\n\n  /**\n   * Sets the key => value and value => key relationships for the supplied parameters.\n   *\n   * Method name is #set, not #put, for alignment with ES map method names.\n   * @param {*} key The key for the forward mapping (value in the reverse mapping)\n   * @param {*} value The value for the forward mapping (key in the reverse mapping)\n   */\n  setValues(key, value) {\n    this.forward.set(key, value);\n    this.reverse.set(value, key);\n  }\n\n}\n\nmodule.exports.BidiMap = BidiMap;\n","const { DestinationType } = require('./destination-type');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\n\n/**\n * determines if subscription has the #noexport/ prefix\n *\n * @param {DestinationType} type The type of destination\n * @param {String} name The name of the destination\n * @param {ByteArray} bytes Encoded bytes of name\n * @param {Number} offset The index offset into the name to parse\n * @param {solace.SubscriptionInfo} result The attribute collector object for the parsed\n *   subscription\n * @param {Function} exceptionCreator The function to create an error for\n *   parsing\n * @returns {Object} {error, index, result} returns the parsing index and result\n *   where the result is a {solace.SubscriptionInfo} that contains information about the\n *   subscription like {Boolean} isNoExport\n * @private\n */\nfunction subscriptionParseNoExport(type, name, bytes, offset, result) {\n  const NOEXPORT_PREFIX = '#noexport/';\n  const NOEXPORT_PREFIX_LEN = NOEXPORT_PREFIX.length;\n  let index = offset;\n  let error;\n  if (name.length - index > NOEXPORT_PREFIX_LEN && !result.isNoExport) {\n    if (name.startsWith(NOEXPORT_PREFIX, index)) {\n      index += NOEXPORT_PREFIX_LEN;\n      result.isNoExport = true;\n    } else {\n      result.isNoExport = false;\n    }\n  } else {\n    result.isNoExport = false;\n  }\n  return { error, index, result };\n}\n\n/**\n * @param {DestinationType} type The type of destination\n * @param {String} name The name of the destination\n * @param {ByteArray} bytes Encoded bytes of name\n * @param {Number} offset The index offset into the name to parse\n * @param {solace.SubscriptionInfo} result The attribute collector object for the parsed\n *   subscription\n * @param {Function} exceptionCreator The function to create an error for\n *   parsing\n * @returns {Object} {error, index, result} returns the parsing index and result\n *   where the result is a {solace.SubscriptionInfo} that contains information about the\n *   subscription like {Boolean} isShared or {String} shareGroup or {Number}\n *   dispatchTopicIndex\n * @private\n */\nfunction subscriptionParseShare(type, name, bytes, offset,\n                                result, exceptionCreator) {\n  const SHARE_PREFIX = '#share/';\n  const SHARE_PREFIX_LEN = SHARE_PREFIX.length;\n  const LEVEL_DELIMETER = '/';\n  const LEVEL_DELIMETER_LEN = LEVEL_DELIMETER.length;\n  let index = offset;\n  let error;\n  let groupIndex = -1;\n  let shareGroup;\n  if (name.length - index > SHARE_PREFIX_LEN && !result.isShare) {\n    /* parse '#share/' prefix */\n    /*\n     * name starts with '#share/' prefix\n     * and has enough room for at least one character for share group\n     */\n    if (name.startsWith(SHARE_PREFIX, offset)\n        && (name.length - (index + SHARE_PREFIX_LEN)) > LEVEL_DELIMETER_LEN + 1) {\n      index += SHARE_PREFIX_LEN;\n      /* parse share group to next '/' */\n      groupIndex = index;\n      index = name.indexOf(LEVEL_DELIMETER, groupIndex);\n      if (index > 0) {\n        shareGroup = name.substring(groupIndex, index);\n        index += LEVEL_DELIMETER_LEN;\n        result.isShare = true;\n        result.shareGroup = shareGroup;\n        result.dispatchTopicIndex = index;\n      } else {\n        // error\n        error = exceptionCreator(`Illegal share Group in '${name}'@${groupIndex}.`);\n        result.isShare = true;\n      }\n    } else {\n      // not share subscription\n      result.isShare = false;\n    }\n  } else {\n    // not share subscription\n    result.isShare = false;\n  }\n  return { error, index, result };\n}\n\n/**\n * @param {Array.Function} layers The parsing functions executed from 0 to layers.length\n * @param {DestinationType} type The type of destination\n * @param {String} name The name of the destination\n * @param {ByteArray} bytes Encoded bytes of name\n * @param {solace.SubscriptionInfo} subInfo The attribute collector object for the parsed\n *   subscription\n * @param {Function} exceptionCreator The function to create an error for\n *   parsing\n * @returns {Object} {error, result} returns the parsed information in the SubscriptionInfo\n * object and error, when error is set result's values may be partially set\n * @private\n */\nfunction subscriptionStringParse(layers, type, name, bytes, subInfo, exceptionCreator) {\n  const parseLayers = layers.length || 0;\n  let offset = 0;\n  let error;\n  let result = subInfo || {};\n  for (let i = 0; i < parseLayers; ++i) {\n    const { error: constError, index: constOffset, result: constResult } =\n      layers[i](type, name, bytes, offset, result, exceptionCreator);\n    offset = constOffset;\n    result = constResult;\n    error = constError;\n    if (error) break;\n  }\n  return { error, result };\n}\n\n// Subscription parser map by DestinationType\n// Currently only Topics have subscription information to parse, but more can be added as needed\n// The _layers attribute for the parser defines the order of parsing destination names\n// The _layers are made up of functions that can execute with the signature:\n//   { error, index, result } function funcName(type, name, bytes, result[, exceptionCreator])\n// To add more subscription information parsing add more layers to _layers of the DestinationType\nconst SUBSCRIPTION_LAYER_PARSER_FROM_TYPE = {\n  [DestinationType.TOPIC]: {\n    _layers: [subscriptionParseNoExport, subscriptionParseShare],\n    parse:   function subParse(type, name, bytes, subInfo, exceptionCreator) {\n      const { error, result } =\n        subscriptionStringParse(this._layers, type, name, bytes, subInfo, exceptionCreator);\n      return { error, result };\n    },\n  },\n};\n\nfunction createOperationError(type, errorStr) {\n  return new OperationError(`Invalid ${type}: ${errorStr}`, ErrorSubcode.INVALID_TOPIC_SYNTAX);\n}\n\n/**\n * @classdesc\n * <b> This class is not exposed. This object contains useful subscription information about\n * a {solace.Destination#name}</b>\n * @hideconstructor\n * @memberof solace\n * @private\n */\nclass SubscriptionInfo {\n  /**\n   * @constructor\n   * @param {String} name The name of the destination to be used as a subscription\n   * @private\n   */\n  constructor(name) {\n    this._name = name;\n    // set default values\n    this._isShare = false;\n    this._isNoExport = false;\n    this._dispatchTopicIndex = -1;\n    this._shareGroup = null;\n  }\n\n  /**\n   * @returns {String} The destination name specified at creation time\n   */\n  getName() {\n    return this._name;\n  }\n\n  /**\n   * @returns {String} subscription name\n   * @readonly\n   */\n  get name() {\n    return this.getName();\n  }\n\n  /**\n   * @name solace.SubscriptionInfo#isShare\n   * @type {Boolean}\n   * @description Boolean Flag to indicate the {solace.SubscriptionInfo#name} is a shared\n   * subscription\n   * @default false\n   */\n  get isShare() {\n    return this._isShare;\n  }\n  set isShare(value) {\n    this._isShare = value;\n  }\n\n  /**\n   * @name solace.SubscriptionInfo#isNoExport\n   * @type {Boolean}\n   * @description Boolean Flag to indicate the {solace.SubscriptionInfo#name} is a no export\n   * subscription\n   * @default false\n   */\n  get isNoExport() {\n    return this._isNoExport;\n  }\n  set isNoExport(value) {\n    this._isNoExport = value;\n  }\n\n  /**\n   * @name solace.SubscriptionInfo#dispatchTopicIndex\n   * @type {Number}\n   * @description String index of the topic filter after subscription prefixes\n   * @default 0, the whole name as the topic filter\n   */\n  get dispatchTopicIndex() {\n    return this._dispatchTopicIndex < 0 ? 0 : this._dispatchTopicIndex;\n  }\n  set dispatchTopicIndex(value) {\n    this._dispatchTopicIndex = value < 0 ? -1 /* uninitialized*/ : value;\n  }\n\n  /**\n   * @name solace.SubscriptionInfo#shareGroup\n   * @type {?String}\n   * @description The Share group of a shared subscription, should be null if\n   * {solace.SubscriptionInfo#isShare} is false\n   */\n  get shareGroup() {\n    return this.isShare ? this._shareGroup : null;\n  }\n  set shareGroup(value) {\n    if (this.isShare) {\n      this._shareGroup = value;\n    }\n  }\n\n  /**\n   * @returns {String} A generic description of the SubscriptionInfo\n   */\n  toString() {\n    return util_inspect(this);\n  }\n  /**\n   * @static\n   * @type {Object}\n   * @param {String} name The name of the destination\n   * @param {DestinationType} type The Destination type\n   * @returns {Object} the subscription infomation from the destination name\n   * @private\n   */\n  static parseFromName(name, type = DestinationType.TOPIC) {\n    let subInfo = new SubscriptionInfo(name);\n    let error = null;\n    const parser = SUBSCRIPTION_LAYER_PARSER_FROM_TYPE[type];\n    if (parser) {\n      const { error: errorConst, result: subInfoConst } =\n      parser.parse(type, name, null, subInfo, createOperationError.bind(null, type));\n      subInfo = subInfoConst;\n      error = errorConst;\n    }\n    return { error, subInfo };\n  }\n}\nmodule.exports.SubscriptionInfo = SubscriptionInfo;\n","const {\n  ErrorSubcode,\n  OperationError,\n} = require('solclient-error');\nconst { FactoryProfile, SolclientFactoryProfiles } = require('./solclient-factory-profiles');\nconst { Parameter } = require('solclient-validate');\nconst { ProfileBinding } = require('./profile-binding');\nconst { SolclientFactoryProperties } = require('./solclient-factory-properties');\n\nconst factoryState = {\n  initializeCount: 0,\n  initializers:    [],\n};\n/**\n * @global\n * @name solClientJS\n * @description\n * <b>solClientJS</b> is a full functioned Solace Messaging API written entirely in JavaScript.\n * Applications using the <i>solClientJS</i> API can access all the features of a\n * Solace Message Router.\n *\n * The API is intended for use by applications written in JavaScript, targetting\n * either <b>NODE</b> or a traditional web browser.\n *\n * All classes, objects, methods of the API are encapsulated in the {@link solace} namespace.\n * The starting point for all applications is {@link solace.SolclientFactory}. This factory object\n * generates the {@link solace.Session} for connecting to the Solace Message Router.\n * {@link solace.SolclientFactory} also generates the {@link solace.Message} object\n * which enncapsulates the messages and {@link solace.Destination} the application will use\n * to send and receive data.\n * @summary The Solace Message Router Messaging API for Javascript.\n * @importTypeDefinitions import {EventEmitter} from 'events';\n * @importTypeDefinitions import Long = require('long');\n */\n\n/**\n * A singleton used as the main factory for the messaging APIs. The very first operation by\n * any application must be to initialize the API:\n * * {@link solace.SolclientFactory.init}\n *\n * <i>SolclientFactory</i> provides methods to construct:\n * * {@link solace.Session}\n * * {@link solace.Message}\n * * {@link solace.Destination}\n *\n * Additionally <i>SolclientFactory</i> manages the\n * logging level in the API.\n * @namespace\n * @public\n * @memberof solace\n */\nconst SolclientFactory = {\n\n  /**\n   * Adds a function to be called on factory initialization\n   * @param {function(factoryProps, factoryState)} func initializer function to be called\n   * @internal\n   */\n  addInitializer(func) {\n    factoryState.initializers.push(func);\n  },\n\n  /**\n   * @param {function} func function to wrap\n   * @returns {function} new factory method\n   * @internal\n   */\n  createFactory(func) {\n    return function factoryMethod(...args) {\n      if (factoryState.initializeCount === 0) {\n        throw new OperationError('SolclientFactory not initialized', ErrorSubcode.INVALID_OPERATION);\n      }\n      return func(...args);\n    };\n  },\n\n  /**\n   * Initialize global properties. This function must be called before any other API call is made.\n   *\n   * Note: After the first call to this method, subsequent calls have no effect.\n   *\n   * @param {solace.SolclientFactoryProperties} [factoryProps] The initialization properties for\n   *  the factory, if required.\n   * @param {solace.LogImpl} [factoryProps.logger] A logging implementation\n   * @param {solace.LogLevel}[factoryProps.logLevel] The logging level to use\n   *  for filtering log events.\n   * @param {solace.SolclientFactoryProfiles}\n   *  [factoryProps.profile=solace.SolclientFactoryProfiles.version7]\n   *     The factory profile. This class cannot be created by an API user; choose one of the static\n   *     instances from {@link solace.SolclientFactoryProfiles}.\n   * @throws {solace.OperationError} Invalid logger implementation\n   * @returns {solace.SolclientFactory} For method chaining\n   */\n  init(factoryProps) {\n    if (factoryState.initializeCount > 0) {\n      return this;\n    }\n\n    const props = new SolclientFactoryProperties(factoryProps);\n    const profile = factoryProps && factoryProps.profile || SolclientFactoryProfiles.version7;\n    Parameter.isInstanceOf('factoryProps.profile', profile, FactoryProfile);\n    ProfileBinding.value = profile;\n\n    factoryState.initializers.forEach((initializer) => {\n      initializer.call(this, props, factoryState);\n    });\n    ++factoryState.initializeCount;\n\n    if ((factoryProps !== undefined) && (factoryProps !== null)) {\n      // Factory should not depend on other packages at file scope\n      // eslint-disable-next-line global-require\n      const { LOG_DEBUG } = require('solclient-log');\n      LOG_DEBUG('Factory properties:\\n', factoryProps);\n    }\n    return this;\n  },\n\n  /**\n   * @private\n   */\n  reset() {\n    factoryState.initializeCount = 0;\n  },\n\n\n  /**\n   * @returns {Number} Count of factory initializations.\n   *    Nonzero means cannot be initialized again.\n   * @internal\n   */\n  _getInitializeCount() {\n    return factoryState.initializeCount;\n  },\n\n  /**\n   * @private\n   * @name solace.SolclientFactory.profiles\n   * @type {solace.SolclientFactoryProfiles}\n   * @readonly\n   * @description The collection of {@link solace.FactoryProfile}. See a description of\n   * each in {@link solace.SolclientFactoryProfiles}.\n   */\n  get profiles() {\n    return SolclientFactoryProfiles;\n  },\n};\n\nmodule.exports.SolclientFactory = SolclientFactory;\n","const { DestinationFromNetwork, DestinationType, Queue } = require('solclient-destination');\nconst { LOG_DEBUG, LOG_INFO } = require('solclient-log');\nconst { SDTDestType } = require('../sdt-destination-types');\nconst { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\nconst { Topic } = require('solclient-destination');\n\nconst ParseDestination = {};\nParseDestination.parseDestination = function parseDestination(dataBuf, pos, len) {\n  const destType = dataBuf.readUInt8(pos);\n  const destBytes = dataBuf.toString('latin1', pos + 1, pos + len);\n  // first try to create a destination from the string, this handles strings with\n  // the preamble ('#P2P/QUE' or '#P2P/TQUE').\n  let destination = DestinationFromNetwork.createDestinationFromBytes(destBytes);\n  if (SDTDestType[destination.type] !== destType) {\n    // SDT destination type does not match the string format. This means either:\n    //    * that the string contains a queue preamble and the type is topic,\n    //      so just make it a topic\n    //    * that the type is queue and the string does not have the preamble, which means we\n    //      should construct a queue.\n    if (SDTDestType[DestinationType.QUEUE] === destType) {\n      destination = Queue.createFromLocalName(destBytes); //createFromLocal has issue with buffer\n    } else if (SDTDestType[DestinationType.TOPIC] === destType) {\n      LOG_DEBUG(`Found and allowed SDT field with  destination type ${destType} when decoding ${destBytes} to ${destination.type}`);\n      //\n      // override the format and set destType as specified in the SMF (i.e. TOPIC)\n      destination = new Topic(destBytes);\n    } else {\n      LOG_INFO(`Drop SDT field with invalid destination type ${destType} when decoding ${destBytes} to ${destination.type}`);\n      return null;\n    }\n  }\n  return SDTField.create(SDTFieldType.DESTINATION, destination);\n};\n\nmodule.exports.ParseDestination = ParseDestination;\n","module.exports = require(\"https\");","const SDTFieldLib = require('./sdt-field');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\n\n/**\n * @classdesc\n * Defines a Structured Data Type (SDT) stream container. A stream is an iterable collection of\n * {@link solace.SDTField}s.\n * @memberof solace\n */\nclass SDTStreamContainer {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this._stream = [];\n    this._writable = true;\n    this._readPt = 0;\n  }\n\n  /**\n   * Returns true if the stream has at least one more {@link solace.SDTField}\n   * at the current position.\n   * @returns {Boolean} true, if there is an available field at the read pointer; false, otherwise.\n   */\n  hasNext() {\n    return (this._stream.length > this._readPt);\n  }\n\n  /**\n   * Returns the next field in the stream and advances the read pointer.\n   * If the end of the stream is reached, it returns undefined.\n   * @returns {solace.SDTField} The next field in the stream.\n   */\n  getNext() {\n    return (this._readPt < this._stream.length) ? this._stream[this._readPt++] : undefined;\n  }\n\n  /**\n   * Rewinds the read pointer to the beginning of the stream. Normally when {@link hasNext}\n   * returns false, a client application must call rewind() to reiterate over the stream's fields.\n   * @throws {@link solace.OperationError} if the stream cannot be rewound.\n   */\n  rewind() {\n    this._readPt = 0;\n  }\n\n  /**\n   * Appends a SDTField to the stream.\n   * <p>\n   * If <code>field</code> is a {@link solace.SDTField}, this field is appended to the stream.\n   * <br>\n   * If <code>field</code> is a {@link solace.SDTFieldType},\n   * then the API will create a SDTField of this\n   * type with a value of <code>optValue</code> and append this new SDTField to\n   * the stream.\n   *\n   * @param {solace.SDTField|solace.SDTFieldType} field The field to append to the stream.\n   * @param {*} [optValue] The value to wrap as an SDTField.\n   */\n  /**\n   * Appends a field to this stream.\n   * <p>\n   * @deprecated If <code>typeOrField</code> is a {@link solace.SDTField} instance,\n   * it is appended to the stream.\n   *\n   * The preferred usage is to pass a {@link solace.SDTFieldType}, then the API will create a\n   * SDTField of this type using <code>value</code> and append this new SDTField\n   * to the stream.\n   *\n   * @param {solace.SDTField|solace.SDTFieldType} typeOrField A SDTField instance or SDTFieldType.\n   * @param {*} [value] The value to wrap as an SDTField.\n   * @throws {@link solace.OperationError} if value does not match type\n   * @throws {@link solace.SDTUnsupportedValueError} if value is not in range\n   *  supported by the platform/runtime\n   */\n  addField(typeOrField, value = undefined) {\n    if (!this._writable) return;\n\n    if (typeOrField instanceof SDTFieldLib.SDTField) {\n      this._stream.push(typeOrField);\n      return;\n    }\n\n    if (typeof value !== 'undefined') {\n      this._stream.push(SDTFieldLib.SDTField.create(typeOrField, value));\n      return;\n    }\n\n    throw new OperationError('Invalid parameters to addField: expected SDTField, or type and value',\n      ErrorSubcode.PARAMETER_CONFLICT);\n  }\n}\n\nmodule.exports.SDTStreamContainer = SDTStreamContainer;\n","const { Stats } = require('./lib/stats.js');\nconst { StatsByMode } = require('./lib/stat-bymode');\nconst { StatType } = require('./lib/stat-types');\n\nmodule.exports = {\n  Stats,\n  StatType,\n  StatsByMode,\n};\n","const { SolaceError } = require('./solace-error');\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * An error thrown when calling an API that has not been implemented.\n * @hideconstructor\n * @extends {solace.SolaceError}\n *\n * @memberof solace\n */\nclass NotImplementedError extends SolaceError {\n  /*\n   * Creates an instance of NotImplementedError.\n   * @param {any} message The message to include in the error.\n   * @memberof NotImplementedError\n   */\n  constructor(message) {\n    super('NotImplementedError', message || '', NotImplementedError);\n  }\n  /**\n   * The name of the error.\n   * @name solace.NotImplementedError#name\n   * @type {String}\n   * @readonly\n   * @description 'NotImplementedError'\n   */\n}\n\nmodule.exports.NotImplementedError = NotImplementedError;\n\n","let assert;\n\n/**\n * Browsers and Node share a common console.assert interface, console.assert(assertion, ...);\n * In Node, console.assert throws AssertionError if its assertion is falsy.\n * In browsers, they print to the console.\n * Extend browser behaviour to also throw.\n */\n\nif (BUILD_ENV.MODE_DEBUG) {\n  let internalAssert;\n  if (BUILD_ENV.TARGET_NODE) {\n    // _eslint-disable-next-line no-console\n    internalAssert = console.assert;\n  } else {\n    internalAssert = function browserAssert(assertion, ...args) {\n      if (!assertion) {\n        throw new Error(`Assertion error: ${typeof assertion} ${assertion} (${args.join(' ')})`);\n      }\n    };\n  }\n  // Now, wrap the assert in a catch and rethrow to give us a single place\n  // to set assert breakpoints.\n  assert = function outerAssert(...args) {\n    // eslint-disable-next-line no-useless-catch\n    try {\n      internalAssert(...args);\n    } catch (e) {\n      // if (BUILD_ENV.MODE_DEBUG) debugger;\n      throw (e);\n    }\n  };\n} else {\n  // In production mode, asserts are generally disabled.\n  assert = () => {};\n}\n\nmodule.exports.assert = assert;\n","const { Parameter } = require('solclient-validate');\nconst { Convert } = require('solclient-convert');\nconst { TraceContextSetter } = require('./message-trace-context-setter');\n\nconst {\n    isBoolean,\n    isStringOrNothing,\n} = Parameter;\n\nconst {\n    stringToUint8Array,\n    hexStringToUint8Array,\n} = Convert;\n\n/**\n * @classdesc\n * <b>This class abstracts readonly view on a metadata used for \n * distributed message tracing with Solace messaging APIs\n * types. This class is for internal use only.\n * <p>\n * @hideconstructor\n * @memberof solace\n */\nclass TraceContext {\n\n    /**\n     * Abstract constructor for readonly view on metadata used \n     * for distributed message tracing.\n     * \n     * @param {TraceContextSetter} traceContextSetter {TraceContextSetter}\n     * \n     * @constructor\n     * @hideconstructor\n     * @private\n     */\n    constructor(traceContextSetter) {\n        this._traceId = isStringOrNothing('traceId', traceContextSetter.traceId);\n        this._spanId = isStringOrNothing('spanId', traceContextSetter.spanId);\n        this._isSampled = isBoolean('isSampled', traceContextSetter.isSampled);\n        this._traceState = traceContextSetter.traceState;\n        this._version = traceContextSetter.version;\n    }\n\n    /**\n     * Clone the a TraceContext object used \n     * for distributed message tracing.\n     * \n     * @param {TraceContext} toClone {TraceContext}\n     * @returns {TraceContext} the newly cloned TraceContext instance\n     */\n    static clone(toClone) {\n        const newContextSetter = new TraceContextSetter();\n        newContextSetter._setSpanId(toClone.getSpanId());\n        newContextSetter._setTraceId(toClone.getTraceId());\n        newContextSetter._setSampled(toClone.getIsSampled());\n        newContextSetter._setTraceState(toClone.getTraceState());\n        newContextSetter._setVersion(toClone.getVersion());\n        return new TraceContext(newContextSetter);\n    }\n\n    /**\n     * The version which for now is 1.\n    */\n    get version() {\n        return this._version || 0x01; // version=0001 (4 bits, version=1);\n    }\n    /**\n     * Gets the version associated with the message trace.\n     * \n     * @returns {Number} The version encoded as Hex value\n     */\n    getVersion() {\n        return this.version;\n    }\n\n    /**\n     * The maximum allowed string size of trace state to propagate.\n     * \n     * Refer: https://www.w3.org/TR/trace-context/#tracestate-limits\n    */\n    get MAX_TRACE_STATE_LENGTH() {\n        return 512;\n    }\n \n    /**\n     * The tranceId property as a 16-length string\n    */\n    get traceId() {\n        return this._traceId;\n    }\n    /**\n     * Gets the value of the trace identifier associated with the message.\n     * \n     * @returns {String} value of trace identifier associated with the message as\n     * 16-length string.\n     */\n    getTraceId() {\n        return this._traceId;\n    }\n \n    /**\n     * The spanId property a 8-length string\n    */\n    get spanId() {\n        return this._spanId;\n    }\n    /**\n     * Gets the value of the span identifier associated with the message.\n     * \n     * @returns {String} value of span identifier associated with the message as\n     * 8-length string.\n     */\n    getSpanId() {\n        return this._spanId;\n    }\n\n    /**\n     * The isSampled boolean property\n    */\n    get isSampled() {\n        return this._isSampled;\n    }\n    /**\n     * Returns true if the sampling for the associated message is on,\n     * otherwise false.\n     * \n     * @returns {Boolean} indicates whether the sampling is on or off\n     */\n    getIsSampled() {\n        return this._isSampled || false;\n    }\n\n    /**\n     * The traceState property\n    */\n    get traceState() {\n        return this._traceState;\n    }\n    /**\n     * Gets the value of the trace state associated with the message.\n     * \n     * @returns {?String} The value of trace state associated with the message\n     * @see {@link https://www.w3.org/TR/trace-context/#tracestate-header-field-values|w3c trace state format specification}\n     */\n    getTraceState() {\n        return this._traceState || null;\n    }\n    /**\n     * Gets the value of the trace state associated with the message.\n     * \n     * @returns {?String} The value of trace state associated with the message\n     * @see {@link https://www.w3.org/TR/trace-context/#tracestate-header-field-values|w3c trace state format specification}\n     */\n    getTruncatedTraceState() {\n        return this._standardTraceStateTruncation(this.MAX_TRACE_STATE_LENGTH);\n    }\n\n\n    /**\n     * It returns the encoded bytes that is \n     * passed to the SMF header to be encoded in \n     * SMF for the message.\n     * \n     * @returns {?Uint8Array} The value of encoded trace span context\n     */\n    getEncodedTraceContext() {\n        // format the string payload \n        // and return the correct format as a byte array or null\n        if (this.traceId == null || this.spanId == null) {\n            return null;\n        }\n\n        const traceStateLength = this.traceState == null ? 0 : this.traceState.length;\n\n        // the fixed part of the encoded data is at least 32 bytes\n        const contentBuffer = new ArrayBuffer(32 + traceStateLength);\n        let offsetPos = 0; // start from the beginning of the buffer\n        const contentBufferDataView = new DataView(contentBuffer);\n\n        let byte1 = 0; // headerByte: version 4 bits, sampled 2 bits and RFU=0 2 bits\n        // set the version to the four MSB\n        byte1 |= (this.version << 4); // version=0001 (4 bits, version=1)\n        byte1 |= this.isSampled ? 0x04 : 0x00; //sampled=0100 (2 bits, sampled=1 and 2 bits RFU=0)\n\n        // write the 1 byte header\n        contentBufferDataView.setUint8(offsetPos, byte1, false);\n        offsetPos ++; // move pointer to next free position\n\n        // write the first 16 bytes traceId\n        const traceId16byte = hexStringToUint8Array(this.traceId); // get the 8 byte array\n        for(let i = 0; i < 16; i ++) { // write the first 16 bytes\n            // use BigEndian; litteEndian = false\n            contentBufferDataView.setUint8(offsetPos + i, traceId16byte[i], false); // write the bytes\n        }\n        offsetPos += 16; // move pointer to next free position (plus 16 bytes)\n\n        // write the first 8 bytes spanId\n        const spanId8byte = hexStringToUint8Array(this.spanId) // get the 8 byte array\n        for(let i = 0; i < 8; i ++) { // write the first 8 bytes\n            // use BigEndian; litteEndian = false\n            contentBufferDataView.setUint8(offsetPos + i, spanId8byte[i], false); // write the bytes\n        }\n        offsetPos += 8; // move pointer to next free position (plus 8 bytes)\n\n        // write 1 byte InjectionStandard=1 (W3C)\n        contentBufferDataView.setUint8(offsetPos, 0x01, false);\n        offsetPos ++; // move pointer to next free position\n\n        // write 4 bytes RFU=0\n        // use BigEndian; litteEndian = false\n        contentBufferDataView.setUint16(offsetPos, 0, false); // write first two RFU bytes of zeros\n        contentBufferDataView.setUint16(offsetPos + 2, 0, false); // write last two RFU bytes of zeros\n        offsetPos += 4; // move pointer to next free position\n\n\t    if (this.traceState == null) {\n            // write 2 bytes TraceState length\n            // use BigEndian; litteEndian = false\n            contentBufferDataView.setUint16(offsetPos, 0, false); // write two bytes of zeros\n            offsetPos += 2; // move pointer to next free position\n\t    } else {\n\t      // If required, apply truncation logic on traceState\n\t      const truncatedTraceState = this.getTruncatedTraceState();\n\t      if (truncatedTraceState != null) {\n            // write 2 bytes TraceState length\n            const traceStateLength = truncatedTraceState.length;\n            // convert to two bytes\n            const traceStateLengthBytes = new Uint16Array([traceStateLength]); // get 2 bytes of length\n            // use BigEndian; litteEndian = false\n            contentBufferDataView.setUint16(offsetPos, traceStateLengthBytes, false);\n            offsetPos += 2; // move pointer to next free position\n\n            // set the remaining trace state bytes\n            const traceStateBytes = stringToUint8Array(truncatedTraceState);\n            for(let i = 0; i < traceStateBytes.length; i ++) {\n                // use BigEndian; litteEndian = false\n                contentBufferDataView.setUint8(offsetPos + i, traceStateBytes[i], false); // write the bytes\n            }\n            offsetPos += traceStateBytes.length;\n\t      }\n\t    }\n\n        // get the 8-byte array\n\t    return new Uint8Array(contentBuffer);\n    }\n\n    /**\n     * Truncate long trace states properly\n     * \n     * Refer: https://www.w3.org/TR/trace-context/#tracestate-limits\n     * @private\n     * @param {Number} maxTraceStateLength the maximum length for the trace state\n     * @returns {?String} The truncated trace state\n     */\n    _standardTraceStateTruncation(maxTraceStateLength) {\n        // cover corner cases\n\t    if (!this._traceState || this._traceState == null) {\n\t      return null;\n\t    } else if (this._traceState.length < maxTraceStateLength) {\n\t      return this._traceState; // no need to truncate\n\t    }\n\t\n        const ignoredMembers = new Array();\n\t    const traceStateBuilderArray = new Array();\n        let traceStateBuilderArrayLength = 0;\n\t    const listMembers = this._traceState.split(',');\n\n\t    for (let i = 0; i < listMembers.length; i++) {\n            let listMember = listMembers[i]; // current iteration object\n            if (listMember !== '' && listMember != null) {\n                let currentMemberLength = listMember.length;\n                if (currentMemberLength > 128) {\n                    // first of all, let's ignore members with length > 128 char\n                    ignoredMembers.push(listMember);\n                } else {\n                    let newExpectedLength = (traceStateBuilderArrayLength + currentMemberLength + (\n                        traceStateBuilderArrayLength > 0 ? 1 : 0));\n\n                    if (newExpectedLength <= maxTraceStateLength) {\n                        // the comma seperator is added at the end when building the string\n                        traceStateBuilderArray.push(listMember);\n                        // increment by length of added member + 1 (for the comma)\n                        traceStateBuilderArrayLength += (currentMemberLength + (\n                            traceStateBuilderArrayLength > 0 ? 1 : 0));\n                    } else {\n                        ignoredMembers.push(listMember);\n                    }\n                }\n            }\n\t    }\n\t\n\t    // See if we can add the ignored members now\n\t    for (let i = 0; i < ignoredMembers.length; i++) {\n            let currentMember = ignoredMembers[i];\n            let currentMemberLength = currentMember.length;\n\n            let newExpectedLength = (traceStateBuilderArrayLength + currentMemberLength + (\n                traceStateBuilderArrayLength > 0 ? 1 : 0));\n            if (newExpectedLength <= maxTraceStateLength) {\n                // the comma seperator is added at the end when building the string\n                traceStateBuilderArray.push(currentMember);\n                // increment by length of added member + 1 (for the comma)\n                traceStateBuilderArrayLength += (currentMemberLength + (\n                    traceStateBuilderArrayLength > 0 ? 1 : 0));\n            }\n\t    }\n\t\n        // build the string with comma seperating the members\n\t    return traceStateBuilderArray.join(',');\n\t}\n\n    /**\n     * Returns the string representation of this object\n     * \n     * @override\n     */\n    toString() {\n        return \"{traceId=\" + this.getTraceId()\n            + \", spanId=\" + this.getSpanId()\n            + \", sampled=\" + this.isSampled\n            + \", traceState=\" + ((this.traceState == null) ? \"}\" : \"'\" + this.traceState + \"'}\");\n    }\n}\n\nmodule.exports.TraceContext = TraceContext;\n","'use strict';\n\nconst { isUtf8 } = require('buffer');\n\nconst { hasBlob } = require('./constants');\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Determines whether a value is a `Blob`.\n *\n * @param {*} value The value to be tested\n * @return {Boolean} `true` if `value` is a `Blob`, else `false`\n * @private\n */\nfunction isBlob(value) {\n  return (\n    hasBlob &&\n    typeof value === 'object' &&\n    typeof value.arrayBuffer === 'function' &&\n    typeof value.type === 'string' &&\n    typeof value.stream === 'function' &&\n    (value[Symbol.toStringTag] === 'Blob' ||\n      value[Symbol.toStringTag] === 'File')\n  );\n}\n\nmodule.exports = {\n  isBlob,\n  isValidStatusCode,\n  isValidUTF8: _isValidUTF8,\n  tokenChars\n};\n\nif (isUtf8) {\n  module.exports.isValidUTF8 = function (buf) {\n    return buf.length < 24 ? _isValidUTF8(buf) : isUtf8(buf);\n  };\n} /* istanbul ignore else  */ else if (!process.env.WS_NO_UTF_8_VALIDATE) {\n  try {\n    const isValidUTF8 = require('utf-8-validate');\n\n    module.exports.isValidUTF8 = function (buf) {\n      return buf.length < 32 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","const { MessagePublisher } = require('./lib/message-publisher');\nconst { MessagePublisherAcknowledgeMode } = require('./lib/message-publisher-acknowledge-modes');\nconst { MessagePublisherEventName } = require('./lib/message-publisher-event-names');\nconst { MessagePublisherProperties } = require('./lib/message-publisher-properties');\nconst { MessagePublisherPropertiesValidator } = require('./lib/message-publisher-properties-validator');\nconst { PublisherFSMEvent } = require('./lib/publisher-fsm-event');\nconst { PublisherFSMEventNames } = require('./lib/publisher-fsm-event-names');\n\nmodule.exports.MessagePublisherAcknowledgeMode = MessagePublisherAcknowledgeMode;\nmodule.exports.MessagePublisher = MessagePublisher;\nmodule.exports.MessagePublisherProperties = MessagePublisherProperties;\nmodule.exports.PublisherFSMEvent = PublisherFSMEvent;\nmodule.exports.PublisherFSMEventNames = PublisherFSMEventNames;\nmodule.exports.MessagePublisherPropertiesValidator = MessagePublisherPropertiesValidator;\nmodule.exports.MessagePublisherEventName = MessagePublisherEventName;\n","const StateLib = require('./state');\nconst { FsmObject } = require('./object');\n\n/**\n * @classdesc\n * This object type represents an entryPoint for a particular FSM state.\n *\n * Note this initial implementation isn't particularly efficient, but it is\n * very simple by making use of two state objects (one just inside of and\n * one just outside of) the state the entryPoint belongs to.  If necessary, we\n * could optimize this if we wish.\n * @extends FsmObject\n * @private\n */\nclass EntryPoint extends FsmObject {\n\n  /**\n  * @constructor\n  * @param {Object} spec The object specifier used to implement the named\n  *      parameter idiom.\n  * @param {fsm.State} spec.state The state that the entryPoint belongs\n  *      to.\n  * @param {String} spec.entryPointName The name of the entryPoint.\n  * @param {fsm.StateContext~reactionCallback} spec.func The reaction\n  *      function for the entryPoint, which defines where to transition to\n  *      after state has been entered.\n  */\n  constructor(spec) {\n    super({ name: spec.entryPointName });\n\n    let innerState;\n    this.impl = this.impl || {};\n    // The outer portion of the entryPoint accepts incoming transitions before\n    // entering the entryPoint's state.  Then the entryPoint's state is\n    // entered through the use of the outerEntryPoint's initial transition.\n    this.impl.outerState = new StateLib.State({\n      name:          `${spec.state.getName()} outerEntryPoint: ${spec.entryPointName}`,\n      parentContext: spec.state.getParent(),\n    }).initial(() => spec.state.transitionTo(innerState));\n\n    // The job of the inner portion of the entryPoint is to follow a\n    // transition as specified by the application's reaction function.\n    innerState = new StateLib.State({\n      name:          `${spec.state.getName()} innerEntryPoint: ${spec.entryPointName}`,\n      parentContext: spec.state,\n    }).initial(spec.func);\n  }\n\n  /**\n   * @returns {fsm.State} The destination state for a transition to the\n   *      EntryPoint.\n   */\n  getDestState() {\n    return this.impl.outerState;\n  }\n}\n\nmodule.exports.EntryPoint = EntryPoint;\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","const DebugLib = require('solclient-debug');\nconst SMFLib = require('solclient-smf');\nconst { BaseSMFClient } = require('./base-smf-client');\nconst { BufferQueue } = require('./buffer-queue');\nconst { Convert, Hex } = require('solclient-convert');\nconst { LogFormatter } = require('solclient-log');\n\nconst BufferImpl = require('buffer').Buffer;\n\nconst { stringToUint8Array } = Convert;\nconst { formatHexString } = Hex;\n\nconst SMF_LOST_FRAMING_THRESHOLD = 80000000;\n\nconst { LOG_ERROR } = new LogFormatter('[buffer-smf-client]');\n\nfunction logPeekBuffer(buffer) {\n  const bufPair = buffer.peekView(Math.min(buffer.remaining(), 64));\n  LOG_ERROR(`First 64 bytes (or fewer) of incoming buffer: \\n${\n    DebugLib.Debug.formatDumpBytes(bufPair[0].toString('latin1', bufPair[1]), true, 0)}`);\n}\n\n/**\n * Interact with underlying transport to send and receive SMF messages\n * @private\n */\nclass BufferSMFClient extends BaseSMFClient {\n\n  /**\n   * @constructor\n   * @param {Function} rxSmfCB The callback to notify on SMF binary data received\n   * @param {Function} rxMessageErrorCB The callback to notify on message errors\n   * @param {Session} session The session owning this client\n   */\n  constructor(rxSmfCB, rxMessageErrorCB, session) {\n    super(rxSmfCB, rxMessageErrorCB, session);\n    this._incomingBuffer = new BufferQueue(SMF_LOST_FRAMING_THRESHOLD);\n  }\n\n  reset() {\n    super.reset();\n    // Called from super constructor, so guard this\n    if (this._incomingBuffer) this._incomingBuffer.reset();\n  }\n\n  /**\n   * @param {String} data Incoming data as binary string\n   */\n  rxDataString(data) {\n    this._rxDataCB(BufferImpl.from(stringToUint8Array(data)));\n  }\n\n  /**\n   * @param {ArrayBuffer} data Incoming data\n   */\n  rxDataArrayBuffer(data) {\n    this._rxDataCB(BufferImpl.from(data));\n  }\n\n  /**\n   * @param {Buffer} data Incoming data\n   */\n  rxDataBuffer(data) {\n    this._rxDataCB(data);\n  }\n\n  /**\n   * Invoked by transport session. Handles multiple SMF messages in input, as well as defragmenting\n   * partial SMF messages. The state we keep is in this._incomingBuffer.\n   * @param {Buffer} data The binary data to decode\n   */\n  _rxDataCB(data) {\n    if (this._session) {\n      // each incoming data chunk resets KA counter\n      this._session.resetKeepAliveCounter();\n    }\n    const buffer = this._incomingBuffer;\n    const putSuccess = buffer.put(data);\n    let remaining = buffer.remaining();\n\n    if (!putSuccess) {\n      // 80 megabytes - lost SMF framing: may never complete\n      logPeekBuffer(buffer);\n      this._rxMessageErrorCB(`Buffer overflow (length: ${remaining})`);\n      this._incomingBuffer.reset();\n    }\n\n    while (remaining > 12) {\n      const version = buffer.readUInt8(0) & 0x7;\n      if (version !== 3) {\n        LOG_ERROR(`Invalid smf version in smf header, version=${version}`);\n        // Throw away the buffer and bail out\n        LOG_ERROR(\"BufferSMFClient._rxDataCB(): couldn't decode message due to invalid smf header\");\n        logPeekBuffer(buffer);\n        this._incomingBuffer.reset();\n        this._rxMessageErrorCB('Error parsing incoming SMF - invalid SMF header detected');\n        return;\n      }\n\n      const messageLen = buffer.readUInt32BE(8);\n      if (messageLen > buffer.remaining()) {\n        break; // no full message\n      }\n      const msgBuffer = buffer.peekView(messageLen);\n\n      //const binaryString = messageBuffer.toString('binary');\n      const incomingMsg = SMFLib.Codec.Decode.decodeCompoundMessage(msgBuffer[0], msgBuffer[1]);\n      if (incomingMsg && incomingMsg.smfHeader) {\n        buffer.advance(incomingMsg.smfHeader.messageLength);\n        this._rxSmfCB(incomingMsg); // hand over to core API callback\n      } else {\n        // couldn't decode! Lost SMF framing.\n        // throw away the buffer and bail out\n        const sessionId = this._session ? this._session._sessionId : null;\n        const sessionIdHex = sessionId ? formatHexString(sessionId) : 'N/A';\n        LOG_ERROR(`BufferSMFClient._rxDataCB(): couldn't decode message (sessionId=${sessionIdHex})`);\n        logPeekBuffer(buffer);\n        this._incomingBuffer.reset();\n        this._rxMessageErrorCB('Error parsing incoming SMF');\n        return;\n      }\n      remaining = buffer.remaining();\n    }\n\n    if (remaining) {\n      // We have a partial header, or a valid header and a partial message.\n      // partial message remaining: keep it in incoming buffer\n    } else {\n      // clear incoming buffer\n      this._incomingBuffer.reset();\n    }\n  }\n}\n\nmodule.exports.BufferSMFClient = BufferSMFClient;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents authentication scheme enumeration.\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst MessagePublisherAcknowledgeMode = {\n  /**\n   * @description Applications receive an acknowledgement for every\n   * message.\n   * @type {String}\n   */\n  PER_MESSAGE: 'PER_MESSAGE',\n  /**\n   * @description Applications receive a windowed acknowledgement that\n   * acknowledges the returned correlation identifier and every message sent prior.\n   * @type {String}\n   */\n  WINDOWED:    'WINDOWED',\n};\n\nmodule.exports.MessagePublisherAcknowledgeMode = Enum.new(MessagePublisherAcknowledgeMode);\n","const NodeEventEmitter = require('events').EventEmitter;\nconst { ArrayUtils } = require('solclient-util');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { LOG_WARN } = require('solclient-log');\n\nconst { flatten, includes } = ArrayUtils;\nconst NODE_DEFAULT_EVENTS = ['error', 'newListener', 'removeListener'];\nconst BLACKLIST_DIRECT = ['newListener', 'removeListener'];\n\nfunction buildFilter(emits) {\n  if (typeof emits === 'function') return k => includes(NODE_DEFAULT_EVENTS, k) || emits(k);\n  if (!Array.isArray(emits)) return null;\n  const emitSet = new Set(flatten(emits));\n  NODE_DEFAULT_EVENTS.forEach(el => emitSet.add(el));\n  const emitArray = Array.from(emitSet);\n  return k => includes(emitArray, k);\n}\n\nconst DISABLED_ACTIONS = {\n  ignore() {},\n  fail() {\n    throw new Error('Emitter disabled');\n  },\n};\n\nclass EventEmitter extends NodeEventEmitter {\n  /**\n   * Creates an instance of EventEmitter.\n   *\n   * An EventEmitter is an object that periodically emits events that cause function objects, known\n   * as listeners, to be called. It exposes functions to attach passed functions to named events.\n   *\n   * Typically, event names are camel-cased strings, but any valid JavaScript property key can be\n   * used.\n   *\n   * @param {?Object} options Options for the emitter\n   * @param {String} [options.direct] An event that is to be directly dispatched when possible.\n   *  Direct dispatch is a performance optimization that minimizes EventEmitter overhead. Direct\n   *  dispatch skips the safe error handling path; use _formatErrorEvent if required.\n   * @param {Array.<string>} [options.emits] Valid event names. If specified, listeners for other\n   *  events are rejected. Array can be nested, e.g. `['foo', ['bar1', 'bar2']]`\n   * @param {Boolean} [options.unsafe] Determines whether dispatch is less exception-safe.\n   *  * When `false`, if an event listener throws an error, the error is thrown all the way back\n   *    to the emitting stack frame. This makes it the emitter's responsibility to catch exceptions\n   *    in listeners. This avoids a try-catch frame and may be more performant.\n   *  * When `true`, if an event listener throws an error, and an `error` listener exists, the\n   *    exception is dispatched to that listener wrapped in an {@link solace.OperationError},\n   *    `subcode={@link solace.ErrorSubcode.CALLBACK_ERROR}`. The originating event and the error\n   *    thrown by the listener are available on `event` and `error` fields respectively.\n   *\n   *  In all cases, throwing an exception in a listener prevents the event being received by\n   *  later listeners.\n   *\n   *  This option does not affect any event selected for `options.direct`, which always uses\n   *  unsafe dispatch.\n   *\n   * @memberof solace\n   * @extends {EventEmitter}\n   * @private\n   */\n  constructor(options) {\n    super();\n    const { direct, emits, unsafe, formatEventName } = options || {};\n    this.formatEventName = formatEventName || (name => name);\n\n    // Direct mode path:\n    //  emit --> (direct emit || bareEmit).\n    const bareEmit = this.emit.bind(this);\n    this._installDirectFilter(direct, bareEmit);\n\n    // Indirect mode path:\n    //  verifier -> error handlers -> emit --> bareEmit\n    this._installErrorHandlers(unsafe);\n    this._installEmitVerifier();\n\n    this._listenerVerificationFilter = buildFilter(emits);\n    this._emits = emits;\n  }\n\n  _installDirectFilter(direct, bareEmit) {\n    if (!direct) return;\n      // Direct mode class instance modifications\n\n    if (includes(BLACKLIST_DIRECT, direct)) {\n      throw new OperationError(\n        `Cannot configure listener collection events [${BLACKLIST_DIRECT.join(', ')}] as direct`,\n        ErrorSubcode.INTERNAL_ERROR);\n    }\n\n    // The default direct emitter is the base emitter. Skip any overrides we installed.\n    this._defaultEmitDirect = (...args) => bareEmit(direct, ...args);\n\n    // Initally not direct for 0 listeners\n    this.emitDirect = this._defaultEmitDirect;\n    this._directEventName = direct;\n\n    this.on = (eventName, listener) => {\n      this._verifyListenerEvent(eventName);\n      const ret = super.on(eventName, listener);\n      this._setEmitDirect(eventName, true, listener);\n      return ret;\n    };\n\n    this.addListener = (eventName, listener) => this.on(eventName, listener);\n\n    this.once = (eventName, listener) => {\n      this._verifyListenerEvent(eventName);\n      const ret = super.once(eventName, listener);\n      this._setEmitDirect(eventName, false);\n      return ret;\n    };\n\n    this.prependListener = (eventName, listener) => {\n      this._verifyListenerEvent(eventName);\n      const ret = super.prependListener(eventName, listener);\n      this._setEmitDirect(eventName, true, listener);\n      return ret;\n    };\n\n    this.prependOnceListener = (eventName, listener) => {\n      this._verifyListenerEvent(eventName);\n      const ret = super.prependOnceListener(eventName, listener);\n      this._setEmitDirect(eventName, false);\n      return ret;\n    };\n\n    this.removeAllListeners = (eventName) => {\n      const ret = super.removeAllListeners(eventName);\n      if ((eventName === this._directEventName) || (eventName === undefined)) {\n        this.emitDirect = this._defaultEmitDirect;\n      }\n      return ret;\n    };\n\n    this.removeListener = (eventName, listener) => {\n      const ret = super.removeListener(eventName, listener);\n      if ((eventName === this._directEventName) && (this.listenerCount(eventName) === 0)) {\n        this.emitDirect = this._defaultEmitDirect;\n      }\n      return ret;\n    };\n\n    this.directListenerCount = () => this.listenerCount(this._directEventName);\n\n    this.setOnFirstDirectListener = (firstDirect) => {\n      this._onFirstDirectListener = firstDirect;\n    };\n  }\n\n  _setEmitDirect(eventName, onListener, listener) {\n    if (eventName !== this._directEventName) {\n      return;\n    }\n\n    if (onListener && (this.directListenerCount() === 1)) {\n      this.emitDirect = listener;\n    } else {\n      this.emitDirect = this._defaultEmitDirect;\n    }\n\n    if ((this.directListenerCount() === 1) && (this._onFirstDirectListener !== undefined)) {\n      this._onFirstDirectListener();\n    }\n  }\n\n  _verifyListenerEvent(event) {\n    if (!this._listenerVerificationFilter) return;\n\n    if (event === undefined || event === null) {\n      this.throwInternal(\n          new OperationError(`Emitter rejects listener for no-name event: ${event}`,\n                              ErrorSubcode.PARAMETER_OUT_OF_RANGE));\n    }\n    if (!this._listenerVerificationFilter(event)) {\n      this.throwInternal(\n        new OperationError(`Emitter rejects listeners for ${event}, emits ${this._emits}`,\n                            ErrorSubcode.PARAMETER_OUT_OF_RANGE));\n    }\n  }\n\n  _installEmitVerifier() {\n    if (BUILD_ENV.MODE_DEBUG) {\n      // Debug mode: always add assert for empty event name\n      const emitBase = this.emit.bind(this);\n      this.emit = (name, ...args) => {\n        if (name === undefined || name === null) {\n          this.throwInternal(new OperationError(`Emitter rejects no-name event: ${name}`));\n        }\n        emitBase(name, ...args);\n      };\n    }\n  }\n\n  _installErrorHandlers(unsafe) {\n    if (unsafe) {\n      // If unsafe, there's no try/catch/emit so throwInternal just throws\n      this.throwInternal = (err) => { throw err; };\n      return;\n    }\n\n    // Install try/catch/emit-as-event if not unsafe mode.\n    // Introduces throwInternal, which sets the _internalError flag restore\n    // orignal throw-to-emitter functionality in case of internal error\n\n    const emitBase = this.emit.bind(this);\n\n    this.throwInternal = function throwInternal(err) {\n      this._internalError = true;\n      throw err;\n    };\n\n    this.emit = (name, ...args) => {\n      try {\n        emitBase(name, ...args);\n      } catch (ex) {\n        if (this._internalError) {\n          this._internalError = undefined;\n          throw ex; // rethrow\n        }\n\n        const err = this.formatErrorEvent(ex, name, ...args);\n        try {\n          LOG_WARN(`Listener for '${err.info.event.formattedName}' threw exception, dispatching to 'error'`);\n          emitBase('error', err);\n        } catch (innerEx) {\n          LOG_WARN(\"Listener for 'error' threw exception:\", innerEx, '\\nOriginal exception:', ex);\n        }\n      }\n    };\n  }\n\n  get isDirect() {\n    return this.emitDirect && (this.emitDirect !== this._defaultEmitDirect);\n  }\n\n  formatErrorEvent(ex, name, ...args) {\n    const formattedName = this.formatEventName(name);\n    return Object.assign(new OperationError(\n      `Unhandled error in event handler for '${formattedName}'`,\n      ErrorSubcode.CALLBACK_ERROR,\n      `On event: ${[name, ...args]} ${ex}`\n    ), {\n      stack: ex.stack,\n      info:  {\n        event: { name, formattedName, args },\n        error: ex,\n      },\n    });\n  }\n\n  disableEmitter() {\n    this._defaultEmitDirect = DISABLED_ACTIONS.ignore;\n    // If this is a direct-enabled emitter, this will also cause emitDirect to be set to\n    // _defaultEmitDirect, which is now DISALBED_ACTIONS.ignore.\n    this.removeAllListeners();\n    this.emit = DISABLED_ACTIONS.ignore;\n    // Freeze listeners by first disabling remove, then add.\n    this.addListener('removeListener', DISABLED_ACTIONS.fail);\n    this.addListener('newListener', DISABLED_ACTIONS.fail);\n  }\n\n}\n\nmodule.exports.EventEmitter = EventEmitter;\n","const { OperationError } = require('solclient-error');\n\n/**\n * @classdesc\n * This is a base class for various FSM-related objects.\n * @private\n */\nclass FsmObject {\n\n  /**\n   * @constructor\n   * @param {Object} spec The object specifier used to implement the named\n   *      parameter idiom.\n   * @param {String} spec.name The name of the object.\n   */\n  constructor(spec) {\n    if (!spec) {\n      throw new OperationError('No spec provided');\n    }\n    if (!spec.name) {\n      throw new OperationError('No name provided for spec');\n    }\n    this.impl = {\n      name: spec.name,\n    };\n  }\n\n  /**\n   * @returns {String} A string representation of the object.\n   */\n  toString() {\n    let extraStringInfo = this.getExtraStringInfo();\n    if (extraStringInfo.length > 0) {\n      extraStringInfo = `; ${extraStringInfo}`;\n    }\n    return `{${this.constructor.name}: ${this.getName()}${extraStringInfo}}`;\n  }\n\n  /**\n   * This is overridden by classes wanting to add more data, typically in the\n   * form of 'name: value; name: value'.\n   * @returns {String} Extra string information to be included in the object's\n   *      toString() output.\n   */\n  getExtraStringInfo() { // eslint-disable-line class-methods-use-this\n    return '';\n  }\n\n  /**\n   * @returns {?String} The name passed into the object specifier.\n   */\n  getName() {\n    return this.impl.name;\n  }\n\n}\n\nmodule.exports.FsmObject = FsmObject;\n","const { APIPropertiesValidators } = require('solclient-util');\nconst { QueueDescriptor } = require('./queue-descriptor');\nconst { QueueType } = require('./queue-types');\n\nconst {\n  validateInstance,\n  valBoolean,\n  valIsMember,\n  valTopicString,\n} = APIPropertiesValidators;\n\n\nconst QueueDescriptorValidator = {\n  validate(instance) {\n    const v = validateInstance.bind(null, 'QueueDescriptor', instance);\n    if (instance instanceof QueueDescriptor) {\n      v('name', [valTopicString]);\n    } // else is abstract; don't check name\n    v('type', [valIsMember, QueueType, 'QueueType']);\n    v('durable', [valBoolean]);\n  },\n};\n\nmodule.exports.QueueDescriptorValidator = QueueDescriptorValidator;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Internal session state\n * @enum {string}\n * @memberof solace\n * @private\n */\nconst SessionStateName = {\n  DISCONNECTED:                     'SessionDisconnected',\n  CONNECTING:                       'SessionConnecting',\n  WAITING_FOR_TRANSPORT:            'WaitingForTransport',\n  WAITING_FOR_TRANSPORT_UP:         'WaitingForTransportUp',\n  WAITING_FOR_LOGIN:                'WaitingForLogin',\n  TRANSPORT_UP:                     'SessionTransportUp',\n  FULLY_CONNECTED:                  'SessionFullyConnected',\n  SESSION_ERROR:                    'SessionError',\n  DISCONNECTING:                    'SessionDisconnecting',\n  REAPPLYING_SUBSCRIPTIONS:         'ReapplyingSubscriptions',\n  WAITING_FOR_PUBFLOW:              'WaitingForMessagePublisher',\n  DISPOSED:                         'SessionDisposed',\n  WAITING_FOR_SUBCONFIRM:           'WaitForSubConfirm',\n  WAITING_FOR_CAN_ACCEPT_DATA:      'WaitForCanAcceptData',\n  DISCONNECTING_FLOWS:              'DisconnectingFlows',\n  FLUSHING_TRANSPORT:               'FlushingTransport',\n  DESTROYING_TRANSPORT:             'DestroyingTransport',\n  RECONNECTING:                     'Reconnecting',\n  TRANSPORT_FAIL:                   'TransportFail',\n  WAITING_FOR_INTERCONNECT_TIMEOUT: 'WaitingForInterconnectTimeout',\n  WAITING_FOR_DNS:                  'WaitingForDNS',\n  WAITING_FOR_TRANSPORT_CHANGE:     'WaitingForTransportChange',\n};\n\nmodule.exports.SessionStateName = Enum.new(SessionStateName);\n","\nconst { ErrorSubcode } = require('solclient-error');\nconst { FsmEvent, State, StateMachine } = require('solclient-fsm');\nconst { LogFormatter } = require('solclient-log');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionEvent } = require('../transport-session-event');\nconst { TransportSessionEventCode } = require('../transport-session-event-codes');\nconst { WebTransportEvent } = require('./web-transport-events');\nconst { WebTransportState } = require('./web-transport-states');\n\nconst {\n  LOG_TRACE,\n  LOG_INFO,\n} = new LogFormatter();\n\nclass WebTransportFSM extends StateMachine {\n  constructor(transportIn, getId) {\n    super({ name: 'WebTransportFSM' });\n    const transport = transportIn;\n    const fsm = this;\n    const logger = new LogFormatter();\n    logger.formatter = function logFormatter(...args) {\n      return [`[web-transport-fsm=${getId()}]`, ...args];\n    };\n    this.log = logger.wrap(this.log, this);\n    this.transport = transport;\n\n    this.initial(function onInitial() {\n      return this.transitionTo(\n        this.WebTransportDown,\n        (context) => {\n          LOG_TRACE(`Starting ${context.getStateMachine().getName()}`);\n        });\n    });\n\n    this.unhandledEventReaction(function onUnhandledEvent(wEvent) {\n      LOG_TRACE(`Ignoring event ${wEvent.getName()} in state ${this.getCurrentState().getName()}`);\n      return this;\n    });\n\n    this.WebTransportDown = new State({\n      name:          WebTransportState.DOWN,\n      parentContext: this,\n    })\n      .reaction(WebTransportEvent.CONNECT, function onConnect(/* wEevent */) {\n        return this.transitionTo(fsm.WebTransportConnecting);\n      })\n      .reaction(WebTransportEvent.DESTROY, function onDestroy(wEvent) {\n        transport.destroyInternal(wEvent._destroyMsg, wEvent._subcode);\n        return this.transitionTo(fsm.WebTransportDestroying);\n      });\n\n    this.WebTransportConnecting = new State({\n      name:          WebTransportState.CONNECTING,\n      parentContext: this,\n    })\n      .entry(() => {\n        try {\n          const rc = transport.connectInternal();\n          if (rc !== TransportReturnCode.OK) {\n            const connError = transport.getConnError();\n            const wEvent = new FsmEvent({ name: WebTransportEvent.DESTROY });\n            wEvent._destroyMsg = connError ? connError.message : 'Error occurred while establishing transport';\n            wEvent._subcode = connError ? connError.subcode : null;\n            wEvent._eventReason = connError;\n            return this.processEvent(wEvent);\n          }\n        } catch (e) {\n          LOG_INFO(`transport.connectInternal threw: ${e.message}`);\n          const wEvent = new FsmEvent({ name: WebTransportEvent.DESTROY });\n          wEvent._destroyMsg = e.message;\n          wEvent._subcode = e.subcode ? e.subcode : ErrorSubcode.CONNECTION_ERROR;\n          wEvent._eventReason = e;\n          return this.processEvent(wEvent);\n        }\n        return undefined;\n      })\n      // Transport destroy is async, so in downgrade cases we need an event to start the downgrade\n      // (and associated transport destroy) and one to complete it (DESTROYED_NOTICE).\n      // These two events trigger downgrade: SEND_ERROR on connection (protocol issue) and\n      // CONNECT_TIMEOUT (possible black hole proxy).\n      .reaction(WebTransportEvent.SEND_ERROR, (wEvent) => {\n        transport.notifyEvent(wEvent._transportEvent); // Give the session a chance to intervene\n        return fsm.attemptDowngrade(wEvent._transportEvent);\n      })\n      .reaction(WebTransportEvent.CONNECT_TIMEOUT, e => fsm.attemptDowngrade(e._transportEvent))\n      .reaction(WebTransportEvent.DESTROYED_NOTICE, (wEvent) => {\n        transport.notifyEvent(wEvent._transportEvent);\n        return this.transitionTo(fsm.WebTransportDown);\n      })\n      .reaction(WebTransportEvent.UP_NOTICE, function onUpNotice(wEvent) {\n        transport.notifyEvent(wEvent._transportEvent);\n        return this.transitionTo(fsm.WebTransportUp);\n      })\n      .reaction(WebTransportEvent.DESTROY, function onDestroy(wEvent) {\n        transport.destroyInternal(wEvent._destroyMsg, wEvent._subcode);\n        return this.transitionTo(fsm.WebTransportDestroying);\n      });\n    this.WebTransportDowngrading = new State({\n      name:          WebTransportState.DOWNGRADING,\n      parentContext: this,\n    })\n      .reaction(WebTransportEvent.DESTROYED_NOTICE, function onDestroyed(wEvent) {\n        LOG_INFO('Web transport: request downgrade');\n        if (!transport.completeDowngrade()) {\n          LOG_INFO('Web transport: connection error, no downgrade');\n          transport.notifyEvent(wEvent._transportEvent);\n          fsm.notifyDowngradeFailed();\n          return this.transitionTo(fsm.WebTransportDown);\n        }\n        return this.transitionTo(fsm.WebTransportConnecting);\n      })\n      .reaction(WebTransportEvent.DESTROY, function onDestroy(wEvent) {\n        transport.destroyInternal(wEvent._destroyMsg, wEvent._subcode);\n        return this.transitionTo(fsm.WebTransportDestroying);\n      });\n    this.WebTransportUp = new State({\n      name:          WebTransportState.UP,\n      parentContext: this,\n    })\n      .reaction(WebTransportEvent.DOWNGRADE, wEvent =>\n        fsm.attemptDowngrade(new TransportSessionEvent(wEvent._downgradeMsg, wEvent._subcode)))\n      .reaction(WebTransportEvent.DESTROYED_NOTICE, function onDestroyed(wEvent) {\n        transport.notifyEvent(wEvent._transportEvent);\n        return this.transitionTo(fsm.WebTransportDown);\n      })\n      .reaction(WebTransportEvent.DESTROY, function onDestroy(wEvent) {\n        transport.destroyInternal(wEvent._destroyMsg, wEvent._subcode);\n        return this.transitionTo(fsm.WebTransportDestroying);\n      })\n      .reaction(WebTransportEvent.SEND_ERROR, function onUpNotice(wEvent) {\n        transport.notifyEvent(wEvent._transportEvent);\n        transport.destroyInternal(wEvent._destroyMsg, wEvent._subcode);\n        return this.transitionTo(fsm.WebTransportDestroying);\n      });\n    this.WebTransportDestroying = new State({\n      name:          WebTransportState.DESTROYING,\n      parentContext: this,\n    })\n      .reaction(WebTransportEvent.DESTROYED_NOTICE, function onDestroyed(wEvent) {\n        transport.notifyEvent(wEvent._transportEvent);\n        return this.transitionTo(fsm.WebTransportDown);\n      });\n  }\n\n\n    /**\n     * Attempt a downgrade. This is the procedure.\n     * 1. Call this. If it returns true, wait for DESTROYED_NOTICE, then\n     * 2. Call transport.completeDowngrade().\n     * @param {TransportSessionEvent} tsEvent The event triggering the downgrade\n     * @returns {Boolean} `true` if downgrade is starting (by destroying the transport)\n     */\n  attemptDowngrade(tsEvent) {\n    const { infoStr, errorSubcode } = tsEvent;\n    if (!this.transport.beginDowngrade(infoStr, errorSubcode)) {\n      LOG_TRACE('Downgrade unavailable');\n      this.transport.destroyInternal(infoStr, errorSubcode);\n      this.transport.notifyEvent(tsEvent);\n      return this.transitionTo(this.WebTransportDestroying);\n    }\n    LOG_TRACE('Downgrade available');\n    return this.transitionTo(this.WebTransportDowngrading);\n  }\n\n  notifyDowngradeFailed() {\n    LOG_TRACE('Notifying of downgrade failure');\n    this.transport.notifyEvent(new TransportSessionEvent(TransportSessionEventCode.DOWNGRADE_FAILED,\n                                  'Downgrade failed'));\n  }\n}\n\nmodule.exports.WebTransportFSM = WebTransportFSM;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Specifies the type of remote resource to which an\n * {@link solace.AbstractQueueDescriptor} refers.\n *\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst QueueType = {\n  /**\n   * @description The queue descriptor refers to a queue endpoint.\n   * @type {String}\n   */\n  QUEUE:          'QUEUE',\n  /**\n   * @description The queue descriptor refers to a topic endpoint.\n   * @type {String}\n   */\n  TOPIC_ENDPOINT: 'TOPIC_ENDPOINT',\n};\n\nmodule.exports.QueueType = Enum.new(QueueType);\n","const {\n  ReplicationGroupMessageId,\n  RgmidFactory,\n} = require('./lib/replication-group-message-id');\nconst { Message } = require('./lib/message');\nconst { MessageCacheStatus } = require('./lib/message-cache-status');\nconst { MessageDeliveryModeType } = require('./lib/message-delivery-mode-types');\nconst { MessageDumpFlag } = require('./lib/message-dump-flags');\nconst { MessageDumpStandardProvider } = require('./lib/message-dump-standard-provider');\nconst { MessageDumpUtil } = require('./lib/message-dump-util');\nconst { MessageType } = require('./lib/message-types');\nconst { MessageOutcome } = require('./lib/message-outcomes');\nconst { MessageUserCosType } = require('./lib/message-user-cos-types');\nconst { SolclientFactory } = require('solclient-factory');\n\n/**\n * Creates a {@link solace.Message} instance.\n * @returns {solace.Message} a new message instance.\n * @method\n * @name solace.SolclientFactory.createMessage\n */\nSolclientFactory.createMessage = SolclientFactory.createFactory(() => new Message());\n\n/**\n * Creates a {@link solace.ReplicationGroupMessageId} instance from string.\n * A ReplicationGroupMessageId is also a {@link solace.ReplayStartLocation} instance that\n * when set in MessageConsumerProperties indicates that only messages spooled\n * in the replay log since the message after the given ReplicationGroupMesageId\n * should be replayed.\n * @param {string} id a serialized ReplicationGroupMessageId had previously been returned\n *   from {@link solace.ReplicationGroupMessageId.toString}.\n * @returns {solace.ReplicationGroupMessageId} a new ReplicationGroupMessageId instance\n * @method\n * @name solace.SolclientFactory.createReplicationGroupMessageId\n * @throws {solace.OperationError}\n * * if parameter is not a string.\n *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n * * if incorrect format is detected.\n *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n */\nSolclientFactory.createReplicationGroupMessageId = SolclientFactory.createFactory(id =>\n  RgmidFactory.fromString(id));\n\nmodule.exports.Message = Message;\nmodule.exports.MessageCacheStatus = MessageCacheStatus;\nmodule.exports.MessageDeliveryModeType = MessageDeliveryModeType;\nmodule.exports.MessageDumpFlag = MessageDumpFlag;\nmodule.exports.MessageDumpStandardProvider = MessageDumpStandardProvider;\nmodule.exports.MessageDumpUtil = MessageDumpUtil;\nmodule.exports.MessageType = MessageType;\nmodule.exports.MessageOutcome = MessageOutcome;\nmodule.exports.MessageUserCosType = MessageUserCosType;\nmodule.exports.ReplicationGroupMessageId = ReplicationGroupMessageId;\nmodule.exports.RgmidFactory = RgmidFactory;\n","/* eslint-disable no-nested-ternary */\n\nfunction defaultComparator(a, b) {\n  const astr = String(a);\n  const bstr = String(b);\n  return astr > bstr ? 1 : (astr < bstr ? -1 : 0);\n}\n\nfunction insertOrdered(array, element, comparator = defaultComparator) {\n  const result = [...array];\n  return this.inplaceInsertOrdered(result, element, comparator);\n}\n\nfunction inplaceInsertOrdered(array, element, comparator = defaultComparator) {\n  let index = 0;\n  let min = 0;\n  let max = array.length;\n  // Optimize for empty array\n  if (max > 0) {\n    // Optimize for append\n    if (comparator(element, array[max - 1]) > 0) {\n      index = max;\n    } else {\n      // Binary search\n      index = (min + max) >> 1; // math.floor((min + max) / 2)\n      while (max > min) {\n        if (comparator(element, array[index]) < 0) {\n          max = index;\n        } else {\n          min = index + 1;\n        }\n        index = (min + max) >> 1; // math.floor((min + max) / 2)\n      }\n    }\n  }\n  array.splice(index, 0, element);\n}\n\nmodule.exports = {\n  ArrayOperations: {\n    defaultComparator,\n    insertOrdered,\n    inplaceInsertOrdered,\n  },\n};\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst FastBuffer = Buffer[Symbol.species];\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\nconst DEFER_EVENT = 6;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._allowSynchronousEvents =\n      options.allowSynchronousEvents !== undefined\n        ? options.allowSynchronousEvents\n        : true;\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._errored = false;\n    this._loop = false;\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = new FastBuffer(\n        buf.buffer,\n        buf.byteOffset + n,\n        buf.length - n\n      );\n\n      return new FastBuffer(buf.buffer, buf.byteOffset, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = new FastBuffer(\n          buf.buffer,\n          buf.byteOffset + n,\n          buf.length - n\n        );\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          this.getInfo(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          this.getPayloadLength16(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          this.getPayloadLength64(cb);\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          this.getData(cb);\n          break;\n        case INFLATING:\n        case DEFER_EVENT:\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    if (!this._errored) cb();\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getInfo(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      const error = this.createError(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n\n      cb(error);\n      return;\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      const error = this.createError(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (!this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        const error = this.createError(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (\n        this._payloadLength > 0x7d ||\n        (this._opcode === 0x08 && this._payloadLength === 1)\n      ) {\n        const error = this.createError(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    } else {\n      const error = this.createError(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        const error = this.createError(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n\n        cb(error);\n        return;\n      }\n    } else if (this._masked) {\n      const error = this.createError(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength16(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength64(cb) {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      const error = this.createError(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  haveLength(cb) {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        const error = this.createError(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n\n      if (\n        this._masked &&\n        (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0\n      ) {\n        unmask(data, this._mask);\n      }\n    }\n\n    if (this._opcode > 0x07) {\n      this.controlMessage(data, cb);\n      return;\n    }\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    this.dataMessage(cb);\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          const error = this.createError(\n            RangeError,\n            'Max payload size exceeded',\n            false,\n            1009,\n            'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._fragments.push(buf);\n      }\n\n      this.dataMessage(cb);\n      if (this._state === GET_INFO) this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  dataMessage(cb) {\n    if (!this._fin) {\n      this._state = GET_INFO;\n      return;\n    }\n\n    const messageLength = this._messageLength;\n    const fragments = this._fragments;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragmented = 0;\n    this._fragments = [];\n\n    if (this._opcode === 2) {\n      let data;\n\n      if (this._binaryType === 'nodebuffer') {\n        data = concat(fragments, messageLength);\n      } else if (this._binaryType === 'arraybuffer') {\n        data = toArrayBuffer(concat(fragments, messageLength));\n      } else if (this._binaryType === 'blob') {\n        data = new Blob(fragments);\n      } else {\n        data = fragments;\n      }\n\n      if (this._allowSynchronousEvents) {\n        this.emit('message', data, true);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', data, true);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    } else {\n      const buf = concat(fragments, messageLength);\n\n      if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n        const error = this.createError(\n          Error,\n          'invalid UTF-8 sequence',\n          true,\n          1007,\n          'WS_ERR_INVALID_UTF8'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (this._state === INFLATING || this._allowSynchronousEvents) {\n        this.emit('message', buf, false);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', buf, false);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    }\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data, cb) {\n    if (this._opcode === 0x08) {\n      if (data.length === 0) {\n        this._loop = false;\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          const error = this.createError(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n\n          cb(error);\n          return;\n        }\n\n        const buf = new FastBuffer(\n          data.buffer,\n          data.byteOffset + 2,\n          data.length - 2\n        );\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          const error = this.createError(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._loop = false;\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n\n      this._state = GET_INFO;\n      return;\n    }\n\n    if (this._allowSynchronousEvents) {\n      this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n      this._state = GET_INFO;\n    } else {\n      this._state = DEFER_EVENT;\n      setImmediate(() => {\n        this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n        this._state = GET_INFO;\n        this.startLoop(cb);\n      });\n    }\n  }\n\n  /**\n   * Builds an error object.\n   *\n   * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n   * @param {String} message The error message\n   * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n   *     `message`\n   * @param {Number} statusCode The status code\n   * @param {String} errorCode The exposed error code\n   * @return {(Error|RangeError)} The error\n   * @private\n   */\n  createError(ErrorCtor, message, prefix, statusCode, errorCode) {\n    this._loop = false;\n    this._errored = true;\n\n    const err = new ErrorCtor(\n      prefix ? `Invalid WebSocket frame: ${message}` : message\n    );\n\n    Error.captureStackTrace(err, this.createError);\n    err.code = errorCode;\n    err[kStatusCode] = statusCode;\n    return err;\n  }\n}\n\nmodule.exports = Receiver;\n","/* eslint-disable global-require */\nlet parseURL;\nif (BUILD_ENV.TARGET_NODE) {\n  /* eslint-env node */\n  parseURL = require('url').parse;\n} else {\n  /* eslint-env browser */\n  const scope = typeof window !== 'undefined' ? window : this;\n  require('./browser-url-polyfill')(scope);\n  parseURL = function makeURL(...args) {\n    return new URL(...args);\n  };\n}\n\nmodule.exports.parseURL = parseURL;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SessionEventName = {\n  CONNECT:                       'SessionConnect',\n  DISCONNECT:                    'SessionDisconnect',\n  DISPOSE:                       'SessionDispose',\n  CONNECT_TIMEOUT:               'SessionConnectTimeout',\n  CONNECT_WAIT_TIMEOUT:          'SessionConnectWaitTimeout',\n  DOWNGRADE_TIMEOUT:             'SessionDowngradeTimeout',\n  TRANSPORT_UP:                  'SessionTransportUp',\n  TRANSPORT_DESTROYED:           'SessionTransportDestroyed',\n  TRANSPORT_CAN_ACCEPT_DATA:     'SessionTransportCanAcceptData',\n  TRANSPORT_PARSE_ERROR:         'SessionTransportParseError',\n  TRANSPORT_PROTOCOL_SMP:        'SessionSMPMessage',\n  TRANSPORT_PROTOCOL_CLIENTCTRL: 'SessionClientCtrlMessage',\n  EXCEPTION:                     'SessionException',\n  SUBSCRIBE_TIMEOUT:             'SessionSubscribeTimeout',\n  CREATE_SUBSCRIBER:             'SessionCreateSubscriber',\n  FLOW_UP:                       'SessionFlowUp',\n  FLOW_FAILED:                   'SessionFlowFailed',\n  SEND_ERROR:                    'SessionSendError',\n  FLOWS_DISCONNECTED:            'SessionFlowsDisconnected',\n  TRANSPORT_FLUSHED:             'SessionTransportFlushed',\n  DNS_RESOLUTION_COMPLETE:       'SessionDNSResolutionComplete',\n  TRANSPORT_CHANGE_DONE:         'SessionTransportChangeDone',\n};\n\nmodule.exports.SessionEventName = Enum.new(SessionEventName);\n","const { Enum } = require('solclient-eskit');\n\n\n/**\n * @callback solace.SessionEventCodes.sessionEvent\n * @function\n * @this {solace.Session} The message consumer for the event\n * @param {solace.SessionEvent|solace.OperationError} event The event. If the event is an\n *  error, the event will be an instance of {@link solace.OperationError} but will also be\n *  interface-compatible with {@link solace.SessionEvent}.\n */\n\n\n/**\n * An attribute of {@link SessionEvent}. This enumeration represents the\n * different events emitted by {@link Session} through the session event\n * callback.\n *\n * When a session is no longer in a usable state, the API tears down the underlying\n * connection and notifies the application with one of the following session events:\n *  * {@link solace.SessionEventCode#event:DOWN_ERROR}\n *  * {@link solace.SessionEventCode#event:CONNECT_FAILED_ERROR}\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst SessionEventCode = {\n  /**\n   * The Session is ready to send/receive messages and perform control operations.\n   *\n   * At this point the transport session is up, the Session has logged in, and the\n   * P2PInbox subscription is added.\n   *\n   * The session is established.\n   * @event solace.SessionEventCode#UP_NOTICE\n   */\n  UP_NOTICE:                         0,\n  /**\n   * The session was established and then went down.\n   * @event solace.SessionEventCode#DOWN_ERROR\n   * @param {solace.OperationError} error The details related to the session failure.\n   */\n  DOWN_ERROR:                        1,\n  /**\n   * The session attempted to connect but was unsuccessful.\n   * @event solace.SessionEventCode#CONNECT_FAILED_ERROR\n   * @param {solace.OperationError} error The details related to the failed connection attempt.\n   */\n  CONNECT_FAILED_ERROR:              2,\n  /**\n   * The Solace Message Router rejected a published message.\n   * @event solace.SessionEventCode#REJECTED_MESSAGE_ERROR\n   * @param {solace.RequestError} error The details related to the rejected message.\n   */\n  REJECTED_MESSAGE_ERROR:            4,\n  /**\n   * The Solace Message Router rejected a subscription (add or remove).\n   * @event solace.SessionEventCode#SUBSCRIPTION_ERROR\n   * @param {solace.RequestError} error The details related to the failed subscription update.\n   */\n  SUBSCRIPTION_ERROR:                5,\n  /**\n   * The subscribe or unsubscribe operation succeeded.\n   * @event solace.SessionEventCode#SUBSCRIPTION_OK\n   * @param {solace.SessionEvent} event The details related to the successful subscription update.\n   */\n  SUBSCRIPTION_OK:                   6,\n  /**\n   * The Solace Message Router's Virtual Router Name changed during a reconnect operation.\n   * @event solace.SessionEventCode#VIRTUALROUTER_NAME_CHANGED\n   * @param {solace.SessionEvent} event Information related to the event.\n   */\n  VIRTUALROUTER_NAME_CHANGED:        7,\n  /**\n   * @deprecated\n   * A request was aborted because the session is being disconnected.\n   * Use {@link solace.RequestFailEvent} instead.\n   */\n  REQUEST_ABORTED:                   8,\n  /**\n   * @deprecated\n   * The event represents a timed-out request API call.\n   * Use {@link solace.RequestFailEvent} instead.\n   */\n  REQUEST_TIMEOUT:                   9,\n  /**\n   * The event represents a successful update of a mutable session property.\n   * @event solace.SessionEventCode#PROPERTY_UPDATE_OK\n   * @param {solace.SessionEvent} event Information related to the successful property update.\n   */\n  PROPERTY_UPDATE_OK:                10,\n  /**\n   * The event represents a failed update of a mutable session property.\n   * @event solace.SessionEventCode#PROPERTY_UPDATE_ERROR\n   * @param {solace.RequestError} error The details related to the failed property update.\n   */\n  PROPERTY_UPDATE_ERROR:             11,\n  /**\n   * The session transport can accept data again.  This event will occur after an\n   * {@link solace.OperationError} is thrown from an API call with a subcode of\n   * {@link solace.ErrorSubcode.INSUFFICIENT_SPACE} to indicate the operation can be retried.\n   * This event is used both after session-level transport buffer exhaustion,\n   * and Guaranteed Messaging Window exhaustion.\n   * @event solace.SessionEventCode#CAN_ACCEPT_DATA\n   */\n  CAN_ACCEPT_DATA:                   13,\n  /**\n   * The session connect operation failed, or the session that was once up,\n   * is now disconnected.\n   * @event solace.SessionEventCode#DISCONNECTED\n   */\n  DISCONNECTED:                      14,\n  /**\n   * The session has gone down, and an automatic reconnection attempt is in progress.\n   * @event solace.SessionEventCode#RECONNECTING_NOTICE\n   * @param {solace.SessionEvent} event The details related to the cause of the connection\n   *    interruption.\n   */\n  RECONNECTING_NOTICE:               22,\n  /**\n   * The automatic reconnect of the Session was successful, and the session is established again.\n   * @event solace.SessionEventCode#RECONNECTED_NOTICE\n   * @param {solace.SessionEvent} event The details related to the re-establishment of the\n   *    connection.\n   */\n  RECONNECTED_NOTICE:                23,\n  /**\n   * The session has automatically recovered after the Guaranteed Message publisher\n   * failed to reconnect.\n   * Messages sent but not acknowledged are being renumbered and retransmitted.\n   * Some messages may be duplicated in the system.\n   * @event solace.SessionEventCode#REPUBLISHING_UNACKED_MESSAGES\n   * @param {solace.SessionEvent} event The details related to the republishing of messages on the\n   *    session.  {@link solace.SessionEvent#infoStr} will indicate the number of messages being\n   *    republished, which is an upper bound on the number of messages that could be duplicated due\n   *    to this action.\n   */\n  REPUBLISHING_UNACKED_MESSAGES:     24,\n  /**\n   * A message was acknowledged by the router.\n   * @event solace.SessionEventCode#ACKNOWLEDGED_MESSAGE\n   * @param {solace.SessionEvent} event Allows the acknowledgement to be correlated to the sent\n   *    message.\n   */\n  ACKNOWLEDGED_MESSAGE:              25,\n  /**\n   * Unsubscribing the topic from the Durable Topic Endpoint succeeded.\n   * @event solace.SessionEventCode#UNSUBSCRIBE_TE_TOPIC_OK\n   */\n  UNSUBSCRIBE_TE_TOPIC_OK:           26,\n  /**\n   * Unsubscribing the topic from the Durable Topic Endpoint failed.\n   * @event solace.SessionEventCode#UNSUBSCRIBE_TE_TOPIC_ERROR\n   * @param {solace.OperationError} error The details related to the failed attempt to remove the\n   *    subscription from a topic endpoint.\n   */\n  UNSUBSCRIBE_TE_TOPIC_ERROR:        27,\n  /**\n   * A Direct message was received on the session. This event code is only used\n   * on the <b>EventEmitter</b> session interface.  If using the deprecated callback interface,\n   * messages are received via the callback provided in {@link solace.MessageRxCBInfo}.\n   * @event solace.SessionEventCode#MESSAGE\n   * @param {solace.Message} message The message received on the session.\n   */\n  MESSAGE:                           28,\n  /**\n   * Guaranteed Messaging Publisher has been closed by the Solace\n   * message router. This usually indicates an operator has disabled the\n   * message spool.\n   * @event solace.SessionEventCode#GUARANTEED_MESSAGE_PUBLISHER_DOWN\n   * @param {solace.OperationError} error Information related to the error.\n   */\n  GUARANTEED_MESSAGE_PUBLISHER_DOWN: 29,\n  /**\n   * The provision or deprovision operation failed.\n   * @event solace.SessionEventCode#PROVISION_ERROR\n   * @param {solace.SessionEvent} error The details related to the failed provision/deprovison operation.\n   */\n  PROVISION_ERROR:                    30,\n  /**\n   * The provision or deprovision operation succeeded.\n   * @event solace.SessionEventCode#PROVISION_OK\n   * @param {solace.SessionEvent} event The details related to the successful provision or deprovision operation.\n   */\n  PROVISION_OK:                     31,\n\n  \n};\n\nmodule.exports.SessionEventCode = Enum.new(SessionEventCode);\n","const DebugLib = require('solclient-debug');\nconst {\n  Convert,\n  Base64,\n} = require('solclient-convert');\nconst {\n  LOG_DEBUG,\n  LOG_INFO,\n  LOG_WARN,\n  LOG_ERROR,\n} = require('solclient-log');\nconst {\n  sendXhrBinary,\n  sendXhrText,\n} = require('./send-xhr');\nconst { StringBuffer, TimingBucket } = require('solclient-util');\nconst { TransportReturnCode } = require('../../transport-return-codes');\nconst { XHRFactory } = require('./xhr-factory');\n\nconst { arrayBufferToString } = Convert;\n\nconst SOL_CONNECTION_DEBUG = false;\n\n/**\n * A URI starting with a \"/\" is a \"path-absolute\" URI, and those aren't\n * allowed to have a query component (starting with \"?\").\n *\n * If an origin isn't defined in the url, tack on the one from the page.\n *\n * @param {URL} url The URL to connect to\n * @returns {URL} Adjusted URL if incoming URL was relative\n * @private\n */\nfunction prependOrigin(url) {\n  if (!url.match(/^(http|ws)(s?):/i) && window.location && window.location.origin) {\n    return window.location.origin + ((url.charAt(0) !== '/') ? '/' : '') + url;\n  }\n  return url;\n}\n\nfunction getTs() {\n  return new Date().getTime();\n}\n\nclass Stats {\n  constructor() {\n    this.WaitedToken = new TimingBucket('WaitedToken', 100);\n    this.HadToken = new TimingBucket('HadToken', 100);\n    this.ReturnedToken = new TimingBucket('ReturnedToken', 100);\n  }\n  toString() {\n    let s = '';\n    [this.WaitedToken, this.HadToken, this.ReturnedToken].forEach((b) => {\n      if (b && b.bucketCount() > 0) {\n        s += `${b.name} >> ${b}\\n`;\n      }\n    });\n    return s;\n  }\n}\n\n/**\n * @classdesc\n * This class contains all state for a single HTTP connection (XHR).\n *\n * @private\n */\nclass HTTPConnection {\n  constructor(url, base64Enc, streamProgressEvents, rxDataCb,\n              connectionErrorCb, contentType, connectionClose) {\n    this.Options = {\n      url: prependOrigin(url),\n      contentType,\n      base64Enc,\n      streamProgressEvents,\n      connectionClose,\n    };\n\n    this._streamProgressBytes = 0;\n    this._xhr = null;\n    this._rxDataCb = rxDataCb;\n    this._connErrorCb = connectionErrorCb;\n    this._reqActive = false;\n    this._REQCOUNTER = 0;\n    this._REQBASE = Math.floor(Math.random() * 1000);\n\n    this._xhr = XHRFactory.create();\n    // older browser ie9\n    this._handleAbortedReq = !HTTPConnection.browserSupportsXhrBinary();\n\n    this.stats = new Stats();\n  }\n\n  recStat(s) {\n    if (!SOL_CONNECTION_DEBUG) {\n      return;\n    }\n    const stats = this.stats;\n    if (s === 'GotToken') {\n      stats.LastGotToken = getTs();\n      if (stats.LastSendMsg) {\n        const waitedTok = stats.LastGotToken - stats.LastSendMsg;\n        stats.WaitedToken.log(waitedTok);\n        if (waitedTok > 100) {\n          LOG_WARN(`Abnormally long waitToken, last request: ${this._REQBASE}_${this._REQCOUNTER}`);\n        }\n      }\n    }\n    if (s === 'SendMsg') {\n      stats.LastSendMsg = getTs();\n      const hadToken = stats.LastSendMsg - stats.LastGotToken;\n      stats.HadToken.log(hadToken);\n    }\n    if (s === 'GotData') {\n      stats.LastGotData = getTs();\n    }\n    if (s === 'ReturnToken') {\n      stats.LastReturnToken = getTs();\n      if (stats.LastGotData) {\n        const returnedToken = stats.LastReturnToken - stats.LastGotData;\n        stats.ReturnedToken.log(returnedToken);\n      }\n    }\n  }\n\n  /*\n   * Send data over the connection - this requires a send token\n   */\n  send(data, attempt = 0, maxRetry = 1) {\n    if (attempt > 0) {\n      this._xhr.abort();\n      this._xhr = XHRFactory.create();\n    }\n    this._xhr.open('POST', this.Options.url, true);\n\n    this._streamProgressBytes = 0;\n    // We pass the write data to the CB so we can retry when it mysteriously fails.\n    this._xhr.onreadystatechange = () => this.xhrStateChange(data, attempt, maxRetry);\n\n    this._reqActive = true;\n\n    if (SOL_CONNECTION_DEBUG) {\n      this._REQCOUNTER++;\n      this._xhr.setRequestHeader('sol-request-track', `${this._REQBASE}_${this._REQCOUNTER}`);\n    }\n    if (this.Options.base64Enc) {\n      sendXhrText(this._xhr, data, this.Options.contentType, this.Options.connectionClose);\n    } else {\n      sendXhrBinary(this._xhr, data, this.Options.contentType, this.Options.connectionClose);\n    }\n    this.recStat('SendMsg');\n  }\n\n\n  // XmlHTTPRequest Callback\n  xhrStateChange(sentdata, attempt, maxRetry) {\n    const readyState = this._xhr.readyState;\n    const RS_LOADING = this._xhr.LOADING;\n    const RS_DONE = this._xhr.DONE;\n\n    if (!((this.Options.streamProgressEvents && readyState === RS_LOADING)\n          || readyState === RS_DONE)) {\n      // we proceed with notifications if we're LOADING and we requested streaming events,\n      // or we're DONE.\n      return;\n    }\n\n    if (!this._reqActive) {\n          // request aborted, DO NOT propagate event\n      return;\n    }\n\n    let status = null;\n    if (this._handleAbortedReq) {\n      // To avoid the following IE9 error when request is aborted by server or client and\n      // application tries to access any property in the XHR other than readyState whose value is\n      // 4 (XMLHTTPRequest.DONE):\n      // - The data necessary to complete this operation is not yet available\n      // See https://groups.google.com/forum/#!topic/websync/ysBEvtvMyb0 for details\n      // _requestActive is used to handle client initiated abort, but it does not handle\n      // the case when the request is aborted on the server side or proxy server\n      try {\n        status = this._xhr.status;\n      } catch (e) {\n        LOG_INFO(`Error trying to access status in XHR due to request aborted: ${e.message}`);\n        return;\n      }\n    } else {\n      status = this._xhr.status;\n    }\n\n    if (status === 200 || status === 304) {\n      // Success status code\n      let data = null;\n      if (this._xhr.responseType && this._xhr.responseType === 'arraybuffer') {\n        data = arrayBufferToString(this._xhr.response);\n      } else {\n        data = this._xhr.responseText;\n      }\n      data = data.substring(this._streamProgressBytes, data.length);\n      this._streamProgressBytes += data.length;\n\n      if (data.length === 0 && readyState === RS_LOADING) {\n        // we are streaming LOADING events but have no data\n        return;\n      }\n\n      if (this.Options.base64Enc) {\n        try {\n          data = Base64.decode(data);\n        } catch (e) {\n          // Failed the decode - call the error callback\n          LOG_ERROR(`Data decode error on: ${data}`);\n          LOG_ERROR(`Data decode error is: ${e.message}`);\n          this._rxDataCb(TransportReturnCode.DATA_DECODE_ERROR, data);\n          return;\n        }\n      } else {\n        // take lower-8 bits\n        const decodedData = [];\n        const dataLength = data.length;\n        for (let i = 0; i < dataLength; i++) {\n          decodedData.push(String.fromCharCode(data.charCodeAt(i) & 0xFF));\n        }\n        data = decodedData.join('');\n      }\n      if (readyState === RS_DONE) {\n        // MUST do this BEFORE the callback invocation, because the callback can trigger a new send.\n        this._reqActive = false;\n      }\n      this._rxDataCb(TransportReturnCode.OK, data);\n      if (readyState === RS_DONE && data.length > 0) {\n        this._rxDataCb(TransportReturnCode.OK, ''); // indicate end of stream\n      }\n\n      return;\n    }\n\n    // Failure status code.\n    const statusText = this._xhr.statusText;\n    let responseText = '';\n    if (this._xhr.responseType && this._xhr.responseType === 'arraybuffer') {\n      responseText = arrayBufferToString(this._xhr.response);\n    } else {\n      responseText = this._xhr.responseText || '';\n    }\n\n    const responseTextLen = responseText.length;\n    const requestUrl = this.Options.url;\n    const sentdataLen = sentdata ? sentdata.length : 0;\n    const { formatDumpBytes } = DebugLib.Debug;\n    const responseTextDump = formatDumpBytes(\n      responseText.substr(0, Math.min(responseTextLen, 64)), true, 0);\n    const sentTextDump = formatDumpBytes(\n      (sentdata || '').substr(0, Math.min(sentdataLen, 256)), true, 0);\n    if (BUILD_ENV.MODE_DEBUG) {\n      const stmt = new StringBuffer(\n        `Http request failed.  url=${requestUrl}, status=${status}, statusText=${statusText}, `,\n        `responseText length=${responseTextLen}, `,\n        'responseText (first 64 bytes or fewer)=\\n',\n        `${responseTextDump}, `,\n        `XHR errorCode=${this._xhr._error ? this._xhr._error.code : ''}, `,\n        `attempt=${attempt}, reqActive=${this._reqActive}, readyState=${readyState}, `,\n        `sent data length=${sentdataLen}, `,\n        'sent data (first 256 bytes or fewer)=\\n',\n        `${sentTextDump}`).toString();\n      LOG_DEBUG(stmt);\n    }\n\n    const nextMaxRetry = maxRetry;\n    if (this._reqActive\n          && status !== 400\n          && responseText.length === 0\n          && (attempt === 0 || attempt < nextMaxRetry)) {\n      LOG_INFO(`XHR failed while request active, will retry send, retry=${attempt + 1}`);\n        // RETRY (could be a transient browser connection problem)\n      this.send(sentdata, attempt + 1, nextMaxRetry);\n    } else {\n      this._reqActive = false;\n      this._connErrorCb(\n          status,\n          new StringBuffer(\n            `HTTP request failed(status=${status} statusText=${statusText}, `,\n            `responseText length=${responseTextLen}, responseText[0..64]=\\n`,\n            responseTextDump,\n            `XHR errorCode=${this._xhr._error ? this._xhr._error.code : ''})`).toString());\n    }\n  }\n\n  isUsingBase64() {\n    return this.Options.base64Enc;\n  }\n\n  // This function will abort the current xhr request if it is active\n  abort() {\n      // mark request as inactive, so we won't process statechange events\n    this._reqActive = false;\n    if (this._xhr && this._xhr.abort) {\n      this._xhr.abort();\n    }\n  }\n\n  /**\n   * Check if we can try binary XHR on this browser.\n   * @returns {Boolean} `true` if XHR binary should work; `false` otherwise\n   * @static\n   */\n  static browserSupportsXhrBinary() {\n    return sendXhrBinary !== sendXhrText;\n  }\n\n  /**\n   * Check if browser supports streaming responses (progressive reading of XHR).\n   * @returns {Boolean} `true` if feature was detected, `false` otherwise\n   * @static\n   */\n  static browserSupportsStreamingResponse() {\n    const xhr = XHRFactory.create();\n    // A conforming XHR2 implementation must include progress events.\n    // Can we assume that the event property will be null instead of undefined?\n    // A conforming XHR2 implementation must also include withCredentials.\n    const check = xhr && xhr.onprogress === null; // xhr.withCredentials === false;\n    LOG_INFO(`http browserStreamingCheck - if XMLHTTPRequest supported and XMLHTTPRequest support onprogress: ${check}`);\n    return check;\n  }\n}\n\nmodule.exports.HTTPConnection = HTTPConnection;\n","const { EncodeSingleElement } = require('./encode-single-element');\nconst { IEEE754LIB } = require('./ieee754lib');\nconst { ParseSingleElement, StringToBuffer } = require('./parse-single-element');\n\nconst { encodeSingleElement } = EncodeSingleElement;\nconst { parseSingleElement } = ParseSingleElement;\nconst { stringToBuffer } = StringToBuffer;\n\nconst Codec = {\n  encodeSingleElement,\n  parseSingleElement,\n  stringToBuffer,\n  IEEE754LIB,\n};\n\nmodule.exports.Codec = Codec;\n","const net = require('net');\nconst { ErrorSubcode } = require('solclient-error');\nconst { Hex } = require('solclient-convert');\nconst { LOG_TRACE, LOG_DEBUG, LOG_WARN, LOG_ERROR } = require('solclient-log');\nconst { parseURL } = require('solclient-util');\nconst { TransportBase } = require('../transport-base');\nconst { TransportClientStats } = require('../transport-client-stats');\nconst { TransportError } = require('../transport-error');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionEvent } = require('../transport-session-event');\nconst { TransportSessionEventCode } = require('../transport-session-event-codes');\nconst { TransportSessionState } = require('../transport-session-states');\n\nconst {\n  formatHexString,\n} = Hex;\n\n/**\n * Tcp (tcps://) transport without TLS (tcps://) support.\n * Only works in node.js.\n * @private\n */\nclass TcpRawTransport extends TransportBase {\n\n  constructor(url, eventCB, client, props) {\n    // instanitate instance properties defined in TransportBase\n    super(url, eventCB, client, props);\n\n    /**\n     * @private\n     * @type {TransportClientStats}\n     */\n    this._clientstats = new TransportClientStats();\n\n    /**\n     * Maximum amount of send data than can be queued.\n     * NodeJS socket.write accepts all writes, growing a\n     * user space buffer indefinitely.\n     * The TCP transport (same as WS transport)\n     * manages the size of that buffer to stay below this limit.\n     * @private\n     * @type {Number}\n     */\n    this._sendBufferMaxSize = props.sendBufferMaxSize;\n\n    /*\n     * When true, the upper layer was told NO_SPACE and must be notified\n     * of the next \"drained\" event.\n     * @private\n     * @type {Boolean}\n     */\n    this._canSendNeeded = false;\n\n    /*\n     * One-shot flush callback.\n     * Set on flush(), ran and cleared on socket drain event.\n     * @private\n     */\n    this._flushCallback = null;\n\n    /**\n     * Flag to keep track of socket drained state:\n     * Set to false when socket.write returns false,\n     * (indicating user-space buffering)\n     * Set to true on socket drain events.\n     * (indicating the user space buffer has flushed to the OS.)\n     * @type {Boolean}\n     * @private\n     */\n    this._drained = true;\n\n    /**\n     * @type {TransportSessionState}\n     * @private\n     */\n    this._state = TransportSessionState.DOWN;\n\n    /**\n     * @type {?Socket}\n     * @private\n     */\n    // Always the raw socket, which is stable from connect() until disconnect().\n    this._rawSocket = null;\n\n    /**\n     * Save the Event in the onError listener\n     * Use it in onClose to populate the event.\n     * (Tcp socket calls onError with the error then onClose.\n     * WS socket calls only onClose and passes the error directly.)\n     * @private\n     * @type {?Error}\n     */\n    this._socketError = null;\n\n    /**\n     * @type {?string}\n     * @private\n     */\n    this._sessionId = new Date().getTime();\n\n    // Some whitebox tests expect a transport->transportSession nesting.\n    this._transportSession = this;\n    this._props.transportProtocol = null;\n  }\n\n  /**\n   * @override\n   */\n  getClientStats() {\n    return this._clientstats;\n  }\n  setClientStats(value) {\n    this._clientstats = value;\n  }\n\n  rehome(eventCB, client) {\n    this._eventCB = eventCB;\n    this._client = client;\n  }\n\n  /**\n   * Extracts host and port from the router URL.\n   * @private\n   * @param {String} urlString the url\n   * @returns {{String, Number}} host and port\n   */\n  parseHostPort(urlString) {\n    let port = null;\n    const urlParsed = parseURL(urlString);\n    if (urlParsed.protocol !== 'tcp:' && urlParsed.protocol !== 'tcps:') {\n      // Should not happen.\n      LOG_ERROR(`Tcp Transport: URL with unexpected scheme: ${urlParsed.protocol}`);\n    }\n    const host = urlParsed.hostname;\n    port = urlParsed.port;\n    if (port === null) {\n      if (this._ssl) {\n        port = 55443;\n      } else {\n        port = this._props._compressionLevel > 0 ? 55003 : 55555;\n      }\n    }\n    // The rest of the URL (path, etc) is ignored.\n    LOG_TRACE(`Parsing url ${urlString} -> host: ${host} , port: ${port}`);\n    return { host, port };\n  }\n\n\n  /**\n   * Socket callback.\n   * Bind the socket on setup to avoid stray errors from old sockets\n   * in quick connect()-destroy()-connect() scenarios.\n   * @private\n   * @param {Socket} originalSocket the original socket\n   * @param {Buffer} data the data\n   */\n  onData(originalSocket, data) {\n    // We do not collect Rx stats.\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY ||\n      originalSocket !== this._rawSocket) {\n      LOG_DEBUG('TcpTransportSession stray onData for previous socket, ignoring.');\n      return;\n    }\n    if (this._client) {\n      this._client.rxDataBuffer(data);\n    }\n  }\n\n  /**\n   * Socket callback.\n   * Bind the socket on setup to avoid stray errors from old sockets\n   * in quick connect()-destroy()-connect() scenarios.\n   * @private\n   * @param {Socket} originalSocket the original socket\n   * @param {Error} error the error\n   */\n  onError(originalSocket, error) {\n    if (originalSocket !== this._rawSocket) {\n      LOG_DEBUG('TcpTransportSession stray onError for previous socket, ignoring.');\n      return;\n    }\n\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_TRACE('Tcp transport is being destroyed, ignore error');\n      return;\n    }\n\n    LOG_DEBUG(`Tcp transport connection error ${error}`);\n    // net.socket invokes the error handler before the close handler.\n    // Websocket does not, and that's what the upper layer expects.\n    // Suppressing the \"double tap\" error events when connected,\n    // saving the error for the onClose handler in _socketerror.\n    if (this._state !== TransportSessionState.SESSION_UP) {\n      if (this._state === TransportSessionState.WAITING_FOR_CREATE) {\n        //There won't be an onClose invocation, so destroying right away.\n        LOG_DEBUG(`Tcp transport connection error during establishment. ${error}`);\n        this._state = TransportSessionState.CONNECTION_FAILED;\n        this._destroy(originalSocket, `Connection failed. Message:${error.message}`, ErrorSubcode.CONNECTION_ERROR);\n      } else {\n        this._eventCB(\n          new TransportSessionEvent(\n            TransportSessionEventCode.SEND_ERROR,\n            `Connection error${error}`,\n            null,\n            ErrorSubcode.CONNECTION_ERROR, null));\n      }\n    } else { // we rely on the close listener to notify the upper layer.\n      this._socketError = error;\n    }\n  }\n\n  /**\n   * Socket callback.\n   * Bind the socket argument to guard against stray invocations in a\n   * quick connect()-destroy()-connect() scenario.\n   * @private\n   * @param {Socket} originalSocket original socket\n   * @param {Boolean} hadError wheter there was an error\n   */\n  onClose(originalSocket, hadError) {\n    if (originalSocket !== this._rawSocket) {\n      LOG_DEBUG('TcpTransportSession stray onClose for previous socket, ignoring.');\n      return;\n    }\n\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_TRACE('Tcp transport is being destroyed, ignore close');\n      return;\n    }\n    const msg = hadError ? 'with error' : 'cleanly';\n    const errorMsg = this._socketError && this._socketError.message;\n    this._socketError = null; // clear on read.\n    LOG_DEBUG(`Tcp transport connection is closed ${msg}. Message: ${errorMsg}`);\n    this._state = TransportSessionState.CONNECTION_FAILED;\n\n    this._destroy(this._rawSocket, `Connection closed ${msg}. Message:${errorMsg}`,\n                  ErrorSubcode.COMMUNICATION_ERROR);\n  }\n\n  /**\n   * Callback for Socket.connect.\n   * Bind the socket argument to guard against stray invocations in a\n   * quick connect()-destroy()-connect() scenario.\n   * @private\n   * @param {Socket} originalSocket original socket\n   */\n  onOpen(originalSocket) {\n    LOG_TRACE('Plaintext transport received socket open event.');\n    if (originalSocket !== this._rawSocket) {\n      LOG_DEBUG('Plaintext transport stray onOpen for previous socket, ignoring.');\n      return;\n    }\n    if (this._state !== TransportSessionState.WAITING_FOR_CREATE) {\n      LOG_DEBUG(`TcpTransportSession stray onOpen when in state ${this._state}, ignoring.`);\n      return;\n    }\n\n    this._state = TransportSessionState.SESSION_UP;\n      // Send the event to the application letting it know that the session is up\n    this._eventCB(\n          new TransportSessionEvent(\n              TransportSessionEventCode.UP_NOTICE,\n              'Connected',\n              0,\n              null,\n              this._sessionId));\n  }\n\n  /**\n   * Establish underlying transport.\n   * @override\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  connect() {\n    if (this._state !== TransportSessionState.DOWN) {\n      LOG_ERROR(`Invalid state for operation: ${TransportSessionState.nameOf(this._state)}`);\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n    if (this._rawSocket) {\n      LOG_ERROR('TCP transport can not connect once _rawsocket exists.');\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n    if (!this._url) {\n      LOG_WARN('Cannot connect to null URL');\n      return TransportReturnCode.CONNECTION_ERROR;\n    }\n\n    LOG_DEBUG('Establishing Tcp transport session');\n    try {\n      this._state = TransportSessionState.WAITING_FOR_CREATE;\n      const { host, port } = this.parseHostPort(this._url);\n      LOG_DEBUG('Constructing socket');\n      // Luckily raw and tls sockets have the same API.\n      this._rawSocket = new net.Socket();\n      this._rawSocket.on('connect', this.onOpen.bind(this, this._rawSocket));\n      // Only connect after the connect listener is registered:\n      this._rawSocket.connect(port, host);\n      LOG_TRACE('Assigning properties to socket');\n      // WARNING!\n      // This is the kind of thing that breaks on minification.\n      // Re-run unit tests in production mode when changed:\n      // grunt --gruntfile=Gruntfile_Production.js\n      // When broken, consult the closure compiler exceptions file:\n      // (sdk-root)/builder/template/-common/env/externs.js\n      this._rawSocket.on('data', this.onData.bind(this, this._rawSocket));\n      this._rawSocket.on('error', this.onError.bind(this, this._rawSocket));\n      this._rawSocket.on('close', this.onClose.bind(this, this._rawSocket));\n      this._rawSocket.on('drain', this.onDrain.bind(this, this._rawSocket));\n      this._rawSocket.setNoDelay(true);\n\n      LOG_TRACE('Prepared socket');\n    } catch (error) {\n      LOG_DEBUG(`Error connecting: ${error}`);\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      throw new TransportError(`Could not create Tcp socket: ${error.message}`,\n        error.subcode || ErrorSubcode.CONNECTION_ERROR);\n    }\n    LOG_DEBUG('Tcp transport is connecting');\n\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Destroy the underlying transport.\n   * Returns transport return code.\n   * @override\n   * @param {?String} msg The message associated with this operation, if any.\n   * @param {?ErrorSubcode} subcode The subcode associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  destroy(msg, subcode) {\n    // No need to flush the decompressor,\n    // the upper layer is not interested in any more data.\n    return this._destroy(this._rawSocket, msg, subcode);\n  }\n\n  _destroy(originalSocket, msg, subcode) {\n    if (originalSocket !== this._rawSocket) {\n      LOG_DEBUG('TcpTransportSession stray _destroy for previous socket, ignoring.');\n      return TransportReturnCode.OK;\n    }\n    if (this._state !== TransportSessionState.DOWN) {\n      LOG_DEBUG(`Destroy Tcp transport: ${msg}`);\n      // Set state for connection teardown.\n      this._state = TransportSessionState.WAITING_FOR_DESTROY;\n\n      const onerrorStub = function onerrorStub() { };\n      if (this._rawSocket) {\n        this._rawSocket.removeAllListeners();\n        this._rawSocket.on('error', onerrorStub); // Prevent unhandled errors\n        this._rawSocket.end();\n        this._rawSocket = null;\n      }\n\n      this._canSendNeeded = false;\n      this._flushCallback = null;\n      this._drained = true;\n      this._state = TransportSessionState.DOWN;\n      this._client = null; // Don't accept data.\n    }\n\n    // always send a DESTROYED_NOTICE in response to a destroy() even\n    // if we think the transport is already destroyed\n    LOG_TRACE(`Destroying TCP transport. msg: ${msg} subcode: ${subcode}`);\n    if (this._eventCB) {\n      this._eventCB(new TransportSessionEvent(TransportSessionEventCode.DESTROYED_NOTICE,\n                                              msg || 'Session is destroyed',\n                                              null,\n                                              subcode || 0,\n                                              this._sessionId));\n      // Release references to other components\n      this._eventCB = null;\n    }\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Force fail the underlying transport's socket to force a failure.\n   * Returns transport return code.\n   * @override\n   * @param {?String} msg The message associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  forceFailure(msg) {\n    if (this._state !== TransportSessionState.DOWN) {\n      const errorMsg = (msg !== undefined && msg !== null) ? msg : ''; // default empty\n      LOG_DEBUG(`Destroy Tls transport: ${errorMsg}`);\n      if (this._rawSocket) {\n        this._rawSocket.destroy(new Error(errorMsg));\n      }\n    }\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @override\n   * @description Intended for clean shutdowns.\n   * Callback is invoked when all nodejs-buffered data\n   * has been flushed to the OS socket.\n   */\n  flush(callback) {\n    if (this._drained) {\n      LOG_DEBUG('Transport emitting FLUSH immediately.');\n      callback();\n    } else if (callback) {\n      this._flushCallback = callback;\n    }\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @override\n   * @description Send encoded SMF message\n   * Returns transport return code.\n   * @param {String} message The encoded SMF message to send\n   * @param {?Boolean} [forceAllowEnqueue=false] If true, do not fail due to transport buffer full\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  send(message, forceAllowEnqueue = false) {\n    if (this._state !== TransportSessionState.SESSION_UP) {\n      LOG_ERROR('plaintext: INVALID_STATE_FOR_OPERATION');\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n    // Limiting socket buffer size to _sendBufferMaxSize unless\n    // the force flag was set\n    // or the socket is drained, in which case any size message goes.\n    if (forceAllowEnqueue\n      || this._drained\n      || message.length < (this._sendBufferMaxSize - this._rawSocket.bufferSize)) {\n      // _drained keeps track of \"overflowing\" writes.\n      // nodejs never refuses a write but warns when it starts buffering.\n      this._drained = this._rawSocket.write(message, 'ascii');\n      if (this._clientstats) {\n        this._clientstats.bytesWritten += message.length;\n        ++this._clientstats.msgWritten;\n      }\n      return TransportReturnCode.OK;\n    }\n    // We'll unblock the user on the next onDrain.\n    this._canSendNeeded = true;\n    return TransportReturnCode.NO_SPACE;\n  }\n\n  /**\n   * Socket callback.\n   * Bind the socket on setup to avoid stray errors from old sockets\n   * in quick connect()-destry()-connect() scenarios.\n   * @private\n   * @param {Socket} originalSocket the original socket\n   */\n  onDrain(originalSocket) {\n    if (originalSocket !== this._rawSocket) {\n      LOG_DEBUG('TcpTransportSession stray onDrain for previous socket, ignoring.');\n      return;\n    }\n    this._drained = true;\n\n    if (this._flushCallback) {\n      LOG_DEBUG('Transport emitting FLUSH after drain.');\n      const prevCallback = this._flushCallback;\n      this._flushCallback = null;\n      prevCallback();\n    }\n\n    if (this._canSendNeeded) {\n      LOG_TRACE('Transport emitting CAN_ACCEPT_DATA');\n      this._canSendNeeded = false;\n      this._eventCB(\n        new TransportSessionEvent(TransportSessionEventCode.CAN_ACCEPT_DATA,\n                                  '', null, 0, this._sessionId));\n    }\n  }\n\n  /**\n   * @override\n   */\n  getInfoStr() {\n    const str = `TcpTransportSession; sid=${formatHexString(this._sessionId)}`;\n    return str;\n  }\n\n  pause() {\n    if (this._rawSocket) {\n      this._rawSocket.pause();\n    }\n  }\n\n  unpause() {\n    if (this._rawSocket) {\n      this._rawSocket.resume();\n    }\n  }\n\n}\n\nmodule.exports.TcpRawTransport = TcpRawTransport;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Effectively a boolean governing TLS downgrade to plain text after authentication.\n * @see {@link solace.SessionProperties#sslConnectionDowngradeTo}\n *\n * @target node\n * @readonly\n * @enum {String}\n * @memberof solace\n * @namespace\n */\nconst SslDowngrade = {\n  /**\n   * @description No downgrade, TLS connection remains encrypted.\n   * @type {String}\n   */\n  NONE:      'NONE',\n  /**\n   * @description TLS connection downgrades to plain text after authentication.\n   * USE WITH CAUTION! Message traffic is not encrypted!\n   */\n  PLAINTEXT: 'PLAIN_TEXT',\n};\n\nmodule.exports.SslDowngrade = Enum.new(SslDowngrade);\n","const { CapabilityType } = require('./capability-types');\n\nmodule.exports.DefaultCapabilities = {\n  createDefaultCapabilities(sessionProperties) {\n    const defaultCapabilities = {\n      [CapabilityType.GUARANTEED_MESSAGE_CONSUME]: true,\n      [CapabilityType.GUARANTEED_MESSAGE_PUBLISH]: true,\n      [CapabilityType.SHARED_SUBSCRIPTIONS]:       true,\n      // The others are set TRUE by CCSMP, but not relevant for us yet\n      // [CapabilityType.TEMPORARY_ENDPOINT]:   true,\n      // [CapabilityType.GUARANTEED_MESSAGE_BROWSE]:         true,\n      // [CapabilityType.ENDPOINT_MGMT]:        true,\n      // [CapabilityType.SELECTOR]:             true,\n      // [CapabilityType.COMPRESSION]:          true,\n      // [CapabilityType.CUT_THROUGH]:          true,\n      // [CapabilityType.QUEUE_SUBSCRIPTIONS]:  true,\n      // [CapabilityType.SUBSCRIPTION_MANAGER]: true,\n      [CapabilityType.MAX_GUARANTEED_MSG_SIZE]: sessionProperties.assumedMaxAdSize,\n      // Assuming NACKs until proven otherwise (we have code to handle it missing on reconnect):\n      [CapabilityType.AD_APP_ACK_FAILED]: true,\n    };\n    return defaultCapabilities;\n  },\n};\n","const { ErrorSubcode, OperationError } = require('solclient-error');\nconst { Long } = require('solclient-convert');\nconst { Parameter } = require('solclient-validate');\nconst { ReplayStartLocation, ReplayStartType } = require('solclient-replaystart');\n// eslint-disable-next-line global-require\nconst BufferImpl = require('buffer').Buffer;\n\nconst RMID_VERSION_1_PREFIX = 'rmid1:';\n/* prefix length + 3 '-' + 16 bytes of hex (32) */\nconst RMID_LEN = RMID_VERSION_1_PREFIX.length + 3 + 16 * 2; // 41\n/* regex for testing if data component of the rmid string parsing is valid */\nconst validRmidHexRegex = /^[0-9a-fA-F]{32}$/g;\nconst INVALID_SUID = Long.UZERO;\n\nconst {\n  isString,\n  isValue,\n  isInstanceOf,\n} = Parameter;\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users. Users should obtain an instance from\n *  {@link solace.SolclientFactory.createReplicationGroupMessageId} or from\n *  {@link solace.Message.getReplicationGroupMessageId}</b>\n * <p>\n * ReplicationGroupMessageId specifies a Replication Group Message ID.\n * Can be used to specify a {@link solace.ReplayStartLocation} for the message after this id.\n * The ReplayStartLocation is set in the corresponding\n * MessageConsumer property {@link solace.MessageConsumerProperties#replayStartLocation}.\n *\n * @extends solace.ReplayStartLocation\n * @memberof solace\n * @hideconstructor\n */\nclass ReplicationGroupMessageId extends ReplayStartLocation {\n  /**\n   *@param {Long} spoolerUniqueId spooler id component of rgmid\n   *@param {Long} effectiveMessageId message id component of rgmid\n   *@private\n   */\n  constructor(spoolerUniqueId, effectiveMessageId) {\n    super({\n      _replayStartValue: {\n        suid:      spoolerUniqueId,\n        messageId: effectiveMessageId,\n      },\n      _type: ReplayStartType.RGMID,\n    });\n    /**\n     * _suid {Long} spoolerUniqueId component of the replication group message id\n     *              this should be unique to the replaication group\n     * @private\n     */\n    this._suid = spoolerUniqueId;\n    /**\n     * _messageId {Long} effectiveMessageId component of the replication group message id\n     *              this should be unique to the message in the replication group\n     * @private\n     */\n    this._messageId = effectiveMessageId;\n  }\n  /**\n   * Compares with other ReplicationGroupMessageId\n   * @param {ReplicationGroupMessageId} otherReplicationGroupMessageId the other id to compare\n   * @returns {Number} 0 if the ReplicationGroupMessageId is equal to the other\n   *   ReplicationGroupMessageId.\n   *   < 0 if the ReplicationGroupMessageId is less than the other ReplicationGroupMessageId.\n   *   \\> 0 if the ReplicationGroupMessageId is greater than the other ReplicationGroupMessageId.\n   * @throws {solace.OperationError}\n   * * if the otherReplicationGroupMessageId is not a ReplicationGroupMessageId type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the otherReplicationGroupMessageId is not comparable as it is from different origins\n   *   and can not be compared.\n   *   Subcode: {@link solace.ErrorSubcode.MESSAGE_ID_NOT_COMPARABLE}.\n   */\n  compare(otherReplicationGroupMessageId) {\n    isInstanceOf('otherReplicationGroupMessageId', otherReplicationGroupMessageId, ReplicationGroupMessageId);\n    const oId = otherReplicationGroupMessageId;\n    if (!this._suid.equals(oId._suid)) {\n      const message = 'Unable to compare Replication Group Message ID from different origins';\n      throw new OperationError(`Parameter otherReplicationGroupMessageId[${oId.toString()\n        }] failed validation`,\n        ErrorSubcode.MESSAGE_ID_NOT_COMPARABLE, message);\n    }\n    if (this._messageId.gt(oId._messageId)) {\n      return 1;\n    } else if (this._messageId.lt(oId._messageId)) {\n      return -1;\n    }\n    return 0;\n  }\n  [util_inspect_custom]() {\n    return `[Replication Group Message Id: ${this.toString()}]`;\n  }\n  /**\n   * @override\n   * @description\n   * The ReplicationGroupMessageId toString() method returns a string that can later be passed to\n   * {@link solace.SolclientFactory.createReplicationGroupMessageId} to create a\n   * ReplicationGroupMessageId object.\n   * @returns {String} serialized string of the ReplicationGroupMessageId\n   */\n  toString() {\n    const idBuffer = BufferImpl.from(this._suid.toBytesBE().concat(this._messageId.toBytesBE()));\n    const hexString = idBuffer.toString('hex');\n    const sep = '-';\n    return `${RMID_VERSION_1_PREFIX}${hexString.substring(0, 5)}${sep\n    }${hexString.substring(5, 16)}${sep}${hexString.substring(16, 24)}${sep\n    }${hexString.substring(24, 32)}`;\n  }\n}\n\n/**\n * factory method for creating Replication Group Message Ids\n * @param {Object} spec object specification for building\n * @returns {ReplicationGroupMessageId} id instance for spec.\n * @private\n */\nfunction createReplicationGroupMessageId(spec) {\n  /* later this can be enhanced for other implementations of rgmids */\n  return new ReplicationGroupMessageId(spec.suid, spec.msgid);\n}\n\nfunction fromString(rgmidStr) {\n  /* check parameter type */\n  isString('id', rgmidStr);\n  /* validate rmid string to represent 128 bits of id data\n   * must be of format:\n   * rmid1:ttttt-rrrrrrrrrrr-mmmmmmmm-llllllll\n   *\n   * Where:\n   *\n   * * rmid1: This indicates it is a Replication Group Message ID (allows for some sanity\n   *    checking that the bytes to follow are in fact a Replication Group Message ID).\n   *    The '1' is a version to differentiate from a new type of Replication Group Message ID\n   *    that may be introduced later.\n   * * ttttt: Timestamp portion of SUID, 20 bits.\n   * * rrrrrrrrrrr: Random portion of SUID, 44 bits.\n   * * mmmmmmmm: Most significant 32-bits of ack message ID.\n   * * llllllll: Least significant 32-bits of ack message ID.\n   */\n  isValue('id', rgmidStr.length, RMID_LEN, ErrorSubcode.PARAMETER_OUT_OF_RANGE, `length expected: ${RMID_LEN} but is ${rgmidStr.length}`);\n  if (!rgmidStr.startsWith(RMID_VERSION_1_PREFIX)) {\n    /* raise invalid format error */\n    throw new OperationError('Parameter id has invalid Replication Group Message ID format',\n      ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n      `id: ${rgmidStr}, does not start with ${RMID_VERSION_1_PREFIX}`);\n  }\n  const rmidBufs = rgmidStr.substring(RMID_VERSION_1_PREFIX.length).split('-');\n  if (rmidBufs.length !== 4 ||\n      rmidBufs[0].length !== 5 ||\n      rmidBufs[1].length !== 11 ||\n      rmidBufs[2].length !== 8 ||\n      rmidBufs[3].length !== 8) {\n    /* raise invalid format error */\n    throw new OperationError('Parameter id has invalid Replication Group Message ID format',\n      ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n      `id: ${rgmidStr}, does not have valid separation of components`);\n  }\n  /* convert rmid data string (hex) to bytes\n   * note use Buffer to read hex string to bytes as Long.from(str, 16) uses inaccurate\n   *  calculation and loses precision, while Buffer.from(str, 'hex') does not.\n   * Browser BufferImpl is dependent on parseInt reading the string text 2 characters\n   *  at a time letting a hex string chuck of [0-9][notHex], eg '9G', is parsed as a\n   *  value 9 not NaN leading to a \"valid\" read. This means data integrity is lost\n   *  on browser buffer parsing of hex. An independent string check is required to avoid this.\n   */\n  /* valid rmid component concatenated are hex only string with 32 character length */\n  const rmidHex = rmidBufs.join('').trim();\n  /* validRmidHexRegex uses the global flag and must be reset to advance the global regex\n   * lastIndex.\n   * reset regex\n   */\n  validRmidHexRegex.test('');\n  if (!validRmidHexRegex.test(rmidHex)) {\n    throw new OperationError('Parameter id has invalid Replication Group Message ID format',\n      ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n      `id: ${rgmidStr}, invalid data string value`);\n  }\n  /* convert hex string to bytes */\n  let rmidBuffer;\n  try {\n    rmidBuffer = BufferImpl.from(rmidHex, 'hex');\n  } catch (ex) {\n    /* error parsing hex string into buffer */\n    throw new OperationError('Parameter id has invalid Replication Group Message ID format',\n      ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n      `id: ${rgmidStr}, failed to read data, cause: ${ex.message}`);\n  }\n  /* validate read data len is expected for 128 bits of data */\n  const buflen = rmidBuffer ? rmidBuffer.length : 0;\n  if (buflen !== 16) {\n    /* error occured during read */\n    throw new OperationError('Parameter id has invalid Replication Group Message ID format',\n      ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n      `id: ${rgmidStr}, failed to read data from id expected length of 16 got ${buflen}`);\n  }\n  /* extract components into long storage */\n  const suid = Long.fromBits(rmidBuffer.readUInt32BE(4), rmidBuffer.readUInt32BE(0), true);\n  if (suid.eq(INVALID_SUID)) {\n    /* invalid suid detected raise out of range parameter OperationError */\n    throw new OperationError('Parameter id has invalid Replication Group Message ID format',\n      ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n      `id: ${rgmidStr}, has invalid origin`);\n  }\n  const msgid = Long.fromBits(rmidBuffer.readUInt32BE(12), rmidBuffer.readUInt32BE(8), true);\n  /* return created id object with Long values */\n  return createReplicationGroupMessageId({ suid, msgid });\n}\n\nconst RgmidFactory = {};\nRgmidFactory.fromString = fromString;\nRgmidFactory.from = createReplicationGroupMessageId;\nRgmidFactory.INVALID_SUID = INVALID_SUID;\n\nmodule.exports.ReplicationGroupMessageId = ReplicationGroupMessageId;\nmodule.exports.RgmidFactory = RgmidFactory;\n","const SMFLib = require('solclient-smf');\nconst { CapabilityType } = require('solclient-session');\nconst { ConsumerFSM } = require('./consumer-fsm');\nconst { ConsumerFSMEvent } = require('./consumer-fsm-event');\nconst { ConsumerFSMEventNames } = require('./consumer-fsm-event-names');\nconst { ErrorResponseSubcodeMapper,\n  ErrorSubcode,\n  OperationError } = require('solclient-error');\nconst { Flow, FlowOperation } = require('solclient-flow');\nconst { MessageConsumerEvent } = require('./message-consumer-event');\nconst { MessageOutcome } = require('solclient-message');\nconst { MessageConsumerEventName } = require('./message-consumer-event-names');\nconst { MessageConsumerProperties } = require('./message-consumer-properties');\nconst { MessageConsumerPropertiesValidator } = require('./message-consumer-properties-validator');\nconst { Queue, Topic } = require('solclient-destination');\nconst { QueueAccessType, QueuePermissions, QueueDiscardBehavior } = require('solclient-queue');\nconst {TransportReturnCode} = require('solclient-transport');\n\n\nfunction formatEventName(eventName) {\n  return `MessageConsumerEventName.${MessageConsumerEventName.describe(eventName)}`;\n}\n\nlet localCounter = 0;\nfunction getConsumerLocalName() {\n  return `ConsumerFSM ${localCounter++}`;\n}\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * A Message Consumer is created by calling {@link solace.Session#createMessageConsumer}.\n *\n * A MessageConsumer controls Guaranteed Message delivery to this client.\n *\n * Consumer characteristics and behavior are defined by {@link solace.MessageConsumerProperties}.\n * The properties can also be supplied as a simple key-value {Object}. The queue descriptor,\n * {@link solace.MessageConsumerProperties#queueDescriptor} must be specified to identify the\n * Guaranteed Message Queue or Guaranteed Message Topic Endpoint on the Solace Message Router.\n *\n * The MessageConsumer object is an EventEmitter, and will emit events to which the\n * application may choose to subscribe, such as the connection to the Solace Message Router\n * going up or down.\n *\n * If a registered listener for an emitted event throws an exception, this is caught and emitted as\n * an 'error'.\n *\n * @fires solace.MessageConsumerEventName#ACTIVE\n * @fires solace.MessageConsumerEventName#CONNECT_FAILED_ERROR\n * @fires solace.MessageConsumerEventName#DISPOSED\n * @fires solace.MessageConsumerEventName#DOWN\n * @fires solace.MessageConsumerEventName#DOWN_ERROR\n * @fires solace.MessageConsumerEventName#GM_DISABLED\n * @fires solace.MessageConsumerEventName#INACTIVE\n * @fires solace.MessageConsumerEventName#MESSAGE\n * @fires solace.MessageConsumerEventName#UP\n * @fires solace.MessageConsumerEventName#SUBSCRIPTION_OK\n * @fires solace.MessageConsumerEventName#SUBSCRIPTION_ERROR\n *\n *\n * @hideconstructor\n * @extends solace.Flow\n * @memberof solace\n */\nclass MessageConsumer extends Flow {\n  constructor({ properties, sessionInterfaceFactory } = {}) {\n    const applyProperties = new MessageConsumerProperties(properties);\n    MessageConsumerPropertiesValidator.validate(applyProperties.browser ?\n      'QueueBrowserProperties' : 'MessageConsumerProperties',\n                                                applyProperties, properties);\n    super(applyProperties, sessionInterfaceFactory, {\n      direct: MessageConsumerEventName.MESSAGE,\n      emits:  MessageConsumerEventName.values,\n      formatEventName,\n    });\n\n    const superFormatter = this.logger.formatter;\n    this.logger.formatter = (...args) => superFormatter('[message-consumer]', ...args);\n\n    this._active = undefined;\n    this._fsm = this._makeFSM();\n    this.endpointErrorId = undefined;\n    this.partitionGroupId = undefined; // support Partition Q feature\n\n    this._on(MessageConsumerEventName.ACTIVE, () => this._onFlowActive(true));\n    this._on(MessageConsumerEventName.INACTIVE, () => this._onFlowActive(false));\n    this._on(MessageConsumerEventName.DOWN_ERROR, this._onFlowDisconnected.bind(this));\n    this._on(MessageConsumerEventName.UP, this._onFlowUp.bind(this));\n    this._fsm.start(); // Subscriber flows self-manage, so they start immediately\n  }\n\n  _makeFSM() {\n    const properties = this._properties;\n    const name = `${getConsumerLocalName()}`;\n    return new ConsumerFSM({\n      name,\n      consumer:         this,\n      sessionInterface: this._sessionInterface,\n      properties,\n    });\n  }\n\n  /**\n   * Begins delivery of messages to this consumer. This method opens the protocol window\n   * to the Solace Message Router so further messages can be received.\n   *\n   * A newly created consumer is in started state.\n   *\n   * If the consumer was already started, this method has no effect.\n   *\n   * A consumer is stopped by calling {@link solace.MessageConsumer.stop}\n   *\n   * @throws {solace.OperationError}\n   * * if the Message Consumer is disposed.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   * * if the Message Consumer is disconnected.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  start() {\n    this._operationCheck(FlowOperation.START);\n    this._fsm.requestStartDispatchUser();\n  }\n\n  /**\n   * Stops messages from being delivered to this consumer from the Solace Message Router.\n   * Messages may continue to be prefetched by the API and queued internally\n   * until {@link solace.MessageConsumer#start} is called.\n   *\n   * If the consumer was already stopped, this method has no effect.\n   *\n   * @throws {solace.OperationError}\n   * * if the Message Consumer is disconnected.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  stop() {\n    this._operationCheck(FlowOperation.STOP);\n    this._fsm.requestStopDispatchUser();\n  }\n\n  /**\n   * Connects the consumer immediately. The application should add event listeners (see\n   * {@link solace.MessageConsumerEventName}). If there is no listener added for\n   * {@link solace.MessageConsumerEventName#event:MESSAGE} then up to a window\n   * {@link solace.MessageConsumerProperties.windowSize} of messages can be queued internally.\n   * to the {@link solace.MessageConsumer} before calling this method.\n   *\n   * @throws {solace.OperationError}\n   *  * if consumer is not supported by router for this client.\n   *  subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   *\n   */\n  connect() {\n    if ((this._sessionInterface.getCapability(CapabilityType.GUARANTEED_MESSAGE_CONSUME)\n        !== null) &&\n        (!this._sessionInterface.isCapable(CapabilityType.GUARANTEED_MESSAGE_CONSUME))) {\n      throw new OperationError('Consumer is not supported by router for this client',\n              ErrorSubcode.INVALID_OPERATION, null);\n    }\n    super.connect();\n    this.processFSMEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.FLOW_OPEN }));\n  }\n\n  /**\n   * Initiates an orderly disconnection of the Message Consumer. The API will send any pending\n   * client acknowledgements on the Message Consumer, then send an unbind request.\n   * Any messages subsequently\n   * received are discarded silently. When the unbind message is acknowledged, the application\n   * receives a {@link solace.MessageConsumerEventName#event:DOWN} event if it has set a listener\n   * for that event.\n   *\n   * @throws {solace.OperationError}\n   * * if the Message Consumer is disconnected.\n   *   subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  disconnect() {\n    super.disconnect();\n    this.processFSMEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.FLOW_CLOSE }));\n  }\n\n  /**\n   * Returns the destination that should be used to publish messages that this consumer\n   * will receive.\n   * * For topic endpoints, this is the topic to which the topic endpoint is subscribed.\n   * * For queues, this is the associated queue destination.\n   *\n   * The destination returned can\n   * be used to set the ReplyTo field in a message, or otherwise communicated\n   * to partners that need to send messages to this Message Consumer. This is especially useful\n   * for temporary endpoints (Queues and Topic Endpoints), as the destination\n   * is unknown before the endpoint is created.\n   *\n   * This method will succeed after {@link solace.MessageConsumerEventName#event:UP} for temporaries\n   * with generated destinations.\n   *\n   * @throws {solace.OperationError}\n   * * if the {@link solace.MessageConsumer} is disconnected and the destination is temporary.\n   *\n   * @returns {solace.Destination} The publishing destination that delivers to this consumer.\n   */\n  getDestination() {\n    const destination = this._fsm.getDestination();\n    if (destination instanceof Queue) {\n      return new Queue(destination);\n    }\n    return new Topic(destination);\n  }\n\n  // Application has disconnected the session, we must continue to orderly shut down\n  // unbinding Message Consumers,\n  // but Message Consumers that are up merely treat this as a 'down' event and\n  // transition to awaitingSessionUp\n  _disconnectSession() {\n    super._disconnectSession();\n    this.processFSMEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.SESSION_DISCONNECT }));\n  }\n\n  _operationCheck(operation) {\n    super._operationCheck(operation);\n    switch (operation) {\n      case FlowOperation.GET_DESTINATION:\n        if (this._isDisconnected()) {\n          throw new OperationError('Cannot get destination of a disconnected flow',\n                                   ErrorSubcode.INVALID_OPERATION);\n        }\n        break;\n      default:\n    }\n  }\n\n  // ----\n\n  /**\n   * @param {any} messageId The message ID to ack\n   * @param {any} isAutoAcked whether this is an auto-acked message\n   * @internal\n   */\n  applicationAck(messageId, isAutoAcked = false) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE(`Adding application ack for ${messageId}`);\n    this._fsm.applicationAck(messageId, isAutoAcked);\n  }\n\n  /**\n   * @param {any} messageId The message ID to ack\n   * @param {solace.MessageOutcome} settlementOutcome The message settlement outcome\n   * @internal\n   */\n  applicationSettle(messageId, settlementOutcome) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE(`Adding application settlement for ${\n      messageId\n    } with outcome: solace.MessageOutcome.${MessageOutcome.nameOf(settlementOutcome)}`);\n    this._fsm.applicationSettle(messageId, settlementOutcome);\n  }\n\n  getDisposedEvent() { // eslint-disable-line class-methods-use-this\n    return MessageConsumerEventName.DISPOSED;\n  }\n\n  /**\n   * @param {solace.Message} message The data message to handle\n   * @internal\n   */\n  handleDataMessage(message) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Handling data message');\n    message.setMessageConsumer(this);\n    this._fsm.acceptMessage(message);\n  }\n\n  /**\n   * @override\n   * @param {solace.AdProtocolMessage} message The control message to handle\n   * @internal\n   */\n  handleUncorrelatedControlMessage(message) {\n    const { LOG_INFO, LOG_DEBUG, LOG_TRACE } = this.logger;\n    LOG_INFO('Handling uncorrelated control message');\n    const msgType = message.msgType;\n    const { SMFAdProtocolMessageType } = SMFLib;\n    switch (msgType) {\n      case SMFAdProtocolMessageType.UNBIND: {\n        const responseCode = message.smfHeader.pm_respcode;\n        const description = message.smfHeader.pm_respstr;\n        const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode,\n                                                                          description);\n        LOG_TRACE(`Handling uncorrelated UNBIND. endpointErrorId: ${message.getEndpointErrorId()}`);\n        if (message.getEndpointErrorId() !== undefined) {\n          this.endpointErrorId = message.getEndpointErrorId();\n        }\n        this.processFSMEvent(new ConsumerFSMEvent({\n          name: ConsumerFSMEventNames.FLOW_UNBOUND,\n        },\n          new OperationError(description, errorSubcode, responseCode)\n        ));\n      }\n        break;\n      case SMFAdProtocolMessageType.FLOWCHANGEUPDATE:\n        this.processFSMEvent(new ConsumerFSMEvent({\n          name: ConsumerFSMEventNames.FLOW_ACTIVE_IND,\n        }, {\n          active: message.getActiveFlow(),\n        }));\n        LOG_TRACE(`Flow Change Update for flowId ${this._flowId}: sending response.`);\n        const respMsg = SMFLib.AdProtocolMessage.getFlowChangeUpdateResponse(this._flowId, message.getActiveFlow());\n        const returnCode = this._sessionInterface.sendControl(respMsg);\n        if (TransportReturnCode.OK != returnCode) {\n          LOG_DEBUG(`Failed to send Flow Change Update response for flowId ${this._flowId}: ${returnCode}`);\n        } else {\n          LOG_TRACE(`Successfully sent Flow Change Update response for flowId ${this._flowId}: ${returnCode}`);\n        }\n        break;\n      default:\n        LOG_DEBUG('Dropping unhandled AD control message: ',\n                  SMFAdProtocolMessageType.describe(msgType));\n    }\n  }\n\n  /**\n   * Creates and returns copy of the properties for this MessageConsumer.\n   *\n   * If the object was constructed using an {@link solace.AbstractQueueDescriptor},\n   * and the queue descriptor was subsequently connected to an endpoint, the\n   * `MessageConsumerProperties` returned will include a {@link solace.QueueDescriptor}\n   * that contains the resolved name.\n   *\n   * A new copy of the properties object is returned each time this property is accessed.\n   * The returned object cannot be polled for mutations such as the one described above.\n   *\n   * @returns {solace.MessageConsumerProperties} The properties associated with this object.\n   */\n  getProperties() {\n    return super.getProperties();\n  }\n\n  /**\n   * Resets the router state contained in the consumer, e.g. on VRN change\n   *\n   * @memberof MessageConsumer\n   * @internal\n   */\n  onVRNChanged() {\n    this.processFSMEvent(new ConsumerFSMEvent({\n      name: ConsumerFSMEventNames.VIRTUALROUTER_NAME_CHANGED,\n    }));\n  }\n\n  /**\n   * After the MessageConsumer has connected to an endpoint\n   * ({@link solace.MessageConsumerEventName#UP}), accesstype represents\n   *  the access type for the endpoint to which this Message Consumer is bound.\n   * @name solace.MessageConsumer.accessType\n   * @type {solace.QueueAccessType}\n   */\n  get accessType() {\n    return this._accessType;\n  }\n  /**\n   * @param {solace.QueueAccessType} value The value to set\n   * @internal\n   */\n  set accessType(value) {\n    this._accessType = value;\n  }\n\n  /**\n   * Whether the consumer is active. If active indications for the consumer are not\n   * enabled, this will return undefined.\n   * @type {?Boolean}\n   * @internal\n   */\n  get active() {\n    return this._active;\n  }\n  /**\n   * @param {Boolean} value The value to set\n   * @internal\n   */\n  set active(value) {\n    if (value !== this._active) {\n      this._emit(value ? MessageConsumerEventName.ACTIVE : MessageConsumerEventName.INACTIVE);\n    }\n    this._active = value;\n  }\n\n  /**\n   * After the MessageConsumer has connected as indicated by the event\n   * {@link solace.MessageConsumerEventName#event:UP}, queueDiscardBehavior represents\n   * the discard behavior flags for the endpoint to which this Message Consumer is bound.\n   * @name solace.MessageConsumer.queueDiscardBehaviour\n   * @type {solace.QueueDiscardBehavior}\n   */\n  get queueDiscardBehavior() {\n    return this._queueDiscardBehavior;\n  }\n  /**\n   * @param {solace.QueueDiscardBehavior} value The value to set\n   * @internal\n   */\n  set queueDiscardBehavior(value) {\n    this._queueDiscardBehavior = value;\n  }\n\n  /**\n   * After the MessageConsumer has connected as indicated by the event\n   * {@link solace.MessageConsumerEventName#event:UP}\n   * respectsTTL is `true` when the endpoint respects Time To Live on messages\n   * and 'false' otherwise.\n   * @name solace.MessageConsumer.respectsTTL\n   * @type {Boolean}\n   */\n  get respectsTTL() {\n    return this._respectsTTL;\n  }\n  /**\n   * @param {Boolean} value The value to set\n   * @internal\n   */\n  set respectsTTL(value) {\n    this._respectsTTL = value;\n  }\n\n  /**\n   * Gets the flow ID for this consumer. This number will change between reconnects\n   * and is purely informational.\n   * @type {Long}\n   * @internal\n   */\n  get flowId() {\n    return this._flowId;\n  }\n  /**\n   * @param {Long} value The value to set\n   * @internal\n   */\n  set flowId(value) {\n    this._flowId = value;\n  }\n\n  /**\n   * After the MessageConsumer has connected as indicated by the event\n   * {@link solace.MessageConsumerEventName#event:UP}, this property represents\n   * permissions granted by the router to this user on this Message Consumer\n   * @name solace.MessageConsumer.permissions\n   * @type {solace.QueuePermissions}\n   */\n  get permissions() {\n    return this._permissions || 0;\n  }\n  /**\n   * @param {Number} value The value to set\n   * @internal\n   */\n  set permissions(value) {\n    this._permissions = value;\n  }\n\n  _onFlowActive(isActive) {\n    const { LOG_DEBUG } = this.logger;\n    LOG_DEBUG(`Flow (flowId = ${this._flowId}) became ${isActive ? 'active' : 'inactive'}`);\n    this._active = isActive;\n  }\n\n  _onFlowDisconnected(error) {\n    const { LOG_INFO } = this.logger;\n    LOG_INFO(`${this} disconnected: ${error}.message`);\n  }\n\n  _disposeFSM() {\n    const { LOG_INFO } = this.logger;\n    LOG_INFO('Disposing FSM');\n    this.processFSMEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.DISPOSE }));\n  }\n\n  _onFlowUp() {\n    const { LOG_INFO } = this.logger;\n    LOG_INFO(`Flow is up: flowId = ${this._flowId}`);\n  }\n\n  [util_inspect_custom]() {\n    return Object.assign(super[util_inspect_custom](), {\n      'destination':          this._destination,\n      'accessType':           QueueAccessType.describe(this.accessType),\n      'permissions':          QueuePermissions.describe(this.permissions),\n      'respectsTTL':          this.respectsTTL,\n      'active':               this.wantFlowChangeNotify ? this.active : '(indications disabled)',\n      'wantFlowChangeNotify': this.wantFlowChangeNotify,\n      'queueDiscardBehavior': QueueDiscardBehavior.describe(this.queueDiscardBehavior),\n      'maxWindowSize':        this._fsm.maxWindowSize,\n    });\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n\n  _isDisconnected() {\n    return this._fsm.isDisconnected();\n  }\n\n  /**\n   * Subscribe the queue to a topic, always requesting confirmation from the router.\n   *\n   * {@link solace.MessageConsumerEventName.SUBSCRIPTION_OK} is generated when subscription is\n   * added successfully; otherwise, session event\n   * {@link solace.MessageConsumerEventName.SUBSCRIPTION_ERROR} is generated.\n   *\n   * When the application receives the event\n   * {@link solace.MessageConsumerEventName.SUBSCRIPTION_ERROR}, it\n   * can obtain the failed topic subscription by calling\n   * {@link solace.MessageConsumerEvent#reason}.\n   * The returned string is in the format of \"Topic: <failed topic subscription>\".\n   *\n   * @param {solace.Destination} topic The topic destination subscription to add.\n   * @param {Object|String|null|undefined} correlationKey If specified, this value is\n   *                                echoed in the messageConsumer event within\n   *                                {@link MessageConsumerEvent}.\n   * @param {Number} requestTimeout The request timeout period (in milliseconds). If specified, this\n   *                                value overwrites readTimeoutInMsecs property in\n   *                                {@link SessionProperties}.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected,\n   *   or the consumer is inactive, down, disconnected, or disposed.\n   *   Or if the consumer is bound to a topic endpoint instead of a queue.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if the topic has invalid syntax.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_TOPIC_SYNTAX}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if the topic is a shared subscription and the peer router does not support Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_SUPPORTED}.\n   * * if the topic is a shared subscription and the client does not allowed Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_ALLOWED}.\n   */\n  addSubscription(topic, correlationKey, requestTimeout) {\n    const callback = (success, subCode, respCode, respText) => {\n      if (success) {\n        const event = new MessageConsumerEvent(\n          MessageConsumerEventName.SUBSCRIPTION_OK,\n          respText,\n          respCode,\n          subCode,\n          correlationKey,\n          `Topic: ${topic.getName()}`\n        );\n        this._emit(MessageConsumerEventName.SUBSCRIPTION_OK, event);\n      } else {\n        const error = new MessageConsumerEvent(\n          MessageConsumerEventName.SUBSCRIPTION_ERROR,\n          respText,\n          respCode,\n          subCode,\n          correlationKey,\n          `Topic: ${topic.getName()}`\n        );\n        this._emit(MessageConsumerEventName.SUBSCRIPTION_ERROR, error);\n      }\n    };\n\n    this._sessionInterface.updateQueueSubscription(\n      topic,\n      this._fsm.getDestination(),\n      true,\n      this,\n      callback,\n      requestTimeout);\n  }\n  /**\n   * Unsubscribe the queue from a topic, requesting confirmation from the router.\n   *\n   * {@link solace.MessageConsumerEventName.SUBSCRIPTION_OK} is generated when subscription is\n   * removed successfully; otherwise, session event\n   * {@link solace.MessageConsumerEventName.SUBSCRIPTION_ERROR} is generated.\n   *\n   * When the application receives the message consumer event\n   * {@link solace.MessageConsumerEventName.SUBSCRIPTION_ERROR}, it\n   * can obtain the failed topic subscription by calling\n   * {@link solace.MessageConsumerEvent#reason}. The returned\n   * string is in the format \"Topic: <failed topic subscription>\".\n   *\n   * @param {solace.Destination} topic The topic destination subscription to remove.\n   * @param {Object|String|null|undefined} correlationKey If <code>null</code> or undefined, a Correlation Key is not set\n   *                                in the confirmation session event.\n   * @param {Number} requestTimeout The request timeout period (in milliseconds). If specified, this\n   *                                value overwrites readTimeoutInMsecs property in\n   *                                {@link SessionProperties}.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected,\n   *   or the consumer is inactive, down, disconnected, or disposed.\n   *   Or if the consumer is bound to a topic endpoint instead of a queue.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if the topic has invalid syntax.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_TOPIC_SYNTAX}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if the topic is a shared subscription and the peer router does not support Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_SUPPORTED}.\n   * * if the topic is a shared subscription and the client does not allowed Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_ALLOWED}.\n   */\n  removeSubscription(topic, correlationKey, requestTimeout) {\n    const callback = (success, subCode, respCode, respText) => {\n      if (success) {\n        const event = new MessageConsumerEvent(\n          MessageConsumerEventName.SUBSCRIPTION_OK,\n          respText,\n          respCode,\n          subCode,\n          correlationKey,\n          `Topic: ${topic.getName()}`\n        );\n        this._emit(MessageConsumerEventName.SUBSCRIPTION_OK, event);\n      } else {\n        const error = new MessageConsumerEvent(\n          MessageConsumerEventName.SUBSCRIPTION_ERROR,\n          respText,\n          respCode,\n          subCode,\n          correlationKey,\n          `Topic: ${topic.getName()}`\n        );\n        this._emit(MessageConsumerEventName.SUBSCRIPTION_ERROR, error);\n      }\n    };\n\n    this._sessionInterface.updateQueueSubscription(\n      topic,\n      this._fsm.getDestination(),\n      false,\n      this,\n      callback,\n      requestTimeout);\n  }\n}\n\nmodule.exports.MessageConsumer = MessageConsumer;\n","module.exports = require(\"bufferutil\");","function apiEnv(envObject) {\n  if (typeof BUILD_ENV !== 'undefined' && !BUILD_ENV.TEST) {\n    throw new Error('Test environment will not override build environment');\n  }\n  global.BUILD_ENV = Object.assign({}, envObject, { TEST: true });\n  return global.BUILD_ENV;\n}\n\nif (typeof BUILD_ENV !== 'undefined' && BUILD_ENV.TEST === false) {\n  apiEnv.target = () => apiEnv();\n} else {\n  const configs = {\n    node: {\n      TARGET_NAME: 'node',\n      TARGET_NODE: true,\n    },\n    browser: {\n      TARGET_NAME:    'browser',\n      TARGET_BROWSER: true,\n    },\n    debug: {\n      MODE_NAME:    'debug',\n      MODE_DEBUG:   true,\n      MODE_RELEASE: false,\n    },\n    release: {\n      MODE_NAME:    'release',\n      MODE_DEBUG:   false,\n      MODE_RELEASE: true,\n    },\n  };\n\n  apiEnv.target = function named(...args) {\n    const objects = args.map((arg) => {\n      if (typeof arg === 'string') {\n        const obj = configs[arg];\n        if (!obj) {\n          throw new Error(`Environment ${arg} is not defined; use ${Object.keys(configs).join(', ')}`);\n        }\n        return obj;\n      } else if (arg && typeof arg === 'object') {\n        return arg;\n      }\n\n      throw new Error(`Unrecognized argument ${arg}`);\n    });\n    return apiEnv(Object.assign(...objects));\n  };\n}\nmodule.exports = apiEnv;\n","const { AuthenticationScheme, CapabilityType, ClientCapabilityType, MutableSessionProperty, SessionProperties } = require('solclient-session');\nconst { BaseMessage } = require('./base-message');\nconst { Bits, Convert } = require('solclient-convert');\nconst { DestinationType, DestinationUtil } = require('solclient-destination');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { Process, StringUtils, Version } = require('solclient-util');\nconst { SMFClientCtrlMessageType } = require('../smf-client-ctrl-message-types');\nconst { SMFClientCtrlParam, SMFClientCtrlAuthType } = require('../smf-client-ctrl-params');\nconst { SMFHeader } = require('./smf-header');\nconst { SMFParameter } = require('./smf-parameter');\nconst { SMFProtocol } = require('../smf-protocols');\n\nconst { LOG_TRACE } = require('solclient-log');\n\nconst {\n  get: bits,\n  set: setBits,\n} = Bits;\nconst {\n  int8ToStr, strToInt8,\n  int16ToStr, int32ToStr,\n  strToInt16, strToInt32,\n} = Convert;\nconst {\n  nullTerminate,\n  stripNullTerminate,\n} = StringUtils;\nconst {\n  validateAndEncode,\n} = DestinationUtil;\n\nconst BOOLEAN_CAPS_BITS = [\n  CapabilityType.JNDI,\n  CapabilityType.COMPRESSION,\n  CapabilityType.GUARANTEED_MESSAGE_CONSUME,\n  CapabilityType.TEMPORARY_ENDPOINT,\n  CapabilityType.GUARANTEED_MESSAGE_PUBLISH,\n  CapabilityType.GUARANTEED_MESSAGE_BROWSE,\n  CapabilityType.ENDPOINT_MGMT,\n  CapabilityType.SELECTOR,\n  CapabilityType.ENDPOINT_MESSAGE_TTL,\n  CapabilityType.QUEUE_SUBSCRIPTIONS,\n  null, // skip obsolete FLOW_RECOVER\n  CapabilityType.SUBSCRIPTION_MANAGER,\n  CapabilityType.MESSAGE_ELIDING,\n  CapabilityType.TRANSACTED_SESSION,\n  CapabilityType.NO_LOCAL,\n  CapabilityType.ACTIVE_CONSUMER_INDICATION,\n  CapabilityType.PER_TOPIC_SEQUENCE_NUMBERING,\n  CapabilityType.ENDPOINT_DISCARD_BEHAVIOR,\n  CapabilityType.CUT_THROUGH,\n  null, // skip OPENMAMA\n  CapabilityType.MESSAGE_REPLAY,\n  CapabilityType.COMPRESSED_SSL,\n  null, // skipping LONG_SELECTORS\n  CapabilityType.SHARED_SUBSCRIPTIONS,\n  CapabilityType.BR_REPLAY_ERRORID,\n  CapabilityType.AD_APP_ACK_FAILED,\n  CapabilityType.VAR_LEN_EXT_PARAM,\n];\n\nconst CLIENT_CAPS_VALUES = new Map([\n  [ClientCapabilityType.UNBIND_ACK, 0x80],\n  [ClientCapabilityType.BR_ERRORID, 0x40],\n  [ClientCapabilityType.PQ, 0x20],\n]);\n\n/**\n * @classdesc ClientCtrlMessage\n * Represents a ClientCtrl request or reply message\n * @private\n */\nclass ClientCtrlMessage extends BaseMessage {\n  constructor(messageType = 0) {\n    super(new SMFHeader(SMFProtocol.CLIENTCTRL, 1));\n\n    // Field: msgtype\n    this.msgType = messageType;\n\n    // Field: version\n    this.version = 1;\n  }\n\n  getP2PTopicValue() {\n    const p2pParam = this.getParameter(SMFClientCtrlParam.P2PTOPIC);\n    if (!p2pParam) {\n      return null;\n    }\n    return stripNullTerminate(p2pParam.getValue());\n  }\n\n  getVpnNameInUseValue() {\n    const vpnParam = this.getParameter(SMFClientCtrlParam.MSGVPNNAME);\n    if (!vpnParam) {\n      return null;\n    }\n    return stripNullTerminate(vpnParam.getValue());\n  }\n\n  getVridInUseValue() {\n    const vridParam = this.getParameter(SMFClientCtrlParam.VRIDNAME);\n    if (!vridParam) {\n      return null;\n    }\n    return stripNullTerminate(vridParam.getValue());\n  }\n\n  getUserIdValue() {\n    const userIdParam = this.getParameter(SMFClientCtrlParam.USERID);\n    if (!userIdParam) {\n      return null;\n    }\n    return stripNullTerminate(userIdParam.getValue());\n  }\n\n  getRouterCapabilities() {\n    let caps = [];\n\n    // Parse the composite capabilities parameter\n    let capParam = this.getParameter(SMFClientCtrlParam.ROUTER_CAPABILITIES);\n    if (capParam) {\n      caps = ClientCtrlMessage.prmParseCapabilitiesValue(capParam.getValue(), caps);\n    }\n\n    // Parse out the router status strings\n    capParam = this.getParameter(SMFClientCtrlParam.SOFTWAREVERSION);\n    if (capParam) {\n      caps[CapabilityType.PEER_SOFTWARE_VERSION] = stripNullTerminate(capParam.getValue());\n    }\n    capParam = this.getParameter(SMFClientCtrlParam.SOFTWAREDATE);\n    if (capParam) {\n      caps[CapabilityType.PEER_SOFTWARE_DATE] = stripNullTerminate(capParam.getValue());\n    }\n    capParam = this.getParameter(SMFClientCtrlParam.PLATFORM);\n    if (capParam) {\n      caps[CapabilityType.PEER_PLATFORM] = stripNullTerminate(capParam.getValue());\n    }\n    capParam = this.getParameter(SMFClientCtrlParam.PHYSICALROUTERNAME);\n    if (capParam) {\n      caps[CapabilityType.PEER_ROUTER_NAME] = stripNullTerminate(capParam.getValue());\n    }\n    return caps;\n  }\n\n\n  static prmGetDtoPriorityValue(dto) {\n    if (dto.local === undefined || dto.network === undefined) {\n      return false;\n    }\n    let twobyte = 0;\n    twobyte = setBits(twobyte, dto.local, 8, 8);\n    twobyte = setBits(twobyte, dto.network, 0, 8);\n    return int16ToStr(twobyte);\n  }\n\n  static prmParseDtoPriorityValue(strDtoPriority) {\n    const dto = {};\n    const twobyte = strToInt16(strDtoPriority.substr(0, 2));\n    dto.local = bits(twobyte, 8, 8);\n    dto.network = bits(twobyte, 0, 8);\n    return dto;\n  }\n\n  /*\n  strCapabilities: parameter value\n  caps: an already existing hash array of CapabilityType\n   */\n  static prmParseCapabilitiesValue(strCapabilities, capsIn) {\n    const caps = capsIn;\n    if (!(strCapabilities && caps)) {\n      return false;\n    }\n    const CT = CapabilityType;\n    let pos = 0;\n\n    // parse boolean capabilities\n    const boolCapCount = strToInt8(strCapabilities[pos]);\n    ++pos;\n\n    // The boolean caps are listed in order as in the documentation,\n    // that is from MSB to LSB for each caps byte.\n    let capsByte;\n    for (let bitIndex = 0; bitIndex < boolCapCount; ++bitIndex) {\n      const msbIndex = bitIndex & 0x7;\n      if (msbIndex === 0) { // Consume a byte\n        capsByte = strToInt8(strCapabilities[pos]);\n        ++pos;\n      }\n      const capsKey = BOOLEAN_CAPS_BITS[bitIndex];\n      if (!capsKey) continue; // We don't know about this cap\n      // so set caps bits from MSB (bit 7) to LSB (bit 0)\n      caps[capsKey] = !!bits(capsByte, 7 - msbIndex, 1);\n    }\n    // parse non-boolean capabilities\n    const sanityLoop = 500;\n    for (let i = 0; pos < strCapabilities.length && i < sanityLoop; ++i) {\n      const onebyte = strToInt8(strCapabilities[pos]); // type\n      pos++;\n      const capLen = strToInt32(strCapabilities.substr(pos, 4)) - 5;\n      pos += 4;\n      const strValue = strCapabilities.substr(pos, capLen);\n      pos += capLen;\n      switch (onebyte) {\n        case 0x00:\n          caps[CT.PEER_PORT_SPEED] = (strValue.length === 4) ? strToInt32(strValue) : 0;\n          break;\n        case 0x01:\n          caps[CT.PEER_PORT_TYPE] = (strValue.length === 1) ? strToInt8(strValue) : 0;\n          break;\n        case 0x02:\n          caps[CT.MAX_GUARANTEED_MSG_SIZE] = (strValue.length === 4) ? strToInt32(strValue) : 0;\n          break;\n        case 0x03:\n          caps[CT.MAX_DIRECT_MSG_SIZE] = (strValue.length === 4) ? strToInt32(strValue) : 0;\n          break;\n        default:\n          // NOOP (unknown cap)\n          break;\n      }\n    }\n    return caps;\n  }\n\n\n  static getLogin(sprop, compressedTLS, plaintextTLS, correlationTag) {\n    function clientCapsToStr(clientCapList) {\n      const highestCap = Math.max.apply(null, clientCapList) + 1;\n      let capBits = 0;\n      clientCapList.forEach((cap) => { capBits += CLIENT_CAPS_VALUES.get(cap); });\n      return int8ToStr(highestCap) + int8ToStr(capBits);\n    }\n    if (!(sprop instanceof SessionProperties)) {\n      return false;\n    }\n    const cc = new ClientCtrlMessage(SMFClientCtrlMessageType.LOGIN);\n    const smfHeader = cc._smfHeader;\n    const isClientCert = sprop.authenticationScheme === AuthenticationScheme.CLIENT_CERTIFICATE;\n    smfHeader.pm_corrtag = correlationTag;\n    if (sprop.password && !isClientCert) {\n      smfHeader.pm_password = sprop.password;\n    }\n    if (sprop.userName) {\n      smfHeader.pm_username = sprop.userName;\n    }\n    if (sprop.subscriberLocalPriority && sprop.subscriberNetworkPriority) {\n      cc.addParameter(new SMFParameter(0,\n                                       SMFClientCtrlParam.DELIVERTOONEPRIORITY,\n                                       ClientCtrlMessage.prmGetDtoPriorityValue({\n                                         local:   sprop.subscriberLocalPriority,\n                                         network: sprop.subscriberNetworkPriority })));\n    }\n    if (sprop.vpnName && sprop.vpnName.length > 0) {\n      cc.addParameter(new SMFParameter(1,\n                                       SMFClientCtrlParam.MSGVPNNAME,\n                                       nullTerminate(sprop.vpnName)));\n    }\n\n    if (sprop.applicationDescription && sprop.applicationDescription.length > 0) {\n      cc.addParameter(new SMFParameter(0,\n                                       SMFClientCtrlParam.CLIENTDESC,\n                                       nullTerminate(sprop.applicationDescription)));\n    }\n\n    if (sprop.userIdentification && sprop.userIdentification.length > 0) {\n      cc.addParameter(new SMFParameter(0,\n                                       SMFClientCtrlParam.USERID,\n                                       nullTerminate(sprop.userIdentification)));\n    }\n\n    if (sprop.authenticationScheme === AuthenticationScheme.OAUTH2) {\n      cc.addParameter(new SMFParameter(1,\n                                       SMFClientCtrlParam.AUTHENTICATION_SCHEME,\n                                       SMFClientCtrlAuthType.OAUTH2));\n\n      if (sprop.idToken) {\n        smfHeader.pm_oidc_id_token = nullTerminate(sprop.idToken);\n      }\n\n      if (sprop.accessToken) {\n        smfHeader.pm_oauth2_access_token = nullTerminate(sprop.accessToken);\n      }\n\n      if (sprop.issuerIdentifier) {\n        smfHeader.pm_oauth2_issuer_identifier = nullTerminate(sprop.issuerIdentifier);\n      }\n    }\n\n    cc.addParameter(new SMFParameter(0,\n                                     SMFClientCtrlParam.CLIENTNAME,\n                                     nullTerminate(sprop.clientName)));\n    cc.addParameter(new SMFParameter(0,\n                                     SMFClientCtrlParam.PLATFORM,\n                                     nullTerminate(`${Process.platform} - JS API (${Version.mode})`)));\n\n    if (sprop.noLocal) {\n      cc.addParameter(new SMFParameter(0,\n                                       SMFClientCtrlParam.NO_LOCAL,\n                                       '\\x01'));\n    }\n\n    if (isClientCert) {\n      cc.addParameter(new SMFParameter(1,\n                                       SMFClientCtrlParam.AUTHENTICATION_SCHEME,\n                                       SMFClientCtrlAuthType.CLIENT_CERTIFICATE));\n    }\n\n    cc.addParameter(new SMFParameter(0,\n                                     SMFClientCtrlParam.SOFTWAREDATE,\n                                     nullTerminate(Version.formattedDate)));\n    cc.addParameter(new SMFParameter(0,\n                                     SMFClientCtrlParam.SOFTWAREVERSION,\n                                     nullTerminate(Version.version)));\n\n    if (compressedTLS && plaintextTLS) {\n      LOG_TRACE('Adding SslDowngrade=1 to login.');\n      cc.addParameter(new SMFParameter(1,\n                                       SMFClientCtrlParam.SSL_DOWNGRADE,\n                                       '\\x01'));\n    } else if (compressedTLS) {\n      LOG_TRACE('Adding SslDowngrade=2 to login.');\n      cc.addParameter(new SMFParameter(1,\n                                       SMFClientCtrlParam.SSL_DOWNGRADE,\n                                       '\\x02'));\n    } else if (plaintextTLS) {\n      LOG_TRACE('Adding SslDowngrade=0 to login.');\n      cc.addParameter(new SMFParameter(1,\n                                       SMFClientCtrlParam.SSL_DOWNGRADE,\n                                       '\\x00'));\n    }\n    const clientCaps = clientCapsToStr([ClientCapabilityType.UNBIND_ACK,\n      ClientCapabilityType.BR_ERRORID, ClientCapabilityType.PQ]);\n    cc.addParameter(new SMFParameter(0,\n                                     SMFClientCtrlParam.CLIENT_CAPABILITIES,\n                                     clientCaps));\n                                     //'\\x02\\xc0'));\n                                     //'\\x01\\x80'));\n    const keepaliveVal = int32ToStr((sprop.keepAliveIntervalInMsecs) / 1000);\n    cc.addParameter(new SMFParameter(0,\n                                    SMFClientCtrlParam.KEEP_ALIVE_INTERVAL,\n                                    keepaliveVal));\n\n    return cc;\n  }\n\n  /**\n   * Get a CC update message.\n   *\n   * @param {MutableSessionProperty} mutableSessionProperty The property to update\n   * @param {String} newValue The new value for the property\n   * @param {String} correlationTag The correlation tag for the request\n   * @returns {ClientCtrlMessage} The new UPDATE message\n   *\n   * @private\n   */\n  static getUpdate(mutableSessionProperty, newValue, correlationTag) {\n    const cc = new ClientCtrlMessage(SMFClientCtrlMessageType.UPDATE);\n    const smfHeader = cc.smfHeader;\n    smfHeader.pm_corrtag = correlationTag;\n    if (mutableSessionProperty === MutableSessionProperty.CLIENT_DESCRIPTION) {\n      const appdesc = (newValue || '').toString().substr(0, 250);\n      cc.addParameter(new SMFParameter(0,\n                                       SMFClientCtrlParam.CLIENTDESC,\n                                       nullTerminate(appdesc)));\n    } else if (mutableSessionProperty === MutableSessionProperty.CLIENT_NAME) {\n      const error =\n        ClientCtrlMessage.validateClientName(\n          newValue,\n          errorMessage =>\n            new OperationError(`Invalid clientName: ${errorMessage}`,\n                               ErrorSubcode.PARAMETER_OUT_OF_RANGE));\n      if (error) {\n        throw error;\n      }\n      cc.addParameter(new SMFParameter(0,\n                                       SMFClientCtrlParam.CLIENTNAME,\n                                       nullTerminate(newValue)));\n    }\n    return cc;\n  }\n\n  static validateClientName(strName, exceptionCreator) {\n    const encodeResult = validateAndEncode(DestinationType.TOPIC, strName, exceptionCreator);\n    if (encodeResult.error) {\n      return encodeResult.error;\n    }\n    // Add 1: bytes includes terminator, 160 excludes terminator\n    if (encodeResult.bytes.length > 161) {\n      return exceptionCreator('Client Name too long (max length: 160).');\n    }\n    return null;\n  }\n}\n\n\nmodule.exports.ClientCtrlMessage = ClientCtrlMessage;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of user Class of Service (COS) levels. The COS is set\n * on a Message with {@link solace.Message#setUserCos}\n * The Class of Service has different semantics for direct and guaranteed messages.\n *\n * For messages published with {@link solace.MessageDeliveryModeType.DIRECT}, the\n * class of service selects the weighted round-robin delivery queue when the\n * message is forwarded to a consumer.  {@link solace.MessageUserCosType.COS1} are the\n * lowest priority messages and will use the Solace Message Router D-1 delivery queues.\n *\n * For messages published as guaranteed messages\n * ({@link solace.MessageDeliveryModeType.PERSISTENT} or\n * {@link solace.MessageDeliveryModeType.NON_PERSISTENT}), messages published\n * with {@link solace.MessageUserCosType.COS1} can be rejected by the Solace Message Router if\n * that message would cause any queue or topic-endpoint to exceed its configured\n * low-priority-max-msg-count.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MessageUserCosType = {\n  /**\n   * Direct Messages: Lowest priority, use Solace Message Router client D-1 queues for delivery.\n   *\n   * Guaranteed Messages: Messages can be rejected if the message would cause any\n   * queue or topic-endpoint to exceed its configured <i>low-priority-max-msg-count</i>.\n   * @type {Number}\n   */\n  COS1: 0,\n  /**\n   * Direct Messages: Medium priority, use Solace Message Router client D-2 queues for delivery.\n   *\n   * Guaranteed Messages: N/A (same as COS3)\n   * @type {Number}\n   */\n  COS2: 1,\n  /**\n   * Direct Messages: Highest priority, use Solace Message Router client D-3 queues for delivery.\n   *\n   * Guaranteed Messages: Messages are not rejected for exceeding <i>low-priority-max-msg-count</i>.\n   * Messages may still be rejected for other reasons such as Queue 'Spool Over Quota'.\n   * @type {Number}\n   */\n  COS3: 2,\n};\n\nmodule.exports.MessageUserCosType = Enum.new(MessageUserCosType);\n","const {\n  AbstractQueueDescriptor,\n  QueueDescriptor,\n  QueueDescriptorValidator,\n  QueueProperties,\n  QueuePropertiesValidator,\n  QueueType,\n} = require('solclient-queue');\nconst { APIPropertiesValidators } = require('solclient-util');\nconst { Check } = require('solclient-validate');\nconst { MessageConsumerAcknowledgeMode } = require('./message-consumer-acknowledge-modes');\nconst { OperationError, ErrorSubcode } = require('solclient-error');\nconst { ReplayStartLocation } = require('solclient-replaystart');\n\nconst {\n  validateInstance,\n  valBoolean,\n  valInstance,\n  valIsMember,\n  valNumber,\n  valRange,\n  valTopicStringOrEmpty,\n} = APIPropertiesValidators;\n\nfunction valTopicEndpointSubscription(typeDesc, instance) {\n  if (instance.queueDescriptor.getType() === QueueType.TOPIC_ENDPOINT) {\n    if (instance.queueDescriptor.isDurable() && !instance.createIfMissing) {\n      if (!instance.topicEndpointSubscription) {\n        throw new OperationError('topicEndpointSubscription must be set when queueDescriptor ' +\n                                'refers to a durable topic endpoint and not allowed to create.',\n                                ErrorSubcode.PARAMETER_CONFLICT);\n      }\n    }\n  } else if (instance.topicEndpointSubscription) {\n    // is QueueType.QUEUE\n    throw new OperationError('topicEndpointSubscription is set, but queueDescriptor ' +\n                              'refers to a queue that is not of type QueueType.TOPIC_ENDPOINT',\n                              ErrorSubcode.PARAMETER_CONFLICT);\n  }\n}\n\nconst MessageConsumerPropertiesValidator = {\n  validate(prefix, instance, rawProperties) {\n    if (Object.prototype.hasOwnProperty.call(rawProperties, 'transportAcknowledgeTimeoutInMsecs') &&\n        Object.prototype.hasOwnProperty.call(rawProperties, 'acknowledgeTimeoutInMsecs')) {\n      throw new OperationError(`${prefix} validation: transportAcknowledgeTimeoutInMsecs and acknowledgeTimeoutInMsecs are mutually exclusive`,\n                                ErrorSubcode.PARAMETER_CONFLICT);\n    }\n\n    if (Object.prototype.hasOwnProperty.call(rawProperties, 'transportAcknowledgeThresholdPercentage') &&\n        Object.prototype.hasOwnProperty.call(rawProperties, 'acknowledgeThreshold')) {\n      throw new OperationError(`${prefix} validation: transportAcknowledgeThresholdPercentage and acknowledgeThreshold are mutually exclusive`,\n          ErrorSubcode.PARAMETER_CONFLICT);\n    }\n\n\n    const v = validateInstance.bind(null, prefix, instance);\n    if (!(instance.queueDescriptor instanceof AbstractQueueDescriptor ||\n          instance.queueDescriptor instanceof QueueDescriptor)) {\n      throw new OperationError(`${prefix} validation: queue descriptor must be ` +\n                                'an AbstractQueueDescriptor or a QueueDescriptor',\n                                ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    QueueDescriptorValidator.validate(instance.queueDescriptor);\n\n    if (instance.queueProperties) {\n      if (instance.queueDescriptor.durable && !instance.createIfMissing) {\n        throw new OperationError(`${prefix} validation: queueProperties cannot be set unless ` +\n          'queueDescriptor refers to a temporary queue, or createIfMissing is set.',\n          ErrorSubcode.PARAMETER_CONFLICT);\n      }\n      v('queueProperties', [valInstance, QueueProperties, 'QueueProperties']);\n      QueuePropertiesValidator.validate(instance.queueProperties);\n      if (!instance.queueDescriptor.durable &&\n        Check.something(instance.queueProperties.accessType)) {\n        throw new OperationError(`${prefix} validation: queueProperties cannot specify accessType ` +\n                                 'in creation of a temporary queue',\n                                 ErrorSubcode.PARAMETER_CONFLICT);\n      }\n    }\n\n    // Validate TE subscription\n\n    if (instance.queueDescriptor.type === QueueType.TOPIC_ENDPOINT) {\n      // QueueType.TOPIC_ENDPOINT\n      if (instance.queueDescriptor.durable &&\n        !instance.createIfMissing &&\n        !instance.topicEndpointSubscription) {\n        throw new OperationError(`${prefix} validation: topicEndpointSubscription must be set for durable ` +\n          'topic endpoints unless creation is allowed.',\n          ErrorSubcode.PARAMETER_CONFLICT);\n      }\n    } else if (instance.topicEndpointSubscription) {\n      throw new OperationError(`${prefix} validation: topicEndpointSubscription cannot be set unless ` +\n        'descriptor.type is TOPIC_ENDPOINT',\n        ErrorSubcode.PARAMETER_CONFLICT);\n    }\n\n    v('connectTimeoutInMsecs', [valNumber], [valRange, 50, Number.MAX_VALUE]);\n    v('connectAttempts', [valNumber], [valRange, 1, Number.MAX_VALUE]);\n    v('topicEndpointSubscription', [valTopicEndpointSubscription], [valTopicStringOrEmpty]);\n\n    v('acknowledgeMode', [valIsMember, MessageConsumerAcknowledgeMode, 'MessageConsumerAcknowledgeMode']);\n    v('transportAcknowledgeTimeoutInMsecs', [valNumber], [valRange, 20, 1500]);\n    v('transportAcknowledgeThresholdPercentage', [valNumber], [valRange, 1, 75]);\n\n    v('activeIndicationEnabled', [valBoolean]);\n    v('noLocal', [valBoolean]);\n    v('windowSize', [valNumber], [valRange, 1, 255]);\n    v('reconnectIntervalInMsecs', [valNumber], [valRange, 50, Number.MAX_VALUE]);\n\n    if (instance.replayStartLocation &&\n      !(instance.replayStartLocation instanceof ReplayStartLocation)) {\n      throw new OperationError(`${prefix} validation: replayStartLocation must be ` +\n        'an instance of ReplayStartLocation',\n        ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n  },\n};\n\nmodule.exports.MessageConsumerPropertiesValidator = MessageConsumerPropertiesValidator;\n","const MessageLib = require('solclient-message');\nconst SessionLib = require('solclient-session');\nconst SMFLib = require('solclient-smf');\nconst StatType = require('solclient-stats');\nconst {\n  ErrorSubcode,\n  OperationError,\n} = require('solclient-error');\nconst {\n  LOG_TRACE,\n  LOG_DEBUG,\n  LOG_INFO,\n  LOG_WARN,\n} = require('solclient-log');\nconst {\n  SDTField,\n  SDTFieldType,\n  SDTStreamContainer,\n} = require('solclient-sdt');\nconst { CacheCBInfo } = require('./cache-cb-info');\nconst { CacheContext } = require('./cache-context');\nconst { CacheGetResult } = require('./cache-get-result');\nconst { CacheLiveDataAction } = require('./cache-live-data-actions');\nconst { CacheRequest } = require('./cache-request');\nconst { CacheRequestResult } = require('./cache-request-result');\nconst { CacheRequestType } = require('./cache-request-types');\nconst { CacheReturnCode } = require('./cache-return-codes');\nconst { CacheReturnSubcode } = require('./cache-return-subcodes');\nconst { CacheSessionProperties } = require('./cache-session-properties');\nconst { CacheSessionSubscribeInfo } = require('./cache-session-subscribe-info');\nconst { Destination,\n        Topic } = require('solclient-destination');\n\nconst { CACHE_REQUEST_PREFIX } = CacheContext;\n\nconst noOp = () => undefined;\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users. Users should obtain an instance from\n * {@link solace.Session#createCacheSession}</b>\n * <p>\n * A session for performing cache requests.\n *\n * Applications must use {@link solace.Session#createCacheSession} to construct this class.\n *\n * The supplied {@link solace.CacheSessionProperties} will be copied. Subsequent modifications\n * to the passed properties will not modify the session. The properties may be reused.\n *\n * @hideconstructor\n * @memberof solace\n */\nclass CacheSession {\n  /*\n   * @constructor\n   * @private\n   *\n   * @param {solace.CacheSessionProperties} props The properties for the cache session.\n   * @param {solace.Session} session The Session on which the CacheSession will issue\n   *  cache requests.\n   * @param {Object} privateInterface Private methods exposed to this CacheSession.\n   *\n   * @throws {solace.OperationError}\n   *  * if the parameters have an invalid type or value;\n   *    subcode {@link ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   */\n  constructor(props, session, privateInterface) {\n    CacheSession._validateProps(props);\n    const properties = new CacheSessionProperties(props.cacheName,\n                                                  props.maxAgeSec,\n                                                  props.maxMessages,\n                                                  props.timeoutMsec);\n    Object.assign(this,\n                  {\n                    _outstandingRequests:          {},\n                    _outstandingIDs:               {},\n                    _disposed:                     false,\n                    _nextMessageCallbackInfo:      null,\n                    _nextSessionEventCallbackInfo: null,\n                    _properties:                   properties,\n                    _session:                      session,\n                    _sessionIF:                    privateInterface,\n                  });\n    this._connectToSession(session);\n  }\n\n  /**\n   * @param {solace.Session} session The session to connect\n   * @private\n   */\n  _connectToSession(session) {\n    this._nextSessionEventCallbackInfo = session.getEventCBInfo();\n    this._nextMessageCallbackInfo = session.getMessageCBInfo();\n    session.setMessageCBInfo(new SessionLib.MessageRxCBInfo((_, message) => {\n      this._handleMessage(message);\n    }, this));\n    session.setEventCBInfo(this._createCompoundEventCB(this._nextSessionEventCallbackInfo));\n  }\n\n  /**\n   * Takes the session's existing event callback and sets it as the next delegate in a\n   * chain of responsibility. The next delegate could be the client application, or another\n   * cache session.\n   * @param {SessionEventCBInfo} nextDelegate The next event receiver in the chain\n   * @returns {SessionEventCBInfo} An event receiver that delegates to the supplied receiver\n   * @private\n   */\n  _createCompoundEventCB(nextDelegate) {\n    return new SessionLib.SessionEventCBInfo((session, sessionEvent, userObject, rfuObject) => {\n      this._handleSessionEvent(nextDelegate, session, sessionEvent, userObject, rfuObject);\n    }, null);\n  }\n\n  /**\n   * Modified chain of responsibility. Handles the event, then passes the event to the next\n   * delegate.\n   * @param {SessionEventCBInfo} nextDelegate The next delegate to notify\n   * @param {solace.Session} session The associated session\n   * @param {SessionEvent} sessionEvent The session event to dispatch\n   * @private\n   */\n  _handleSessionEvent(nextDelegate, session, sessionEvent /*, userObject, rfuObject */) {\n    const passEvent = this._processSessionEvent(session, sessionEvent);\n    if (!passEvent) {\n      return;\n    }\n    const cbUserObject = nextDelegate.userObject;\n    if (!cbUserObject) {\n      nextDelegate.sessionEventCBFunction(session, sessionEvent);\n    } else {\n      nextDelegate.sessionEventCBFunction(session, sessionEvent, cbUserObject);\n    }\n  }\n\n  /**\n   * @param {Message} message The message to forward\n   * @private\n   */\n  _sendToNextDelegate(message) {\n    const cbUserObject = this._nextMessageCallbackInfo.userObject;\n    if (!cbUserObject) {\n      this._nextMessageCallbackInfo.messageRxCBFunction(this._session, message);\n    } else {\n      this._nextMessageCallbackInfo.messageRxCBFunction(this._session, message, cbUserObject);\n    }\n  }\n\n  /**\n   * @param {solace.Session} session The associated session\n   * @param {SessionEvent} event The event to process\n   * @returns {Boolean} true if event should pass to next delegate\n   * @private\n   */\n  _processSessionEvent(session, event) {\n    switch (event.sessionEventCode) {\n      case SessionLib.SessionEventCode.SUBSCRIPTION_ERROR:\n      case SessionLib.SessionEventCode.SUBSCRIPTION_OK:\n        return this._checkSubscriptionStatus(event);\n      case SessionLib.SessionEventCode.DOWN_ERROR:\n        this.dispose();\n        return true;\n      default:\n        LOG_TRACE(`Unhandled session event: ${event.sessionEventCode}`);\n        return true;\n    }\n  }\n\n  /**\n   * @param {SessionEvent} event The event to check\n   * @returns {Boolean} `true` if event should pass to next delegate\n   * @private\n   */\n  _checkSubscriptionStatus(event) {\n    // Incremental checks for whether this is our subscription.\n    if ((event.correlationKey === null || event.correlationKey === undefined) ||\n        (!(event.correlationKey instanceof CacheSessionSubscribeInfo)) ||\n        (event.correlationKey.cacheSession !== this)) {\n      return true;\n    }\n    const request = this._getOutstandingRequest(event.correlationKey.correlationID);\n    if (!request) {\n      LOG_WARN(`No request found for subscription success on ${event.correlationKey.topic}`);\n      return true;\n    }\n    if (event.sessionEventCode === SessionLib.SessionEventCode.SUBSCRIPTION_OK) {\n      this._handleSubscriptionSuccess(request, event.correlationKey.topic);\n      return false;\n    }\n    this._handleSubscriptionError(request, event);\n    return false;\n  }\n\n  /**\n   * @param {CacheRequest} requestIn The cache on which to register success\n   * @param {Topic} topic The topic on which to issue the request.\n   * @private\n   */\n  _handleSubscriptionSuccess(requestIn /*, topic */) {\n    // Null out this field and check completion status.\n    const request = requestIn;\n    request.subscriptionWaiting = null;\n    this._startCacheRequest(request);\n  }\n\n  /**\n   * @param {CacheRequest} request The cache request on which to register failure\n   * @private\n   */\n  _handleSubscriptionError(request/*, event */) {\n    this._terminateRequest(request, CacheReturnCode.FAIL, CacheReturnSubcode.SUBSCRIPTION_ERROR);\n  }\n\n  /**\n   * @param {CacheRequest} request The cache request on which to check completion\n   * @private\n   */\n  _checkRequestCompletion(request) {\n    if (request.childRequests.length) {\n      // Not finished with spawned child requests.\n      LOG_DEBUG(`Awaiting termination of ${request.childRequests.length} children`);\n      return;\n    }\n    if (request.subscriptionWaiting) {\n      // Waiting for confirmation of subscription to a topic.\n      LOG_DEBUG('Awaiting subscription');\n      return;\n    }\n    if (request.timeoutHandle !== null && (!request.replyReceived)) {\n      LOG_DEBUG('Awaiting timeout');\n      return;\n    }\n    if (request.parentRequest) {\n      // We're no longer waiting for a child to complete.\n      const parent = request.parentRequest;\n      request.cancel();\n      this._unregisterRequest(request);\n      this._checkRequestCompletion(parent);\n      return;\n    }\n\n    // This is a parent request and it is done.\n    let code;\n    let subcode;\n    if (request.isSuspect) {\n      code = CacheReturnCode.INCOMPLETE;\n      subcode = CacheReturnSubcode.SUSPECT_DATA;\n    } else if (request.dataReceived) {\n      code = CacheReturnCode.OK;\n      if (request.liveDataFulfilled) {\n        subcode = CacheReturnSubcode.LIVE_DATA_FULFILL;\n      } else {\n        subcode = CacheReturnSubcode.REQUEST_COMPLETE;\n      }\n    } else if (request.replyReceived) {\n      code = CacheReturnCode.INCOMPLETE;\n      subcode = CacheReturnSubcode.NO_DATA;\n    } else {\n      throw new Error('Sanity: should never happen');\n    }\n    this._terminateRequest(request, code, subcode);\n  }\n\n  /**\n   * @param {CacheRequest} parentRequest The parent node for the new request\n   * @param {CacheGetResult} cacheGetResult The result of this request\n   * @private\n   */\n  _sendSeeOther(parentRequest, cacheGetResult) {\n    const clusterName = cacheGetResult.clusterNameStream.getNext().getValue();\n    // var root = parentRequest.getRootRequest();\n    LOG_DEBUG(`See Other for ${clusterName}. Sending child request`);\n    const childRequest = new CacheRequest(this,\n                                          CacheRequestType.GET_MSG_REQUEST,\n                                          parentRequest.requestID,\n                                          new CacheCBInfo(noOp, null),\n                                          parentRequest.liveDataAction,\n                                          parentRequest.topic,\n                                          clusterName);\n    // Add this request to its parent\n    parentRequest.addChild(childRequest);\n    // Start the request\n    this._registerRequest(childRequest);\n    childRequest.startRequestTimeout(CacheSession._handleCacheRequestTimeout,\n                                     this._properties.timeoutMsec);\n    this._startCacheRequest(childRequest, // request to send\n                            null, // no session ID\n                            null, // no specific instance target\n                            true); // don't return other clusters\n  }\n\n  /**\n   * @param {CacheRequest} parentRequest The parent node for the new request\n   * @param {CacheGetResult} cacheGetResult The result of this request\n   * @private\n   */\n  _sendGetNext(parentRequest, cacheGetResult) {\n    LOG_DEBUG('Cache result has more, sending GET_NEXT_MSG_REQUEST as child');\n    // This is how to trigger \"Invalid Session\":\n    //require(\"child_process\").execSync('sleep 11');\n    const nextRequest = new CacheRequest(this,\n                                         CacheRequestType.GET_NEXT_MSG_REQUEST,\n                                         parentRequest.requestID,\n                                         new CacheCBInfo(noOp, null),\n                                         parentRequest.liveDataAction,\n                                         parentRequest.topic,\n                                         parentRequest.cacheName);\n    // Set up parent-child relationship\n    parentRequest.addChild(nextRequest);\n    // Start the request\n    this._registerRequest(nextRequest);\n    nextRequest.startRequestTimeout(CacheSession._handleCacheRequestTimeout,\n                                    this._properties.timeoutMsec);\n    this._startCacheRequest(nextRequest, // request to send\n                            cacheGetResult.sessionID, // supplied session ID\n                            cacheGetResult.replyTo); // supplied cache instance target\n  }\n\n  /**\n   * @param {Message} message The message to inspect and handle\n   * @private\n   */\n  _handleMessage(message) {\n    // Determine if the message is associated with one of this session's requests\n    const correlationID = message.getCorrelationId();\n    const request = correlationID === null || correlationID === undefined\n      ? null\n      : this._outstandingRequests[correlationID];\n\n    // This could be live data on a relevant topic.  Check that.\n    if (!request) {\n      if (this._relevantLiveData(message)) {\n        this._sendToNextDelegate(message);\n      }\n      return;\n    }\n\n    // It's ours!\n    LOG_DEBUG(`Processing reply to ${request}`);\n    // bug 36404: We have a response. Cancel the timeout for this request.\n    request.clearRequestTimeout();\n    const streamField = message.getSdtContainer();\n    const stream = streamField && streamField.getValue();\n    if (!stream) {\n      LOG_INFO(\n        `Invalid message format for cache response: no SDT container (${\n        streamField}) or stream (${stream})`);\n      this._terminateRequest(request, CacheReturnCode.FAIL, CacheReturnSubcode.ERROR_RESPONSE);\n    }\n    // The session will never see this reply, so we need to update the stats\n    // from here.\n    this._incStat(StatType.RX_REPLY_MSG_RECVED);\n    request.replyReceived = true;\n\n    // If the request was fulfilled by live data, discard the reply and stop processing\n    // the response.\n    if (request.getRootRequest().liveDataFulfilled) {\n      this._incStat(StatType.CACHE_REQUEST_FULFILL_DISCARD_RESPONSE);\n      this._checkRequestCompletion(request);\n      return;\n    }\n\n    if (!stream) {\n      LOG_INFO('Invalid cache response did not fulfill request. Skipping response processing');\n      return;\n    }\n\n    try {\n      // Fill the result object with values from the result stream.\n      const result = new CacheGetResult();\n      result.readFromStream(stream);\n      result.replyTo = message.getReplyTo();\n      if (result.responseString) {\n        LOG_DEBUG(`Cluster response: ${result.responseString}`);\n      }\n        if (result.responseCode === 7 || result.responseString == \"Invalid Session\") {\n          LOG_INFO(`Cluster response indicates invalid session: ${result.responseString} code: ${result.responseCode}`);\n          this._terminateRequest(request, CacheReturnCode.FAIL, CacheReturnSubcode.INVALID_SESSION);\n        }\n      // Apply the isSuspect flag. Don't clear it if the result is already suspect.\n      request.isSuspect = request.isSuspect || result.isSuspect;\n      // Get any inner messages.\n      const messages = CacheSession._decodeMessageStream(request, result);\n      // Update statistics.\n      this._incStat(StatType.RX_CACHE_MSG, messages.length);\n      // If we have more results to come, send a get next request.\n      if (result.hasMore) {\n        this._sendGetNext(request, result);\n      }\n      // If we have more clusters to visit, send requests to those clusters.\n      if (result.clusterNameStream) {\n        LOG_DEBUG('Receiving cluster stream');\n        while (result.clusterNameStream.hasNext()) {\n          this._sendSeeOther(request, result);\n        }\n      }\n      // Forward any retrieved messages.\n      if (messages) {\n        messages.forEach((m) => {\n          this._sendToNextDelegate(m);\n        });\n      }\n      this._checkRequestCompletion(request);\n    } catch (exception) {\n      LOG_INFO(`Invalid message format for cache response: ${exception.stack}`);\n      this._terminateRequest(request, CacheReturnCode.FAIL, CacheReturnSubcode.ERROR_RESPONSE);\n    }\n  }\n\n  /**\n   * @param {Message} message The message to inspect and handle\n   * @returns {Boolean} `true` if the next delegate should handle this message\n   * @private\n   */\n  _relevantLiveData(message) {\n    // If the next message processor does not belong to a cache\n    // session, and this is a CRQ message, suppress it.\n    if (message.getCorrelationId() &&\n        message.getCorrelationId().startsWith(CACHE_REQUEST_PREFIX) &&\n        !(this._nextMessageCallbackInfo.userObject instanceof CacheSession)) {\n      LOG_WARN('DROP: Dropping CRQ reply due to no remaining Cache Session processors on message ' +\n               'callback chain');\n      this._incStat(StatType.RX_REPLY_MSG_DISCARD);\n      return false;\n    }\n    // Otherwise, assume the message should flow through.\n    // If all _performLiveDataAction calls return true, we return true;\n    return Object.keys(this._outstandingRequests).every(checkCID =>\n      this._performLiveDataAction(this._outstandingRequests[checkCID], message));\n  }\n\n  /**\n   * @param {CacheRequest} requestIn The cache request for which to perform the action\n   * @param {Message} message The message to process on the request\n   * @returns {Boolean} true if message should flow through after action.\n   * @private\n   */\n  _performLiveDataAction(requestIn, message) {\n    const request = requestIn;\n    request.dataReceived = true;\n    switch (request.liveDataAction) {\n      case CacheLiveDataAction.QUEUE:\n        request.queuedLiveData.push(message);\n        return false;\n\n      case CacheLiveDataAction.FULFILL:\n        if (!request.liveDataFulfilled) {\n          this._fulfillRequest(request);\n        }\n        return true;\n\n      default:\n        return true;\n    }\n  }\n\n  /**\n   * @param {CacheRequest} requestIn The request to fulfill\n   * @private\n   */\n  _fulfillRequest(requestIn) {\n    const request = requestIn;\n    request.liveDataFulfilled = true;\n    this._trackCompletionStats(CacheReturnCode.OK, CacheReturnSubcode.LIVE_DATA_FULFILL);\n    // We have more work to do here -- we need to return the live data first.\n    // Schedule the notification for later.\n    setTimeout(() => {\n      CacheSession._notifyCallback(request,\n                                   CacheReturnCode.OK,\n                                   CacheReturnSubcode.LIVE_DATA_FULFILL,\n                                   request.getTopic(),\n                                   null);\n    }, 0);\n  }\n\n  /**\n   * Disposes the session.  No cache requests will be sent by this CacheSession after it is\n   * _disposed.\n   *\n   * Any subsequent operations on the session will throw {OperationError}.\n   *\n   * Any pending operations will immediately terminate, returning\n   *   * {@link solace.CacheRequestResult}\n   *     * #returnCode === {@link solace.CacheReturnCode.INCOMPLETE}\n   *     * #subcode === {@link solace.CacheReturnSubcode.CACHE_SESSION_DISPOSED}\n   * @throws {solace.OperationError} if the CacheSession is already _disposed.\n   */\n  dispose() {\n    const toTerminate = Object.keys(this._outstandingRequests)\n      .map(correlationID => this._outstandingRequests[correlationID])\n      .filter(request => request instanceof CacheRequest);\n    toTerminate.forEach((request) => {\n      this._terminateRequest(request,\n                             CacheReturnCode.INCOMPLETE,\n                             CacheReturnSubcode.CACHE_SESSION_DISPOSED);\n    });\n    this._outstandingRequests = [];\n    // Restore original listeners\n    this._session.setEventCBInfo(this._nextSessionEventCallbackInfo);\n    this._session.setMessageCBInfo(this._nextMessageCallbackInfo);\n    // Set _disposed\n    this._disposed = true;\n  }\n\n  /**\n   * Gets the cache session properties.\n   *\n   * @returns {solace.CacheSessionProperties} The properties for the session.\n   * @throws {solace.OperationError} if the CacheSession is disposed.\n   */\n  getProperties() {\n    return this._properties;\n  }\n\n  /**\n   * Issues an asynchronous cache request. The result of the request will be returned via the\n   * listener. Messages returned as a result of issuing the request will be returned to the\n   * application via the {@link solace.MessageRxCBInfo} associated with this\n   * {@link solace.CacheSession}'s {@link solace.Session}\n   *\n   * @param {Number} requestID The application-assigned ID number for the request.\n   * @param {solace.Destination} topic The topic destination for which the cache request will be\n   *    made.\n   * @param {Boolean} subscribe If true, the session will subscribe to the given {Topic}, if it is\n   * not already subscribed, before performing the cache request.\n   * @param {solace.CacheLiveDataAction} liveDataAction The action to perform when the\n   *    {@link solace.CacheSession} receives live data on the given topic.\n   * @param {solace.CacheCBInfo} cbInfo Callback info for the cache request.\n   *\n   * @throws {solace.OperationError} In the following cases:\n   * * If the CacheSession is disposed.\n   *    Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}\n   * * If one or more parameters were invalid.\n   *    Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}\n   * * If the supplied topic and live data action cannot be combined.\n   *    Subcode: {@link solace.ErrorSubcode.PARAMETER_CONFLICT}\n   * * If the supplied topic or live data action cannot be used given the current outstanding\n   *    requests.\n   *    Subcode: {@link solace.ErrorSubcode.PARAMETER_CONFLICT}\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   */\n  sendCacheRequest(requestID, topic, subscribe, liveDataAction, cbInfo) {\n    if (arguments.length !== 5) {\n      throw new OperationError(`sendCacheRequest() invoked with an illegal argument count of ${\n        arguments.length}`);\n    }\n    if (typeof subscribe !== 'boolean') {\n      throw new OperationError(\n        `Invalid subscribe flag argument, should be a boolean but was ${typeof subscribe}`);\n    }\n    if (typeof requestID !== 'number' || Number.isNaN(requestID)) {\n      throw new OperationError('Invalid requestID', ErrorSubcode.PARAMETER_INVALID_TYPE, null);\n    }\n    if (this._outstandingIDs[requestID]) {\n      throw new OperationError('Request already in progress with this requestID');\n    }\n    if (!(topic instanceof Destination)) {\n      throw new OperationError('Invalid topic', ErrorSubcode.PARAMETER_INVALID_TYPE, (typeof topic));\n    }\n    topic.validate();\n    if (!(liveDataAction === CacheLiveDataAction.FLOW_THRU || liveDataAction ===\n        CacheLiveDataAction.FULFILL || liveDataAction === CacheLiveDataAction.QUEUE)) {\n      throw new OperationError('Invalid live data action', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if (topic.isWildcarded() && liveDataAction !== CacheLiveDataAction.FLOW_THRU) {\n      throw new OperationError('Wildcarded topic not supported for this live data action',\n        ErrorSubcode.PARAMETER_CONFLICT);\n    }\n    if (!(cbInfo instanceof CacheCBInfo)) {\n      throw new OperationError('Callback info was not an instance of CacheCBInfo');\n    }\n    if (this._disposed) {\n      CacheSession._notifyCallbackError(cbInfo, requestID, CacheReturnCode.FAIL,\n                                        CacheReturnSubcode.CACHE_SESSION_DISPOSED, topic,\n                                        'Cache request failed: the cache session is disposed.');\n      return;\n    }\n    if (this._session._disposed) {\n      CacheSession._notifyCallbackError(cbInfo, requestID, CacheReturnCode.FAIL,\n                                        CacheReturnSubcode.INVALID_SESSION, topic,\n                                        'Cache request failed: the session is disposed.');\n      return;\n    }\n\n    const request = new CacheRequest(this,\n      CacheRequestType.GET_MSG_REQUEST,\n      requestID,\n      cbInfo,\n      liveDataAction,\n      topic,\n      this._properties.cacheName);\n\n    const matchingRequestKeys = Object.keys(this._outstandingRequests).filter(key =>\n      this._outstandingRequests[key].topic.getName() === topic.getName());\n\n    if (matchingRequestKeys.length) {\n      // Topic name matches mean a conflict unless both requests are FLOW_THRU\n      const conflictKeys = (\n        liveDataAction !== CacheLiveDataAction.FLOW_THRU\n          ? matchingRequestKeys\n          : matchingRequestKeys.filter(k =>\n            this._outstandingRequests[k].liveDataAction !== CacheLiveDataAction.FLOW_THRU));\n      if (conflictKeys.length) {\n        const conflictRequest = this._outstandingRequests[conflictKeys[0]];\n        LOG_WARN(`Existing request ${conflictRequest} conflicts. Rejecting request ${request}`);\n         // Register this request so that it is not dismissed as an orphan.\n        this._registerRequest(request);\n        this._terminateRequest(request,\n                               CacheReturnCode.FAIL,\n                               CacheReturnSubcode.REQUEST_ALREADY_IN_PROGRESS);\n        return;\n      }\n    }\n\n    this._registerRequest(request);\n    request.startRequestTimeout(CacheSession._handleCacheRequestTimeout,\n                                this._properties.timeoutMsec);\n    if (subscribe) {\n      const waitingForSubscribeInfo = new CacheSessionSubscribeInfo(request.correlationID, topic,\n        this);\n      request._subscriptionWaiting = waitingForSubscribeInfo;\n      this._session.subscribe(topic, true, waitingForSubscribeInfo);\n      return;\n    }\n    this._startCacheRequest(request);\n  }\n\n  /**\n   * @param {solace.Session} session The session associated with the request\n   * @param {SessionEvent} sessionEvent The session event\n   * @param {CacheRequest} userObject The user-specified context object\n   * @private\n   */\n  _handleCacheRequestFailed(session, sessionEvent, userObject /*, rfuObject */) {\n    this._terminateRequest(userObject.getRequestID(),\n                           CacheReturnCode.FAIL,\n                           CacheReturnSubcode.ERROR_RESPONSE);\n  }\n\n  /**\n   * @param {CacheRequest} request The new request to register\n   * @private\n   */\n  _registerRequest(request) {\n    this._outstandingRequests[request.correlationID] = request;\n    if (!request.parentRequest) {\n      this._outstandingIDs[request.requestID] = request;\n    }\n  }\n\n  /**\n   * @param {Number} correlationID The ID of an existing request\n   * @returns {CacheRequest} The existing request with the given ID\n   * @private\n   */\n  _getOutstandingRequest(correlationID) {\n    return this._outstandingRequests[correlationID];\n  }\n\n  /**\n   *\n   * @param {CacheRequest} request The request to start\n   * @param {?Number} sessionID Only when returned from a cache instance as part of a\n   * previous message\n   * @param {?Topic} destination Only when required by a cache reply\n   * @param {?Boolean} suppressClusters True when other clusters should be excluded from\n   * the response, as in a request resulting from a \"see other\"\n   * @private\n   */\n  _startCacheRequest(request, sessionID, destination, suppressClusters) {\n    const message = new MessageLib.Message();\n\n    // Prepare message\n    message.setCorrelationId(request.correlationID);\n    if (destination) {\n      message.setDestination(destination);\n    } else {\n      message.setDestination(\n        Topic.createFromName(this._properties.cachePrefix + request.cacheName));\n    }\n    message.setReplyTo(Topic.createFromName(this._session.getSessionProperties().p2pInboxInUse));\n    message.setDeliverToOne(request.cacheMessageType === CacheRequestType.GET_MSG_REQUEST);\n\n    // Prepare stream container\n    const stream = new SDTStreamContainer();\n    stream.addField(SDTFieldType.UINT32, request.cacheMessageType);\n    stream.addField(SDTFieldType.UINT32, CacheRequest.VERSION);\n    stream.addField(SDTFieldType.STRING, request.topic.getName());\n    stream.addField(SDTFieldType.UINT32, CacheRequest.REPLY_SIZE_LIMIT);\n\n    if (typeof sessionID === 'number') {\n      LOG_DEBUG(`Including session ID: ${sessionID}`);\n      stream.addField(SDTFieldType.UINT32, sessionID);\n    }\n\n    stream.addField(SDTFieldType.UINT32, this._properties.maxMessages);\n    stream.addField(SDTFieldType.UINT32, this._properties.maxAgeSec);\n    if (request.cacheMessageType === CacheRequestType.GET_MSG_REQUEST) {\n      stream.addField(SDTFieldType.BOOL,\n                      this._properties.includeOtherClusters && (!suppressClusters));\n    }\n\n    stream.addField(SDTFieldType.BOOL, false); // includeTimestamps, 6.17.1\n    if (request.cacheMessageType === CacheRequestType.GET_MSG_REQUEST) {\n      stream.addField(SDTFieldType.UINT32, Math.round(this._properties.timeoutMsec / 1000));\n    }\n\n    // Load stream container\n    message.setSdtContainer(SDTField.create(SDTFieldType.STREAM, stream));\n    try {\n      LOG_DEBUG(`Sending ${request}`);\n      this._session.send(message);\n\n      if (!request.parentRequest) { // Don't count child requests in CACHE_REQUEST_SENT total\n        this._incStat(StatType.CACHE_REQUEST_SENT);\n      }\n    } catch (e) {\n      LOG_INFO(`Failed to send request: ${e.message}`);\n      this._terminateRequest(request, CacheReturnCode.FAIL, CacheReturnSubcode.ERROR_RESPONSE, e);\n    }\n  }\n\n  /**\n   * Increments a stat.\n   * @param  {String} statType The stat to increment\n   * @param  {Number} value    The amount by which to increment the state\n   * @private\n   */\n  _incStat(statType, value) {\n    if (!this._session) {\n      LOG_DEBUG(\"Can't log stat: session is disposed\");\n      return;\n    }\n    if (!this._sessionIF) {\n      LOG_INFO(\"Can't log stat: session statistics not available\");\n      return;\n    }\n    this._sessionIF.incStat(statType, value);\n  }\n\n  /**\n   * Unregisters the given request.\n   * @param  {CacheRequest} request The request to unreguster\n   * @private\n   */\n  _unregisterRequest(request) {\n    delete this._outstandingRequests[request.correlationID];\n    delete this._outstandingIDs[request.requestID];\n  }\n\n  /**\n   * @param {CacheReturnCode} returnCode The return code for this completion\n   * @param {CacheReturnSubcode} subcode The subcode for this completion\n   * @private\n   */\n  _trackCompletionStats(returnCode, subcode) {\n    switch (returnCode) {\n      case CacheReturnCode.OK:\n        this._incStat(StatType.CACHE_REQUEST_OK_RESPONSE);\n        if (subcode === CacheReturnSubcode.LIVE_DATA_FULFILL) {\n          this._incStat(StatType.CACHE_REQUEST_LIVE_DATA_FULFILL);\n        }\n        break;\n      case CacheReturnCode.INCOMPLETE:\n        this._incStat(StatType.CACHE_REQUEST_INCOMPLETE_RESPONSE);\n        break;\n      case CacheReturnCode.FAIL:\n        this._incStat(StatType.CACHE_REQUEST_FAIL_RESPONSE);\n        break;\n      default:\n        throw new Error('Sanity: no return code supplied');\n    }\n  }\n\n  /**\n   * @param {CacheRequest} requestIn The request to terminate\n   * @param {CacheReturnCode} returnCode The return code for this operation\n   * @param {CacheReturnSubcode} subcode The subcode for this operation\n   * @param {Error} error Any error associated with this operation\n   * @private\n   */\n  _terminateRequest(requestIn, returnCode, subcode, error) {\n    const request = requestIn.getRootRequest();\n    if (!this._outstandingRequests[request.correlationID]) {\n      // Request is unknown or was previously terminated\n      return;\n    }\n    const cbInfo = request.cbInfo;\n    if (!cbInfo) {\n      LOG_WARN(`No callback info provided for ${request}. Cannot notify`);\n      return; // Cannot continue\n    }\n    const callback = cbInfo.getCallback();\n    if (!callback) {\n      LOG_WARN(`No callback provided for ${request}. Cannot notify`);\n      return; // Cannot continue\n    }\n    const topic = request.getTopic();\n    if (!topic) {\n      LOG_WARN(`No topic provided for ${request}`);\n    }\n    request.queuedLiveData.forEach(data => this._sendToNextDelegate(data));\n\n    // Unregister before callback so that the client application can treat the request ID\n    // as \"freed\" and reuse it\n    request.cancel();\n    this._unregisterRequest(request);\n\n    if (!request.liveDataFulfilled) {\n      // All of this has already been done on fulfill.\n      this._trackCompletionStats(returnCode, subcode);\n      CacheSession._notifyCallback(request, returnCode, subcode, topic, error);\n    }\n  }\n\n  /**\n   * @param {CacheRequest} requestIn The request with a result to decode\n   * @param {CacheGetResult} result The result to decode\n   * @returns {Array.<Message>} The messages contained in the result\n   * @private\n   */\n  static _decodeMessageStream(requestIn, result) {\n    if (!result.messageStream) {\n      return [];\n    }\n\n    LOG_DEBUG('Receiving messages');\n    const messages = [];\n    const request = requestIn;\n    while (result.messageStream.hasNext()) {\n      request.dataReceived = true;\n      const data = result.messageStream.getNext().getValue();\n      const innerMessage = SMFLib.Codec.Decode.decodeCompoundMessage(data, 0);\n      if (!innerMessage) {\n        continue;\n      }\n      const cacheStatus = result.isSuspect\n        ? MessageLib.MessageCacheStatus.SUSPECT\n        : MessageLib.MessageCacheStatus.CACHED;\n      innerMessage._setCacheStatus(cacheStatus);\n      innerMessage._setCacheRequestID(request.requestID);\n      messages.push(innerMessage);\n    }\n    LOG_DEBUG(`${messages.length} cached messages received`);\n    return messages;\n  }\n\n  /**\n   * Closure call context; `this` will be redefined\n   * @param {CacheRequest} cacheRequest The request that timed out\n   * @private\n   */\n  static _handleCacheRequestTimeout(cacheRequest) {\n    const context = cacheRequest.cacheSession;\n    if (!context._getOutstandingRequest(cacheRequest.correlationID)) {\n      LOG_INFO(`Timeout for ${cacheRequest} was not unregistered. Ignoring`);\n      // already completed\n      return;\n    }\n\n    // bug 36404: Cache request timeout is to be interpreted as timeout per session request-reply,\n    // not timeout per cache request-reply.\n    // Implementation: Timeouts on parent requests are cancelled when a child request is spawned.\n    // Timeouts on child requests cause the root request to fail.\n    LOG_INFO(`Request ${cacheRequest} timed out`);\n    context._terminateRequest(cacheRequest.getRootRequest(), CacheReturnCode.INCOMPLETE,\n                              CacheReturnSubcode.REQUEST_TIMEOUT);\n  }\n\n\n  /**\n   * @param {CacheRequest} request The request that is notifying\n   * @param {CacheReturnCode} returnCode The return code for the notification\n   * @param {CacheReturnSubcode} subcode The subcode for the notification\n   * @param {Destination} topic The topic associated with the notification\n   * @param {Error} error Any error associated with the notification\n   * @private\n   */\n  static _notifyCallback(request, returnCode, subcode, topic, error) {\n    const cbInfo = request.cbInfo;\n    const callback = cbInfo.getCallback();\n    callback(request.requestID,\n             new CacheRequestResult(returnCode, subcode, topic, error),\n             cbInfo.getUserObject());\n  }\n\n  /**\n   * @param {solace.CacheCBInfo} cbInfo Callback info for the cache request.\n   * @param {Number} requestID The application-assigned ID number for the request\n   * @param {CacheReturnCode} returnCode The return code for the notification\n   * @param {CacheReturnSubcode} subcode The subcode for the notification\n   * @param {Destination} topic The topic associated with the notification\n   * @param {Error} error Any error associated with the notification\n   * @private\n   */\n  static _notifyCallbackError(cbInfo, requestID, returnCode, subcode, topic, error) {\n    const callback = cbInfo.getCallback();\n    callback(requestID,\n             new CacheRequestResult(returnCode, subcode, topic, error),\n             cbInfo.getUserObject());\n  }\n\n  /**\n   * Validates the cache session properties.\n   * @param {solace.CacheSessionProperties} props The properties to validate\n   * @private\n   */\n  static _validateProps(props) {\n    if ((typeof (props.cacheName) !== 'string')) {\n      throw new OperationError('Invalid parameter type for cacheName', ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    // Create from name will throw if the cacheName is invalid.  This performs more checking than\n    // the legacy API did, but I think it is all justified as we shouldn't be able to use anything\n    // that would be rejected here as a cacheName.\n    if (Topic.createFromName(props.cacheName).isWildcarded()) {\n      throw new OperationError(\n        `Invalid cacheName '${props.cacheName}'. The cacheName cannot be wildcarded`,\n        ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if ((typeof (props.maxAgeSec) !== 'number')) {\n      throw new OperationError('Invalid parameter type for maxAgeSec', ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    if (props.maxAgeSec < 0) {\n      throw new OperationError('Invalid value for maxAgeSec; must be >= 0', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if ((typeof (props.maxMessages) !== 'number')) {\n      throw new OperationError('Invalid parameter type for maxMessages', ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    if (props.maxMessages < 0) {\n      throw new OperationError('Invalid value for maxMessages; must be >= 0', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if ((typeof (props.timeoutMsec) !== 'number')) {\n      throw new OperationError('Invalid parameter type for timeoutMsec', ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    if (props.timeoutMsec < 3000) {\n      throw new OperationError('Invalid value for timeoutMsec; must be >= 3000', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n  }\n\n}\n\nmodule.exports.CacheSession = CacheSession;\n","/**\n * This callback is called by a cache session when a cache request\n * completes.\n *\n * @callback solace.CacheCBInfo.cacheRequestCallback\n * @function\n * @param {Number} requestID The ID of the request on which the event is notified.\n * @param {solace.CacheRequestResult} result The result of the cache request.\n * @param {Object} userObject The user object provided.\n */\n\n\n/**\n * @classdesc\n * Encapsulates a {@link solace.CacheSession}'s request listener callback function and\n * optional application-specified context object.\n *\n * Instances of this class are required as a parameter to\n * {@link solace.CacheSession#sendCacheRequest} when creating a CacheSession request.\n *\n * @memberof solace\n */\nclass CacheCBInfo {\n\n  /**\n   * Creates an instance of CacheCBInfo using the provided callback and user context object.\n   * @param {solace.CacheCBInfo.cacheRequestCallback} cacheCBFunction The callback to be invoked.\n   * @param {Object} userObject A context object to be returned with the callback.\n   */\n  constructor(cacheCBFunction, userObject) {\n    /**\n     * The function that will be called by the cache session when a request\n     * completes.\n     * @type {solace.CacheCBInfo.cacheRequestCallback}\n     */\n    this.cacheCBFunction = cacheCBFunction;\n\n    /**\n     * The user context object that will be supplied to the callback function\n     * when the cache request completes.\n     * @type {object}\n     */\n    this.userObject = userObject;\n  }\n\n  /**\n   * @returns {solace.CacheCBInfo.cacheRequestCallback} The callback function\n   * @private\n   */\n  getCallback() {\n    return this.cacheCBFunction;\n  }\n\n  /**\n   * @returns {*} The user context object, if any\n   * @private\n   */\n  getUserObject() {\n    return this.userObject;\n  }\n\n}\n\nmodule.exports.CacheCBInfo = CacheCBInfo;\n","const zlib = require('zlib');\nconst { ErrorSubcode } = require('solclient-error');\nconst { Hex } = require('solclient-convert');\nconst { LOG_TRACE, LOG_DEBUG, LOG_INFO, LOG_WARN } = require('solclient-log');\nconst { TransportBase } = require('../transport-base');\nconst { TransportError } = require('../transport-error');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionEvent } = require('../transport-session-event');\nconst { TransportSessionEventCode } = require('../transport-session-event-codes');\nconst { TransportSessionState } = require('../transport-session-states');\n\nconst {\n  formatHexString,\n} = Hex;\n\n/**\n * Modular transport layer performing zlib compression.\n * Requires an underlying transport, can be plaintext or TLS, connected or not.\n * Uses the nodejs zlib module which in turn uses the libuv threadpool in nodejs.\n * The end user may need to increase threadpool size.\n * https://nodejs.org/api/zlib.html#zlib_threadpool_usage\n *\n * @private\n */\nclass CompressedTransport extends TransportBase {\n\n  constructor(eventCB, client, props) {\n    // instanitate instance properties defined in TransportBase\n    super('tcp://x', eventCB, client, props);\n\n    /**\n     * @private\n     * @type {TransportClientStats}\n     */\n    this._clientstats = null;\n    this._underlyingTransport = null;\n\n    /**\n     * Maximum amount of send data than can be queued.\n     * NodeJS socket.write accepts all writes, growing a\n     * user space buffer indefinitely.\n     * The TCP transport (same as WS transport)\n     * manages the size of that buffer to stay below this limit.\n     * @private\n     * @type {Number}\n     */\n    this._sendBufferMaxSize = props.sendBufferMaxSize;\n\n    /*\n     * When true, the upper layer was told NO_SPACE and must be notified\n     * of the next \"drained\" event.\n     * @private\n     * @type {Boolean}\n     */\n    this._waitForSocketDrain = false;\n    this._waitForCompressorDrain = false;\n\n    /*\n     * One-shot flush callback.\n     * Set on flush(), ran and cleared on socket drain event.\n     * @private\n     */\n    this._flushCallback = null;\n\n    /**\n     * Flag to keep track of socket drained state:\n     * Set to false when socket.write returns false,\n     * (indicating user-space buffering)\n     * Set to true on socket drain events.\n     * (indicating the user space buffer has flushed to the OS.)\n     * @type {Boolean}\n     * @private\n     */\n    this._socketDrained = true;\n    this._compressorDrained = true;\n    this._interimBuffer = [];\n\n    /**\n     * @type {TransportSessionState}\n     * @private\n     */\n    this._state = TransportSessionState.DOWN;\n\n    /**\n     * Save the Event in the onError listener\n     * Use it in onClose to populate the event.\n     * (Tcp socket calls onError with the error then onClose.\n     * WS socket calls only onClose and passes the error directly.)\n     * @private\n     * @type {?Error}\n     */\n    this._socketError = null;\n\n    /**\n     * @type {?string}\n     * @private\n     */\n    this._sessionId = new Date().getTime();\n\n    // Some whitebox tests expect a transport->transportSession nesting.\n    this._transportSession = this;\n\n    this._props.transportProtocol = null;\n\n    this._compressor = null;\n    this._decompressor = null;\n\n    this._compressionLevel = props.compressionLevel;\n  }\n\n  /**\n   * @override\n   */\n  getClientStats() {\n    return this._clientstats;\n  }\n\n  setClientStats(value) {\n    this._clientstats = value;\n  }\n\n  setUnderlyingTransport(newUnderlyingTransoprt) {\n    this._underlyingTransport = newUnderlyingTransoprt;\n  }\n\n  // Underlying transport callback.\n  rxDataBuffer(data) {\n    // We do not collect Rx stats.\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_DEBUG('TcpTransportCompressedSession stray rxDataBuffer, ignoring.');\n      return;\n    }\n    this._decompressor.write(data);\n    this._decompressor.flush();\n  }\n\n  /**\n   * Decompressor callback.\n   * @private\n   * @param {Buffer} data the data\n   */\n  onData(data) {\n    // We do not collect Rx stats.\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_DEBUG('TcpTransportSession stray onData, ignoring.');\n      return;\n    }\n    if (this._client) {\n      this._client.rxDataBuffer(data);\n    }\n  }\n\n  /**\n   * Underlying transport callback for SEND_ERROR\n   * @private\n   * @param {TransportSessionEvent} transportEvent the error\n   */\n  onError(transportEvent) {\n    // Need new state for \"waiting for decompressor flush after error\"?\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_TRACE('Tcp transport is being destroyed, ignore error');\n      return;\n    }\n    this._state = TransportSessionState.WAITING_FOR_DESTROY;\n\n    const onErrorStage2 = () => {\n      if (this._eventCB) {\n        LOG_TRACE('Decompressor flush returned, passing error to eventCB.');\n        this._eventCB(transportEvent);\n      } else {\n        LOG_TRACE('Decompressor flush returned, but eventCB already cleared.');\n      }\n    };\n\n    LOG_TRACE('Flushing decompressor on socket error.');\n    this._decompressor.flush(zlib.Z_SYNC_FLUSH, onErrorStage2);\n  }\n\n  /**\n   * Treat any zlib error the same as a socket error,\n   * plus close the socket.\n   * @private\n   * @param {Error} error the error\n   */\n  onZlibError(error) {\n    this._socketError = error;\n    this._underlyingTransport.destroy(`Connection closed by zlib error. Message:${error}`,\n                                      ErrorSubcode.COMMUNICATION_ERROR);\n  }\n  /**\n   * underlying transport callback for DESTROYED_NOTICE.\n   * @private\n   * @param {TransportSessionEvent} transportEvent from lower layer\n   */\n  onClose(transportEvent) {\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      this._destroy(transportEvent);\n    } else {\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      LOG_TRACE('Flushing decompressor on socket close.');\n      const stage2destroy = () => this._destroy(transportEvent);\n      this._decompressor.flush(zlib.Z_SYNC_FLUSH, stage2destroy);\n    }\n  }\n\n  /**\n   * underlying transport callback for UP_NOTICE.\n   * @private\n   * @param {TransportSessionEvent} transportEvent from lower layer\n   */\n  onOpen(transportEvent) {\n    if (this._state !== TransportSessionState.WAITING_FOR_CREATE) {\n      LOG_INFO(`compressor stray onOpen when in state ${this._state}, ignoring.`);\n      return;\n    }\n    this._state = TransportSessionState.SESSION_UP;\n      // Send the event to the application letting it know that the session is up\n    this._eventCB(transportEvent);\n  }\n\n  /**\n   * Establish underlying transport.\n   * @override\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  connect() {\n    LOG_TRACE('Initializing compressed transport');\n    let rc = TransportReturnCode.OK;\n    if (this._state !== TransportSessionState.DOWN) {\n      LOG_INFO(`Invalid state for operation: ${TransportSessionState.nameOf(this._state)}`);\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n    this._state = TransportSessionState.WAITING_FOR_CREATE;\n    if (this._underlyingTransport._state === TransportSessionState.DOWN) {\n      rc = this._underlyingTransport.connect();\n    } else {\n      this._state = TransportSessionState.SESSION_UP;\n    }\n    try {\n      // initialize compressor, decompressor.\n      const options = {\n        highWaterMark: this._sendBufferMaxSize,\n        level:         this._compressionLevel,\n        flush:         zlib.Z_SYNC_FLUSH,\n      };\n      this._compressor =\n        zlib.createDeflateRaw(options);\n      this._decompressor = zlib.createInflateRaw({ flush: zlib.Z_SYNC_FLUSH });\n\n      this._decompressor.on('data', this.onData.bind(this));\n      this._decompressor.on('error', this.onZlibError.bind(this));\n      this._compressor.on('error', this.onZlibError.bind(this));\n      this._compressor.on('data', this.sendCompressed.bind(this));\n      this._compressor.on('drain', this.onCompressorDrain.bind(this));\n    } catch (error) {\n      LOG_DEBUG(`Error connecting: ${error}`);\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      throw new TransportError(`Could not create Tcp zlib layer: ${error.message}`,\n        error.subcode || ErrorSubcode.CONNECTION_ERROR);\n    }\n    return rc;\n  }\n\n  /**\n   * Destroy the underlying transport.\n   * Returns transport return code.\n   * We'll clean up zlib objects on the DESTROYED_NOTICE.\n   * @override\n   * @param {?String} msg The message associated with this operation, if any.\n   * @param {?ErrorSubcode} subcode The subcode associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  destroy(msg, subcode) {\n    this._state = TransportSessionState.WAITING_FOR_DESTROY;\n    return this._underlyingTransport.destroy(msg, subcode);\n  }\n\n  // second stage of the underlying transport callback for DESTROYED_NOTICE.\n  // We should only ever get here once the underlying transport is destroyed.\n  // See onClose.\n  _destroy(transportEvent) {\n    if (this._state !== TransportSessionState.DOWN) {\n      this._state = TransportSessionState.DOWN;\n      const onerrorStub = function onerrorStub() { };\n      this._waitForSocketDrain = false;\n      this._flushCallback = null;\n      this._socketDrained = true;\n      this._client = null; // Don't accept data.\n      this._compressor.removeAllListeners();\n      this._compressor.on('error', onerrorStub); // Prevent unhandled errors\n      this._decompressor.removeAllListeners();\n      this._decompressor.on('error', onerrorStub); // Prevent unhandled errors\n      this._compressor.unpipe();\n      //https://github.com/nodejs/node/issues/15625\n      this._compressor._hadError = true;\n      this._compressor.close();\n      this._compressor = null;\n      this._decompressor.close();\n      this._decompressor = null;\n    }\n\n    // always send a DESTROYED_NOTICE in response to a destroy() even\n    // if we think the transport is already destroyed\n    if (this._eventCB) {\n      this._eventCB(transportEvent);\n      // Release references to other components\n      this._eventCB = null;\n    }\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Force fail the underlying transport's socket to force a failure.\n   * Returns transport return code.\n   * @override\n   * @param {?String} msg The message associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  forceFailure(msg) {\n    if (this._underlyingTransport) {\n      return this._underlyingTransport.forceFailure(msg);\n    }\n    return TransportReturnCode.OK;\n  }\n\n  // underlying transport event dispatch\n  eventCB(transportEvent) {\n    switch (transportEvent.getTransportEventCode()) {\n      case TransportSessionEventCode.UP_NOTICE:\n        this.onOpen(transportEvent);\n        break;\n      case TransportSessionEventCode.SEND_ERROR:\n        this.onError(transportEvent);\n        break;\n      case TransportSessionEventCode.DESTROYED_NOTICE:\n        this.onClose(transportEvent);\n        break;\n      case TransportSessionEventCode.CAN_ACCEPT_DATA:\n        this.onDrain(transportEvent);\n        break;\n      default:\n        LOG_WARN('Compressing transport layer got unkown event code ' +\n          `${transportEvent.getTransportEventCode}`);\n    }\n  }\n\n\n  /**\n   * @override\n   * @description Intended for clean shutdowns.\n   * Callback is invoked when all nodejs-buffered data\n   * has been flushed to the OS socket.\n   */\n  flush(callback) {\n    const flushStage2 = () => this._underlyingTransport.flush(callback);\n    this._compressor.flush(flushStage2);\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @override\n   * @description Send encoded SMF message\n   * Returns transport return code.\n   * @param {String} message The encoded SMF message to send\n   * @param {?Boolean} [forceAllowEnqueue=false] If true, do not fail due to transport buffer full\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  send(message, forceAllowEnqueue = false) {\n    if (this._state !== TransportSessionState.SESSION_UP) {\n      // On a lower layer socket error this transport is in WAITING_FOR_DESTROY state\n      // until the decompressor flushes.\n      // We could respond with NO_SPACE, but we'd have to send a CAN_SEND on reconnect.\n      LOG_INFO(`Compressing transport can't send in state ${this._state}`);\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n    // Congestion control.\n    // We try to avoid pumping too much data into the compressor until the socket drains.\n    // We pause()/resume() the compressor while the socket is congested, but still.\n    if (forceAllowEnqueue\n      || (this._socketDrained && this._compressorDrained)) {\n      if (this._interimBuffer.length > 0) {\n        LOG_WARN(`Allowing send when interimBuffer is ${this._interimBuffer.length}`);\n      }\n      this._compressorDrained = this._compressor.write(message, 'ascii');\n      this._compressor.flush();\n      this._clientstats.bytesWritten += message.length;\n      ++this._clientstats.msgWritten;\n      return TransportReturnCode.OK;\n    }\n    // We'll unblock the user on the next onDrain.\n    if (!this._socketDrained) {\n      this._waitForSocketDrain = true;\n    }\n    if (!this._compressorDrained) {\n      this._waitForCompressorDrain = true;\n    }\n    return TransportReturnCode.NO_SPACE;\n  }\n\n  sendCompressed(data) {\n    if (!this._socketDrained) {\n      this._interimBuffer.push(data);\n      this._compressor.pause();\n      return;\n    }\n    const rc = this._underlyingTransport.send(data);\n    switch (rc) {\n      case TransportReturnCode.OK:\n        this._socketDrained = true;\n        break;\n      case TransportReturnCode.NO_SPACE:\n        this._socketDrained = false;\n        this._interimBuffer.push(data);\n        this._compressor.pause();\n        break;\n      case TransportReturnCode.INVALID_STATE_FOR_OPERATION:\n        this.onError(new TransportSessionEvent(\n            TransportSessionEventCode.SEND_ERROR,\n            'Underlying transport in invalid state for send.',\n            null,\n            ErrorSubcode.CONNECTION_ERROR, null));\n        break;\n      default:\n        LOG_WARN(`Unknown return code from undelying transport ${rc}`);\n    }\n  }\n\n  /**\n   * Underlying transport callback for CAN_SEND.\n   * Bind the socket on setup to avoid stray errors from old sockets\n   * in quick connect()-destroy()-connect() scenarios.\n   * @private\n   */\n  onDrain() {\n    this._socketDrained = true;\n    if (this._interimBuffer && this._interimBuffer.length > 0) {\n      const resendBuffer = this._interimBuffer;\n      this._interimBuffer = [];\n      resendBuffer.forEach(data => this.sendCompressed(data));\n    }\n    if (!this._socketDrained) {\n      return;\n    }\n    this._compressor.resume();\n    if (this._flushCallback) {\n      LOG_DEBUG('Transport emitting FLUSH after drain.');\n      const prevCallback = this._flushCallback;\n      this._flushCallback = null;\n      prevCallback();\n    }\n\n    if (this._waitForSocketDrain) {\n      this._waitForSocketDrain = false;\n      if (!this._waitForCompressorDrain) {\n        this._eventCB(\n          new TransportSessionEvent(TransportSessionEventCode.CAN_ACCEPT_DATA,\n                                    '', null, 0, this._sessionId));\n      }\n    }\n  }\n\n  onCompressorDrain() {\n    this._compressorDrained = true;\n    if (this._waitForCompressorDrain) {\n      this._waitForCompressorDrain = false;\n      if (!this._waitForSocketDrain) {\n        this._eventCB(\n          new TransportSessionEvent(TransportSessionEventCode.CAN_ACCEPT_DATA,\n                                    '', null, 0, this._sessionId));\n      }\n    }\n  }\n\n  /**\n   * @override\n   */\n  getInfoStr() {\n    const str = `TcpTransportSession; sid=${formatHexString(this._sessionId)}`;\n    return str;\n  }\n\n  pause() {\n    this._underlyingTransport.pause();\n    this._decompressor.pause();\n  }\n\n  unpause() {\n    this._underlyingTransport.unpause();\n    this._decompressor.resume();\n  }\n\n}\n\nmodule.exports.CompressedTransport = CompressedTransport;\n","const { ErrorResponseSubcodeMapper } = require('./lib/error-response-subcode-mapper');\nconst { ErrorSubcode } = require('./lib/error-subcodes');\nconst { NotImplementedError } = require('./lib/not-implemented-error');\nconst { OperationError } = require('./lib/operation-error');\nconst { RequestError } = require('./lib/request-error');\nconst { RequestEventCode } = require('./lib/request-event-codes');\nconst { SolaceError } = require('./lib/solace-error');\n\nmodule.exports.ErrorResponseSubcodeMapper = ErrorResponseSubcodeMapper;\nmodule.exports.ErrorSubcode = ErrorSubcode;\nmodule.exports.NotImplementedError = NotImplementedError;\nmodule.exports.OperationError = OperationError;\nmodule.exports.RequestError = RequestError;\nmodule.exports.RequestEventCode = RequestEventCode;\nmodule.exports.SolaceError = SolaceError;\n","const { MessageConsumerEventName } = require('./message-consumer-event-names');\n\nfunction formatEventName(x) {\n  return `MessageConsumerEventName.${MessageConsumerEventName.describe(x)}`;\n}\n\nclass MessageDispatcher {\n  constructor({ emitter, autoAck, logger } = {}) {\n    Object.assign(this, {\n      emitter,\n      queue:    [],\n      dispatch: true,\n      formatEventName,\n      logger,\n    });\n    this._dispatchOne = autoAck ? this._dispatchOneAutoAck : this._dispatchOneBare;\n    this.emitter.setOnFirstDirectListener(this._onFirstMessageListener.bind(this));\n    // Although a listener may not be available, we set it to true so that we detect a transition to\n    // false when we attempt to dispatch the first message, which will generate a log that\n    // dispatching is stopped due to a missing listener.\n    this._availableListener = true;\n  }\n\n  start() {\n    this.dispatch = true;\n    this._flush();\n  }\n\n  stop() {\n    this.dispatch = false;\n  }\n\n  get length() {\n    return this.queue.length;\n  }\n\n  push(message) {\n    const { LOG_TRACE } = this.logger;\n    this.queue.push(message);\n\n    if (this.dispatch) {\n      this._flush();\n    } else {\n      LOG_TRACE(`Dispatch disabled, message ${message.getGuaranteedMessageId()} queued locally`);\n    }\n  }\n\n  _onFirstMessageListener() {\n    const { LOG_DEBUG } = this.logger;\n    if (!this._availableListener) {\n      LOG_DEBUG(`Message listener available for dispatcher, ${this.queue.length} messages queued`);\n      LOG_DEBUG(`Dispatcher started and connected: ${this.dispatch ? 'true' : 'false'}`);\n      this._availableListener = true;\n    }\n    this._flush();\n  }\n\n  _flush() {\n    const { LOG_DEBUG } = this.logger;\n    // Check whether dispatch enabled for every element,\n    // to handle when #stop is called from a message handler\n    while (this.queue.length && this.dispatch && (this.emitter.directListenerCount() > 0)) {\n      this._dispatchOne(this.queue.shift());\n    }\n\n    if (this.queue.length && this.dispatch &&\n        (this.emitter.directListenerCount() === 0) && this._availableListener) {\n      LOG_DEBUG('Message dispatching stopped: No message listener registered');\n      this._availableListener = false;\n    }\n  }\n\n  _dispatchOneAutoAck(message) {\n    const { LOG_WARN } = this.logger;\n    // Set the current outbound message, dispatch it, and clear the current outbound message\n    let caught = null;\n\n    // Auto-ack unless the receiver throws.\n    caught = this._dispatchOneBare(message);\n    // Outside of exception block because we want to throw normally from message.acknowledge()\n    if (caught) {\n      LOG_WARN(`Suppressing message acknowledgement for message ${message.getGuaranteedMessageId()\n               } because client threw exception from listener`, caught);\n    } else {\n      // Did the user manually ack for some reason?\n      if (message.isAcknowledged) {\n        LOG_WARN(`Consumer configured to auto-acknowledge messages, but message ${\n                 message.getGuaranteedMessageId()} was application acknowledged`);\n        return;\n      }\n      message._autoAcknowledge(); // No, so auto ack the message\n    }\n  }\n\n  _dispatchOneBare(message) {\n    const { LOG_WARN } = this.logger;\n    let caught;\n    // Requires the emitter's direct option to be MessageConsumerEventName.MESSAGE\n    if (this.listenerCount === 0) {\n      LOG_WARN(`No listeners to dispatch message ${message.getGuaranteedMessageId()}`);\n    }\n    // Since _dispatchOneBare uses emitDirect, this behaviour is not affected by the presence\n    // of an 'error' handler.\n    try {\n      this.emitter.emitDirect(message);\n    } catch (ex) {\n      // User code threw an exception\n      caught = this.emitter.formatErrorEvent(ex, MessageConsumerEventName.MESSAGE, message);\n      // Also propagating to the common error handler\n      this.emitter.emit('error', caught);\n    }\n    return caught;\n  }\n\n}\n\nmodule.exports = { MessageDispatcher };\n","const { Enum } = require('solclient-eskit');\n/**\n * An enumeration of message consumer event names. A {@link solace.MessageConsumer} will emit\n * these events as part of its lifecycle.  Applications, having created a MessageConsumer can\n * choose to listen to all of the events described here, or any subset of these events. For Example:\n * <pre>\n *   <code>\n *     mc = solace.Session.createMessageConsumer(...);\n *     mc.on(solace.MessageConsumerEventName.CONNECT_FAILED_ERROR,\n *           function connectFailedErrorEventCb(error) {\n *             // error can be used as an OperationError object\n *           });\n *   </code>\n * </pre>\n *\n * @memberof solace\n * @enum {string}\n * @namespace\n */\nconst MessageConsumerEventName = {\n  /**\n   * The message consumer is established.\n   * @event solace.MessageConsumerEventName#UP\n   */\n  UP:                   'MessageConsumerEventName_up',\n  /**\n   * The message consumer is successfully disconnected.\n   * The message consumer is disabled.\n   *\n   * @event solace.MessageConsumerEventName#DOWN\n   */\n  DOWN:                 'MessageConsumerEventName_down',\n /**\n   * The message consumer has become active.\n   *\n   * @event solace.MessageConsumerEventName#ACTIVE\n   */\n  ACTIVE:               'MessageConsumerEventName_active',\n  /**\n   * The message consumer has become inactive.\n   *\n   * @event solace.MessageConsumerEventName#INACTIVE\n   */\n  INACTIVE:             'MessageConsumerEventName_inactive',\n  /**\n   * The message consumer was established and then disconnected by the router,\n   * likely due to operator intervention. The message consumer is disabled.\n   *\n   * @event solace.MessageConsumerEventName#DOWN_ERROR\n   * @param {solace.OperationError} error Details of the error.\n   */\n  DOWN_ERROR:           'MessageConsumerEventName_downError',\n  /**\n   * The message consumer was established and then disconnected by the router,\n   * likely due to operator intervention, but flow auto reconnect is active.\n   * The message consumer is disabled, but actively reconnecting.\n   * Expect a RECONNECTED or DOWN_ERROR on success of failure. respectively.\n   * See also MessageConsumerProperties.reconnectAttempts and reconnectIntervalInMsecs.\n   *\n   * @event solace.MessageConsumerEventName#RECONNECTING\n   * @param {solace.OperationError} error Details of the error that triggered the reconnect.\n   */\n  RECONNECTING:         'MessageConsumerEventName_reconnecting',\n  /**\n   * The message consumer successfully auto-reconnected.\n   *\n   * @event solace.MessageConsumerEventName#RECONNECTED\n   */\n  RECONNECTED:          'MessageConsumerEventName_reconnected',\n  /**\n   * The message consumer attempted to connect but was unsuccessful.\n   * The message consumer is disabled.\n   *\n   * @event solace.MessageConsumerEventName#CONNECT_FAILED_ERROR\n   * @param {solace.OperationError} error Details of the error.\n   */\n  CONNECT_FAILED_ERROR: 'MessageConsumerEventName_connectFailedError',\n  /**\n   * The message consumer will not connect because the current session is incompatible\n   * with Guaranteed Messaging. The message consumer is disabled until a compatible session\n   * is available.\n   *\n   * @event solace.MessageConsumerEventName#GM_DISABLED\n   */\n  GM_DISABLED:          'MessageConsumerEventName_GMDisabled',\n  /**\n   * The message consumer is being disposed. No further events will be emitted.\n   *\n   * @event solace.MessageConsumerEventName#DISPOSED\n   */\n  DISPOSED:             'MessageConsumerEventName_disposed',\n  /**\n   * A message was received on the message consumer.\n   *\n   * If the application throws an exception in this listener, and the consumer was configured\n   * to automatically acknowledge messages\n   * (see {@link solace.MessageConsumerProperties#acknowledgeMode}),\n   * the API will not acknowledge the message, since it\n   * may not have been successfully processed by the application. Such a message must be\n   * acknowledged manually. If the application did not retain a reference to the message, it\n   * may be redelivered by calling {@link solace.MessageConsumer#disconnect} followed by\n   * {@link solace.MessageConsumer#connect} depending on the configuration of the queue.\n   *\n   * When there is no listener for <i>MESSAGE</i> on a MessageConsumer, messages are queued\n   * internally until a listener is added.\n   *\n   * @event solace.MessageConsumerEventName#MESSAGE\n   * @param {solace.Message} message The received message being delivered in this event.\n   */\n  MESSAGE:              'MessageConsumerEventName_message',\n  /**\n   * The subscribe or unsubscribe operation succeeded on the queue.\n   * @event solace.MessageConsumerEventName#SUBSCRIPTION_OK\n   * @param {solace.MessageConsumerEvent} event The details related\n   * to the successful subscription update.\n   */\n  SUBSCRIPTION_OK:      'MessageConsumerEventName_ok',\n  /**\n   * The Solace Message Router rejected a queue subscription (add or remove).\n   * @event solace.MessageConsumerEventName#SUBSCRIPTION_ERROR\n   * @param {solace.MessageConsumerEvent} error The details related\n   * to the failed subscription update.\n   */\n  SUBSCRIPTION_ERROR:   'MessageConsumerEventName_error',\n\n};\n\nmodule.exports.MessageConsumerEventName = Enum.new(MessageConsumerEventName);\n","module.exports = require(\"crypto\");","\nconst { LogFormatter } = require('solclient-log');\nconst { Baggage } = require('./baggage');\nconst { TraceContext } = require('./message-trace-context');\nconst { TraceContextSetter } = require('./message-trace-context-setter');\n\n/**\n * @classdesc\n * <b>This class is used to enable the distributed tracing \n * support for variety of Solace message types. \n * This class is for internal use only.\n * <p>\n * @hideconstructor\n * @internal\n */\nclass MessageTracingSupport {\n\n  /**\n   * Represents OpenTelementry Support for Solace Messages.\n   * The solace.Message class will extend this class.\n   * \n   * @constructor\n   * @hideconstructor\n   * @private\n   **/\n  constructor() {\n    // empty constructor\n  }\n\n  /**\n   * Retrieves a {@link TraceContextSetter} object that is used to modify \n   * an appropriate TraceContext associated with a message transparently.\n   * When no context is stored in a message it will create and store a creation \n   * context with a message that can be used as an initial\n   * transport context at the same time. \n   * It will never override an existing message creation context. \n   * When creation context is present or only transport context is present, it will\n   * override an existing transport context information with a newly provided one.\n   * \n   * @returns {solace.TraceContextSetter} Transport context setter object associated with this message; never expected to be null\n   */\n  getTraceContextSetter() {\n    if(this._traceContextSetter == null || this._traceContextSetter == undefined) {\n      // create a new context setter object\n      this._traceContextSetter = new TraceContextSetter();\n    }\n    return this._traceContextSetter;\n  }\n\n  /**\n   * Retrieves a {@link solace.TraceContext} object used for carrying over \n   * of the distributed tracing transport context information usable or modifiable \n   * by intermediary instrumentation across service boundaries. \n   * It allows correlating the producer and the consumer with an intermediary.\n   * It also allows correlating multiple intermediaries among each other.\n   *\n   * @returns {?solace.TraceContext} Transport context object associated with this message\n   */\n  getTransportContext() {\n    return this._transportContext;\n  }\n  /**\n   * The transport context setter\n   * \n   * @param {TraceContextSetter} contextSetter \n   */\n  _setTransportContext(contextSetter) {\n    if(contextSetter != null) {\n      this._transportContext = new TraceContext(contextSetter);\n    }\n  }\n\n  /**\n   * Retrieves a {@link solace.TraceContext} object used for carrying over of the distributed tracing\n   * message creation context information usable by intermediary instrumentation across\n   * service boundaries. It allows correlating the producer with the consumers of a message,\n   * regardless of intermediary instrumentation. It must not be altered by intermediaries.\n   *\n   * @returns {?solace.TraceContext} Message creation context object associated with this message;\n   */\n  getCreationContext() {\n    // if there is no creation context, use the context setter to create it\n    return this._creationContext;\n  }\n  /**\n   * It is created only once by the producer/publisher and cannot be\n   * changed by intermediaries\n   * @param {TraceContextSetter} contextSetter \n   */\n  _setCreationContext(contextSetter) {\n    // set the creation context only once\n    if(contextSetter != null) {\n      this._creationContext = new TraceContext(contextSetter);\n    }\n  }\n \n  /**\n   * Retrieves a {@link solace.Baggage} carrier object used for carrying over of the distributed tracing\n   * message baggage information across service boundaries.  It must not be altered by\n   * intermediaries.\n   *\n   * @return {?solace.Baggage} baggage carrier object associated with this message,\n   */\n  getBaggage() {\n    return this._baggage;\n  }\n  /**\n   * The internal setter for the baggage prop.\n   * \n   * @param {Baggage} value \n   */\n  _setBaggage(value) {\n    this._baggage = value;\n  }\n}\n\nmodule.exports.MessageTracingSupport = MessageTracingSupport;\n","module.exports = require(\"url\");","/**\n * @private\n */\nclass OutstandingDataRequest {\n  constructor(correlationId, timer, replyReceivedCBFunction, reqFailedCBFunction, userObject) {\n    this.correlationId = correlationId;\n    this.timer = timer;\n    this.replyReceivedCBFunction = replyReceivedCBFunction;\n    this.reqFailedCBFunction = reqFailedCBFunction;\n    this.userObject = userObject;\n  }\n}\n\nmodule.exports.OutstandingDataRequest = OutstandingDataRequest;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents an enumeration of session properties that can be modified by\n * {@link solace.Session.updateProperty} after the {@link solace.Session} is originally\n * created.\n *\n * These correspond to session properties in {@link solace.SessionProperties}.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MutableSessionProperty = {\n  /**\n   * Client name: {@link solace.SessionProperties#clientName}\n   * @type {Number}\n   */\n  CLIENT_NAME:        1,\n  /**\n   * Application description: {@link solace.SessionProperties#applicationDescription}\n   * @type {Number}\n   */\n  CLIENT_DESCRIPTION: 2,\n};\n\nmodule.exports.MutableSessionProperty = Enum.new(MutableSessionProperty);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFAdProtocolMessageType = {\n  OPENPUBFLOW:      0x00,\n  // INTERROUTERACK:          0x01,\n  // INTERROUTERHANDSHAKEACK: 0x02,\n  CLIENTACK:        0x03,\n  BIND:             0x04,\n  UNBIND:           0x05,\n  UNSUBSCRIBE:      0x06,\n  CLOSEPUBFLOW:     0x07,\n  CREATE:           0x08,\n  DELETE:           0x09,\n  // FLOWRECOVER:  0x0a,\n  TRANSACTIONCTRL:  0x0b,\n  FLOWCHANGEUPDATE: 0x0c,\n  // EXTERNALACK:      0x0d,\n  XACTRL:           0x0e,\n  CLIENTNACK:       0x0f,\n  // TXNCTRL:          0x10,\n};\n\nmodule.exports.SMFAdProtocolMessageType = Enum.new(SMFAdProtocolMessageType);\n","const tls = require('tls');\nconst { ErrorSubcode } = require('solclient-error');\nconst { Hex } = require('solclient-convert');\nconst { LOG_TRACE, LOG_DEBUG, LOG_ERROR } = require('solclient-log');\nconst { mixin } = require('solclient-eskit');\nconst { NodeTLSOptsMixin } = require('../node-tls-opts-mixin');\nconst { ShuntableTransport } = require('./shuntable-transport');\nconst { TransportBase } = require('../transport-base');\nconst { TransportError } = require('../transport-error');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionEvent } = require('../transport-session-event');\nconst { TransportSessionEventCode } = require('../transport-session-event-codes');\nconst { TransportSessionState } = require('../transport-session-states');\n\nconst {\n  formatHexString,\n} = Hex;\n\n/**\n *\n * Modular transport with TLS (tcps://) support.\n * Only works in node.js.\n * Must be initialized with an underlying transport\n * (currently only the plaintext tcp transport is supported).\n * Wraps the underlying transport in a ShuntableTransport stream\n * which can be passed to tls.connect()\n * Supports  TLS shutdown leaving the socket open.\n * @private\n */\nclass TlsOnlyTransport extends TransportBase {\n\n  constructor(url, eventCB, client, props) {\n    // instanitate instance properties defined in TransportBase\n    super(url, eventCB, client, props);\n\n    /**\n     * @private\n     * @type {TransportClientStats}\n     */\n    this._clientstats = null;\n    this._underlyingTransport = null;\n\n    /**\n     * Maximum amount of send data than can be queued.\n     * NodeJS socket.write accepts all writes, growing a\n     * user space buffer indefinitely.\n     * The TCP transport (same as WS transport)\n     * manages the size of that buffer to stay below this limit.\n     * @private\n     * @type {Number}\n     */\n    this._sendBufferMaxSize = props.sendBufferMaxSize;\n\n    /*\n     * When true, the upper layer was told NO_SPACE and must be notified\n     * of the next \"drained\" event.\n     * @private\n     * @type {Boolean}\n     */\n    this._canSendNeeded = false;\n\n    /*\n     * One-shot flush callback.\n     * Set on flush(), ran and cleared on socket drain event.\n     * @private\n     */\n    this._flushCallback = null;\n\n    /**\n     * Flag to keep track of socket drained state:\n     * Set to false when socket.write returns false,\n     * (indicating user-space buffering)\n     * Set to true on socket drain events.\n     * (indicating the user space buffer has flushed to the OS.)\n     * @type {Boolean}\n     * @private\n     */\n    this._drained = true;\n\n    /**\n     * @type {TransportSessionState}\n     * @private\n     */\n    this._state = TransportSessionState.DOWN;\n\n    /**\n     * @type {?Socket}\n     * @private\n     */\n    this._tlsSocket = null;\n\n    /**\n     * Save the Event in the onError listener\n     * Use it in onClose to populate the event.\n     * (Tcp socket calls onError with the error then onClose.\n     * WS socket calls only onClose and passes the error directly.)\n     * @private\n     * @type {?Error}\n     */\n    this._socketError = null;\n\n    /**\n     * @type {?string}\n     * @private\n     */\n    this._sessionId = new Date().getTime();\n\n    // Some whitebox tests expect a transport->transportSession nesting.\n    this._transportSession = this;\n\n    this._props.transportProtocol = null;\n  }\n\n  /**\n   * @override\n   */\n  getClientStats() {\n    return this._clientstats;\n  }\n\n  setClientStats(value) {\n    this._clientstats = value;\n  }\n\n  setUnderlyingTransport(newUnderlyingTransoprt) {\n    this._underlyingTransport = newUnderlyingTransoprt;\n  }\n\n  getUnderlyingTransport() {\n    return this._underlyingTransport;\n  }\n\n  rehome(eventCB, client) {\n    this._eventCB = eventCB;\n    this._client = client;\n  }\n\n  // eventCB and rxDataBuffer forwarded to _shuntableTransport\n  // Chicken-egg problem in the factory...\n  eventCB(transportEvent) {\n    this._shuntableTransport.eventCB(transportEvent);\n  }\n\n  rxDataBuffer(data) {\n    this._shuntableTransport.rxDataBuffer(data);\n  }\n\n  /**\n   * Socket callback.\n   * Bind the socket on setup to avoid stray errors from old sockets\n   * in quick connect()-destroy()-connect() scenarios.\n   * @private\n   * @param {Socket} originalSocket the original socket\n   * @param {Buffer} data the data\n   */\n  onData(originalSocket, data) {\n    // We do not collect Rx stats.\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY ||\n      originalSocket !== this._tlsSocket) {\n      LOG_DEBUG('TcpTransportSession stray onData for previous socket, ignoring.');\n      return;\n    }\n    if (this._client) {\n      this._client.rxDataBuffer(data);\n    }\n  }\n\n  /**\n   * Socket callback.\n   * Bind the socket on setup to avoid stray errors from old sockets\n   * in quick connect()-destroy()-connect() scenarios.\n   * @private\n   * @param {Socket} originalSocket the original socket\n   * @param {Error} error the error\n   */\n  onError(originalSocket, error) {\n    if (originalSocket !== this._tlsSocket) {\n      LOG_DEBUG('Tls transport stray onError for previous socket, ignoring.');\n      return;\n    }\n\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_TRACE('Tls transport is being destroyed, ignore error');\n      return;\n    }\n    LOG_DEBUG(`Tls transport connection error ${error}`);\n    // net.socket invokes the error handler before the close handler.\n    // Websocket does not, and that's what the upper layer expects.\n    // Suppressing the \"double tap\" error events when connected,\n    // saving the error for the onClose handler in _socketerror.\n    if (this._state !== TransportSessionState.SESSION_UP) {\n      this._eventCB(\n        new TransportSessionEvent(\n          TransportSessionEventCode.SEND_ERROR,\n          `Connection error${error}`,\n          null,\n          ErrorSubcode.CONNECTION_ERROR, null));\n    } else { // we rely on the close listener to notify the upper layer.\n      this._socketError = error;\n    }\n  }\n\n  /**\n   * Socket callback.\n   * Bind the socket argument to guard against stray invocations in a\n   * quick connect()-destroy()-connect() scenario.\n   * @private\n   * @param {Socket} originalSocket original socket\n   * @param {Boolean} hadError wheter there was an error\n   */\n  onClose(originalSocket, hadError) {\n    if (originalSocket !== this._tlsSocket) {\n      LOG_DEBUG('TcpTransportSession stray onClose for previous socket, ignoring.');\n      return;\n    }\n\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_TRACE('Tls transport is being destroyed, ignore close');\n      return;\n    }\n    const msg = hadError ? 'with error' : 'cleanly';\n    const errorMsg = this._socketError && this._socketError.message;\n    this._socketError = null; // clear on read.\n    LOG_DEBUG(`Tls transport connection is closed ${msg}. Message: ${errorMsg}`);\n    this._state = TransportSessionState.CONNECTION_FAILED;\n    this._destroy(this._tlsSocket, `Connection closed ${msg}. Message:${errorMsg}`,\n                  ErrorSubcode.COMMUNICATION_ERROR);\n  }\n\n  /**\n   * Callback for Socket.connect.\n   * Bind the socket argument to guard against stray invocations in a\n   * quick connect()-destroy()-connect() scenario.\n   * @private\n   * @param {Socket} originalSocket original socket\n   */\n  onOpen(originalSocket) {\n    LOG_TRACE('TlsTransportSession received socket open event.');\n    if (originalSocket !== this._tlsSocket) {\n      LOG_DEBUG('TlsTransportSession stray onOpen for previous socket, ignoring.');\n      return;\n    }\n    if (this._state !== TransportSessionState.WAITING_FOR_CREATE) {\n      LOG_DEBUG(`TcpTransportSession stray onOpen when in state ${this._state}, ignoring.`);\n      return;\n    }\n\n    this._state = TransportSessionState.SESSION_UP;\n      // Send the event to the application letting it know that the session is up\n    this._eventCB(\n          new TransportSessionEvent(\n              TransportSessionEventCode.UP_NOTICE,\n              'Connected',\n              0,\n              null,\n              this._sessionId));\n  }\n\n  /**\n   * Establish underlying transport.\n   * @override\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  connect() {\n    if (this._state !== TransportSessionState.DOWN) {\n      LOG_ERROR(`Invalid state for operation: ${TransportSessionState.nameOf(this._state)}`);\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n    if (this._tlsSocket) {\n      LOG_ERROR('TCP transport can not connect once _tlsSocket exists.');\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n\n    LOG_DEBUG('Establishing TLS transport session');\n    this._state = TransportSessionState.WAITING_FOR_CREATE;\n    try {\n      const duplexOptions = { underlyingTransport: this._underlyingTransport };\n      this._shuntableTransport = new ShuntableTransport(duplexOptions);\n      this._underlyingTransport.connect();\n      const tlsOptions = this.createTLSOptions();\n      tlsOptions.socket = this._shuntableTransport;\n      // host and port can be set here for certificate validation in the future.\n      this._tlsSocket = tls.connect(tlsOptions);\n      this._tlsSocket.on('secureConnect', this.onOpen.bind(this, this._tlsSocket));\n      LOG_TRACE('Assigning properties to socket');\n      // WARNING!\n      // This is the kind of thing that breaks on minification.\n      // Re-run unit tests in production mode when changed:\n      // grunt --gruntfile=Gruntfile_Production.js\n      // When broken, consult the closure compiler exceptions file:\n      // (sdk-root)/builder/template/-common/env/externs.js\n      this._tlsSocket.on('data', this.onData.bind(this, this._tlsSocket));\n      this._tlsSocket.on('error', this.onError.bind(this, this._tlsSocket));\n      this._tlsSocket.on('close', this.onClose.bind(this, this._tlsSocket));\n      this._tlsSocket.on('drain', this.onDrain.bind(this, this._tlsSocket));\n      this._tlsSocket.setNoDelay(true);\n\n      LOG_TRACE('Prepared socket');\n    } catch (error) {\n      LOG_DEBUG(`Error connecting: ${error}`);\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      throw new TransportError(`Could not create TLS socket: ${error.message}`,\n        error.subcode || ErrorSubcode.CONNECTION_ERROR);\n    }\n    LOG_DEBUG('TLS transport is connecting');\n\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Destroy the underlying transport.\n   * Returns transport return code.\n   * @override\n   * @param {?String} msg The message associated with this operation, if any.\n   * @param {?ErrorSubcode} subcode The subcode associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  destroy(msg, subcode) {\n    //return this._underlyingTransport.destroy(msg, subcode);\n    return this._destroy(this._tlsSocket, msg, subcode);\n  }\n\n  _destroy(originalSocket, msg, subcode) {\n    if (originalSocket !== this._tlsSocket) {\n      LOG_DEBUG('TcpTransportSession stray _destroy for previous socket, ignoring.');\n      return TransportReturnCode.OK;\n    }\n    if (this._state !== TransportSessionState.DOWN) {\n      LOG_DEBUG(`Destroy Tls transport: ${msg}`);\n      // Set state for connection teardown.\n      this._state = TransportSessionState.WAITING_FOR_DESTROY;\n\n      const onerrorStub = function onerrorStub() { };\n      if (this._tlsSocket) {\n        this._tlsSocket.removeAllListeners();\n        this._tlsSocket.on('error', onerrorStub); // Prevent unhandled errors\n        this._tlsSocket.end();\n        this._tlsSocket = null;\n      }\n\n      if (this._underlyingTransport) {\n        this._underlyingTransport.destroy(msg, subcode);\n        this._underlyingTransport = null;\n      }\n\n      this._canSendNeeded = false;\n      this._flushCallback = null;\n      this._drained = true;\n      this._state = TransportSessionState.DOWN;\n      this._client = null; // Don't accept data.\n    }\n\n    // always send a DESTROYED_NOTICE in response to a destroy() even\n    // if we think the transport is already destroyed\n    LOG_TRACE(`Destroying TCP transport. msg: ${msg} subcode: ${subcode}`);\n    if (this._eventCB) {\n      this._eventCB(new TransportSessionEvent(TransportSessionEventCode.DESTROYED_NOTICE,\n                                              msg || 'Session is destroyed',\n                                              null,\n                                              subcode || 0,\n                                              this._sessionId));\n      // Release references to other components\n      this._eventCB = null;\n    }\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * Force fail the underlying transport's socket to force a failure.\n   * Returns transport return code.\n   * @override\n   * @param {?String} msg The message associated with this operation, if any.\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  forceFailure(msg) {\n    if (this._state !== TransportSessionState.DOWN) {\n      const errorMsg = (msg !== undefined && msg !== null) ? msg : ''; // default empty\n      LOG_DEBUG(`Destroy Tls transport: ${errorMsg}`);\n      if (this._tlsSocket) {\n        this._tlsSocket.destroy(new Error(errorMsg));\n      }\n\n      if (this._underlyingTransport) {\n        this._underlyingTransport.forceFailure(errorMsg);\n      }\n    }\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @override\n   * @description Intended for clean shutdowns.\n   * Callback is invoked when all nodejs-buffered data\n   * has been flushed to the OS socket.\n   */\n  flush(callback) {\n    if (this._drained) {\n      LOG_DEBUG('Transport emitting FLUSH immediately.');\n      callback();\n    } else if (callback) {\n      this._flushCallback = callback;\n    }\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @override\n   * @description Send encoded SMF message\n   * Returns transport return code.\n   * @param {String} message The encoded SMF message to send\n   * @param {?Boolean} [forceAllowEnqueue=false] If true, do not fail due to transport buffer full\n   * @returns {TransportReturnCode} The result of this operation\n   */\n  send(message, forceAllowEnqueue = false) {\n    if (this._state !== TransportSessionState.SESSION_UP) {\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n    // Limiting socket buffer size to _sendBufferMaxSize unless\n    // the force flag was set\n    // or the socket is drained, in which case any size message goes.\n    if (forceAllowEnqueue\n      || this._drained\n      || message.length < this._sendBufferMaxSize - this._tlsSocket.bufferSize) {\n      // _drained keeps track of \"overflowing\" writes.\n      // nodejs never refuses a write but warns when it starts buffering.\n      this._drained = this._tlsSocket.write(message, 'ascii');\n      if (this._clientstats) {\n        this._clientstats.bytesWritten += message.length;\n        ++this._clientstats.msgWritten;\n      }\n      return TransportReturnCode.OK;\n    }\n    // We'll unblock the user on the next onDrain.\n    this._canSendNeeded = true;\n    return TransportReturnCode.NO_SPACE;\n  }\n\n  /**\n   * Socket callback.\n   * Bind the socket on setup to avoid stray errors from old sockets\n   * in quick connect()-destry()-connect() scenarios.\n   * @private\n   * @param {Socket} originalSocket the original socket\n   */\n  onDrain(originalSocket) {\n    if (originalSocket !== this._tlsSocket) {\n      LOG_DEBUG('TcpTransportSession stray onDrain for previous socket, ignoring.');\n      return;\n    }\n    this._drained = true;\n\n    if (this._flushCallback) {\n      LOG_DEBUG('Transport emitting FLUSH after drain.');\n      const prevCallback = this._flushCallback;\n      this._flushCallback = null;\n      prevCallback();\n    }\n\n    if (this._canSendNeeded) {\n      LOG_TRACE('Transport emitting CAN_ACCEPT_DATA');\n      this._canSendNeeded = false;\n      this._eventCB(\n        new TransportSessionEvent(TransportSessionEventCode.CAN_ACCEPT_DATA,\n                                  '', null, 0, this._sessionId));\n    }\n  }\n\n  /**\n   * @override\n   */\n  getInfoStr() {\n    const str = `TcpTransportSession; sid=${formatHexString(this._sessionId)}`;\n    return str;\n  }\n\n  tlsShutdown(callback) {\n    this._tlsSocket.removeAllListeners('close');\n    this._tlsSocket.on('close', this.tlsShutdownStage2.bind(this, callback));\n    this._shuntableTransport.dontEnd();\n    this._tlsSocket.end();\n  }\n\n  tlsShutdownStage2(callback) {\n    this._shuntableTransport.shunt();\n    this._tlsSocket.removeAllListeners();\n    this._tlsSocket = null;\n    this._shuntableTransport = null;\n    this._underlyingTransport.rehome(this._eventCB, this._client);\n    this._underlyingTransport.setClientStats(this.getClientStats());\n    this.setClientStats(null);\n    this._eventCB = null;\n    this._client = null;\n    callback(this._underlyingTransport);\n  }\n}\n\nmixin(TlsOnlyTransport, NodeTLSOptsMixin);\n\nmodule.exports.TlsOnlyTransport = TlsOnlyTransport;\n","const { Parameter } = require('solclient-validate');\nconst { Convert } = require('solclient-convert');\n\n// eslint-disable-next-line global-require\nconst BufferImpl = require('buffer').Buffer;\n\nconst {\n    isNumber,\n    isBoolean,\n    isString,\n    isStringOrNothing,\n} = Parameter;\n\nconst { uint8ArrayToString } = Convert;\n\n/**\n * @classdesc\n * <b>This class abstracts settable metadata used for \n * distributed message tracing with Solace messaging APIs \n * types. This class is for internal use only.\n * <p>\n * @hideconstructor\n * @memberof solace\n */\n class TraceContextSetter {\n\n    /**\n     * Abstract constructor for metadata used \n     * for distributed message tracing.\n     * \n     * @constructor\n     * @hideconstructor\n     * @private\n     */\n    constructor() {\n        this._traceId = null;\n        this._spanId = null;\n        this._isSampled = false;\n        this._traceState = null;\n        this._version = 0x01; // version=0001 (4 bits, version=1);\n    }\n\n    /**\n     * Clone this TraceContextSetter object.\n     * \n     * @returns {TraceContextSetter} the cloned TraceContextSetter instance\n     */\n    clone() {\n        const _clonedContextSetter = new TraceContextSetter();\n        _clonedContextSetter._setSpanId(this._spanId);\n        _clonedContextSetter._setTraceId(this._traceId);\n        _clonedContextSetter._setSampled(this._isSampled);\n        _clonedContextSetter._setTraceState(this._traceState);\n        _clonedContextSetter._setVersion(this._version);\n        return _clonedContextSetter;\n    }\n\n    /**\n     * The length of the traceId bytes in the binary message\n    */\n    static get TRACE_ID_BYTES_LENGTH() {\n        return 16;\n    }\n\n    /**\n     * The length of the spanId bytes in the binary message\n    */\n    static get SPAN_ID_BYTES_LENGTH() {\n        return 8;\n    }\n\n    /**\n     * The version which for now is 1. -> 0001\n    */\n    get version() {\n        return this._version || 0x01; // version=0001 (4 bits, version=1);;\n    }\n    /**\n     * Sets the version\n     * \n     * @param {Number} value The version encoded as Hex value\n     */\n    setVersion(value) {\n        this._setVersion(isNumber('version', value));\n    }\n    _setVersion(value) {\n        this._version = value;\n    }\n\n    /**\n     * @private\n    */\n    get traceId() {\n        return this._traceId;\n    }\n    /**\n     * Sets the value of the trace identifier associated with the message.\n     * \n     * @param {String} value The trace identifier encoded as a 16-length Hex string\n     */\n    setTraceId(value) {\n        this._setTraceId(isString('traceId', value));\n    }\n    _setTraceId(value) {\n        this._traceId = value;\n    }\n \n    /**\n     * @private\n    */\n    get spanId() {\n        return this._spanId;\n    }\n    /**\n     * Sets the value of the span identifier associated with the message.\n     * \n     * @param {String} value The trace identifier encoded as a 8-length Hex string\n     */\n    setSpanId(value) {\n        this._setSpanId(isString('spanId', value));\n    }\n    _setSpanId(value) {\n        this._spanId = value;\n    }\n \n    /**\n     * @private\n    */\n    get isSampled() {\n        return this._isSampled || false;\n    }\n    /**\n     * Turns on or off sampling for the associated message.\n     * \n     * @param {Boolean} value if true sampling is on, off otherwise\n     */\n    setSampled(value) {\n        this._setSampled(isBoolean('isSampled', value));\n    }\n    _setSampled(value) {\n        this._isSampled = value;\n    }\n \n    /**\n     * @private\n    */\n    get traceState() {\n        return this._traceState;\n    }\n    /**\n     * Sets the value of the trace state associated with the message.\n     * \n     * @param {?String} value The value of trace state associated with the message\n     * @see {@link https://www.w3.org/TR/trace-context/#tracestate-header-field-values|w3c trace state format specification}\n     */\n    setTraceState(value) {\n        this._setTraceState(isStringOrNothing('traceState', value));\n    }\n    _setTraceState(value) {\n        this._traceState = value;\n    }\n\n    /**\n     * Gets a new instance of the Message Trace Context Setter \n     * from the values in the SMF header associated with the message.\n     * \n     * @param {Buffer | Uint8Array | String | null} traceContextValue The value of trace context associated with the message\n     * @returns {solace.TraceContextSetter | null} Context setter object\n     */\n    static fromTraceContext(traceContextValue) {\n        // implementation here\n        if (traceContextValue == null) {\n            return null;\n        }\n\n        let traceContextBuffer = null;\n        if (BufferImpl.isBuffer(traceContextValue)) {\n            traceContextBuffer = traceContextValue; // do nothing since it is already a buffer\n        } else if (typeof traceContextValue === 'string') {\n            traceContextBuffer = BufferImpl.from(traceContextValue, 'latin1');\n        }\n\n        // the trace context value is at least 32 bytes (without trace state)\n        if (!traceContextBuffer || traceContextBuffer.length < 32) {\n            return null;\n        }\n\n        try {\n            const traceContextBytes = (new Uint8Array(traceContextBuffer)).buffer;\n            let bytesRead = 0; // to track the byte read offsets\n\n            const traceContextSetter = new TraceContextSetter();\n\n            const firstByte = traceContextBytes.slice(bytesRead, bytesRead + (1));\n            const byte1DataView = new DataView(firstByte, 0, 1);\n            let byte1 = byte1DataView.getUint8(bytesRead);// get the first byte\n\n            const version = byte1 >> 4; // get the version from the four MSB\n            traceContextSetter.setVersion(version); // set the version\n\n            const isSampled = ((byte1 & 0x0F) == 0x04);\n            traceContextSetter.setSampled(isSampled); // set the sampled status\n            bytesRead++;\n\n            const traceId16Bytes = traceContextBytes.slice(bytesRead, bytesRead + (16));\n            const traceId = uint8ArrayToString(traceId16Bytes, 'hex'); // set the traceId\n            traceContextSetter.setTraceId(traceId);\n            bytesRead += TraceContextSetter.TRACE_ID_BYTES_LENGTH;\n\n            const spanId8Bytes = traceContextBytes.slice(bytesRead, bytesRead + (8));\n            const spanId = uint8ArrayToString(spanId8Bytes, 'hex'); // set the spanId\n            traceContextSetter.setSpanId(spanId);\n            bytesRead += TraceContextSetter.SPAN_ID_BYTES_LENGTH;\n\n            bytesRead ++; // Skip InjectionStandard byte\n            bytesRead += 4; // Skip the 4 RFU bytes\n\n            const traceStateLengthBytes = traceContextBytes.slice(bytesRead, bytesRead + (2));\n            const traceStateLengthDataView = new DataView(traceStateLengthBytes, 0, traceStateLengthBytes.byteLength);\n            const traceStateLength = traceStateLengthDataView.getUint16(0, false);// get the trace length\n            bytesRead += 2; // move pointer past length bytes\n\n            // if there is a trace state value, read it\n            if (traceStateLength > 0) {\n                const traceStateBytes = traceContextBytes.slice(bytesRead, bytesRead + (traceStateLength));\n                const traceState = uint8ArrayToString(traceStateBytes); // set the trace state\n                traceContextSetter.setTraceState(traceState);\n            }\n            return traceContextSetter;\n        } catch (ex) {\n            return null;\n        }\n    }\n}\n\nmodule.exports.TraceContextSetter = TraceContextSetter;\n","/**\n * @classdesc\n *\n * Encapsulates the properties of a cache session.\n *\n * @memberof solace\n *\n */\nclass CacheSessionProperties {\n\n   /**\n    * @constructor\n    *\n    * @param {String} cacheName A property that specifies the cache name to which CacheSession\n    *   operations should be sent.\n    * @param {Number} [maxAgeSec=0] The maximum allowable message age in seconds to deliver in\n    *   response to a cache request. 0 means no restriction on age.\n    * @param {Number} [maxMessages=1] The maximum number of messages per Topic to deliver in\n    *   response to cache requests. 0 means no restriction on the number of messages.\n    * @param {Number} [timeoutMsec=10000] The timeout period (in milliseconds) to wait for a\n    *   response from the cache. This is a protocol timer used internally by the API on each\n    *   message exchange with SolCache. A single call to\n    *   {@link solace.CacheSession#sendCacheRequest} may lead to many request-reply exchanges\n    *   with SolCache and so is not bounded by this timer as long as each internal request is\n    *   satisfied in time.\n    *   * The valid range for this property is >= 3000.\n    */\n  constructor(cacheName, maxAgeSec, maxMessages, timeoutMsec) {\n    /**\n     * @type {String}\n     *\n     * @description A property that specifies the cache name to which CacheSession operations should\n     * be sent.\n     */\n    this.cacheName = cacheName;\n\n    /**\n     * @type {Number}\n     *\n     * @description The maximum allowable message age in seconds to deliver in response to cache\n     * requests.  0 means no restriction on age.\n     *\n     * @default 0\n     */\n    this.maxAgeSec = maxAgeSec || 0;\n\n    /**\n     * @type {Number}\n     *\n     * @description The maximum number of messages per Topic to deliver in response to cache\n     * requests.  0 means no restriction on the number of messages.\n     *\n     * @default 1\n     */\n    this.maxMessages = (maxMessages === null || maxMessages === undefined) ? 1 : maxMessages;\n\n    /**\n     * @type {Number}\n     *\n     * @description The timeout for a cache request, in milliseconds.  The valid range for this\n     * property is >= 3000.\n     *\n     * @default 10000\n     */\n    this.timeoutMsec = timeoutMsec || 10000;\n\n    /**\n     * @private\n     * @type {Boolean}\n     * @description Whether to include other clusters in the request.\n     * @default true\n     */\n    this.includeOtherClusters = true;\n\n    /**\n     * @private\n     */\n    this.cachePrefix = '#P2P/CACHEINST/';\n  }\n\n  /**\n   * Gets the cache name to which {@link solace.CacheSession} requests should be sent, for\n   * sessions constructed using these properties.\n   *\n   * @returns {String} The cache name.\n   */\n  getCacheName() {\n    return this.cacheName;\n  }\n\n  /**\n   * Sets the cache name to which requests should be sent. Cannot be null or blank.\n   * @param {String} value The cache name to which requests should be sent.\n   */\n  setCacheName(value) {\n    this.cacheName = value;\n  }\n\n  /**\n   * Gets the maximum allowable message age for messages to be delivered in response to a request\n   * made on a {@link solace.CacheSession} that was constructed using these properties.  0 means no\n   * restriction on age.\n   *\n   * @returns {Number} The maximum allowable message age to be returned by an associated\n   * {@link solace.CacheSession}, or 0 for no restriction.\n   */\n  getMaxMessageAgeSec() {\n    return this.maxAgeSec;\n  }\n\n  /**\n   * Sets the maximum allowable message age. 0 means no restriction on age.\n   *\n   * @param {Number} value The maximum allowable message age, or 0 for no restriction.\n   */\n  setMaxMessageAgeSec(value) {\n    this.maxAgeSec = value;\n  }\n\n  /**\n   * Gets the maximum count of messages to be delivered, per {@link solace.Destination}, in\n   * response to a request issued on a {@link solace.CacheSession} constructed using these\n   * properties.  0 means no restriction on the number of messages.\n   *\n   * @returns {Number} The maximum number of messages per Topic to deliver, or 0 for no restriction.\n   */\n  getMaxMessages() {\n    return this.maxMessages;\n  }\n\n  /**\n   * Sets the maximum count of messages to be delivered per {@link solace.Destination} in response\n   * to a cache request. 0 means no restriction.\n   *\n   * @param {Number} value The maximum count of messages to deliver, or 0 for no restriction.\n   */\n  setMaxMessages(value) {\n    this.maxMessages = value;\n  }\n\n  /**\n   * Gets the timeout for requests issued on a {@link solace.CacheSession} constructed\n   * using these properties.\n   *  * The valid range is >= 3000.\n   *\n   * @returns {Number} The timeout, in milliseconds, for cache session requests.\n   */\n  getTimeoutMsec() {\n    return this.timeoutMsec;\n  }\n\n  /**\n   * Sets the timeout for requests.\n   *  * The valid range is >= 3000.\n   * @param {Number} value The timeout for requests.\n   */\n  setTimeoutMsec(value) {\n    this.timeoutMsec = value;\n  }\n\n}\n\nmodule.exports.CacheSessionProperties = CacheSessionProperties;\n","const { EntryPoint } = require('./entry-point');\nconst { ExitPoint } = require('./exit-point');\nconst { StateContext } = require('./state-context');\n\n/**\n * @classdesc\n * This class represents a state in a state machine.\n * @private\n */\nclass State extends StateContext {\n  /**\n   * @constructor\n   * @param {Object} spec Object specifier used to implement the named parameter\n   *  idiom.  In addition to the properties documented here, it is also expected\n   *  to have properties required by the [StateContext base class]{@link StateContext}.\n   * @param {String} spec.name The name of the state, used in debug logs.\n   * @param {State|StateMachine} spec.parentContext One of:\n   *  - The parent state object or;\n   *  - The stateMachine object for top-level states.\n   * @param {Object} [extensions] Additional methods to add to the state.\n   */\n  constructor(spec, extensions = null) {\n    super(spec);\n\n    const parentContext = spec.parentContext;\n    Object.assign(this.impl, {\n      parentContext,\n      reactions:            {},\n      entryPoints:          {},\n      exitPoints:           {},\n      ancestorList:         [...parentContext.getAncestorList(), this],\n      handleUnhandledEvent: e => (\n        parentContext.handleEvent\n          ? parentContext.handleEvent(e)\n          : parentContext.impl.handleUnhandledEvent(e)\n      ),\n    });\n    if (parentContext) this.log = parentContext.log.bind(this);\n\n    // Extend and bind functions\n    Object.keys(extensions || {}).forEach((k) => {\n      const extension = extensions[k];\n      this[k] = typeof extension === 'function' ? extension.bind(this) : extension;\n    });\n\n    this.setLogPadding(' '.repeat(this.impl.ancestorList.length));\n  }\n\n  /**\n   * Register a reaction function for a particular event.\n   * @param {String} eventName The name of the event func is to react to.\n   * @param {StateContext.reactionCallback} func The function to call when\n   *  the state processes an event with the name eventName.  The function is\n   *  bound to this object so that this refers to this state object when it\n   *  is invoked.\n   * @returns {State} This state object.\n   * @public\n   */\n  reaction(eventName, func) {\n    if (!eventName) throw new Error('No event name for reaction');\n    if (!func) throw new Error(`No reaction function for reaction ${eventName}`);\n\n    this.log(`Adding reaction to ${this} for event ${eventName}`);\n\n    if (this.impl.reactions[eventName]) {\n      this.log(`Replacing reaction ${this.impl.reactions[eventName]} with ${func}`);\n    }\n    this.impl.reactions[eventName] = func.bind(this);\n    return this;\n  }\n\n  /**\n   * Create an entryPoint for this state.\n   * @param {String} entryPointName The name of the entryPoint being created.\n   * @param {StateContext.reactionCallback} func The reaction to invoke after\n   *  the state is entered via this entryPoint\n   * @returns {State} This state object.\n   * @public\n   */\n  entryPoint(entryPointName, func) {\n    if (!entryPointName) throw new Error('No entry point name for entry point');\n    if (!func) throw new Error(`No reaction function for entry point ${entryPointName}`);\n\n    this.log(`Adding entryPoint ${entryPointName} to ${this}`);\n\n    if (this.impl.entryPoints[entryPointName]) {\n      this.log(`EntryPoint ${entryPointName} already exists in ${this}`);\n      return this;\n    }\n\n    this.impl.entryPoints[entryPointName] = new EntryPoint({\n      state: this,\n      entryPointName,\n      func,\n    });\n\n    return this;\n  }\n\n  /**\n   * Create an exitPoint for this state.\n   * @param {String} exitPointName The name of the exitPoint being created.\n   * @param {StateContext.reactionCallback} func The reaction to invoke after\n   *  the state is exited via this exitPoint.\n   * @returns {State} This state object.\n   * @public\n   */\n  exitPoint(exitPointName, func) {\n    if (!exitPointName) throw new Error('No exit point name for entry point');\n    if (!func) throw new Error(`No reaction function for exit point ${exitPointName}`);\n\n    this.log(`Adding exitPoint ${exitPointName} to ${this}`);\n\n    if (this.impl.exitPoints[exitPointName]) {\n      this.log(`ExitPoint ${exitPointName} already exists in  ${this}`);\n      return this;\n    }\n\n    this.impl.exitPoints[exitPointName] = new ExitPoint({\n      state: this,\n      exitPointName,\n      func,\n    });\n\n    return this;\n  }\n\n  /**\n   * @param {String} entryPointName The name of the entry point to be\n   *      transitioned to.\n   * @returns { StateContext } The state context to transition to when\n   *      entering via the state's entryPoint named entryPointName.\n   * @protected\n   */\n  getEntryPointDestState(entryPointName) {\n    if (this.impl.entryPoints[entryPointName] === undefined) {\n      this.log(`${this}: EntryPoint ${entryPointName} does not exist.`);\n      return this;\n    }\n\n    return this.impl.entryPoints[entryPointName].getDestState();\n  }\n\n  /**\n   * @param {String} exitPointName The name of the exit point to be\n   *      transitioned to.\n   * @returns {StateContext} The state context to transition to when\n   *      exiting via the state's exitPoint named exitPointName.\n   * @protected\n   */\n  getExitPointDestState(exitPointName) {\n    if (this.impl.exitPoints[exitPointName] === undefined) {\n      this.log(`${this}: ExitPoint ${exitPointName} does not exist.`);\n      return this;\n    }\n\n    return this.impl.exitPoints[exitPointName].getDestState();\n  }\n\n  /**\n   * Register a function to be called when the state is entered.\n   * @param {function} func The function to call when the state is entered.\n   *  The function is bound to this object so that this refers to this\n   *  state object when it is invoked.\n   * @returns {State} This state object.\n   * @public\n   */\n  entry(func) {\n    if (this.impl.appEntryFunc) {\n      this.log(`Replacing entry function ${this.impl.appEntryFunc} with ${func}`);\n    }\n    this.impl.appEntryFunc = func.bind(this);\n    return this;\n  }\n\n  /**\n   * Register a function to be called when the state is exited.\n   * @param {function} func The function to call when the state is exited.\n   *  The function is bound to this object so that this refers to this\n   *  state object when it is invoked.\n   * @returns {State} This state object.\n   * @public\n   */\n  exit(func) {\n    if (this.impl.appExitFunc) {\n      this.log(`Replacing exit function ${this.impl.appExitFunc} with ${func}`);\n    }\n    this.impl.appExitFunc = func.bind(this);\n    return this;\n  }\n\n  /**\n   * This is the same as [transitionTo]{@link StateContext#transitionTo},\n   * except the outermost state is exited if the source state is within the\n   * dest state or vice versa.  If one state is not within the other, this\n   * is equivalent to [transitionTo]{@link StateContext#transitionTo}.\n   * @param {State} state The state to transition to; if undefined, it is\n   *      a self-transition.\n   * @param {StateContext.actionCallback} [action] Optional The action to perform as part\n   *      of the transition, if desired.\n   * @returns {StateContext.ReactionResult} The result of the transition.\n   */\n  externalTransitionTo(state, action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: state,\n      action,\n      external:  true,\n    });\n  }\n\n  /**\n   * This is similar to [transitionTo]{@link StateContext#transitionTo}, except\n   * that this is a transition to a named entryPoint created on state.  If the\n   * named entryPoint does not exist, this is a malformed FSM and the behaviour\n   * is undefined.\n   * @param {State} state The state that has the named entryPoint.\n   * @param {String} entryPointName The name of the entryPoint of state.\n   * @param {StateContext.actionCallback} action The action to perform as part of\n   *      the transaction, if desired.\n   * @returns {StateContext.ReactionResult} The result of the transition\n   */\n  transitionToEntryPoint(state, entryPointName, action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: state.getEntryPointDestState(entryPointName),\n      action,\n    });\n  }\n\n  /**\n   * This is similar to [transitionTo]{@link StateContext#transitionTo}, except\n   * that this is a transition to a named exitPoint created on state.  If the\n   * named exitPoint does not exist, this is a malformed FSM and the behaviour\n   * is undefined.\n   * @param {State} state The state that has the named exitPoint.\n   * @param {String} exitPointName The name of the exitPoint of state.\n   * @param {StateContext.actionCallback} [action] Optional The\n   * action to perform as part of the transaction, if desired.\n   * @returns {StateContext.ReactionResult} The result of the transition\n   */\n  transitionToExitPoint(state, exitPointName, action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: state.getExitPointDestState(exitPointName),\n      action,\n    });\n  }\n\n  /**\n   * If a reaction evaluates the guard conditions for the reaction and none\n   * succeed, the eventUnhandled\n   * [ReactionResult]{@link StateContext.ReactionResult} should be\n   * returned.  This causes the FSM to continue looking for a reaction to\n   * process the event.\n   * @returns {StateContext.ReactionResult} The result of the transition\n   */\n  eventUnhandled() {\n    return new StateContext.ReactionResult({\n      caller: this,\n    });\n  }\n\n  /**\n   * This [ReactionResult]{@link StateContext.ReactionResult} is used\n   * when an event has been handled in a state and the transition is a local\n   * transition back to itself.  Note that internal transitions never cause\n   * state exits or entries -- if the internal transition is defined in an\n   * outer state that contains the active state, then the behaviour is as if the\n   * active state has inherited the internal transition from the outer state.\n   * @param {?Function} action The action to perform in the transition.\n   * @returns {StateContext.ReactionResult} The result of the transition\n   */\n  internalTransition(action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: this.getStateMachine().getCurrentState(),\n      action,\n    });\n  }\n\n  /**\n   * Used to terminate the FSM.\n   * @param {StateContext.actionCallback} action An optional action to\n   *      take within the FSM context after all states have been exited.\n   * @returns {StateContext.ReactionResult} The result of the transition\n   */\n  terminate(action) {\n    return new StateContext.ReactionResult({\n      caller:    this,\n      destState: this.getStateMachine().getFinalState(),\n      action,\n    });\n  }\n\n\n  /**\n   * @returns {StateContext} The parent state context for this state, which\n   *      could either be an outer state, or the state machine for top-level\n   *      states.\n   * @protected\n   */\n  getParent() {\n    return this.impl.parentContext;\n  }\n\n  /**\n   * Called when a state is being entered.  Calls the app's registered entry\n   * function, if any.\n   * @protected\n   */\n  onEntry() {\n    this.log(`Entering: ${this}`);\n    if (this.impl.appEntryFunc) {\n      this.impl.appEntryFunc();\n    }\n  }\n\n  /**\n   * Called when a state is being exited.  Calls the app's registered exit\n   * function, if any.\n   * @protected\n   */\n  onExit() {\n    this.log(`Exiting: ${this}`);\n    if (this.impl.appExitFunc) {\n      this.impl.appExitFunc();\n    }\n  }\n\n  /**\n   * Called when a state is to handle an event.\n   * @param {FsmEvent} e The event to handle.\n   * @returns {ReactionResult} The result of handling the event.\n   * @protected\n   */\n  handleEvent(e) {\n    this.log(`Process: ${e}`);\n    const reaction = this.impl.reactions[e.getName()];\n    if (reaction) {\n      const result = reaction(e);\n      // All ReactionResults in which an event is considered handled\n      // have a destState defined.\n      if (!result) {\n        this.log(`Reaction returned undefined: ${e} in ${this}`);\n      }\n      if (result.destState) {\n        this.log(`Handled: ${e}`);\n        return result;\n      }\n      this.log(`Unhandled: ${e} in ${this}`);\n    } else {\n      this.log(`No reaction: ${e} in ${this}`);\n    }\n\n    return this.impl.handleUnhandledEvent(e);\n  }\n}\n\nmodule.exports.State = State;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * An attribue of a {@link solace.Message}. Applications receive messages due to subscriptions on\n * topics, or consumers connected to durable objects.  The MessageCacheStatus of such messages is:\n * {@link solace.MessageCacheStatus.LIVE}.\n *\n * Message are also delivered to an application\n * as a result of a cache request (see {@link solace.CacheSession#sendCacheRequest}) which\n * have a MessageCacheStatus that is {@link solace.MessageCacheStatus.CACHED} or\n * {@link solace.MessageCacheStatus.SUSPECT}.\n *\n * The MessageCacheStatus is retrieved with {@link solace.Message#getCacheStatus}.\n *\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst MessageCacheStatus = {\n  /**\n   * The message is live.\n   * @type {Number}\n   */\n  LIVE:    0,\n  /**\n   * The message was retrieveed from a solCache Instance.\n   * @type {Number}\n   */\n  CACHED:  1,\n  /**\n   * The message was retrieved from a suspect solCache Instance.\n   * @type {Number}\n   */\n  SUSPECT: 2,\n\n};\n\nmodule.exports.MessageCacheStatus = Enum.new(MessageCacheStatus);\n","const { ErrorSubcode } = require('solclient-error');\nconst { Hex } = require('solclient-convert');\nconst { TransportSessionEventCode } = require('./transport-session-event-codes');\n\nconst { formatHexString } = Hex;\n\n/**\n * @classdesc\n * Defines a Transport Session Event\n *\n * @private\n */\nclass TransportSessionEvent {\n\n  /**\n   * @constructor\n   * @param {Object} tsEventCode The {@link TransportSessionEventCode} associated with this event\n   * @param {String} infoStr An informational string\n   * @param {?Number} responseCode The response code from the router, if any\n   * @param {ErrorSubcode} subcode The {@link ErrorSubcode} associated with this event\n   * @param {Number} sessionId The session ID associated with this event\n   *\n   */\n  constructor(tsEventCode, infoStr, responseCode, subcode, sessionId) {\n    this._transportEventCode = tsEventCode;\n    this._infoStr = infoStr;\n    this._responseCode = responseCode;\n    this._errorSubcode = subcode;\n    this._sid = sessionId;\n  }\n\n  // TransportSessionEvent functions\n\n  getTransportEventCode() {\n    return this._transportEventCode;\n  }\n\n  get transportEventCode() {\n    return this._transportEventCode;\n  }\n\n  getInfoStr() {\n    return this.infoStr;\n  }\n\n  get infoStr() {\n    return this._infoStr;\n  }\n\n  getResponseCode() {\n    return this.responseCode;\n  }\n\n  get responseCode() {\n    return this._responseCode;\n  }\n\n  getSubcode() {\n    return this.errorSubcode;\n  }\n\n  get errorSubcode() {\n    return this._errorSubcode;\n  }\n\n  getSessionId() {\n    return this.sessionId;\n  }\n\n  get sessionId() {\n    return this._sid;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'transportEventCode': TransportSessionEventCode.describe(this.transportEventCode),\n      'infoStr':            this.infoStr,\n      'responseCode':       this.responseCode,\n      'errorSubcode':       ErrorSubcode.describe(this.errorSubcode),\n      'sid':                this.sid && formatHexString(this.sid) || 'N/A',\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n\n}\n\nmodule.exports.TransportSessionEvent = TransportSessionEvent;\n","const SolclientFactoryLib = require('solclient-factory');\nconst { Convert } = require('solclient-convert');\nconst { SDTFieldType } = require('./sdt-field-types');\nconst { validateSdtField } = require('./validate-sdt-field');\n\nconst { anythingToBuffer } = Convert;\nconst { ProfileBinding } = SolclientFactoryLib;\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n *\n * Represents a SDT (Structured Data Type) field. To create an instance of an <code>SDTField</code>,\n * call {@link solace.SDTField.create}.\n *\n * SDTField objects are used in Solace Containers ({@link solace.SDTMapContainer}\n * and {@link solace.SDTStreamContainer}). The <b>deprecated</b> usage of\n * {@link solace.SDTMapContainer#addField} and {@link solace.SDTStreamContainer#addField}\n * take a SDTField object as an argument. The preferred usage is to pass a\n * {@link solace.SDTFieldType} and value as arguments.\n *\n * SDTField objectts must be used as an argument to {@link solace.Message#setSdtContainer}.\n * The only valid SDTField objects for {@link solace.Message#setSdtContainer} are:\n * * {@link solace.SDTFieldType.STREAM}\n * * {@link solace.SDTFieldType.MAP}\n * * {@link solace.SDTFieldType.STRING}\n * @hideconstructor\n * @memberof solace\n */\nclass SDTField {\n\n  /*\n   * @constructor\n   * @param {SDTFieldType} [type=SDTFieldType.NULLTYPE] The field type to construct\n   * @param {*} value The value to be encapsulated\n   * @throws {solace.OperationError} if value does not match type\n   * @private\n   */\n  constructor(type = SDTFieldType.NULLTYPE, value = null) {\n    const err = validateSdtField(type, value);\n    if (err !== null) {\n      throw (err);\n    }\n    this._type = type;\n    if (type === SDTFieldType.BYTEARRAY) {\n      this._value = anythingToBuffer(value);\n    } else {\n      this._value = value;\n    }\n    this._error = undefined;\n  }\n\n  /**\n   * Gets the type of field represented.\n   * @returns {solace.SDTFieldType} The type of field represented.\n   */\n  getType() {\n    return this._type;\n  }\n\n  /**\n   * Gets the field value.\n   * @returns {*} Field value (as one of the supported data types).\n   * @throws {solace.SDTUnsupportedValueError} if value found in the field\n   * is not in range supported by the platform/runtime.\n   */\n  getValue() {\n    if (this._error !== undefined) {\n      throw (this._error);\n    }\n    return this.getValueNoThrow();\n  }\n\n  /**\n   * Gets the field value or error object.\n   * @returns {*} Field value (as one of the supported data types) or\n   * {solace.SDTUnsupportedValueError} if value found in the field\n   * is not in range supported by the platform/runtime.\n   * @private\n   */\n  getValueNoThrow() {\n    if (this._error !== undefined) {\n      return this._error;\n    }\n    if (this._type === SDTFieldType.BYTEARRAY && ProfileBinding.value.byteArrayAsString) {\n      return this._value.toString('latin1');\n    }\n    return this._value;\n  }\n\n  /**\n   * Sets an error on the object to be thrown on getValue().\n   * Used only by parse-integer, as it is possible to receive\n   * 64 bit integers that cannot be represented in a javaScript number.\n   * JavaScript numbers are floats and can only hold a 48 bit integer.\n   * @private\n   * @param {solace.SDTUnsupportedValueError} err error object.\n   */\n  setError(err) {\n    this._error = err;\n  }\n\n  toString() {\n    return `[SDTField type:${this._type} value:${this._value}]`;\n  }\n\n  /**\n   * Create a new SDTField instance representing a Value of a given Type.\n   *\n   * @param {solace.SDTFieldType} type The type of field represented.\n   * @param {*} value The corresponding value to store in the field.\n   * @returns {solace.SDTField} The new SDT field with the given type and value\n   * @throws {solace.OperationError} if value does not match type\n   * @static\n   */\n  static create(type, value) {\n    return new SDTField(type, value);\n  }\n\n}\n\nmodule.exports.SDTField = SDTField;\n","const { assert } = require('solclient-eskit');\nconst { hostListDNSFilter } = require('./host-list-dns-filter');\nconst { LogFormatter } = require('solclient-log');\nconst { parseURL } = require('solclient-util');\n\nfunction parseURLs(rawURLs) {\n  if (Array.isArray(rawURLs)) {\n    return rawURLs.map(rawURL => parseURL(rawURL));\n  }\n  return parseURLs(rawURLs.split(/[,;]/));\n}\n\n/*\n *   \"When using a host list, each time the API works through the host list without establishing\n *    a connection is considered an connect retry.\"\n *   SESSION_CONNECT_RETRIES: \"When using a host list, this property defines how many times to\n *    try to connect or reconnect to a single host before moving to the next host in the list.\"\n *   Details: http://docs.solace.com/Solace-Messaging-APIs/Configuring-Connection-T.htm\n*/\n\n// In general:\n// * set initial state to invalid so that we begin needing a transition.\n// * preincrement all try counts on transition.\n// Specifics:\n// * Select try count for entire list based on whether we were connected.\n// * Try count per host is the same for both connect and reconnect.\n// * When the host changes, the waitTime is 0.\n// * Overriding the above, when the host pointer wraps to 0, the waitTime is nonzero.\n\nclass HostInfo {\n  constructor(props = { url: null, waitTime: 0 }) {\n    Object.assign(this, props);\n  }\n}\n\n/**\n * @private\n */\nclass HostList {\n  constructor({\n    url,\n    connectRetries,\n    reconnectRetries,\n    connectRetriesPerHost,\n    reconnectRetryWaitInMsecs,\n  } = {}) {\n    Object.assign(this, {\n      hosts: parseURLs(url).map(e => e.href),\n\n      // How many times will we traverse the host list without success?\n      // Try to connect one more than the 'retryCount' because we always try once.\n      connectTryCount: (connectRetries === -1\n        ? Number.POSITIVE_INFINITY\n        : connectRetries + 1\n      ),\n\n      // How many times will we traverse the host list after success?\n      reconnectTryCount: (reconnectRetries === -1\n        ? Number.POSITIVE_INFINITY\n        : reconnectRetries\n      ),\n\n      // A value of 1 in the next assignements means retry forever - \"null\" will mean that\n      // try to connect one more than the 'retryCount' because we always try once.\n      connectTryCountPerHost: (connectRetriesPerHost === -1\n        ? Number.POSITIVE_INFINITY\n        : connectRetriesPerHost + 1\n      ),\n\n      // How long do we wait before reattempting the same host or wrapping around the list?\n      reconnectRetryWaitInMsecs,\n\n      // Mutating operations affect only this.\n      _mutableState: {},\n\n      logger: new LogFormatter('[host-list]'),\n    });\n\n    // call this to initialize the _mutableState property\n    this.reset(); \n\n    assert(this.hosts.length >= 1);\n    assert(this.connectTryCount >= 1);\n    assert(this.reconnectTryCount >= 0);\n    assert(this.connectTryCountPerHost >= 1);\n  }\n\n  /**\n   * Call before first getNextHost() to validate that at least one URL contains a reachable\n   * hostname.\n   * @param {function(Error)} callback The callback to invoke when DNS resolution completes\n   */\n  resolveHosts(callback) {\n    const { LOG_TRACE, LOG_WARN } = this.logger;\n    hostListDNSFilter(this.hosts, (err, resolved) => {\n      // Exit immediately if the filter threw.\n      if (err) return callback(err);\n      assert(resolved.length === this.hosts.length, 'Resolve did not return a result for all hosts');\n\n      LOG_TRACE('Resolve result', resolved);\n      let succeeded = 0;\n      resolved.forEach((result) => {\n        if (result.address) {\n          ++succeeded;\n        }\n        if (!result.resolved) {\n          // Only log if the lookup was actually performed\n          return;\n        }\n        if (result.address) {\n          LOG_TRACE('DNS resolve OK:    ', result.address, 'for', result.url);\n        } else {\n          LOG_WARN('DNS resolve FAILED:', result.error.code,\n                   `${result.error.syscall}('${result.error.hostname}')`, 'for', result.url);\n        }\n      });\n      // finished DNS resolution checks\n      return callback(succeeded === 0 ? 'All hosts failed DNS resolution' : null);\n    });\n  }\n\n  /**\n   * @param {Object} state Properties for host selection logic\n   * @memberof HostList\n   */\n  reset(state = { wasConnected: false, disconnected: false }) {\n    // On reset, we always return to the beginning of the host list.\n    // This facilitates DR recovery by returning to the primary router.\n    // Set an invalid initial state that will trigger our first try.\n    Object.assign(this._mutableState, {\n      wasConnected: state.wasConnected,\n      disconnected: state.disconnected,\n      hostPointer:  0,\n      hostTries:    0,\n      listTries:    1,\n      exhausted:    false,\n      lastHostInfo: new HostInfo(),\n    });\n  }\n\n  /**\n   * !returns {HostInfo} Connection information for the next host.\n   * @returns {String} The URL for the next host\n   * @memberof HostList\n   */\n  getNextHost() {\n    const { LOG_TRACE } = this.logger;\n\n    const state = this._mutableState;\n    const wasConnected = state.wasConnected;\n    const lastHostInfo = state.lastHostInfo;\n\n    assert(lastHostInfo, 'Next host request with no prior host info -- did you call reset()?');\n    // Using a try/finally as a \"goto end\" to always log final state. Exceptions not expected\n    // here, although if an assertion fails, the finally log should be helpful.\n    try {\n      // If this was passed into reset, the session is telling us to enforce no more hosts.\n      if (state.disconnected) {\n        LOG_TRACE('Host list set to disconnected, providing null next host');\n        return null;\n      }\n\n      // If exhausted, this function has returned a null url already.\n      assert(!state.exhausted, 'Next host request after host list exhausted');\n\n      // Pull immutable properties from the instance\n      const properties = Object.assign({\n        hosts:        this.hosts,\n        hostTriesMax: this.connectTryCountPerHost,\n        listTriesMax: wasConnected ? this.reconnectTryCount : this.connectTryCount,\n      });\n\n      LOG_TRACE('Getting next host\\n', 'properties', properties, '\\nstate', state);\n      LOG_TRACE('Last host', lastHostInfo);\n\n      // Initial state was valid. This is a host try. Increment.\n      ++state.hostTries;\n      if (state.hostTries > properties.hostTriesMax) {\n        // Increment host pointer, possibly putting it out of bounds.\n        LOG_TRACE(`Exhausted ${state.hostTries} host tries for host ${lastHostInfo.url}.`);\n        ++state.hostPointer;\n        // If the host pointer is out of bounds, we are beginning a new list try.\n        // It was either set out of bounds deliberately by reset() or it was\n        // incremented out of bounds above.\n        if (state.hostPointer >= properties.hosts.length) {\n          // This is a new list try.\n          ++state.listTries;\n          if (state.listTries > properties.listTriesMax) {\n            // Beginning this list try has exceeded our inclusive max. The host list is\n            // exhausted.\n            LOG_TRACE(`Exhausted host list at ${properties.listTriesMax} traversals.`);\n            state.exhausted = true;\n          } else {\n            // Resetting the host pointer to begin this list try.\n            LOG_TRACE(`Host list try (${state.listTries}/${properties.listTriesMax})`);\n            state.hostPointer = 0;\n            state.hostTries = 1; // this is the first try for this host\n          }\n        } else {\n          state.hostTries = 1; // this is the first try for this host\n        }\n      } else {\n        // Continue with this host.\n        LOG_TRACE(`Host try (${state.hostTries}/${properties.hostTriesMax})`);\n      }\n\n      if (state.exhausted) {\n        LOG_TRACE('All hosts exhausted');\n        return null;\n      }\n\n      // Beyond this point, expect a valid host to be returned.\n\n      const url = properties.hosts[state.hostPointer];\n      assert(url, `No host at the host pointer! ${properties.hosts}[${state.hostPointer}]`);\n\n      // Wait time conditions:\n      // 1. On a new list (invalid lastHostInfo), zero waitTime.\n      const isNewList = lastHostInfo.url === null;\n      // 2a. On a new host, zero waitTime...\n      const isNewHost = lastHostInfo.url !== url;\n      // 2b. ...unless we are just restarting the list.\n      const didJustFinishList = lastHostInfo.url !== url && state.hostPointer === 0;\n      // (2b negates 2a for a new list)\n\n      const waitTime = (isNewList || (isNewHost && !didJustFinishList))\n        ? 0\n        : this.reconnectRetryWaitInMsecs;\n\n      // Session FSM was intended to use all of these, but handles its own events presently\n      // and expects waitTime to be a property of the list that mutates per host, so that is\n      // what is done.\n      const hostInfo = new HostInfo({\n        url,\n        waitTime,\n      });\n\n      // Set last host for next time, and return\n      LOG_TRACE('Returning host from', hostInfo);\n      state.lastHostInfo = hostInfo;\n      return hostInfo.url;\n    } finally {\n      LOG_TRACE('Final list state\\n', state);\n    }\n  }\n\n  get connectWaitTimeInMsecs() {\n    assert(this._mutableState.lastHostInfo.url, 'Getting connectWaitTimeInMsecs having never called getNextHostInfo');\n    return this._mutableState.lastHostInfo.waitTime;\n  }\n\n  currentHostToString() {\n    const state = this._mutableState;\n    const wasConnected = state.wasConnected;\n    // Pull immutable properties from the instance\n    const properties = Object.assign({\n      hosts:        this.hosts,\n      hostTriesMax: this.connectTryCountPerHost,\n      listTriesMax: wasConnected ? this.reconnectTryCount : this.connectTryCount,\n    });\n    // host pointer is zero based index into the host list\n    // so translate it to a human readable index\n    const hostNumber = state.hostPointer + 1;\n    return `host '${state.lastHostInfo.url}' (host ${hostNumber} of ${properties.hosts.length})(host connection attempt ${state.hostTries} of ${properties.hostTriesMax})(total ${wasConnected ? 'reconnection' : 'connection'} attempt ${state.listTries} of ${properties.listTriesMax})`;\n  }\n}\n\nmodule.exports.HostList = HostList;\n","/**\n * @module solace/fsm\n */\n\nconst { FsmEvent } = require('./lib/event');\nconst { State } = require('./lib/state');\nconst { StateMachine } = require('./lib/state-machine');\n\nmodule.exports.FsmEvent = FsmEvent;\nmodule.exports.State = State;\nmodule.exports.StateMachine = StateMachine;\n","const { BaseChecks } = require('./base-checks');\n\n/**\n *\n * Generates a then closure.\n *\n * @param {Boolean} doOp Whether the returned then function should call its argument.\n * @returns {Object} An object { then(fn, elseFn=undefined) }. If doOp was true, then(fn) will\n *                      call fn. If not, elseFn will be called if supplied.\n * @private\n */\nfunction thenGen(doOp) {\n  return {\n    then: doOp ? f => f() : (_, elseFn) => elseFn(),\n  };\n}\n\n/**\n *\n * none, anything, boolean, ... @returns {Boolean}\n * when(condition) @returns then(fn, elseFn) => if condition fn() else elseFn && elseFn()\n * unless(condition, else) @returns then(fn, elseFn) => if !condition fn() else elseFn && elseFn\n * whenNone, whenAnything, whenBoolean, ... @returns {function} then(fn, elseFn)\n * unlessNone, unlessAnything, unlessBoolean ... @returns {function} unless(fn, elseFn)\n * @private\n */\nconst Check = (() => {\n  const result = Object.assign({}, BaseChecks);\n  result.when = condition => thenGen(condition);\n  result.unless = condition => thenGen(!condition);\n  return result;\n})();\n\nmodule.exports.Check = Check;\n","const { Base64, Convert } = require('solclient-convert');\nconst { XHRFactory } = require('./xhr-factory');\n\nconst { encode: base64Encode } = Base64;\nconst { stringToUint8Array } = Convert;\n\nfunction sendXhrBinaryMSIE10(xhr, data, contentType) {\n  xhr.responseType = 'arraybuffer';\n  xhr.overrideMimeType(`${contentType}; charset=x-user-defined`);\n  xhr.setRequestHeader('Content-Type', `${contentType}; charset=x-user-defined`);\n  xhr.send(stringToUint8Array(data));\n}\n\nfunction sendXhrBinaryXHR2(xhr, data, contentType) {\n  xhr.overrideMimeType(`${contentType}; charset=x-user-defined`);\n  xhr.setRequestHeader('Content-Type', `${contentType}; charset=x-user-defined`);\n  xhr.send(stringToUint8Array(data).buffer);\n}\n\nfunction sendXhrText(xhr, data, contentType, connClose) {\n  xhr.setRequestHeader('Content-Type', `${contentType}; charset=x-user-defined`);\n  xhr.send(data === null || data === undefined ? data : base64Encode(data), connClose);\n}\n\nconst sendXhrBinary = (() => {\n  // Uint8Array is probably shimmed by core-js. We don't use window.Blob, but\n  // it is a Working Draft, not  part of ES6, and not shimmed by core-js.\n  // Therefore it makes a workable canary for IE10 detection.\n  if (typeof window !== 'undefined' && window.Uint8Array && window.Blob /* !ie9 */) {\n    const xhr = XHRFactory.create(true);\n    if (xhr.responseType /* ie10 */) {\n      return sendXhrBinaryMSIE10;\n    }\n    return sendXhrBinaryXHR2;\n  }\n  return sendXhrText;\n})();\n\nmodule.exports.sendXhrBinary = sendXhrBinary;\nmodule.exports.sendXhrText = sendXhrText;\n","const { ArrayOperations } = require('./lib/array-operations');\nconst { assert } = require('./lib/assert');\nconst { BidiMap } = require('./lib/bidi-map');\nconst { Enum } = require('./lib/enum');\nconst { Iterator } = require('./lib/iterator');\nconst { Lazy } = require('./lib/lazy');\nconst { makeMap } = require('./lib/make-map');\nconst { Mixin } = require('./lib/mixin');\nconst { Resolver } = require('./lib/resolver');\nconst { SetOperations } = require('./lib/set-operations');\n\nmodule.exports.assert = assert;\nmodule.exports.ArrayOperations = ArrayOperations;\nmodule.exports.BidiMap = BidiMap;\nmodule.exports.Enum = Enum;\nmodule.exports.Iterator = Iterator;\nmodule.exports.Lazy = Lazy;\nmodule.exports.makeIterator = Iterator.makeIterator;\nmodule.exports.makeMap = makeMap;\nmodule.exports.Mixin = Mixin;\nmodule.exports.mixin = Mixin.mixin;\nmodule.exports.Resolver = Resolver;\nmodule.exports.resolve = Resolver.resolve;\nmodule.exports.SetOperations = SetOperations;\n","const { ErrorSubcode, OperationError } = require('solclient-error');\nconst { SDTField } = require('./sdt-field');\n\n/**\n * @classdesc\n * Defines a Structured Data Type (SDT) map container.\n * @memberof solace\n */\nclass SDTMapContainer {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this._map = []; // key-value mappings (keys are strings)\n  }\n\n  /**\n   * Get the list of keys in this map, in unspecified order.\n   * @returns {Array.<String>} Array of defined keys in the map.\n   */\n  getKeys() {\n    return Object.keys(this._map);\n  }\n\n  /**\n   * Return the SDTField with the given key.\n   * @param {String} key The key to look up.\n   * @returns {solace.SDTField} The field referenced by key.\n   */\n  getField(key) {\n    return this._map[key];\n  }\n\n  /**\n   * Delete an SDTField with the given key.\n   * @param {String} key The field key to delete.\n   */\n  deleteField(key) {\n    delete this._map[key];\n  }\n\n  /**\n   * Adds a field to this map. If a key:value mapping already exists for this key, it is replaced.\n   * <p>\n   * <b>Deprecated</b> If <code>typeOrField</code> is a {@link solace.SDTField} instance,\n   * it is added to the map.\n   *\n   * The preferred usage is to pass a {@link solace.SDTFieldType}, then the API will create a\n   * SDTField of this type using <code>value</code> before adding it to the map.\n   *\n   * @param {String} key The key by which to store the given value.\n   * @param {solace.SDTField|solace.SDTFieldType} typeOrField A SDTField instance or SDTFieldType.\n   * @param {*} [value] The value to wrap as an SDTField.\n   * @throws {solace.OperationError} if value does not match type\n   * @throws {solace.SDTUnsupportedValueError} if value is not in range\n   *  supported by the platform/runtime\n   */\n  addField(key, typeOrField, value = undefined) {\n    if (typeOrField instanceof SDTField) {\n      this._map[key] = typeOrField;\n      return;\n    } else if (typeof value !== 'undefined') {\n      this._map[key] = SDTField.create(typeOrField, value);\n      return;\n    }\n    throw new OperationError('Invalid parameters to addField: expected SDTField, or type and value',\n      ErrorSubcode.PARAMETER_CONFLICT);\n  }\n}\n\nmodule.exports.SDTMapContainer = SDTMapContainer;\n","\nconst EncodeInteger = {};\n\nEncodeInteger.int48ToStr = function int48ToStr(vIn) {\n  let v = vIn;\n  const bytes = [];\n  for (let i = 0; i < 6; i++) {\n    const byteI = (v % 256);\n    v = Math.floor(v / 256);\n    bytes.push(String.fromCharCode(byteI));\n  }\n  bytes.reverse();\n  return bytes.join('');\n};\n\nmodule.exports.EncodeInteger = EncodeInteger;\n","const P2PUtil = {\n  getP2PInboxTopic(base) {\n    return (`${base}/_`);\n  },\n  getP2PTopicSubscription(base) {\n    return (`${base}/>`);\n  },\n};\n\nmodule.exports.P2PUtil = P2PUtil;\n","const { ContentSummaryType } = require('./content-summary-types');\nconst { Decode } = require('./decode');\nconst { Encode } = require('./encode');\nconst { ParamParse } = require('./param-parse');\nconst { ParseSMF } = require('./parse-smf');\nconst { Transport } = require('./transport');\n\nmodule.exports.ContentSummaryType = ContentSummaryType;\nmodule.exports.Encode = Encode;\nmodule.exports.Decode = Decode;\nmodule.exports.ParamParse = ParamParse;\nmodule.exports.ParseSMF = ParseSMF;\nmodule.exports.Transport = Transport;\n\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumeration of CacheReturnSubcode types.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst CacheReturnSubcode = {\n  /**\n   * @type {Number}\n   * @description\n   * The cache request completed successfully.\n   */\n  REQUEST_COMPLETE:            0,\n  /**\n   * @type {Number}\n   * @description\n   * The cache request completed when live data arrived on the topic requested.\n   */\n  LIVE_DATA_FULFILL:           1,\n  /**\n   * @type {Number}\n   * @description\n   * The cache instance or session returned an error response to the cache request.\n   */\n  ERROR_RESPONSE:              2,\n  /**\n   * @type {Number}\n   * @description\n   * The cache request failed because the {@link Session} used to construct it has been\n   * disposed.\n   */\n  INVALID_SESSION:             3,\n  /**\n   * @type {Number}\n   * @description\n   * The cache request failed because the request timeout expired.\n   */\n  REQUEST_TIMEOUT:             4,\n  /**\n   * @type {Number}\n   * @description\n   * The cache request was made on the same topic as an existing request, and\n   * {@link CacheLiveDataAction.FLOW_THRU} was not set.\n   */\n  REQUEST_ALREADY_IN_PROGRESS: 5,\n  /**\n   * @type {Number}\n   * @description\n   * The cache reply returned no data.\n   */\n  NO_DATA:                     6,\n  /**\n   * @type {Number}\n   * @description\n   * The cache reply returned suspect data.\n   */\n  SUSPECT_DATA:                7,\n  /**\n   * @type {Number}\n   * @description\n   * The request was terminated because the cache session was disposed.\n   */\n  CACHE_SESSION_DISPOSED:      8,\n  /**\n   * @type {Number}\n   * @description\n   * The request was terminated because the subscription request for the specified topic failed.\n   */\n  SUBSCRIPTION_ERROR:          9,\n};\n\nmodule.exports.CacheReturnSubcode = Enum.new(CacheReturnSubcode);\n","const { Enum, assert } = require('solclient-eskit');\nconst { MessageOutcome } = require('solclient-message');\nconst { LOG_DEBUG, LOG_ERROR } = require('solclient-log');\n\n/**\n * @private\n */\nconst ApplicationAckState = Enum.new({\n  UNACKED:        'UNACKED',\n  ACKED_NOT_SENT: 'ACKED_NOT_SENT',\n  ACKED_SENT:     'ACKED_SENT',\n});\n\n// For the ring buffer update index, we have two key-value options:\n//  Map() - generally faster where supported\n//  Object - seems to automatically coerce keys to string, which is what we want in this case\n// By using Map and explicly creating a .key attribute and using it whenever possible,\n// we should get performance that is no worse than Object, which may have to perform that\n// coercion more often.\n\n/**\n * @private\n */\nclass ApplicationAck {\n  constructor(id, state, settlementOutcome) {\n    if (id) {\n      this.exists = true;\n      this.id = id;\n      this.key = id.toString();\n      this.state = state || ApplicationAckState.UNACKED;\n      this.settlementOutcome = settlementOutcome || MessageOutcome.ACCEPTED;\n    } else {\n      this.exists = false;\n    }\n  }\n\n  set(id, state, settlementOutcome = undefined) {\n    this.exists = true;\n    this.id = id;\n    this.key = id.toString();\n    this.state = state || ApplicationAckState.UNACKED;\n    this.settlementOutcome = (settlementOutcome !== undefined) ? settlementOutcome : null; // outcome not yet set at point of insertion\n  }\n\n  clear() {\n    this.exists = false;\n    this.id = null;\n    this.key = null;\n    this.state = null;\n    this.settlementOutcome = null;\n  }\n}\n\n/**\n * @private\n */\nclass ApplicationAckRingBuffer {\n  /**\n   * Creates an instance of ApplicationAckRingBuffer. A standard ring buffer except that\n   * it reserves an empty entry so that an operation can occur during insert that includes\n   * both the new element and any element to be evicted. Also includes an ID-to-index map\n   * to speed updates.\n   *\n   * @param {Number} size The number of entries in the ring. Effective size is (size - 1).\n   * @memberof ApplicationAckRingBuffer\n   */\n  constructor(size) {\n    LOG_DEBUG('Creating application ack ring buffer with size ', size, ' retained size', size - 1);\n    assert(size >= 2); // one always free doesn't work with < 2 elements\n    this._size = size;\n    this._insertIndex = 0;\n    /**\n     * @property {Array.<?ApplicationAck>}\n     */\n    this._buffer = Array(size).fill(null).map(() => new ApplicationAck());\n    /**\n     * @property {Map.<String, Number>}\n     */\n    this._index = new Map();\n  }\n\n  reset() {\n    this._insertIndex = 0;\n    this._buffer.forEach((ack) => { ack.exists = false; });\n    this._index.clear();\n  }\n\n  /**\n   * @param {Long} id The id of the new entry\n   * @param {function(ApplicationAck)} beforeEvictCallback Call this before operation completes\n   * @returns {any} Return value of beforeEvictCallback\n   * @private\n   */\n  insert(id, beforeEvictCallback) {\n    assert(beforeEvictCallback);\n    assert(id);\n\n    const size = this._size;\n    const buffer = this._buffer;\n    const index = this._index;\n    const insertIndex = this._insertIndex;\n\n    /*\n     * Because of the postprocessing step, we are not re-entrant safe. It is expected\n     * that we are called from TCP -> Transport -> Session -> acceptMessage().\n     * This assert verifies that the postprocess cleanup has happened.\n     */\n    assert(!buffer[insertIndex].exists, 'Invariant not enforced (before): insert index not empty');\n\n    // First, insert.\n    const inserting = buffer[insertIndex];\n    inserting.set(id, ApplicationAckState.UNACKED);\n    if (index.has(inserting.key)) {\n      LOG_ERROR(`Duplicate ID: ${index.get(inserting.key)} insertIndex: ${insertIndex}`);\n    }\n    index.set(inserting.key, insertIndex);\n\n    const evictingIndex = (insertIndex + 1) % size;\n    const evicting = buffer[evictingIndex];\n    let result;\n    try {\n      result = beforeEvictCallback(evicting.exists ? evicting : null);\n    } finally {\n      // Always clean up to keep the RB in a consistent state.\n      // If inProgressCallback threw, this runs before the exception propagates.\n\n      // Update insert index for next operation.\n      this._insertIndex = (insertIndex + 1) % size;\n\n      if (evicting.exists) {\n        index.delete(evicting.key);\n        evicting.clear();\n      }\n    }\n\n    assert(!buffer[this._insertIndex].exists, 'Invariant not enforced (after): insert index not empty');\n    return result;\n  }\n\n  /**\n   * Returns the number of elements in this ringbuffer. Will increase to\n   * one less than the size provided to the constructor as the buffer is used.\n   *\n   * @readonly\n   * @memberof ApplicationAckRingBuffer\n   */\n  get length() {\n    return this._index.size;\n  }\n\n  /**\n   * Returns the first element in the ring buffer.\n   *\n   * This could be called from the evict callback, so insert needs to be sure\n   * that internal state is correct for that scenario.\n   *\n   * The expected case is that the first element is at insertIndex + 1, but if the\n   * buffer has not been filled yet, we will iterate the buffer and skip nonexistent\n   * elements to find it.\n   *\n   * This is a little inefficient until we have received this._size messages, but after\n   * that it is more efficient than maintaining a read pointer.\n   *\n   * @returns {?ApplicationAck} The first ack in the buffer.\n   */\n  front() {\n    if (this.length === 0) return null;\n\n    const buffer = this._buffer;\n    const insertIndex = this._insertIndex;\n    const size = this._size;\n    const firstIndex = (insertIndex + 1) % size;\n    // Cannot assert invariant here: insert is usually in progress.\n\n    // Buffer full case\n    if (buffer[firstIndex].exists) return buffer[firstIndex];\n\n    // Not yet filled case\n    // The last checked element for the iteration is the start point,\n    //  plus size, a full lap including the start index,\n    //  minus 1, to exclude the start\n    //  minus 1, to exclude the invariant null entry\n    for (let rawIndex = firstIndex, lastIndex = firstIndex + size - 1;\n         rawIndex <= lastIndex;\n         ++rawIndex) {\n      const readIndex = rawIndex % size;\n      const element = buffer[readIndex];\n      if (element.exists) {\n        return element;\n      }\n    }\n\n    // Buffer is completely empty\n    assert(this._index.size === 0, '#front() failed so buffer must be empty');\n    return null;\n  }\n\n  /**\n   * Rather than implementing the iterator protocol, which requires Symbol support,\n   * we'll implement a forEach that behaves as though this is an array.\n   *\n   * @param {function(ApplicationAppState, index, collection)} callback The iteration callback\n   */\n  forEach(callback) {\n    if (this.length === 0) return;\n\n    const buffer = this._buffer;\n    const size = this._size;\n    let index = 0;\n\n    for (let rawIndex = this._insertIndex + 1, lastIndex = this._insertIndex + size;\n         rawIndex <= lastIndex;\n         ++rawIndex) {\n      const readIndex = rawIndex % size;\n      const element = buffer[readIndex];\n      if (element.exists) {\n        callback(element, index++, this);\n      }\n    }\n\n    assert(index > 0, 'Not empty but did not dispatch');\n  }\n\n  /**\n   * @param {Long} id The ID to update\n   * @param {ApplicationAckState} state The new state for the ID\n   * @param {?MessageOutcome} settlementOutcome where available, update the settlement outcome for the ID\n   * @private\n   */\n  updateAckState(id, state, settlementOutcome = undefined) {\n    const key = id.toString(); assert(this._index.has(key), 'Ack key not found');\n    const buffer = this._buffer;\n    const updateIndex = this._index.get(key);\n    const existing = buffer[updateIndex]; assert(existing, 'Ack key has no entry');\n    existing.state = state;\n    // where available, update the settlement outcome too\n    if(settlementOutcome != undefined) {\n      existing.settlementOutcome = settlementOutcome;\n    } else if(state === ApplicationAckState.ACKED_NOT_SENT) {\n      // set default settlement outcome to ACCEPTED for ACKed messages if no outcome available\n      existing.settlementOutcome = MessageOutcome.ACCEPTED;\n    }\n  }\n\n  /**\n   * @param {Long} id The ID to look up\n   * @returns {Boolean} `true` if this ID exists in the ringbuffer\n   */\n  has(id) {\n    const key = id.toString();\n    return this._index.has(key);\n  }\n}\n\nObject.assign(module.exports, {\n  ApplicationAckState,\n  ApplicationAck,\n  ApplicationAckRingBuffer,\n});\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nWebSocket.WebSocket = WebSocket;\nWebSocket.WebSocketServer = WebSocket.Server;\n\nmodule.exports = WebSocket;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFParameterType = {\n  // SMF parameter types 5 bit types\n  PADDING:                  0x00,\n  PUBLISHER_ID:             0x01,\n  PUBLISHER_MSGID:          0x02,\n  MESSAGEPRIORITY:          0x03,\n  USERDATA:                 0x04,\n  USERNAME:                 0x06,\n  PASSWORD:                 0x07,\n  RESPONSE:                 0x08,\n  SUB_ID_LIST:              0x0A,\n  GENERIC_ATTACHMENT:       0x0B,\n  BINARY_ATTACHMENT:        0x0C,\n  DELIVERY_MODE:            0x10,\n  ASSURED_MESSAGE_ID:       0x11,\n  ASSURED_PREVMESSAGE_ID:   0x12,\n  ASSURED_REDELIVERED_FLAG: 0x13,\n  MESSAGE_CONTENT_SUMMARY:  0x16,\n  ASSURED_FLOWID:           0x17,\n  TR_TOPICNAME:             0x18,\n  AD_FLOWREDELIVERED_FLAG:  0x19,\n  AD_TIMETOLIVE:            0x1C,\n  AD_TOPICSEQUENCE_NUMBER:  0x1e,\n  EXTENDED_TYPE_STREAM:     0x1f,\n  /* extended parameters 12 bit types */\n  AD_ACK_MESSAGE_ID:        0x29,\n  AD_SPOOLER_UNIQUE_ID:     0x2c,\n  AD_REPL_MATE_ACK_MSGID:   0x2d,\n  AD_REDELIVERY_COUNT:      0x2e,\n\n  /* light wieght parameters */\n  LIGHT_CORRELATION:       0x00,\n  LIGHT_TOPIC_NAME_OFFSET: 0x01,\n  LIGHT_QUEUE_NAME_OFFSET: 0x02,\n  LIGHT_ACK_IMMEDIATELY:   0x03,\n};\n\nconst SMFExtendedParameterType = {\n  // SMFv3 Extended parameters inside the Extended Type Stream\n//Not supported yet\n//  GSS_API_TOKEN:        0x28,\n//  AD_ACK_MESSAGE_ID:    0x29,\n//  AD_TRANSACTION_ID:    0x2a,\n//  AD_TRANSACTION_FLAGS: 0x2b,\n  OAUTH2_ISSUER_IDENTIFIER: 0x2f,\n  OIDC_ID_TOKEN:            0x30,\n  OAUTH2_ACCESS_TOKEN:      0x31,\n  PARTITION_KEY_HASH:       0x35, // @Todo: not yet implemented as improvement for PQ\n  TS_TRANSPORT_CONTEXT:     0x36,\n};\n\nmodule.exports.SMFParameterType = Enum.new(SMFParameterType);\nmodule.exports.SMFExtendedParameterType = Enum.new(SMFExtendedParameterType);\n","module.exports.Long = require('long');\n","const { FsmObject } = require('./object');\n\nclass FsmEvent extends FsmObject {\n}\n\nmodule.exports.FsmEvent = FsmEvent;\n","/**\n * <h1> Overview </h1>\n *\n * This is the Solace Corporation Messaging API for JavaScript. Concepts defined in this API are\n * similar to those defined in other Solace Messaging APIs for Java, C, and .NET.\n *\n * <h1> Concepts </h1>\n *\n * Some general concepts:\n *\n * <li> All function calls are non-blocking; confirmation, if requested, is returned to the calling\n * client application in the form of callbacks. </li>\n *\n */\n\n/* _eslint-disable sort-requires/sort-requires */\n\n// -------------------------- Solclient Factory ------------------------------\n// Load me before the rest of the API as a plug-in point for modules\nconst FactoryLib = require('solclient-factory');\n// ---------------------------------------------------------------------------\n\nconst {\n  SolclientFactory,\n  SolclientFactoryProfiles,\n  SolclientFactoryProperties,\n} = FactoryLib;\n\nconst {\n  Long,\n} = require('solclient-convert');\nconst {\n  Destination,\n  DestinationType,\n  Topic,\n} = require('solclient-destination');\nconst {\n  ErrorSubcode,\n  NotImplementedError,\n  OperationError,\n  RequestError,\n  RequestEventCode,\n} = require('solclient-error');\nconst {\n  makeIterator,\n} = require('solclient-eskit');\nconst {\n  ConsoleLogImpl,\n  LogImpl,\n  LogLevel,\n} = require('solclient-log');\nconst {\n  Message,\n  MessageCacheStatus,\n  MessageDeliveryModeType,\n  MessageDumpFlag,\n  MessageOutcome,\n  MessageType,\n  MessageUserCosType,\n  ReplicationGroupMessageId,\n} = require('solclient-message');\nconst {\n  MessageConsumer,\n  MessageConsumerAcknowledgeMode,\n  MessageConsumerEventName,\n  MessageConsumerProperties,\n  QueueBrowser,\n  QueueBrowserEventName,\n  QueueBrowserProperties,\n} = require('solclient-message-consumer');\nconst {\n  ReplayStartLocation,\n  ReplayStartLocationBeginning,\n} = require('solclient-replaystart');\nconst {\n  MessagePublisherAcknowledgeMode,\n  MessagePublisherProperties,\n} = require('solclient-message-publisher');\nconst {\n  Baggage,\n  TraceContext,\n  TraceContextSetter,\n} = require('solclient-message-tracing');\nconst {\n  AbstractQueueDescriptor,\n  QueueAccessType,\n  QueueDescriptor,\n  QueueDiscardBehavior,\n  QueuePermissions,\n  QueueProperties,\n  QueueType,\n  EndpointNameComplaint,\n} = require('solclient-queue');\nconst {\n  SDTField,\n  SDTFieldType,\n  SDTMapContainer,\n  SDTStreamContainer,\n  SDTUnsupportedValueError,\n  SDTValueErrorSubcode,\n} = require('solclient-sdt');\nconst {\n  AuthenticationScheme,\n  CapabilityType,\n  MessageRxCBInfo,\n  MutableSessionProperty,\n  Session,\n  SessionEvent,\n  SessionEventCBInfo,\n  SessionEventCode,\n  SessionProperties,\n  SessionState,\n  SslDowngrade,\n} = require('solclient-session');\nconst {\n  CacheCBInfo,\n  CacheLiveDataAction,\n  CacheRequestResult,\n  CacheReturnCode,\n  CacheReturnSubcode,\n  CacheSession,\n  CacheSessionProperties,\n} = require('solclient-solcache-session');\nconst {\n  StatType,\n} = require('solclient-stats');\nconst {\n  TransportError,\n  TransportProtocol,\n} = require('solclient-transport');\nconst {\n  Version,\n} = require('solclient-util');\n\n// --------------------------- Internal API -- do not use --------------------\n// Load me last. I disappear in production mode\nconst _internal = require('./api-internal.js');\n// ---------------------------------------------------------------------------\n\n\n/**\n * @namespace\n * @public\n */\nconst solace = {\n  AbstractQueueDescriptor,\n  AuthenticationScheme,\n  Baggage,\n  CacheCBInfo,\n  CacheLiveDataAction,\n  CacheRequestResult,\n  CacheReturnCode,\n  CacheReturnSubcode,\n  CacheSession,\n  CacheSessionProperties,\n  CapabilityType,\n  ConsoleLogImpl,\n  Destination,\n  DestinationType,\n  ErrorSubcode,\n  LogImpl,\n  LogLevel,\n  Long,\n  Message,\n  MessageCacheStatus,\n  MessageConsumer,\n  MessageConsumerAcknowledgeMode,\n  MessageConsumerEventName,\n  MessageConsumerProperties,\n  MessageDeliveryModeType,\n  MessageDumpFlag,\n  MessageOutcome,\n  MessagePublisherAcknowledgeMode,\n  MessagePublisherProperties,\n  MessageRxCBInfo,\n  MessageType,\n  MessageUserCosType,\n  MutableSessionProperty,\n  NotImplementedError,\n  OperationError,\n  QueueAccessType,\n  QueueBrowser,\n  QueueBrowserEventName,\n  QueueBrowserProperties,\n  QueueDescriptor,\n  QueueDiscardBehavior,\n  QueuePermissions,\n  QueueProperties,\n  QueueType,\n  EndpointNameComplaint,\n  ReplayStartLocation,\n  /*\n   * This should not be here ReplayStartLocationBeginning should not be a publicly exposed type.\n   * This type must remain for backwards compatibility however it was never indented for use\n   * by applications.\n   * */\n  ReplayStartLocationBeginning,\n  ReplicationGroupMessageId,\n  RequestError,\n  RequestEventCode,\n  SDTField,\n  SDTFieldType,\n  SDTMapContainer,\n  SDTStreamContainer,\n  SDTUnsupportedValueError,\n  SDTValueErrorSubcode,\n  Session,\n  SessionEvent,\n  SessionEventCBInfo,\n  SessionEventCode,\n  SessionProperties,\n  SessionState,\n  SolclientFactory,\n  SolclientFactoryProfiles,\n  SolclientFactoryProperties,\n  SslDowngrade,\n  StatType,\n  Topic,\n  TraceContext,\n  TraceContextSetter,\n  TransportError,\n  TransportProtocol,\n  Version,\n\n  makeIterator,\n\n  _internal, //\n};\n\nObject.assign(module.exports, solace);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * An enumeration of all SDT data types.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst SDTFieldType = {\n  /**\n   * @type {Number}\n   * @description Maps to a boolean.\n   */\n  BOOL:        0,\n  /**\n   * @type {Number}\n   * @description Maps to a number.\n   */\n  UINT8:       1,\n  /**\n   * @type {Number}\n   * @description Maps to a number.\n   */\n  INT8:        2,\n  /**\n   * @type {Number}\n   * @description Maps to a number.\n   */\n  UINT16:      3,\n  /**\n   * @type {Number}\n   * @description Maps to a number.\n   */\n  INT16:       4,\n  /**\n   * @type {Number}\n   * @description Maps to a number.\n   */\n  UINT32:      5,\n  /**\n   *@type {Number}\n   * @description Maps to a number.\n   */\n  INT32:       6,\n  /**\n   * @type {Number}\n   * @description Maps to a number. <br>\n   * <strong>Warning:</strong> Supports 48-bit integers (range: 0 to 2<sup>48</sup>-1).\n   * When decoding, only the lower 48 bits are considered significant.\n   */\n  UINT64:      7,\n  /**\n   * @type {Number}\n   * @description Maps to a number. <br>\n   * <strong>Warning:</strong> Supports 48-bit integers + sign (range: -(2<sup>48</sup>-1) to\n   * 2<sup>48</sup>-1). When decoding, only the lower 48 bits are considered significant.\n   */\n  INT64:       8,\n  /**\n   * @type {Number}\n   * @description A single character; maps to a string.\n   */\n  WCHAR:       9,\n  /**\n   * @type {Number}\n   * @description Maps to a string.\n   */\n  STRING:      10,\n  /**\n   * @type {Number}\n   * @description Maps to a Uint8Array.\n   *\n   * Backward compatibility note:\n   * Using the version_10 factory profile or older, the getValue() method of a BYTEARRAY sdtField\n   * returns the byte array in 'latin1' String representation.\n   * Later profiles return a Uint8Array (in the form of a nodeJS Buffer instance in fact)\n   *\n   * When creating a field of type BYTEARRAY, the following datatypes are all accepted as value:\n   *   Buffer (the nodeJS native type or equivalent)\n   *   ArrayBuffer,\n   *   Any DataView or TypedArray,\n   *   'latin1' String for backwards compatibility:\n   *     each character has a code in the range 0-255\n   *     representing exactly one byte in the attachment.\n   */\n  BYTEARRAY:   11,\n  /**\n   * @type {Number}\n   * @description Single-precision float; maps to a number.\n   */\n  FLOATTYPE:   12,\n  /**\n   * @type {Number}\n   * @description Double-precision float; maps to a number.\n   */\n  DOUBLETYPE:  13,\n  /**\n   * @type {Number}\n   * @description Maps to {@link SDTMapContainer}.\n   */\n  MAP:         14,\n  /**\n   * @type {Number}\n   * @description Maps to {@link SDTStreamContainer}.\n   */\n  STREAM:      15,\n  /**\n   * @type {Number}\n   * @description Maps to {@link Destination}.\n   */\n  DESTINATION: 16,\n  /**\n   * @type {Number}\n   * @description Maps to <code>null</code>.\n   */\n  NULLTYPE:    17,\n  /**\n   * @type {Number}\n   * @description Maps to an unknown type.\n   */\n  UNKNOWN:     18,\n  /**\n   * @type {Number}\n   * @description Maps to an encoded SMF message.\n   */\n  SMF_MESSAGE: 19,\n};\n\nmodule.exports.SDTFieldType = Enum.new(SDTFieldType);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst CacheGetResultCode = {\n  INVALID: 0,\n  OK:      1,\n};\n\nmodule.exports.CacheGetResultCode = Enum.new(CacheGetResultCode);\n","/* eslint-disable no-restricted-syntax */\n\nfunction isSuperset(set, subset) {\n  return Array.from(subset).every(elem => set.has(elem));\n}\n\nfunction inplaceUnion(setA, setB) {\n  setB.forEach((elem) => {\n    setA.add(elem);\n  });\n  return setA;\n}\n\nfunction union(setA, setB) {\n  return inplaceUnion(new Set(setA), setB);\n}\n\nfunction inplaceIntersection(setA, setB) {\n  setA.forEach((elem) => {\n    if (!setB.has(elem)) {\n      setA.delete(elem);\n    }\n  });\n  return setA;\n}\n\nfunction intersection(setA, setB) {\n  return new Set(Array.from(setA).filter(elem => setB.has(elem)));\n}\n\nfunction inplaceDifference(setA, setB) {\n  setB.forEach((elem) => {\n    setA.delete(elem);\n  });\n  return setA;\n}\n\nfunction difference(setA, setB) {\n  return new Set(Array.from(setA).filter(elem => !setB.has(elem)));\n}\n\nmodule.exports = {\n  SetOperations: {\n    inplaceDifference,\n    inplaceIntersection,\n    inplaceUnion,\n    isSuperset,\n    difference,\n    intersection,\n    union,\n  },\n}\n;\n","const { CompressedTransport } = require('./transport-compression');\nconst { TcpRawTransport } = require('./transport-tcp-plaintext');\nconst { TcpTlsTransport } = require('./transport-tcp-tls');\nconst { TlsOnlyTransport } = require('./transport-tls');\n\nmodule.exports.TcpRawTransport = TcpRawTransport;\nmodule.exports.CompressedTransport = CompressedTransport;\nmodule.exports.TlsOnlyTransport = TlsOnlyTransport;\nmodule.exports.TcpTlsTransport = TcpTlsTransport;\n","const Long = require('long');\n\nconst { ErrorSubcode, OperationError } = require('solclient-error');\n\n// eslint-disable-next-line global-require\nconst BufferImpl = require('buffer').Buffer;\n\n/**\n * @module\n * ===========================================================================\n * Convert\n *\n * This collection of functions performs all required string to number and number to string\n * conversions\n * ============================================================================\n * @private\n */\n\nconst TWO_ZEROES_STR = String.fromCharCode(0, 0);\nconst THREE_ZEROES_STR = String.fromCharCode(0, 0, 0);\nconst FOUR_ZEROES_STR = String.fromCharCode(0, 0, 0, 0);\n\nconst BYTEARRAY_CONVERT_CHUNK = 8192;\nconst UNSIGNED_LSHIFT_24 = (256 * 256 * 256);\n\nconst ARRAY_BUFFER_CONVERT_CHUNK = 32768;\n\n\nfunction uint8ArrayToString(data, format = undefined) {\n  const dataLength = data.byteLength;\n  const uint8DataArray = new Uint8Array(BufferImpl.from(data));\n  let result = '';\n  for (let i = 0; i < dataLength; i++) {\n    if(format && format.toLowerCase() === 'hex') {\n      result += (uint8DataArray[i]).toString(16).padStart(2, '0');\n    } else {\n      result += String.fromCharCode(uint8DataArray[i] & 0xff);\n    }\n  }\n  return result;\n}\n\nfunction stringToUint8Array(data) {\n  const dataLength = data.length;\n  const arrayBuf = new ArrayBuffer(dataLength);\n  const uint8Array = new Uint8Array(arrayBuf, 0, dataLength);\n  for (let i = 0; i < dataLength; i++) {\n    uint8Array[i] = data.charCodeAt(i);\n  }\n  return uint8Array;\n}\n\nfunction hexStringToUint8Array(data) {\n  // if null data, return empty Uint8Array\n  if(data == null) {\n    return new Uint8Array();\n  }\n  return Uint8Array.from(BufferImpl.from(data, 'hex'));\n}\n\nfunction arrayBufferToString(ab) {\n  if (!ab) return '';\n  const len = ab.byteLength;\n  const u8 = new Uint8Array(ab);\n  if (len < ARRAY_BUFFER_CONVERT_CHUNK) {\n    return String.fromCharCode.apply(null, u8);\n  }\n\n  let k = 0;\n  let r = '';\n  while (k < len) {\n    // slice is clamped, inclusive of startIndex, exclusive of lastIndex\n    r += String.fromCharCode.apply(null, u8.subarray(k, k + ARRAY_BUFFER_CONVERT_CHUNK));\n    k += ARRAY_BUFFER_CONVERT_CHUNK;\n  }\n  return r;\n}\n\nfunction stringToArrayBuffer(str) {\n  return stringToUint8Array(str).buffer;\n}\n\nfunction int8ToStr(int8) {\n  return String.fromCharCode(int8 & 0xff);\n}\n\nfunction int16ToStr(int16) {\n  return (\n      String.fromCharCode((int16 >> 8) & 0xff) +\n      String.fromCharCode(int16 & 0xff)\n  );\n}\n\nfunction int24ToStr(int24) {\n  return (\n      String.fromCharCode((int24 >> 16) & 0xff) +\n      String.fromCharCode((int24 >> 8) & 0xff) +\n      String.fromCharCode(int24 & 0xff)\n  );\n}\n\nfunction int32ToStr(int32) {\n  // It is expected that there are a lot of small numbers\n  // being converted, so it is worth doing a few checks for\n  // efficiency (on firefox it is about 3 times quicker for small numbers\n  // to do the check - it is 2 times quicker for chrome)\n\n  if (int32 === 0) return FOUR_ZEROES_STR;\n  if (int32 > 0) {\n    if (int32 < 256) {\n      return THREE_ZEROES_STR + String.fromCharCode(int32);\n    }\n    if (int32 < 65536) {\n      return TWO_ZEROES_STR + String.fromCharCode(int32 >> 8) + String.fromCharCode(int32 & 0xff);\n    }\n  }\n\n  return (\n      String.fromCharCode((int32 >> 24) & 0xff) +\n      String.fromCharCode((int32 >> 16) & 0xff) +\n      String.fromCharCode((int32 >> 8) & 0xff) +\n      String.fromCharCode(int32 & 0xff)\n  );\n}\n\nfunction int64ToStr(int64) {\n  if (typeof int64 !== 'number') {\n    return int32ToStr(int64.high) + int32ToStr(int64.low);\n  }\n\n  // It is expected that there are a lot of small numbers\n  // being converted, so it is worth doing a few checks for\n  // efficiency (on firefox it is about 3 times quicker for small numbers\n  // to do the check - it is 2 times quicker for chrome)\n  if (int64 >= 0) {\n    if (int64 < 256) {\n      return FOUR_ZEROES_STR + THREE_ZEROES_STR + String.fromCharCode(int64);\n    }\n    if (int64 < 65536) {\n      return FOUR_ZEROES_STR + TWO_ZEROES_STR +\n        String.fromCharCode(int64 >> 8) + String.fromCharCode(int64 & 0xff);\n    }\n    if (int64 < 4294967296) {\n      return FOUR_ZEROES_STR + (String.fromCharCode((int64 >> 24) & 0xff) +\n        String.fromCharCode((int64 >> 16) & 0xff) +\n        String.fromCharCode((int64 >> 8) & 0xff) +\n        String.fromCharCode(int64 & 0xff));\n    }\n  }\n  return String.fromCharCode((int64 >> 56) & 0xFF) +\n        String.fromCharCode((int64 >> 48) & 0xFF) +\n        String.fromCharCode((int64 >> 40) & 0xFF) +\n        String.fromCharCode((int64 >> 32) & 0xFF) +\n        String.fromCharCode((int64 >> 24) & 0xff) +\n        String.fromCharCode((int64 >> 16) & 0xff) +\n        String.fromCharCode((int64 >> 8) & 0xff) +\n        String.fromCharCode(int64 & 0xff);\n}\n\nfunction byteArrayToStr(byteArray) {\n  const len = byteArray.length;\n  if (len < BYTEARRAY_CONVERT_CHUNK) {\n    return String.fromCharCode.apply(null, byteArray);\n  }\n\n  let k = 0;\n  let r = '';\n\n  while (k < len) {\n    // slice is clamped, inclusive of startIndex, exclusive of lastIndex\n    r += String.fromCharCode.apply(null, byteArray.slice(k, k + BYTEARRAY_CONVERT_CHUNK));\n    k += BYTEARRAY_CONVERT_CHUNK;\n  }\n\n  return r;\n}\n\nfunction strToByteArray(str) {\n  const result = [];\n  let i;\n  for (i = 0; i < str.length; i++) {\n    result[i] = str.charCodeAt(i);\n  }\n  return result;\n}\n\nfunction strToHexArray(str) {\n  function toHex(c) {\n    return c.charCodeAt(0).toString(16);\n  }\n  return Array.prototype.map.call(str.split(''), toHex);\n}\n\nfunction strToInt8(data) {\n  return data.charCodeAt(0) & 0xff;\n}\n\nfunction strToInt16(data) {\n  return (\n      (data.charCodeAt(0) << 8) +\n      (data.charCodeAt(1))\n  );\n}\n\nfunction strToInt24(data) {\n  return (\n      (data.charCodeAt(0) << 16) +\n      (data.charCodeAt(1) << 8) +\n      (data.charCodeAt(2))\n  );\n}\n\nfunction strToInt32(data) {\n    // SIGNED integer\n  return (\n      (data.charCodeAt(0) << 24) +\n      (data.charCodeAt(1) << 16) +\n      (data.charCodeAt(2) << 8) +\n      (data.charCodeAt(3))\n  );\n}\n\nfunction strToUInt32(data) {\n  // WARNING: you cannot use a << 24 to shift a byte into\n  // a 32-bit string, because all shifts in JS are signed\n  return (\n      (data.charCodeAt(0) * UNSIGNED_LSHIFT_24) +\n      (data.charCodeAt(1) << 16) +\n      (data.charCodeAt(2) << 8) +\n      (data.charCodeAt(3))\n  );\n}\n\nfunction strToUInt64(data) {\n  return Long.fromBits(strToUInt32(data.substr(4, 4)),\n                       strToUInt32(data.substr(0, 4)),\n                       true);\n}\n\nfunction ucs2ToUtf8(ucs2) {\n  return unescape(encodeURIComponent(ucs2));\n}\n\nfunction utf8ToUcs2(utf8) {\n  return decodeURIComponent(escape(utf8));\n}\n\nfunction anythingToBuffer(value) {\n  if (BufferImpl.isBuffer(value)) {\n    return value;\n  }\n  if (typeof value === 'string') {\n    return BufferImpl.from(value, 'latin1');\n  }\n  if (value instanceof ArrayBuffer) {\n    return BufferImpl.from(value);\n  }\n  //TypedArrays and DataView:\n  if (value.buffer instanceof ArrayBuffer &&\n    typeof value.byteLength === 'number' &&\n    typeof value.byteOffset === 'number') {\n    if (value.byteOffset === 0 && value.byteLength === value.buffer.byteLength) {\n      // \"full sice\", no actual offset: just use the raw buffer.\n      return BufferImpl.from(value.buffer);\n    }\n    return BufferImpl.from(value.buffer, value.byteOffset, value.byteLength);\n  }\n  throw new OperationError('Parameter value failed validation',\n    ErrorSubcode.PARAMETER_OUT_OF_RANGE,\n    'Expecting Buffer/Uint8Array, also accepting string, ArrayBuffer, any TypedArray, or DataView.');\n}\n\nconst Convert = {\n  arrayBufferToString,\n  stringToArrayBuffer,\n  \n  uint8ArrayToString,\n  stringToUint8Array,\n\n  hexStringToUint8Array,\n\n  int8ToStr,\n  strToInt8,\n\n  int16ToStr,\n  strToInt16,\n\n  int24ToStr,\n  strToInt24,\n\n  int32ToStr,\n  strToInt32,\n  strToUInt32,\n\n  int64ToStr,\n  strToUInt64,\n\n  byteArrayToStr,\n  strToByteArray,\n\n  strToHexArray,\n\n  ucs2ToUtf8,\n  utf8ToUcs2,\n  anythingToBuffer,\n};\n\nmodule.exports.Convert = Convert;\n","const Long = require('long');\nconst {\n  LOG_DEBUG,\n  LOG_ERROR,\n  LOG_INFO,\n  LOG_TRACE,\n} = require('solclient-log');\nconst { Base64, Bits } = require('solclient-convert');\nconst { ParamParse } = require('./param-parse');\nconst { SMFHeader } = require('../message-objects');\nconst { SMFParameterType, SMFExtendedParameterType } = require('../smf-parameter-types');\n\nconst {\n  decode: base64Decode,\n} = Base64;\nconst {\n  get: bits,\n} = Bits;\n\nfunction isSMFHeaderAvailable(dataBuf, offset) {\n  const remaining = dataBuf.length - offset;\n  if (remaining < 12) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction isSMFHeaderValid(dataBuf, offset) {\n  if (!isSMFHeaderAvailable(dataBuf, offset)) {\n    return false;\n  }\n  const version = dataBuf.readUInt8(offset) & 0x7;\n  if (version !== 3) {\n    LOG_ERROR(`Invalid smf version in smf header, version=${version}`);\n    return false;\n  }\n  return true;\n}\n\nfunction isSMFAvailable(dataBuf, offset) {\n  if (!isSMFHeaderValid(dataBuf, offset)) {\n    return false;\n  }\n  const remaining = dataBuf.length - offset;\n  const totalLen = dataBuf.readUInt32BE(offset + 8);\n  return (totalLen <= remaining);\n}\n\n/**\n * Parse the Extended Parameters from an Extended Type Stream.\n * See section \"4.2.4 Extended Parameter Types\" in the SMF spec.\n * @param {SMFHeader} smfHeader The SMF header to add the extended parameters to.\n * @param {Buffer} dataBuf The binary data to parse\n * @param {Number} offset The offset in the data to begin parsing (ETS payload)\n * @param {Number} streamLen ETS length\n * @returns {Boolean} false if framing is lost, true otherwise.\n * @private\n */\nfunction parseSMFExtendedStream(smfHeader, dataBuf, offset, streamLen) {\n  /* eslint-disable no-unused-vars */\n  let pos = offset;\n  while (pos < offset + streamLen) {\n    if (pos + 2 > offset + streamLen) {\n      LOG_ERROR('Extended parameter stream had padding inside.');\n      break;\n    }\n\n    // The first 2 bytes of Extended Parameters is fixed (MSB order):\n    // 1 bit UH\n    // 3 bits length mode selector (0-, 1-, 2-, 4-, 8-byte, or variable)\n    // 12 bits Type\n    const byte1 = dataBuf.readUInt8(pos);\n    const byte2 = dataBuf.readUInt8(pos + 1);\n    const pUH = bits(byte1, 7, 1);\n    const lengthMode = bits(byte1, 4, 3);\n    const type = (bits(byte1, 0, 4) << 8) + byte2; //FIGURE OUT WHAT bits does\n    pos += 2;\n    const lengthModeMap = { 0: 0, 1: 1, 2: 2, 3: 4, 4: 8 };\n    let valueLen = 0;\n    // EsLint made me do it\n    if (Object.prototype.hasOwnProperty.call(lengthModeMap, lengthMode)) {\n      valueLen = lengthModeMap[lengthMode];\n    } else if (lengthMode === 5) {\n      // 1-byte variable length value\n      valueLen = dataBuf.readUInt8(pos) - 3;\n      pos++;\n    } else if (lengthMode === 6) {\n      // 2-byte variable length value\n      valueLen = dataBuf.readUInt16BE(pos) - 4;\n      pos += 2;\n    } else {\n      LOG_ERROR(`Invalid length mode ${lengthMode} in Extended Parameter type ${type}`);\n      // We must be reading garbage, disconnect:\n      return false;\n    }\n\n    switch (type) {\n      case SMFParameterType.AD_REDELIVERY_COUNT:\n        smfHeader.pm_ad_redeliveryCount = dataBuf.readUInt32BE(pos);\n        break;\n      case SMFParameterType.AD_SPOOLER_UNIQUE_ID:\n        smfHeader.pm_ad_spooler_unique_id = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                          dataBuf.readUInt32BE(pos),\n                                                          true);\n        break;\n      case SMFParameterType.AD_ACK_MESSAGE_ID:\n        smfHeader.pm_ad_local_spooler_message_id = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                                 dataBuf.readUInt32BE(pos),\n                                                                 true);\n        break;\n      case SMFParameterType.AD_REPL_MATE_ACK_MSGID:\n        smfHeader.pm_ad_replication_mate_ack_message_id =\n           Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                         dataBuf.readUInt32BE(pos),\n                         true);\n        break;\n      case SMFExtendedParameterType.TS_TRANSPORT_CONTEXT:\n        // from specs, trace span context must be at least 36 bytes\n        // use 36 - 4 (account for error in 2-byte variable length value calculation above) = 32\n        if(valueLen >= 32) {\n          // will convert this string to a UInt8Array later\n          smfHeader.pm_ts_transport_context = dataBuf.toString('latin1', pos, pos + valueLen);\n        } else {\n          LOG_TRACE('Skipped due to unexpected size of extended parameter ' +\n                    `type ${type} value length ${valueLen} offset ${pos}`);\n        }\n        break;\n      default:\n        if (pUH === 0) {\n          LOG_TRACE('Dropping unrecognised extended parameter ' +\n                    `type ${type} value length ${valueLen} UH ${pUH}`);\n        } else {\n          smfHeader.discardMessage = true;\n          LOG_TRACE('Dropping whole message due to unrecognised extended parameter ' +\n                    `type ${type} value length ${valueLen} UH ${pUH}`);\n        }\n        break;\n    }\n    pos += valueLen;\n  }\n  if (pos > offset + streamLen) {\n    LOG_ERROR(`Last extended parameter ran beyond extended stream length by ${pos - (offset + streamLen)}.`);\n  }\n  return true;\n  /* eslint-enable no-unused-vars */\n}\n\n/**\n * Parse SMF in the given data buffer at the supplied offset.\n * @param {Buffer} dataBuf The binary data to parse\n * @param {Number} offset The offset in the data to begin parsing\n * @param {Boolean} readHeaderOnly If true, stop parsing at end of header\n * @returns {SMFHeader|null} The SMF header, if possible\n * @private\n */\nfunction parseSMFAt(dataBuf, offset, readHeaderOnly = false) {\n  if (!isSMFHeaderValid(dataBuf, offset)) {\n    LOG_DEBUG('Valid SMF header not available');\n    return null;\n  }\n  let pos = offset;\n\n  // Reading fixed header block (12 bytes)\n  const word1 = dataBuf.readUInt32BE(pos);\n  const headerLen = dataBuf.readUInt32BE(pos + 4);\n  const word3 = dataBuf.readUInt32BE(pos + 8);\n\n  const smfHeader = new SMFHeader();\n  smfHeader.smf_di = bits(word1, 31, 1);\n  smfHeader.smf_elidingEligible = bits(word1, 30, 1);\n  smfHeader.smf_dto = bits(word1, 29, 1);\n  smfHeader.smf_adf = bits(word1, 28, 1);\n  smfHeader.smf_deadMessageQueueEligible = bits(word1, 27, 1);\n  smfHeader.smf_version = bits(word1, 24, 3);\n  smfHeader.smf_uh = bits(word1, 22, 2);\n  smfHeader.smf_protocol = bits(word1, 16, 6);\n  smfHeader.smf_priority = bits(word1, 12, 4);\n  smfHeader.smf_ttl = bits(word1, 0, 8);\n\n  const payloadLen = word3 - headerLen;\n  if (payloadLen < 0) {\n    LOG_ERROR('SMF parse error: lost framing');\n    return null; // SMF parse error: lost framing\n  }\n  smfHeader.setMessageSizes(headerLen, payloadLen);\n  if (readHeaderOnly) {\n    return smfHeader;\n  }\n  pos += 12;\n\n  // Reading variable-length params\n  const end = offset + headerLen;\n  while (pos < end) {\n    const paramByte1 = dataBuf.readUInt8(pos);\n    ++pos;\n\n    const prmUh = bits(paramByte1, 6, 2);\n    const paramIsLightweight = (bits(paramByte1, 5, 1) !== 0);\n    if (paramIsLightweight) {\n      // LIGHTWEIGHT param\n      const lwpType = bits(paramByte1, 2, 3);\n      const lwpLen = bits(paramByte1, 0, 2) + 1;\n      const lwpValueLen = lwpLen - 1;\n      if (lwpLen <= 0) {\n        LOG_ERROR('Invalid lightweight parameter length');\n        return null; // Invalid parameter\n      }\n\n      switch (lwpType) {\n        case SMFParameterType.LIGHT_CORRELATION:\n          smfHeader.pm_corrtag = dataBuf.readUIntBE(pos, 3);\n          break;\n        case SMFParameterType.LIGHT_TOPIC_NAME_OFFSET:\n          {\n            const parsedQueueOffsets = ParamParse.parseTopicQueueOffsets(dataBuf, pos);\n            smfHeader.pm_queue_offset = parsedQueueOffsets[0];\n            smfHeader.pm_queue_len = parsedQueueOffsets[1];\n            break;\n          }\n        case SMFParameterType.LIGHT_QUEUE_NAME_OFFSET:\n          {\n            const parsedTopicOffsets = ParamParse.parseTopicQueueOffsets(dataBuf, pos);\n            smfHeader.pm_topic_offset = parsedTopicOffsets[0];\n            smfHeader.pm_topic_len = parsedTopicOffsets[1];\n            break;\n          }\n        case SMFParameterType.LIGHT_ACK_IMMEDIATELY:\n          smfHeader.pm_ad_ackimm = !!dataBuf.readUInt8(pos);\n          break;\n        default:\n          if (prmUh === 0) {\n            // Ignore, and silently discard the parameter.\n            LOG_TRACE(`Unhandled LIGHTWEIGHT parameter type: ${lwpType} UH is ${prmUh} discarding parameter.`);\n          } else {\n            // Ignore, and silently discard the entire message.\n            LOG_TRACE(`Unhandled LIGHTWEIGHT parameter type: ${lwpType} UH is ${prmUh} discarding message.`);\n            smfHeader.discardMessage = true;\n          }\n          break;\n      }\n      pos += lwpValueLen;\n    } else {\n      // REGULAR encoded param (including breakout for Extended Type Stream)\n      const pStart = pos;\n      const pType = bits(paramByte1, 0, 5);\n      if (pType === 0) {\n        break; // PADDING (break while: header finished)\n      }\n\n      let pLen = dataBuf.readUInt8(pos);\n      pos++;\n      let pValueLen;\n      if (pLen === 0) {\n        // extended-length parameter (32-bit)\n        // Works for Extended Parameters too.\n        pLen = dataBuf.readUInt32BE(pos);\n        pos += 4;\n        pValueLen = pLen - 6;\n      } else {\n        pValueLen = pLen - 2;\n      }\n\n      if (pLen <= 0) {\n        LOG_ERROR(`Invalid regular parameter length ${pLen}/${pValueLen\n                  } with suspect type ${SMFParameterType.describe(pType)} at parameter at position ${pStart}`);\n        return null; // Invalid parameter\n      }\n\n      switch (pType) {\n        case SMFParameterType.PUBLISHER_ID:\n          // this is some kind of AD publisher ID in a direct message, but it's ony 4 bytes.\n          // It's of no use to us and is not exposed publicly.\n          // Skip.\n          break;\n        case SMFParameterType.PUBLISHER_MSGID:\n          smfHeader.pm_ad_publishermsgid = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                         dataBuf.readUInt32BE(pos),\n                                                         true);\n          break;\n        case SMFParameterType.MESSAGEPRIORITY:\n          smfHeader.pm_msg_priority = dataBuf.readUInt8(pos);\n          break;\n        case SMFParameterType.USERDATA:\n          smfHeader.pm_userdata = dataBuf.toString('latin1', pos, pos + pValueLen);\n          break;\n        case SMFParameterType.USERNAME:\n          // only useful on API -> router\n          smfHeader.pm_username = base64Decode(dataBuf.toString('latin1', pos, pos + pValueLen));\n          break;\n        case SMFParameterType.PASSWORD:\n          // only useful on API -> router\n          smfHeader.pm_password = base64Decode(dataBuf.toString('latin1', pos, pos + pValueLen));\n          break;\n        case SMFParameterType.RESPONSE:\n          {\n            const parsedResponse = ParamParse.parseResponseParam(dataBuf, pos, pValueLen); //CHECK\n            smfHeader.pm_respcode = parsedResponse[0];\n            smfHeader.pm_respstr = parsedResponse[1];\n            break;\n          }\n        case SMFParameterType.SUB_ID_LIST:\n        case SMFParameterType.GENERIC_ATTACHMENT:\n        case SMFParameterType.BINARY_ATTACHMENT:\n          LOG_INFO('Skipping deprecated parameter type');\n          // deprecated\n          break;\n        case SMFParameterType.DELIVERY_MODE:\n          // DeliveryMode is DIRECT unless the AD flag is set. The\n          // deliveryMode parameter (and all other guaranteed messaging\n          // parameters may be present in demoted messages reflecting how\n          // the message was published.\n          // IF ever solClientJS must support the horror that is cut-through\n          // persistence, then we must defer setting deliveryMode back to\n          // DIRECT until the session decides whether it is a true direct\n          // message or a cut-through direct message.  But until that is\n          // forced upon us, the cleanest place to set deliveryMode is always\n          // here in the parser.\n          if (smfHeader.smf_adf) {\n            smfHeader.pm_deliverymode = ParamParse.parseDeliveryMode(dataBuf, pos);\n          }\n          break;\n        case SMFParameterType.ASSURED_MESSAGE_ID:\n          smfHeader.pm_ad_msgid = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                dataBuf.readUInt32BE(pos),\n                                                true);\n          break;\n        case SMFParameterType.ASSURED_PREVMESSAGE_ID:\n          smfHeader.pm_ad_prevmsgid = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                    dataBuf.readUInt32BE(pos),\n                                                    true);\n          break;\n        case SMFParameterType.ASSURED_REDELIVERED_FLAG:\n          smfHeader.pm_ad_redelflag = true;\n          break;\n        case SMFParameterType.AD_TIMETOLIVE:\n          smfHeader.pm_ad_ttl = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                              dataBuf.readUInt32BE(pos),\n                                              true);\n          break;\n        case SMFParameterType.AD_TOPICSEQUENCE_NUMBER:\n          smfHeader.pm_ad_topicSequenceNumber = Long.fromBits(dataBuf.readUInt32BE(pos + 4),\n                                                              dataBuf.readUInt32BE(pos),\n                                                              true);\n          break;\n        case SMFParameterType.MESSAGE_CONTENT_SUMMARY:\n          {\n            const contentSummary = ParamParse.parseContentSummary(dataBuf, pos, pValueLen);\n            if (!contentSummary) {\n              LOG_ERROR(`Invalid message content summary at ${pos}, len ${pValueLen}`);\n              return false; // invalid message content summary parameter\n            }\n            smfHeader.pm_content_summary = contentSummary;\n            break;\n          }\n        case SMFParameterType.ASSURED_FLOWID:\n          smfHeader.pm_ad_flowid = dataBuf.readUInt32BE(pos);\n          break;\n        case SMFParameterType.TR_TOPICNAME:\n          // copy bytes. Don't strip null terminator\n          smfHeader.pm_tr_topicname_bytes = dataBuf.toString('latin1', pos, pos + pValueLen);\n          break;\n        case SMFParameterType.AD_FLOWREDELIVERED_FLAG:\n          smfHeader.pm_ad_flowredelflag = true;\n          break;\n        case SMFParameterType.EXTENDED_TYPE_STREAM: {\n          const extSuccess = parseSMFExtendedStream(smfHeader, dataBuf, pos, pValueLen);\n          if (!extSuccess) { return null; }\n          break;\n        }\n        default:\n          if (prmUh === 0) {\n            // Ignore, and silently discard the parameter.\n            LOG_TRACE(`Unhandled SMF parameter type: ${pType} UH is ${prmUh} discarding parameter.`);\n          } else {\n            // Ignore, and silently discard the entire message.\n            LOG_TRACE(`Unhandled SMF parameter type: ${pType} UH is ${prmUh} discarding message.`);\n            smfHeader.discardMessage = true;\n          }\n          break;\n      } // end param type switch block\n\n      pos += pValueLen;\n    } // end (regular param)\n  } // end while\n\n  return smfHeader;\n}\n\nconst ParseSMF = {\n  isSMFHeaderAvailable,\n  isSMFHeaderValid,\n  isSMFAvailable,\n  parseSMFAt,\n};\n\nmodule.exports.ParseSMF = ParseSMF;\n","class CorrelatedRequest {\n  /**\n   * Creates an instance of CorrelatedRequest.\n   * @param {String} correlationTag The associated tag\n   * @param {?} timer The opaque timer handle\n   * @param {String} correlationKey The associated key\n   * @param {function} respRecvdCallback The associated callback\n   * @memberof CorrelatedRequest\n   * @private\n   */\n  constructor(correlationTag, timer, correlationKey, respRecvdCallback) {\n    this.correlationTag = correlationTag;\n    this.timer = timer;\n    this.correlationKey = correlationKey;\n    this.respRecvdCallback = respRecvdCallback;\n  }\n}\n\nmodule.exports.CorrelatedRequest = CorrelatedRequest;\n","module.exports = require(\"worker_threads\");","/**\n * @private\n * @constructor\n */\nclass TransportClientStats {\n  constructor() {\n    this.bytesWritten = 0;\n    this.msgWritten = 0;\n  }\n}\n\nmodule.exports.TransportClientStats = TransportClientStats;\n","const { SMFClient } = require('./lib/smf-client');\nconst { TransportCapabilities } = require('./lib/transport-capabilities');\nconst { TransportError } = require('./lib/transport-error');\nconst { TransportFactory } = require('./lib/transport-factory');\nconst { TransportProtocol } = require('./lib/transport-protocols');\nconst { TransportReturnCode } = require('./lib/transport-return-codes');\nconst { TransportSessionEventCode } = require('./lib/transport-session-event-codes');\nconst { TransportSessionStates } = require('./lib/transport-session-states');\n\n\nmodule.exports.SMFClient = SMFClient;\nmodule.exports.TransportCapabilities = TransportCapabilities;\nmodule.exports.TransportError = TransportError;\nmodule.exports.TransportFactory = TransportFactory;\nmodule.exports.TransportProtocol = TransportProtocol;\nmodule.exports.TransportReturnCode = TransportReturnCode;\nmodule.exports.TransportSessionEventCode = TransportSessionEventCode;\nmodule.exports.TransportSessionStates = TransportSessionStates;\n","const { ErrorSubcode,\n        OperationError,\n        RequestError,\n        RequestEventCode } = require('solclient-error');\nconst { SessionEventCode } = require('./session-event-codes');\n\nfunction buildType(Superclass) {\n  /**\n   * @classdesc\n   * Represents a session event; events are passed to the application-provided\n   * event handling callback provided when creating the session.\n   * @memberof solace\n   * @hideconstructor\n   */\n  class SessionEvent extends Superclass {\n    /**\n     * @constructor\n     * @param {Array} superclassArgs Args to pass to super\n     * @param {solace.SessionEventCode} sessionEventCode The event code\n     * @param {String} infoStr Information string\n     * @param {Number} [responseCode] Any associated router response code\n     * @param {solace.ErrorSubcode} [errorSubcode] Any associated error subcode\n     * @param {Object|String|null|undefined} [correlationKey] Any associated correlation key\n     * @param {String} [reason] Any additional information\n     * @private\n     */\n    constructor(superclassArgs,\n                sessionEventCode,\n                infoStr,\n                responseCode = undefined,\n                errorSubcode = 0,\n                correlationKey = undefined,\n                reason = undefined) {\n      super(...superclassArgs);\n      this._sessionEventCode = sessionEventCode;\n      this._infoStr = infoStr;\n      this._responseCode = responseCode;\n      this._errorSubcode = errorSubcode;\n      this._correlationKey = correlationKey; // optional\n      this._reason = reason; // optional\n    }\n\n    /**\n     * @type {solace.SessionEventCode}\n     * @description Further qualifies the session event.\n     */\n    get sessionEventCode() {\n      return this._sessionEventCode;\n    }\n\n    /**\n     * @type {String}\n     * @description if applicable, an information string returned by the Solace Message Router.\n     */\n    get infoStr() {\n      return this._infoStr;\n    }\n\n    /**\n     * @type {?Number}\n     * @description if applicable, a response code returned by the Solace Message Router.\n     */\n    get responseCode() {\n      return this._responseCode;\n    }\n\n    /**\n     * @type {?solace.ErrorSubcode}\n     * @description if applicable, an error subcode. Defined in {@link solace.ErrorSubcode}\n     */\n    get errorSubcode() {\n      // _eslint-disable-next-line quote-property\n      return this.subcode || this._errorSubcode;\n    }\n\n    /**\n     * @deprecated Use {@link solace.SessionEvent#errorSubcode} instead.\n     * @readonly\n     */\n    // coverity[identifier_typo]\n    get errorSubCode() {\n      return this.errorSubcode;\n    }\n\n    /**\n     * @type {?Object}\n     * @description A user-specified object\n     * made available in the response or confirmation event by including it as a\n     * parameter in the orignal API call.  If the user did not specify a\n     * correlationKey, it will be <code>null</code>.\n     * @default null\n     */\n    get correlationKey() {\n      return this._correlationKey;\n    }\n\n    /**\n     * @type {?String}\n     * @description Additional information if it is applicable.\n     * In case of subscribe or publish errors, it constains the topic.\n     */\n    get reason() {\n      return this._reason;\n    }\n    /**\n     * @param {Object} value The reason info object\n     * @internal\n     */\n    set reason(value) {\n      this._reason = value;\n    }\n\n    [util_inspect_custom]() {\n      // Is this supposed to invoke the custom inspect function of the superclass if it exists?\n      return Object.assign(super[util_inspect_custom] || {}, {\n        'sessionEventCode': SessionEventCode.describe(this.sessionEventCode),\n        'infoStr':          this.infoStr,\n        'responseCode':     this.responseCode,\n        'errorSubcode':     ErrorSubcode.describe(this.errorSubcode),\n        'correlationKey':   this.correlationKey ? this.correlationKey.toString() : null,\n        'reason':           this.reason ? this.reason : null,\n      });\n    }\n\n    toString() {\n      return util_inspect(this);\n    }\n  }\n\n  return SessionEvent;\n}\n\nconst SUPERCLASS_FOR_SESSION_EVENT = {\n  [SessionEventCode.CONNECT_FAILED_ERROR]:              OperationError,\n  [SessionEventCode.DOWN_ERROR]:                        OperationError,\n  [SessionEventCode.GUARANTEED_MESSAGE_PUBLISHER_DOWN]: OperationError,\n  [SessionEventCode.PROPERTY_UPDATE_ERROR]:             RequestError,\n  [SessionEventCode.REJECTED_MESSAGE_ERROR]:            RequestError,\n  [SessionEventCode.SUBSCRIPTION_ERROR]:                RequestError,\n  [SessionEventCode.UNSUBSCRIBE_TE_TOPIC_ERROR]:        OperationError,\n  [RequestEventCode.REQUEST_ABORTED]:                   RequestError,\n  [RequestEventCode.REQUEST_TIMEOUT]:                   RequestError,\n};\n\nconst SUPERCLASS_ARGS = new Map()\n  .set(Object, () => [])\n  .set(OperationError, (sec, infoStr, rc, subcode, ck, reason) => [infoStr, subcode, reason])\n  .set(RequestError, (sec, infoStr, rc, subcode, ck, reason) => [infoStr, sec, ck, reason]);\n\nconst TYPE_CACHE = new Map();\n\nfunction build(sessionEventCode,\n               infoStr,\n               responseCode = undefined,\n               errorSubcode = 0,\n               correlationKey = undefined,\n               reason = undefined) {\n  const Superclass = SUPERCLASS_FOR_SESSION_EVENT[sessionEventCode] || Object;\n  const SessionEvent = (() => {\n    let result = TYPE_CACHE.get(Superclass);\n    if (result) return result;\n    result = buildType(Superclass);\n    TYPE_CACHE.set(Superclass, result);\n    return result;\n  })();\n  const superclassArgsBuilder = (SUPERCLASS_ARGS.get(Superclass) || (() => []));\n  const superclassArgs = superclassArgsBuilder(sessionEventCode,\n                                               infoStr,\n                                               responseCode,\n                                               errorSubcode,\n                                               correlationKey,\n                                               reason);\n  return new SessionEvent(superclassArgs,\n                          sessionEventCode,\n                          infoStr,\n                          responseCode,\n                          errorSubcode,\n                          correlationKey,\n                          reason);\n}\n\n// Expose a type\nconst SessionEvent = buildType(Object);\nSessionEvent.build = build;\n\nmodule.exports.SessionEvent = SessionEvent;\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n","const { AdProtocolMessage } = require('./adprotocol-message');\nconst { BinaryMetaBlock } = require('./binary-meta-block');\nconst { ClientCtrlMessage } = require('./client-ctrl-message');\nconst { KeepAliveMessage } = require('./keep-alive-message');\nconst { SMFHeader } = require('./smf-header');\nconst { SMFParameter } = require('./smf-parameter');\nconst { SMFUH } = require('./smf-uh');\nconst { SMPMessage } = require('./smp-message');\nconst { TransportSMFMessage } = require('./transport-smf-message');\n\nmodule.exports.AdProtocolMessage = AdProtocolMessage;\nmodule.exports.BinaryMetaBlock = BinaryMetaBlock;\nmodule.exports.ClientCtrlMessage = ClientCtrlMessage;\nmodule.exports.KeepAliveMessage = KeepAliveMessage;\nmodule.exports.SMFHeader = SMFHeader;\nmodule.exports.SMFParameter = SMFParameter;\nmodule.exports.SMFUH = SMFUH;\nmodule.exports.SMPMessage = SMPMessage;\nmodule.exports.TransportSMFMessage = TransportSMFMessage;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Type maching SMF encoding value\n * @enum {number}\n * @memberof solace\n * @private\n */\nconst ContentSummaryType = {\n  XML_META:          0,\n  XML_PAYLOAD:       1,\n  BINARY_ATTACHMENT: 2,\n  CID_LIST:          3,\n  BINARY_METADATA:   4,\n};\n\nmodule.exports.ContentSummaryType = Enum.new(ContentSummaryType);\n","const { APIProperties } = require('solclient-util');\nconst { DestinationType } = require('solclient-destination');\nconst { OperationError, ErrorSubcode } = require('solclient-error');\nconst { QueueType } = require('./queue-types');\n\nconst DEFAULTS = {\n  durable: true,\n  type:    undefined,\n};\n\nconst TYPE_DESCRIPTION = {\n  [QueueType.QUEUE]:          'queue',\n  [QueueType.TOPIC_ENDPOINT]: 'topic endpoint',\n};\n\nconst DESINATION_TYPE_TO_DESCRIPTOR_TYPE = {\n  [DestinationType.TOPIC]:           null,\n  [DestinationType.QUEUE]:           QueueType.QUEUE,\n  [DestinationType.TEMPORARY_QUEUE]: QueueType.QUEUE,\n};\n\nfunction maybeAdaptFromDestination(spec) {\n  if (spec && spec.name && spec.type && DestinationType.values.includes(spec.type)) {\n    const targetType = DESINATION_TYPE_TO_DESCRIPTOR_TYPE[spec.type];\n    if (!targetType) {\n      throw new OperationError(`Cannot create a descriptor from a ${\n                               DestinationType.describe(spec.type)} destination`,\n                               ErrorSubcode.PARAMETER_CONFLICT);\n    }\n    return {\n      name:    spec.name,\n      type:    QueueType.QUEUE,\n      durable: spec.type !== DestinationType.TEMPORARY_QUEUE,\n    };\n  }\n  return spec;\n}\n\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * <p>\n * This is a base class for {@link solace.QueueDescriptor}. API users should access the\n * methods described here through a {@link solace.QueueDescriptor}.\n * @memberof solace\n * @hideconstructor\n */\nclass AbstractQueueDescriptor extends APIProperties {\n  /*\n   * @param {Object|solace.AbstractQueueDescriptor} queueSpec A specification for this descriptor.\n   * @param {solace.QueueType} queueSpec.type The type of queue for this specification.\n   * @param {Boolean} [queueSpec.durable=true] Whether this spec refers to a durable queue.\n   * @constructor\n   */\n  constructor(queueSpec) { // eslint-disable-line no-useless-constructor\n    super(DEFAULTS, maybeAdaptFromDestination(queueSpec));\n  }\n\n  /**\n   * Gets the queue type to which this descriptor refers.\n   * @returns {solace.QueueType} The queue type that this object describes\n   */\n  getType() {\n    return this._type;\n  }\n\n  /**\n   * @type {solace.QueueType}\n   * @description The Queue Type.\n   */\n  get type() {\n    return this.getType();\n  }\n  set type(value) {\n    this._type = value;\n  }\n\n  /**\n   * Gets whether this descriptor refers to a durable queue.\n   *\n   * @returns {Boolean} `true` if this describes a durable queue\n   */\n  isDurable() { // eslint-disable-line class-methods-use-this\n    return this._durable;\n  }\n  /**\n   * @type {Boolean}\n   * @description True if this descriptor refers to a durable queue.\n   */\n  get durable() {\n    return this.isDurable();\n  }\n  set durable(value) {\n    this._durable = value;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'type':    this.type,\n      'durable': this.durable,\n    };\n  }\n\n  /**\n   * An informational summary of this object, subject to change.\n   * @returns {String} A summary of this object.\n   */\n  toString() {\n    return `${!this.isDurable() ? 'non' : ''}-durable ` +\n           `${TYPE_DESCRIPTION[this.getType()]}`;\n  }\n\n}\n\nmodule.exports.AbstractQueueDescriptor = AbstractQueueDescriptor;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * An attribute of {@link solace.RequestError}. This enumeration represents the\n * different errors emitted by\n * {@link solace.Session.requestFailedCallback}\n * when a {@link solace.Session#sendRequest} fails.\n *\n * The client application receives a request error with event code\n * {@link solace.RequestEventCode.REQUEST_ABORTED}\n * when the underlying connection is successfully closed, or closed as a result\n * of a communication error.\n * @enum {number}\n * @namespace\n * @memberof solace\n */\nconst RequestEventCode = {\n  /**\n   * A request was aborted because the session is disconnected.\n   */\n  REQUEST_ABORTED: 8,\n  /**\n   * The event represents a timed-out request API call.\n   */\n  REQUEST_TIMEOUT: 9,\n};\n\nmodule.exports.RequestEventCode = Enum.new(RequestEventCode);\n","const DestinationUtilLib = require('./destination-util');\nconst { Destination } = require('./destination');\nconst { DestinationType } = require('./destination-type');\n\n/**\n * @classdesc\n * Represents a Topic, which is a type of {@link solace.Destination}.\n *\n * @extends solace.Destination\n * @memberof solace\n * @deprecated since 10.0 Applications should not directly refer to this type.\n *  {@link solace.Destination} provides the full interface available to topic, and it can be\n *  determined whether the destination represents a topic if {@link solace.Destination#getType}\n *  returns {@link solace.DestinationType.TOPIC}.\n */\nclass Topic extends Destination {\n  /**\n   * @param {Object} spec The topic spec\n   * @private\n   */\n  constructor(spec) {\n    if (typeof spec === 'object') {\n      super({\n        type:             DestinationType.TOPIC,\n        name:             spec.name,\n        bytes:            spec.bytes,\n        offset:           spec.offset,\n        isValidated:      spec.isValidated,\n        isWildcarded:     spec.isWildcarded,\n        subscriptionInfo: spec.subscriptionInfo,\n      });\n    } else {\n      // Deprecated path -- super will do topic encode\n      super(spec, DestinationType.TOPIC);\n    }\n  }\n\n  [util_inspect_custom]() {\n    return `[Topic ${this.getName()}]`;\n  }\n\n  /**\n   * @static\n   * @param {String} topicName The name for the topic\n   * @returns {Topic} the Topic\n   * @private\n   */\n  static createFromName(topicName) {\n    const encoding = DestinationUtilLib.DestinationUtil.validateAndEncode(\n      DestinationType.TOPIC, topicName);\n    if (encoding.error) {\n      throw encoding.error;\n    }\n    return new Topic({\n      name:             topicName,\n      isValidated:      true,\n      bytes:            encoding.bytes,\n      offset:           encoding.offset,\n      isWildcarded:     encoding.isWildcarded,\n      subscriptionInfo: encoding.subscriptionInfo,\n    });\n  }\n}\n\nmodule.exports.Topic = Topic;\n","/* eslint-disable global-require */\n// Do late binding for these debug utilities to break cyclic dependencies.\n\nconst PRINTABLE_LUT = (() => {\n  const tmp = [];\n  for (let c = 0; c < 256; ++c) {\n    tmp[c] = (c < 33 || c > 126) ? '.' : String.fromCharCode(c);\n  }\n  return tmp;\n})();\n\nconst SPACER = '   ';\nconst UNPRINTABLE = '.';\n\n\nfunction formatDumpBytes(data, showDecode, leftPadding) {\n  const { StringBuffer, StringUtils } = require('solclient-util');\n  const { isEmpty, padLeft, padRight } = StringUtils;\n\n  if (isEmpty(data)) {\n    return null;\n  }\n\n  const output = new StringBuffer();\n  const ascii = new StringBuffer();\n  const line = new StringBuffer();\n  let lineBytes = 0;\n  const asciiOffset = 54;\n\n  for (let i = 0, dataLen = data.length; i < dataLen; ++i) {\n    const ccode = data.charCodeAt(i);\n    //const ccode = dataBuf.readInt8(i);\n    line.append(padLeft(ccode.toString(16), 2, '0'), ' ');\n    ascii.append(PRINTABLE_LUT[ccode] || UNPRINTABLE);\n    lineBytes++;\n\n    if (lineBytes === 8) {\n      line.append(SPACER);\n    }\n\n    if (lineBytes === 16 || i === data.length - 1) {\n      if (leftPadding > 0) {\n        output.append(padRight('', leftPadding, ' '));\n      }\n\n      output.append(padRight(line.toString(), asciiOffset, ' '));\n\n      if (showDecode) {\n        output.append(ascii);\n      }\n\n      output.append('\\n');\n      line.clear();\n      ascii.clear();\n      lineBytes = 0;\n    }\n  }\n\n  return output.toString();\n}\n\nfunction parseSMFStream(data) {\n  const { Codec: { Decode: { decodeCompoundMessage } } } = require('solclient-smf');\n  const { LOG_WARN, LOG_ERROR } = require('solclient-log');\n\n  if (data === null) {\n    LOG_ERROR('data null in debugParseSmfStream');\n    return;\n  }\n  let pos = 0;\n  LOG_WARN(`parseSMFStream(): Starting parse, length ${data.length}`);\n  while (pos < data.length) {\n    const incomingMsg = decodeCompoundMessage(data, pos);\n    const smf = incomingMsg ? incomingMsg.smfHeader : null;\n    if (!(incomingMsg && smf)) {\n      // couldn't decode! Lost SMF framing.\n      LOG_WARN(\"parseSMFStream(): couldn't decode message.\");\n      LOG_WARN(`Position: ${pos} length: ${data.length}`);\n      return;\n    }\n\n    LOG_WARN(`>> Pos(${pos}) Protocol ${smf.smf_protocol}, Length: ${smf.messageLength}`);\n    pos += smf.messageLength;\n  }\n}\n\nconst Debug = {\n  formatDumpBytes,\n  parseSMFStream,\n};\n\nmodule.exports.Debug = Debug;\n","const { StatType } = require('./stat-types');\n\nmodule.exports = {\n  StatsByMode: {\n    STAT_TX_BYMODE_MSGS: [\n      StatType.TX_DIRECT_MSGS,\n      StatType.TX_PERSISTENT_MSGS,\n      StatType.TX_NONPERSISTENT_MSGS,\n    ],\n    STAT_TX_BYMODE_BYTES: [\n      StatType.TX_DIRECT_BYTES,\n      StatType.TX_PERSISTENT_BYTES,\n      StatType.TX_NONPERSISTENT_BYTES,\n    ],\n    STAT_TX_BYMODE_REDELIVERED: [\n      StatType.TX_DIRECT_MSGS,     // unused placeholder, direct messsages are not redelivered\n      StatType.TX_PERSISTENT_REDELIVERED,\n      StatType.TX_NONPERSISTENT_REDELIVERED,\n    ],\n    STAT_TX_BYMODE_BYTES_REDELIVERED: [\n      StatType.TX_DIRECT_BYTES,     // unused placeholder, direct messsages are not redelivered\n      StatType.TX_PERSISTENT_BYTES_REDELIVERED,\n      StatType.TX_NONPERSISTENT_BYTES_REDELIVERED,\n    ],\n    STAT_RX_BYMODE_MSGS: [\n      StatType.RX_DIRECT_MSGS,\n      StatType.RX_PERSISTENT_MSGS,\n      StatType.RX_NONPERSISTENT_MSGS,\n    ],\n    STAT_RX_BYMODE_BYTES: [\n      StatType.RX_DIRECT_BYTES,\n      StatType.RX_PERSISTENT_BYTES,\n      StatType.RX_NONPERSISTENT_BYTES,\n    ],\n  },\n};\n","const { Enum } = require('solclient-eskit');\n\nconst SMFUH = {\n  IGNORE: 0x0,\n  REJECT: 0x2,\n};\n\nmodule.exports.SMFUH = Enum.new(SMFUH);\n","/**\n * A tuple associating subscriptions, correlation IDs and cache sessions.\n * @param {String} correlationID The correlation ID for this tuple\n * @param {Topic} topic The topic for this tuple\n * @param {CacheSession} cacheSession The cache session for this tuple\n * @private\n */\nclass CacheSessionSubscribeInfo {\n  constructor(correlationID, topic, cacheSession) {\n    Object.assign(this, {\n      correlationID,\n      topic,\n      cacheSession,\n    });\n  }\n}\n\nmodule.exports.CacheSessionSubscribeInfo = CacheSessionSubscribeInfo;\n","const { Enum } = require('solclient-eskit');\n/**\n * An enumeration of queue browser event names. A {@link solace.QueueBrowser} will emit\n * these events as part of its lifecycle.  Applications, having created a QueueBrowser can\n * choose to listen to all of the events described here, or any subset of these events. For Example:\n * <pre>\n *   <code>\n *     qb = solace.Session.createQueueBrowser(...);\n *     qb.on(solace.QueueBrowserEventName.CONNECT_FAILED_ERROR,\n *           function connectFailedErrorEventCb(error) {\n *             // details is an OperationError object\n *           });\n *   </code>\n * </pre>\n *\n * @memberof solace\n * @enum {string}\n * @namespace\n */\nconst QueueBrowserEventName = {\n  /**\n   * The queue browser is established.\n   * @event solace.QueueBrowserEventName#UP\n   */\n  UP:                   'QueueBrowserEventName_up',\n  /**\n   * The queue browser is successfully disconnected.\n   * The queue browser is disabled.\n   *\n   * @event solace.QueueBrowserEventName#DOWN\n   */\n  DOWN:                 'QueueBrowserEventName_down',\n /**\n   * The queue browser was established and then disconnected by the router,\n   * likely due to operator intervention. The queue browser is disabled.\n   *\n   * @event solace.QueueBrowserEventName#DOWN_ERROR\n   * @param {solace.OperationError} error Details of the error.\n   */\n  DOWN_ERROR:           'QueueBrowserEventName_downError',\n  /**\n   * The queue browser attempted to connect but was unsuccessful.\n   * The queue browser is disabled.\n   *\n   * @event solace.QueueBrowserEventName#CONNECT_FAILED_ERROR\n   * @param {solace.OperationError} error Details of the error.\n   */\n  CONNECT_FAILED_ERROR: 'QueueBrowserEventName_connectFailedError',\n  /**\n   * The queue browser will not connect because the current session is incompatible\n   * with Guaranteed Messaging. The queue browser is disabled until a compatible session\n   * is available.\n   *\n   * @event solace.QueueBrowserEventName#GM_DISABLED\n   */\n  GM_DISABLED:          'QueueBrowserEventName_GMDisabled',\n  /**\n   * The queue browser is being disposed. No further events will be emitted.\n   *\n   * @event solace.QueueBrowserEventName#DISPOSED\n   */\n  DISPOSED:             'QueueBrowserEventName_disposed',\n  /**\n   * A message was received on the queue browser.\n   *\n   * If the application did not retain a reference to the message, it\n   * may be redelivered by calling {@link solace.QueueBrowser#disconnect} followed by\n   * {@link solace.QueueBrowser#connect} depending on the configuration of the queue.\n   *\n   * When there is no listener for <i>MESSAGE</i> on a QueueBrowser, messages are queued\n   * internally until a listener is added.\n   *\n   * @event solace.QueueBrowserEventName#MESSAGE\n   * @param {solace.Message} message The received message being delivered in this event.\n   */\n  MESSAGE:              'QueueBrowserEventName_message',\n};\n\nmodule.exports.QueueBrowserEventName = Enum.new(QueueBrowserEventName);\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SDTDataTypes = {\n  Null:            0x00,\n  Boolean:         0x01,\n  Integer:         0x02,\n  UnsignedInteger: 0x03,\n  Float:           0x04,\n  Char:            0x05,\n  ByteArray:       0x06,\n  String:          0x07,\n  Destination:     0x08,\n  SMFMessage:      0x09,\n  Map:             0x0A,\n  Stream:          0x0B,\n};\n\nmodule.exports.SDTDataTypes = Enum.new(SDTDataTypes);\n","module.exports = require(\"http\");","/**\n * @constructor BaseMessage\n * @private\n */\nclass BaseMessage {\n  constructor(header = null, params = []) {\n    this._smfHeader = header;\n    this._parameters = params;\n  }\n\n  addParameter(param) {\n    this._parameters[param.getType()] = param;\n  }\n\n  getParameter(paramType) {\n    return this._parameters[paramType];\n  }\n\n  getParameterArray() {\n    return this._parameters;\n  }\n\n  get smfHeader() {\n    return this._smfHeader;\n  }\n  set smfHeader(val) {\n    this._smfHeader = val;\n  }\n\n  getResponse() {\n    const smf = this.smfHeader;\n    if (!(smf && smf.pm_respcode && smf.pm_respstr)) {\n      return null;\n    }\n    return {\n      responseCode:   smf.pm_respcode,\n      responseString: smf.pm_respstr,\n    };\n  }\n}\n\nmodule.exports.BaseMessage = BaseMessage;\n","const {\n  ErrorSubcode,\n  NotImplementedError,\n  OperationError,\n} = require('solclient-error');\nconst { EventEmitter } = require('solclient-events');\nconst { FlowOperation } = require('./flow-operation');\nconst { LogFormatter } = require('solclient-log');\nconst { PrivateFlowEventName } = require('./private-flow-event-names');\nconst { Stats } = require('solclient-stats');\n\n// Unless flow is disposed, these operations are always allowed\nconst ALWAYS_OPS = [\n  FlowOperation.DISPOSE,\n  FlowOperation.GET_STATS,\n  FlowOperation.GET_PROPERTIES,\n  FlowOperation.RESET_STATS,\n];\n\n\n/**\n * @classdesc Flow\n * * <b>This class is not exposed for construction by API users.</b>\n * A Flow is an abstract base class. A Flow represents a guaranteed message connection to the\n * Solace Message Router. There may be many Guaranteed Message\n * Consumers on a {@link solace.Session}, each\n * instantiated as a {@link solace.MessageConsumer}.\n * @memberof solace\n * @extends {solace.EventEmitter}\n * @private\n */\nclass Flow extends EventEmitter {\n\n  /**\n   * Creates a Flow instance.\n   * @constructor Flow\n   * @param {APIProperties} flowProperties The properties object for this flow.\n   * @param {Object} sessionInterfaceFactory Function that creates session interface methods\n   * @param {Object} [emitterOptions] The options to pass to the EventEmitter constructor.\n   * @private\n   */\n  constructor(flowProperties, sessionInterfaceFactory, emitterOptions) {\n    const emitterOptionsFull = Object.assign({}, emitterOptions);\n    emitterOptionsFull.emits = (emitterOptionsFull.emits || []).concat(\n      PrivateFlowEventName.values\n    );\n    super(emitterOptionsFull);\n    const sessionInterface = sessionInterfaceFactory(this);\n    const self = this;\n    this.logger = new LogFormatter((...args) =>\n      [`[session=${sessionInterface.sessionIdHex}]`, `[flow=${self.flowIdDec}]`, ...args]);\n    this.log = this.logger.wrap(this.log, this);\n    // dispose() was called on this flow.\n    // It is not always executed immediately, leaving time for the auto-ack.\n    this._disposing = false;\n    // The flow truly was destroyed, no more delays.\n    this._disposed = false;\n    this._userDisconnected = true;\n    this._properties = flowProperties;\n    this._sessionInterface = sessionInterface;\n    this._stats = new Stats(sessionInterface);\n    this._privateEventEmitter = new EventEmitter(emitterOptionsFull);\n  }\n\n  // Private event emitter functions, hidden from the public interface.\n  _emit(type, ...args) {\n    this._privateEventEmitter.emit(type, ...args);\n    this.emit(type, ...args);\n  }\n  _on(type, listener) {\n    this._privateEventEmitter.on(type, listener);\n  }\n  _once(type, listener) {\n    this._privateEventEmitter.once(type, listener);\n  }\n  _removeListener(type, listener) {\n    this._privateEventEmitter.removeListener(type, listener);\n  }\n\n  /**\n   * Clears all statistics for this Guaranteed Message Connection. All previous Guaranteed\n   * Message Connection statistics are lost\n   * when this is called.\n   * @throws {solace.OperationError}\n   *  * if the Message Consumer is disposed. subcode = {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  clearStats() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Clearing stats');\n    this._operationCheck(FlowOperation.RESET_STATS);\n    this._stats.resetStats();\n  }\n\n  /**\n   * Establish a Guaranteed Messaging connection.\n   * The Messge Consumer may immediately begin emitting events. The application is expected to\n   * add listeners for events on this Message Consumer before calling this method.\n   */\n  connect() {\n    const { LOG_DEBUG } = this.logger;\n    LOG_DEBUG('Connecting');\n    this.userDisconnected = false;\n    this._operationCheck(FlowOperation.CONNECT);\n  }\n\n  /**\n   * Disposes the Guaranteed Message connection, removing all listeners and releasing references.\n   */\n  dispose() {\n    const { LOG_TRACE, LOG_DEBUG } = this.logger;\n    // The session may dispose the publisher or consumer, so be tolerant of\n    // multiple attempts to do so.\n    if (this._disposed || this._disposing) {\n      LOG_TRACE('Ignoring #dispose on disposed Guaranteed Message connection');\n      return;\n    }\n    LOG_TRACE('Disposing');\n\n    this._operationCheck(FlowOperation.DISPOSE);\n\n    this._disposing = true;\n\n    const terminate = () => {\n      this._disposed = true;\n      this._properties = null;\n      this._userDisconnected = true;\n      this._emit(this.getDisposedEvent());\n      this.disableEmitter();\n      this._privateEventEmitter.disableEmitter();\n      LOG_DEBUG('Disposed');\n    };\n    if (this._fsm._midDispatch) {\n      // weird case, dispose was called by the user from a message callback:\n      // Guard this in a timeout\n      const terminateWithRunningFSM = () => {\n        this._fsm.terminateFsm();\n        terminate();\n      };\n      //setImmediate(() => terminateWithRunningFSM());\n      setTimeout(() => terminateWithRunningFSM(), 0);\n    } else {\n      // normal case:\n      terminate();\n    }\n  }\n\n  /**\n   * Disconnects the Message Consumer in such a way that it can be reconnected.\n   */\n  disconnect() {\n    this._operationCheck(FlowOperation.DISCONNECT);\n    const { LOG_DEBUG } = this.logger;\n    LOG_DEBUG('Disconnecting');\n    this.userDisconnected = true;\n  }\n\n  /**\n   *\n   * Begins a disconnect that is not user-initiated.\n   *\n   * Must be overridden.\n   *\n   * @private\n   * @memberof Flow\n   */\n  _disconnectSession() {\n    this._operationCheck(FlowOperation.DISCONNECT);\n  }\n\n  /**\n   * Gets the event to be returned when the Consumer or Publisher is disposed.\n   *\n   * Must be overridden.\n   *\n   * @private\n   * @memberof Flow\n   */\n  getDisposedEvent() { // eslint-disable-line class-methods-use-this\n    throw new NotImplementedError('Abstract method');\n  }\n\n  /**\n   * Creates and returns copy of the properties for this object.\n   * @returns {?} The properties object\n   * @internal\n   */\n  getProperties() {\n    this._operationCheck(FlowOperation.GET_PROPERTIES);\n    return this._properties.clone();\n  }\n\n  /**\n   * Returns a statistic for this Guaranteed Message connection.\n   *\n   * @param {solace.StatType} statType The statistic to return.\n   * @returns {Number} The value for the statistic.\n   */\n  getStat(statType) {\n    this._operationCheck(FlowOperation.GET_STATS);\n    return this._stats.getStat(statType);\n  }\n\n  /**\n   * @param {AdMessage} message The message to be handled by this Consumer or Publisher\n   * @private\n   */\n  handleUncorrelatedControlMessage(message) { // eslint-disable-line class-methods-use-this\n    throw new NotImplementedError('Guaranteed Message Connection does not implement a control message handler', message);\n  }\n\n  /**\n   * @param {StatType} statType The stat to increment\n   * @param {Number} [value] The value to add to the statistic.\n   * @private\n   */\n  incStat(statType, value) {\n    this._stats.incStat(statType, value);\n  }\n\n  /**\n   * @param {any} event The event to be handled by this objects's FSM\n   * @private\n   */\n  processFSMEvent(event) {\n    this._fsm.processEvent(event);\n  }\n\n  /**\n   * @returns {String} An inspection of this object's properties\n   * @private\n   */\n  [util_inspect_custom]() {\n    return {\n      'flowId': this.flowIdDec,\n    };\n  }\n\n  /**\n   * @returns {String} A description of this Guaranteed Message Connection\n   */\n  toString() {\n    return this[util_inspect_custom]();\n  }\n\n  /**\n   * @returns {Boolean} Whether this Publisher or Consumer can be connected.\n   * @readonly\n   * @private\n   */\n  get canAck() {\n    return !this.disposed;\n  }\n\n  /**\n   * Returns `true` if this Guaranteed Message Consumer was disposed.\n   * @readonly\n   * @type {Boolean}\n   */\n  get disposed() {\n    return this._disposed;\n  }\n\n  get flowIdDec() {\n    return this.flowId || '(N/A)';\n  }\n\n  /**\n   * @returns {Number} The ID for this flow\n   * @readonly\n   * @private\n   */\n  get flowId() { // eslint-disable-line class-methods-use-this\n    return new NotImplementedError('Flow does not implement ID accessor');\n  }\n\n  /**\n   * @returns {solace.Session} The owning session for this MessageConsumer.\n   * @readonly\n   */\n  get session() {\n    return this._session;\n  }\n\n  get userDisconnected() {\n    return this._userDisconnected;\n  }\n  set userDisconnected(value) {\n    this._userDisconnected = value;\n  }\n\n  /**\n   * @param {FlowOperation} operation The operation to check\n   * @returns {Boolean} `true` if the operation is allowed.\n   * @throws {@link solace.OperationError} if the operation is not allowed.\n   * @private\n   */\n  _operationCheck(operation) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE(`Checking operation ${FlowOperation.describe(operation)}`);\n    if (this._disposed) {\n      throw new OperationError('Operation is invalid for Message Consumer in disposed state',\n                               ErrorSubcode.INVALID_OPERATION);\n    }\n\n    // Any read-only operation is always valid unless the object was disposed\n    // (which purges properties)\n    if (ALWAYS_OPS.some(v => v === operation)) return true;\n\n    if (operation === FlowOperation.DISCONNECT && this._isDisconnected()) {\n      throw new OperationError(\n        'Operation is invalid for Message Consumer in disconnected state',\n        ErrorSubcode.INVALID_OPERATION\n      );\n    }\n\n    return undefined;\n  }\n\n  _isDisconnected() { // eslint-disable-line class-methods-use-this\n    throw new NotImplementedError('Flow#_isDisconnected not implemented');\n  }\n\n}\n\nmodule.exports.Flow = Flow;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumerates destination types for destination objects.\n *\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst DestinationType = {\n  /**\n   * A Topic destination.\n   */\n  TOPIC:           'topic',\n  /**\n   * A queue destination.\n   */\n  QUEUE:           'queue',\n  /**\n   * A temporary queue destination.\n   */\n  TEMPORARY_QUEUE: 'temporary_queue',\n};\n\nmodule.exports.DestinationType = Enum.new(DestinationType);\n\n/* eslint-disable */\n// Manually demangle these names; bug 70131\nmodule.exports.DestinationType._setCanonical({\n  'TOPIC':           DestinationType.TOPIC,\n  'QUEUE':           DestinationType.QUEUE,\n  'TEMPORARY_QUEUE': DestinationType.TEMPORARY_QUEUE\n});\n/* eslint-enable */\n","function flatten(array) {\n  return array.reduce((acc, el) => acc.concat(Array.isArray(el) ? flatten(el) : el), []);\n}\n\nfunction includes(array, el) {\n  return array.some(v => v === el);\n}\n\nmodule.exports.ArrayUtils = {\n  flatten,\n  includes,\n};\n","const { CacheContext } = require('./cache-context');\nconst { LOG_DEBUG } = require('solclient-log');\n\nconst { CACHE_REQUEST_PREFIX } = CacheContext;\n\n/**\n * @private\n */\nclass CacheRequest {\n  /**\n   * @constructor\n   * @param {CacheSession} cacheSession The owning session\n   * @param {CacheRequestType} cacheMessageType The type of request\n   * @param {Number} requestID The ID for the request\n   * @param {CacheCBInfo} cbInfo Callback target\n   * @param {CacheLiveDataAction} liveDataAction Action on live data received\n   * @param {Topic} topic Associated topic\n   * @param {String} cacheName Associated remote cache name\n   * @private\n   */\n  constructor(cacheSession, cacheMessageType, requestID, cbInfo, liveDataAction, topic, cacheName) {\n    this.cacheSession = cacheSession;\n    this.cacheMessageType = cacheMessageType;\n    this.requestID = requestID;\n    this.cbInfo = cbInfo;\n    this.liveDataAction = liveDataAction;\n    this.topic = topic;\n    this.cacheName = cacheName;\n\n    this.subscriptionWaiting = null;\n    this.replyReceived = false;\n    this.dataReceived = false;\n    this.isSuspect = false;\n\n    this.correlationID = `${CACHE_REQUEST_PREFIX}${CacheContext.cacheRequestCorrelationId++}`;\n\n    this.childRequests = [];\n    this.parentRequest = null;\n\n    this.queuedLiveData = [];\n    this.liveDataFulfilled = false;\n\n    this.timeoutHandle = null;\n  }\n\n  /**\n   * @returns {CacheRequest} The root cache request in the current request tree\n   * @private\n   */\n  getRootRequest() {\n    if (!this.parentRequest) {\n      return this;\n    }\n    return this.parentRequest.getRootRequest();\n  }\n\n  /**\n   * @param {CacheRequest} childIn A request to make a descendant of this node in the request tree\n   * @private\n   */\n  addChild(childIn) {\n    if (!(childIn instanceof CacheRequest)) {\n      throw new Error(`Invalid child ${childIn}`);\n    }\n    if (childIn === this) {\n      throw new Error('Constructing circular child reference');\n    }\n    const child = childIn;\n    child.parentRequest = this;\n    this.childRequests.push(child);\n  }\n\n  /**\n   * @param {CacheRequest} childIn A request to remove as a descendant of this node\n   * @private\n   */\n  removeChild(childIn) {\n    if (childIn === this) {\n      throw new Error('Attempting to deconstruct invalid circular child reference');\n    }\n    const child = childIn;\n    const childIndex = this.childRequests.indexOf(child);\n    if (childIndex === -1) {\n      LOG_DEBUG(`Child ${child} not found in ${this}`);\n    }\n    this.childRequests.splice(childIndex, 1);\n    child.parentRequest = null;\n  }\n\n  /**\n   * @private\n   */\n  collapse() {\n    const parentRequest = this.parentRequest;\n    parentRequest.isSuspect = parentRequest.isSuspect || this.isSuspect;\n    parentRequest.dataReceived = parentRequest.dataReceived || this.dataReceived;\n    parentRequest.removeChild(this);\n  }\n\n  /**\n   * @private\n   */\n  cancel() {\n    if (this.parentRequest) {\n      this.collapse();\n    }\n\n    while (this.childRequests.length) {\n      const child = this.childRequests.shift();\n      if (child.childRequests) {\n        child.cancel();\n      }\n      this.removeChild(child);\n    }\n\n    this.clearRequestTimeout();\n  }\n\n  /**\n   * @returns {Number} The ID of this request\n   * @private\n   */\n  getRequestID() {\n    return this.requestID;\n  }\n\n\n  /**\n   * @returns {CacheCBInfo} The callback object for this request\n   * @private\n   */\n  getCBInfo() {\n    return this.cbInfo;\n  }\n\n  /**\n   * @returns {Topic} The topic for this request\n   * @private\n   */\n  getTopic() {\n    return this.topic;\n  }\n\n\n  /**\n   * @returns {CacheLiveDataAction} The live data action for this request\n   * @private\n   */\n  getLiveDataAction() {\n    return this.liveDataAction;\n  }\n\n  /**\n   * @param {function({solace.CacheRequest})} cacheSessionTimeoutCB Callback to notify on timeout\n   * @param {Number} timeoutMsec Timeout in milliseconds\n   * @private\n   */\n  startRequestTimeout(cacheSessionTimeoutCB, timeoutMsec) {\n    this.timeoutHandle = setTimeout(() => {\n      cacheSessionTimeoutCB(this);\n    }, timeoutMsec);\n  }\n\n  /**\n   * @private\n   */\n  clearRequestTimeout() {\n    if (this.timeoutHandle === null || this.timeoutHandle === undefined) {\n      return;\n    }\n\n    LOG_DEBUG(`Clearing timeout for ${this}`);\n    clearTimeout(this.timeoutHandle);\n    this.timeoutHandle = null;\n  }\n\n  /**\n   * Returns a string representing the request.\n   * @returns {String} A brief description of this object\n   */\n  toString() {\n    return `CacheRequest[correlationID=${this.correlationID\n        },requestID=${this.requestID\n        },cacheName=${this.cacheName\n        },topic=${this.topic.getName()}]`;\n  }\n\n}\n\n/**\n * @private\n */\nCacheRequest.VERSION = 1;\n\n/**\n * @private\n */\nCacheRequest.DEFAULT_REPLY_SIZE_LIMIT = 1000000;\n\n/**\n * @private\n */\nCacheRequest.REPLY_SIZE_LIMIT = CacheRequest.DEFAULT_REPLY_SIZE_LIMIT;\n\nmodule.exports.CacheRequest = CacheRequest;\n","const { Flow } = require('./lib/flow');\nconst { FlowOperation } = require('./lib/flow-operation');\nconst { PrivateFlowEventName } = require('./lib/private-flow-event-names');\n\nmodule.exports.Flow = Flow;\nmodule.exports.FlowOperation = FlowOperation;\nmodule.exports.PrivateFlowEventName = PrivateFlowEventName;\n","const DebugLib = require('solclient-debug');\nconst MessageDumpStandardProviderLib = require('./message-dump-standard-provider');\nconst {\n  SDTFieldType,\n  SDTMapContainer,\n  SDTStreamContainer,\n  SDTUnsupportedValueError,\n  SDTValueErrorSubcode,\n} = require('solclient-sdt');\nconst { Check } = require('solclient-validate');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { MessageDumpFlag } = require('./message-dump-flags');\nconst { StringBuffer, StringUtils } = require('solclient-util');\n\nconst MessageDumpState = {\n  get dumpProviders() {\n    const providers = MessageDumpStandardProviderLib.MessageDumpStandardProvider;\n    return Object.keys(providers).map(k => providers[k]);\n  },\n};\n\nconst MessageDumpUtil = {\n  getOutOfRangeValue(rawData) {\n    if (typeof rawData === 'string') {\n      return `<out of range>\\n${DebugLib.Debug.formatDumpBytes(rawData)}`;\n    }\n    return `<out of range>\\n${DebugLib.Debug.formatDumpBytes(rawData.toString('latin1'))}`;\n  },\n\n  getValue(sdtField) {\n    let value = null;\n    try {\n      value = sdtField.getValue();\n      return value;\n    } catch (e) {\n      if (e instanceof SDTUnsupportedValueError) {\n        if (e.getSubcode() === SDTValueErrorSubcode.VALUE_OUTSIDE_SUPPORTED_RANGE) {\n          return this.getOutOfRangeValue(e.getSourceData());\n        }\n      } else if (e instanceof OperationError && e.subcode === ErrorSubcode.PARAMETER_INVALID_TYPE) {\n        return '<invalid type>';\n      }\n      throw e;\n    }\n  },\n\n  printMap(sdtMap, indent) {\n    if (Check.nothing(sdtMap) || !(sdtMap instanceof SDTMapContainer)) {\n      return null;\n    }\n    const lines = [];\n    const strIndent = StringUtils.padRight('', indent, ' ');\n    const keys = sdtMap.getKeys().sort();\n    keys.forEach((key) => {\n      const sdtFieldValue = sdtMap.getField(key);\n      const type = sdtFieldValue.getType();\n      const value = this.getValue(sdtFieldValue);\n      let strValue;\n      switch (type) {\n        case SDTFieldType.MAP:\n          strValue = `\\n${this.printMap(value, indent + 2)}`;\n          break;\n        case SDTFieldType.STREAM:\n          strValue = `\\n${this.printStream(value, indent + 2)}`;\n          break;\n        case SDTFieldType.BYTEARRAY:\n          strValue = DebugLib.Debug.formatDumpBytes(value.toString('latin1'), false, 0);\n          if (strValue !== null && strValue.substr(-1) === '\\n') {\n            strValue = strValue.substring(0, strValue.length - 1);\n          }\n          break;\n        default:\n          strValue = (value !== null) ? value.toString() : null;\n      }\n      lines.push(`${strIndent}Key '${key}' (${SDTFieldType.nameOf(type)}): ${strValue}`);\n    });\n    return lines.join('\\n');\n  },\n\n  printStream(sdtStream, indent) {\n    if (Check.nothing(sdtStream) || !(sdtStream instanceof SDTStreamContainer)) {\n      return null;\n    }\n    sdtStream.rewind();\n    const lines = [];\n    const strIndent = StringUtils.padRight('', indent, ' ');\n    while (sdtStream.hasNext()) {\n      const sdtFieldValue = sdtStream.getNext();\n      const type = sdtFieldValue.getType();\n      const value = this.getValue(sdtFieldValue);\n\n      let strValue;\n      switch (type) {\n        case SDTFieldType.MAP:\n          strValue = `\\n${this.printMap(value, indent + 2)}`;\n          break;\n        case SDTFieldType.STREAM:\n          strValue = `\\n${this.printStream(value, indent + 2)}`;\n          break;\n        case SDTFieldType.BYTEARRAY:\n          strValue = DebugLib.Debug.formatDumpBytes(value.toString('latin1'), false, 0);\n          if (strValue !== null && strValue.substr(-1) === '\\n') {\n            strValue = strValue.substring(0, strValue.length - 1);\n          }\n          break;\n        case SDTFieldType.DESTINATION:\n          strValue = value.toString();\n          break;\n        default:\n          strValue = (value !== null) ? value.toString() : null;\n      }\n      lines.push(`${strIndent}(${SDTFieldType.nameOf(type)}): ${strValue}`);\n    }\n    sdtStream.rewind();\n    return lines.join('\\n');\n  },\n\n  countItems(sdtStream) {\n    if (Check.nothing(sdtStream) || (!(sdtStream instanceof SDTStreamContainer))) {\n      return 0;\n    }\n    sdtStream.rewind();\n    let count = 0;\n    while (sdtStream.hasNext()) {\n      sdtStream.getNext();\n      count++;\n    }\n    sdtStream.rewind();\n    return count;\n  },\n\n  formatDate(timeStamp) {\n    return new Date(timeStamp).toString();\n  },\n\n  dump(message, flags, separator, colPadding) {\n    const sb = new StringBuffer();\n    let theSeparator = '\\n';\n    let needSeparator = false;\n    let theColPadding = 40;\n    if (separator !== undefined && separator !== null && typeof separator === 'string') {\n      theSeparator = separator;\n    }\n    if (colPadding !== undefined && colPadding !== null && typeof colPadding === 'number') {\n      theColPadding = colPadding;\n    }\n\n    MessageDumpState.dumpProviders.forEach((provider, index) => {\n      const [key, isPresent, value, detailValue] = provider(message, flags);\n      if (!isPresent) {\n        return;\n      }\n      if (needSeparator) {\n        sb.append(theSeparator);\n      }\n\n      if (value === null || value.length === 0) {\n        // If we have no VALUE field, this is probably a boolean flag\n        // and we just end up displaying the key and a newline.\n        sb.append(key);\n      } else {\n        sb.append(StringUtils.padRight(`${key}:`, theColPadding, ' '));\n        sb.append(value);\n      }\n\n      if (detailValue !== null && (flags & MessageDumpFlag.MSGDUMP_FULL)) {\n        sb.append('\\n');\n        if (detailValue.indexOf('  ') !== 0) {\n          sb.append('  ');\n        }\n        sb.append(detailValue);\n        if (detailValue.substr(-1) !== '\\n' && index < (MessageDumpState.dumpProviders.length - 1)) {\n          sb.append('\\n');\n        }\n      }\n      needSeparator = true;\n    });\n    return sb.toString();\n  },\n};\n\nmodule.exports.MessageDumpUtil = MessageDumpUtil;\n","const { ParseInteger } = require('./parse-integer');\n\nconst { autoDecodeVarLengthNumber } = ParseInteger;\n\nconst ParseFieldHeader = {};\n// Parse the header part of an SDT field.\n// Returns [TYPE, DECLARED_LENGTH, VALUE_DATA_LENGTH, CONSUMED_BYTES]\nParseFieldHeader.parseFieldHeader = function parseFieldHeader(dataBuf, offset) {\n  let pos = offset;\n  const onebyte = dataBuf.readUInt8(pos);\n  const elemType = (onebyte & 0xFC) >> 2;\n  const lenBytes = (onebyte & 0x03) + 1;\n  pos++;\n  const elemLen = autoDecodeVarLengthNumber(dataBuf, pos, lenBytes);\n  pos += lenBytes;\n  const elemValLen = elemLen - (1 + lenBytes);\n  return [elemType, elemLen, elemValLen, pos - offset];\n};\n\nmodule.exports.ParseFieldHeader = ParseFieldHeader;\n","const { ErrorSubcode } = require('./error-subcodes');\nconst { OperationError } = require('./operation-error');\nconst { RequestEventCode } = require('./request-event-codes');\n\n\nconst SUBCODE_FROM_EC = {\n  [RequestEventCode.REQUEST_ABORTED]: ErrorSubcode.SESSION_NOT_CONNECTED,\n  [RequestEventCode.REQUEST_TIMEOUT]: ErrorSubcode.TIMEOUT,\n};\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n *\n * Represents a request failure event; request failure events are passed to the application\n * event handling callback provided when sending the request {@link solace.Session#sendRequest}\n * @memberof solace\n * @extends solace.OperationError\n * @hideconstructor\n */\nclass RequestError extends OperationError {\n  /*\n   * <b>This class is not exposed for construction by API users.</b> Instances of this object will\n   * be passed to the application in calls to the application's\n   * {@link solace.Session.requestFailedCallback}, provided when invoking\n   * {@link solace.Session.sendReqeust}.\n   * @constructor\n   * @param {String} message Information string\n   * @param {solace.RequestEventCode} eventCode The event code\n   * @param {Object} [correlationKey] Any associated correlation key\n   * @param {Object} [reason] Any additional information\n   * @private\n   */\n  constructor(message, eventCode, correlationKey, reason) {\n    super(message, SUBCODE_FROM_EC[eventCode], reason);\n    /**\n     * The name of the error.\n     * @name solace.RequestError#name\n     * @type {String}\n     * @readonly\n     * @description 'RequestError'\n     */\n    this.name = 'RequestError';\n    this._eventCode = eventCode;\n    this._correlationKey = correlationKey;\n  }\n\n  /**\n   * @type {solace.SessionEventCode}\n   * @name solace.RequestError#requestEventCode\n   * @description A code that provides more information about the error event.\n   */\n  get requestEventCode() {\n    return this._requestEventCode;\n  }\n\n  /**\n   * @deprecated Use {@link solace.RequestError#subcode}\n   * @type {?solace.ErrorSubcode}\n   * @description if applicable, an error subcode. Defined in {@link ErrorSubcode}\n   */\n  get errorSubcode() {\n    return super.subcode;\n  }\n\n  [util_inspect_custom]() {\n    const superObj = super[util_inspect_custom] ? super[util_inspect_custom]() : {};\n    return Object.assign(superObj, {\n      'requestEventCode': RequestEventCode.describe(this.requestEventCode),\n      'infoStr':          this.infoStr,\n      'correlationKey':   this.correlationKey,\n    });\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n\n}\n\nmodule.exports.RequestError = RequestError;\n","function numToHex(n) {\n  if (typeof n !== 'number') {\n    return '';\n  }\n  const s = n.toString(16);\n  return (s.length < 2) ? `0${s}` : s;\n}\n\n\nfunction formatHexString(obj) {\n  if (typeof obj === 'number') {\n    return `0x${numToHex(obj)}`;\n  }\n\n  if (typeof obj === 'object' && Array.isArray(obj)) {\n    return obj.map(numToHex).join();\n  }\n\n  if (typeof obj === 'string') {\n    return Array.prototype.map.call(obj, (_, i) => numToHex(obj.charCodeAt(i))).join('');\n  }\n\n  return null;\n}\n\nconst Hex = {\n  formatHexString,\n};\n\nmodule.exports.Hex = Hex;\n","const { assert } = require('solclient-eskit');\nconst { MessageConsumer } = require('./message-consumer');\nconst { MessageConsumerEventName } = require('./message-consumer-event-names');\n\nclass ConsumerFlows {\n  /**\n   * Defines a set of Guaranteed Messaging Flows.  There are two sets allocated, one\n   * for publishers (typically just one entry) and one for Subscribers.\n   * There is a separate set for flows in RECONNECTING state.\n   * These need special treatment during SESSION_DOWN:\n   * they need to be notified, but not waited on by the session FSM.\n   * Flows in _reconnectingFlows are not in _allFLows.\n   * @param {any} options Construction options\n   * @private\n   */\n  constructor() {\n    this._allFlows = new Set();\n    this._reconnectingFlows = new Set();\n    // Flows by id (UP)\n    this._flowsById = {};\n  }\n\n  add(flow) {\n    assert(flow instanceof MessageConsumer, 'Flow was not a consumer');\n    if (this._allFlows.has(flow)) {\n      return flow;\n    }\n\n    const flowUp = () => {\n      // Don't worry about flow collisions -- the router assigned the new flow to the same ID\n      // so it won't address the old flow. Retain the old flow in _allFlows and make sure we\n      // dispose the right flow.\n      this._flowsById[flow.flowId] = flow;\n    };\n    const flowDisposed = () => {\n      const flowId = flow.flowId;\n      this._allFlows.delete(flow);\n      this._reconnectingFlows.delete(flow);\n      const flowById = this._flowsById[flowId];\n      // If this test fails, the router reassigned the flow ID, and we were only keeping the\n      // _allFlows set reference for blanket cleanup.\n      if (flowById === flow) {\n        delete this._flowsById[flowId];\n      }\n      // Flow will be disposed and this will happen automatically\n    };\n    const flowReconnecting = () => {\n      flowDisposed();\n      this._reconnectingFlows.add(flow);\n    };\n    const flowReconnected = () => {\n      flowUp();\n      this._allFlows.add(flow);\n      this._reconnectingFlows.delete(flow);\n    };\n    const flowDown = () => {\n      this._reconnectingFlows.delete(flow);\n    };\n\n    flow._on(MessageConsumerEventName.UP, flowUp);\n    flow._on(MessageConsumerEventName.RECONNECTED, flowReconnected);\n    flow._on(MessageConsumerEventName.DISPOSED, flowDisposed);\n    flow._on(MessageConsumerEventName.RECONNECTING, flowReconnecting);\n    flow._on(MessageConsumerEventName.DOWN, flowDown);\n    flow._on(MessageConsumerEventName.DOWN_ERROR, flowDown);\n\n    this._allFlows.add(flow);\n    return flow;\n  }\n\n  get flows() {\n    return Array.from(this._allFlows);\n  }\n  get reconnectingFlows() {\n    return Array.from(this._reconnectingFlows);\n  }\n\n  getFlowById(flowId) {\n    return this._flowsById[flowId];\n  }\n\n  disposeAll() {\n    this._allFlows.forEach(flow => flow.dispose());\n  }\n\n}\n\nmodule.exports.ConsumerFlows = ConsumerFlows;\n","function enumName(instance, keys, value) {\n  const matches = keys.filter(k => instance[k] === value);\n  return matches.length ? matches[0] : null;\n}\n\nfunction enumValues(instance, keys) {\n  return Array.from(new Set(keys.map(k => instance[k])));\n}\n\n/**\n * The base for all enumerated types. Provides common functionality such as\n * collections of keys and values, reverse mapping, and readable descriptions. Also\n * supports overriding the canonical key-value mapping to maintain readability in\n * minified environments.\n *\n * @mixin\n * @memberof solace\n */\nclass Enum {\n\n  /**\n   * Creates an Enum with the given key-value mapping.\n   *\n   * @param {Object} values The key-value mapping to use. This mapping is set as the initial\n   * canonical key-value mapping. To override, use {@link solace.Enum#_setCanonical}.\n   */\n  constructor(values) {\n    Object.defineProperties(this, {\n      _canonical: {\n        value:        null,\n        enumerable:   false,\n        writable:     true,\n        configurable: true,\n      },\n    });\n    this._setCanonical(values);\n  }\n\n  /**\n   * Resets the canonical key value mapping for the enumeration. Using this method,\n   * you add additional sets of keys that map to the same values, and specify that\n   * these new keys take precedence for reverse mapping. Any older set of keys is made\n   * non-canonical and non-enumerable.\n   *\n   * @example\n   * const c = new Enum({ HELLO: 'world' });\n   * c._setCanonical({ MAD: 'world' });\n   * c.nameOf('world') === 'MAD'; // true\n   *\n   * @param {Object} values The new key-value mapping to add to the object and set as canonical.\n   * @param {Boolean} final Whether this enumeration should accept further reconfiguration.\n   * @private\n   */\n  _setCanonical(values, final = false) {\n    this._canonical = Object.assign({}, values);\n    Object.keys(this).forEach((key) => {\n      const descriptor = Object.getOwnPropertyDescriptor(this, key);\n      if (descriptor.value !== undefined) {\n        Object.defineProperty(this, key, {\n          enumerable:   false,\n          writable:     true,\n          configurable: true,\n          value:        descriptor.value,\n        });\n      }\n    });\n    Object.keys(values).forEach((key) => {\n      Object.defineProperty(this, key, {\n        enumerable:   true,\n        writable:     !final,\n        configurable: !final,\n        value:        values[key],\n      });\n    });\n  }\n\n  /**\n   * Create a human-readable string describing the given enumeration value. This\n   * result is informational and may vary between SDK versions.\n   *\n   * Currently, it either returns the value provided (if the associated key is\n   * the same), or a string of the form `key (value)`.\n   *\n   * @example\n   * console.log(new Enum({ ANSWER: 42 }).describe(42)); // ANSWER (42)\n   * console.log(new Enum({ ECHO: 'ECHO' })).describe('ECHO'); // ECHO\n   *\n   * @param {any} enumValue The value on which to perform reverse mapping.\n   * @param {String} [noneValue=''] The string to return if the enumeration value is\n   *    undefined or null.\n   * @param {String} [unknownValue='<unknown>'] The string to return if the enumeration\n   *    value was not found in any of the canonical keys.\n   * @returns {String} A human-readable description of the reverse mapping for the value.\n   */\n  describe(enumValue, noneValue = '<none>', unknownValue = '<unknown>') {\n    if (enumValue === null || enumValue === undefined) return noneValue;\n    const name = enumName(this._canonical,\n                          Object.keys(this._canonical || {}),\n                          enumValue)\n                 || unknownValue;\n    return name === enumValue ? name : `${name} (${enumValue})`;\n  }\n\n  /**\n   * Returns the canonical name in this enumeration for the given value. This function is\n   * designed to facilitate reflection, whereas for display\n   *\n   * @param {any} enumValue The value for which to get the enumeration key.\n   * @returns {String} The name for the given value.\n   */\n  nameOf(enumValue) {\n    return enumName(this._canonical, Object.keys(this._canonical || {}), enumValue);\n  }\n\n  /**\n   * Returns all canonical names/keys in this enumeration.\n   *\n   * @readonly\n   * @returns {Array.<String>} All canonical names in this enumeration.\n   */\n  get names() {\n    return Object.keys(this._canonical || {});\n  }\n\n  /**\n   * Returns all values assigned to canonical keys in this enumeration.\n   *\n   * @readonly\n   * @returns {Array} All values defined for enumeration keys.\n   */\n  get values() {\n    return enumValues(this._canonical, Object.keys(this._canonical || {}));\n  }\n\n  /**\n   * A property returning true to faciliate duck-typing with {solace.Enum} objects.\n   *\n   * @readonly\n   * @returns {Boolean} true This is an enumeration.\n   */\n  get isEnum() { // eslint-disable-line class-methods-use-this\n    return true;\n  }\n\n  /**\n   * Returns the name of an enuerated value given the\n   * enumeration and the value.\n   *\n   * @param {Object} instance The enumeration instance.\n   * @param {*} value The value for which to return the key name.\n   * @returns {String} The key name for the given enumeration value.\n   */\n  static nameOf(instance, value) {\n    return instance.nameOf(value);\n  }\n\n  /**\n   * Returns values defined on this enumeration for the given keys. To get the enumeration keys,\n   * use {@link Object#keys}.\n   * @param {Object} instance The enumeration on which to return values.\n   * @returns {Array} The values defined on the given enumeration.\n   **/\n  static values(instance) {\n    return instance.values();\n  }\n\n  /**\n   * Alternate construction method for enumerations.\n   *\n   * @static\n   * @param {Object} values Initial key-value mapping\n   * @returns {solace.Enum} A new enumeration instance\n   * @private\n   */\n  static new(values) {\n    return new Enum(values);\n  }\n\n  /**\n   * Constructs a private enumeration in which the values are equal to the keys.\n   *\n   * @static\n   * @param {Array.<String>} strings Key names. The values will be equal to the keys.\n   * @returns {solace.Enum} An enumeration instance of the given strings\n   * @private\n   */\n  static ofStrings(strings) {\n    const map = {};\n    strings.forEach((s) => {\n      map[s] = s;\n    });\n    return Enum.new(map);\n  }\n\n  /**\n   * Constructs an enumeration in which each key is assigned a distinct integer value.\n   * Enums created this way are subject to renumbering if keys are reordered.\n   *\n   * @static\n   * @param {Array.<String>} keys Key names. The values will be sequential from zero.\n   * @returns {solace.Enum} An enumeration instance of the given values\n   * @private\n   */\n  static ofNumbers(keys) {\n    const map = {};\n    keys.forEach((key, index) => {\n      map[key] = index;\n    });\n    return Enum.new(map);\n  }\n}\n\nmodule.exports.Enum = Enum;\n","const { AbstractQueueDescriptor } = require('./abstract-queue-descriptor');\nconst { Destination } = require('solclient-destination');\n\nconst DEFAULTS = {\n  name:    undefined,\n  durable: true,\n};\n\n/**\n * This class identifies a queue or topic endpoint on the message router.\n *\n * Operations that make use of queue descriptors include\n *  * {@link solace.Session#createMessageConsumer}\n *  * {@link solace.Session#dteUnsubscribe}\n *\n * @classdesc QueueDescriptor\n * @extends {AbstractQueueDescriptor}\n * @memberof solace\n */\nclass QueueDescriptor extends AbstractQueueDescriptor {\n\n  /**\n   * Creates an instance of {@link solace.QueueDescriptor}.\n   *\n   * @param {Object|solace.QueueDescriptor} queueSpec A specification for this descriptor.\n   * @param {String} [queueSpec.name=null] The remote name to which this specification refers.\n   * @param {solace.QueueType} queueSpec.type The type of queue for this specification.\n   * @param {Boolean} [queueSpec.durable=true] `true` if this refers to a durable queue.\n   */\n  constructor(queueSpec) {\n    super(queueSpec instanceof Destination\n            ? { name: queueSpec.name, type: queueSpec.type } // synthesize durable later\n            : Object.assign({ }, DEFAULTS, queueSpec));\n  }\n\n  /**\n   * Gets/sets the remote name to which this descriptor refers.\n   * @returns {String} The name of the queue.\n   */\n  getName() {\n    return this._name;\n  }\n  get name() {\n    return this.getName();\n  }\n  set name(value) {\n    this._name = value;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'name':    this.name,\n      'type':    this.type,\n      'durable': this.durable,\n    };\n  }\n\n  /**\n   * An informational summary of this object, subject to change.\n   * @returns {String} A summary of this object.\n   */\n  toString() {\n    return `${super.toString()} '${this.getName() || ''}'`;\n  }\n\n  /**\n   * @static\n   * @param {any} spec The descriptor spec\n   * @returns {QueueDescriptor|AbstractQueueDescriptor} A new descriptor for the spec\n   * @private\n   */\n  static createFromSpec(spec) {\n    if (spec.name) return new QueueDescriptor(spec);\n    return AbstractQueueDescriptor(spec);\n  }\n}\n\nmodule.exports.QueueDescriptor = QueueDescriptor;\n","const { HTTPConnection } = require('./http-connection');\nconst { HTTPTransportSession } = require('./http-transport-session');\n\nif (BUILD_ENV.TARGET_BROWSER) {\n  module.exports.HTTPConnection = HTTPConnection;\n  module.exports.HTTPTransportSession = HTTPTransportSession;\n}\n","module.exports = require(\"util\");","const SMFLib = require('solclient-smf');\nconst { ApplicationAck,\n        ApplicationAckRingBuffer,\n        ApplicationAckState } = require('./application-acks');\nconst { assert } = require('solclient-eskit');\nconst { CapabilityType } = require('solclient-session');\nconst { ConsumerFSMEvent } = require('./consumer-fsm-event');\nconst { ConsumerFSMEventNames } = require('./consumer-fsm-event-names');\nconst { ConsumerStateNames } = require('./consumer-state-names');\nconst { DestinationFromNetwork,\n        DestinationType,\n        Queue,\n        Topic } = require('solclient-destination');\nconst { ErrorResponseSubcodeMapper,\n        ErrorSubcode,\n        OperationError } = require('solclient-error');\nconst { LogFormatter } = require('solclient-log');\nconst { Long } = require('solclient-convert');\nconst { MessageConsumerAcknowledgeMode } = require('./message-consumer-acknowledge-modes');\nconst { MessageConsumerEventName } = require('./message-consumer-event-names');\nconst { MessageDispatcher } = require('./message-dispatcher');\nconst { PrivateFlowEventName } = require('solclient-flow');\nconst { QueueAccessType,\n        QueueDescriptor,\n        QueuePermissions,\n        QueueProperties,\n        QueueType } = require('solclient-queue');\nconst { MessageOutcome, RgmidFactory } = require('solclient-message');\nconst { State, StateMachine } = require('solclient-fsm');\nconst { Stats,\n        StatType } = require('solclient-stats');\nconst { Timer } = require('solclient-events');\nconst { TransportAcks,\n        TransportAckResult } = require('./transport-acks');\n\nconst RING_BUFFER_SIZE = 512;\n// assumption is that this first message (messageId = 0) settlement outcome is ACCEPTED (ACKed)\nconst ZERO_APP_ACK = new ApplicationAck(Long.UZERO, ApplicationAckState.ACKED_SENT, MessageOutcome.ACCEPTED);\n\n\nclass ConsumerFSM extends StateMachine {\n  constructor({ name, consumer, sessionInterface, properties } = {}) {\n    super({ name });\n\n    const fsm = this;\n    const formatter = function formatter(...args) {\n      return [\n        `[session=${sessionInterface.sessionIdHex}]`,\n        `[message-consumer-fsm=${consumer.flowIdDec}]`,\n        ...args,\n      ];\n    };\n    const logger = this.logger = new LogFormatter(formatter);\n    const {\n      LOG_TRACE,\n      LOG_DEBUG,\n      LOG_INFO,\n      LOG_WARN,\n      LOG_ERROR,\n    } = logger;\n    this.log = logger.wrap(this.log, this);\n\n    const autoAck = properties.acknowledgeMode === MessageConsumerAcknowledgeMode.AUTO;\n\n    this._consumer = consumer;\n    this._sessionInterface = sessionInterface;\n\n    // Save copies of properties accessed outside the constructor\n    this._acknowledgeTimeoutInMsecs = properties.acknowledgeTimeoutInMsecs;\n    this._acknowledgeThreshold = properties.acknowledgeThreshold;\n    this._localPreferredWindowSize = properties.windowSize;\n    this._localMaxWindowSize = properties.windowSize;\n    this._hasAutoAckSupport = autoAck;\n\n    this._messageDispatch = new MessageDispatcher({ emitter: consumer, autoAck, logger });\n\n    this._stats = new Stats();\n\n    this._resetRemoteConnectionState();\n    this._resetLocalConnectionState();\n\n    // Flag to delay flow dispose() for autoAck.\n    this._midDispatch = false;\n    // Save a copy to clear out on first successful bind\n    this._replayStartLocation = properties.replayStartLocation;\n\n    this._errorCausingReconnect = null;\n    //**********************************************************************************************\n    // A bit of infrastructure around post-event actions, which includes maintaining a queue of\n    // pending actions, and some logic to pre-process the actions before performing them.\n\n    // These should not be the same as any MessageConsumerEventName value or they will collide in\n    // the actionLocations object during event pre-processing.\n    const emitEventActionType = 'EMIT';\n    const startDispatchActionType = 'DISPATCH';\n    const stopDispatchActionType = 'NO_DISPATCH';\n\n    let postEventActions = [];\n    function preprocessPostEventActions(startIndex) {\n      // first pre-process post event actions.  This isn't an exhaustive search of every possible\n      // combination of event sequences, as many are practically impossible, and therefore\n      // impossible to test.  We only handle sequences that are known to be possible.  If there\n      // are other sequences that need to be considered, we can add processing for them when we\n      // know they are possible.\n      LOG_TRACE(`Pre-processing post event action list @${startIndex}`, postEventActions);\n      const actionLocations = {};\n      postEventActions.forEach((action, i, arr) => {\n        function cancelAction(firstActionName, cancellingActionName) {\n          if (actionLocations[firstActionName] === undefined) {\n            return;\n          }\n          const firstLocation = actionLocations[firstActionName];\n          LOG_TRACE(`Cancelling post event action ${firstActionName}@${firstLocation} with ${\n            cancellingActionName}@${i}`);\n          actionLocations[firstActionName] = undefined;\n          arr[firstLocation] = null;\n          arr[i] = null;\n        }\n        if ((i < startIndex) || (!action)) {\n          LOG_TRACE(`Skip n/a action@${i}, start: ${startIndex}, action:`, action);\n          return;\n        }\n        switch (action.type) {\n          case emitEventActionType:\n            switch (action.data) {\n              case MessageConsumerEventName.UP:\n              case MessageConsumerEventName.ACTIVE:\n              case MessageConsumerEventName.RECONNECTED:\n                actionLocations[action.data] = i;\n                break;\n\n              case MessageConsumerEventName.DOWN:\n              case MessageConsumerEventName.DOWN_ERROR:\n              //case MessageConsumerEventName.RECONNECTED: // I can't get this to work :-/\n                cancelAction(MessageConsumerEventName.UP, action.data);\n                break;\n\n              case MessageConsumerEventName.INACTIVE:\n                cancelAction(MessageConsumerEventName.ACTIVE, action.data);\n                break;\n\n              default:\n                LOG_ERROR(`Unexpected event in post-event action: ${action.data}`);\n                break;\n            }\n            break;\n\n          case startDispatchActionType:\n            actionLocations[action.type] = i;\n            break;\n\n          case stopDispatchActionType:\n            cancelAction(startDispatchActionType, action.type);\n            break;\n\n          default:\n            break;\n        }\n      });\n    }\n\n    function processPostEventActions() {\n      let preprocessedActions = 0;\n      let i;\n\n      // Now we've pre-processed the list, execute any remaining non-null entries.  We don't use a\n      // foreach loop since foreach won't include elements added after processing has started.  This\n      // can occur if a callback causes more postEventActions to be added.\n      LOG_TRACE('Executing post event action list', postEventActions);\n      for (i = 0; i < postEventActions.length; ++i) {\n        if (preprocessedActions < postEventActions.length) {\n          preprocessPostEventActions(i);\n          preprocessedActions = postEventActions.length;\n        }\n        const action = postEventActions[i];\n        LOG_TRACE(`Action ${i}:`, action);\n        if (!action) {\n          continue;\n        }\n        switch (action.type) {\n          case emitEventActionType:\n            if (action.error !== undefined) {\n              consumer._emit(action.data, action.error);\n            } else {\n              consumer._emit(action.data);\n            }\n            break;\n\n          case stopDispatchActionType:\n            // We don't actually do the stop here -- it is always done when this is enqueued.\n            // The reason for enqueuing this event is to that it can cencel a startDispatch, if\n            // present.\n            break;\n\n          case startDispatchActionType:\n            this.requestStartDispatchFSM();\n            break;\n\n          default:\n            LOG_ERROR(`Unhandled post event action type: ${action.type}`);\n            break;\n        }\n      }\n      postEventActions = [];\n    }\n\n    function addPostEventAction(type, data, error) {\n      let newEvent;\n      if (data !== undefined) {\n        newEvent = { type, data, error };\n      } else {\n        newEvent = { type };\n      }\n      postEventActions.push(newEvent);\n      LOG_TRACE(`Added post event action ${postEventActions.length}:`, newEvent);\n      if (postEventActions.length === 1) {\n        fsm.setPostEventAction(processPostEventActions);\n      }\n    }\n\n    const addEventToEmit = (event, error) => {\n      if (!properties.activeIndicationEnabled) {\n        if ((event === MessageConsumerEventName.INACTIVE) ||\n            (event === MessageConsumerEventName.ACTIVE)) {\n          LOG_TRACE(`Skip emitting ${event} due to disabled flow active indications`);\n          return;\n        }\n      }\n      addPostEventAction(emitEventActionType, event, error);\n    };\n    const requestStartDispatch = () => {\n      addPostEventAction(startDispatchActionType);\n    };\n    const requestStopDispatch = () => {\n      // We do the stop inline, then add a post-event action so that it can have the effect of\n      // cancelling a previous start.  It will not execute the stop when processed however since we\n      // have already done it here.\n      this.requestStopDispatchFSM();\n      addPostEventAction(stopDispatchActionType);\n    };\n\n    this._addEventToEmit = addEventToEmit;\n    this._requestStartDispatch = requestStartDispatch;\n    this._requestStopDispatch = requestStopDispatch;\n\n    // End of post-event action infrastructure\n\n    // Utility functions\n    function emitBindFailed(error) {\n      assert(error instanceof OperationError);\n      consumer._emit(MessageConsumerEventName.CONNECT_FAILED_ERROR, error);\n    }\n\n    function emitRebindFailed(error) {\n      assert(error instanceof OperationError);\n      consumer._emit(MessageConsumerEventName.DOWN_ERROR, error);\n    }\n\n    function verifyEndpointSubscription(destination) {\n      let error = null;\n      if (destination) {\n        const subInfo = destination.getSubscriptionInfo();\n        if (subInfo && (subInfo.isShare || subInfo.isNoExport) &&\n            !fsm._sessionInterface.isCapable(CapabilityType.SHARED_SUBSCRIPTIONS)) {\n          error = new OperationError('Shared Subscriptions not Supported',\n                                     ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_SUPPORTED);\n        }\n      }\n      return error;\n    }\n\n    function verifyNackSettlementOutcomesSupport(requiredSettlementOutcomes) {\n      let error = null;\n      // check for whether the broker session supports the NACK capability\n      const settlementOutcomes = requiredSettlementOutcomes;\n      if (settlementOutcomes && settlementOutcomes.length > 0) {\n        // check the capability bit for settlement outcome (NACK) support or throw OperationError()\n        const isNackRequired = settlementOutcomes.some(v => v === MessageOutcome.FAILED || MessageOutcome.REJECTED);\n        if(isNackRequired && !fsm._sessionInterface.isCapable(CapabilityType.AD_APP_ACK_FAILED)) {\n          const outcomeNotSupportedError = `Session.capabilitySettlementOutcomeNotSupported: [ ${\n            settlementOutcomes.map(v => MessageOutcome.nameOf(v)).join(', ')\n          } ]`;\n          // log the operation error as a Warning\n          LOG_WARN(outcomeNotSupportedError);\n          // then create the actual OperationError object here\n          error = new OperationError(outcomeNotSupportedError, ErrorSubcode.INVALID_OPERATION);\n        }      \n      }\n      return error;\n    }\n    //**********************************************************************************************\n    // ChoicePoints on transitions.\n    // Not every transition is unilateral. In some cases, particularly with session-up/flow-open\n    // we want to check the session capabilities, which will effect which transition is taken.\n    // The following choicePoints are NOT generic, they may only be used in the documented states\n    // to control the transition out of that state.\n    // ChoicePoints must return a new state (this.transitionTo())\n    //\n    // checkCapabiltiesChoicePoint - Check the session capabilities against the consumer properties.\n    // If all requested properties are supported by the session capabilties, transitionTo(BindSent).\n    // otherwise emitError and transitionTo unbound.\n    // Used in:  fsm.Unbound.AwaitFlowOpen\n    //           fsm.Unbound.AwaitSessionUp\n    //\n    function checkCapabilitiesChoicePoint(curState) {\n      let error = null;\n      if (fsm._replayStartLocation !== undefined &&\n        !fsm._sessionInterface.isCapable(CapabilityType.MESSAGE_REPLAY)) {\n        error = new OperationError('Message Replay Not Supported',\n              ErrorSubcode.REPLAY_NOT_SUPPORTED);\n      } else if (properties.topicEndpointSubscription) {\n        error = verifyEndpointSubscription(properties.topicEndpointSubscription);\n      }\n      else if (properties.requiredSettlementOutcomes) {\n        error = verifyNackSettlementOutcomesSupport(properties.requiredSettlementOutcomes);\n      }\n\n      if (error) {\n        // Transition to Unbound means we wait for both SessionUp and flow open, which is rare.\n        // It makes sense here though, because the next session might be capable,\n        // but this one surely isn't.\n        // (and FLOW_DOWN is emitted, so we are waiting for both.)\n        return curState.transitionTo(fsm.Unbound, () =>\n              emitBindFailed(error));\n      }\n      // OK to bind\n      if (properties.createIfMissing &&\n        properties.queueDescriptor &&\n        properties.queueDescriptor.durable) {\n        return curState.transitionTo(fsm.CreateSent);\n      }\n      return curState.transitionTo(fsm.BindSent);\n    }\n\n    /**\n     * Check Capabilities on Re-Bind\n     * \n     * @param {*} curState - current state\n     * @param {*} externalTransition - is an external transition?\n     * @returns {State} retrurns the new state for the state machine\n     * @private\n     */\n    function checkCapabilitiesChoicePointOnRebind(curState, externalTransition = false) {\n      let error = null;\n      if (properties.requiredSettlementOutcomes) {\n        error = verifyNackSettlementOutcomesSupport(properties.requiredSettlementOutcomes);\n      }\n\n      if (error) {\n        // Transition to Unbound means we wait for both SessionUp and flow open, which is rare.\n        // It makes sense here though, because the next session might be capable,\n        // but this one surely isn't.\n        // (and FLOW_DOWN is emitted, so we are waiting for both.)\n        return curState.transitionTo(fsm.Unbound, () =>\n              emitBindFailed(error));\n      }\n      // OK to re-bind\n      if (externalTransition) {\n        return curState.externalTransitionTo(fsm.Reconnecting.RBindSent);\n      }\n      return curState.transitionTo(fsm.Reconnecting.RBindSent);\n    }\n    // End of ChoicePoints\n    //*********************************************************************************************\n    // FSM config\n\n    function handleAccidentalBind(msg) {\n      // Unbind with timout-recursion using flowid.\n\n      LOG_TRACE(`handleAccidentalBind mssg: ${msg}`);\n      const correlationTag = sessionInterface.getCorrelationTag();\n      const message = SMFLib.AdProtocolMessage.getCloseMessageConsumer(msg.flowId, correlationTag);\n      sessionInterface.sendControl(message);\n      sessionInterface.enqueueRequest(\n        correlationTag,\n        () => this.handleAccidentalBind(msg),\n        properties.connectTimeoutInMsecs,\n        null,\n        null); //ignore response. Maybe log?\n    }\n\n    this.unhandledEventReaction(function onUnhandledEvent(event) {\n      switch (event.getName()) {\n        case ConsumerFSMEventNames.VIRTUALROUTER_NAME_CHANGED:\n          LOG_INFO('VirtualRouter name change: clearing all acknowledgement state and partition group ID, if any');\n          fsm._resetRemoteConnectionState();\n          return this;\n        case ConsumerFSMEventNames.FLOW_UNBOUND:\n          LOG_INFO('Received unsolicited unbind. Flow may be manually reconnected.');\n          return this.transitionToUnbound(MessageConsumerEventName.DOWN_ERROR, event.details);\n        case ConsumerFSMEventNames.DISPOSE:\n          fsm._dispose();\n          return fsm.getCurrentState().terminate();\n        case ConsumerFSMEventNames.BIND_RESPONSE:\n          LOG_TRACE('Unhandled bind, assuming accidental BIND duplication');\n          handleAccidentalBind(event.details);\n          return this;\n        default:\n          LOG_TRACE(`Ignoring event ${event.getName()} in state ${this.getCurrentState().getName()}`);\n          return this;\n      }\n    });\n\n    this.initial(function onInitial() {\n      return this.transitionTo(fsm.Unbound, (context) => {\n        LOG_INFO(`Starting ${context.getStateMachine().getName()}`);\n      });\n    });\n\n    /*\n      We don't transition directly from Unbound to BindSent.\n      We need the following events:\n       * FLOW_OPEN\n       * SESSION_UP\n      (The session ensures we get SESSION_UP or SESSION_UP_NO_AD if we are created\n      and there is a session already up.)\n      The Unbound base state implements transitions to its wait state children:\n       * FLOW_OPEN -> AwaitSessionUp\n       * SESSION_UP -> AwaitFlowOpen\n      It also has the following transitions that pull the FSM out of its children\n      and back to itself:\n       * FLOW_CLOSE\n       * SESSION_DOWN\n      The child states can override these with internal transitions.\n     */\n    this.Unbound = new State({\n      name:          ConsumerStateNames.UNBOUND,\n      parentContext: fsm,\n    }, {\n      emitDisabledEvent() {\n        consumer._emit(MessageConsumerEventName.GM_DISABLED);\n      },\n    })\n      .reaction(ConsumerFSMEventNames.FLOW_CLOSE, function onFlowClose() {\n        return this.transitionTo(this);\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DOWN, function onSessionDown() {\n        return this.transitionTo(this);\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DISCONNECT, function onSesssionDisconnect() {\n        return this.transitionTo(this);\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_OPEN, function onFlowOpen() {\n        return this.transitionTo(fsm.Unbound.AwaitSessionUp); // Enter child state\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_UP, function onSessionUp() {\n        if (fsm._sessionInterface.isCapable(CapabilityType.GUARANTEED_MESSAGE_CONSUME)) {\n          return this.transitionTo(fsm.Unbound.AwaitFlowOpen); // Enter child state\n        }\n        LOG_WARN(`Consumer is not supported by router for this client on sessionId 0x${\n                 fsm._sessionInterface.sessionIdHex}`);\n        // Act as if the child state handled this\n        return this.internalTransition(() => this.emitDisabledEvent());\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_UP_NO_AD, function onSessionUpNoAD() {\n        // Act as if the child state handled this\n        return this.internalTransition(() => this.emitDisabledEvent());\n      })\n      .exit(() => {\n        fsm._connectAttempts = properties.connectAttempts;\n      });\n\n    /*\n      In this state, we have received FLOW_OPEN, but no SESSION_UP.\n      SESSION_DOWN does not cancel this wait, so we must override the\n      parent and explicitly do nothing.\n    */\n    this.Unbound.AwaitSessionUp = new State({\n      name:          ConsumerStateNames.UNBOUND_AWAIT_SESSION_UP,\n      parentContext: this.Unbound,\n    }, {\n      emitBindWaiting() {\n        consumer._emit(PrivateFlowEventName.BIND_WAITING);\n      },\n    })\n      .entry(function onEntry() {\n        this.emitBindWaiting();\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DOWN, function onSessionDown() {\n        return this.internalTransition(); // Don't exit; continue waiting\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DISCONNECT, function onSessionDown() {\n        return this.internalTransition(); // Don't exit; continue waiting\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_UP, function onSessionUp() {\n        return checkCapabilitiesChoicePoint(this);\n      });\n\n    /*\n      In this state, we have received SESSION_UP but not FLOW_OPEN.\n      If we get FLOW_OPEN, attempt to bind. Any other event is handled\n      by the parent.\n     */\n    this.Unbound.AwaitFlowOpen = new State({\n      name:          ConsumerStateNames.UNBOUND_AWAIT_FLOWOPEN,\n      parentContext: this.Unbound,\n    })\n      .reaction(ConsumerFSMEventNames.FLOW_OPEN, function onFlowOpen() {\n        return checkCapabilitiesChoicePoint(this);\n      });\n    // Factored out the extension object from the State constructor for reuse in\n    // flow auto-reconnect sister-states.\n    this.BindSentExtensions = {\n      sendBindRequest() {\n        const correlationTag = sessionInterface.getCorrelationTag();\n        const transportAcks = fsm._transportAcks;\n\n        fsm._endpointEnsure();\n        const endpoint = fsm._endpoint;\n        const subscription = fsm._subscription;\n\n        const message = SMFLib.AdProtocolMessage.getOpenMessageConsumer(\n          properties.queueDescriptor,\n          properties.queueProperties,\n          endpoint,\n          subscription,\n          correlationTag,\n          properties.windowSize,\n          properties.noLocal,\n          properties.activeIndicationEnabled,\n          transportAcks.lastAcked,\n          transportAcks.lastReceived,\n          properties.browser,\n          fsm._replayStartLocation,\n          consumer.endpointErrorId,\n          consumer.partitionGroupId,\n          (properties.requiredSettlementOutcomes && properties.requiredSettlementOutcomes.length > 0));\n        sessionInterface.sendControl(message);\n        sessionInterface.enqueueRequest(correlationTag,\n                                        this.handleBindTimeout.bind(this),\n                                        properties.connectTimeoutInMsecs,\n                                        null,\n                                        this.handleBindResponse.bind(this));\n        LOG_TRACE('Sent consumer bind request with arguments', [\n          properties.queueDescriptor,\n          properties.queueProperties,\n          endpoint,\n          subscription,\n          correlationTag,\n          properties.windowSize,\n          properties.noLocal,\n          properties.activeIndicationEnabled,\n          transportAcks.lastAcked,\n          transportAcks.lastReceived,\n          properties.browser,\n          fsm._replayStartLocation,\n          consumer.endpointErrorId,\n          consumer.partitionGroupId,\n          properties.requiredSettlementOutcomes]);\n      },\n      cancelBindRequestTimer() {\n        LOG_TRACE('Cancelling bindRequestTimer.');\n        this.bindRequestTimer.cancel();\n      },\n      handleBindTimeout() {\n        LOG_INFO('Bind timeout');\n        fsm.processEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.BIND_TIMEOUT }));\n      },\n      handleExpectedBind(msg) {\n        const accessTypeOrDefault = x => (x === undefined ? QueueAccessType.EXCLUSIVE : x);\n\n        // the partition group ID\n        let partitionGroupIdValue = msg.getPartitionGroupId();\n        if(partitionGroupIdValue == undefined || partitionGroupIdValue == null) {\n          partitionGroupIdValue = undefined; // set it as undefined\n          fsm._clearPartitionGroupId(); // clear the partitionGroupId\n        }\n\n        const attrs = {\n          lastMsgIdAcked:       msg.getLastMsgIdAcked(),\n          flowId:               msg.getFlowId(),\n          accessType:           accessTypeOrDefault(msg.getAccessType()),\n          topicEndpointBytes:   msg.getTopicEndpointBytes(),\n          grantedPermissions:   msg.getGrantedPermissions(),\n          allOthersPermissions: msg.getAllOthersPermissions(),\n          respectsTTL:          msg.getRespectsTTL(),\n          activeFlow:           msg.getActiveFlow(),\n          wantFlowChangeNotify: msg.getWantFlowChangeNotify(),\n          discardBehavior:      msg.getQueueDiscardBehavior(),\n          deliveryCountSent:    msg.getEndpointDeliveryCountSent(),\n          endpointId:           msg.getEndpointId(),\n          maxUnackedMessages:   msg.getMaxUnackedMessages(),\n          endpointErrorId:      msg.getEndpointErrorId(),\n          spoolerUniqueId:      msg.getSpoolerUniqueId(),\n          quota:                msg.getQuota(),\n          maxMsgSize:           msg.getMaxMsgSize(),\n          maxRedelivery:        msg.getMaxRedelivery(),\n          partitionGroupId:     partitionGroupIdValue,\n        };\n        LOG_DEBUG('BIND response attributes:', attrs);\n\n        Object.assign(consumer, {\n          accessType:           attrs.accessType,\n          queueDiscardBehavior: attrs.discardBehavior,\n          deliveryCountSent:    attrs.deliveryCountSent,\n          endpointId:           attrs.endpointId,\n          respectsTTL:          attrs.respectsTTL,\n          flowId:               attrs.flowId,\n          permissions:          attrs.grantedPermissions,\n          wantFlowChangeNotify: attrs.wantFlowChangeNotify,\n          endpointErrorId:      attrs.endpointErrorId,\n          spoolerUniqueId:      attrs.spoolerUniqueId,\n          partitionGroupId:     partitionGroupIdValue,\n        });\n        if (fsm._sessionInterface.isCapable(CapabilityType.BR_REPLAY_ERRORID)) {\n          consumer.endpointErrorId = attrs.endpointErrorId;\n        }\n\n        if (attrs.topicEndpointBytes && attrs.topicEndpointBytes.length) {\n          attrs.endpoint = DestinationFromNetwork.createDestinationFromBytes(\n            attrs.topicEndpointBytes);\n          LOG_DEBUG('Overwriting local endpoint:', fsm._endpoint, 'with remote:', attrs.endpoint);\n          fsm._endpoint = attrs.endpoint;\n          const consumerProperties = fsm._consumer._properties;\n          consumerProperties.queueDescriptor = new QueueDescriptor({\n            name:    attrs.endpoint.name,\n            type:    consumerProperties.queueDescriptor.type,\n            durable: consumerProperties.queueDescriptor.durable,\n          });\n        }\n\n        const consumerProperties = fsm._consumer._properties;\n        consumerProperties.queueProperties = new QueueProperties({\n          respectsTTL:          attrs.respectsTTL,\n          permissions:          attrs.allOthersPermissions,\n          quotaMB:              attrs.quota,\n          maxMessageSize:       attrs.maxMsgSize,\n          discardBehavior:      attrs.discardBehavior,\n          maxMessageRedelivery: attrs.maxRedelivery,\n          accessType:           attrs.accessType,\n        });\n        if (!consumerProperties.queueProperties.permissions) {\n          consumerProperties.queueProperties.permissions = QueuePermissions.NONE;\n        }\n\n\n        Object.assign(fsm, {\n          _active:           attrs.activeFlow,\n          _remoteWindowSize: attrs.maxUnackedMessages,\n        });\n\n        if (Long.UZERO.eq(fsm._transportAcks.lastAcked)) {\n          fsm._transportAcks.lastAcked = attrs.lastMsgIdAcked || Long.UZERO;\n        } else {\n          LOG_DEBUG(`Retaining last acked/last received: ${fsm._transportAcks}`);\n        }\n        //return this.transitionTo(fsm.FlowUp);\n        //return fsm.processEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.FLOW_UP }));\n      },\n      handleBindResponse(msg) {\n        LOG_TRACE(`handleBindResponse called for message ${msg}`);\n        if (msg.msgType !== SMFLib.SMFAdProtocolMessageType.BIND) {\n          LOG_INFO(`Unexpected message type in bind response: ${SMFLib.SMFAdProtocolMessageType.describe(msg.msgType)}`);\n          return fsm.processEvent(\n            new ConsumerFSMEvent(\n              { name: ConsumerFSMEventNames.FLOW_FAILED },\n              new OperationError(`Unexpected bind response: ${\n                                 SMFLib.SMFAdProtocolMessageType.describe(msg.msgType)}`,\n                                 ErrorSubcode.PROTOTOCOL_ERROR)));\n        }\n\n        const header = msg.smfHeader;\n        const responseCode = header.pm_respcode;\n\n        if (responseCode === null) {\n          // Drop message and increment stats. Flow will time out\n          this._consumer.incStat(StatType.RX_DISCARD_SMF_UNKNOWN_ELEMENT);\n          LOG_DEBUG(`Drop Open-Publisher-Flow Request message on sessionId 0x${\n                    this._sessionInterface.sessionIdHex}`);\n          return undefined;\n        }\n\n        if (responseCode !== 200) {\n          const description = header.pm_respstr;\n          const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode,\n                                                                            description);\n          LOG_INFO('Flow failed (bind):', responseCode, description, ErrorSubcode.describe(errorSubcode));\n          LOG_DEBUG('subcode:', errorSubcode);\n          return fsm.processEvent(new ConsumerFSMEvent(\n              { name: ConsumerFSMEventNames.FLOW_FAILED },\n              new OperationError(description, errorSubcode, { responseCode })));\n        }\n\n        const respEvent = { name: ConsumerFSMEventNames.BIND_RESPONSE };\n        return fsm.processEvent(new ConsumerFSMEvent(respEvent, msg));\n      },\n    };\n    this.BindSent = new State({\n      name:          ConsumerStateNames.BIND_SENT,\n      parentContext: fsm,\n    }, this.BindSentExtensions)\n      .entry(function onEntry() {\n        fsm._connectAttempts--;\n        this.sendBindRequest();\n        this.bindRequestTimer = Timer.newTimeout(properties.connectTimeoutInMsecs,\n                                                 this.handleBindTimeout);\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DOWN, function onSessionDown() {\n        return this.transitionTo(fsm.Unbound.AwaitSessionUp);\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DISCONNECT, function onSessionDown() {\n        return this.transitionTo(fsm.Unbound.AwaitSessionUp,\n                                 () => fsm._addEventToEmit(MessageConsumerEventName.DOWN));\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_CLOSE, function onFlowClose() {\n        return this.transitionTo(fsm.UnbindSent);\n      })\n      .reaction(ConsumerFSMEventNames.BIND_TIMEOUT, function onBindTimeout() {\n        LOG_TRACE(`Bind timeout, connectAttempts left: ${fsm._connectAttempts}`);\n        if (fsm._connectAttempts > 0) {\n          return this.externalTransitionTo(fsm.BindSent);\n        }\n        return this.transitionTo(fsm.Unbound.AwaitFlowOpen,\n                                 () => emitBindFailed(\n                                    new OperationError('Bind failed due to timeout',\n                                                       ErrorSubcode.TIMEOUT)));\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_FAILED, function onFlowFailed(evt) {\n        // Act like a newly created flow\n        return this.transitionTo(fsm.Unbound.AwaitFlowOpen, () => emitBindFailed(evt.details));\n      })\n      .reaction(ConsumerFSMEventNames.BIND_RESPONSE, function onBindResponse(event) {\n        this.handleExpectedBind(event.details);\n        //return this;\n        return this.transitionTo(fsm.FlowUp);\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_UP, function onFlowUp() {\n        return this.transitionTo(fsm.FlowUp);\n      })\n      .exit(function onExit() {\n        this.cancelBindRequestTimer();\n      });\n    this.Reconnecting = new State({\n      name:          ConsumerStateNames.RECONNECTING,\n      parentContext: fsm,\n    })\n      .entry(function onEntry() {\n        LOG_TRACE('RECONNECTING onEntry: emitting RECONNECTING, resetting attempt counters');\n        LOG_TRACE(`this._errorCausingReconnect: ${this._errorCausingReconnect}`);\n        LOG_TRACE(`fsm._errorCausingReconnect: ${fsm._errorCausingReconnect}`);\n        consumer._emit(MessageConsumerEventName.RECONNECTING, fsm._errorCausingReconnect);\n        fsm._connectAttempts = properties.connectAttempts;\n        fsm.reconnectAttempts = properties.reconnectAttempts;\n      })\n      .initial(\n        function onInitial() {\n          return checkCapabilitiesChoicePointOnRebind(this, false);\n          // return this.transitionTo(fsm.Reconnecting.RBindSent);\n        })\n      .reaction(ConsumerFSMEventNames.SESSION_DISCONNECT, function onSessionDown() {\n        return this.transitionTo(fsm.Reconnecting.RAwaitSessionUp);\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DOWN, function onSessionDown() {\n        return this.transitionTo(fsm.Reconnecting.RAwaitSessionUp);\n      });\n    this.Reconnecting.RAwaitSessionUp = new State({\n      name:          ConsumerStateNames.RECONNECTING_AWAIT_SESSION_UP,\n      parentContext: this.Reconnecting,\n    })\n      .reaction(ConsumerFSMEventNames.SESSION_UP, function onSessionUp() {\n        fsm._connectAttempts = properties.connectAttempts;\n        return checkCapabilitiesChoicePointOnRebind(this, false);\n        // return this.transitionTo(fsm.Reconnecting.RBindSent);\n      });\n    this.Reconnecting.RBindSent = new State({\n      name:          ConsumerStateNames.RECONNECTING_BIND_SENT,\n      parentContext: this.Reconnecting,\n    }, this.BindSentExtensions)\n      .entry(function onEntry() {\n        fsm._connectAttempts--;\n        this.sendBindRequest();\n        this.bindRequestTimer = Timer.newTimeout(properties.connectTimeoutInMsecs,\n                                                 this.handleBindTimeout);\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_CLOSE, function onFlowClose() {\n        // TODO: This is probably wrong in the original state machine too:\n        // flowid is either missing or stale. Keeping it the same as there for now.\n        return this.transitionTo(fsm.UnbindSent);\n      })\n      .reaction(ConsumerFSMEventNames.BIND_TIMEOUT, function onBindTimeout() {\n        LOG_TRACE(`Bind timeout during reconnect, connectAttempts left: ${fsm._connectAttempts}`);\n        if (fsm._connectAttempts > 0) {\n          return checkCapabilitiesChoicePointOnRebind(this, true);\n          // return this.externalTransitionTo(fsm.Reconnecting.RBindSent);\n        }\n        // Running out of rebinds is a non rebindable failure, so break the reconect loop.\n        LOG_TRACE('Running out of rebinds is a non rebindable failure, so break the reconect loop.');\n        return this.transitionTo(fsm.Unbound.AwaitFlowOpen,\n                                 () => emitBindFailed(\n                                    new OperationError('Rebind failed due to timeout',\n                                                       ErrorSubcode.TIMEOUT)));\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_FAILED, function onFlowFailed(evt) {\n        // These three reconnect-errors are \"rebindable\",\n        // anything else breaks the reconnect loop.\n        if (fsm.reconnectAttempts > 0 || fsm.reconnectAttempts === -1) {\n          if (evt && evt.details && evt.details.subcode) {\n            if (evt.details.subcode === ErrorSubcode.QUEUE_SHUTDOWN ||\n              evt.details.subcode === ErrorSubcode.TOPIC_ENDPOINT_SHUTDOWN ||\n              evt.details.subcode === ErrorSubcode.GM_UNAVAILABLE) {\n              LOG_TRACE(`ReconnectAttempts left: ${fsm.reconnectAttempts} subcode: ${evt.details.subcode}, giving it another shot.`);\n              return this.transitionTo(fsm.Reconnecting.RAwaitTimer);\n            }\n          } else {\n            LOG_DEBUG(`Hmm, no subcode in FLOW_FAILED? ${evt}`);\n          }\n        } else {\n          LOG_TRACE(`Ran out of reconnectAttempts: ${fsm.reconnectAttempts}`);\n        }\n        return this.transitionTo(fsm.Unbound.AwaitFlowOpen, () => emitRebindFailed(evt.details));\n      })\n      .reaction(ConsumerFSMEventNames.BIND_RESPONSE, function onBindResponse(event) {\n        this.handleExpectedBind(event.details);\n        //return this;\n        return this.transitionTo(fsm.FlowUp,\n                                 () => fsm._addEventToEmit(MessageConsumerEventName.RECONNECTED));\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_UP, function onFlowUp() {\n        return this.transitionTo(fsm.FlowUp,\n                                 () => fsm._addEventToEmit(MessageConsumerEventName.RECONNECTED));\n                                 //() => consumer._emit(MessageConsumerEventName.RECONNECTING));\n      })\n      .exit(function onExit() {\n        this.cancelBindRequestTimer();\n      });\n    this.Reconnecting.RAwaitTimer = new State({\n      name:          ConsumerStateNames.RECONNECTING_AWAIT_TIMER,\n      parentContext: this.Reconnecting,\n    }, {\n      handleReconnectIntervalTimeout() {\n        LOG_DEBUG('Reconnect interval timeout (expected)');\n        fsm.processEvent(new ConsumerFSMEvent({\n          name: ConsumerFSMEventNames.RECONNECT_INTERVAL_TIMEOUT }));\n      },\n      cancelReconnectIntervalTimer() {\n        this.reconnectIntervalTimer.cancel();\n      },\n\n    }).entry(function onEntry() {\n      if (fsm.reconnectAttempts > 0) {\n        --fsm.reconnectAttempts;\n      }\n      LOG_TRACE(`Setting up timer for ${properties.reconnectIntervalInMsecs}. reconnectAttempts left: ${fsm.reconnectAttempts}`);\n      this.reconnectIntervalTimer = Timer.newTimeout(properties.reconnectIntervalInMsecs,\n                                                     this.handleReconnectIntervalTimeout);\n    }).exit(function onExit() {\n      this.cancelReconnectIntervalTimer();\n    }).reaction(ConsumerFSMEventNames.RECONNECT_INTERVAL_TIMEOUT, function onTimeout() {\n      fsm._connectAttempts = properties.connectAttempts;\n      return checkCapabilitiesChoicePointOnRebind(this, false);\n      // return this.transitionTo(fsm.Reconnecting.RBindSent);\n    });\n\n    const flowUpFSM = this.FlowUp = new State({\n      name:          ConsumerStateNames.FLOW_UP,\n      parentContext: fsm,\n    })\n      .initial(\n        function onInitial() {\n          return this.transitionTo(fsm._active === 0\n            ? flowUpFSM.XferInactive\n            : flowUpFSM.Xfer);\n        }\n      )\n      .entry(() => {\n        fsm._replayStartLocation = undefined; //SOL-12945: only replay once.\n        // This is ugly, but I can't coerce the post event action queue to work with me:\n        // RECONNECTING should suppress UP.\n        if (!fsm._errorCausingReconnect) {\n          LOG_TRACE('Emitting UP, because there is no errorCausingReconnect');\n          fsm._addEventToEmit(MessageConsumerEventName.UP);\n        } else {\n          LOG_TRACE('Not emitting UP, because there is errorCausingReconnect');\n          fsm._errorCausingReconnect = null;\n        }\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DOWN, function onSessionDown() {\n        return this.transitionTo(fsm.Unbound.AwaitSessionUp);\n      })\n      .reaction(ConsumerFSMEventNames.SESSION_DISCONNECT, function onSessionDisconnect() {\n        return this.transitionTo(fsm.Unbound.AwaitSessionUp,\n                                 () => fsm._addEventToEmit(MessageConsumerEventName.DOWN));\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_CLOSE, function onFlowClose() {\n        // Acks will be sent by UnbindSent\n        return this.transitionTo(fsm.UnbindSent);\n      })\n      .reaction(ConsumerFSMEventNames.FLOW_UNBOUND, event =>\n        // Acks will be sent by UnbindSent\n        fsm.transitionToUnboundFromUp(\n          properties,\n          MessageConsumerEventName.DOWN_ERROR,\n          event.details)\n      );\n\n    flowUpFSM.Xfer = new State({\n      name:          ConsumerStateNames.FLOW_UP_XFER,\n      parentContext: flowUpFSM,\n    })\n      .entry(() => {\n        fsm._addEventToEmit(MessageConsumerEventName.ACTIVE);\n        fsm._sendAcks(true);\n        fsm._requestStartDispatch();\n      })\n      .exit(() => {\n        fsm._addEventToEmit(MessageConsumerEventName.INACTIVE);\n        fsm._requestStopDispatch();\n      })\n      // Here we send acks on disconnect.  Acks for the FLOW_CLOSE event are coupled to the sending\n      // of the unbind.\n      .reaction(ConsumerFSMEventNames.SESSION_DISCONNECT, function onSessionDown() {\n        fsm._sendAcks(true);            // send acks, then...\n        return this.eventUnhandled();   // let the parent state handle the remaining steps.\n      });\n\n    flowUpFSM.XferInactive = new State({\n      name:          ConsumerStateNames.FLOW_UP_XFER_INACTIVE,\n      parentContext: flowUpFSM,\n    })\n      .reaction(ConsumerFSMEventNames.FLOW_ACTIVE_IND, function onFlowActiveIndication() {\n        return this.transitionTo(flowUpFSM.Xfer);\n      });\n\n    this.UnbindSent = new State({\n      name:          ConsumerStateNames.UNBIND_SENT,\n      parentContext: fsm,\n    }, {\n\n      sendUnbindRequest() {\n        // Don't do this on entry to UNBIND, do it when the user\n        // wants to unbind\n\n        fsm._endpointClear();\n        try {\n          const correlationTag = sessionInterface.getCorrelationTag();\n          const message = SMFLib.AdProtocolMessage.getCloseMessageConsumer(consumer.flowId,\n                                                                           correlationTag);\n          sessionInterface.sendControl(message);\n          sessionInterface.enqueueRequest(\n            correlationTag,\n            () => this.handleUnbindTimeout(),\n            properties.connectTimeoutInMsecs,\n            null,\n            response => this.handleUnbindResponse(response));\n          LOG_INFO('Sent consumer unbind request with arguments',\n                   {\n                     flowId: consumer.flowId,\n                     correlationTag,\n                   });\n        } catch (e) {\n          LOG_INFO(`Exception in sendUnbindRequest while trying to send unbind request: ${e}`);\n          LOG_DEBUG(`Session (${sessionInterface.getCurrentStateName()}) assumed lost before flow unbind could be sent. Considering this flow unbound.`);\n          fsm.processEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.FLOW_UNBOUND }));\n        }\n      },\n\n      handleUnbindTimeout() {\n        LOG_INFO('Unbind timeout');\n        return fsm.processEvent(\n          new ConsumerFSMEvent({ name: ConsumerFSMEventNames.UNBIND_TIMEOUT })\n        );\n      },\n\n      handleUnbindResponse(msg) {\n        if (msg.msgType !== SMFLib.SMFAdProtocolMessageType.UNBIND) {\n          LOG_INFO(`Unexpected message type in bind response: ${SMFLib.SMFAdProtocolMessageType.describe(msg.msgType)}`);\n        }\n        const responseCode = msg.smfHeader.pm_respcode;\n        const description = msg.smfHeader.pm_respstr;\n        const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode,\n                                                                          description);\n        consumer.endpointErrorId = msg.getEndpointErrorId();\n        LOG_INFO('Flow failed (unbind):', responseCode, description, ErrorSubcode.describe(errorSubcode));\n        return fsm.processEvent(new ConsumerFSMEvent(\n          { name: ConsumerFSMEventNames.FLOW_UNBOUND },\n          new OperationError(description, errorSubcode, responseCode)));\n      },\n\n    })\n      .entry(function onEntry() {\n        this.sendUnbindRequest();\n      })\n      .reaction(ConsumerFSMEventNames.UNBIND_TIMEOUT, function onUnbindTimeout() {\n        return this.externalTransitionTo(fsm.UnbindSent);\n      })\n      // The choice point will emit on this transition, not on exit, which is OK:\n      // we don't want to repeatedly dispatch \"unbound\" when the unbinds are timing out\n      .reaction(ConsumerFSMEventNames.FLOW_UNBOUND,\n                () => fsm.transitionToUnbound(MessageConsumerEventName.DOWN));\n\n\n    this.CreateSent = new State({\n      name:          ConsumerStateNames.CREATE_SENT,\n      parentContext: fsm,\n    }, {\n      sendCreateRequest() {\n        const correlationTag = sessionInterface.getCorrelationTag();\n        const message = SMFLib.AdProtocolMessage.getCreate(\n          properties.queueDescriptor,\n          properties.queueProperties,\n          correlationTag);\n        sessionInterface.sendControl(message);\n        sessionInterface.enqueueRequest(\n          correlationTag,\n          this.handleCreateTimeout.bind(this),\n          properties.connectTimeoutInMsecs,\n          null,\n          this.handleCreateResponse.bind(this));\n      },\n      handleCreateTimeout() {\n        LOG_INFO('Create timeout');\n        fsm.processEvent(new ConsumerFSMEvent({ name: ConsumerFSMEventNames.CREATE_TIMEOUT }));\n      },\n      handleCreateResponse(msg) {\n        LOG_TRACE(`handleCreateResponse called for message ${msg}`);\n\n\n        if (msg.msgType !== SMFLib.SMFAdProtocolMessageType.CREATE) {\n          LOG_INFO(`Unexpected message type in create response: ${SMFLib.SMFAdProtocolMessageType.describe(msg.msgType)}`);\n          return fsm.processEvent(\n            new ConsumerFSMEvent(\n              { name: ConsumerFSMEventNames.CREATE_FAILED },\n              new OperationError(`Unexpected create response: ${\n                                 SMFLib.SMFAdProtocolMessageType.describe(msg.msgType)}`,\n                                 ErrorSubcode.PROTOTOCOL_ERROR)));\n        }\n\n        const header = msg.smfHeader;\n        const responseCode = header.pm_respcode;\n\n        if (responseCode !== 200) {\n          const description = header.pm_respstr;\n          const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode,\n                                                                            description);\n          LOG_INFO('Endpoint create failed:', responseCode, description, ErrorSubcode.describe(errorSubcode));\n          LOG_DEBUG('subcode:', errorSubcode);\n          if (errorSubcode === ErrorSubcode.ENDPOINT_ALREADY_EXISTS) {\n            LOG_TRACE('subcode recognized as ALREADY EXISTS:', errorSubcode);\n            const respEvent = { name: ConsumerFSMEventNames.CREATE_SUCCESS };\n            return fsm.processEvent(new ConsumerFSMEvent(respEvent, msg));\n          }\n          LOG_TRACE('subcode not recognized as ALREADY EXISTS:', errorSubcode);\n          return fsm.processEvent(new ConsumerFSMEvent(\n              { name: ConsumerFSMEventNames.CREATE_FAILED },\n              new OperationError(description, errorSubcode, { responseCode })));\n        }\n\n        const respEvent = { name: ConsumerFSMEventNames.CREATE_SUCCESS };\n        return fsm.processEvent(new ConsumerFSMEvent(respEvent, msg));\n      },\n    }\n    )\n      .entry(function onEntry() {\n        //send create request\n        this.sendCreateRequest();\n      })\n      .reaction(ConsumerFSMEventNames.CREATE_TIMEOUT, function onCreateTimeout() {\n        LOG_DEBUG('Create timeout, just moving on to bind and hoping for the best.');\n        return this.externalTransitionTo(fsm.BindSent);\n      })\n      .reaction(ConsumerFSMEventNames.CREATE_SUCCESS, function onCreateSuccess() {\n        return this.externalTransitionTo(fsm.BindSent);\n      })\n      .reaction(ConsumerFSMEventNames.CREATE_FAILED, function onCreateFailed(evt) {\n        // \"queue exists\" should be noticed in the response handler and emit CREATE_SUCCESS.:\n        return this.transitionTo(fsm.Unbound.AwaitFlowOpen, () => emitBindFailed(evt.details));\n      });\n  }\n\n  /**\n   *\n   * @param {solace.Message} message The message being accepted by the flow.\n   * @returns {Boolean} True if the message was accepted.\n   * @private\n   */\n  acceptMessage(message) {\n    const { LOG_TRACE, LOG_DEBUG } = this.logger;\n    const messageID = message.getGuaranteedMessageId();\n    const idstr = messageID.toString();\n    const consumer = this._consumer;\n\n    if (!this._fsmDispatch) {\n      // We're disconnecting. Drop the message.\n      LOG_TRACE('Dropping message because this flow cannot acknowledge it');\n      consumer.incStat(StatType.RX_DISCARD_NO_MATCHING_CONSUMER);\n      return false;\n    }\n    //Booby trap getDeliveryCount() on the message if the flow doesn't support it:\n    if (!consumer.deliveryCountSent) {\n      message.setDeliveryCount(-1);\n    }\n    // SMF flow suid can be updated via data message if there is a\n    // header parameter containing the suid. All subsequent data messages\n    // without suid must have the stored Flow suid set on data message.\n    //\n    // Update flow with message suid if and only if there was an initialized\n    // suid from the flow bind response.\n    // There is a legacy router case where suid are passed opaquely through the\n    // network of brokers on the message. In the case where a suid is present\n    // on a message without a suid on the bind response this indicates the suid\n    // is not an update to subsequent messages suid values. As the current broker\n    // connected does not support suid generation or assignment.\n    //\n    // Note a spooler unique id is only set if the message SMF\n    // contained the SpoolerUniqueId header parameter.\n    // See decode for details.\n    const messageSuid = message._getSpoolerUniqueId();\n    if (RgmidFactory.INVALID_SUID.eq(messageSuid)) {\n      // set the message suid value to stored consumer suid value\n      message._setSpoolerUniqueId(consumer.spoolerUniqueId);\n    } else if (consumer.spoolerUniqueId !== undefined\n        && !RgmidFactory.INVALID_SUID.eq(consumer.spoolerUniqueId)) {\n      // otherwise update the consumer with new suid value if consumer suid was initialized\n      const consumerSuidStr = consumer.spoolerUniqueId.toString();\n      const msgSuidStr = messageSuid.toString();\n      LOG_DEBUG('Updating Consumer message spoolerUniqueId from ', consumerSuidStr,\n                ' to ', msgSuidStr);\n      consumer.spoolerUniqueId = messageSuid;\n    } else if ((consumer.spoolerUniqueId === undefined\n        || RgmidFactory.INVALID_SUID.eq(consumer.spoolerUniqueId))\n        && !RgmidFactory.INVALID_SUID.eq(messageSuid)) {\n      // clear the message spooler unique id on flows without initial spooler\n      // unique id as rmid is not supported\n      message._setSpoolerUniqueId(RgmidFactory.INVALID_SUID);\n    }\n\n    const transportAcks = this._transportAcks;\n    const ackResult = transportAcks.tryReceive(messageID,\n                                               message.getGuaranteedPreviousMessageId());\n    const transportAckRequired = transportAcks.acksPending > this.maxPendingAcks;\n    switch (ackResult) {\n      case TransportAckResult.OK:\n        break; // carry on\n      case TransportAckResult.DUPLICATE:\n        consumer.incStat(StatType.RX_DISCARD_DUPLICATE);\n        // Two options here: could check membership in the ringbuffer,\n        // or could check whether the ID is less than ringbuffer.front().\n        // Untested assumption: arithmetic comparison on boxed Long at front()\n        // is more computationally expensive than native Map() lookup.\n        if (!this._applicationAcks.has(messageID) &&\n            !this._oldUnacked.has(idstr)) {\n          LOG_TRACE('Will application ack unknown duplicate ID', idstr);\n          const dupAckRanges = new Map();\n          dupAckRanges.set(MessageOutcome.ACCEPTED, [[messageID, messageID]]);\n          this._sendAck(dupAckRanges); // send ack for duplicates as ACCEPTED outcome (broker would use previous settlement outcome for message)\n        } else if (transportAckRequired) {\n          this._sendAcks(transportAckRequired);\n        } else {\n          // if we are receiving dups we should make sure we send\n          // and ack in case we don't receive any non duplicates\n          // and we don't receive enough duplicates to exceed\n          // maxPendingAcks.  Eventually we would but only after\n          // the  router retransmitted many times.\n          this._setTransportAckTimer();\n        }\n        return false;\n      case TransportAckResult.OUT_OF_ORDER:\n        consumer.incStat(StatType.RX_DISCARD_OUT_OF_ORDER);\n        return false;\n      default:\n        assert(false, 'Unhandled transport ack result', ackResult);\n        return false;\n    }\n\n    return this._applicationAcks.insert(messageID, (evicting) => {\n      let applicationAckRequired = false;\n      if (evicting) {\n        switch (evicting.state) {\n          case ApplicationAckState.UNACKED:\n            this._oldUnacked.add(evicting.key);\n            break;\n          case ApplicationAckState.ACKED_NOT_SENT:\n            applicationAckRequired = true;\n            break;\n          case ApplicationAckState.ACKED_SENT:\n            // OK to evict\n            break;\n          default:\n            assert(false,\n                   'Unhandled application ack state',\n                   ApplicationAckState.describe(evicting.state));\n        }\n      }\n\n      this._midDispatch = true;\n      this._messageDispatch.push(message);\n      this._midDispatch = false;\n\n      if (transportAckRequired || applicationAckRequired) {\n        LOG_TRACE('Need to send acks:',\n                  'transport', transportAckRequired,\n                  'application', applicationAckRequired);\n        this._sendAcks(transportAckRequired);\n      } else {\n        this._setTransportAckTimer();\n      }\n\n      return true;\n    });\n  }\n\n  applicationAck(messageId, isAutoAcked = false) {\n    // internally call the applicationSettle(messageId, MessageOutcome.ACCEPTED); \n    // since the implementations are the same\n    this.applicationSettle(messageId, MessageOutcome.ACCEPTED, isAutoAcked);\n  }\n\n  applicationSettle(messageId, messageOutcome = MessageOutcome.ACCEPTED, isAutoAcked = false) {\n    const { LOG_TRACE } = this.logger;\n\n    const idstr = messageId.toString();\n\n    // increment the correct stat for the outcome\n    switch(messageOutcome) {\n      case MessageOutcome.FAILED:\n        LOG_TRACE('Settling the message with outcome as solace.MessageOutcome.FAILED');\n        // count persistent and non-persistent settled failed msgs\n        this._consumer.incStat(StatType.RX_SETTLE_FAILED);\n        break;\n      // case MessageOutcome.RELEASED:\n      //   // no current support for RELEASED settlement Outcome\n      //   break;\n      case MessageOutcome.REJECTED:\n        LOG_TRACE('Settling the message with outcome as solace.MessageOutcome.REJECTED');\n        // count persistent and non-persistent settled rejected msgs\n        this._consumer.incStat(StatType.RX_SETTLE_REJECTED);\n        break;\n\n      case MessageOutcome.ACCEPTED:\n         // count persistent and non-persistent settled accepted msgs\n        LOG_TRACE('Settling the message with outcome as solace.MessageOutcome.ACCEPTED');\n        // count for manual calls on Message.acknowledge(); or Message.settle(outcome); methods\n        // so that we don't count for auto-Acks\n        if(!isAutoAcked) {\n          this._consumer.incStat(StatType.RX_SETTLE_ACCEPTED); // count persistent and non-persistent settled accepted msgs\n        }\n        // increment the Acked stat for calls to accept() and auto-acks\n        this._consumer.incStat(StatType.RX_ACKED); // count it as normal acknowledgement\n        break;\n    }\n\n    // Was the message old, and demoted to _oldUnacked?\n    if (this._oldUnacked.delete(idstr)) { // True if idstr was member\n      // It was old. Ack immediatesly.\n      LOG_TRACE('Application acking old message immediately');\n      const oldAckRanges = new Map();\n      oldAckRanges.set(messageOutcome, [[messageId, messageId]]);\n      this._sendAck(oldAckRanges); // send settlement outcome for message\n      return;\n    }\n\n    // We can't regress the ack_state this way; message.acknowledge() throws if called\n    // more than once.\n    this._applicationAcks.updateAckState(messageId, ApplicationAckState.ACKED_NOT_SENT, messageOutcome);\n    // if the message outcome is not ACCEPTED, then flush the buffer immediately\n    if(messageOutcome !== MessageOutcome.ACCEPTED) {\n      this._sendAcks(true); // send the accumulated Ack(s) and Nacks immediately\n    } else {\n      this._setTransportAckTimer();\n    }\n  }\n\n  getDestination() {\n    this._endpointEnsure();\n    return this._destination;\n  }\n\n  isDisconnected() {\n    if (!this.getCurrentState()) return true;\n    return (\n      this.getActiveState(ConsumerStateNames.UNBOUND) ||\n      this.getActiveState(ConsumerStateNames.UNBOUND_AWAITING_FLOWOPEN)\n    );\n  }\n\n  requestStartDispatchUser() {\n    this._userDispatch = true;\n    this.applyStartDispatch();\n  }\n\n  requestStartDispatchFSM() {\n    this._fsmDispatch = true;\n    this.applyStartDispatch();\n  }\n\n  applyStartDispatch() {\n    if (this._userDispatch && this._fsmDispatch) {\n      this.log(`Starting message dispatch (fsm ${this._fsmDispatch}, user ${this._userDispatch})`);\n      this._messageDispatch.start();\n      this._localMaxWindowSize = this._localPreferredWindowSize;\n      this._sendAcks(true);\n    } else {\n      this.log(`Not starting message dispatch (fsm ${this._fsmDispatch}, user ${this._userDispatch})`);\n    }\n  }\n\n  transitionToUnbound(eventName, error) {\n    const consumer = this._consumer;\n    const { LOG_TRACE } = this.logger;\n\n    LOG_TRACE('Flow down, user disconnected?', consumer.userDisconnected);\n\n    this._clearPartitionGroupId(); // clear the partitionGroupId\n\n    return this.transitionTo(this.Unbound.AwaitFlowOpen, () =>\n      this._addEventToEmit(eventName, error));\n  }\n\n  transitionToUnboundFromUp(properties, eventName, error) {\n    const consumer = this._consumer;\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Choice point for FLOW_UNBOUND in FlowUp state.');\n    // Always clear duplicate filter state on \"Replay started\"\n    // (no way to maintain it and drop the replayed messages as duplicates)\n    if (error && error instanceof OperationError && error.subcode) {\n      if (error.subcode === ErrorSubcode.REPLAY_STARTED) {\n        // \"this\" is the fsm.\n        this._transportAcks.reset();\n        this._applicationAcks.reset();\n      }\n    }\n\n    this._clearPartitionGroupId(); // clear the partitionGroupId\n\n    if (consumer.endpointErrorId &&\n      this._sessionInterface.isCapable(CapabilityType.MESSAGE_REPLAY)) {\n      LOG_TRACE(`Acking unsolicited unbind with endpointErrorId ${consumer.endpointErrorId}`);\n      const unbindAck = SMFLib.AdProtocolMessage.getUnbindAck(consumer._flowId,\n                                                              consumer.endpointErrorId,\n                                                              this._transportAcks.lastAcked);\n      this._sessionInterface.sendControl(unbindAck); // Must succeed or throw\n    }\n    if (properties.reconnectAttempts === -1 || properties.reconnectAttempts > 0) {\n      if (error && error instanceof OperationError && error.subcode) {\n        if (error.subcode === ErrorSubcode.REPLAY_STARTED ||\n          error.subcode === ErrorSubcode.GM_UNAVAILABLE) {\n          LOG_TRACE(`Saving errorCausingReconnect: ${error}`);\n          this._errorCausingReconnect = error;\n          // Reconnecting state emits the RECONNECTING event.\n          return this.transitionTo(this.Reconnecting);\n        }\n      }\n    } //else: flow reconnect feature disabled, or not applicable.\n    return this.transitionTo(this.Unbound.AwaitFlowOpen, () =>\n      this._addEventToEmit(eventName, error));\n  }\n\n  requestStopDispatchUser() {\n    this._userDispatch = false;\n    this.log(`Stop dispatch user (fsm ${this._fsmDispatch}, user ${this._userDispatch})`);\n    this._messageDispatch.stop();\n  }\n\n  requestStopDispatchFSM() {\n    this._fsmDispatch = false;\n    this.log(`Stop dispatch FSM (fsm ${this._fsmDispatch}, user ${this._userDispatch})`);\n    this._sendAcks(true);\n  }\n\n  _clearTransportAckTimer() {\n    if (!this._transportAckTimer) return;\n\n    clearTimeout(this._transportAckTimer);\n    this._transportAckTimer = null;\n  }\n\n  _dispose() {\n    this._clearTransportAckTimer();\n    this._endpointClear();\n    this._destination = undefined;\n    this._unacked = null;\n    this._messageDispatch = null;\n    this._transportAcks = null;\n    this._consumer = null;\n    this._sessionInterface = null;\n  }\n\n  _endpointClear() {\n    this._endpoint = undefined;\n    this._subscription = undefined;\n  }\n\n  _endpointEnsure() {\n    if (this._endpoint) {\n      // The endpoint, destination and any possible topic subscription are generated\n      // at the same time. Use the presence of the endpoint to determine whether\n      // any of this has already been done.\n      return;\n    }\n\n    const sessionInterface = this._sessionInterface;\n    const properties = this._consumer._properties;\n    const { queueDescriptor } = properties;\n\n    let destination;\n    let endpoint;\n    let subscription;\n    if (queueDescriptor.type === QueueType.QUEUE) {\n      // The publish destination needs a prefix. Create a destination from\n      // the descriptor, then derive the endpoint name from that.\n      destination = sessionInterface.createDestinationFromDescriptor(queueDescriptor);\n\n      // The bind target is the queue name encoded as though a topic -- no prefix\n      // Use the offset information to build a bind target\n      endpoint = new Queue({\n        name:   destination.name,\n        type:   DestinationType.QUEUE,\n        offset: 0,\n        bytes:  destination.bytes.substr(destination.offset),\n      });\n\n      subscription = undefined;\n    } else {\n      // QueueType.TOPIC_ENDPOINT\n      endpoint = queueDescriptor.name\n        ? sessionInterface.createDestinationFromDescriptor(queueDescriptor)\n        : new Topic({ name: '\\0?', offset: 0, bytes: '\\0' });\n      subscription = properties.topicEndpointSubscription ||\n        sessionInterface.createTemporaryDestination(DestinationType.TOPIC);\n      destination = subscription;\n    }\n\n    // Using Object.assign to enforce the invariant that these three properties are set together\n    // or not at all.\n    Object.assign(this, {\n      _destination:  destination,\n      _endpoint:     endpoint,\n      _subscription: subscription,\n    });\n\n    // Update the properties object (if TTMP, we may modify it again)\n    properties.queueDescriptor = new QueueDescriptor({\n      name:    endpoint.name,\n      type:    queueDescriptor.type,\n      durable: queueDescriptor.durable,\n    });\n  }\n\n  _resetLocalConnectionState() {\n    Object.assign(this, {\n      _remoteWindowSize: 0,\n      _active:           undefined,\n      _fsmDispatch:      false,\n      _userDispatch:     true, // User flow is initially started\n    });\n  }\n\n  _clearPartitionGroupId() {\n    const { LOG_TRACE } = this.logger;\n\n    LOG_TRACE('Clear the consumer.partitionGroupId; Set it to undefined');\n    this._consumer.partitionGroupId = undefined;\n  }\n\n  _resetRemoteConnectionState() {\n    const { LOG_TRACE } = this.logger;\n\n    LOG_TRACE('Initializing transport acks');\n    this._transportAcks = new TransportAcks();\n\n    LOG_TRACE('Initializing application acks');\n    this._applicationAcks = new ApplicationAckRingBuffer(RING_BUFFER_SIZE);\n    this._oldUnacked = new Set();\n\n    LOG_TRACE('Initializing endpointErrorId');\n    this._consumer.endpointErrorId = undefined;\n\n    LOG_TRACE('Initializing partitionGroupId');\n    this._consumer.partitionGroupId = undefined;\n  }\n\n  /**\n   * Sends a single ack.\n   *\n   * @param {Map.<Array.<ackpair>>} applicationAcks The application ack ranges to send\n   * @memberof ConsumerFSM\n   * @private\n   */\n  _sendAck(applicationAcks) {\n    const transportAck = SMFLib.AdProtocolMessage.getAck(\n      this._consumer.flowId,\n      this._transportAcks.lastReceived,\n      this.windowSize,\n      applicationAcks);\n    this._sessionInterface.sendControl(transportAck); // Must succeed or throw\n  }\n\n  /**\n   * Adds the current ack ranges to an accumulator. Call this for each applicationAck.\n   * When a range ends (we receive an unacked), or we are explictly flushing\n   * (applicationAck === null), we convert the accumulator to acks, send them, update state,\n   * and reset accumulators.\n   *\n   * This should be called at least once with the last invocation having ackRange = null.\n   * This invokes the flush path, which is necessary if any ranges were in progress,\n   * and this is the only path that repects the forceTransportAck flag.\n   *\n   * @param {Object} acksPendingState State associated with this activity\n   * @param {ApplicationAck} applicationAck The ack to process for ack ranges.\n   *    If `null`, any pending acks are flushed and a transport ack is sent, if\n   *    required.\n   * @private\n   */\n  _addAckToRanges(acksPendingState, applicationAck = null) {\n    // they will hold an Array of Arrays for each supported settlement outcomes (i.e. indexes -> 0,1,2,3)\n    const currentRange = acksPendingState.currentRange;\n    const ackRanges = acksPendingState.ackRanges;\n\n    // All message settlement outcomes\n    const allMessageOutcomes = MessageOutcome.values;\n\n    const currentRangeLength = currentRange.length;\n    if (applicationAck && applicationAck.state !== ApplicationAckState.UNACKED) {\n      // check for the type of settlement outcome and push if same as aggregation group\n      if(\n        currentRangeLength === 0 ||\n        ((currentRangeLength > 0)\n        && currentRange[currentRangeLength - 1].settlementOutcome === applicationAck.settlementOutcome)\n      ) {\n        currentRange.push(applicationAck);\n        return; // Wait for end of range or flush\n      }\n      // if settlement outcomes were flushed and applicationAck still remaining, start another aggregation group\n      else if(\n        ((currentRangeLength > 0)\n        && currentRange[currentRangeLength - 1].settlementOutcome !== applicationAck.settlementOutcome)\n      ) {\n        const rangeOutcome = currentRange[currentRangeLength - 1].settlementOutcome;\n        ackRanges[rangeOutcome].push(currentRange); // flush the range since we detect a change in outcomes\n\n        acksPendingState.currentRange = []; // Clear the accumulators for this range.\n        acksPendingState.currentRange.push(applicationAck); // push the detected change\n        return; // Wait for end of range or flush\n      }\n    }\n\n    // We received an UNACKED or a null ack (flush). Complete this range for each of the settlement outcomes.\n    if (currentRangeLength) {\n      const rangeOutcome = currentRange[currentRangeLength - 1].settlementOutcome;\n      ackRanges[rangeOutcome].push(currentRange);\n    }\n\n    // If we're flushing or we've hit the protocol limit for ranges in a single ack,\n    // we send ack messages, update ack states and clear the accumulator.\n    // This condition will be true at least once (must flush at the end).\n\n    // aggregate the total length of the ack/nack ranges\n    let totalRangeLen  = 0;\n    for(let i = 0; i < allMessageOutcomes.length; i ++) {\n      totalRangeLen += ackRanges[allMessageOutcomes[i]].length;\n    }\n\n    if (applicationAck === null || (totalRangeLen === SMFLib.AdProtocolMessage.MAX_CLIENT_ACK_RANGES)) {\n      // Reduce each range for each of the settlement outcomes to a first and last ID.\n      const bareRanges = new Map(); // ackRanges.map(range => [range[0].id, range[range.length - 1].id]);\n      let hasAnyBareRanges = false;\n\n      for(let i = 0; i < allMessageOutcomes.length; i ++) {\n        // check for value and only put real values into map\n        if(ackRanges[allMessageOutcomes[i]].length > 0) {\n          bareRanges.set(allMessageOutcomes[i], ackRanges[allMessageOutcomes[i]].map(\n            range => [range[0].id, range[range.length - 1].id]\n          ));\n          // we have written at least one outcome ack/nack range into the map\n          hasAnyBareRanges = true;\n        }\n      }\n\n      if (hasAnyBareRanges || acksPendingState.forceTransportAck) {\n        // We send the ranges. This could throw.\n        const { LOG_TRACE } = this.logger;\n\n        this._sendAck(bareRanges); // now contains a Map of Arrays to pass settlement outcomes to Broker\n\n        // expectation is only ONE NACK before we flush the (N)acks in the RingBuffer to the broker\n        const failedBareRanges = bareRanges.get(MessageOutcome.FAILED);\n        const rejectedBareRanges = bareRanges.get(MessageOutcome.REJECTED);\n\n        // Warning: this log statement reduces debug performance by about 25%!\n        LOG_TRACE(\n          'Sent ack: ',\n          `Transport ack: ${this._transportAcks.lastReceived}`,\n          `Application acks(ACCEPTED): ${bareRanges.has(MessageOutcome.ACCEPTED)\n            ? bareRanges.get(MessageOutcome.ACCEPTED).map(g => `[${g[0]}..${g[1]}]`)\n            : '[]'}\\n`,\n          `Application Nacks(FAILED): ${bareRanges.has(MessageOutcome.FAILED)\n            ? `[${failedBareRanges[0][0]}..${failedBareRanges[0][1]}]`\n            : '[]'}\\n`,\n          `Application Nacks(REJECTED): ${bareRanges.has(MessageOutcome.REJECTED)\n            ? `[${rejectedBareRanges[0][0]}..${rejectedBareRanges[0][1]}]`\n            : '[]'}`\n        );\n        // If the intent was to force a transport ack, that condition is fulfilled.\n        this._transportAcks.setAcked();\n        acksPendingState.forceTransportAck = false;\n      }\n\n      // Since the range send succeeded, update the ack states.\n      for(let i = 0; i < allMessageOutcomes.length; i ++) {\n        ackRanges[allMessageOutcomes[i]].forEach((ackRange) => {\n          ackRange.forEach((ack) => {\n            if (ack.state !== ApplicationAckState.ACKED_SENT) {\n              try {\n                this._applicationAcks.updateAckState(ack.id,\n                                                     ApplicationAckState.ACKED_SENT);\n              } catch (e) {\n                const { LOG_ERROR } = this.logger;\n                LOG_ERROR(`Marking ack ${ack.id} as sent failed: ${e}`);\n              }\n            }\n          });\n        });\n      }\n\n      // Clear the main accumulators since it has hit the wire.\n      acksPendingState.ackRanges = [];\n      for(let i = 0; i < allMessageOutcomes.length; i ++) {\n        acksPendingState.ackRanges[allMessageOutcomes[i]] = [];\n      }\n    }\n    // Clear the accumulators for this range.\n    acksPendingState.currentRange = [];\n  }\n\n  /**\n   * Sends acknowledgements, along with a window update for this flow.\n   *\n   * @param {Boolean} forceTransportAck `true` sends transport ack even if no acks pending\n   * @private\n   */\n  _sendAcks(forceTransportAck = false) {\n    this._clearTransportAckTimer();\n\n    const applicationAcks = this._applicationAcks;\n    const transportAcks = this._transportAcks;\n    // All message settlement outcomes\n    const allMessageOutcomes = MessageOutcome.values;\n\n    // This state is temporary and shared with the ack generating function.\n    const acksPendingState = {\n      forceTransportAck: forceTransportAck || (transportAcks.acksPending > 0),\n      ackRanges:         [], // holds an Array of Arrays for each supported settlement outcomes (i.e. indexes -> 0,1,2,3)\n      currentRange:      [], // holds an Array for each supported settlement outcomes per aggregation (i.e. indexes -> 0,1,2,3)\n    };\n\n    // initialize the ackRanges with Array of Arrays\n    for(let i = 0; i < allMessageOutcomes.length; i ++) {\n      acksPendingState.ackRanges[allMessageOutcomes[i]] = [];\n    }\n\n    // If the first ringbuffer ack state is acked and there are no unacked before this,\n    // we can create an ack range that includes zero.\n    // If the first ringbuffer ack state is unacked, we can say nothing about the\n    // range before the first acked ID in the ringbuffer.\n    const front = this._applicationAcks.front();\n    if (this._oldUnacked.size === 0 && front && front.state !== ApplicationAckState.UNACKED) {\n      // State is acked_sent so we don't try to update the ring buffer.\n      this._addAckToRanges(acksPendingState, ZERO_APP_ACK);\n      // We know that front will be added to this range by the iteration.\n    }\n\n    // Build ack ranges using the accumulator\n    applicationAcks.forEach(ack => this._addAckToRanges(acksPendingState, ack));\n    // Flush the last pending ack range.\n    this._addAckToRanges(acksPendingState);\n\n    // On successful exit, we've sent and cleared all accumulators, and we've sent\n    // a transport ack if we were supposed to do that.\n    assert(acksPendingState.forceTransportAck === false);\n    assert(acksPendingState.currentRange.length === 0);\n    for(let i = 0; i < allMessageOutcomes.length; i ++) {\n      assert(acksPendingState.ackRanges[allMessageOutcomes[i]].length === 0);\n    }\n  }\n\n  _setTransportAckTimer() {\n    if (this._transportAckTimer) return;\n    if (this._consumer.disposed) return;\n    this._transportAckTimer = setTimeout(\n      () => this._sendAcks(true),\n      this._acknowledgeTimeoutInMsecs\n    );\n  }\n\n  get maxWindowSize() {\n    return Math.min(this._localMaxWindowSize,\n                    this._remoteWindowSize || Number.POSITIVE_INFINITY);\n  }\n\n  get windowSize() {\n    return this.maxWindowSize - this._messageDispatch.length;\n  }\n\n  get maxPendingAcks() {\n    return this.windowSize * this._acknowledgeThreshold / 100.0;\n  }\n\n  get hasAutoAckSupport() {\n    return this._hasAutoAckSupport;\n  }\n\n}\n\nmodule.exports.ConsumerFSM = ConsumerFSM;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Connection scheme types referenced by {@link solace.SessionProperties#transportProtocol},\n * {@link solace.SessionProperties#webTransportProtocolList} (browser only), and\n * {@link solace.SessionProperties#transportProtocolInUse}.\n *\n * @target browser\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst TransportProtocol = {\n\n  /**\n   * A COMET model that uses base64 payload encoding. HTTP responses have a defined Content-Length.\n   *\n   * Guaranteed Messaging is incompatbile with HTTP_ transports.\n   *  * {@link solace.MessagePublisherProperties#enabled} must be `false` for a session that may\n   *    use this transport protocol.\n   *  * {@link solace.Session#createMessageConsumer} will throw on a session that may use this\n   *    transport protocol if {@link solace.MessagePublisherProperties#enabled} is `true`.\n   *\n   * @target browser\n   */\n  HTTP_BASE64: 'HTTP_BASE64',\n\n  /**\n   * A COMET model that uses binary payload encoding. HTTP responses have a defined Content-Length.\n   *\n   * Guaranteed Messaging is incompatbile with HTTP_ transports.\n   *  * {@link solace.MessagePublisherProperties#enabled} must be `false` for a session that may\n   *    use this transport protocol.\n   *  * {@link solace.Session#createMessageConsumer} will throw on a session that may use this\n   *    transport protocol if {@link solace.MessagePublisherProperties#enabled} is `true`.\n   *\n   * @target browser\n   */\n  HTTP_BINARY: 'HTTP_BINARY',\n\n  /**\n   * A COMET model that uses binary payload encoding. HTTP responses use Chunked Transfer-Encoding\n   * to stream data from the Solace Message Router to the client without needing to terminate the\n   * HTTP response.\n   *\n   * Guaranteed Messaging is incompatbile with HTTP_ transports.\n   *  * {@link solace.MessagePublisherProperties#enabled} must be `false` for a session that may\n   *    use this transport protocol.\n   *  * {@link solace.Session#createMessageConsumer} will throw on a session that may use this\n   *    transport protocol if {@link solace.MessagePublisherProperties#enabled} is `true`.\n   *\n   * @target browser\n   */\n  HTTP_BINARY_STREAMING: 'HTTP_BINARY_STREAMING',\n\n  /**\n   * A WebSocket communication channel uses binary payload encoding and provides full-duplex\n   * communication between the client and the Solace Message Router over a single TCP connection.\n   *\n   * This is the preferred protocol to use if all networking infrastructure betweed the application\n   * and the Solace Message router support WebSockets. If this is not the case, it may be necessary\n   * to use one of the HTTP protocols that use the COMET model of messaging.\n   *\n   * This transport protocol supports Guaranteed Messaging.\n   */\n  WS_BINARY: 'WS_BINARY',\n\n};\n\nmodule.exports.TransportProtocol = Enum.new(TransportProtocol);\n","// eslint-disable-next-line global-require\nconst BufferImpl = require('buffer').Buffer;\n\n\nfunction concatFrom(list, from, length) {\n  const buffer = BufferImpl.allocUnsafe(length);\n  let pos = 0;\n  let i;\n  const buf0 = list[0];\n  pos += buf0.copy(buffer, 0, from, buf0.length);\n  for (i = 1; i < list.length && pos < length; i++) {\n    const buf = list[i];\n    pos += buf.copy(buffer, pos, 0, buf.length);\n  }\n  return buffer;\n}\n\n\nfunction readUInt32BEFrag(bufList, listOffsetParam, byteIndexParam) {\n  let listOffset = listOffsetParam;\n  let byteIndex = byteIndexParam;\n  const bytes = []; // the 4 bytes\n  let i = 0;\n  for (i = 0; i < 4; i++) {\n    while (bufList[listOffset].length <= byteIndex) {\n      byteIndex -= bufList[listOffset].length;\n      listOffset++;\n      if (listOffset >= bufList.length) { return null; } // should not happen.\n    }\n    bytes[i] = bufList[listOffset].readUInt8(byteIndex);\n    byteIndex++;\n  }\n  // shift the bytes into a 32 bit number, BE.\n  return (bytes[0] << 24) + (bytes[1] << 16) + (bytes[2] << 8) + bytes[3];\n}\n\n/**\n * Simplified FIFO of buffers.\n * Holds transport buffers without copying, allows 12 byte peeks for header and length detection.\n * For pops either a slice is returned if possible,\n * or a copy if the message spans transport buffers.\n * Pushes are refused when over capacity.\n * @internal\n */\nclass BufferQueue {\n  constructor(maxSize) {\n    let _queue = [];\n    const _maxSize = maxSize;\n    let _size = 0;\n    let _offset = 0;\n\n    /**\n     * Creates a slice (view) of the buffer with the given size. Conceptually.\n     * Since slicing is expensive, it just retruns the raw transport buffer with the offset.\n     * Buffer - offset pair if possible, copy (with zero offset) if beyond first buffer boundary.\n     *\n     *\n     * @param {Number} size Bytes to view\n     * @returns {?Array} Buffer - offset pair if there was enough data to peek, or `null`\n     */\n    this.peekView = function peekView(size) {\n      const result = [];\n      if (_queue.length < 1 || size > _size) { return null; }\n      if (_queue[0].length >= size + _offset) {\n        result[0] = _queue[0];\n        result[1] = _offset;\n      } else {  //over buffer boundary, must copy.\n        result[0] = concatFrom(_queue, _offset, size);\n        result[1] = 0;\n      }\n      return result;\n    };\n\n    this.readUInt8 = function readUInt8(index) {\n      if (index >= _size) { return null; }\n      const oIndex = index + _offset;\n      if (oIndex < _queue[0].length) {\n        return _queue[0].readUInt8(oIndex);\n      } // else\n      let pos = _queue[0].length;\n      let i = 1;\n      while (pos + _queue[i].length <= oIndex) {\n        pos += _queue[i].length;\n        i++;\n      }\n      return _queue[i].readUInt8(oIndex - pos);\n    };\n\n    this.readUInt32BE = function readUInt32BE(index) {\n      if (index + 3 >= _size) { return null; }\n      const oIndex = index + _offset;\n      if (oIndex + 3 < _queue[0].length) {\n        return _queue[0].readUInt32BE(oIndex);\n      } // else\n      if (oIndex < _queue[0].length) {\n        return readUInt32BEFrag(_queue, 0, oIndex);\n      }\n\n      let pos = _queue[0].length;\n      let i = 1;\n      while (pos + _queue[i].length <= oIndex) {\n        pos += _queue[i].length;\n        i++;\n      }\n      if (oIndex - pos + 3 < _queue[i].length) {\n        return _queue[i].readUInt32BE(oIndex - pos);\n      } // else\n      return readUInt32BEFrag(_queue, i, oIndex - pos);\n    };\n\n    /**\n     * Adds a buffer to the queue.\n     * Fails if maxsize is exeeded.\n     *\n     * @param {Buffer} dataIn Source data\n     * @returns {Boolean} `true` if the data fits.\n     */\n    this.put = function put(dataIn) {\n      const buffer = BufferQueue.adaptData(dataIn);\n      const size = buffer.length;\n      if (size === 0) { return true; }\n\n      if (_size + size >= _maxSize) return false;\n\n      _queue.push(buffer);\n      _size += size;\n\n      return true;\n    };\n\n    this.advance = function advance(size) {\n      if (size < 1) {\n        return;\n      }\n      if (size >= _size) {\n        this.reset();\n        return;\n      }\n      let done = 0;\n      while (done < size) {\n        if (_queue[0].length - _offset <= size - done) { // drop first buffer entirely\n          const chunk = _queue[0].length - _offset;\n          _queue.shift();\n          done += chunk;\n          _size -= chunk; // invariants are good.\n          _offset = 0;\n        } else { // cut into first buffer, virtually, with _offset\n          _offset += (size - done);\n          _size -= (size - done);\n          break;\n        }\n      }\n    };\n\n    this.reset = function reset() {\n      _queue = [];\n      _size = 0;\n      _offset = 0;\n    };\n\n    this.remaining = function remaining() {\n      return _size;\n    };\n\n    this.isEmpty = function isEmpty() {\n      return _size === 0;\n    };\n  }\n\n  /**\n   * Adapt incoming data to the format expected by this.put().\n   * @param {*} data The data to adapt.\n   * @returns {Buffer} The adapted data.\n   */\n  static adaptData(data) {\n    if (data instanceof BufferImpl) return data;\n    return BufferImpl.from(data);\n  }\n}\n\nmodule.exports.BufferQueue = BufferQueue;\nmodule.exports.concatFrom = concatFrom;\n","module.exports = require(\"constants\");","const Long = require('long');\nconst { SDTField } = require('../sdt-field');\nconst { SDTFieldType } = require('../sdt-field-types');\nconst { SDTUnsupportedValueError } = require('../sdt-unsupported-value-error');\nconst { SDTValueErrorSubcode } = require('../sdt-value-error-subcodes');\n\nconst { create: createField } = SDTField;\n\nconst ParseInteger = {};\n\n// Util: decode 1, 2, 3, 4 byte UINT.\nParseInteger.autoDecodeVarLengthNumber = function autoDecodeVarLengthNumber(dataBuf, pos, len) {\n  if ([1, 2, 3, 4].includes(len)) {\n    return dataBuf.readUIntBE(pos, len);\n  }\n  return false;\n};\n\n// Parse an integer SDT Field: [U]INT 8, 16, 32, 64.\nParseInteger.parseIntegerField = function parseIntegerField(isSigned, dataBuf, pos, len) {\n  let val = 0;\n\n  switch (len) {\n    case 1:\n      if (isSigned) {\n        val = dataBuf.readInt8(pos);\n        return createField(SDTFieldType.INT8, val);\n      } // else unsigned:\n      val = dataBuf.readUInt8(pos);\n      return createField(SDTFieldType.UINT8, val);\n\n    case 2:\n      if (isSigned) {\n        val = dataBuf.readInt16BE(pos);\n        return createField(SDTFieldType.INT16, val);\n      } // else signed:\n      val = dataBuf.readUInt16BE(pos);\n      return createField(SDTFieldType.UINT16, val);\n\n    case 4:\n      if (isSigned) {\n        val = dataBuf.readInt32BE(pos);\n        return createField(SDTFieldType.INT32, val);\n      } // else signed:\n      val = dataBuf.readUInt32BE(pos);\n      return createField(SDTFieldType.UINT32, val);\n\n    case 8:\n      {\n        let error = null;\n        const longValue =\n          Long.fromBits(dataBuf.readUInt32BE(pos + 4), dataBuf.readUInt32BE(pos), !isSigned);\n        if (longValue.getNumBitsAbs() > 48) {\n          error = new SDTUnsupportedValueError('Value is not supported',\n            SDTValueErrorSubcode.VALUE_OUTSIDE_SUPPORTED_RANGE,\n            dataBuf.toString('latin1', pos, len));\n        }\n        val = longValue.toNumber();\n        const field = createField(isSigned ? SDTFieldType.INT64 : SDTFieldType.UINT64, val);\n        if (error) {\n          field.setError(error);\n        }\n\n        return field;\n      }\n\n    default:\n      return null;\n  }\n};\n\nmodule.exports.ParseInteger = ParseInteger;\n","module.exports = require(\"net\");","const { APIProperties } = require('solclient-util');\nconst { QueueAccessType } = require('./queue-access-types');\nconst { QueueDiscardBehavior } = require('./queue-discard-behaviors');\nconst { QueuePermissions } = require('./queue-permissions');\n\nconst DEFAULTS = {\n  permissions:          undefined,\n  accessType:           undefined,\n  quotaMB:              undefined,\n  maxMessageSize:       undefined,\n  respectsTTL:          undefined,\n  discardBehavior:      undefined,\n  maxMessageRedelivery: undefined,\n};\n\n/**\n * @classdesc\n * Represents a queue properties object. May be passed in to\n * {@link solace.Session#createMessageConsumer} when creating a\n * {@link solace.MessageConsumer} object, or to {@link solace.Session#provisionEndpoint} .\n * Upon creation of a queue or TE, undefined\n * properties are set to default values chosen by the router.\n *\n * @memberof solace\n */\nclass QueueProperties extends APIProperties {\n\n  constructor(options) {\n    super(DEFAULTS, options);\n  }\n\n  /**\n   * Gets/sets permissions for this queue.\n   *\n   * When creating a temporary queue, these are the permissions that apply\n   * to all other users; the user creating the temporary queue is always\n   * granted DELETE permissions.\n   *\n   * @type {solace.QueuePermissions}\n   * @default undefined\n   */\n  get permissions() {\n    return this._permissions;\n  }\n  set permissions(newValue) {\n    this._permissions = newValue;\n  }\n\n  /**\n   * Gets/sets the access type for this queue.\n   *\n   * This parameter must NOT be set when creating a temporary queue via\n   * {@link solace.Session#createMessageConsumer}. Such a queue has its\n   * access type determined by the remote message router.\n   *\n   * @type {solace.QueueAccessType}\n   * @default undefined\n   */\n  get accessType() {\n    return this._accessType || DEFAULTS.accessType;\n  }\n  set accessType(newValue) {\n    this._accessType = newValue;\n  }\n\n  /**\n   * Gets/sets the quota, in megabytes, for this queue.\n   *  * The allowed values are (0 <= quotaMB) || undefined.\n   *  * A value of 0 configures the queue to act as a Last-Value-Queue (LVQ), where the router\n   *    enforces a Queue depth of one, and only the most current message is spooled by the\n   *    queue. When a new message is received, the current queued message is first\n   *    automatically deleted from the queue, then the new message is spooled.\n   * @type {?Number}\n   * @default undefined\n   */\n  get quotaMB() {\n    return this._quotaMB;\n  }\n  set quotaMB(newValue) {\n    this._quotaMB = newValue;\n  }\n\n  /**\n   * Gets/sets the maximum message size, in bytes, for any single message spooled on this queue.\n   * @type {Number}\n   * @default undefined\n   */\n  get maxMessageSize() {\n    return this._maxMessageSize;\n  }\n  set maxMessageSize(newValue) {\n    this._maxMessageSize = newValue;\n  }\n\n  /**\n   * Gets/sets whether this queue respects Time To Live on messages.\n   * @type {Boolean}\n   * @default false\n   */\n  get respectsTTL() {\n    return this._respectsTTL;\n  }\n  set respectsTTL(newValue) {\n    this._respectsTTL = newValue;\n  }\n\n  /**\n   * Gets/sets the discard behavior for this queue.\n   * @type {solace.QueueDiscardBehavior}\n   * @default {solace.QueueDiscardBehavior.NOTIFY_SENDER_OFF}\n   */\n  get discardBehavior() {\n    return this._discardBehavior;\n  }\n  set discardBehavior(newValue) {\n    this._discardBehavior = newValue;\n  }\n\n  /**\n   * Gets/sets the maximum number of times to attempt message redelivery for this queue.\n   *  * The valid range is 0 <= maxMessageRedelivery <= 255\n   *  * A value of 0 means retry forever.\n   * @type {Number}\n   * @default undefined\n   */\n  get maxMessageRedelivery() {\n    return this._maxMessageRedelivery;\n  }\n  set maxMessageRedelivery(newValue) {\n    this._maxMessageRedelivery = newValue;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'permissions':     QueuePermissions.describe(this.permissions),\n      'accessType':      QueueAccessType.describe(this.accessType),\n      'quotaMB':         this.quotaMB,\n      'maxMessageSize':  this.maxMessageSize,\n      'respectsTTL':     this.respectsTTL,\n      'discardBehavior': this.discardBehavior\n                            ? QueueDiscardBehavior.describe(this.discardBehavior)\n                            : undefined,\n      'maxMessageRedelivery': this.maxMessageRedelivery,\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.QueueProperties = QueueProperties;\n","const { Parameter } = require('solclient-validate');\nconst { ReplayStartLocation, ReplayStartType } = require('./lib/replayStartLocation');\nconst { ReplayStartLocationBeginning } = require('./lib/replayStartLocationBeginning');\nconst { ReplayStartLocationDate } = require('./lib/replayStartLocationDate');\nconst { SolclientFactory } = require('solclient-factory');\n\n\nmodule.exports.ReplayStartLocation = ReplayStartLocation;\nmodule.exports.ReplayStartLocationBeginning = ReplayStartLocationBeginning;\nmodule.exports.ReplayStartLocationDate = ReplayStartLocationDate;\nmodule.exports.ReplayStartType = ReplayStartType;\n\n/**\n * Creates a ReplayStartLocation {@link solace.ReplayStartLocation} instance that\n * when set in MessageConsumerProperties indicates that all messages available\n * in the replay log should be retrieved.\n *\n *\n * @returns {solace.ReplayStartLocation} The newly created ReplayStartLocation\n * @method\n * @name solace.SolclientFactory.createReplayStartLocationBeginning\n */\nSolclientFactory.createReplayStartLocationBeginning = SolclientFactory.createFactory(() =>\n  new ReplayStartLocationBeginning()\n);\n/**\n * Creates a ReplayStartLocation {@link solace.ReplayStartLocation} instance that\n * when set in MessageConsumerProperties indicates that only messages spooled\n * in the replay log since the given Date should be retrieved.\n *\n * @param {Date} dateTime The Date object the represents the date and time of the replay\n * start location.  dateTime is always converted to UTC time if not already a UTC time.\n * @returns {solace.ReplayStartLocation} The newly created ReplayStartLocation\n * @method\n * @name solace.SolclientFactory.createReplayStartLocationDate\n */\nSolclientFactory.createReplayStartLocationDate = SolclientFactory.createFactory(dateTime =>\n  ReplayStartLocationDate.createReplayStartLocationDate(Parameter.isInstanceOf('date', dateTime, Date))\n);\n","// Coverity scanned is configured to run against the generated monolithic\n// solclient.js file (debug) version. On the loadbuild server BUILD_ENV.VERSION is\n// substituted and never null (it is null in developer workspace) so\n// coverity will complain that the \" || '0.0.0-source' \" is DEADCODE\n// coverity[dead_error_line]\nconst VERSION = BUILD_ENV.VERSION || '0.0.0-source';\n// Parse the date if provided. Was seeing NaN formatted dates in source mode, so add fallback\nconst DATE = BUILD_ENV.DATE\n  ? new Date(Date.parse(BUILD_ENV.DATE))\n  : new Date();\nconst MODE = BUILD_ENV.MODE_NAME;\n\n// These property names are all for export, so make sure they're not mangled\nconst TARGET = {\n  'name':    BUILD_ENV.TARGET_NAME,\n  'node':    BUILD_ENV.TARGET_NODE,\n  'browser': BUILD_ENV.TARGET_BROWSER,\n};\n\nconst FORMATTED_DATE = (() => {\n  const pad = n => (n < 10 ? `0${n}` : n);\n  const d = DATE;\n  const YYYY = d.getFullYear();\n  const MM = pad(d.getMonth() + 1);\n  const DD = pad(d.getDate());\n  const hh = pad(d.getHours());\n  const mm = pad(d.getMinutes());\n  return `${YYYY}/${MM}/${DD} ${hh}:${mm}`;\n})();\nconst SUMMARY = ['SolclientJS', BUILD_ENV.VERSION, MODE, FORMATTED_DATE].join(', ');\n\n/**\n * Returns the API version. Use version, date and mode properties for build details.\n * Use the summary property or the .toString() method to return a summary.\n * @static\n * @type {Object}\n * @namespace\n * @memberof solace\n */\nconst Version = {\n  /**\n   * The API version, as an informational string. The format of this string is subject to change.\n   * @type {String}\n   */\n  'version':       VERSION,\n  /**\n   * The API build date.\n   * @type {Date}\n   */\n  'date':          DATE,\n  /**\n   * The API build date, as a formatted string.\n   * The format of this date is:\n   * `YYYY-MM-DD hh:mm`\n   * where\n   *  * `YYYY` is the 4-digit year,\n   *  * `MM` is the 2-digit month   (01-12),\n   *  * `DD` is the 2-digit day     (01-31),\n   *  * `hh` is the 2-digit hour    (00-23),\n   *  * `mm` is the 2-digit minute  (00-59)\n   *\n   * @type {String}\n   */\n  'formattedDate': FORMATTED_DATE,\n  /**\n   * Information about the build target. This object is informational; its type, structure and\n   * content are subject to change.\n   * @type {Object}\n   */\n  'target':        TARGET,\n  /**\n   * The build mode. This may be one of 'debug' or 'release'. Other build modes may be added\n   * in the future.\n   * @type {String}\n   */\n  'mode':          MODE,\n  /**\n   * If `true`, this is an unoptimized debug build.\n   * @type {Boolean}\n   */\n  'debug':         BUILD_ENV.MODE_DEBUG,\n  /**\n   * If `true`, this is an optimized release build. Note that there may be multiple release\n   * builds in a distribution, with varying degrees of optimization.\n   * @type {Boolean}\n   */\n  'release':       BUILD_ENV.MODE_RELEASE,\n  /**\n   * An informational string summarizing the API name, version and build date.\n   * @type {String}\n   */\n  'summary':       SUMMARY,\n\n  toString() {\n    return SUMMARY;\n  },\n};\nmodule.exports.Version = Version;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Enumerates the behavior options when a message cannot be added to an endpoint\n * (for example, the maximum quota {@link solace.QueueProperties#quotaMB} was exceeded).\n *\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst QueueDiscardBehavior = {\n  /**\n   * @description Send the publisher a message reject notification.\n   * @type {String}\n   */\n  NOTIFY_SENDER_ON:  'NOTIFY_SENDER_ON',\n  /**\n   * @description Discard the message and acknowledge it.\n   * @type {String}\n   */\n  NOTIFY_SENDER_OFF: 'NOTIFY_SENDER_OFF',\n};\n\nmodule.exports.QueueDiscardBehavior = Enum.new(QueueDiscardBehavior);\n","const { Parameter: { isStringOrNothing } } = require('solclient-validate');\n\n/**\n * @classdesc\n * <b>This class abstracts baggage metadata used for distributed\n * message tracing with Solace messaging APIs types. \n * This class is for internal use only.\n * <p>\n * @hideconstructor\n * @memberof solace\n */\n class Baggage {\n \n    /**\n     * Get the value of the baggage associated with the message.\n     * This method is for internal use only.\n     *\n     * @returns {?String} value of baggage associated with the message\n     * @internal\n     */\n    getBaggage() {\n        return this._baggage || null;\n    }\n \n    /**\n     * Sets the value of the baggage associated with this message\n     * This method is for internal use only.\n     *\n     * @param {?String} value The valid value of baggage associated with this  message\n     * @see {@link https://www.w3.org/TR/2022/WD-baggage-20220928|w3c baggage format specification}  \n     * @internal\n     */\n    setBaggage(value) {\n        this._setBaggage(isStringOrNothing('baggage', value));\n    }\n    _setBaggage(value) {\n        this._baggage = value;\n    }\n \n}\n\nmodule.exports.Baggage = Baggage;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * Represents the permissions applicable to a queue.\n *\n * The corresponding endpoint property is\n * {@link solace.QueueProperties#permissions}.\n *\n * The access controls:\n *  * the permissions for all other users of the queue, this only applies to\n *  non-durable queues {@link solace.QueueProperties#permissions};\n *  * for the current Message Consumer  on a queue or endpoint,\n *    {@link solace.MessageConsumer.permissions}\n *\n * For example, creating a temporary topic endpoint with MODIFY_TOPIC will allow\n * other users to modify the topic subscribed to that endpoint.\n *\n * @enum {string}\n * @namespace\n * @memberof solace\n */\nconst QueuePermissions = {\n  /**\n   * @description No client other than the queue's owner may access the endpoint.\n   */\n  NONE:         'NONE',\n  /**\n   * @description Client may read messages but not consume them.\n   * @type {String}\n   */\n  READ_ONLY:    'READ_ONLY',\n  /**\n   * @description  Client may read and consume messages.\n   * @type {String}\n   */\n  CONSUME:      'CONSUME',\n  /**\n   * @description Client may read and consume messages, and modify topic(s) associated with the\n   * queue.\n   * @type {String}\n   */\n  MODIFY_TOPIC: 'MODIFY_TOPIC',\n  /**\n   * @description Client may read and consume messages, modify topic(s) associated with the\n   * queue, and delete the queue.\n   * @type {String}\n   */\n  DELETE:       'DELETE',\n};\n\nmodule.exports.QueuePermissions = Enum.new(QueuePermissions);\n","const cloneObj = require('./clone'); // using the modified local clone version\n\nconst CLONE_CIRCULAR = false; // If true, handles circular references safely.\nconst CLONE_DEPTH = 1; // Don't deep-clone nested values.\n\n/**\n * @memberof solace\n * @private\n */\nclass APIProperties {\n\n  /**\n   * Base class for all API properties structures. Provides the clone() method to\n   * make all properties cloneable.\n   * Creates an instance of APIProperties. Assigns properties from one or more\n   * objects in increasing priority order.\n   *\n   * @example\n   * super({ foo: 'defaultFoo', bar: 42 }, { foo: 'quux' }); // .foo == quux, .bar = 42\n   *\n   * @param {...any} options The properties sources to assign.\n   *\n   * @since 10.0.0\n   * @constructor\n   */\n  constructor(...options) {\n    Object.assign(this, ...options);\n  }\n\n  /**\n   * Can be overridden.  For instance sessionProperties\n   * overrides this to suppress printing the password.\n   * @returns {String} The string representation of this object\n   * @private\n   */\n  toString() {\n    return util_inspect(this);\n  }\n\n  clone() {\n    return cloneObj(this, CLONE_CIRCULAR, CLONE_DEPTH);\n  }\n}\n\nmodule.exports.APIProperties = APIProperties;\n","const EncodeSingleElementLib = require('./encode-single-element');\nconst { SDTStreamContainer } = require('../sdt-stream-container');\n\nconst EncodeStream = {};\nEncodeStream.encodeStream = function encodeStream(sdtstream) {\n  const buf = [];\n  if (!(sdtstream instanceof SDTStreamContainer)) {\n    return null; // skip!\n  }\n  let sdtfield = null;\n  sdtstream.rewind();\n  while (sdtstream.hasNext()) {\n    sdtfield = sdtstream.getNext();\n    if (sdtfield) {\n      EncodeSingleElementLib.EncodeSingleElement.encodeSingleElementToBuf(sdtfield, buf);\n    }\n  } // end iter over stream entries\n  sdtstream.rewind();\n  return buf.join('');\n};\n\nmodule.exports.EncodeStream = EncodeStream;\n","const HTTPLib = require('./http');\nconst { StateBase64 } = require('./state-base64');\nconst { StateBinary } = require('./state-binary');\nconst { StateStreamingAndBinary } = require('./state-streaming-and-binary');\nconst { StateWebSocketBinary } = require('./state-websocket-binary');\nconst { WebTransport } = require('./web-transport');\nconst { WebTransportCapabilities } = require('./web-transport-capabilities');\n\nconst { HTTPConnection, HTTPTransportSession } = HTTPLib;\n\nmodule.exports.HTTPConnection = HTTPConnection;\nmodule.exports.HTTPTransportSession = HTTPTransportSession;\nmodule.exports.StateBase64 = StateBase64;\nmodule.exports.StateBinary = StateBinary;\nmodule.exports.StateStreamingAndBinary = StateStreamingAndBinary;\nmodule.exports.StateWebSocketBinary = StateWebSocketBinary;\nmodule.exports.WebTransport = WebTransport;\nmodule.exports.WebTransportCapabilities = WebTransportCapabilities;\n","const { LogImpl } = require('./log-impl');\n\nconst STUB = () => undefined;\n\nfunction generateLogHeader(levelStr) {\n  const date = new Date();\n  const levelStrPadding = ' '.repeat(6 - levelStr.length);\n  let YY = String(date.getFullYear());\n  let MM = String(date.getMonth() + 1);\n  let DD = String(date.getDate());\n  let hh = String(date.getHours());\n  let mm = String(date.getMinutes());\n  let ss = String(date.getSeconds());\n  let ms = String(date.getMilliseconds());\n\n  YY = '0'.repeat(4 - YY.length) + YY;\n  MM = MM.length < 2 ? `0${MM}` : MM;\n  DD = DD.length < 2 ? `0${DD}` : DD;\n  hh = hh.length < 2 ? `0${hh}` : hh;\n  mm = mm.length < 2 ? `0${mm}` : mm;\n  ss = ss.length < 2 ? `0${ss}` : ss;\n  ms = ms.length < 3 ? `0${ms}` : ms;\n  ms = ms.length < 3 ? `0${ms}` : ms; // twice: pad to 3\n\n  return [`${YY}-${MM}-${DD} ${hh}:${mm}:${ss}.${ms}`, `${levelStr}${levelStrPadding}`];\n}\n\n/**\n * @classdesc\n * A log implementation that uses the global or window console.\n *\n * This is the default log implementation used by the API if no logger was\n * supplied via {@link solace.SolclientFactoryProperties}.\n *\n * @memberof solace\n * @private\n */\nclass ConsoleLogImpl extends LogImpl {\n  /**\n   * @constructor\n   * @param {Object} [consoleIn] The console to which to apply this implementation. If\n   *  not specified, uses the global or window console.\n   */\n  constructor(consoleIn) {\n    /**\n     * Logs the given arguments at TRACE level. This is bound to the first valid method of the\n     * following on the global or window console object, in priority order:\n     *  * console.log\n     *  * console.debug\n     *\n     * @name solace.ConsoleLogImpl#trace\n     * @method\n     * @param {...*} args Arguments to be logged\n     */\n    let _trace = STUB;\n\n    /**\n     * Logs the given arguments at DEBUG level. This is bound to the first valid method of the\n     * following on the global or window console object, in priority order:\n     *  * console.log\n     *  * console.debug\n     *\n     * @name solace.ConsoleLogImpl#debug\n     * @method\n     * @param {...*} args Arguments to be logged\n     */\n    let _debug = STUB;\n\n    /**\n     * Logs the given arguments at INFO level. This is bound to the first valid method of the\n     * following on the global or window console object, in priority order:\n     *  * console.info\n     *  * console.log\n     *\n     * @name solace.ConsoleLogImpl#info\n     * @method\n     * @param {...*} args Arguments to be logged\n     */\n    let _info = STUB;\n\n    /**\n     * Logs the given arguments at WARN level. This is bound to the first valid method of the\n     * following on the global or window console object, in priority order:\n     *  * console.warn\n     *  * console.log\n     *\n     * @name solace.ConsoleLogImpl#warn\n     * @method\n     * @param {...*} args Arguments to be logged\n     */\n    let _warn = STUB;\n\n\n    /**\n     * Logs the given arguments at ERROR level. This is bound to the first valid method of the\n     * following on the global or window console object, in priority order:\n     *  * console.info\n     *  * console.log\n     *\n     * @name solace.ConsoleLogImpl#error\n     * @method\n     * @param {...*} args Arguments to be logged\n     */\n    let _error = STUB;\n\n    /**\n     * Logs the given arguments at FATAL level. This is bound to the first valid method of the\n     * following on the global or window console object, in priority order:\n     *  * console.info\n     *  * console.log\n     *\n     * @name solace.ConsoleLogImpl#fatal\n     * @method\n     * @param {...*} args Arguments to be logged\n     */\n    let _fatal = STUB;\n\n    const console = consoleIn || (\n      typeof window === 'undefined'\n        /* eslint-env node */ ? global\n        /* eslint-env browser */ : window\n      ).console;\n    /* eslint-env shared-node-browser */\n\n    if (console && (console.log || console.warn)) {\n      /* eslint-disable no-console */\n      // Where console.log is supported, it is preferred over console.debug\n      // https://developer.mozilla.org/en-US/docs/DOM/console\n      // console methods in IE9 are object, not function, unfortunately\n      //\n      // Also, console.trace outputs a stack trace on some platforms.  So we\n      // use the same underlying logger as debug for trace to avoid the\n      // excessive verbosity that would result.\n      if (console.log && console.log !== undefined) {\n        _trace = Function.prototype.bind.call(console.log, console);\n        _debug = Function.prototype.bind.call(console.log, console);\n      } else if (console.debug && typeof console.debug === 'function') {\n        _trace = Function.prototype.bind.call(console.debug, console);\n        _debug = Function.prototype.bind.call(console.debug, console);\n      }\n\n      // Where console.info exists, it is preferred. Otherwise, fall back to\n      // console.log.\n      if (console.info && console.info !== undefined) {\n        _info = Function.prototype.bind.call(console.info, console);\n      } else {\n        _info = Function.prototype.bind.call(console.log, console);\n      }\n\n      // Where console.warn exists, it is preferred. Otherwise, fall back to\n      // console.log.\n      if (console.warn && console.warn !== undefined) {\n        _warn = Function.prototype.bind.call(console.warn, console);\n      } else {\n        _warn = Function.prototype.bind.call(console.log, console);\n      }\n\n      // Where console.error exists, it is preferred. Otherwise, fall back to\n      // console.log.\n      //\n      // console.fatal is not present in any known console implementation. Use\n      // console.error or console.log.\n      if (console.error && console.error !== undefined) {\n        _error = Function.prototype.bind.call(console.error, console);\n        _fatal = Function.prototype.bind.call(console.error, console);\n      } else {\n        _error = Function.prototype.bind.call(console.log, console);\n        _fatal = Function.prototype.bind.call(console.log, console);\n      }\n\n      /* eslint-enable no-console */\n    } // else no console implementation was found, so the default (stub) is used for each level.\n\n    super((...args) => { _trace(...generateLogHeader('TRACE'), ...args); },\n          (...args) => { _debug(...generateLogHeader('DEBUG'), ...args); },\n          (...args) => { _info(...generateLogHeader('INFO'), ...args); },\n          (...args) => { _warn(...generateLogHeader('WARN'), ...args); },\n          (...args) => { _error(...generateLogHeader('ERROR'), ...args); },\n          (...args) => { _fatal(...generateLogHeader('FATAL'), ...args); });\n  }\n\n\n}\n\nmodule.exports.ConsoleLogImpl = ConsoleLogImpl;\n","const DestinationLib = require('solclient-destination');\nconst MessageLib = require('solclient-message');\nconst SolclientFactoryLib = require('solclient-factory');\nconst { assert } = require('solclient-eskit');\nconst { CacheSession,\n        CACHE_REQUEST_PREFIX } = require('solclient-solcache-session');\nconst { CapabilityType } = require('./capability-types');\nconst { Check,\n        Parameter } = require('solclient-validate');\nconst { DefaultCapabilities } = require('./default-capabilities');\nconst { ErrorResponseSubcodeMapper,\n        ErrorSubcode,\n        OperationError,\n        NotImplementedError,\n        RequestEventCode } = require('solclient-error');\nconst { EventEmitter } = require('solclient-events');\nconst { GlobalContext } = require('./global-context');\nconst { HostList } = require('./host-list');\nconst { LogFormatter } = require('solclient-log');\nconst { MessageRxCBInfo } = require('./message-rx-cb-info');\nconst { MutableSessionProperty } = require('./mutable-session-properties');\nconst { OutstandingDataRequest } = require('./outstanding-data-request');\nconst { P2PUtil } = require('./p2p-util');\nconst { QueueDescriptor, QueueProperties, QueuePropertiesValidator,\n        QueueType, explainInvalidEndpointName } = require('solclient-queue');\nconst { SDTField,\n        SDTFieldType } = require('solclient-sdt');\nconst { SessionEvent } = require('./session-event');\nconst { ProvisionEvent } = require('./provision-event');\nconst { SessionEventCBInfo } = require('./session-event-cb-info');\nconst { SessionEventCode } = require('./session-event-codes');\nconst { SessionEventName } = require('./session-event-names');\nconst { SessionFSM } = require('./session-fsm');\nconst { SessionFSMEvent } = require('./session-fsm-event');\nconst { SessionOperation } = require('./session-operations');\nconst { SessionProperties } = require('./session-properties');\nconst { SessionPropertiesValidator } = require('./session-properties-validator');\nconst { SessionRequestType } = require('./session-request-types');\nconst { SessionState } = require('./session-states');\nconst { SessionStateName } = require('./session-state-names');\nconst { Stats,\n        StatType } = require('solclient-stats');\nconst { StringUtils } = require('solclient-util');\nconst { TransportCapabilities,\n        TransportProtocol,\n        TransportReturnCode } = require('solclient-transport');\n\nfunction transportProtocolDefaultList() {\n  const { ProfileBinding } = SolclientFactoryLib;\n\n  if (BUILD_ENV.TARGET_NODE) {\n    return [TransportProtocol.WS_BINARY];\n  }\n\n  const result = [];\n  if (TransportCapabilities.web.webSocket()) {\n    result.push(TransportProtocol.WS_BINARY);\n  }\n  const profile = ProfileBinding.value;\n  if (profile.cometEnabled) {\n    if (TransportCapabilities.web.xhrBinary()) {\n      if (TransportCapabilities.web.streaming()) {\n        result.push(TransportProtocol.HTTP_BINARY_STREAMING);\n      }\n      result.push(TransportProtocol.HTTP_BINARY);\n    }\n    result.push(TransportProtocol.HTTP_BASE64);\n  }\n  return result;\n}\n\nfunction isValidADTransport(transportProtocol) {\n  return (transportProtocol && (\n          transportProtocol !== TransportProtocol.HTTP_BINARY_STREAMING &&\n          transportProtocol !== TransportProtocol.HTTP_BINARY &&\n          transportProtocol !== TransportProtocol.HTTP_BASE64));\n}\n\nfunction formatEventName(eventName) {\n  return `SessionEventCode.${SessionEventCode.describe(eventName)}`;\n}\n\n/**\n * @private\n */\nconst SOLCLIENT_REQUEST_PREFIX = '#REQ';\n\n/**\n * A callback that returns replies to requests sent via {@link solace.Session#sendRequest}.\n * The replyReceivedCallback <b>must</b> be provided to the API as the third argument of\n * {@link solace.Session#sendRequest}.\n * @callback\n * @function\n * @name solace.Session.replyReceivedCallback\n * @param {solace.Session} session The session object that received the reply.\n * @param {solace.Message} message The reply message received.\n * @param {Object} userObject The user object associated with the callback. 'undefined' when\n * not provided to <i>sendRequest</i>\n */\n\n/**\n * A callback that returns errors associated with requests sent via\n * {@link solace.Session#sendRequest}. The requestFailedCallback <b>must</b> be\n * provided to the API as the fourth argument of\n * {@link solace.Session#sendRequest}\n * @callback\n * @function\n * @name solace.Session.requestFailedCallback\n * @param {solace.Session} session The session object associated with the event.\n * @param {solace.RequestError} error The event associated with the failure.\n * @param {Object} userObject The user object associated with the callback. 'undefined' when\n * not provided to <i>sendRequest</i>\n */\n\n/**\n * @classdesc\n * <b>This class is not exposed for construction by API users.</b>\n * Applications must use {@link solace.SolclientFactory.createSession} to create a session.\n *\n * Represents a client Session.\n *\n * Session provides these major functions:\n *  * Subscriber control, such as updating subscriptions;\n *  * Publishes both Direct and Guaranteed Messages to the router;\n *  * Receives direct messages from the router.\n *\n * The Session object is an\n * {@link https://nodejs.org/api/events.html#events_class_eventemitter|EventEmitter}, and will emit\n * events with event names from {@link solace.SessionEventCode} when Session events occur.\n * Each session event can be subscribed using {@link solace.Session#on} with the corresponding\n * {@link solace.SessionEventCode}. If any of the registered event listeners throw an exception,\n * the exception will be emitted on the 'error' event.\n *\n * @fires solace.SessionEventCode#ACKNOWLEDGED_MESSAGE\n * @fires solace.SessionEventCode#CAN_ACCEPT_DATA\n * @fires solace.SessionEventCode#CONNECT_FAILED_ERROR\n * @fires solace.SessionEventCode#DISCONNECTED\n * @fires solace.SessionEventCode#DOWN_ERROR\n * @fires solace.SessionEventCode#GUARANTEED_MESSAGE_PUBLISHER_DOWN\n * @fires solace.SessionEventCode#MESSAGE\n * @fires solace.SessionEventCode#PROPERTY_UPDATE_ERROR\n * @fires solace.SessionEventCode#PROPERTY_UPDATE_OK\n * @fires solace.SessionEventCode#RECONNECTED_NOTICE\n * @fires solace.SessionEventCode#RECONNECTING_NOTICE\n * @fires solace.SessionEventCode#REJECTED_MESSAGE_ERROR\n * @fires solace.SessionEventCode#REPUBLISHING_UNACKED_MESSAGES\n * @fires solace.SessionEventCode#SUBSCRIPTION_ERROR\n * @fires solace.SessionEventCode#SUBSCRIPTION_OK\n * @fires solace.SessionEventCode#UNSUBSCRIBE_TE_TOPIC_ERROR\n * @fires solace.SessionEventCode#UNSUBSCRIBE_TE_TOPIC_OK\n * @fires solace.SessionEventCode#UP_NOTICE\n * @fires solace.SessionEventCode#VIRTUALROUTER_NAME_CHANGED\n * @fires solace.SessionEventCode#PROVISION_OK\n * @fires solace.SessionEventCode#PROVISION_ERROR\n *\n * @hideconstructor\n * @memberof solace\n */\nclass Session extends EventEmitter {\n\n  /*\n   * Applications must use {@link solace.SolclientFactory.createSession} to create a session.\n   *\n   * @param {solace.SessionProperties} properties Properties to use for constructing\n   *        the session.\n   * @param {solace.MessageRxCBInfo} [messageCallback] Message callback info. The application can\n   *    also receive message events via\n   *    `session.on(solace.SessionEventCode.MESSAGE, (message) => { ... });`\n   * @param {solace.SessionEventCBInfo} [eventCallback] Event callback info. The application can\n   *    also receive session events via\n   *    `session.on(solace.SessionEventCode.<code>, (event) => { ... });`\n   *\n   * @throws {solace.OperationError} if the parameters have an invalid type or value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * @private\n   * @constructor\n   */\n  constructor(properties, messageCallback, eventCallback) {\n    super({\n      emits:  SessionEventCode.values,\n      direct: SessionEventCode.MESSAGE,\n      formatEventName,\n    });\n    const self = this;\n    this.logger = new LogFormatter();\n    this.logger.formatter = function formatter(...args) {\n      return [`[session=${self._sessionFSM ? self._sessionFSM.sessionIdHex : '(N/A)'}]`, ...args];\n    };\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session constructor called.');\n    if ((properties !== undefined) && (properties !== null)) {\n      const { LOG_DEBUG } = this.logger;\n      LOG_DEBUG('Incoming session properties:\\n', properties);\n    }\n\n    // Default error handler prints the exception:\n    this.on('error', (error) => {\n      const { LOG_ERROR } = self.logger;\n      LOG_ERROR(error.info.error);\n    });\n\n    const sessionProperties = new SessionProperties(properties);\n    {\n      const { LOG_DEBUG } = this.logger;\n      LOG_DEBUG('Eventual session properties:\\n', sessionProperties);\n    }\n    // Callbacks to client application.\n    // Get/set for these is private, so they can only be changed in-API (e.g. by CacheSession)\n    // The user-supplied one cannot be changed.\n    // The configuration of the exceptions generated by these needs to match EventEmitter, so that\n    // the handleGenericErrorEvent above can behave consistently\n    this._messageCallbackInfo = this.wrapMessageCallback(messageCallback);\n    this._eventCallbackInfo = this.wrapEventCallback(eventCallback);\n\n    // client name generation is applicable\n    if (Check.empty(sessionProperties.clientName)) {\n      // Auto-gen clientName\n      sessionProperties.clientName = GlobalContext.GenerateClientName();\n    }\n\n    // generate userIdentification\n    sessionProperties._setUserIdentification(GlobalContext.GenerateUserIdentification());\n\n    // client description generation is applicable\n    if (Check.empty(sessionProperties.applicationDescription)) {\n      // Auto-gen applicationDescription\n      sessionProperties.applicationDescription = GlobalContext.GenerateClientDescription();\n    }\n\n    // Set webTransportProtocolList after validation so we're not basing it on an\n    // invalid transport selection...so we're not checking transportProtocol/\n    // webTransportProtocolList except for parameter conflict.\n\n    // Now that we have touched up the properties as much as possible, validate\n    // This also validates the subordinate MessagePublisherProperties\n    SessionPropertiesValidator.validate(sessionProperties);\n\n    // We want a protocol list, but historically we also accept a single protocol.\n    // Create a web transport protocol list from the transport protocol\n    // option if that is all that was set. (If both were set, we failed validation)\n    if (Check.nothing(sessionProperties.webTransportProtocolList)) {\n      // Create a fallback list that starts with the selected protocol.\n      // If the selected protocol is not in the fallback list, it is not\n      // a valid protocol for the platform so return an empty list.\n      const selectedProtocol = sessionProperties.transportProtocol;\n      const defaultList = transportProtocolDefaultList();\n      const sliceIndex = selectedProtocol ? defaultList.indexOf(selectedProtocol) : 0;\n      if (sliceIndex < 0) {\n        // The user explicitly selected a protocol that wasn't valid\n        throw new OperationError(`Selected transport protocol ${\n                                 TransportProtocol.describe(selectedProtocol)\n                                 } is disabled or invalid for this platform`,\n                                 ErrorSubcode.PARAMETER_CONFLICT);\n      }\n      // Slice index is valid\n      sessionProperties.webTransportProtocolList = defaultList.slice(sliceIndex);\n\n      if (sessionProperties.webTransportProtocolList.length === 0) {\n        // Even before AD restrictions, no valid protocols.\n        // User error.\n        throw new OperationError(`No usable transport protocol or fallback from ${\n          TransportProtocol.describe(selectedProtocol)}`,\n          ErrorSubcode.PARAMETER_CONFLICT);\n      }\n\n      // Check that the generated list is compatible with AD.\n      const validForAD = sessionProperties.webTransportProtocolList.filter(x =>\n        isValidADTransport(x));\n      if (validForAD.length === 0) {\n        this._adDisabledReason = 'Guaranteed messaging not compatible with any available ' +\n          `transport protocol: ${\n            sessionProperties.webTransportProtocolList.map(k =>\n              TransportProtocol.describe(k)).join(', ')}`;\n      }\n\n      // Don't fold this into the check below -- for that one, every\n      // protocol must be valid because the user explicitly requested all of them.\n      // In this case, we ensure that at least one of our generated list is valid.\n      if (sessionProperties.publisherProperties.enabled) {\n        if (this._adDisabledReason) {\n          throw new OperationError(\n            'Invalid transport protocol(s) for session with Guaranteed Messaging Publisher',\n            ErrorSubcode.PARAMETER_CONFLICT,\n            this._adDisabledReason\n          );\n        }\n        // AD was not disabled by having no protocols available\n        sessionProperties.webTransportProtocolList = validForAD;\n      }\n      // A valid protocol list is ready to use.\n    } else {\n      // User provided transport protocol list\n      // Check for parameter conflict between session and publisher\n      // Already checked these for parameter conflict; only one will be set\n      // Already checked that user list was not empty\n      const transportProtocols = sessionProperties.webTransportProtocolList;\n      const validForAD = transportProtocols.every(isValidADTransport);\n      if (!validForAD) {\n        const invalid = transportProtocols.filter(x => !isValidADTransport(x));\n        this._adDisabledReason = `Guaranteed messaging incompatible with selected transport protocols: ${\n          invalid.map(k => TransportProtocol.describe(k)).join(', ')}`;\n        if (sessionProperties.publisherProperties.enabled) {\n          throw new OperationError(\n            'Invalid transport protocol(s) for session with Guaranteed Messaging Publisher',\n            ErrorSubcode.PARAMETER_CONFLICT,\n            this._adDisabledReason\n          );\n        }\n      }\n    }\n\n\n    // Assign the final properties and start the state machine.\n    this._sessionProperties = sessionProperties;\n    this._sessionStats = new Stats();\n    this._hosts = new HostList(sessionProperties);\n    this._sessionFSM = new SessionFSM(\n      this._sessionProperties,\n      this,\n      this._sessionStats,\n      this._hosts\n    );\n    this._sessionFSM.start();\n    this._sessionFSM.createMessagePublisher();\n\n    /**\n     * The following fields are destroyed when disconnect is called\n     * and recreated when connect is called again.\n     * @private\n     */\n    this._outstandingDataReqs = {};\n    this._capabilities = DefaultCapabilities.createDefaultCapabilities(sessionProperties);\n    this._seqNum = 1;\n  }\n\n  /**\n   * Connects the session to the Solace Message Router as configured in\n   * the {@link solace.SessionProperties#url}.\n   *\n   * When the session is successfully connected to the Solace Message Router, the\n   * {@link solace.SessionEventCode#UP_NOTICE} event is emitted if a listener has been registered.\n   *\n   * If {@link solace.SessionProperties#reapplySubscriptions} is set to true, this operation\n   * re-registers previously registered subscriptions. The connected session event\n   * ({@link solace.SessionEventCode#event:UP_NOTICE}) is emitted only when all the subscriptions\n   * are successfully added to the router.\n   *\n   * If the API is unable to connect within {@link solace.SessionProperties#connectTimeoutInMsecs}\n   * or due to login failures, the session's state transitions back to 'disconnected' and an event\n   * is generated.\n   *\n   * **Note:** Before the session's state transitions to 'connected', a client\n   * application cannot use the session; any attempt to call functions will throw\n   * {@link solace.OperationError}.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed, already connected or connecting.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the underlying transport cannot be established.\n   *   Subcode: {@link solace.ErrorSubcode.CONNECTION_ERROR}.\n   */\n  connect() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session connect called.');\n    const result = this.allowOperation(SessionOperation.CONNECT);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.CONNECT });\n    this._sessionFSM.processEvent(sEvent);\n  }\n\n  /**\n   * @returns {Boolean} True if the session can be used to acknolwedge a message\n   * @readonly\n   * @private\n   */\n  get canAck() {\n    /*\n     * If the user wants to ack a message, it was received on a session (else ack will throw),\n     * and so we know that the session was connected at some point.\n     *\n     * If the session is in any of the following states, we know it is either connecting or\n     * connected.\n     *\n     * Since we know the session was previously connected, this implies the session is either\n     * RECONNECTING or connected.\n     *\n     * We allow acks when the session is reconnecting or connected.\n     */\n    const statesCanAck = [\n      SessionStateName.CONNECTING,\n      SessionStateName.TRANSPORT_UP,\n      SessionStateName.DISCONNECTING,\n    ];\n    // Allow ack if there is some acceptable state name such that getActiveState returns the state.\n    return statesCanAck.some(stateName => !!this._sessionFSM.getActiveState(stateName));\n  }\n\n  /**\n   * Disconnects the session. The session attempts to disconnect cleanly, concluding all operations\n   * in progress. The disconnected session event {@link solace.SessionEventCode#event:DISCONNECTED}\n   * is emitted when these operations complete and the session has completely disconnected.\n   *\n   * @throws {solace.OperationError} if the session is disposed, or has never been connected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   */\n  disconnect() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session disconnect called.');\n    const result = this.allowOperation(SessionOperation.DISCONNECT);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    const sEvent = new SessionFSMEvent({ name: SessionEventName.DISCONNECT });\n    this._sessionFSM.processEvent(sEvent);\n  }\n\n  /**\n   * Release all resources associated with the session.\n   * It is recommended to call disconnect() first for proper handshake with the message-router.\n   */\n  dispose() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session dispose called.');\n    if (this._disposed) return;\n\n    //setImmediate(() => {\n    setTimeout(() => {\n      this._sessionFSM.processEvent(\n        new SessionFSMEvent({ name: SessionEventName.DISPOSE })\n      ); // yield for disconnect if any\n      this._sessionFSM.terminateFsm();\n      this.disableEmitter();\n      this._disposed = true;\n    }, 0);\n  }\n\n  /**\n   * Subscribe to a topic, optionally requesting a confirmation from the router.\n   *\n   * If requestConfirmation is set to true:\n   * {@link solace.SessionEventCode.SUBSCRIPTION_OK} is generated when subscription is\n   * added successfully; otherwise, session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_ERROR} is generated.\n   *\n   * If requestConfirmation is set to false, only session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_ERROR} is generated upon failure.\n   *\n   * When the application receives session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_ERROR}, it\n   * can obtain the failed topic subscription by calling\n   * {@link solace.SessionEvent#reason}.\n   * The returned string is in the format of \"Topic: <failed topic subscription>\".\n   *\n   * @param {solace.Destination} topic The topic destination subscription to add.\n   * @param {Boolean} requestConfirmation true, to request a confirmation; false otherwise.\n   * @param {Object|String|null|undefined} correlationKey If specified, and if requestConfirmation is true, this value is\n   *                                echoed in the session event within {@link SessionEvent}.\n   * @param {Number|null|undefined} requestTimeout The request timeout period (in milliseconds). If specified, this\n   *                                value overwrites readTimeoutInMsecs property in\n   *                                {@link SessionProperties}.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if the topic has invalid syntax.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_TOPIC_SYNTAX}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if the topic is a shared subscription and the peer router does not support Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_SUPPORTED}.\n   * * if the topic is a shared subscription and the client does not allowed Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_ALLOWED}.\n   */\n  subscribe(topic, requestConfirmation, correlationKey, requestTimeout) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session subscribe called for topic ', (topic && topic.toString && topic.toString()));\n    const result = this.allowOperation(SessionOperation.CTRL);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    Parameter.isInstanceOf('topic', topic, DestinationLib.Destination);\n    topic.validate();\n    if (topic.getType() !== DestinationLib.DestinationType.TOPIC) {\n      throw new OperationError(`Topic is required for subscribe; ${\n                               DestinationLib.DestinationType.describe(topic.getType())}`,\n                               ErrorSubcode.INVALID_TOPIC_SYNTAX);\n    }\n\n    Parameter.isBooleanOrNothing('requestConfirmation', requestConfirmation);\n    Parameter.isNumberOrNothing('requestTimeout', requestTimeout);\n    Parameter.isRangeCompareOrNothing('requestTimeout', requestTimeout, '>', 0);\n\n    const returnCode = this._sessionFSM.subscriptionUpdate(\n      topic,\n      !!requestConfirmation,\n      correlationKey,\n      requestTimeout,\n      SessionRequestType.ADD_SUBSCRIPTION,\n      false, // don't force beyond socket buffer limit\n      (rxMsgObj, cancelledRequest) =>\n        this.handleSubscriptionUpdateResponse(rxMsgObj,\n                                              cancelledRequest,\n                                              requestConfirmation));\n\n    const TransportLib = require('solclient-transport');\n    if (returnCode === TransportLib.TransportReturnCode.NO_SPACE) {\n      throw new OperationError('Cannot send subscription request - no space in transport. Please try again later (on CAN_ACCEPT_DATA)',\n          ErrorSubcode.INSUFFICIENT_SPACE,\n          TransportLib.TransportReturnCode.describe(returnCode));\n    }\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      throw new OperationError(\"Cannot send subscription request - transport error.\", ErrorSubcode.COMMUNICATION_ERROR,\n          TransportLib.TransportReturnCode.describe(returnCode));\n    }\n    return returnCode;\n  }\n\n  updateQueueSubscription(topic, queue, add, messageConsumer, callback, requestTimeout) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE(\n      'Queue subscribe called for topic ', (topic && topic.toString && topic.toString()),\n      ' for queue ', (queue && queue.toString && queue.toString()));\n\n    LOG_TRACE('queue: ', queue);\n\n    const result = this.allowOperation(SessionOperation.CTRL);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    Parameter.isInstanceOf('topic', topic, DestinationLib.Destination);\n    topic.validate();\n    if (topic.getType() !== DestinationLib.DestinationType.TOPIC) {\n      throw new OperationError(`Topic is required for queue subscribe; ${\n                               DestinationLib.DestinationType.describe(topic.getType())}`,\n                               ErrorSubcode.INVALID_TOPIC_SYNTAX);\n    }\n    Parameter.isInstanceOf('queue', queue, DestinationLib.Destination);\n    queue.validate();\n    if ((queue.getType() !== DestinationLib.DestinationType.QUEUE) &&\n    (queue.getType() !== DestinationLib.DestinationType.TEMPORARY_QUEUE)) {\n      throw new OperationError(`Queue is required for queue subscribe; ${\n                               DestinationLib.DestinationType.describe(queue.getType())}`,\n                               ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n\n    Parameter.isNumberOrNothing('requestTimeout', requestTimeout);\n    Parameter.isRangeCompareOrNothing('requestTimeout', requestTimeout, '>', 0);\n\n    const returnCode = this._sessionFSM.queueSubscriptionUpdate(\n      topic,\n      queue,\n      requestTimeout,\n      add,\n      false, //observe socket buffer size constraint, return NO_SPACE if full.\n      (rxMsgObj, cancelledRequest) =>\n        this.handleQueueSubscriptionUpdateResponse(\n          rxMsgObj,\n          cancelledRequest,\n          callback));\n\n    const TransportLib = require('solclient-transport');\n    if (returnCode === TransportLib.TransportReturnCode.NO_SPACE) {\n      throw new OperationError('Cannot send subscription request - no space in transport. Please try again later (on CAN_ACCEPT_DATA)',\n          ErrorSubcode.INSUFFICIENT_SPACE,\n          TransportLib.TransportReturnCode.describe(returnCode));\n    }\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      throw new OperationError(\"Cannot send subscription request - transport error.\", ErrorSubcode.COMMUNICATION_ERROR,\n          TransportLib.TransportReturnCode.describe(returnCode));\n    }\n    return returnCode;\n  }\n\n  /**\n   * Unsubscribe from a topic, and optionally request a confirmation from the router.\n   *\n   * If requestConfirmation is set to true, session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_OK} is generated when subscription is removed\n   * successfully; otherwise, session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_ERROR} is generated.\n   *\n   * If requestConfirmation is set to false, only session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_ERROR} is generated upon failure.\n   *\n   * When the application receives session event\n   * {@link solace.SessionEventCode.SUBSCRIPTION_ERROR}, it\n   * can obtain the failed topic subscription by calling\n   * {@link solace.SessionEvent#reason}. The returned\n   * string is in the format \"Topic: <failed topic subscription>\".\n   *\n   * @param {solace.Destination} topic The topic destination subscription to remove.\n   * @param {Boolean} requestConfirmation true, to request a confirmation; false otherwise.\n   * @param {Object|String|null|undefined} correlationKey If <code>null</code> or undefined, a Correlation Key is not set\n   *                                in the confirmation session event.\n   * @param {Number|null|undefined} requestTimeout The request timeout period (in milliseconds). If specified, this\n   *                                value overwrites readTimeoutInMsecs property in\n   *                                {@link SessionProperties}.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if the topic has invalid syntax.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_TOPIC_SYNTAX}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if the topic is a shared subscription and the peer router does not support Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_SUPPORTED}.\n   * * if the topic is a shared subscription and the client does not allowed Shared\n   *   Subscriptions.\n   *   Subcode: {@link solace.ErrorSubcode.SHARED_SUBSCRIPTIONS_NOT_ALLOWED}.\n   */\n  unsubscribe(topic, requestConfirmation, correlationKey, requestTimeout) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session unsubscribe called for topic ', (topic && topic.toString && topic.toString()));\n    const result = this.allowOperation(SessionOperation.CTRL);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    Parameter.isInstanceOf('topic', topic, DestinationLib.Destination);\n    topic.validate();\n    if (topic.getType() !== DestinationLib.DestinationType.TOPIC) {\n      throw new OperationError(`Topic is required for unsubscribe; ${\n                               DestinationLib.DestinationType.describe(topic.getType())}`,\n                               ErrorSubcode.INVALID_TOPIC_SYNTAX);\n    }\n\n    Parameter.isBooleanOrNothing('requestConfirmation', requestConfirmation);\n    Parameter.isNumberOrNothing('requestTimeout', requestTimeout);\n    Parameter.isRangeCompareOrNothing('requestTimeout', requestTimeout, '>', 0);\n\n    const returnCode = this._sessionFSM.subscriptionUpdate(\n      topic,\n      !!requestConfirmation,\n      correlationKey,\n      requestTimeout,\n      SessionRequestType.REMOVE_SUBSCRIPTION,\n      false, // don't force beyond socket buffer limit\n      (rxMsgObj, cancelledRequest) =>\n        this.handleSubscriptionUpdateResponse(rxMsgObj,\n                                              cancelledRequest,\n                                              requestConfirmation));\n\n    const TransportLib = require('solclient-transport');\n    if (returnCode === TransportLib.TransportReturnCode.NO_SPACE) {\n      throw new OperationError('Cannot send unsubscribe request - no space in transport. Please try again later (on CAN_ACCEPT_DATA)',\n          ErrorSubcode.INSUFFICIENT_SPACE,\n          TransportLib.TransportReturnCode.describe(returnCode));\n    }\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      throw new OperationError(\"Cannot send unsubscribe request - transport error.\", ErrorSubcode.COMMUNICATION_ERROR,\n          TransportLib.TransportReturnCode.describe(returnCode));\n    }\n    return returnCode;\n  }\n\n  /**\n   * Request that a Durable Topic Endpoint stop receiving data on a topic. Unsubscribe\n   * requests are only allowed by the router when no clients are bound to the DTE.\n   * If the unubscribe request is successful, the DTE will stop attracting messages,\n   * and all messages spooled to the DTE will be deleted.\n   *\n   * {@link solace.SessionEventCode.UNSUBSCRIBE_TE_TOPIC_OK} is generated when the\n   * subscription is removed successfully; otherwise,\n   * {@link solace.SessionEventCode.UNSUBSCRIBE_TE_TOPIC_ERROR} is generated.\n   *\n   * When the application receives session event\n   * {@link solace.SessionEventCode.UNSUBSCRIBE_TE_TOPIC_ERROR}, it\n   * can obtain the failed topic subscription by calling\n   * {@link solace.SessionEvent#reason}.\n   *\n   * @param {solace.AbstractQueueDescriptor|solace.QueueDescriptor} queueDescriptor A description\n   *  of the queue to which the topic is subscribed.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   */\n  unsubscribeDurableTopicEndpoint(queueDescriptor) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session unsubscribeDurableTopicEndpoint called for queue descriptor ', (queueDescriptor && queueDescriptor.toString && queueDescriptor.toString()));\n    const result = this.allowOperation(SessionOperation.CTRL);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    // emulate subscription\n    const destination = this.createDestinationFromDescriptor(\n      QueueDescriptor.createFromSpec(queueDescriptor));\n    const requestConfirmation = true;\n    const returnCode = this._sessionFSM.subscriptionUpdate(\n      destination,\n      requestConfirmation,\n      undefined,\n      undefined,\n      SessionRequestType.REMOVE_DTE_SUBSCRIPTION,\n      false, // don't force beyond socket buffer limit\n      (rxMsgObj, cancelledRequest) =>\n        this.handleDTEUnsubscribeResponse(rxMsgObj,\n                                          cancelledRequest));\n\n    const TransportLib = require('solclient-transport');\n    if (returnCode === TransportLib.TransportReturnCode.NO_SPACE) {\n      throw new OperationError('Cannot send subscription request - no space in transport. Please try again later (on CAN_ACCEPT_DATA)',\n          ErrorSubcode.INSUFFICIENT_SPACE,\n          TransportLib.TransportReturnCode.describe(returnCode));\n    }\n    if (returnCode !== TransportLib.TransportReturnCode.OK) {\n      throw new OperationError(\"Cannot send subscription request - transport error.\", ErrorSubcode.COMMUNICATION_ERROR,\n          TransportLib.TransportReturnCode.describe(returnCode));\n    }\n    return returnCode;\n  }\n\n\n  /**\n   * Modify a session property after creation of the session.\n   *\n   * This method only works for a select few properties,\n   * and updates their value on the live broker session.\n   *\n   * @param {MutableSessionProperty} mutableSessionProperty The property key to modify.\n   * @param {Object} newValue The new property value.\n   * @param {Number} requestTimeout The request timeout period (in milliseconds). If specified, it\n   *                                overwrites readTimeoutInMsecs\n   * @param {Object|String|null|undefined} correlationKey If specified, this value is echoed in the session event within\n   *                                {@link SessionEvent} property in {@link SessionProperties}\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   */\n  updateProperty(mutableSessionProperty, newValue, requestTimeout, correlationKey) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session updateProperty called: ', mutableSessionProperty, newValue);\n    const result = this.allowOperation(SessionOperation.CTRL);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n\n    const { Topic } = DestinationLib;\n\n    LOG_TRACE('Updating property ', mutableSessionProperty, newValue);\n\n    Parameter.isEnumMember('mutableSessionProperty', mutableSessionProperty, MutableSessionProperty);\n\n    Parameter.isNumberOrNothing('requestTimeout', requestTimeout);\n    Parameter.isRangeCompareOrNothing('requestTimeout', requestTimeout, '>', 0);\n\n    let sessionEvent;\n    /*\n     Response CB to the CLIENTCTRL UPDATE response\n\n     This is pretty complicated: we define the whole process in here\n     using callbacks to preserve state such as the correlationKey of the user\n     request.\n     That is, this entire multi-step process executes under the context of that one call to\n     updateProperty with a single correlationKey value.\n     */\n    const responseCallback = (respMsg) => {\n      const response = respMsg.getResponse();\n      if (response.responseCode === 200) {\n        if (mutableSessionProperty === MutableSessionProperty.CLIENT_DESCRIPTION) {\n          // update property and notify client\n          this._sessionProperties.applicationDescription = newValue;\n          sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_OK,\n                                            response.responseString,\n                                            response.responseCode,\n                                            0,\n                                            correlationKey,\n                                            null);\n          this.sendEvent(sessionEvent);\n        } else if (mutableSessionProperty === MutableSessionProperty.CLIENT_NAME) {\n          // replace P2P subscription: REM and ADD\n          const oldP2pTopicName = P2PUtil.getP2PTopicSubscription(\n            this._sessionProperties.p2pInboxBase);\n          const oldP2pTopic = Topic.createFromName(oldP2pTopicName);\n\n          const newP2pTopicName = P2PUtil.getP2PTopicSubscription(\n            respMsg.getP2PTopicValue());\n          const newP2pTopic = Topic.createFromName(newP2pTopicName);\n\n          const afterAddCallback = (smpResp) => {\n            const resp = smpResp.getResponse();\n            if (resp.responseCode === 200) {\n              // notify client\n              this._sessionProperties._setP2pInboxBase(respMsg.getP2PTopicValue() || '');\n              this._sessionProperties._setP2pInboxInUse(\n                P2PUtil.getP2PInboxTopic(this._sessionProperties.p2pInboxBase));\n              this._sessionProperties.clientName = newValue;\n              sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_OK,\n                                                resp.responseString,\n                                                resp.responseCode,\n                                                0,\n                                                correlationKey,\n                                                null);\n              this.sendEvent(sessionEvent);\n            } else {\n              const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(resp.responseCode,\n                                                                              resp.responseString);\n              if (errorSubcode === ErrorSubcode.SUBSCRIPTION_ALREADY_PRESENT &&\n                              this._sessionProperties.ignoreDuplicateSubscriptionError) {\n                // notify client\n                sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_OK,\n                                                  resp.responseString,\n                                                  resp.responseCode,\n                                                  0,\n                                                  correlationKey,\n                                                  null);\n                this.sendEvent(sessionEvent);\n              } else if (errorSubcode === ErrorSubcode.SUBSCRIPTION_ALREADY_PRESENT ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_ATTRIBUTES_CONFLICT ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_INVALID ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_ACL_DENIED ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_TOO_MANY) {\n                // notify client\n                sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                                  resp.responseString,\n                                                  resp.responseCode,\n                                                  errorSubcode,\n                                                  correlationKey,\n                                                  null);\n                this.sendEvent(sessionEvent);\n              } else {\n                // notify client\n                sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                                  resp.responseString,\n                                                  resp.responseCode,\n                                                  ErrorSubcode.SUBSCRIPTION_ERROR_OTHER,\n                                                  correlationKey,\n                                                  null);\n                this.sendEvent(sessionEvent);\n              }\n            }\n          };\n\n          const afterRemoveCallback = (smpResp) => {\n            const resp = smpResp.getResponse();\n            if (resp.responseCode === 200) {\n              // second add new P2P\n              // TODO: handle transport error?\n              this._sessionFSM.subscriptionUpdate(newP2pTopic,\n                                                  true,       // request confirm\n                                                  correlationKey,\n                                                  this._sessionProperties.readTimeoutInMsecs,\n                                                  SessionRequestType.ADD_P2PINBOX,\n                                                  true, // force beyond socket buffer limit because there's no error handling\n                                                  afterAddCallback);\n            } else {\n              const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(resp.responseCode,\n                                                                              resp.responseString);\n              if (errorSubcode === ErrorSubcode.SUBSCRIPTION_NOT_FOUND &&\n                  this._sessionProperties.ignoreSubscriptionNotFoundError) {\n                // add new P2P anyway: the error is simply the old P2P\n                // was not found on remove.  It's notable though.\n              // TODO: handle transport error?\n                this._sessionFSM.subscriptionUpdate(newP2pTopic,\n                                                    true,       // request confirm\n                                                    correlationKey,\n                                                    this._sessionProperties.readTimeoutInMsecs,\n                                                    SessionRequestType.ADD_P2PINBOX,\n                                                    true, // force beyond socket buffer limit because there's no error handling\n                                                    afterAddCallback);\n              } else if (errorSubcode === ErrorSubcode.SUBSCRIPTION_ATTRIBUTES_CONFLICT ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_INVALID ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_NOT_FOUND ||\n                         errorSubcode === ErrorSubcode.SUBSCRIPTION_ACL_DENIED) {\n                // notify client\n                sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                                  resp.responseString,\n                                                  resp.responseCode,\n                                                  errorSubcode,\n                                                  null,\n                                                  null);\n                this.sendEvent(sessionEvent);\n              } else {\n                // notify client\n                sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                                  resp.responseString,\n                                                  resp.responseCode,\n                                                  ErrorSubcode.SUBSCRIPTION_ERROR_OTHER,\n                                                  null,\n                                                  null);\n                this.sendEvent(sessionEvent);\n              }\n            }\n          };\n\n          // first remove old P2P\n              // TODO: handle transport error?\n          this._sessionFSM.subscriptionUpdate(oldP2pTopic,\n                                              true,       // request confirm\n                                              correlationKey,\n                                              this._sessionProperties.readTimeoutInMsecs,\n                                              SessionRequestType.REMOVE_P2PINBOX,\n                                              true, // force beyond socket buffer limit because there's no error handling\n                                              afterRemoveCallback);\n        }\n      } else {\n        // notify client error\n        const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(response.responseCode,\n                                                                        response.responseString);\n        sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                          response.responseString,\n                                          response.responseCode,\n                                          errorSubcode,\n                                          correlationKey,\n                                          null);\n        this.sendEvent(sessionEvent);\n      }\n    }; // end CB (response to UPDATE request)\n\n    const returnCode = this._sessionFSM.sendUpdateProperty(mutableSessionProperty,\n                                                           newValue,\n                                                           correlationKey,\n                                                           requestTimeout,\n                                                           responseCallback);\n    if (returnCode !== TransportReturnCode.OK) {\n          // do not change session state\n\n      if (returnCode === TransportReturnCode.NO_SPACE) {\n        sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                          'Property update failed - no space in transport',\n                                          null,\n                                          ErrorSubcode.INSUFFICIENT_SPACE,\n                                          null,\n                                          null);\n      } else {\n        sessionEvent = SessionEvent.build(SessionEventCode.PROPERTY_UPDATE_ERROR,\n                                          'Property update failed',\n                                          null,\n                                          ErrorSubcode.INVALID_OPERATION,\n                                          null,\n                                          null);\n      }\n      this.sendEvent(sessionEvent);\n    }\n  }\n  /**\n   * Modify (some) authentication-related session properties.\n   * The modifications take effect the next time the session connects or reconnects to the broker.\n   * There is no change to the active connection.\n   * Calling this method does not in itself trigger any kind of reconnection, reauthentication or renegotiation.\n   *\n   * **Note:** the update of \"accessToken\" and \"idToken\" properties is currently supported.\n   * Authentication Properties\n   * - accessToken to update previously set access token required for OAUTH2 authentication.\n   * - idToken to update previously set ID token required for OIDC authentication\n   * Example: updateAuthenticationOnReconnect({accessToken : my_new_token});\n   *\n   *\n   * @param {Object} authenticationProperties to be set\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if unsupported properties attempted to be set.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_CONFLICT}.\n   */\n  updateAuthenticationOnReconnect(authenticationProperties) {\n    const { LOG_TRACE } = this.logger;\n    const allowedProperties = ['accessToken', 'idToken'];\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    if (!authenticationProperties || typeof authenticationProperties !== 'object') {\n      throw new OperationError('updateAuthenticationOnReconnect parameter must be a non-empty object.', ErrorSubcode.PARAMETER_INVALID_TYPE, null);\n    }\n    var key;\n    for (key in authenticationProperties) {\n      if (!allowedProperties.includes(key)) {\n        throw new OperationError('Invalid property in updateAuthenticationOnReconnect parameter.', ErrorSubcode.PARAMETER_CONFLICT, null);\n      }\n    }\n    const newProps = this.getSessionProperties();\n    Object.assign(newProps, authenticationProperties);\n    SessionPropertiesValidator.validate(newProps);\n    this._sessionProperties = newProps;\n    Object.assign(this._sessionFSM._sessionProperties, authenticationProperties);\n    LOG_TRACE('updateAuthenticationOnReconnect applied new token(s).');\n  }\n\n  /**\n   * Publish (send) a message over the session. The message is sent to its set destination.\n   *\n   * This method is used for sending both direct and Guaranteed Messages.  If the message's\n   * {@link solace.MessageDeliveryModeType} is {@link solace.MessageDeliveryModeType.DIRECT}, the\n   * message is a direct message; otherwise, it is a guaranteed message.\n   *\n   * @param {solace.Message} message The message to send. It must have a destination set.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the message does not have a topic.\n   *   Subcode: {@link solace.ErrorSubcode.TOPIC_MISSING}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if no Guaranteed Message Publisher is available and the message deliveryMode is\n   *   {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   *   {@link solace.MessageDeliveryModeType.NON_PERSISTENT}.\n   *   Subcode: {@link solace.ErrorSubcode.GM_UNAVAILABLE}.\n   * * if the message deliveryMode is\n   *   {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   *   {@link solace.MessageDeliveryModeType.NON_PERSISTENT},\n   *   and the message payload size is above the broker's limit.\n   *   Subcode: {@link solace.ErrorSubcode.MESSAGE_TOO_LARGE}.\n   * \n   */\n  send(message) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session send() called.');\n    const result = this.allowOperation(SessionOperation.SEND, message);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    Parameter.isInstanceOf('message', message, MessageLib.Message);\n\n    // check to see if we can send variable length params to the broker\n    if (!this.isCapable(CapabilityType.VAR_LEN_EXT_PARAM)) {\n      LOG_TRACE('Broker session does not support VAR LEN SMF extended parameters');\n      // clear these message properties since var-len extended\n      // properties not supported on broker\n      message.clearExtendedVarLenParams();\n\n      // throw error if these extended var-length message properties are set\n      if(this._failOnExtendedVariableLengthProperties(message)) {\n        throw new OperationError(\n          'Broker does not support variable length SMF extended parameters',\n          ErrorSubcode.INVALID_OPERATION);\n      }\n    }\n    this.validateAndSendMessage(message);\n  }\n\n  _failOnExtendedVariableLengthProperties(message) {\n    return false; // return false since no properties for now\n  }\n\n  /**\n   * Sends a request using user-specified callback functions.\n   *\n   * <p>The API fills in the correlationId and replyTo fields in the request when they are not preset by the application.\n   * This is the preferred use case to ensure replies are directed back to the correct requester.</p>\n   *\n   * @param {solace.Message} message The request message to send.\n   * @param {Number} [timeout] The timeout value (in milliseconds). The minimum value is 100 msecs.\n   * @param {solace.Session.replyReceivedCallback} [replyReceivedCBFunction] The callback to notify\n   *    when a reply is received.\n   * @param {solace.Session.requestFailedCallback} [requestFailedCBFunction] The callback to notify\n   *    when the request failed.\n   * @param {Object} [userObject] An optional correlation object to use in the response callback.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if the message does not have a topic.\n   *   Subcode: {@link solace.ErrorSubcode.TOPIC_MISSING}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if no Guaranteed Message Publisher is available and the message deliveryMode is\n   *   {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   *   {@link solace.MessageDeliveryModeType.NON_PERSISTENT}.\n   *   Subcode: {@link solace.ErrorSubcode.GM_UNAVAILABLE}.\n   * * if the message deliveryMode is\n   *   {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   *   {@link solace.MessageDeliveryModeType.NON_PERSISTENT},\n   *   and the message payload size is above the broker's limit.\n   *   Subcode: {@link solace.ErrorSubcode.MESSAGE_TOO_LARGE}.\n   */\n  sendRequest(message,\n              timeout = undefined,\n              replyReceivedCBFunction = undefined,\n              requestFailedCBFunction = undefined,\n              userObject = undefined\n              ) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session sendRequest called.');\n    const result = this.allowOperation(SessionOperation.SEND, message);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    Parameter.isInstanceOf('message', message, MessageLib.Message);\n    Parameter.isNumberOrNothing('timeout', timeout);\n    Parameter.isRangeCompareOrNothing('timeout', timeout, '>=', 100);\n    Parameter.isFunctionOrNothing('replyReceivedCBFunction', replyReceivedCBFunction);\n    Parameter.isFunctionOrNothing('requestFailedCBFunction', requestFailedCBFunction);\n\n    // set correlationId and replyTo fields if not set by the application\n    const correlationId = message.getCorrelationId();\n    if (correlationId === null || correlationId === undefined) {\n      message.setCorrelationId(SOLCLIENT_REQUEST_PREFIX + GlobalContext.NextId());\n    }\n    const replyTo = message.getReplyTo();\n    if (replyTo === null || replyTo === undefined) {\n      const replyToTopic = DestinationLib.Topic.createFromName(\n        this._sessionProperties.p2pInboxInUse);\n      message.setReplyTo(replyToTopic);\n    }\n\n    this.validateAndSendMessage(message);\n\n      // enqueue request\n    this.enqueueOutstandingDataReq(message.getCorrelationId(),\n                                   requestFailedCBFunction,\n                                   timeout,\n                                   replyReceivedCBFunction,\n                                   userObject);\n  }\n\n  /**\n   * Sends a reply message to the destination specified in messageToReplyTo.\n   *\n   * If `messageToReplyTo` is non-null:\n   *  * {@link solace.Message#getReplyTo} is copied from `messageToReplyTo` to\n   *    {@link solace.Message#setDestination} on `replyMessage`, unless `replyTo` is null.\n   *  * {@link solace.Message#setCorrelationId} is copied from `messageToReplyTo` to\n   *    {@link solace.Message#setCorrelationId} on `replyMessage`, unless `correlationId` is null.\n   *\n   * If `messageToReplyTo` is null, the application is responsible for setting\n   * the `destination` and `correlationId` on the `replyMessage`.\n   *\n   * @param {solace.Message} messageToReplyTo The message to which a reply will be sent.\n   * @param {solace.Message} replyMessage The reply to send.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed or disconnected.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   * * if the parameters have an invalid value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   * * if the message does not have a topic.\n   *   Subcode: {@link solace.ErrorSubcode.TOPIC_MISSING}.\n   * * if there's no space in the transport to send the request.\n   *   Subcode: {@link solace.ErrorSubcode.INSUFFICIENT_SPACE}.  See:\n   *   {@link solace.SessionEventCode#event:CAN_ACCEPT_DATA}.\n   * * if no Guaranteed Message Publisher is available and the message deliveryMode is\n   *   {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   *   {@link solace.MessageDeliveryModeType.NON_PERSISTENT}.\n   *   Subcode: {@link solace.ErrorSubcode.GM_UNAVAILABLE}.\n   * * if the message deliveryMode is\n   *   {@link solace.MessageDeliveryModeType.PERSISTENT} or\n   *   {@link solace.MessageDeliveryModeType.NON_PERSISTENT},\n   *   and the message payload size is above the broker's limit.\n   *   Subcode: {@link solace.ErrorSubcode.MESSAGE_TOO_LARGE}.\n   */\n  sendReply(messageToReplyTo, replyMessage) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session sendReply called.');\n    const result = this.allowOperation(SessionOperation.SEND, replyMessage);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n\n    Parameter.isInstanceOfOrNothing('messageToReplyTo', messageToReplyTo, MessageLib.Message);\n    Parameter.isInstanceOf('replyMessage', replyMessage, MessageLib.Message);\n\n    replyMessage.setAsReplyMessage(true);\n    if (messageToReplyTo) {\n      replyMessage.setCorrelationId(messageToReplyTo.getCorrelationId());\n      const replyTo = messageToReplyTo.getReplyTo();\n      if (replyTo === null || replyTo === undefined) {\n        throw new OperationError('ReplyTo destination may not be null.',\n                                 ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n      }\n      replyMessage.setDestination(messageToReplyTo.getReplyTo());\n    }\n    this.validateAndSendMessage(replyMessage);\n  }\n\n  /**\n   * Returns the value of a given {@link solace.StatType}.\n   *\n   * @param {solace.StatType} statType The statistic to query.\n   * @returns {Number} The value of the requested statistic.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the StatType is invalid.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_OUT_OF_RANGE}.\n   */\n  getStat(statType) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session getStat called.');\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n\n    Parameter.isEnumMember('statType', statType, StatType);\n    return this._sessionFSM.getStat(statType);\n  }\n\n  /**\n   * Reset session statistics to initial values.\n   *\n   * @throws {solace.OperationError} if the session is disposed.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   */\n  resetStats() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session resetStats called.');\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    this._sessionFSM.resetStats();\n  }\n\n  /**\n   * Returns a clone of the properties for this session.\n   *\n   * @returns {solace.SessionProperties} A clone of this session's properties.\n   * @throws {solace.OperationError} if the session is disposed.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   */\n  getSessionProperties() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session getSessionProperties called.');\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n\n    const properties = this._sessionProperties.clone();\n    const sessionState = this.getSessionState();\n    if ((sessionState !== SessionStateName.DISCONNECTED) && this._sessionFSM._transport) {\n      properties._setWebTransportProtocolInUse(this._sessionFSM._transport.getTransportProtocol());\n    }\n\n    return properties;\n  }\n\n  /**\n   * Check the value of a boolean router capability.\n   *\n   * This function is a shortcut for {@link solace.Session#getCapability}. It performs the same\n   * operation, but instead of returning a {@link solace.SDTField} wrapping a capability value, it\n   * just returns the boolean value.\n   *\n   *  Attempting to query a non-boolean capability will return `null`.\n   *\n   * @param {solace.CapabilityType} capabilityType The capability to check.\n   *\n   * @returns {Boolean} the value of the capability queried.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type or value.\n   *   Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   */\n  isCapable(capabilityType) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session isCapable called.');\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    Parameter.isNumber('capabilityType', capabilityType);\n\n    const caps = this._capabilities;\n    if (!caps) {\n      return false;\n    }\n\n    // Guard for undefined OR non-boolean capability\n    return (typeof caps[capabilityType] === 'boolean') ? caps[capabilityType] : false;\n  }\n\n  /**\n   * Get the value of an router capability, or null if unknown. This function must\n   * be called after connecting the session.\n   *\n   * SDT Type conversions:\n   *\n   *  * {string} values are returned as {@link solace.SDTFieldType.STRING}.\n   *  * {boolean} values are returned as {@link solace.SDTFieldType.BOOL}.\n   *  * All numeric values are returned as {@link solace.SDTFieldType.INT64}.\n   *\n   * @param {solace.CapabilityType} capabilityType The router capability to query.\n   * @returns {solace.SDTField} The result of the capability query.\n   *\n   * @throws {solace.OperationError}\n   * * if the session is disposed\n   *    Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * * if the parameters have an invalid type or value.\n   *    Subcode: {@link solace.ErrorSubcode.PARAMETER_INVALID_TYPE}.\n   */\n  getCapability(capabilityType) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session getCapability called.');\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n\n    Parameter.isNumber('capabilityType', capabilityType);\n\n    const val = this._getCapability(capabilityType);\n    if (typeof val === 'boolean') {\n      return SDTField.create(SDTFieldType.BOOL, val);\n    }\n    if (typeof val === 'number') {\n      return SDTField.create(SDTFieldType.INT64, val);\n    }\n    if (typeof val === 'string') {\n      return SDTField.create(SDTFieldType.STRING, val);\n    }\n\n    return null;\n  }\n\n  _getCapability(capabilityType) {\n    const caps = this._capabilities;\n    if (!caps) return null;\n\n    const value = caps[capabilityType];\n    return (value === undefined) ? null : value;\n  }\n\n  /**\n   * Returns the session's state. This is a third-choice method to determine session\n   * state; the first is notifications on FSM transitions, and the second choice is\n   * the finer-grained states of the FSM that are used in this mapping.\n   *\n   * @returns {SessionState} The current state of the session.\n   * @throws {solace.OperationError} if the session is disposed.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}.\n   * @internal\n   */\n  getSessionState() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session getSessionState called.');\n    const result = this.allowOperation(SessionOperation.QUERY_OPERATION);\n    if (result) {\n      throw new OperationError(result, ErrorSubcode.INVALID_OPERATION, null);\n    }\n    const sessionStateName = this.getFSMState();\n    switch (sessionStateName) {\n      case SessionStateName.FULLY_CONNECTED:\n        return SessionState.CONNECTED;\n      case SessionStateName.DISCONNECTING:\n        return SessionState.DISCONNECTING;\n      case SessionStateName.DISCONNECTED:\n        return SessionState.DISCONNECTED;\n      case SessionStateName.SESSION_ERROR:\n        return SessionState.SESSION_ERROR;\n      case SessionStateName.CONNECTING:\n      case SessionStateName.WAITING_FOR_INTERCONNECT_TIMEOUT:\n      case SessionStateName.WAITING_FOR_DNS:\n      case SessionStateName.WAITING_FOR_TRANSPORT_UP:\n      case SessionStateName.WAITING_FOR_SESSION_UP:\n      case SessionStateName.WAITING_FOR_LOGIN:\n      case SessionStateName.WAITING_FOR_P2PINBOX_REG:\n      case SessionStateName.WAITING_FOR_PUBFLOW:\n      case SessionStateName.REAPPLYING_SUBSCRIPTIONS:\n        return SessionState.CONNECTING;\n      default:\n        {\n          // State names unaccounted for --\n          // WAITING_FOR_SUBCONFIRM\n          // WAITING_FOR_CAN_ACCEPT_DATA\n          // DISCONNECTING_FLOWS\n          // FLUSHING_TRANSPORT\n          // DESTROYING_TRANSPORT\n          // RECONNECTING\n          // TRANSPORT_FAIL\n          //\n          // Alternatively, we could use StateMachine#isStateActive on key parent states,\n          // instead of having to enumerate all child states.ant\n          const { LOG_INFO } = this.logger;\n          LOG_INFO(`Unmapped session state ${SessionStateName.describe(sessionStateName)}`);\n          return null;\n        }\n    }\n  }\n\n  /**\n   * Gets the fine grained state name from the session FSM.\n   * @returns {solace.SessionStateName} The FSM state name\n   * @private\n   */\n  getFSMState() {\n    return this._sessionFSM.getCurrentStateName();\n  }\n\n  /**\n   * Creates a {@link solace.CacheSession} object that uses this Session to service its\n   * cache requests.\n   *\n   * It should be disposed when the application no longer requires a CacheSession, by calling\n   * {@link solace.CacheSession#dispose}.\n   *\n   * @param {solace.CacheSessionProperties} properties The properties for the cache session.\n   *\n   * @returns {solace.CacheSession} The newly created cache session.\n   *\n   * @throws {solace.OperationError} if a CacheSession is already associated with this Session.\n   *   Subcode: {@link solace.ErrorSubcode.INVALID_OPERATION}\n   */\n  createCacheSession(properties) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session createCacheSession called.');\n    return new CacheSession(properties, this, {\n      // bind instead of arrow func for varargs\n      // due to bubl transpiler bug\n      incStat: this._sessionFSM.incStat.bind(this._sessionFSM),\n    });\n  }\n\n  /**\n   * Creates a {@link solace.MessageConsumer} to receive Guaranteed Messages in this Session.\n   *\n   * Consumer characteristics and behavior are defined by properties. The consumer properties are\n   * supplied as an object; the pertinent fields are exposed in\n   * {@link solace.MessageConsumerProperties};\n   * other property names are ignored. If the Message Consumer creation\n   * specifies a non-durable endpoint,\n   * {@link solace.QueueProperties} can be used to change the default properties on the\n   * non-durable endpoint. Any values not supplied are set to default values.\n   *\n   * When the consumer is created, a consumer object is returned to the caller. This is the object\n   * from which events are emitted, and upon which operations (for example, starting and stopping\n   * the consumer) are performed.\n   *\n   * If this session does not support Guaranteed Messaging, this method will throw. The following\n   * must be true in order to create a MessageConsumer:\n   *  * The transport protocol list does not contain any HTTP transport protocols. See\n   *    {@link solace.SessionProperties#transportProtocol} and\n   *    {@link solace.FactoryProfile#cometEnabled}\n   *  * The Solace Messaging Router must support Guaranteed Messaging\n   *\n   * @method solace.Session#createMessageConsumer\n   * @param {solace.MessageConsumerProperties|Object} consumerProperties The properties for the\n   *    consumer.\n   * @returns {solace.MessageConsumer} The newly created Message Consumer.\n   * @throws {solace.OperationError} when Guaranteed Message Consume is not\n   *    supported on this session.\n   * @target browser\n   */\n  /**\n   * Creates a {@link solace.MessageConsumer} to receive Guaranteed Messages in this Session.\n   *\n   * Consumer characteristics and behavior are defined by properties. The consumer properties are\n   * supplied as an object; the pertinent fields are exposed in\n   * {@link solace.MessageConsumerProperties};\n   * other property names are ignored. If the Message Consumer creation\n   * specifies a non-durable endpoint,\n   * {@link solace.QueueProperties} can be used to change the default properties on the\n   * non-durable endpoint. Any values not supplied are set to default values.\n   *\n   * When the consumer is created, a consumer object is returned to the caller. This is the object\n   * from which events are emitted, and upon which operations (for example, starting and stopping\n   * the consumer) are performed.\n   *\n   * If this session does not support Guaranteed Messaging, this method will throw. The Solace\n   * Messaging Router must support Guaranteed Messaging.\n   *\n   * @method solace.Session#createMessageConsumer\n   * @param {solace.MessageConsumerProperties|Object} consumerProperties The properties for the\n   *    consumer.\n   * @returns {solace.MessageConsumer} The newly created Message Consumer.\n   * @throws {solace.OperationError} if Guaranteed Message Consume is not supported on this session.\n   * @target node\n   */\n  createMessageConsumer(consumerProperties) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session createMessageConsumer called.');\n    if (this._adDisabledReason) {\n      throw new OperationError('Session does not provide MessageConsumer capability',\n                               ErrorSubcode.GM_UNAVAILABLE,\n                               this._adDisabledReason);\n    }\n    if ((consumerProperties !== undefined) && (consumerProperties !== null)) {\n      const { LOG_DEBUG } = this.logger;\n      LOG_DEBUG('createMessageConsumer - Consumer properties:\\n', consumerProperties);\n    }\n    return this._sessionFSM.createMessageConsumer(consumerProperties);\n  }\n \n  /**\n   * Provisons a queue or topic endpoint on the broker without binding a flow or adding a subscription.\n   * The function returns immediately (unless the parameters fail validation in which case an exception is thrown),\n   * but the actual outcome of the operation on the broker is only reported later \n   * in the form of a POVISION_OK or PROVISION_ERROR session event.\n   * Make sure to subscribe for those when using this fuction.\n   *\n   * @param {solace.QueueDescriptor} queueDescriptor The name and type (queue or TE) of the endpoint. Only durable endpoints supported currently.\n   * @param {solace.QueueProperties} queueProperties Optional, in-out parameter.\n   *  In: Properties of the Queue/TE to be created. Empty or undefined fields are left to broker defaults.\n   *  Out (on PROVISION_OK, not on function return): Properties of the endpoint as created.\n   * @param {boolean} ignoreExists Makes the operation idempotent if true, by ignoring \"endpoint already exists\" errors.\n   * @param {Object|String|null|undefined} correlationKey If specified, this is the value identifying the operation \n   * in the resulting PROVISION_OK or PROVISION_ERROR session event {@link SessionEvent}\n   *\n   * @throws {solace.OperationError}  \n   */\n  provisionEndpoint(queueDescriptor, queueProperties, ignoreExists, correlationKey) {\n    Parameter.isBooleanOrNothing('ignoreExists', ignoreExists);\n    Parameter.isInstanceOf('queueDescriptor', queueDescriptor, Object, ErrorSubcode.PARAMETER_INVALID_TYPE, \"queueDescriptor must be supplied, can't be \"+queueDescriptor);\n    Parameter.isString('queueDescriptor.name', queueDescriptor.name, ErrorSubcode.PARAMETER_INVALID_TYPE, \"provisionEndpoint only works on named endpoints\");\n    // Cloning to apply the durable:true default.\n    const queueDescriptor2 = new QueueDescriptor(queueDescriptor);\n    if (!queueDescriptor2.durable) {\n      throw new NotImplementedError('provisionEndpoint() only works for durable endpoints.');\n      //console.log(\"Temporarily allowing durable Create.\");\n    }\n    if (queueProperties) {\n      Parameter.isInstanceOfOrNothing('queueProperties', queueProperties, Object, ErrorSubcode.PARAMETER_INVALID_TYPE, \"queueProperties must be an object, ideally a solace.QueueProperties instance. Can't be \"+queueProperties);\n      QueuePropertiesValidator.validate(queueProperties);\n    }\n    const callback = this.handleProvisionResponse.bind(this, ignoreExists, true);\n    return this._sessionFSM.provisionEndpoint(queueDescriptor2, queueProperties, correlationKey, callback);\n\n\n  }\n\n  /**\n   * Deprovisons a queue or topic endpoint on the broker.\n   * The function returns immediately (unless the parameters fail validation in which case an exception is thrown),\n   * but the actual outcome of the operation on the broker is only reported later \n   * in the form of a POVISION_OK or PROVISION_ERROR session event.\n   * Make sure to subscribe for those when using this fuction.\n   *\n   * @param {solace.QueueDescriptor} queueDescriptor The name and type (queue or TE) of the endpoint. Durability is ignored.\n   * @param {boolean} ignoreMisssing Makes the operation idempotent if true, by ignoring \"endpoint doesn't exist\" errors.\n   * @param {Object|String|null|undefined} correlationKey If specified, this is the value identifying the operation \n   * in the resulting PROVISION_OK or PROVISION_ERROR session event {@link SessionEvent}\n   *\n   * @throws {solace.OperationError}  \n   */\n  deprovisionEndpoint(queueDescriptor, ignoreMissing, correlationKey) {\n    Parameter.isBooleanOrNothing('ignoreMissing', ignoreMissing);\n    if (!(queueDescriptor instanceof Object)) {\n      throw new OperationError('queueDesscriptor object required', ErrorSubcode.PARAMETER_INVALID_TYPE);\n    }\n    Parameter.isString('queueDescriptor.name', queueDescriptor.name, ErrorSubcode.PARAMETER_INVALID_TYPE, \"deprovisionEndpoint only works on named endpoints\");\n\n    // Leaving the last two parameters, the SMF response object and the CorrelatedRequest, unbound.\n    const callback = this.handleProvisionResponse.bind(this, ignoreMissing, false);\n\n    return this._sessionFSM.deprovisionEndpoint(queueDescriptor, correlationKey, callback);\n\n  }\n\n  /**\n   * Internal callback for provision/deprovision response handling.\n   * @param {solace.QueueProperties} queueProperties to update from the response (provision only)\n   * @param {boolean} ignore ignoreMissing or ignoreExists was set.\n   * @param {boolean} provision true for provision, false for deprovision.\n   * @param {CorrelatedRequest} request The originating request object\n   * @private\n   */\n  handleProvisionResponse(ignore, provision, msg, request) {\n    const {correlationKey} = request;\n    const responseCode = msg._smfHeader.pm_respcode;\n    const responseString = msg._smfHeader.pm_respstr;\n    const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode, responseString);   \n    const queueDescriptor = new QueueDescriptor();\n    queueDescriptor.durable = undefined;\n    const queueProperties = new QueueProperties();\n    const { DestinationUtil } = DestinationLib;\n\n    if (msg.getQueueNameBytes() && msg.getQueueNameBytes().length > 0) {\n      queueDescriptor.name = DestinationUtil.decodeBytes(msg.getQueueNameBytes()); \n      queueDescriptor.type = QueueType.QUEUE;\n    } else if (msg.getTopicEndpointBytes() && msg.getTopicEndpointBytes().length > 0) {\n      queueDescriptor.name = DestinationUtil.decodeBytes(msg.getTopicEndpointBytes()); \n      queueDescriptor.type = QueueType.TOPIC_ENDPOINT;\n    } else {\n      queueDescriptor.name =  undefined;\n      queueDescriptor.type = undefined;\n    }\n\n    queueDescriptor.durable = msg.getDurability();\n    queueProperties.accessType = msg.getAccessType();\n    queueProperties.discardBehavior = msg.getQueueDiscardBehavior();\n    queueProperties.maxMessageRedelivery = msg.getMaxRedelivery();\n    queueProperties.maxMessageSize = msg.getMaxMsgSize();\n    queueProperties.permissions = msg.getAllOthersPermissions();\n    queueProperties.quotaMB = msg.getQuota();\n    queueProperties.respectsTTL = msg.getRespectsTTL();\n\n    let reason = null;\n    if ((responseCode === 400) && (errorSubcode === ErrorSubcode.INVALID_QUEUE_NAME || errorSubcode === ErrorSubcode.INVALID_TE_NAME)) {\n      reason = explainInvalidEndpointName(queueDescriptor.name);\n    }\n\n\n    let outcome = SessionEventCode.PROVISION_ERROR;\n    if (responseCode === 200) {\n      outcome = SessionEventCode.PROVISION_OK;\n    } else {\n      if (ignore && provision && errorSubcode == ErrorSubcode.ENDPOINT_ALREADY_EXISTS)  {\n        outcome = SessionEventCode.PROVISION_OK;\n      } else if (ignore && !provision && (errorSubcode == ErrorSubcode.UNKNOWN_QUEUE_NAME || errorSubcode == ErrorSubcode.UNKNOWN_TOPIC_ENDPOINT_NAME) ) {\n        outcome = SessionEventCode.PROVISION_OK;\n      }\n    }\n\n    const provisionEvent = new ProvisionEvent(outcome,\n        responseString,\n        responseCode,\n        errorSubcode,\n        correlationKey,\n        reason,\n        queueDescriptor,\n        queueProperties);\n    this.sendEvent(provisionEvent);\n  }\n\n  /**\n   * Creates a {@link solace.QueueBrowser} to browse Guaranteed Messages on a specified queue in\n   * this Session.\n   *\n   * Browser characteristics and behavior are defined by properties. The browser properties are\n   * supplied as an object; the pertinent fields are exposed in\n   * {@link solace.QueueBrowserProperties};\n   * other property names are ignored. Any values not supplied are set to default values.\n   *\n   * Delivery restrictions imposed by the queues Access type (exclusive or non-exclusive),\n   * do not apply when browsing messages with a Browser.\n   *\n   * When the queue browser is created, a queue browser object is returned to the caller. This is\n   * the object from which events are emitted, and upon which operations (for example, starting and\n   * stopping the browser) are performed.\n   *\n   * If this session does not support Guaranteed Messaging, this method will throw. The following\n   * must be true in order to create a QueueBrowser:\n   *  * The transport protocol list does not contain any HTTP transport protocols. See\n   *    {@link solace.SessionProperties#transportProtocol} and\n   *    {@link solace.FactoryProfile#cometEnabled}\n   *  * The Solace Messaging Router must support Guaranteed Messaging\n   *\n   * @method solace.Session#createQueueBrowser\n   * @param {solace.QueueBrowserProperties|Object} browserProperties The properties for the\n   *    browser.\n   * @returns {solace.QueueBrowser} The newly created Queue Browser.\n   * @throws {solace.OperationError} when Guaranteed Messaging is not\n   *    supported on this session.\n   * @target browser\n   */\n  /**\n   * Creates a {@link solace.QueueBrowser} to receive Guaranteed Messages in this Session.\n   *\n   * Browser characteristics and behavior are defined by properties. The properties are\n   * supplied as an object; the pertinent fields are exposed in\n   * {@link solace.QueueBrowserProperties};\n   * other property names are ignored.\n   *\n   * Delivery restrictions imposed by the queues Access type (exclusive or non-exclusive),\n   * do not apply when browsing messages with a Browser.\n   *\n   * When the browser is created, a browser object is returned to the caller. This is the object\n   * from which events are emitted, and upon which operations (for example, starting and stopping\n   * the browser) are performed.\n   *\n   * If this session does not support Guaranteed Messaging, this method will throw. The Solace\n   * Messaging Router must support Guaranteed Messaging.\n   *\n   * @method solace.Session#createQueueBrowser\n   * @param {solace.QueueBrowserProperties|Object} browserProperties The properties for the\n   *    browser.\n   * @returns {solace.QueueBrowser} The newly created Queue Browser.\n   * @throws {solace.OperationError} if Guaranteed Messaging is not supported on this session.\n   * @target node\n   */\n  createQueueBrowser(browserProperties) {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session createQueueBrowser called.');\n    if (this._adDisabledReason) {\n      throw new OperationError('Session does not provide QueueBrowser capability',\n                               ErrorSubcode.GM_UNAVAILABLE,\n                               this._adDisabledReason);\n    }\n    if ((browserProperties !== undefined) && (browserProperties !== null)) {\n      const { LOG_DEBUG } = this.logger;\n      LOG_DEBUG('createQueueBrowser - Browser properties:\\n', browserProperties);\n    }\n    return this._sessionFSM.createQueueBrowser(browserProperties);\n  }\n\n  /**\n   * Creates a publishing destination from a queue descriptor.\n   *\n   * A MessageConsumer is the only object that has any business\n   * doing this, but it should not be concerned with the internals\n   * which depend on the session.\n   *\n   * @param {AbstractQueueDescriptor|QueueDescriptor} queueDescriptor The consumer's descriptor\n   * @returns {Destination} A destination that publishes to the descriptor.\n   * @memberof Session\n   * @private\n   */\n  createDestinationFromDescriptor(queueDescriptor) {\n    const {\n      DestinationType,\n      Queue,\n      Topic,\n    } = DestinationLib;\n\n    let destinationType = DestinationType.TOPIC;\n    if (queueDescriptor.type === QueueType.QUEUE) {\n      destinationType = queueDescriptor.durable\n        ? DestinationType.QUEUE\n        : DestinationType.TEMPORARY_QUEUE;\n    }\n\n    const name = queueDescriptor.name || null;\n\n    if (queueDescriptor.durable) {\n      assert(name, 'Durable endpoint with generated name is not a valid configuration');\n      const factoryMethod = queueDescriptor.getType() === QueueType.QUEUE\n        ? Queue.createFromLocalName\n        : Topic.createFromName;\n      return factoryMethod(name);\n    }\n\n    return this.createTemporaryDestination(destinationType, name);\n  }\n\n  /**\n   * Creates a temporary destination.\n   * @param {DestinationType} destinationType Type of destination\n   * @param {String} [name] Name if any\n   * @returns {Destination} Temporary destination\n   * @private\n   */\n  createTemporaryDestination(destinationType, name) {\n    const { LOG_TRACE } = this.logger;\n    const { DestinationFromNetwork, DestinationUtil } = DestinationLib;\n    // TRANSPORT_UP is chosen because this is when the session tells subscribers\n    // that they may begin connecting\n    const vrn = this.getSessionProperties().virtualRouterName;\n    if (!this.isCapable(CapabilityType.TEMPORARY_ENDPOINT) ||\n        vrn === null || vrn === undefined || vrn.length === 0) {\n      throw new OperationError(\n        'Attempt to generate temporary destination or endpoint without suitable session',\n        ErrorSubcode.INVALID_OPERATION);\n    }\n    // Non-durable case; avoid re-prefixing\n    const localName = name && name.startsWith('#P2P')\n      ? name\n      : DestinationUtil.createTemporaryName(destinationType, vrn, name);\n    LOG_TRACE('Generated name:', localName);\n    return DestinationFromNetwork.createDestinationFromName(localName);\n  }\n\n  /**\n   * @param {solace.SessionEvent} sessionEvent The event to send\n   * @private\n   */\n  sendEvent(sessionEvent) {\n    if (!sessionEvent) return;\n    if (this._disposed) return;\n\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE(`Sending event ${sessionEvent}`);\n    this._eventCallbackInfo.sessionEventCBFunction(this,\n                                                   sessionEvent,\n                                                   this._eventCallbackInfo.userObject);\n  }\n\n  /**\n   * Gets a transport session information string.\n   * This string is informative only, and applications should not attempt to parse it.\n   *\n   * @returns {String} A description of the current session's transport.\n   */\n  getTransportInfo() {\n    const { LOG_TRACE } = this.logger;\n    LOG_TRACE('Session getTransportInfo called.');\n    return this._sessionFSM.getTransportInfo();\n  }\n\n  /**\n   * @param {Object} interceptor The transport interceptor to set\n   * @private\n   */\n  injectTransportInterceptor(interceptor) {\n    this._sessionFSM.injectTransportInterceptor(interceptor);\n  }\n\n  /**\n   * @param {solace.SessionOperation} operationEnum the id of the operation\n   * @param {solace.Message} message The message to send\n   * @returns {?String} error message if not allowed; otherwise null\n   * @private\n   */\n  allowOperation(operationEnum, message) {\n    if (!this._sessionFSM) return false;\n    let allow = true;\n    const sessionStateName = this._sessionFSM.getCurrentStateName();\n\n    if (sessionStateName === SessionStateName.DISPOSED) {\n      allow = false;\n    } else if (Check.anything(operationEnum)) {\n      switch (operationEnum) {\n        case SessionOperation.CONNECT:\n          if (sessionStateName !== SessionStateName.NEW &&\n              sessionStateName !== SessionStateName.DISCONNECTED) {\n            allow = false;\n          }\n          break;\n        case SessionOperation.DISCONNECT:\n          if (sessionStateName === SessionStateName.NEW) {\n            allow = false;\n          }\n          break;\n        case SessionOperation.SEND:\n        case SessionOperation.CTRL:\n          allow =\n            ((sessionStateName === SessionStateName.FULLY_CONNECTED) ||\n            (message && (message.getDeliveryMode() !== MessageLib.MessageDeliveryModeType.DIRECT)));\n          break;\n\n        case SessionOperation.QUERY_OPERATION:\n          allow = true;\n          break;\n        default:\n          allow = false;\n      }\n    } else {\n      allow = false;\n    }\n\n    if (allow) {\n      return null;\n    }\n\n    return `Cannot perform operation ${operationEnum} while in state ${sessionStateName}`;\n  }\n\n  /**\n   * @param {smf.ClientCtrlMessage} routerCapabilities The message containing the router caps\n   * @private\n   */\n  updateCapabilities(routerCapabilities) {\n    this._capabilities = routerCapabilities;\n  }\n\n  /**\n   * @param {solace.Message} message The message to send\n   * @private\n   */\n  validateAndSendMessage(message) {\n    // Sanity checks on the message before attempting to send it\n    //  * do we have a destination?\n    const sendDest = message.getDestination();\n    if (Check.nothing(sendDest) || Check.empty(sendDest.getName())) {\n      throw new OperationError('Message must have a valid Destination', ErrorSubcode.TOPIC_MISSING);\n    }\n\n    const senderTimestamp = message.getSenderTimestamp();\n    const noSenderTimestamp = senderTimestamp === null || senderTimestamp === undefined;\n    if (this._sessionProperties.generateSendTimestamps &&\n        (noSenderTimestamp || message.hasAutoSenderTimestamp)) {\n      const now = new Date();\n      message.setSenderTimestamp(now.getTime());\n      message.hasAutoSenderTimestamp = true;\n    }\n    const sequenceNumber = message.getSequenceNumber();\n    const noSequenceNumber = sequenceNumber === null || sequenceNumber === undefined;\n    if (this._sessionProperties.generateSequenceNumber &&\n        (noSequenceNumber || message.hasAutoSequenceNumber)) {\n      message.setSequenceNumber(this._seqNum++);\n      message.hasAutoSequenceNumber = true;\n    }\n    const senderId = message.getSenderId();\n    const noSenderId = senderId === null || senderId === undefined;\n    if (this._sessionProperties.includeSenderId && noSenderId) {\n      message.setSenderId(this._sessionProperties.clientName);\n    }\n\n    // Allow the FSM and its delegates to prepare and send the message\n    // This may mutate the delegates, so we need to validate first\n    // this may throw if the message is guaranteed and the window is closed.\n    // If this returns true, the message can be sent to the transport\n    // (always true for direct messages whne there is a transport). If\n    // this returns false, the message has been prepared and queued for\n    // transport but may not be sent now.\n    this._sessionFSM.prepareAndSendMessage(message);\n  }\n\n  /**\n   * @param {String} correlationId The internal correlation ID for the message\n   * @param {function(...[*])} reqFailedCb The callback on request failure\n   * @param {Number} reqTimeout The request timeout in ms\n   * @param {function(*)} replyRecvdCb The callback on reply received\n   * @param {Object} userObject A user object to pass back to the callback (legacy)\n   * @private\n   */\n  enqueueOutstandingDataReq(correlationId, reqFailedCb, reqTimeout, replyRecvdCb, userObject) {\n    if (Check.none(correlationId)) {\n      return;\n    }\n    const { LOG_TRACE, LOG_ERROR } = this.logger;\n\n    // empty string is valid\n    LOG_TRACE(`Enqueue outstanding data request correlationId=${correlationId}`);\n    const timer = setTimeout(() => {\n      this._sessionFSM.incStat(StatType.TX_REQUEST_TIMEOUT);\n                  // remove request from queue\n      try {\n        const result = delete this._outstandingDataReqs[correlationId];\n        if (!result) {\n          LOG_ERROR(`Cannot delete data request ${correlationId}`);\n        }\n      } catch (e) {\n        LOG_ERROR(`Cannot delete data request ${correlationId}`, e);\n      }\n\n      if (Check.anything(reqFailedCb)) {\n        const requestEvent = SessionEvent.build(RequestEventCode.REQUEST_TIMEOUT,\n                                                'Request timeout',\n                                                correlationId);\n\n        reqFailedCb(this, requestEvent, userObject);\n      }\n    }, reqTimeout || this._sessionProperties.readTimeoutInMsecs);\n\n    const outstandingReq = new OutstandingDataRequest(correlationId,\n                                                      timer,\n                                                      replyRecvdCb,\n                                                      reqFailedCb,\n                                                      userObject);\n    this._outstandingDataReqs[correlationId] = outstandingReq;\n  }\n\n  /**\n   * @param {String} correlationId The internal ID of the request to cancel\n   * @returns {OutstandingDataRequest} The request that was cancelled, if any\n   * @private\n   */\n  cancelOutstandingDataReq(correlationId) {\n    const { LOG_TRACE, LOG_ERROR } = this.logger;\n\n    if (Check.none(correlationId) || !this._outstandingDataReqs) {\n      return null;\n    }\n\n    const req = this._outstandingDataReqs[correlationId];\n    if (req === undefined || req === null) {\n      return null;\n    }\n    LOG_TRACE(`Cancel outstanding data request correlationId=${correlationId}`);\n    if (req.timer) {\n      clearTimeout(req.timer);\n      req.timer = null;\n    }\n\n    try {\n      const result = delete this._outstandingDataReqs[correlationId];\n      if (!result) {\n        LOG_ERROR(`Cannot delete data request ${correlationId}`);\n      }\n    } catch (e) {\n      LOG_ERROR(`Cannot delete data request ${correlationId}`, e);\n    }\n    return req;\n  }\n\n  /**\n   * @private\n   */\n  cleanupSession() {\n    const { LOG_TRACE } = this.logger;\n    if (this._outstandingDataReqs) {\n      LOG_TRACE('Cancel all outstanding data requests');\n      Object.keys(this._outstandingDataReqs).forEach((key) => {\n        const dataReq = this.cancelOutstandingDataReq(key);\n        if (dataReq && dataReq.reqFailedCBFunction) {\n          const requestEvent = SessionEvent.build(RequestEventCode.REQUEST_ABORTED,\n                                                  'Request aborted',\n                                                  key);\n          dataReq.reqFailedCBFunction(this, requestEvent, dataReq.userObject);\n        }\n      });\n    }\n  }\n\n  /**\n   * @param {Message} dataMessageIn The received direct TRmsg\n   * @private\n   */\n  handleDataMessage(dataMessageIn) {\n    const { LOG_TRACE, LOG_INFO } = this.logger;\n    const dataMessage = dataMessageIn;\n    if (this._sessionProperties.generateReceiveTimestamps) {\n      const now = new Date();\n      dataMessage._receiverTimestamp = now.getTime();\n    }\n\n    if (dataMessage.isReplyMessage()) {\n      const correlationId = dataMessage.getCorrelationId();\n      if (Check.anything(correlationId)) {\n        const dataReq = this.cancelOutstandingDataReq(correlationId);\n        if (dataReq !== null) {\n          this._sessionFSM.incStat(StatType.RX_REPLY_MSG_RECVED);\n          LOG_TRACE('Calling application replyReceivedCallback');\n          dataReq.replyReceivedCBFunction(this, dataMessage, dataReq.userObject);\n          LOG_TRACE('application replyReceivedCallback returns');\n          return;\n        }\n\n        if (correlationId.startsWith(SOLCLIENT_REQUEST_PREFIX)) {\n            // if a reply message doesn't have outstanding request and correlationId\n            // starts with #REQ it is assumed to be a delayed reply and has to be discarded\n          LOG_INFO('DROP: Discard reply message due to missing outstanding request');\n          this._sessionFSM.incStat(StatType.RX_REPLY_MSG_DISCARD);\n          return;\n        }\n\n        if (correlationId.startsWith(CACHE_REQUEST_PREFIX) &&\n              !(CacheSession && this._messageCallbackInfo.userObject instanceof CacheSession)) {\n          // If it's a cache message, only pass it along if the listener is a cache message\n          // listener. The listener may drop it and increment the DISCARD stat if no\n          // cache session recognizes the reply.\n          LOG_INFO('DROP: Discard cache reply due to no cache session active');\n          this._sessionFSM.incStat(StatType.RX_REPLY_MSG_DISCARD);\n          return;\n        }\n      }\n    }\n\n    // notify client message callback\n    LOG_TRACE('Calling application messageCallback');\n    this._messageCallbackInfo.messageRxCBFunction(this,\n                                                  dataMessage,\n                                                  this._messageCallbackInfo.userObject);\n    LOG_TRACE('application messageCallback returns');\n  }\n\n  /**\n   * Callback function for subscribe/unsubscribe response\n   * @param {solace.SMPMessage} smpMsg The SMP response to the subscription request\n   * @param {CorrelatedRequest} request The originating request object\n   * @param {Boolean} requestConfirm Whether the user asked for confirmation on the request\n   * @private\n   */\n  handleSubscriptionUpdateResponse(smpMsg, request, requestConfirm) {\n    const response = smpMsg.getResponse();\n    const {\n      responseCode,\n      responseString,\n     } = response;\n    const { correlationKey } = request;\n    // If we don't request confirmation, the router doesn't send one for the OK case,\n    // so we don't need to guard for that.\n    // The router always replies on SUBSCRIPTION_ERROR, so we track whether confirmation\n    // was requested and suppress the reply in certain cases.\n    if (responseCode === 200) {\n      // notify client\n      const sessionEvent = SessionEvent.build(SessionEventCode.SUBSCRIPTION_OK,\n                                              responseString,\n                                              responseCode,\n                                              0,\n                                              correlationKey,\n                                              null);\n      this.sendEvent(sessionEvent);\n    } else {\n      const subscriptionStr = StringUtils.stripNullTerminate(smpMsg.encodedUtf8Subscription);\n      this._sessionFSM.handleSubscriptionUpdateError(responseCode,\n                                                     responseString,\n                                                     subscriptionStr,\n                                                     correlationKey,\n                                                     requestConfirm);\n    }\n  }\n\n\n  /**\n   * Callback function for queue subscribe/unsubscribe response\n   * @param {solace.SMPMessage} smpMsg The SMP response to the subscription request\n   * @param {CorrelatedRequest} request The originating request object\n   * @param {function} callback The callback on response\n   * @private\n   */\n  handleQueueSubscriptionUpdateResponse(smpMsg, request, callback) {\n    const { LOG_TRACE } = this.logger;\n\n    if (!smpMsg) { // reuest timed out.\n      LOG_TRACE('handleQueueSubscriptionUpdateResponse called on timeout.');\n      callback(false, ErrorSubcode.TIMEOUT, 0, 'Timeout');\n      return;\n    }\n\n    const response = smpMsg.getResponse();\n    const {\n      responseCode,\n      responseString,\n     } = response;\n    const errorSubcode = ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode, responseString);\n    LOG_TRACE('handleQueueSubscriptionUpdateResponse called.', smpMsg);\n    if (responseCode === 200 ||\n      (errorSubcode === ErrorSubcode.SUBSCRIPTION_ALREADY_PRESENT) ||\n      (errorSubcode === ErrorSubcode.SUBSCRIPTION_NOT_FOUND)\n    ) {\n      callback(true, 0, responseCode, responseString);\n    } else {\n      callback(false, errorSubcode, responseCode, responseString);\n    }\n  }\n\n  /**\n   * Callback function for DTE unsubscribe response\n   *\n   * @param {solace.AdMessage} adCtrlMessage The Guaranteed Message Protocol\n   *                           control response to the DTE unsub message\n   * @param {CorrelatedRequest} request The originating request object\n   * @private\n   */\n  handleDTEUnsubscribeResponse(adCtrlMessage, request) {\n    const response = adCtrlMessage.getResponse();\n    const {\n      responseCode,\n      responseString,\n    } = response;\n    const { correlationKey } = request;\n    const eventCode = responseCode === 200\n      ? SessionEventCode.UNSUBSCRIBE_TE_TOPIC_OK\n      : SessionEventCode.UNSUBSCRIBE_TE_TOPIC_ERROR;\n    const subcode = responseCode === 200\n      ? 0\n      : ErrorResponseSubcodeMapper.getADErrorSubcode(responseCode,\n                                                     responseString);\n    this.sendEvent(SessionEvent.build(eventCode,\n                                      responseString,\n                                      responseCode,\n                                      subcode,\n                                      correlationKey\n    ));\n  }\n\n  /**\n   * @param {Number} respCode The returned response code\n   * @param {String} respText The returned response text\n   * @param {String} subscriptionStr The requested topic name\n   * @param {*} correlationKey The user-supplied correlation key\n   * @param {Boolean} requestConfirm Whether confirmation was requested on subscription\n   * @private\n   */\n  handleSubscriptionUpdateError(respCode,\n                                respText,\n                                subscriptionStr,\n                                correlationKey,\n                                requestConfirm) {\n    const errorSubcode = ErrorResponseSubcodeMapper.getErrorSubcode(respCode, respText);\n    if ((errorSubcode === ErrorSubcode.SUBSCRIPTION_ALREADY_PRESENT &&\n         this._sessionProperties.ignoreDuplicateSubscriptionError) ||\n        (errorSubcode === ErrorSubcode.SUBSCRIPTION_NOT_FOUND &&\n          this._sessionProperties.ignoreSubscriptionNotFoundError)) {\n      if (requestConfirm) {\n        // notify client\n        const sessionEvent = SessionEvent.build(\n          SessionEventCode.SUBSCRIPTION_OK,\n          respText,\n          respCode,\n          0,\n          correlationKey,\n          null\n        );\n        this.sendEvent(sessionEvent);\n      }\n    } else {\n      // notify client\n      const sessionEvent = SessionEvent.build(\n        SessionEventCode.SUBSCRIPTION_ERROR,\n        respText,\n        respCode,\n        errorSubcode,\n        correlationKey,\n        `Topic: ${subscriptionStr}`\n      );\n      this.sendEvent(sessionEvent);\n    }\n  }\n\n  /**\n   * @returns {SessionEventCBInfo} The session's event callback\n   * @private\n   */\n  getEventCBInfo() {\n    return this._eventCallbackInfo;\n  }\n\n  /**\n   * @param {SessionEventCBInfo} eventCBInfo The new event callback to set\n   * @private\n   */\n  setEventCBInfo(eventCBInfo) {\n    this._eventCallbackInfo = eventCBInfo;\n  }\n\n  /**\n   * @returns {MessageRxCBInfo} The session's message callback\n   * @private\n   */\n  getMessageCBInfo() {\n    return this._messageCallbackInfo;\n  }\n\n  /**\n   * @param {MessageRxCBInfo} messageCBInfo The new message callback to set\n   * @private\n   */\n  setMessageCBInfo(messageCBInfo) {\n    this._messageCallbackInfo = messageCBInfo;\n  }\n\n  /**\n   * @returns {String} The next correlation tag for this session.\n   * @private\n   */\n  getCorrelationTag() {\n    return this._sessionFSM.getCorrelationTag();\n  }\n\n  /**\n   * Wraps a SessionEventCBInfo or a bare function with an event emitting function.\n   * @param {SessionEventCBInfo|function|undefined} eventCallback The callback to wrap\n   * @returns {SessionEventCBInfo} A SessionEventCBInfo object that handles all callbacks.\n   * @private\n   */\n  wrapEventCallback(eventCallback) {\n    const { LOG_WARN } = this.logger;\n    const eventCallbackInfo = (() => {\n      if (!eventCallback) return null;\n      if (eventCallback.sessionEventCBFunction) return eventCallback;\n      return new SessionEventCBInfo(eventCallback);\n    })();\n    return new SessionEventCBInfo((session, sessionEvent, obj, rfu) => {\n      const { sessionEventCode } = sessionEvent;\n      if (eventCallbackInfo) {\n        try {\n          eventCallbackInfo.sessionEventCBFunction(session, sessionEvent, obj, rfu);\n        } catch (ex) {\n          const error = Object.assign(new OperationError(\n            `Unhandled error in SessionEventRxCBInfo callback on sessionEventCode ${\n              SessionEventCode.describe(sessionEventCode)}`,\n              ErrorSubcode.CALLBACK_ERROR,\n              `On event: ${[sessionEventCode, sessionEvent, obj, rfu]} ${ex}`\n            ), {\n              stack: ex.stack,\n              info:  {\n                event: {\n                  name:          sessionEventCode,\n                  formattedName: `SessionEventCode.${SessionEventCode.describe(sessionEventCode)}`,\n                  args:          [sessionEvent, obj, rfu],\n                },\n                error: ex,\n              },\n            }\n          );\n          LOG_WARN(error.toString(), error.info);\n        }\n      }\n      this.emit(sessionEventCode, sessionEvent);\n    });\n  }\n\n  /**\n   * Wraps a CBInfo or a bare function with an event emitting function.\n   * @param {MessageCBInfo|function|undefined} messageCallback The callback to wrap\n   * @returns {MessageCBInfo} A MessageCBInfo object that handles all callbacks.\n   * @private\n   */\n  wrapMessageCallback(messageCallback) {\n    const { LOG_WARN } = this.logger;\n\n    const messageCallbackInfo = (() => {\n      if (!messageCallback) return null;\n      if (messageCallback.messageRxCBFunction) return messageCallback;\n      return new MessageRxCBInfo(messageCallback);\n    })();\n\n    const formattedName = `SessionEventCode.${SessionEventCode.describe(SessionEventCode.MESSAGE)}`;\n    const buildErrorEvent = (ex, message, object) => Object.assign(\n      new OperationError(`Unhandled error in MessageRxCBInfo callback/handler for ${formattedName}`,\n                         ErrorSubcode.CALLBACK_ERROR),\n      {\n        stack: ex.stack,\n        info:  {\n          event: {\n            name: SessionEventCode.MESSAGE,\n            formattedName,\n            args: [message, object],\n          },\n          error: ex,\n        },\n      });\n\n    return new MessageRxCBInfo((session, message, object) => {\n      if (messageCallbackInfo) {\n        try {\n          messageCallbackInfo.messageRxCBFunction(session, message, object);\n        } catch (ex) {\n          const error = buildErrorEvent(ex, message, object).toString();\n          LOG_WARN(error, error.info, ex);\n        }\n      }\n      try {\n        this.emitDirect(message);\n      } catch (ex) {\n        this.emit('error', buildErrorEvent(ex, message, object));\n      }\n    });\n  }\n\n  /**\n   * @readonly\n   * @private\n   */\n  get adLocallyDisabled() {\n    return !!this._adDisabledReason;\n  }\n\n  /**\n   * @readonly\n   * @private\n   */\n  get canConnectConsumer() {\n    if (this.adLocallyDisabled) return false;\n    if (this._capabilities) {\n      return this.isCapable(CapabilityType.GUARANTEED_MESSAGE_CONSUME);\n    }\n    return undefined;\n  }\n\n  /**\n   * @readonly\n   * @private\n   */\n  get canConnectPublisher() {\n    if (this.adLocallyDisabled) return false;\n    if (this._capabilities) {\n      return this.isCapable(CapabilityType.GUARANTEED_MESSAGE_PUBLISH);\n    }\n    return undefined;\n  }\n\n  /**\n   * @readonly\n   * @private\n   */\n  get disposed() {\n    return this._disposed;\n  }\n\n  [util_inspect_custom]() {\n    return {\n      'sessionId': this._sessionFSM && this._sessionFSM.sessionIdHex || '(N/A)',\n      'transport': this.getTransportInfo(),\n      'state':     SessionState.describe(this.getSessionState()),\n    };\n  }\n\n  toString() {\n    return util_inspect(this);\n  }\n}\n\nmodule.exports.Session = Session;\n","const { TransportProtocol } = require('../transport-protocols');\nconst { TSHState } = require('../tsh-state');\nconst { WebTransportCapabilities } = require('./web-transport-capabilities');\n\n/**\n * @classdesc\n * HTTP Binary Streaming transport\n * @memberof solace\n * @private\n */\nclass StateStreamingAndBinary extends TSHState {\n  /**\n   * @constructor\n   * @extends TSHState\n   * @param {Boolean} useSsl True if SSL should be used\n   * @param {Function} exitCb Callback to notify on exit\n   * @param {?TSHState} nextState Downgrade target\n   */\n  constructor(useSsl, exitCb, nextState) {\n    super(useSsl, TransportProtocol.HTTP_BINARY_STREAMING, exitCb, nextState);\n  }\n\n  validateLegal() { // eslint-disable-line class-methods-use-this\n    return WebTransportCapabilities.streaming() && WebTransportCapabilities.xhrBinary();\n  }\n}\n\nmodule.exports.StateStreamingAndBinary = StateStreamingAndBinary;\n","const { Destination } = require('./lib/destination');\nconst { DestinationFromNetwork } = require('./lib/destination-from-network');\nconst { DestinationType } = require('./lib/destination-type');\nconst { DestinationUtil } = require('./lib/destination-util');\nconst { Parameter } = require('solclient-validate');\nconst { Queue } = require('./lib/queue');\nconst { SolclientFactory } = require('solclient-factory');\nconst { Topic } = require('./lib/topic');\n\n\n/**\n * Creates a topic {@link solace.Destination} instance. When the returned Destination is set as\n * the destination of a message via {@link solace.Message#setDestination}, the message will be\n * delivered to direct subscribers or topic endpoints subscribed to the given topic.\n *\n * @param {String} topicName The topic string for the new topic.\n * @returns {solace.Destination} The newly created topic destination.\n * @method\n * @name solace.SolclientFactory.createTopicDestination\n */\nSolclientFactory.createTopicDestination = SolclientFactory.createFactory((topicName) => {\n  Parameter.isString('topicName', topicName);\n  return Topic.createFromName(topicName);\n});\n/* @deprecated @*/\nSolclientFactory.createTopic = SolclientFactory.createFactory(topicName => new Topic(topicName));\n\n/**\n * Creates a durable queue {@link solace.Destination} instance. When the returned Destination is\n * set as the destination of a message via {@link solace.Message#setDestination}, the message will\n * be delivered to the Guaranteed Message queue on the Solace Message Router of the same name.\n *\n * @since 10.0.0\n * @param {String} queueName The queueName of the queue\n * @returns {solace.Destination} The newly created queue destination.\n * @method\n * @name solace.SolclientFactory.createDurableQueueDestination\n */\nSolclientFactory.createDurableQueueDestination = SolclientFactory.createFactory((queueName) => {\n  Parameter.isString('queueName', queueName);\n  return Queue.createFromLocalName(queueName);\n});\n\nmodule.exports.Destination = Destination;\nmodule.exports.DestinationFromNetwork = DestinationFromNetwork;\nmodule.exports.DestinationType = DestinationType;\nmodule.exports.DestinationUtil = DestinationUtil;\nmodule.exports.Queue = Queue;\nmodule.exports.Topic = Topic;\n","const { AbstractQueueDescriptor } = require('./lib/abstract-queue-descriptor');\nconst { QueueAccessType } = require('./lib/queue-access-types');\nconst { QueueDescriptor } = require('./lib/queue-descriptor');\nconst { QueueDescriptorValidator } = require('./lib/queue-descriptor-validator');\nconst { QueueDiscardBehavior } = require('./lib/queue-discard-behaviors');\nconst { QueuePermissions } = require('./lib/queue-permissions');\nconst { QueueProperties } = require('./lib/queue-properties');\nconst { QueuePropertiesValidator } = require('./lib/queue-properties-validator');\nconst { QueueType } = require('./lib/queue-types');\nconst { EndpointNameComplaint, explainInvalidEndpointName } = require('./lib/endpoint-name-complaint');\n\nmodule.exports.AbstractQueueDescriptor = AbstractQueueDescriptor;\nmodule.exports.QueueAccessType = QueueAccessType;\nmodule.exports.QueueDescriptor = QueueDescriptor;\nmodule.exports.QueueDescriptorValidator = QueueDescriptorValidator;\nmodule.exports.QueueDiscardBehavior = QueueDiscardBehavior;\nmodule.exports.QueuePermissions = QueuePermissions;\nmodule.exports.QueueProperties = QueueProperties;\nmodule.exports.QueuePropertiesValidator = QueuePropertiesValidator;\nmodule.exports.QueueType = QueueType;\nmodule.exports.EndpointNameComplaint = EndpointNameComplaint;\nmodule.exports.explainInvalidEndpointName = explainInvalidEndpointName;\n\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFClientCtrlMessageType = {\n  LOGIN:  0x00,\n  UPDATE: 0x01,\n};\n\nmodule.exports.SMFClientCtrlMessageType = Enum.new(SMFClientCtrlMessageType);\n","const NodeSslConstants = require('constants');\nconst PublisherLib = require('solclient-message-publisher');\nconst { APIProperties } = require('solclient-util');\nconst { AuthenticationScheme } = require('./authentication-schemes');\nconst { Check } = require('solclient-validate');\nconst { LOG_WARN } = require('solclient-log');\nconst { SslDowngrade } = require('./ssl-downgrades');\n\nfunction makeDefaults() {\n  // Defer binding. Publisher constructor may rely on profile.\n  const { MessagePublisherProperties } = PublisherLib;\n  return {\n    _vpnNameInUse:        '',\n    _virtualRouterName:   '',\n    _p2pInboxInUse:       '',\n    _p2pInboxBase:        '',\n    _userIdentification:  '',\n    _tpProtocolInUse:     null,\n    _tpContentType:       'text/plain',\n    _publisherProperties: new MessagePublisherProperties(),\n    _payloadCompressionLevel:   0,\n  };\n}\n\nconst DEFAULT_CIPHER_SUITES = BUILD_ENV.TARGET_NODE ? [\n  'ECDHE-RSA-AES256-GCM-SHA384',\n  'ECDHE-RSA-AES256-SHA384',\n  'ECDHE-RSA-AES256-SHA',\n  'AES256-GCM-SHA384',\n  'AES256-SHA256',\n  'AES256-SHA',\n  'ECDHE-RSA-DES-CBC3-SHA',\n  'DES-CBC3-SHA',\n  'ECDHE-RSA-AES128-GCM-SHA256',\n  'ECDHE-RSA-AES128-SHA256',\n  'ECDHE-RSA-AES128-SHA',\n  'AES128-GCM-SHA256',\n  'AES128-SHA256',\n  'AES128-SHA',\n].join(',') : null;\n\nconst SUPPORTED_CIPHER_SUITES = BUILD_ENV.TARGET_NODE ? [\n  'AES128-GCM-SHA256',\n  'AES128-SHA',\n  'AES128-SHA256',\n  'AES256-GCM-SHA384',\n  'AES256-SHA',\n  'AES256-SHA256',\n  'DES-CBC3-SHA',\n  'ECDHE-RSA-AES128-GCM-SHA256',\n  'ECDHE-RSA-AES128-SHA',\n  'ECDHE-RSA-AES128-SHA256',\n  'ECDHE-RSA-AES256-GCM-SHA384',\n  'ECDHE-RSA-AES256-SHA',\n  'ECDHE-RSA-AES256-SHA384',\n  'ECDHE-RSA-DES-CBC3-SHA',\n] : null;\n\n\n// This is the capitalization nodeJS likes (TLS module socket options)\n// We normalize to this at the point of use, but allow any case in the properties.\nconst SUPPORTED_SSL_PROTOCOLS = BUILD_ENV.TARGET_NODE\n? [\n  'TLSv1',\n  'TLSv1.1',\n  'TLSv1.2',\n  'TLSv1.3',\n]\n: null;\n\n/**\n * @lends SessionProperties\n *\n */\nclass SessionPropertiesBrowser extends APIProperties {\n  /**\n   * This property is deprecated.  It is recommended to use\n   * {@link solace.SessionProperties#webTransportProtocolList} instead, which explicitly lists all\n   * web transport protocols that may be used when establishing a session.\n   *\n   * This property specifies the web transport protocol that will initially be selected by the\n   * session for its connection attempt. If this protocol fails, the session will attempt other\n   * protocols in accordance with its transport protocol connect policy.\n   *\n   * If {@link solace.FactoryProfile#cometEnabled} is `true`, the selection of\n   * any {@link solace.TransportProtocol} will result in the inclusion of\n   * fallback protocols in {@link solace.SessionProperties#webTransportProtocolList}.\n   * This makes the session incompatible with Guaranteed Messaging.\n   *\n   * To create a Guaranteed Messaging compatible session with\n   * {@link solace.FactoryProfile#cometEnabled} set to `true`, ensure the session's\n   * {@link solace.SessionProperties#webTransportProtocoList} is set to only\n   * {@link solace.TransportProtocol.WS_BINARY}.\n   *\n   *  * Mutually exclusive to property webTransportProtocolList\n   *\n   * @name solace.SessionProperties#transportProtocol\n   * @type {solace.TransportProtocol}\n   * @default null\n   * @deprecated\n   * @target browser\n   */\n  get transportProtocol() {\n    return Check.nothing(this._tpProtocol) ? null : this._tpProtocol;\n  }\n  set transportProtocol(newValue) {\n    this._tpProtocol = newValue;\n  }\n\n\n  /**\n   * @name solace.SessionProperties#transportDowngradeTimeoutInMsecs\n   * @type {Number}\n   * @description The timeout, in milliseconds, that must elapse before the session will abandon a\n   * connection attempt with the current transport protocol if no response is received, and begin\n   * a new connection attempt with a downgraded transport protocol. If no remaining downgrades\n   * exist, the session will continue the current connection attempt until the connection timeout\n   * expires. Note that the WS_BINARY transport will also attempt a downgrade if the underlying\n   * WebSocket fails to connect before this period elapses.\n   *  * The valid range is > 0.\n   * @default 3000\n   * @target browser\n   */\n  get transportDowngradeTimeoutInMsecs() {\n    return Check.nothing(this._tpDowngradeTimeout) ? 3000 : this._tpDowngradeTimeout;\n  }\n  set transportDowngradeTimeoutInMsecs(newValue) {\n    this._tpDowngradeTimeout = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#webTransportProtocolList\n   * @type {Array.<solace.TransportProtocol>}\n   * @description The user provided web transport protocol list indicating the initial protocol\n   * to be used by the session for its connection attempt, and the protocols to try\n   * subsequently if the attempt fails.\n   *  * Mutually exclusive to property transportProtocol\n   * @default null\n   * @target browser\n   */\n  get webTransportProtocolList() {\n    return Check.nothing(this._transportProtocolList)\n             ? null\n             : this._transportProtocolList;\n  }\n  set webTransportProtocolList(newValue) {\n    this._transportProtocolList = newValue;\n  }\n\n  /**\n   * @private\n   * @name SessionProperties#bufferedAmountQueryIntervalInMsecs\n   * @type {Number}\n   * @description When WebSocket transport protocol is used, SolClient uses this property\n   * and {@link solace.SessionProperties.maxWebPayload} to throttle the publishing rate in order to\n   * avoid network saturation.\n   *  * The valid range is >=4.\n   * @default 100\n   */\n  get bufferedAmountQueryIntervalInMsecs() {\n    return Check.nothing(this._bufferedAmountQueryInterval)\n    ? 100\n    : this._bufferedAmountQueryInterval;\n  }\n  set bufferedAmountQueryIntervalInMsecs(newValue) {\n    this._bufferedAmountQueryInterval = newValue;\n  }\n\n\n  /**\n   *\n   * @name solace.SessionProperties#transportProtocolInUse\n   * @type {String}\n   * @description This property is deprecated.\n   * Use {@link solace.SessionProperties#webTransportProtocolInUse} instead.\n   * @default null\n   * @readonly\n   * @target browser\n   * @deprecated\n   */\n  get transportProtocolInUse() {\n    return this._tpProtocolInUse || null;\n  }\n  _setTransportProtocolInUse(value) {\n    this._tpProtocolInUse = value;\n  }\n\n  /**\n   *\n   * @name solace.SessionProperties#webTransportProtocolInUse\n   * @type {String}\n   * @description A read-only property about the web transport protocol that is currently being\n   * used by the session for its current connection or connection attempt. To determine which\n   * web transport protocol was successfully used by the API, interrogate this property after the\n   * session event UP_NOTICE is dispatched.\n   * @default null\n   * @readonly\n   * @target browser\n   */\n  get webTransportProtocolInUse() {\n    return this._tpProtocolInUse || null;\n  }\n  _setWebTransportProtocolInUse(value) {\n    this._tpProtocolInUse = value;\n  }\n\n  /**\n   *\n   * @name solace.SessionProperties#transportContentType\n   * @type {String}\n   * @description Transport content-type override for HTTP transports\n   * @default 'text/plain'\n   * @internal\n   */\n  get transportContentType() {\n    return this._tpContentType || 'text/plain';\n  }\n  set transportContentType(newValue) {\n    this._tpContentType = newValue;\n  }\n\n  _lendsInspect() {\n    return {\n      'bufferedAmountQueryIntervalInMsecs': this.bufferedAmountQueryIntervalInMsecs,\n      'transportContentType':               this.transportContentType,\n      'transportDowngradeTimeoutInMsecs':   this.transportDowngradeTimeoutInMsecs,\n      'transportProtocol':                  this.transportProtocol,\n      'transportProtocolInUse':             this.transportProtocolInUse,\n      'webTransportProtocolList':           this.webTransportProtocolList,\n    };\n  }\n}\n\nclass SessionPropertiesNode extends APIProperties {\n  /**\n   * @internal\n   */\n  get transportProtocol() {\n    return this._tpProtocol;\n  }\n  set transportProtocol(value) {\n    this._tpProtocol = value;\n  }\n\n  /**\n   * @internal\n   */\n  get webTransportProtocolList() {\n    return this._transportProtocolList;\n  }\n  set webTransportProtocolList(value) {\n    this._transportProtocolList = value;\n  }\n\n  /**\n   * @internal\n   */\n  get transportDowngradeTimeoutInMsecs() {\n    return this._tpDowngradeTimeout || 86400000; // All day\n  }\n  set transportDowngradeTimeoutInMsecs(value) {\n    this._tpDowngradeTimeout = value;\n  }\n\n  /**\n   * @internal\n   * @deprecated\n   */\n  get transportProtocolInUse() {\n    return this._tpProtocolInUse;\n  }\n  _setTransportProtocolInUse(value) {\n    this._tpProtocolInUse = value;\n  }\n\n  /**\n   * @internal\n   */\n  get webTransportProtocolInUse() {\n    return this._tpProtocolInUse;\n  }\n  _setWebTransportProtocolInUse(value) {\n    this._tpProtocolInUse = value;\n  }\n\n  /**\n   * @internal\n   */\n  get transportContentType() {\n    return this._tpContentType;\n  }\n  set transportContentType(value) {\n    this._tpContentType = value;\n  }\n\n  // TLS connection options\n\n  /**\n   * @name solace.SessionProperties#sslExcludedProtocols\n   * @type {Array.<String>}\n   * @description Deprecated, use {@link solace.SessionProperties#tlsMinProtocol} and {@link solace.SessionProperties#tlsMaxProtocol} instead.\n   * @default null\n   * @target node\n   * @deprecated\n   */\n  get sslExcludedProtocols() {\n    return Check.nothing(this._sslExcludedProtocols)\n      ? null\n      : this._sslExcludedProtocols;\n  }\n  set sslExcludedProtocols(newValue) {\n    this._sslExcludedProtocols = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#tlsMinProtocol\n   * @type {String}\n   * @description The oldest TLS version to accept when connecting to the broker.\n   * Allowed values are: TLSv1.1, TLSv1.2, TLSv1.3\n   * @default \"TLSv1.2\"\n   * @target node\n   */\n  get tlsMinProtocol() {\n    return Check.nothing(this._tlsMinProtocol) ? '' : this._tlsMinProtocol;\n  }\n  set tlsMinProtocol(newValue) {\n    this._tlsMinProtocol = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#tlsMaxProtocol\n   * @type {String}\n   * @description The newest TLS version to negtiate when connecting to the broker.\n   * Allowed values are: TLSv1.1, TLSv1.2, TLSv1.3\n   * @default null\n   * @target node\n   */\n  get tlsMaxProtocol() {\n    return Check.nothing(this._tlsMaxProtocol) ? '' : this._tlsMaxProtocol;\n  }\n  set tlsMaxProtocol(newValue) {\n    this._tlsMaxProtocol = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslCipherSuites\n   * @type {String}\n   * @description A comma separated list of cipher suites in order of preference used for TLS\n   * connections using TLSv1.2 or older. Ignored when TLSv1.3 is negotiated.\n   *  * Allowed values:\n   *     * AES128-GCM-SHA256\n   *     * AES128-SHA\n   *     * AES128-SHA256\n   *     * AES256-GCM-SHA384\n   *     * AES256-SHA\n   *     * AES256-SHA256\n   *     * DES-CBC3-SHA\n   *     * ECDHE-RSA-AES128-GCM-SHA256\n   *     * ECDHE-RSA-AES128-SHA\n   *     * ECDHE-RSA-AES128-SHA256\n   *     * ECDHE-RSA-AES256-GCM-SHA384\n   *     * ECDHE-RSA-AES256-SHA\n   *     * ECDHE-RSA-AES256-SHA384\n   *     * ECDHE-RSA-DES-CBC3-SHA\n   *     * RC4-SHA\n   *     * RC4-MD5\n   * @default {@link solace.SessionProperties.DEFAULT_CIPHER_SUITES}\n   * @target node\n   */\n  get sslCipherSuites() {\n    return Check.nothing(this._sslCipherSuites)\n      ? DEFAULT_CIPHER_SUITES\n      : this._sslCipherSuites;\n  }\n  set sslCipherSuites(newValue) {\n    this._sslCipherSuites = newValue;\n  }\n\n  /**\n   *\n   * @name solace.SessionProperties#sslValidateCertificate\n   * @type {Boolean}\n   * @description Whether the server certificate shall be verified against the list of\n   * certificates in the trust stores. If set to false, all certificate validation is disabled,\n   * including date, hostname and common name validation.\n   * @default true\n   * @target node\n   */\n  get sslValidateCertificate() {\n    // if the value is undefined, then use environment variable\n    if (this._sslValidateCert === undefined) return (process.env.NODE_TLS_REJECT_UNAUTHORIZED !== '0');\n    if (this._sslValidateCert === null) return true;\n    return this._sslValidateCert;\n  }\n  set sslValidateCertificate(newValue) {\n    this._sslValidateCert = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslTrustStores\n   * @type {Array.<String>}\n   * @description An array of file names of trusted certificates in PEM format.\n   * If not set, and {@link solace.SessionProperties#sslValidateCertificate} is set to true,\n   * the server certificate will be validated against well known \"root\" CAs.\n   *    * Mutually exclusive to sslPfx property when\n   *      {@link solace.SessionProperties#sslValidateCertificate} is set\n   * @default null\n   * @target node\n   */\n  get sslTrustStores() {\n    return Check.nothing(this._sslTrustStores)\n      ? null\n      : this._sslTrustStores;\n  }\n  set sslTrustStores(newValue) {\n    this._sslTrustStores = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslTrustedCommonNameList\n   * @type {Array.<String>}\n   * @description An array of acceptable common names for matching with the server certificate.\n   * If set to a non-empty array, the API will override the default hostname validation logic\n   * provided by Node.js with its own implemenation; if set to empty array, no hostname\n   * validation will be performed.\n   *    * Only relevant when {@link solace.SessionProperties#sslValidateCertificate} is set\n   *      to true\n   *    * Note that leading and trailing whitespaces are considered to be part of the common\n   *      names and are not ignored\n   * @default null\n   * @target node\n   */\n  get sslTrustedCommonNameList() {\n    return Check.nothing(this._sslTrustedCNList)\n      ? null\n      : this._sslTrustedCNList;\n  }\n  set sslTrustedCommonNameList(newValue) {\n    this._sslTrustedCNList = newValue;\n  }\n\n  // Client certificates related\n\n  /**\n   * @name solace.SessionProperties#sslPfx\n   * @type {String}\n   * @description The file name of a file containing private key, certificate and optional\n   * CA certificates of the client in PFX or PKCS12 format.\n   *    * Only relevant when\n   *      {@link solace.AuthenticationScheme.CLIENT_CERTIFICATE} is used\n   *    * Mutually exclusive to sslPrivateKey, sslCertificate and sslTrustStores properties\n   * @default \"\"\n   * @target node\n   */\n  get sslPfx() {\n    return Check.nothing(this._sslPfx)\n      ? ''\n      : this._sslPfx;\n  }\n  set sslPfx(newValue) {\n    this._sslPfx = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslPfxPassword\n   * @type {String}\n   * @description A string containing password for the client pfx file.\n   *    * Only relevant when\n   *      {@link solace.AuthenticationScheme.CLIENT_CERTIFICATE} is used\n   * @default empty string\n   * @target node\n   */\n  get sslPfxPassword() {\n    return Check.nothing(this._sslPfxPasswd) ? '' : this._sslPfxPasswd;\n  }\n  set sslPfxPassword(newValue) {\n    this._sslPfxPasswd = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslPrivateKey\n   * @type {String}\n   * @description The file name of a file containing private key of the client in PEM format.\n   *    * Only relevant when\n   *      {@link solace.AuthenticationScheme.CLIENT_CERTIFICATE} is used\n   *    * Mutually exclusive to sslPfx property\n   * @default empty string\n   * @target node\n   */\n  get sslPrivateKey() {\n    return Check.nothing(this._sslPrivateKey) ? '' : this._sslPrivateKey;\n  }\n  set sslPrivateKey(newValue) {\n    this._sslPrivateKey = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslPrivateKeyPassword\n   * @type {String}\n   * @description A string containg password for the client private key.\n   *    * Only relevant when\n   *      {@link solace.AuthenticationScheme.CLIENT_CERTIFICATE} is used\n   * @default empty string\n   * @target node\n   */\n  get sslPrivateKeyPassword() {\n    return Check.nothing(this._sslPrivateKeyPasswd) ? '' : this._sslPrivateKeyPasswd;\n  }\n  set sslPrivateKeyPassword(newValue) {\n    this._sslPrivateKeyPasswd = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslCertificate\n   * @type {String}\n   * @description The file name of a file containing certificate key of the client in PEM\n   * format.\n   *    * Only relevant when\n   *      {@link solace.AuthenticationScheme.CLIENT_CERTIFICATE} is used\n   *    * Mutually exclusive to sslPfx property\n   * @default empty string\n   * @target node\n   */\n  get sslCertificate() {\n    return Check.nothing(this._sslCertificate) ? '' : this._sslCertificate;\n  }\n  set sslCertificate(newValue) {\n    this._sslCertificate = newValue;\n  }\n\n  // TLS connection options\n\n  /**\n   * @name SessionProperties#sslProtocol\n   * @type {String}\n   * @description The SSL protocols to use.\n   *    * Allowed values are: SSLv3, TLSv1, TLSv1.1, TLSv1.2\n   * @target node\n   */\n  get sslProtocol() {\n    return this._sslProtocol;\n  }\n  set sslProtocol(newValue) {\n    this._sslProtocol = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#compressionLevel\n   * @type {Number}\n   * @description zlib compression level (1-9) or no compression (0)\n   *\n   * When this property is set to a valid, non-zero value (1-9):\n   *\n   * * tcp:// connections are established compressed.\n   * This usually requires connecting to a different tcp port on the router,\n   * 55003 by default.\n   *\n   * * tcps:// connections are established uncompressed,\n   * but then negotiate compression on login.\n   * Compression before encryption allows inference of similarities between messages\n   * from observing packet sizes on the network.\n   * This could lead to chosen Plaintext attacks.\n   * Can be combined with sslDowngradeConnectionTo for no encryption beyond authentication.\n   *\n   * * ws(s):// and http(s):// transports do not support compression and are considered invalid.\n   *\n   * @default 0\n   * @target node\n   */\n\n  get compressionLevel() {\n    return Check.nothing(this._compressionLevel) ? 0 : this._compressionLevel;\n  }\n  set compressionLevel(newValue) {\n    this._compressionLevel = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sslConnectionDowngradeTo\n   * @type {solace.SslDowngrade}\n   * @description Disable encryption after authentication\n   *\n   * When set to {@link solace.SslDowngrade.PLAINTEXT},\n   * all message traffic beyond the initial login is unencrypted.\n   * A TLS connection is negotiated on the regular TLS port (55443 by default),\n   * TLS authentication schemes can be used, same as without this option.\n   * After a successful login however, a TLS shutdown is performed,\n   * and the same socket is then used for unencrypted message traffic.\n   *\n   * Please note this way plain text traffic passes on a port\n   * usually associated with encryption (55443 by default)\n   *\n   * This downgrade is only supported for tcps:// connections,\n   * all other URL schemes ignore this option.\n   *\n   * Can be combined with compressionLevel for\n   * non-encrypted, compressed message transfer after login.\n   *\n   * @default {@link solace.SslDowngrade.NONE}\n   * @target node\n   */\n  get sslConnectionDowngradeTo() {\n    return Check.nothing(this._sslConnectionDowngradeTo) ?\n      SslDowngrade.NONE : this._sslConnectionDowngradeTo;\n  }\n\n  set sslConnectionDowngradeTo(newValue) {\n    this._sslConnectionDowngradeTo = newValue;\n  }\n\n  _lendsInspect() {\n    return {\n      'tlsMinProtocol':           this.tlsMinProtocol,\n      'tlsMaxProtocol':           this.tlsMaxProtocol,\n      'sslCipherSuites':          this.sslCipherSuites,\n      'sslValidateCertificate':   this.sslValidateCertificate,\n      'sslTrustStores':           this.sslTrustStores,\n      'sslTrustedCommonNameList': this.sslTrustedCommonNameList,\n      'sslPfx':                   this.sslPfx,\n      'sslPfxPassword':           this.sslPfxPassword ? '*****' : this.sslPfxPassword,\n      'sslPrivateKey':            this.sslPrivateKey,\n      'sslPrivateKeyPassword':    this.sslPrivateKeyPassword ? '*****' : this.sslPrivateKeyPassword,\n      'sslCertificate':           this.sslCertificate,\n      'sslProtocol':              this.sslProtocol,\n      'compressionLevel':         this.compressionLevel,\n      'sslConnectionDowngradeTo': this.sslConnectionDowngradeTo,\n    };\n  }\n}\n\nconst SessionPropertiesBase = BUILD_ENV.TARGET_NODE\n  ? SessionPropertiesNode\n  : SessionPropertiesBrowser;\n\n/**\n * @classdesc\n * Represents a session properties object. Passed in to\n * {@link solace.SolclientFactory.createSession} when creating a {@link solace.Session} instance.\n * @memberof solace\n * @extends APIProperties\n */\nclass SessionProperties extends SessionPropertiesBase {\n\n  /**\n   * @constructor\n   * @param {Object} options Properties to apply to the newly constructed object.\n   */\n  constructor(options) {\n    super(makeDefaults(), options);\n  }\n\n  /**\n   * The authentication scheme used when establishing the session.\n   * @name solace.SessionProperties#authenticationScheme\n   * @type {solace.AuthenticationScheme}\n   * @default {@link solace.AuthenticationScheme.BASIC}\n   */\n  get authenticationScheme() {\n    return Check.nothing(this._authScheme)\n        ? AuthenticationScheme.BASIC\n        : this._authScheme;\n  }\n  set authenticationScheme(newValue) {\n    this._authScheme = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#accessToken\n   * @type {String}\n   * @description The access token required for OAUTH2 authentication.\n   *    * This is only relevant if the\n   *    {@link solace.AuthenticationScheme.OAUTH2}\n   *    authentication scheme is being used.\n   * @default \"\"\n   */\n  get accessToken() {\n    return Check.empty(this._accessToken)\n        ? ''\n        : this._accessToken;\n  }\n\n  set accessToken(newValue) {\n    this._accessToken = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#idToken\n   * @type {String}\n   * @description The ID token required for OIDC authentication.\n   *    * This is only relevant if the\n   *    {@link solace.AuthenticationScheme.OAUTH2}\n   *    authentication scheme is being used.\n   * @default \"\"\n   */\n  get idToken() {\n    return Check.empty(this._idToken)\n        ? ''\n        : this._idToken;\n  }\n\n  set idToken(newValue) {\n    this._idToken = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#issuerIdentifier\n   * @type {String}\n   * @description The issuer identifier is optional for OAUTH2 authentication.\n   *    * This is only relevant if the\n   *    {@link solace.AuthenticationScheme.OAUTH2}\n   *    authentication scheme is being used.\n   * @default \"\"\n   */\n  get issuerIdentifier() {\n    return Check.empty(this._issuerIdentifier)\n        ? ''\n        : this._issuerIdentifier;\n  }\n\n  set issuerIdentifier(newValue) {\n    if (!Check.type(newValue, 'string')) {\n      LOG_WARN(`Failed to set issuer identifier because the pased value ${''\n                }was not of type String. The passed issuer identifier ${''\n                }must be of type String. Setting issuer identifier to ${''\n                }default value empty string.`);\n      this._issuerIdentifier = '';\n    } else if (Check.empty(newValue)) {\n      LOG_WARN(`Failed to set the issuer identifier because the passed string was empty ${''\n                }or null. The passed issuer identifier must not be empty or null. Setting ${''\n                }issuer identifier to default value empty string.`);\n    } else {\n      this._issuerIdentifier = newValue;\n    }\n  }\n\n  /**\n   * The URL or URLs of the messaging service to connect to.  The URL is typically of the form\n   * `<protocol>://<host[:port]>`, where:\n   *  * `protocol` is one of `ws`, `wss`, `http`, `https`, `tcp` or `tcps`.\n   *  (Note to developers who also use the browser variant of this SDK:\n   *  Browsers do not support the `tcp` and `tcps` protocols.)\n   *  * `host` is a hostname or IP address of the router to connect to.\n   *  * `port` is the port on which the messaging service is listening. The default is the\n   *    well-known port for the service associated with the given protocol, if any.\n   *\n   * Additionally, note:\n   *  * When an Array is provided, each element is expected to be a string of the above format.\n   *    The API will attempt to connect to these URLs in the specified order.\n   *  * Numerical IPv6 addresses must be enclosed in square brackets, e.g. tcp://[2001:db8::1]\n   * @name solace.SessionProperties#url\n   * @type {String|Array.<String>}\n   * @default \"\"\n   * @target node\n   */\n  /**\n   * The URL or URLs of the messaging service to connect to.  The URL is typically of the form\n   * `<protocol>://<host[:port]>`, where:\n   *  * `protocol` is one of `ws`, `wss`, `http`, `https'.\n   *  (Note to developers who also ise the NodeJS variant of this SDK:\n   *  NodeJS also supports the 'tcp' and 'tcps' protocols, but browsers do not.)\n   *  * `host` is a hostname or IP address of the router to connect to.\n   *  * `port` is the port on which the messaging service is listening. The default is the\n   *    well-known port for the service associated with the given protocol, if any.\n   *\n   * Additionally, note:\n   *  * When an Array is provided, each element is expected to be a string of the above format.\n   *    The API will attempt to connect to these URLs in the specified order.\n   *  * Cross-domain restrictions should be taken into consideration when deploying web\n   *    applications with messaging capabilities. See the API User Guide for more\n   *    information.\n   *  * Numerical IPv6 addresses must be enclosed in square brackets, e.g. ws://[2001:db8::1]\n   * @name solace.SessionProperties#url\n   * @type {String|Array.<String>}\n   * @default \"\"\n   * @target browser\n   */\n  get url() {\n    return Check.nothing(this._url) ? '' : this._url;\n  }\n\n  set url(newValue) {\n    this._url = newValue;\n  }\n\n  //  ======================== Credentials  ========================\n\n  /**\n   * @name solace.SessionProperties#password\n   * @type {String}\n   * @description The password required for authentication.\n   * @default \"\"\n   */\n  get password() {\n    return Check.nothing(this._password) ? '' : this._password;\n  }\n\n  set password(newValue) {\n    this._password = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#userName\n   * @type {String}\n   * @description  The client username required for authentication.\n   * @default \"\"\n   */\n  get userName() {\n    return Check.nothing(this._userName) ? '' : this._userName;\n  }\n\n  set userName(newValue) {\n    this._userName = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#clientName\n   * @type {String}\n   * @default '' (automatically generated)\n   * @description The client name that is used during login as a unique identifier for the session\n   * on the Solace Message Router.\n   *  * An empty string causes a unique client name to be generated\n   *     automatically.\n   *  * If specified, it must be a valid Topic name, and a maximum of 160 bytes in length.\n   *  * This property is also used to uniquely identify the sender in\n   *    a message's senderId field if {@link solace.SessionProperties.includeSenderId}\n   *    is set.\n   * @default \"\"\n   */\n  get clientName() {\n    return Check.nothing(this._clientName) ? '' : this._clientName;\n  }\n\n  set clientName(newValue) {\n    this._clientName = newValue;\n  }\n\n  /**\n   * A string that uniquely describes the application instance.\n   *  * If left blank, the API will generate a description string\n   *    using the current user-agent string.\n   * @default \"\"\n   * @name solace.SessionProperties#applicationDescription\n   * @type {String}\n   */\n  get applicationDescription() {\n    return Check.nothing(this._appDesc) ? '' : this._appDesc;\n  }\n  set applicationDescription(newValue) {\n    this._appDesc = newValue;\n  }\n\n  /**\n   * The Message VPN name that the client is requesting for this session.\n   * @default \"\"\n   * @name solace.SessionProperties#vpnName\n   * @type {String}\n   */\n  get vpnName() {\n    return Check.nothing(this._vpnName) ? '' : this._vpnName;\n  }\n  set vpnName(newValue) {\n    this._vpnName = newValue;\n  }\n\n  /**\n   * A read-only session property that indicates which Message\n   * VPN the session is connected to. When not connected, or when not in client mode,\n   * an empty string is returned.\n   * @default \"\"\n   * @name solace.SessionProperties#vpnNameInUse\n   * @type {String}\n   * @readonly\n   */\n  get vpnNameInUse() {\n    return Check.nothing(this._vpnNameInUse) ? '' : this._vpnNameInUse;\n  }\n  /**\n   * @private\n   * @param {String} value The vpn name currently being used.\n   */\n  _setVpnNameInUse(value) {\n    this._vpnNameInUse = value;\n  }\n\n  /**\n   * @name solace.SessionProperties#virtualRouterName\n   * @type {String}\n   * @description A read-only property that indicates the connected Solace Message Router's\n   * virtual router name.\n   * @default \"\"\n   * @readonly\n   */\n  get virtualRouterName() {\n    return Check.nothing(this._virtualRouterName) ? '' : this._virtualRouterName;\n  }\n  /**\n   * @private\n   * @param {String} value The current virtual router name.\n   */\n  _setVirtualRouterName(value) {\n    this._virtualRouterName = value;\n  }\n\n  //  ======================== Connection Strategies ========================\n  /**\n   * @name solace.SessionProperties#connectTimeoutInMsecs\n   * @type {Number}\n   * @description The timeout period (in milliseconds) for a connect operation to a given host.\n   *  If no value is provided, the default is 8000.\n   *   * The valid range is > 0.\n   * @default 8000\n   * @target node\n   */\n  /**\n   * @name solace.SessionProperties#connectTimeoutInMsecs\n   * @type {Number}\n   * @description The timeout period (in milliseconds) for a connect operation to a given host.\n   *  If no value is provided, the default is calculated as shown below.\n   *   * The valid range is > 0.\n   * @default max(8000, 1000 + webTransportProtocolList.length * transportDowngradeTimeoutInMsecs)\n   * @target browser\n   */\n  get connectTimeoutInMsecs() {\n    if (Check.nothing(this._connectTimeout)) {\n      return this.defaultConnectTimeoutInMsecs;\n    }\n    return this._connectTimeout;\n  }\n  set connectTimeoutInMsecs(newValue) {\n    this._connectTimeout = newValue;\n  }\n\n  /**\n   * @internal\n   */\n  get defaultConnectTimeoutInMsecs() {\n    const minTimeout = 8000;\n    const { webTransportProtocolList, transportDowngradeTimeoutInMsecs } = this;\n    const transportCount = webTransportProtocolList ? webTransportProtocolList.length : 1;\n    const margin = transportCount > 1 ? 1000 : 0;\n    const connectDowngradeDefault = transportCount * transportDowngradeTimeoutInMsecs + margin;\n    return Math.max(minTimeout, connectDowngradeDefault);\n  }\n\n  /**\n   * @name solace.SessionProperties#connectRetries\n   * @type {Number}\n   * @description The number of times to retry connecting during initial connection setup.\n   *\n   * When using a host list, each traversal of the list is considered a try; therefore, if\n   * `connectRetries === 2`, the host list will be traversed up to three times: once\n   * for the initial try, and twice more for the retries. Each retry begins with the first host\n   * listed. After each unsuccessful attempt to connect to a host, the API waits for the amount\n   * of time set for {@link solace.SessionProperties#reconnectRetryWaitInMsecs} before attempting\n   * another connection. The next connection attempt may be to the same host,\n   * see {@link solace.SessionProperties#connectRetriesPerHost}.\n   *\n   * If an established connection fails, the reconnection is attempted with\n   * {@link solace.SessionProperties#reconnectRetries} retries instead.\n   *\n   *  * The valid range is connectRetries >= -1.\n   *  * -1 means try to connect forever.\n   *  * 0 means no automatic connection retries; the API will try once and then give up.\n   *  * connectRetries >= 1 means reattempt connection n times.\n   * @default 20\n   */\n  get connectRetries() {\n    return Check.nothing(this._connectRetries) ? 20 : this._connectRetries;\n  }\n  set connectRetries(newValue) {\n    this._connectRetries = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#connectRetriesPerHost\n   * @type {Number}\n   * @description When using a host list, this property defines how many times to\n   * try to connect to a single host before moving to the next host in the list.\n   *\n   *  * The valid range is connectRetriesPerHost >= -1.\n   *  * -1 means attempt an infinite number of connection retries. The API will only\n   *    attempt to connect to the first host in the list.\n   *  * 0 means make a single connection attempt per host, with no retries.\n   * @default 0\n   */\n  get connectRetriesPerHost() {\n    return Check.nothing(this._connectRetriesPerHost) ? 0 : this._connectRetriesPerHost;\n  }\n  set connectRetriesPerHost(newValue) {\n    this._connectRetriesPerHost = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#reconnectRetryWaitInMsecs\n   * @type {Number}\n   * @description How much time to wait (in ms) between each attempt to connect to\n   * a host.\n   * If a connect attempt is not successful, the API waits for the amount of time\n   * specified, and then makes another attempt to connect.\n   * {@link solace.SessionProperties#connectRetriesPerHost} sets how many connection\n   * attempts will be made before moving on to the next host in the list.\n   * The valid range is >= 0 and <= 60000.\n   * @default 3000\n   */\n  get reconnectRetryWaitInMsecs() {\n    return Check.nothing(this._reconnectRetryWaitInMsecs) ? 3000 : this._reconnectRetryWaitInMsecs;\n  }\n  set reconnectRetryWaitInMsecs(newValue) {\n    this._reconnectRetryWaitInMsecs = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#reconnectRetries\n   * @type {Number}\n   * @description The number of times to retry connecting after a connected session goes down.\n   *\n   * When using a host list, each traversal of the list is considered a try; therefore, if\n   * `reconnectRetries === 2`, the host list will be traversed up to three times: once\n   * for the initial try, and twice more for the retries. Each retry begins with the first host\n   * listed. After each unsuccessful attempt to connect to a host, the API waits for the amount\n   * of time set for {@link solace.SessionProperties#reconnectRetryWaitInMsecs} before attempting\n   * another connection. The next reconnect attempt may be to the same host,\n   * see {@link solace.SessionProperties#connectRetriesPerHost}.\n   *\n   *  * The valid range is reconnectRetries >= -1.\n   *  * -1 means try to reconnect forever.\n   *  * 0 means no automatic reconnect retries; the API will try once and then give up.\n   *  * reconnectRetries >= 1 means reattempt reconnect n times.\n   * @default 20\n   */\n  get reconnectRetries() {\n    return Check.nothing(this._reconnectRetries) ? 20 : this._reconnectRetries;\n  }\n  set reconnectRetries(newValue) {\n    this._reconnectRetries = newValue;\n  }\n\n  //  ======================== message properties ========================\n  /**\n   * @name solace.SessionProperties#generateSendTimestamps\n   * @type {Boolean}\n   * @description When enabled, a send timestamp is automatically included\n   * (if not already present) in the Solace-defined fields for\n   * each message sent.\n   * @default  false\n   */\n  get generateSendTimestamps() {\n    return Check.nothing(this._genSendTimestamps) ? false : this._genSendTimestamps;\n  }\n  set generateSendTimestamps(newValue) {\n    this._genSendTimestamps = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#generateReceiveTimestamps\n   * @type {Boolean}\n   * @description When enabled, a receive timestamp is recorded for\n   * each message and passed to the session's message callback receive handler.\n   * @default  false\n   */\n  get generateReceiveTimestamps() {\n    return Check.nothing(this._genReceiveTimestamps) ? false : this._genReceiveTimestamps;\n  }\n  set generateReceiveTimestamps(newValue) {\n    this._genReceiveTimestamps = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#includeSenderId\n   * @type {Boolean}\n   * @description When enabled, a sender ID is automatically included\n   * (if not already present) in the Solace-defined fields for each message\n   * sent.\n   * @default  false\n   */\n  get includeSenderId() {\n    return Check.nothing(this._includeSenderId) ? false : this._includeSenderId;\n  }\n  set includeSenderId(newValue) {\n    this._includeSenderId = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#generateSequenceNumber\n   * @type {Boolean}\n   * @description When enabled, a sequence number is automatically\n   * included (if not already present) in the Solace-defined fields\n   * for each message sent.\n   * @default  false\n   */\n  get generateSequenceNumber() {\n    return Check.nothing(this._genSequenceNumber) ? false : this._genSequenceNumber;\n  }\n  set generateSequenceNumber(newValue) {\n    this._genSequenceNumber = newValue;\n  }\n\n  //  ======================== Keep Alive ========================\n  /**\n   * @name solace.SessionProperties#keepAliveIntervalInMsecs\n   * @type {Number}\n   * @description The amount of time (in milliseconds) to wait between sending\n   * out keep-alive messages to the Solace Message Router.\n   *  * The valid range is > 0.\n   * @default  3000\n   */\n  get keepAliveIntervalInMsecs() {\n    return Check.nothing(this._kaInterval) ? 3000 : this._kaInterval;\n  }\n  set keepAliveIntervalInMsecs(newValue) {\n    this._kaInterval = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#keepAliveIntervalsLimit\n   * @type {Number}\n   * @description The maximum number of consecutive Keep-Alive messages that\n   * can be sent without receiving a response before the session is declared down\n   * and the connection is closed by the API.\n   *  * The valid range is >= 3.\n   * @default 3\n   */\n  get keepAliveIntervalsLimit() {\n    return Check.nothing(this._kaIntervalsLimit) ? 3 : this._kaIntervalsLimit;\n  }\n  set keepAliveIntervalsLimit(newValue) {\n    this._kaIntervalsLimit = newValue;\n  }\n\n  // ======================== P2P Inbox ========================\n\n  /**\n   * @name solace.SessionProperties#p2pInboxInUse\n   * @type {String}\n   * @description A read-only string that indicates the default\n   * reply-to destination used for any request messages sent from this session.\n   * See {@link solace.Session#sendRequest}.\n   * This parameter is only valid when the session is connected.\n   * @default \"\"\n   * @readonly\n   */\n  get p2pInboxInUse() {\n    return Check.nothing(this._p2pInboxInUse) ? '' : this._p2pInboxInUse;\n  }\n  /**\n   * @private\n   * @param {String} value The current P2P subscription.\n   */\n  _setP2pInboxInUse(value) {\n    this._p2pInboxInUse = value;\n  }\n\n  /**\n   * @private\n   *\n   * @name solace.SessionProperties#p2pInboxBase\n   * @description A read-only information string that stores the P2P topic subscription\n   * obtained from the Solace Message Router.\n   * This parameter is only valid when the session is connected.\n   * @default  \"\"\n   * @readonly\n   */\n  get p2pInboxBase() {\n    return Check.nothing(this._p2pInboxBase) ? '' : this._p2pInboxBase;\n  }\n  /**\n   * @private\n   * @param {String} value The current P2P inbox root subscription. The subscription on the router\n   *   additionally contains '/>', so extra topic levels can be added to this root and messages to\n   *   those topics will be attracted with the subscription.\n   */\n  _setP2pInboxBase(value) {\n    this._p2pInboxBase = value;\n  }\n\n  /**\n   * @name solace.SessionProperties#userIdentification\n   * @type {String}\n   * @description A read-only string providing information\n   * about the application, such as the name of operating system\n   * that is running the application.\n   * @default  \"\"\n   * @readonly\n   */\n  get userIdentification() {\n    return Check.nothing(this._userIdentification) ? '' : this._userIdentification;\n  }\n  /**\n   * @private\n   * @param {String} value The current userId\n   */\n  _setUserIdentification(value) {\n    this._userIdentification = value;\n  }\n\n  // ================== Subscriptions ========================\n  /**\n   *\n   * @name solace.SessionProperties#subscriberLocalPriority\n   * @type {Number}\n   * @description Subscriber priorities are used by the Solace Message Router to distribute messages\n   * that have the {@link solace.Message#setDeliverToOne} flag set to true. These messages are sent\n   * to the subscriber with the highest priority. Subscribers have two priorities; this\n   * priority is for messages published locally.\n   *  * The valid range is 1..4\n   * @default 1\n   * @deprecated Use Shared Subscriptions instead\n   */\n  get subscriberLocalPriority() {\n    return Check.nothing(this._subLocalPriority) ? 1 : this._subLocalPriority;\n  }\n  set subscriberLocalPriority(newValue) {\n    this._subLocalPriority = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#subscriberNetworkPriority\n   * @type {Number}\n   * @description Subscriber priorities are used by the Solace Message Router to distribute messages\n   * that have the {@link solace.Message#setDeliverToOne} flag set to true. These messages are sent\n   * to the subscriber with the highest priority.\n   *\n   * Subscribers have two priorities; this priority is for messages published on Solace Message\n   * Routers other than the one that the client is connected to.\n   *  * The valid range is 1..4\n   * @default  1\n   * @deprecated Use Shared Subscriptions instead\n   */\n  get subscriberNetworkPriority() {\n    return Check.nothing(this._subNetworkPriority) ? 1 : this._subNetworkPriority;\n  }\n  set subscriberNetworkPriority(newValue) {\n    this._subNetworkPriority = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#ignoreDuplicateSubscriptionError\n   * @type {Boolean}\n   * @description Used to ignore duplicate subscription errors on subscribe.\n   * @default  true\n   */\n  get ignoreDuplicateSubscriptionError() {\n    return Check.nothing(this._ignoreDupSubError) ? true : this._ignoreDupSubError;\n  }\n  set ignoreDuplicateSubscriptionError(newValue) {\n    this._ignoreDupSubError = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#ignoreSubscriptionNotFoundError\n   * @type {Boolean}\n   * @description Used to ignore subscription not found errors on unsubscribe.\n   * @default  true\n   */\n  get ignoreSubscriptionNotFoundError() {\n    return Check.nothing(this._ignoreSubNotFoundError) ? true : this._ignoreSubNotFoundError;\n  }\n  set ignoreSubscriptionNotFoundError(newValue) {\n    this._ignoreSubNotFoundError = newValue;\n  }\n\n  /**\n   *\n   * @name solace.SessionProperties#reapplySubscriptions\n   * @type {Boolean}\n   * @description Set to 'true' to have the API remember subscriptions and reapply them upon\n   * calling {@link solace.Session#connect} on a disconnected session.\n   * @default  false\n   */\n  get reapplySubscriptions() {\n    return Check.nothing(this._reapplySubcriptions) ? false : this._reapplySubcriptions;\n  }\n  set reapplySubscriptions(newValue) {\n    this._reapplySubcriptions = newValue;\n  }\n\n  // ================== AD configuration ========================\n  /**\n   * Sets the guaranteed messaging publisher properties for the session.\n   * If the supplied value is not a {@link solace.MessagePublisherProperties},\n   * one will be constructed using the supplied value as an argument.\n   *\n   * @name solace.SessionProperties#publisherProperties\n   * @type {solace.MessagePublisherProperties|null|undefined}\n   * @default undefined\n   */\n  get publisherProperties() {\n    return this._publisherProperties;\n  }\n  set publisherProperties(val) {\n    const { MessagePublisherProperties } = PublisherLib;\n    this._publisherProperties = val instanceof MessagePublisherProperties\n      ? val\n      : new MessagePublisherProperties(val);\n  }\n\n  // ================== Transport configuration ========================\n\n  /**\n   *\n   * @name solace.SessionProperties#noLocal\n   * @type {Boolean}\n   * @description Set to 'true' to signal the Solace Message Router that messages published on the\n   * session should not be received on the same session even if the client has a subscription that\n   * matches the published topic. If this restriction is requested, and the Solace Message Router\n   * does not have No Local support, the session connect will fail.\n   * @default  false\n   */\n  get noLocal() {\n    return Check.nothing(this._noLocal) ? false : this._noLocal;\n  }\n  set noLocal(newValue) {\n    this._noLocal = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#readTimeoutInMsecs\n   * @type {Number}\n   * @description The timeout period (in milliseconds) for a reply to\n   * come back from the Solace Message Router. This timeout serves as the default\n   * request timeout for {@link solace.Session#subscribe},\n   * {@link solace.Session#unsubscribe}, {@link solace.Session#updateProperty}.\n   *  * The valid range is >= 0.\n   * @default 10000\n   */\n  get readTimeoutInMsecs() {\n    return Check.nothing(this._readTimeout) ? 10000 : this._readTimeout;\n  }\n  set readTimeoutInMsecs(newValue) {\n    this._readTimeout = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#sendBufferMaxSize\n   * @type {Number}\n   * @description The maximum buffer size for the transport session. This size must be bigger\n   * than the largest message an application intends to send on the session.\n   *\n   * The session buffer size configured using the sendBufferMaxSize\n   * session property controls SolClient buffering of transmit messages. When\n   * sending small messages, the session buffer size should be set to multiple times\n   * the typical message size to improve the performance. Regardless of the buffer\n   * size, SolClient always accepts at least one message to transmit. So even if a\n   * single message exceeds sendBufferMaxSize, it is accepted and\n   * transmitted as long as the current buffered data is zero. However, no more\n   * messages are accepted until the amount of data buffered is reduced\n   * enough to allow room below sendBufferMaxSize.\n   *  * The valid range is > 0.\n   *\n   * @default 65536 (64KB)\n   */\n  get sendBufferMaxSize() {\n    return Check.nothing(this._sendBufferMaxSize) ? (64 * 1024) : this._sendBufferMaxSize;\n  }\n  set sendBufferMaxSize(newValue) {\n    this._sendBufferMaxSize = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#assumedMaxAdSize\n   * @type {Number}\n   * @description The assumed maximum AD message payload size before the session is established.\n   * This value is irrelevant after session connection establishment,\n   * because at that point the broker-reported AD size limit takes precedence.\n   *\n   * Before the session is connected, messages with payloads larger than this number\n   * are rejected upon send().\n   * The default value of 30000000 is appropriate for appliances, whereas for VMRs it should be set to 10000000.\n   *\n   *  * The valid range is > 0.\n   *\n   * @default 30000000 \n   */\n  get assumedMaxAdSize() {\n    return Check.nothing(this._assumedMaxAdSize) ? 30000000 : this._assumedMaxAdSize;\n  }\n  set assumedMaxAdSize(newValue) {\n    this._assumedMaxAdSize = newValue;\n  }\n\n  /**\n   * @name solace.SessionProperties#maxWebPayload\n   * @type {Number}\n   * @description The maximum payload size (in bytes) when sending data using the Web transport\n   * protocol.  Large messages may fail to be sent to the Solace Message Router when the maximum web\n   * payload is set to a small value. To avoid this, use a large maximum web payload.\n   *  * The valid range is >= 100.\n   * @default 1048576 (1MB)\n   */\n  get maxWebPayload() {\n    return Check.nothing(this._maxWebPayload) ? (1024 * 1024) : this._maxWebPayload;\n  }\n  set maxWebPayload(newValue) {\n    this._maxWebPayload = newValue;\n  }\n\n  /**\n   * @private\n   */\n  get nonHTTPTransportPropsSet() {\n      // Calculate on demand based on presence of properties.\n      // Currently not tracking this so no property names listed.\n    return [].filter(k => Check.something(this[k]));\n  }\n\n  // ================== PAYLOAD COMPRESSION ========================\n  /**\n   * @name solace.SessionProperties#payloadCompressionLevel\n   * @type {Number}\n   * @description Valid values for the payload compression level to be applied to the payload of a message published by a client are 0-9.\n   * <p> Value meanings: </p>\n   * <ul>\n   * <li> 0 - disable payload compression (the default) </li>\n   * <li> 1 - lowest CPU impact </li>\n   * <li> 9 - highest compression </li>\n   * </ul>\n   * Values 1-9 are passed straight to zlib, 0 disables the payload compression feature on outgoing messages.\n   * No impact on payload-compressed incoming messages. \n   * <p>\n   * Default: 0\n   * </p>\n   * @default 0\n   */\n  get payloadCompressionLevel(){\n    return Check.nothing(this._payloadCompressionLevel)? 0 : this._payloadCompressionLevel;\n  }\n  set payloadCompressionLevel(newValue){\n    this._payloadCompressionLevel = newValue;\n  }\n\n  /**\n   * @returns {String} A brief description of this object\n   * @private\n   */\n  [util_inspect_custom]() {\n    return Object.assign(this._lendsInspect(), {\n      'authenticationScheme':             AuthenticationScheme.describe(this.authenticationScheme),\n      'accessToken':                      this.accessToken ? '*****' : 'Not Set',\n      'idToken':                          this.idToken ? '*****' : 'Not Set',\n      'issuerIdentifier':                 this.issuerIdentifier ? '*****' : 'Not Set',\n      'url':                              this.url,\n      'password':                         this.password ? '*****' : this.password,\n      'userName':                         this.userName,\n      'clientName':                       this.clientName,\n      'applicationDescription':           this.applicationDescription,\n      'vpnName':                          this.vpnName,\n      'vpnNameInUse':                     this.vpnNameInUse,\n      'virtualRouterName':                this.virtualRouterName,\n      'connectTimeoutInMsecs':            this.connectTimeoutInMsecs,\n      'connectRetries':                   this.connectRetries,\n      'connectRetriesPerHost':            this.connectRetriesPerHost,\n      'reconnectRetryWaitInMsecs':        this.reconnectRetryWaitInMsecs,\n      'reconnectRetries':                 this.reconnectRetries,\n      'generateSendTimestamps':           this.generateSendTimestamps,\n      'generateReceiveTimestamps':        this.generateReceiveTimestamps,\n      'includeSenderId':                  this.includeSenderId,\n      'generateSequenceNumber':           this.generateSequenceNumber,\n      'keepAliveIntervalInMsecs':         this.keepAliveIntervalInMsecs,\n      'keepAliveIntervalsLimit':          this.keepAliveIntervalsLimit,\n      'p2pInboxInUse':                    this.p2pInboxInUse,\n      'p2pInboxBase':                     this.p2pInboxBase,\n      'userIdentification':               this.userIdentification,\n      'subscriberLocalPriority':          this.subscriberLocalPriority,\n      'subscriberNetworkPriority':        this.subscriberNetworkPriority,\n      'ignoreDuplicateSubscriptionError': this.ignoreDuplicateSubscriptionError,\n      'reapplySubscriptions':             this.reapplySubscriptions,\n      'publisherProperties':              this.publisherProperties,\n      'noLocal':                          this.noLocal,\n      'readTimeoutInMsecs':               this.readTimeoutInMsecs,\n      'sendBufferMaxSize':                this.sendBufferMaxSize,\n      'maxWebPayload':                    this.maxWebPayload,\n      'payloadCompressionLevel':          this.payloadCompressionLevel\n    });\n  }\n\n  /**\n   * @name solace.SessionProperties#toString\n   * @method\n   * @description Returns a human-readable representation of this Session, subject to change.\n   * @returns {String} A brief description of this object\n   */\n  toString() {\n    return super.toString(); // only here for the docs\n  }\n\n}\n\n// Don't try to evaluate these constants in browser mode\nif (BUILD_ENV.TARGET_NODE) {\n  /**\n   * @description The default comma separated list of cipher suites in\n   * order of preference used for pre-TLSv1.3 TLS connections.\n   * @constant\n   * @type {String}\n   */\n  SessionProperties.DEFAULT_CIPHER_SUITES = DEFAULT_CIPHER_SUITES;\n\n  /**\n   * A list of cipher suites supported by the API when using pre-TLSv1.3 TLS connections\n   * @constant\n   * @type {string[]}\n   * @private\n   */\n  SessionProperties.SUPPORTED_CIPHER_SUITES = SUPPORTED_CIPHER_SUITES;\n\n  /**\n   * SSL protocols supported by the API when using TLS connections\n   * @type {string[]}\n   * @private\n   */\n  SessionProperties.SUPPORTED_SSL_PROTOCOLS = SUPPORTED_SSL_PROTOCOLS;\n\n  /* eslint-disable */ // don't mangle import\n  SessionProperties.SslProtocolExcludeConstantMap = {\n    ['sslv2']:   NodeSslConstants['SSL_OP_NO_SSLv2'] || 0,\n    ['sslv3']:   NodeSslConstants['SSL_OP_NO_SSLv3'] || 0,\n    ['tlsv1']:   NodeSslConstants['SSL_OP_NO_TLSv1'] || 0,\n    ['tlsv1.1']: NodeSslConstants['SSL_OP_NO_TLSv1_1'] || 0,\n    ['tlsv1.2']: NodeSslConstants['SSL_OP_NO_TLSv1_2'] || 0,\n    ['tlsv1.3']: 0,\n  };\n  /* eslint-enable */ // don't mangle import\n}\n\n\nmodule.exports.SessionProperties = SessionProperties;\n","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst SMFClientCtrlParam = {\n  SOFTWAREVERSION:              0x00,\n  SOFTWAREDATE:                 0x01,\n  PLATFORM:                     0x02,\n  USERID:                       0x03,\n  CLIENTDESC:                   0x04,\n  CLIENTNAME:                   0x05,\n  MSGVPNNAME:                   0x06,\n  DELIVERTOONEPRIORITY:         0x07,\n  P2PTOPIC:                     0x08,\n  ROUTER_CAPABILITIES:          0x09,\n  VRIDNAME:                     0x0a,\n  PHYSICALROUTERNAME:           0x0c,\n  BRIDGE_MSG_VPN_NAME:          0x0d,\n  BRIDGE_ROUTER_NAME:           0x0e,\n  NO_LOCAL:                     0x0f,\n  BRIDGE_VERSION:               0x10,\n  AUTHENTICATION_SCHEME:        0x11,\n  CONNECTION_TYPE:              0x12,\n  ROUTER_CAPABILITIES_EXTENDED: 0x13,\n  REQUIRES_RELEASE_7:           0x14, // not supported.\n  SSL_DOWNGRADE:                0x15,\n  CLIENT_CAPABILITIES:          0x17,\n  KEEP_ALIVE_INTERVAL:          0x18,\n};\n\n// Internal use only\nconst SMFClientCtrlAuthType = {\n  CLIENT_CERTIFICATE: '\\x01',\n  OAUTH2:             '\\x0a',\n};\n\nmodule.exports.SMFClientCtrlAuthType = Enum.new(SMFClientCtrlAuthType);\nmodule.exports.SMFClientCtrlParam = Enum.new(SMFClientCtrlParam);\n","// This code was written by Tyler Akins and has been placed in the\n// public domain.  It would be nice if you left this header intact.\n// Base64 code from Tyler Akins -- http://rumkin.com\n\n// It has been modified by me (Edward Funnekotter) to improve its\n// efficiency\n\n// It has been modified by me (Justin Bowes) to avoid using it whenever\n// possible in favour of browser or buffer implementations.\n\nconst KEY_STR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst ENC_LUT = [\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, 99, -1, -1, 99, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  99, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, 62, -1, -1, -1, 63,\n  52, 53, 54, 55, 56, 57, 58, 59,\n  60, 61, -1, -1, -1, 64, -1, -1,\n\n    // 64\n  -1, 0, 1, 2, 3, 4, 5, 6,\n  7, 8, 9, 10, 11, 12, 13, 14,\n  15, 16, 17, 18, 19, 20, 21, 22,\n  23, 24, 25, -1, -1, -1, -1, -1,\n  -1, 26, 27, 28, 29, 30, 31, 32,\n  33, 34, 35, 36, 37, 38, 39, 40,\n  41, 42, 43, 44, 45, 46, 47, 48,\n  49, 50, 51, -1, -1, -1, -1, -1,\n\n    // 128\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n\n    // 192\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1];\n\nclass DecodeError extends Error {\n\n}\n\nconst LegacyEncoder = {\n  /**\n   * Encodes a string in base64\n   * @param {String} input The string to encode in base64.\n   * @returns {String} base64 encoded input\n   * @private\n   */\n  base64_encode(input) {\n    let output = '';\n    let i = 0;\n    do {\n      const chr1 = input.charCodeAt(i++);\n      const chr2 = input.charCodeAt(i++);\n      const chr3 = input.charCodeAt(i++);\n\n      const enc1 = chr1 >> 2;\n      const enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      let enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      let enc4 = chr3 & 63;\n\n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n\n      output += KEY_STR.charAt(enc1);\n      output += KEY_STR.charAt(enc2);\n      output += KEY_STR.charAt(enc3);\n      output += KEY_STR.charAt(enc4);\n    } while (i < input.length);\n\n    return output;\n  },\n\n  /**\n   * Decodes a base64 string.\n   * @param {String} input The base64 string to decode.\n   * @returns {String} binary output\n   * @private\n   */\n  base64_decode(input) {\n    let output = '';\n    let i = 0;\n\n    do {\n      while (ENC_LUT[input.charCodeAt(i)] > 64) {\n        i++;\n      }\n      const enc1 = ENC_LUT[input.charCodeAt(i++)];\n      const enc2 = ENC_LUT[input.charCodeAt(i++)];\n      const enc3 = ENC_LUT[input.charCodeAt(i++)];\n      const enc4 = ENC_LUT[input.charCodeAt(i++)];\n\n      if (enc1 < 0 || enc2 < 0 || enc3 < 0 || enc4 < 0) {\n        // Invalid character in base64 text\n        // alert(\"enc at \" + i + \": \" + enc1 + \", \" + enc2 + \", \" + enc3 + \", \" + enc4);\n        throw new DecodeError('Invalid base64 character');\n      }\n\n      const chr1 = (enc1 << 2) | (enc2 >> 4);\n      const chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n      const chr3 = ((enc3 & 3) << 6) | enc4;\n\n      output += String.fromCharCode(chr1);\n\n      if (enc3 !== 64) {\n        output += String.fromCharCode(chr2);\n      }\n      if (enc4 !== 64) {\n        output += String.fromCharCode(chr3);\n      }\n    } while (i < input.length - 3);\n\n    return output;\n  },\n};\n\nconst isNode = typeof window === 'undefined'; // !node\nconst hasBuffer = typeof Buffer !== 'undefined';\nconst hasBlob = typeof Blob !== 'undefined'; // !node, !ie9\nconst BufferEncoder = (hasBuffer && (hasBlob || isNode))\n  ? {\n    base64_encode: str => Buffer.from(str, 'binary').toString('base64'),\n    base64_decode: str => Buffer.from(str, 'base64').toString('binary'),\n  }\n  : {};\n/* eslint-env browser */\n/* eslint-disable dot-notation */\nconst WindowEncoder = (typeof window !== 'undefined')\n  ? {\n    base64_encode: window['btoa'] ? b => window['btoa'](b) : null,\n    base64_decode: window['atob'] ? a => window['atob'](a) : null,\n  }\n  : {};\n/* eslint-enable dot-notation */\n\nconst Base64 = {\n  encode: (WindowEncoder.base64_encode ||\n           BufferEncoder.base64_encode ||\n           LegacyEncoder.base64_encode),\n  decode: (WindowEncoder.base64_decode ||\n           BufferEncoder.base64_decode ||\n           LegacyEncoder.base64_decode),\n};\n\nmodule.exports.Base64 = Base64;\n","/**\n * This class is used to efficiently concatenate strings.\n * @private\n */\nclass StringBuffer {\n  /**\n   * @constructor\n   * @param {...*} args Initial buffer contents\n   * @private\n   */\n  constructor(...args) {\n    this.clear();\n    this.append(...args);\n  }\n\n  /**\n   * Appends the given strings to the buffer\n   *\n   * @param {...*} args Objects to add to the buffer. These are immediately\n   *                    coerced to strings.\n   * @returns {StringBuffer} this\n   */\n  append(...args) {\n    [...args].forEach((arg) => {\n      this.buffer[this.index++] = String(arg);\n    });\n    return this;\n  }\n\n  /**\n   * Resets the buffer.\n   */\n  clear() {\n    this.buffer = [];\n    this.index = 0;\n  }\n\n  /**\n   * Returns the buffer as a string. Additional concatenations and renderings\n   * can be performed.\n   * @returns {String} The buffer's contents concatenated to a string.\n   */\n  toString() {\n    return this.buffer.join('');\n  }\n}\n\nmodule.exports.StringBuffer = StringBuffer;\n","const PublisherLib = require('solclient-message-publisher');\nconst SessionPropertiesLib = require('./session-properties');\nconst SMFLib = require('solclient-smf');\nconst { APIPropertiesValidators, parseURL } = require('solclient-util');\nconst { AuthenticationScheme } = require('./authentication-schemes');\nconst { Check } = require('solclient-validate');\nconst { ErrorSubcode, OperationError } = require('solclient-error');\nconst { LOG_WARN, LOG_INFO } = require('solclient-log');\nconst { SslDowngrade } = require('./ssl-downgrades');\nconst { TransportProtocol } = require('solclient-transport');\n\nconst {\n  validateInstance,\n  valArrayIsMember,\n  valArrayOfString,\n  valBoolean,\n  valLength,\n  valNotEmpty,\n  valNumber,\n  valRange,\n  valString,\n  valStringOrArray,\n} = APIPropertiesValidators;\n\nconst ALLOWED_PROTOCOLS = ['http:', 'https:', 'ws:', 'wss:', 'tcp:', 'tcps:'];\n\nfunction valClientName(typeDesc, instance, name) {\n  // valString and valLength(160) have already been called.\n  const error =\n    SMFLib.ClientCtrlMessage.validateClientName(\n      instance[name],\n      errorMessage =>\n        new OperationError(`${typeDesc} validation: Property '${name}': ${errorMessage}`,\n                           ErrorSubcode.PARAMETER_OUT_OF_RANGE));\n  if (error) {\n    throw error;\n  }\n}\n\nfunction valIsMember(typeDesc, instance, key, enumInstance, enumName, allowNull) {\n  const val = instance[key];\n  if (allowNull && val === null) return;\n  if (typeof (val) !== 'undefined' && !enumInstance.values.some(v => v === val)) {\n    throw new OperationError(`${typeDesc} validation: Property '${key\n                             }' must be a member of ${enumName}`,\n                             ErrorSubcode.PARAMETER_INVALID_TYPE);\n  }\n}\n\n// Works on an array, not an enum. Not very consistent, but it's what I need just now.\nfunction valIsMemberIgnoreCase(typeDesc, instance, key, arr, enumName, allowFalsy) {\n  const val = instance[key];\n  if (allowFalsy && !val ) return;\n  if (typeof (val) !== 'undefined' && !arr.some(v => v.toLowerCase() === val.toLowerCase())) {\n    throw new OperationError(`${typeDesc} validation: Property '${key\n                             }' must be a member of ${enumName}`,\n                             ErrorSubcode.PARAMETER_INVALID_TYPE);\n  }\n}\n\nfunction valSslExcludedProtocols(typeDesc, instance, name) {\n  const val = instance[name];\n  if (Check.array(val)) {\n    if (val.length > 0) {\n      const supportedLC = SessionPropertiesLib.SessionProperties.SUPPORTED_SSL_PROTOCOLS.map(p => p.toLowerCase());\n      val.forEach((protocol) => {\n        const prtcl = protocol.toLowerCase();\n        if (supportedLC.indexOf(prtcl) < 0) {\n          throw new OperationError(`${typeDesc} validation: Property '${name\n                                   }' contains unsupported protocol: ${protocol}`,\n                                    ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n        }\n      });\n    }\n  }\n}\n\nfunction valSslCipherSuites(typeDesc, instance, name) {\n  const val = instance[name];\n  if (val && Check.string(val) && !Check.empty(val)) {\n    const ciphers = val.split(',');\n    const supported = SessionPropertiesLib.SessionProperties.SUPPORTED_CIPHER_SUITES;\n    ciphers.forEach((cipher) => {\n      if (supported.indexOf(cipher.trim()) < 0) {\n        throw new OperationError(`${typeDesc} validation: Property '${name\n                        }' contains unsupported cipher suite: '${cipher}'`,\n                        ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n      }\n    });\n  }\n}\n\n// maximum number of common names is 16\nfunction valSslTrustedCommonNameList(typeDesc, instance, name) {\n  const val = instance[name];\n  if (Check.something(val) && Check.array(val) && val.length > 16) {\n    throw new OperationError(`${typeDesc} validation: Property '${name\n                }' length exceeds limit of 16`,\n                ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n  }\n}\n\nfunction valUrlList(typeDesc, instance, name) {\n  const val = instance[name];\n  const valArray = typeof val === 'string' ? val.split(',') : val;\n  if (!Check.array(valArray)) {\n    throw new OperationError(`${typeDesc} validation: Property '${name\n                              }' not an array or comma-delimited string`,\n                              ErrorSubcode.PARAMETER_INVALID_TYPE);\n  }\n  valArray.forEach((el) => {\n    let url = null;\n    try {\n      url = parseURL(el);\n    } catch (ex) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                                }' contained an invalid URL: ${el}`,\n                                ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if (!Check.included(url.protocol, ALLOWED_PROTOCOLS)) {\n      throw new OperationError(`${typeDesc} validation: Property '${name\n                                }' contained a URL'${url.href\n                                }' with an invalid protocol: '${url.protocol}'`,\n                                ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n  });\n}\n\nfunction isHttpTransport(transportProtocol) {\n  return (transportProtocol && (\n          transportProtocol === TransportProtocol.HTTP_BINARY_STREAMING ||\n          transportProtocol === TransportProtocol.HTTP_BINARY ||\n          transportProtocol === TransportProtocol.HTTP_BASE64));\n}\n\nfunction validatePropsSupportedByTransport(transportProtocol, nonHttpPropsSet) {\n  if (nonHttpPropsSet.length > 0 && isHttpTransport(transportProtocol)) {\n    const propNames = nonHttpPropsSet.length <= 5 ? nonHttpPropsSet : nonHttpPropsSet.slice(0, 5);\n    throw new OperationError(`SessionProperties validation: properties that are not supported by transport protocol ${\n                    transportProtocol} have been set: ${propNames}`, ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n  }\n}\n\nfunction matchUrl(instance, name, regex, all) {\n  const val = instance[name];\n  if (val instanceof Array) {\n    // host list is used, iterate to find at least one entry\n    const arrayLength = val.length;\n    for (let i = 0; i < arrayLength; i++) {\n      const currententry = val[i];\n      if (!all) {\n        if (Check.string(currententry) && currententry.match(regex)) {\n          return true;\n        }\n      } else if (all) {\n        if (!Check.string(currententry) || !currententry.match(regex)) {\n          return false;\n        }\n      }\n    }\n    if (!all) {\n      return false;\n    } else if (all) {\n      return true;\n    }\n  }\n  return (Check.string(val) && val.match(regex));\n}\n\nfunction useSsl(instance, name, all) {\n  return matchUrl(instance, name, /^(https|wss|tcps):/i, all);\n}\n\nconst SessionPropertiesValidator = {\n  validate(props) {\n    // Validation rules: same as JCSMP\n    const v = validateInstance.bind(null, 'SessionProperties', props);\n    v('url', [valNotEmpty], [valStringOrArray], [valUrlList]);\n    v('userName', [valString], [valLength, 189]);\n    v('password', [valString], [valLength, 128]);\n    v('clientName', [valString], [valLength, 160], [valClientName]);\n    v('applicationDescription', [valString], [valLength, 254]);\n    v('vpnName', [valString], [valLength, 32]);\n    v('connectTimeoutInMsecs', [valNumber], [valRange, 1, Number.MAX_VALUE]);\n    v('connectRetriesPerHost', [valNumber], [valRange, -1, Number.MAX_VALUE]);\n    v('connectRetries', [valNumber], [valRange, -1, Number.MAX_VALUE]);\n    v('reconnectRetries', [valNumber], [valRange, -1, Number.MAX_VALUE]);\n    v('reconnectRetryWaitInMsecs', [valNumber], [valRange, 0, 60000]);\n    v('readTimeoutInMsecs', [valNumber], [valRange, 1, Number.MAX_VALUE]);\n    v('sendBufferMaxSize', [valNumber], [valRange, 1, Number.MAX_VALUE]);\n    v('maxWebPayload', [valNumber], [valRange, 100, Number.MAX_VALUE]);\n    if (BUILD_ENV.TARGET_BROWSER) {\n      v('bufferedAmountQueryIntervalInMsecs', [valNumber], [valRange, 4, Number.MAX_VALUE]);\n    }\n    v('generateSendTimestamps', [valBoolean]);\n    v('generateReceiveTimestamps', [valBoolean]);\n    v('includeSenderId', [valBoolean]);\n    v('keepAliveIntervalInMsecs', [valNumber], [valRange, 0, Number.MAX_VALUE]);\n    v('keepAliveIntervalsLimit', [valNumber], [valRange, 3, Number.MAX_VALUE]);\n    v('generateSequenceNumber', [valBoolean]);\n    v('subscriberLocalPriority', [valNumber], [valRange, 1, 4]);\n    v('subscriberNetworkPriority', [valNumber], [valRange, 1, 4]);\n    v('ignoreDuplicateSubscriptionError', [valBoolean]);\n    v('ignoreSubscriptionNotFoundError', [valBoolean]);\n    v('reapplySubscriptions', [valBoolean]);\n    v('noLocal', [valBoolean]);\n    v('transportDowngradeTimeoutInMsecs', [valNumber], [valRange, 1, Number.MAX_VALUE]);\n    v('idToken', [valString]);\n    v('accessToken', [valString]);\n    v('payloadCompressionLevel', [valNumber], [valRange, 0, 9]);\n\n    if (props.transportProtocol && props.webTransportProtocolList) {\n      throw new OperationError(\"SessionProperties validation: Property 'transportProtocol' and \" +\n                               \"'webTransportProtocolList' cannot be set at the same time\",\n                               ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if (props.webTransportProtocolList !== null && props.webTransportProtocolList !== undefined) {\n      if (!Array.isArray(props.webTransportProtocolList)) {\n        throw new OperationError(\"Property 'webTransportProtocolList' must be an array if set\",\n                                 ErrorSubcode.PARAMETER_INVALID_TYPE);\n      }\n      if (props.webTransportProtocolList.length === 0) {\n        throw new OperationError(\"Property 'webTransportProtocolList' must be non-empty if set\",\n                                 ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n      }\n    }\n\n    v('authenticationScheme', [valIsMember, AuthenticationScheme, 'AuthenticationScheme', false]);\n    const useClientCert = props.authenticationScheme === AuthenticationScheme.CLIENT_CERTIFICATE;\n    if (!useSsl(props, 'url', true) && useClientCert) {\n      throw new OperationError(\"SessionProperties validation: Property 'authenticationScheme' cannot be set to client certificate \" +\n                               'for unsecured sessions', ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n    }\n    if (Check.equal(props.authenticationScheme, AuthenticationScheme.OAUTH2)) {\n      if (!useSsl(props, 'url', true)) {\n        throw new OperationError(`SessionProperties validation: Property 'authenticationScheme' ${''\n                                 }cannot be set to '${AuthenticationScheme.OAUTH2}' unless the ${''\n                                 }session property 'url' is written to use a secure ${''\n                                 }communication protocol like tcps or https.`,\n                                 ErrorSubcode.PARAMETER_CONFLICT);\n      }\n      if (Check.empty(props.idToken) && Check.empty(props.accessToken)) {\n        throw new OperationError(`SessionProperties validation: Property 'authenticationScheme' ${''\n                                 }can be set to ${''\n                                 }'${AuthenticationScheme.OAUTH2}' only if there ${''\n                                 }is an accompanying token set as a session property. The ${''\n                                 }token types that are ${''\n                                 }supported for OAuth authentication are OAuth2.0 Access ${''\n                                 }Tokens and OpenID Connect ID Tokens. To set an access token ${''\n                                 }you can use the accessToken session property. To set an id ${''\n                                 }you can use the idToken session property.`,\n                                 ErrorSubcode.PARAMETER_CONFLICT);\n      }\n    } else if (!Check.empty(props.idToken) || !Check.empty(props.accessToken)) {\n      LOG_INFO(`SessionProperties validation: Property ${''\n               }'authenticationScheme' must be set to ${''\n               }'${AuthenticationScheme.OAUTH2}'in order to use either ${''\n               } an OAUTH2 access token or an OpenID Connect ID token.`);\n    }\n\n\n    if (BUILD_ENV.TARGET_NODE) {\n      // should not happen since transportProtocol and webTransportProtocolList are not public\n      if (Check.something(props.transportProtocol) &&\n          props.transportProtocol !== TransportProtocol.WS_BINARY) {\n        throw new OperationError(\"SessionProperties validation: properties 'transportProtocol' \" +\n                                 'can only be WS_BINARY',\n                                 ErrorSubcode.PARAMETER_INVALID_TYPE);\n      }\n      if (Check.something(props.webTransportProtocolList)) {\n        if (!Check.array(props.webTransportProtocolList)) {\n          throw new OperationError('SessionProperties validation: Property ' +\n                                   \"'webTransportProtocolList' should be type Array\",\n                                   ErrorSubcode.PARAMETER_INVALID_TYPE);\n        }\n        if (props.webTransportProtocolList.length !== 1 ||\n            props.webTransportProtocolList[0] !== TransportProtocol.WS_BINARY) {\n          throw new OperationError('SessionProperties validation: properties ' +\n                                   \"'webTransportProtocolList' can only contain element WS_BINARY\",\n                                   ErrorSubcode.PARAMETER_INVALID_TYPE);\n        }\n      }\n\n      v('sslExcludedProtocols', [valArrayOfString], [valSslExcludedProtocols]);\n      // Here we accept any case, we'll normalize at the point of use.\n      v('tlsMinProtocol', [valString], [valIsMemberIgnoreCase, SessionPropertiesLib.SessionProperties.SUPPORTED_SSL_PROTOCOLS, \"SUPPORTED_SSL_PROTOCOLS\" , true]);\n      v('tlsMaxProtocol', [valString], [valIsMemberIgnoreCase, SessionPropertiesLib.SessionProperties.SUPPORTED_SSL_PROTOCOLS, \"SUPPORTED_SSL_PROTOCOLS\" , true]);\n\n      if (props.tlsMinProtocol && props.tlsMaxProtocol) {\n        const supportedLC = SessionPropertiesLib.SessionProperties.SUPPORTED_SSL_PROTOCOLS.map(p => p.toLowerCase());\n        const minIndex = supportedLC.indexOf(props.tlsMinProtocol.toLowerCase())\n        const maxIndex = supportedLC.indexOf(props.tlsMaxProtocol.toLowerCase())\n        if (minIndex > maxIndex) {\n          throw new OperationError(`SessionProperties validation: Property 'tlsMinProtocol' ` +\n                                   `cannot be higher than 'tlsMaxProtocol'.`,\n                                   ErrorSubcode.PARAMETER_CONFLICT);\n        }\n      }\n\n      if (props.sslExcludedProtocols && (props.tlsMinProtocol || props.tlsMaxProtocol)) {\n        throw new OperationError(\"SessionProperties validation: Can't mix deprecated 'sslExcludedProtocols' \"+\n                                 \"with 'tlsMinProtocol' and 'tlsMaxProtocol'.\",\n                                 ErrorSubcode.PARAMETER_CONFLICT);\n      }\n\n      v('sslCipherSuites', [valString], [valSslCipherSuites]);\n      v('sslValidateCertificate', [valBoolean]);\n\n      if (props.sslValidateCertificate || useClientCert) {\n        v('sslTrustStores', [valArrayOfString]);\n        v('sslTrustedCommonNameList', [valArrayOfString], [valSslTrustedCommonNameList]);\n      }\n\n      if (useClientCert) {\n        v('sslPfx', [valString]);\n        v('sslPfxPassword', [valString]);\n        v('sslPrivateKey', [valString]);\n        v('sslPrivateKeyPassword', [valString]);\n        v('sslCertificate', [valString]);\n        // either sslPfx or sslPrivateKey and sslCertificate must be specified,\n        // but not at the same time\n        const sslPfxSet = Check.something(props.sslPfx) && props.sslPfx.length;\n        const sslPrivateKeySet = (\n          Check.something(props.sslPrivateKey) &&\n          props.sslPrivateKey.length\n        );\n        const sslCertSet = (\n          Check.something(props.sslCertificate) &&\n          props.sslCertificate.length\n        );\n        if (!sslPfxSet && !sslPrivateKeySet && !sslCertSet) {\n          throw new OperationError('SessionProperties validation: ' +\n                                   \"Either property 'sslPfx', or 'sslPrivateKey' and 'sslCertificate' \" +\n                                   'must be set when authenticationScheme is client certificate',\n                                   ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n        }\n        if (sslPfxSet && (sslPrivateKeySet || sslCertSet)) {\n          throw new OperationError('SessionProperties validation: ' +\n                                   \"Property 'sslPfx' can only be set when 'sslPrivateKey' and 'sslCertificate' \" +\n                                   'are not set',\n                                   ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n        }\n        if ((sslPrivateKeySet && !sslCertSet) || (!sslPrivateKeySet && sslCertSet)) {\n          throw new OperationError('SessionProperties validation: ' +\n                                   \"Property 'sslPrivateKey' and 'sslCertificate' \" +\n                                   'must be set at the same time',\n                                   ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n        }\n      }\n\n      v('compressionLevel', [valNumber], [valRange, 0, 9]);\n      // Compression and web protocols do not mix.\n      if (props.compressionLevel > 0) {\n        if (props.url instanceof Array) {\n          const allTcp = props.url.every(url => Check.string(url) && url.match(/tcps?:/i));\n          if (!allTcp) {\n            throw new OperationError('SessionProperties validation: Property ' +\n                                     \"'compressionLevel' is non-zero, \" +\n                                     'but not all URLs in the host list ' +\n                                     'support compression. (tcp:// or tcps:// expected)',\n                                     ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n          }\n        } else if (Check.string(props.url)) {\n          if (!props.url.match(/tcps?:/i)) {\n            throw new OperationError('SessionProperties validation: Property ' +\n                                     \"'compressionLevel' is non-zero, \" +\n                                     'but the url does not ' +\n                                     'support compression. (tcp:// or tcps:// expected)',\n                                     ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n          }\n        } else {\n          throw new OperationError('SessionProperties validation: Property' +\n                                   \"'url' must be string or array of strings.\" +\n                                   ` instead got ${props.url} ` +\n                                   `of type ${typeof props.url}`,\n                                    ErrorSubcode.PARAMETER_OUT_OF_RANGE);\n        }\n      }\n\n      v('sslConnectionDowngradeTo', [valIsMember, SslDowngrade, 'SslDowngrade', false]);\n    }\n    v('transportProtocol', [valIsMember, TransportProtocol, 'TransportProtocol', true]);\n    v('webTransportProtocolList',\n      [valArrayIsMember, TransportProtocol, 'TransportProtocol',\n        true, false, false]);\n\n    validatePropsSupportedByTransport(props.transportProtocol,\n                                      props.nonHTTPTransportPropsSet);\n\n    if (props.publisherProperties) {\n      PublisherLib.MessagePublisherPropertiesValidator.validate(props.publisherProperties);\n    }\n\n    // Non-errors\n\n    const recommendedMin = props.defaultConnectTimeoutInMsecs;\n    const connectTimeout = props.connectTimeoutInMsecs;\n    const transportCount = props.webTransportProtocolList\n      ? props.webTransportProtocolList.length\n      : 1;\n    if (transportCount > 1 && connectTimeout < recommendedMin) {\n      LOG_WARN(\n        `Connect timeout of ${connectTimeout} msecs is less than default and recommended ` +\n        `minimum of ${recommendedMin} msecs for current transport selection. Transport ` +\n        'downgrades may not complete.');\n    }\n  },\n};\n\nmodule.exports.SessionPropertiesValidator = SessionPropertiesValidator;\n\n","const { FsmEvent } = require('solclient-fsm');\n\n/**\n *\n * PublisherFSMEvent extends {@link FsmEvent}.  This object should be used for all events\n * passed to the SessionFSM.  This extension provides members to carry information specfic to\n * the SessionFSM transitions.\n * @extends {FsmEvent}\n * @private\n */\nclass PublisherFSMEvent extends FsmEvent {\n  /**\n   * @constructor\n   * @param {Object} spec The specification for this event\n   * @param {?Object} details The details to assign to this event object\n   * @param {Message|BaseMessage} smfmessage The message associated with this event\n   */\n  constructor(spec, details, smfmessage) {\n    super(spec);\n    Object.assign(this, details);\n    Object.assign(this, smfmessage);\n  }\n  getEventText() {\n    return this._eventText;\n  }\n}\n\nmodule.exports.PublisherFSMEvent = PublisherFSMEvent;\n","/**\n * @classdesc\n * Control messages wrap an SMFHeader instance\n * @private\n */\nclass SMFHeader {\n  constructor(protocol = 0, ttl = 0) {\n    // header properties\n    // header block\n    // SMF parameters\n    // payload\n    this._parameters = [];\n\n    // Common SMF header field values\n    this.smf_version = 3;\n    this.smf_uh = 0;\n    this.smf_protocol = protocol;\n    this.smf_priority = 0;\n    this.smf_ttl = ttl;\n    this.smf_msgLen = 0;\n    this.smf_di = 0;\n    this.smf_tqd = 0;\n    this.smf_elidingEligible = 0;\n    this.smf_dto = 0;\n    this.smf_adf = 0;                  // AD\n    this.smf_deadMessageQueueEligible = 0; //DMQ Eligible\n\n    // Common SMF protocol parameters\n    this.pm_userdata = null;\n    this.pm_respcode = 0;\n    this.pm_respstr = null;\n    this.pm_username = null;\n    this.pm_password = null;\n    this.pm_tr_topicname_bytes = null;\n    this.pm_deliverymode = null;\n\n    this.pm_ad_msgid = undefined;      // AD\n    this.pm_ad_prevmsgid = undefined;  // AD\n    this.pm_ad_redelflag = 0;          // AD\n    this.pm_ad_flowredelflag = 0;      // AD\n    this.pm_ad_ttl = undefined;        // AD\n    this.pm_ad_ackimm = undefined;     // AD\n    this.pm_ad_flowid = 0;             // AD\n    this.pm_ad_publisherid = 0;\n    this.pm_ad_publishermsgid = 0;\n\n    this.pm_content_summary = null;\n    this.pm_corrtag = null;\n    this.pm_topic_offset = 0;\n    this.pm_topic_len = 0;\n    this.pm_queue_offset = 0;\n    this.pm_queue_len = 0;\n    this.pm_msg_priority = null;        // {number}\n\n    // extended optional parameters\n    // these fields are header but may not be present\n    // see ../codec/parse-smf.js for details\n    // this.pm_ad_redeliveryCount;\n    // this.pm_ad_spooler_unique_id;\n    // this.pm_ad_local_spooler_message_id;\n    // this.pm_ad_replication_mate_ack_message_id;\n    this.pm_oauth2_access_token = null;\n    this.pm_oidc_id_token = null;\n    this.pm_oauth2_issuer_identifier = null;\n    this.pm_ts_transport_context = null;\n\n    // housekeeping\n    this.unknownProtoFlag = false;\n    this.messageLength = 0;\n    this.payloadLength = 0;\n    this.headerLength = 0;\n    this.payload = null;\n\n    // This message is invalid, but the framing (messageLength) is fine.\n    // set by the parser when UH==2 on an unknown parameter.\n    // The SMF fsm can then discard and increment the stats.\n    this.discardMessage = false;\n  }\n\n  setMessageSizes(headerLength, payloadLength) {\n    this.headerLength = headerLength;\n    this.payloadLength = payloadLength;\n    this.messageLength = headerLength + payloadLength;\n  }\n\n  setPayloadSize(payloadLength) {\n    this.payloadLength = payloadLength;\n  }\n}\n\nmodule.exports.SMFHeader = SMFHeader;\n","const { Enum } = require('solclient-eskit');\n\nconst PrivateFlowEventName = {\n  BIND_WAITING: 'PrivateFlowEventName_bindWaiting',\n};\n\nmodule.exports.PrivateFlowEventName = Enum.new(PrivateFlowEventName);\n","const { Base64 } = require('./lib/base64');\nconst { Bits } = require('./lib/bits');\nconst { Convert } = require('./lib/convert');\nconst { Hex } = require('./lib/hex');\nconst { Long } = require('./lib/long');\n\nmodule.exports.Base64 = Base64;\nmodule.exports.Bits = Bits;\nmodule.exports.Convert = Convert;\nmodule.exports.Hex = Hex;\nmodule.exports.Long = Long;\n","/**\n * Created by rpaulson on 06/02/2017.\n */\nconst { BaseMessage } = require('./base-message');\nconst { Convert, Long } = require('solclient-convert');\nconst { DestinationType } = require('solclient-destination');\nconst { LOG_TRACE, LOG_INFO } = require('solclient-log');\nconst { OperationError } = require('solclient-error');\nconst { QueueAccessType,\n        QueueDiscardBehavior } = require('solclient-queue');\nconst { QueuePermissions, QueueType } = require('solclient-queue');\nconst { ReplayStartType } = require('solclient-replaystart');\nconst { MessageOutcome } = require('solclient-message');\nconst { SMFAdProtocolMessageType } = require('../smf-adprotocol-message-types');\nconst { SMFAdProtocolParam } = require('../smf-adprotocol-params');\nconst { SMFHeader } = require('./smf-header');\nconst { SMFParameter } = require('./smf-parameter');\nconst { SMFProtocol } = require('../smf-protocols');\nconst { SMFUH } = require('./smf-uh');\nconst { StringUtils } = require('solclient-util');\n\n// eslint-disable-next-line global-require\nconst BufferImpl = require('buffer').Buffer;\n\nconst {\n  strToInt8,\n  strToInt16,\n  strToUInt32,\n  strToUInt64,\n  int32ToStr,\n} = Convert;\n\nconst bUInt8 = BufferImpl.prototype.readUInt8;\nconst bUInt16BE = BufferImpl.prototype.readUInt16BE;\nconst bUInt32BE = BufferImpl.prototype.readUInt32BE;\nconst bUInt64BE = function bUInt64BE(pos) { // invoked with \"this\" as the buffer.\n  return Long.fromBits(this.readUInt32BE(pos + 4), this.readUInt32BE(pos), true);\n};\n\nconst {\n  nullTerminate,\n  stripNullTerminate,\n} = StringUtils;\n\n// QUEUENAME/TOPICNAME\nconst EndpointTypeToParam = {\n  [DestinationType.TOPIC]: SMFAdProtocolParam.DTENAME,\n  [DestinationType.QUEUE]: SMFAdProtocolParam.QUEUENAME,\n};\n\n//Same as above, but for CREATE.\nconst QueueDescriptorTypeToParam = {\n  [QueueType.TOPIC_ENDPOINT]: SMFAdProtocolParam.DTENAME,\n  [QueueType.QUEUE]:          SMFAdProtocolParam.QUEUENAME,\n};\n\nconst QUEUE_PERMISSIONS_TO_BITS = {\n  [QueuePermissions.NONE]:         0x0000,\n  [QueuePermissions.READ_ONLY]:    0x0001,\n  [QueuePermissions.CONSUME]:      0x0003,\n  [QueuePermissions.MODIFY_TOPIC]: 0x0007,\n  [QueuePermissions.DELETE]:       0x000f,\n};\n\nconst ACCESS_TYPE_INT_TO_ENUM = {\n  0x01: QueueAccessType.EXCLUSIVE,\n  0x02: QueueAccessType.NONEXCLUSIVE,\n};\n\nconst ACCESS_TYPE_ENUM_TO_BITS = {\n  [QueueAccessType.EXCLUSIVE]:    0x01,\n  [QueueAccessType.NONEXCLUSIVE]: 0x02,\n};\n\nconst DUARBILITY_INT_TO_BOOL = {\n  1: true,  // durable\n  2: false, // non-durable guaranteed\n  3: false  // non-durable reliable\n}\n\nconst DISCARD_ENUM_TO_VALUE = {\n  [QueueDiscardBehavior.NOTIFY_SENDER_OFF]: 0x01,\n  [QueueDiscardBehavior.NOTIFY_SENDER_ON]:  0x02,\n};\n\nfunction addQueueProperties(message, queueProperties, skipAccessType = false) {\n  if (!queueProperties) {\n    return;\n  }\n  const {\n    accessType,\n    discardBehavior,\n    maxMessageRedelivery,\n    maxMessageSize,\n    permissions,\n    quotaMB,\n    respectsTTL,\n  } = queueProperties;\n\n\n  // [AssuredCtrl AllOthersPermissions Parameter]\n  if (permissions && (QUEUE_PERMISSIONS_TO_BITS[permissions] !== undefined)) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_ALLOTHER_PERMISSION,\n      QUEUE_PERMISSIONS_TO_BITS[permissions]\n    ));\n  }\n\n  //AccessType\n  if (!skipAccessType &&\n    accessType !== undefined &&\n    ACCESS_TYPE_ENUM_TO_BITS[accessType] !== undefined\n  ) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.ACCESSTYPE,\n      ACCESS_TYPE_ENUM_TO_BITS[accessType]\n    ));\n  }\n\n  // [AssuredCtrl EndpointQuotaMB Parameter]\n  if (quotaMB !== null && quotaMB !== undefined) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_QUOTA,\n      quotaMB\n    ));\n  }\n\n  // [AssuredCtrl EndpointMaxMessageSize Parameter]\n  if (maxMessageSize !== undefined && maxMessageSize !== null) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_MAX_MSGSIZE,\n      maxMessageSize\n    ));\n  }\n\n  let flags = 0x0000;\n  if (discardBehavior !== null && discardBehavior !== undefined) {\n    const discardBehaviorValue = DISCARD_ENUM_TO_VALUE[discardBehavior];\n    flags |= (discardBehaviorValue << 12);\n    // Omit cutThrough, << 14\n  }\n  if (flags /* is nonzero */) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_BEHAVIOUR,\n      flags\n    ));\n  }\n\n  if (maxMessageRedelivery !== undefined && maxMessageRedelivery !== null) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.MAX_REDELIVERY,\n      maxMessageRedelivery\n    ));\n  }\n\n  if (respectsTTL !== undefined && respectsTTL !== null) {\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_RESPECTS_TTL,\n      (respectsTTL ? 0x1 : 0x0)\n    ));\n  }\n}\n\n/**\n * @internal\n */\nclass AdProtocolMessage extends BaseMessage {\n  /**\n   * @constructor\n   * @param {SMFAdProtocolMessageType} [messageType=SMFAdProtocolMessageType.OPENPUBFLOW]\n   *  The type of message\n   * @param {Number} [version=3] The AD protocol version for the message\n   * @extends {BaseMessage}\n   * @memberof solace\n   * @internal\n   */\n  constructor(messageType = 0, version = 3) {\n    super(new SMFHeader(SMFProtocol.ADCTRL, 1));\n\n    // Field: msgtype\n    this.msgType = messageType;\n\n    // Field: version\n    this.version = version;\n  }\n\n  _readParameter(paramtype, decoder = null, bufMethod = null) {\n    const param = this.getParameter(paramtype);\n    if (param === undefined) return undefined;\n    if (bufMethod && param.getBuffer()) {\n      return bufMethod.call(param.getBuffer(), param.getBegin());\n    }\n    const value = param.getValue();\n    return decoder ? decoder(value) : value;\n  }\n\n  /**\n   * @returns {?QueueAccessType} The access type, if present\n   */\n  getAccessType() {\n    const param = this._readParameter(SMFAdProtocolParam.ACCESSTYPE, strToInt8, bUInt8);\n    return ACCESS_TYPE_INT_TO_ENUM[param];\n  }\n\n  /**\n   * @returns {?Boolean} Durability (durable vs non-durable), if present\n   */\n  getDurability() {\n    const param = this._readParameter(SMFAdProtocolParam.EP_DURABLE, strToInt8, bUInt8);\n    if (param === 3) {\n      LOG_INFO(\"Non durable reliable queue. This does not happen often.\");\n    }\n    return DUARBILITY_INT_TO_BOOL[param];\n  }\n\n  /**\n   * @returns {?Boolean} The active flow indication, if present\n   */\n  getActiveFlow() {\n    return this._readParameter(SMFAdProtocolParam.ACTIVE_FLOW_INDICATION, strToInt8, bUInt8);\n  }\n\n  /**\n   * @returns {?QueueDiscardBehavior} The discard behavior for the endpoint, if present\n   */\n  getQueueDiscardBehavior() {\n    const param = this._readParameter(SMFAdProtocolParam.EP_BEHAVIOUR, strToInt16, bUInt16BE);\n    if (param === undefined) {\n      return undefined;\n    }\n    // Get NotifySender flag\n    const masked = (param & 0x3000) >> 12;\n    if (masked === DISCARD_ENUM_TO_VALUE[QueueDiscardBehavior.NOTIFY_SENDER_OFF]) {\n      return QueueDiscardBehavior.NOTIFY_SENDER_OFF;\n    } else if (masked === DISCARD_ENUM_TO_VALUE[QueueDiscardBehavior.NOTIFY_SENDER_ON]) {\n      return QueueDiscardBehavior.NOTIFY_SENDER_ON;\n    }\n    return undefined;\n  }\n  /**\n   * @returns {?Boolean} The Delivery Count setting of the endpoint, if present\n   */\n  getEndpointDeliveryCountSent() {\n    const param = this._readParameter(SMFAdProtocolParam.EP_BEHAVIOUR, strToInt16, bUInt16BE);\n    // Get NotifySender flag\n    const masked = (param & 0x0c00) >> 10;\n    switch (masked) {\n      case 0 :\n        return undefined;\n      case 1 :\n        return false;\n      case 2:\n        return true;\n      default:\n        //TODO: log: invalid flag value.\n        return undefined;\n    }\n  }\n\n  /**\n   * @returns {?Number} The endpoint ID, if present\n   */\n  getEndpointId() {\n    return this._readParameter(SMFAdProtocolParam.ENDPOINT_ID, strToUInt32, bUInt32BE);\n  }\n\n  /**\n   * @returns {?Boolean} Whether endpoint respects TTL\n   */\n  getRespectsTTL() {\n    const value = this._readParameter(SMFAdProtocolParam.EP_RESPECTS_TTL, strToInt8, bUInt8);\n    if (value === undefined) {\n      LOG_TRACE('respectsTTL missing from response.');\n      return undefined;\n    }\n    LOG_TRACE(`respectsTTL present in response: ${value}`);\n    return !!value;\n  }\n\n  /**\n   * @returns {?String} The router-assigned flow name, if present\n   */\n  getFlowName() {\n    return this._readParameter(SMFAdProtocolParam.FLOWNAME, stripNullTerminate);\n  }\n\n  /**\n   * @returns {?Number} The router-assigned flow ID, if present\n   */\n  getFlowId() {\n    return this._readParameter(SMFAdProtocolParam.FLOWID, strToUInt32, bUInt32BE);\n  }\n\n  /**\n   * @returns {?Number} The quota on the endpoint, if present\n   */\n  getQuota() {\n    return this._readParameter(SMFAdProtocolParam.EP_QUOTA, strToUInt32, bUInt32BE);\n  }\n\n  /**\n   * @returns {?Number} The maximum message size of the endpoint, if present\n   */\n  getMaxMsgSize() {\n    return this._readParameter(SMFAdProtocolParam.EP_MAX_MSGSIZE, strToUInt32, bUInt32BE);\n  }\n\n  /**\n   * @returns {?String} The UTF-8 encoded, null terminated topic endpoint name\n   */\n  getTopicEndpointBytes() {\n    return this._readParameter(SMFAdProtocolParam.DTENAME);\n  }\n\n  /**\n   * @returns {?String} The UTF-8 encoded, null terminated queue name\n   */\n  getQueueNameBytes() {\n    return this._readParameter(SMFAdProtocolParam.QUEUENAME);\n  }\n\n  /**\n   * @returns {?QueuePermissions} The granted permissions for the flow, if present\n   */\n  getGrantedPermissions() {\n    const permissions =\n      this._readParameter(SMFAdProtocolParam.GRANTED_PERMISSIONS, strToUInt32, bUInt32BE);\n    let result;\n    Object.keys(QUEUE_PERMISSIONS_TO_BITS).forEach((key) => {\n      if (QUEUE_PERMISSIONS_TO_BITS[key] === permissions) {\n        result = key;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * @returns {?QueuePermissions} The permissions for other users for the endpoint, if present\n   */\n  getAllOthersPermissions() {\n    const permissions =\n      this._readParameter(SMFAdProtocolParam.EP_ALLOTHER_PERMISSION, strToUInt32, bUInt32BE);\n    let result;\n    Object.keys(QUEUE_PERMISSIONS_TO_BITS).forEach((key) => {\n      if (QUEUE_PERMISSIONS_TO_BITS[key] === permissions) {\n        result = key;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * @returns {?Long} The last message ID acked, if present\n   */\n  getLastMsgIdAcked() {\n    return this._readParameter(SMFAdProtocolParam.LASTMSGIDACKED,\n                               strToUInt64, bUInt64BE);\n  }\n\n  /**\n   * @returns {?Long} The last message ID received, if present\n   */\n  getLastMsgIdReceived() {\n    return this._readParameter(SMFAdProtocolParam.LASTMSGIDRECEIVED,\n                               strToUInt64, bUInt64BE);\n  }\n\n  /**\n   * @returns {?Number} The publisher ID, if present\n   */\n  getPublisherId() {\n    return this._readParameter(SMFAdProtocolParam.PUBLISHER_ID, strToUInt32, bUInt32BE);\n  }\n\n  /**\n   * @returns {?Number} Whether we want flow change notifications, if present\n   */\n  getWantFlowChangeNotify() {\n    return !!this._readParameter(SMFAdProtocolParam.WANT_FLOW_CHANGE_NOTIFY, strToInt8, bUInt8);\n  }\n\n  /**\n   * @returns {?Number} The Window parameter, if present\n   */\n  getWindow() {\n    return this._readParameter(SMFAdProtocolParam.WINDOW, strToInt8, bUInt8);\n  }\n\n  /**\n   * @returns {?Number} The max redelivery parameter, if present\n   */\n  getMaxRedelivery() {\n    return this._readParameter(SMFAdProtocolParam.MAX_REDELIVERY, strToInt8, bUInt8);\n  }\n\n  /**\n   * @returns {?Number} The max unacked messages parameter, if present\n   */\n  getMaxUnackedMessages() {\n    return this._readParameter(SMFAdProtocolParam.MAX_DELIVERED_UNACKED_MESSAGES_PER_FLOW,\n                               strToUInt32, bUInt32BE);\n  }\n\n  /**\n   * @returns {?Long} The endpointErrorId, if present\n   */\n  getEndpointErrorId() {\n    return this._readParameter(SMFAdProtocolParam.ENDPOINT_ERROR_ID,\n                               strToUInt64, bUInt64BE);\n  }\n\n  /**\n   * @returns {?Long} The partitionGroupId, if present\n   */\n  getPartitionGroupId() {\n    return this._readParameter(SMFAdProtocolParam.PARTITION_GROUP_ID,\n                               strToInt16, bUInt16BE);\n  }\n\n  /**\n   * @returns {?Long} The spoolerUniqueId, if present\n   */\n  getSpoolerUniqueId() {\n    return this._readParameter(SMFAdProtocolParam.SPOOLER_UNIQUE_ID,\n                               strToUInt64, bUInt64BE);\n  }\n\n  /**\n   * Creates a CLOSEPUBFLOW message\n   * @param {Number} flowId The publisher flow to close\n   * @param {Number} correlationTag The correlation tag for the request\n   * @returns {AdProtocolMessage} The newly created message\n   * @internal\n   * @static\n   */\n  static getCloseMessagePublisher(flowId,\n                                  correlationTag) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.CLOSEPUBFLOW);\n\n    const header = message.smfHeader;\n    header.pm_corrtag = correlationTag;\n\n    message.addParameter(new SMFParameter(SMFUH.REJECT,\n                                          SMFAdProtocolParam.FLOWID,\n                                          flowId));\n    return message;\n  }\n\n\n  /**\n   * Creates a CREATE message\n   * @param {solace.QueueDescriptor} queueDescriptor The endpoint descriptor for the create request\n   * @param {?solace.QueueProperties} queueProperties The properties for the create request\n   * @param {Number} correlationTag The correlation tag for the request\n   * @returns {AdProtocolMessage} The newly created message\n   * @internal\n   * @static\n   */\n  static getCreate(\n    queueDescriptor,\n    queueProperties,\n    correlationTag\n  ) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.CREATE);\n\n    const header = message.smfHeader;\n    header.pm_corrtag = correlationTag;\n\n    /*\n      {AssuredCtrl QueueName|TopicEndpointName Parameter}\n      {AssuredCtrl Durability Parameter}\n      [AssuredCtrl AllOthersPermission Parameter]\n      [AssuredCtrl AccessType Parameter]\n    [AssuredCtrl EndpointQuotaMB Parameter]\n    [AssuredCtrl EndpointMaxMessageSize Parameter]\n    [AssuredCtrl qEndpointBehaviourFlags Parameter]\n    [AssuredCtrl MaxRedelivery Parameter]\n    */\n\n    // QueueName/TopicEndpointName : different param type for TE vs queue\n    const endpointTypeParam = QueueDescriptorTypeToParam[queueDescriptor.type];\n    if (endpointTypeParam === undefined) throw new OperationError('Unknown destination type');\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      endpointTypeParam,\n      nullTerminate(queueDescriptor.name)\n    ));\n\n    // [AssuredCtrl Durability Parameter]\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_DURABLE,\n      (queueDescriptor.durable ? 1 : 2) // Durable vs Non-Durable-Guaranteed\n    ));\n\n\n    addQueueProperties(message, queueProperties);\n\n    return message;\n  }\n\n  /**\n   * Creates a DELETE message\n   * @param {solace.QueueDescriptor} queueDescriptor The endpoint descriptor for the create request, ignoring durability\n   * @param {Number} correlationTag The correlation tag for the request\n   * @returns {AdProtocolMessage} The newly created message\n   * @internal\n   * @static\n   */\n  static getDelete(\n    queueDescriptor,\n    correlationTag\n  ) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.DELETE);\n\n    const header = message.smfHeader;\n    header.pm_corrtag = correlationTag;\n\n    /*\n      {AssuredCtrl QueueName|TopicEndpointName Parameter}\n    */\n\n    // QueueName/TopicEndpointName : different param type for TE vs queue\n    const endpointTypeParam = QueueDescriptorTypeToParam[queueDescriptor.type];\n    if (endpointTypeParam === undefined) throw new OperationError('Unknown destination type');\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      endpointTypeParam,\n      nullTerminate(queueDescriptor.name)\n    ));\n\n    return message;\n  }\n\n  /**\n   * Returns an AdProtocolMessage that describes a publisher open-flow request.\n   * @static\n   * @param {?Long} lastMsgIdAcked Last message ID acked, if re-opening\n   * @param {?Long} lastMsgIdSent Last message ID sent, if re-opening\n   * @param {Number} windowSize Desired window size\n   * @param {String} flowName Last flow name in use, if re-opening\n   * @param {Number} correlationTag Correlation tag for the request\n   * @returns {solace.AdProtocolMessage} The OPENPUBFLOW message\n   * @internal\n   */\n  static getOpenMessagePublisher(\n            lastMsgIdAcked,\n            lastMsgIdSent,\n            windowSize,\n            flowName,\n            correlationTag) {\n    const adMsg = new AdProtocolMessage(SMFAdProtocolMessageType.OPENPUBFLOW);\n\n    const smfHeader = adMsg.smfHeader;\n    smfHeader.pm_corrtag = correlationTag;\n\n    if (lastMsgIdAcked !== undefined) {\n      adMsg.addParameter(new SMFParameter(SMFUH.REJECT,\n                                          SMFAdProtocolParam.LASTMSGIDACKED,\n                                          lastMsgIdAcked));\n    }\n    if (lastMsgIdSent !== undefined) {\n      adMsg.addParameter(new SMFParameter(SMFUH.REJECT,\n                                          SMFAdProtocolParam.LASTMSGIDSENT,\n                                          lastMsgIdSent));\n    }\n\n    adMsg.addParameter(new SMFParameter(SMFUH.REJECT,\n                                        SMFAdProtocolParam.WINDOW,\n                                        windowSize));\n\n    adMsg.addParameter(new SMFParameter(SMFUH.IGNORE,\n                                        SMFAdProtocolParam.FLOWNAME,\n                                        flowName || ''));\n\n    LOG_TRACE(`Create open publisher: lastMsgIdAcked=${lastMsgIdAcked} lastMsgIdSent=${lastMsgIdSent} window=${windowSize} flowName=${flowName || '(null)'}`);\n\n    return adMsg;\n  }\n\n  /**\n   * Returns an AdProtocolMessage that describes a subscriber (MessageConsumer) bind request.\n   * @static\n   * @param {solace.QueueDescriptor} queueDescriptor The endpoint descriptor for the bind request\n   * @param {?solace.QueueProperties} queueProperties The properties for the bind request\n   * @param {solace.Destination} endpoint The endpoint for the bind request\n   * @param {?solace.Topic} topicSubscription The topic endpoint\n   * @param {String} correlationTag The correlation tag for the request\n   * @param {Number} windowSize The desired window size\n   * @param {Boolean} [noLocal=false] If true, local publisher messages are not delivered\n   * @param {Boolean} [wantFlowChangeUpdate] default is true if destination is a {solace.Queue}\n   * @param {Long} [lastMsgIdAcked=Long.UZERO] Last message ID acked, if re-binding\n   * @param {Long} [lastMsgIdReceived=Long.UZERO] Last message ID received, if re-binding\n   * @param {Boolean} [browser=false] If true, flow is a queue browser\n   * @param {ReplayStartLocation} [replayStartLocation=undefined] If set messages\n   *         are first retrieved from the replay log before live messages are received.\n   * @param {Long} [endpointErrorId=undefined] Endpoint Error ID identifying the flow\n   *         when rebinding.\n   *  @param {Long} [partitionGroupId=undefined] Partition Group ID for support of\n   *          Partition Queue feature, associate new flow with the same\n   *          PartitionGroupId as an old flow (e.g due to a reconnect).\n   * @param {Boolean} [hasNackSupport=false] If true, flow is created with Consumer Redelivery\n   * @returns {solace.AdProtocolMessage} The BIND message\n   * @internal\n   */\n  static getOpenMessageConsumer(queueDescriptor,\n                                queueProperties,\n                                endpoint,\n                                topicSubscription,\n                                correlationTag,\n                                windowSize,\n                                noLocal,\n                                wantFlowChangeUpdate,\n                                lastMsgIdAcked = Long.UZERO,\n                                lastMsgIdReceived = Long.UZERO,\n                                browser = false,\n                                replayStartLocation = undefined,\n                                endpointErrorId = undefined,\n                                partitionGroupId = undefined,\n                                hasNackSupport = false) {\n    /*\n    QUEUE FLOW                                      TE FLOW\n\n    {SMF Header, protocol=AssuredCtrl ttl=1}        {SMF Header, protocol=AssuredCtrl ttl=1}\n    [Correlation Tag Parameter]                     [Correlation Tag Parameter]\n    {AssuredCtrl Message Header, msgType=Bind}      {AssuredCtrl Message Header, msgType=Bind}\n\n    {AssuredCtrl QueueName Parameter}               {AssuredCtrl TopicEndpointName Parameter}\n    ***                                             {AssuredCtrl TopicName Parameter}\n    [AssuredCtrl Last Message Id Acked Parameter]   ***\n    [AssuredCtrl Last Message Id Recv'd Parameter]  ***\n    {AssuredCtrl Transport Window Size Parameter}   {AssuredCtrl Transport Window Size Parameter}\n    [AssuredCtrl Durability Parameter]              [AssuredCtrl Durability Parameter]\n    [AssuredCtrl Message Selector Parameter]        [AssuredCtrl Message Selector Parameter]\n    [AssuredCtrl FlowType Parameter]                [AssuredCtrl FlowType Parameter]\n    [AssuredCtrl Selector Parameter]                [AssuredCtrl Selector Parameter]\n    [AssuredCtrl AllOthersPermissions Parameter]    [AssuredCtrl AllOthersPermissions Parameter]\n    [AssuredCtrl EndpointQuotaMB Parameter]         [AssuredCtrl EndpointQuotaMB Parameter]\n    [AssuredCtrl EndpointMaxMessageSize Parameter]  [AssuredCtrl EndpointMaxMessageSize Parameter]\n    [AssuredCtrl TransactedSessionId Parameter]     [AssuredCtrl TransactedSessionId Parameter]\n    [AssuredCtrl NoLocal Parameter]                 [AssuredCtrl NoLocal Parameter]\n    [AssuredCtrl wantFlowChangeUpdate Parameter]    ***\n    [AssuredCtrl qEndpointBehaviourFlags Parameter] [AssuredCtrl qEndpointBehaviourFlags Parameter]\n    [AssuredCtrl MaxRedelivery Parameter]           [AssuredCtrl MaxRedelivery Parameter]\n    [AssuredCtrl browser Parameter]                 ***\n    */\n    const durable = queueDescriptor.durable;\n    const endpointBytes = endpoint.bytes;\n    const endpointType = endpoint.type;\n\n    // {SMF Header, protocol=AssuredCtrl ttl=1}        {SMF Header, protocol=AssuredCtrl ttl=1}\n    // [Correlation Tag Parameter]                     [Correlation Tag Parameter]\n    // {AssuredCtrl Message Header, msgType=Bind}      {AssuredCtrl Message Header, msgType=Bind}\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.BIND);\n    const header = message.smfHeader;\n    header.pm_corrtag = correlationTag;\n\n    // {AssuredCtrl QueueName Parameter}               {AssuredCtrl TopicEndpointName Parameter}\n    const endpointTypeParam = EndpointTypeToParam[endpointType];\n    if (endpointTypeParam === undefined) throw new OperationError('Unknown destination type');\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      endpointTypeParam,\n      endpointBytes\n    ));\n\n    // ***                                             {AssuredCtrl TopicName Parameter}\n    if (topicSubscription) {\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.TOPICNAME,\n        topicSubscription.bytes\n      ));\n    }\n\n    if (endpointType === DestinationType.QUEUE) {\n      //     [AssuredCtrl Last Message Id Acked Parameter]   ***\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.LASTMSGIDACKED,\n        lastMsgIdAcked\n      ));\n      //     [AssuredCtrl Last Message Id Recv'd Parameter]  ***\n      message.addParameter(new SMFParameter(\n        SMFUH.IGNORE,\n        SMFAdProtocolParam.LASTMSGIDRECEIVED,\n        lastMsgIdReceived\n      ));\n    }\n\n    // {AssuredCtrl Transport Window Size Parameter}\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      SMFAdProtocolParam.WINDOW,\n      windowSize\n    ));\n\n    // [AssuredCtrl Durability Parameter]\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.EP_DURABLE,\n      durable\n    ));\n\n    // Omit Message Selector\n    // Omit FlowType, CONSUMER assumed (not BROWSER currently)\n    // Omit TransactedSessionId\n\n    addQueueProperties(message, queueProperties, true);\n\n    if (noLocal /* is true */) {\n      // [AssuredCtrl NoLocal Parameter]\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.NOLOCAL,\n        0x1\n      ));\n    }\n\n    if (wantFlowChangeUpdate /* is true */) {\n      // [AssuredCtrl wantFlowChangeUpdate Parameter]    ***\n      message.addParameter(new SMFParameter(\n        SMFUH.IGNORE,\n        SMFAdProtocolParam.WANT_FLOW_CHANGE_NOTIFY,\n        0x1\n      ));\n    }\n\n    /**\n     * A Flow that has Browser support cannot have NACK support \n     */\n    if (hasNackSupport /* is true */) {\n      // [AssuredCtrl FlowType Parameter]    ***\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.FLOWTYPE,\n        0x3 // create flow with Consumer Redelivery support\n      ));\n    } else if (browser /* is true */) {\n      // [AssuredCtrl browser Parameter]    ***\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.FLOWTYPE,\n        0x2 // create flow with browser support\n      ));\n    }\n    if (replayStartLocation !== undefined) {\n      // [AssuredCtrl replay start location Parameter]\n      let rsValue = replayStartLocation._replayStartValue;\n      if (replayStartLocation._type === ReplayStartType.DATE) {\n        const replayStartTimeMs = Long.fromNumber(replayStartLocation._replayStartValue, true);\n        const replayStartTimeNs = replayStartTimeMs.multiply(1000000);\n        rsValue = replayStartTimeNs;\n      }\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.REPLAY_START_LOCATION,\n        {\n          type:  replayStartLocation._type,\n          value: rsValue,\n        }\n      ));\n    }\n\n    if (endpointErrorId !== undefined) {\n      // [AssuredCtrl EndpointErrorId Parameter]    ***\n      LOG_TRACE(`Adding endpointErrorId to message: ${endpointErrorId}`);\n      message.addParameter(new SMFParameter(\n        SMFUH.IGNORE,\n        SMFAdProtocolParam.ENDPOINT_ERROR_ID,\n        endpointErrorId\n      ));\n    }\n\n    // support for PartitionGroupId. Only send when not null and undefined\n    if (partitionGroupId !== undefined && partitionGroupId !== null) {\n      // [AssuredCtrl PartitionGroupId Parameter]    ***\n      LOG_TRACE(`Adding partitionGroupId to message: ${partitionGroupId}`);\n      message.addParameter(new SMFParameter(\n        SMFUH.IGNORE,\n        SMFAdProtocolParam.PARTITION_GROUP_ID,\n        partitionGroupId\n      ));\n    }\n\n    return message;\n  }\n\n  /**\n   * Creates an UNBIND request\n   * @param {Number} flowId The flow ID to unbind\n   * @param {Number} correlationTag The correlation tag for the request\n   * @param {?Long} lastMessageIdAcked The last message ID marked as locally acked\n   * @returns {AdProtocolMessage} The new UNBIND request\n   * @static\n   * @internal\n   */\n  static getCloseMessageConsumer(flowId,\n                                 correlationTag) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.UNBIND);\n\n    const header = message.smfHeader;\n    header.pm_corrtag = correlationTag;\n\n    message.addParameter(new SMFParameter(SMFUH.REJECT,\n                                          SMFAdProtocolParam.FLOWID,\n                                          flowId));\n    // linger: assume no\n\n    return message;\n  }\n\n  static getDTEUnsubscribeMessage(correlationTag,\n                                  topic) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.UNSUBSCRIBE);\n    const header = message.smfHeader;\n    header.pm_corrtag = correlationTag;\n\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      SMFAdProtocolParam.DTENAME,\n      topic.getBytes()\n    ));\n\n    return message;\n  }\n\n  /**\n   * @param {Number} flowId The flow on which to acknowledge messages.\n   * @param {?Long} [lastMessageIdAcked=undefined] The transport acknowledges receipt of all\n   *  messages up to and including this ID.\n   * @param {?Long} [windowSize=undefined] The size to which the flow window should be set.\n   * @param {?Map.<Array.<Array.<Long>>>} [applicationAckRanges=undefined] Low-high ID pairs of\n   *  message IDs to acknowledge at the application level. To application ack a single message,\n   *  pass `Map.set( MessageOutcome.ACCEPTED, [ [singleMessageId, singleMessageId] ] )`.\n   * @returns {solace.AdProtocolMessage} A message containing the given parameters.\n   * @internal\n   * @static\n   */\n  static getAck(flowId,\n                lastMessageIdAcked = undefined,\n                windowSize = undefined,\n                applicationAckRanges = undefined) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.CLIENTACK);\n\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      SMFAdProtocolParam.FLOWID,\n      flowId\n    ));\n\n    if (lastMessageIdAcked) {\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.LASTMSGIDACKED,\n        lastMessageIdAcked\n      ));\n    }\n\n    if (windowSize !== undefined && windowSize !== null) {\n      // There are two windowSize options; we'll use the legacy one for smaller\n      // window sizes\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        (windowSize <= 0xFF) ? SMFAdProtocolParam.WINDOW : SMFAdProtocolParam.TRANSPORT_WINDOW,\n        windowSize\n      ));\n    }\n\n    if (applicationAckRanges && (applicationAckRanges.size > 0)) {\n      // aggregate the total length of the ack/nack ranges\n      let totalRangeLen  = 0;\n      const allOutcomes = MessageOutcome.values;\n      for(let i = 0; i < allOutcomes.length; i ++) {\n        totalRangeLen += applicationAckRanges.has(allOutcomes[i]) ? applicationAckRanges.get(allOutcomes[i]).length : 0;\n      }\n\n      if (totalRangeLen > AdProtocolMessage.MAX_CLIENT_ACK_RANGES) {\n        throw new OperationError('Application ack range count exceeds limit of 64');\n      }\n      message.addParameter(new SMFParameter(\n        SMFUH.REJECT,\n        SMFAdProtocolParam.APPLICATION_ACK,\n        applicationAckRanges // DANGER: this needs to be encoded immediately, or else deep-cloned\n      ));\n    }\n\n    return message;\n  }\n\n  /**\n   * @param {Number} flowId The flow on which to acknowledge messages.\n   * @param {?Long} [endpointErrorId=undefined] endpoint error id\n   * @param {?Long} [lastMessageIdAcked=undefined] The transport acknowledges receipt of all\n   *  messages up to and including this ID.\n   * @returns {solace.AdProtocolMessage} A message containing the given parameters.\n   * @internal\n   * @static\n   */\n  static getUnbindAck(flowId, endpointErrorId = undefined, lastMessageIdAcked = undefined) {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.UNBIND);\n\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      SMFAdProtocolParam.FLOWID,\n      flowId\n    ));\n\n    if (endpointErrorId) {\n      LOG_TRACE(`Adding endpointErrorId to unbind ack: ${endpointErrorId}`);\n      message.addParameter(new SMFParameter(\n        SMFUH.IGNORE,\n        SMFAdProtocolParam.ENDPOINT_ERROR_ID,\n        endpointErrorId\n      ));\n    }\n    LOG_TRACE(`Not adding lastMessageIdAcked to unbind ack: ${lastMessageIdAcked}`);\n    //if (lastMessageIdAcked) {\n    //  LOG_TRACE(`Adding lastMessageIdAcked to unbind ack: ${lastMessageIdAcked}`);\n    //  message.addParameter(new SMFParameter(\n    //    SMFUH.REJECT,\n    //    SMFAdProtocolParam.LASTMSGIDACKED,\n    //    lastMessageIdAcked\n    //  ));\n    //}\n    return message;\n  }\n\n  /**\n   * @param {Number} flowId The flow on which the request arrived.\n   * @param {boolean} active Echoing back the request contents.\n   * @param {?String} [errorText=\"OK\"] Response text. Code is 400 instead of 200 if not \"OK\".\n   * @returns {solace.AdProtocolMessage} A message containing the given parameters.\n   * @internal\n   * @static\n   */\n  static getFlowChangeUpdateResponse(flowId, active, errorText=\"OK\") {\n    const message = new AdProtocolMessage(SMFAdProtocolMessageType.FLOWCHANGEUPDATE);\n    const respCode = (errorText === \"OK\") ? 200 : 400;\n\n    const header = message.smfHeader;\n    header.pm_respcode = respCode;\n    header.pm_respstr = errorText;\n\n    message.addParameter(new SMFParameter(\n      SMFUH.REJECT,\n      SMFAdProtocolParam.FLOWID,\n      flowId\n    ));\n    message.addParameter(new SMFParameter(\n      SMFUH.IGNORE,\n      SMFAdProtocolParam.ACTIVE_FLOW_INDICATION,\n      active ? 0x1 : 0x0\n    ));\n    return message;\n  }\n}\n\n\nAdProtocolMessage.MAX_CLIENT_ACK_RANGES = 64;\n\nmodule.exports.AdProtocolMessage = AdProtocolMessage;\n","const Bits = {\n  get(val, shift, numBits) {\n    return (val >>> shift) & ((0x01 << numBits) - 1);\n  },\n\n  set(dataIn, val, shift, numBits) {\n    const curMask = (1 << numBits) - 1;\n    const shiftedVal = (val & curMask) << shift;\n    const data = dataIn & ~(curMask << shift);\n    return (data | shiftedVal);\n  },\n};\n\nmodule.exports.Bits = Bits;\n","module.exports = require(\"fs\");","const { Enum } = require('solclient-eskit');\n\n/**\n * @private\n * @enum {number}\n */\nconst TransportReturnCode = {\n  OK:                          0,\n  FAIL:                        1,\n  NO_SPACE:                    2,\n  DATA_DECODE_ERROR:           3,\n  INVALID_STATE_FOR_OPERATION: 4,\n  CONNECTION_ERROR:            5,\n};\n\nmodule.exports.TransportReturnCode = Enum.new(TransportReturnCode);\n\n/* eslint-disable */\n// Manually demangle these names; bug 70031\nmodule.exports.TransportReturnCode._setCanonical({\n  'OK':                          TransportReturnCode.OK,\n  'FAIL':                        TransportReturnCode.FAIL,\n  'NO_SPACE':                    TransportReturnCode.NO_SPACE,\n  'DATA_DECODE_ERROR':           TransportReturnCode.DATA_DECODE_ERROR,\n  'INVALID_STATE_FOR_OPERATION': TransportReturnCode.INVALID_STATE_FOR_OPERATION,\n  'CONNECTION_ERROR':           TransportReturnCode.CONNECTION_ERROR\n});\n/* eslint-enable */\n","const { Bits, Convert } = require('solclient-convert');\nconst { LOG_DEBUG, LOG_TRACE } = require('solclient-log');\nconst { SMFSMPMessageType } = require('../smf-smp-message-types');\nconst { SMPMessage } = require('../message-objects');\n\nconst {\n  get: bits,\n  set: setBits,\n} = Bits;\n\nconst {\n  int8ToStr,\n  int32ToStr,\n} = Convert;\n\nconst SMP = {};\nSMP.parseSMPAt = function parseSMPAt(dataBuf, offset) {\n  if ((offset + 6) > dataBuf.length) {\n    // not enough data\n    LOG_DEBUG('Not enough data to read an SMP message.');\n    return false;\n  }\n  let pos = offset;\n  const onebyte = dataBuf.readUInt8(pos);\n  pos++;\n\n  // var msgUh = bits(onebyte, 7, 1);\n  const msgType = bits(onebyte, 0, 7);\n  const smpMsg = new SMPMessage();\n\n  if (!(msgType === SMFSMPMessageType.ADDSUBSCRIPTION ||\n        msgType === SMFSMPMessageType.REMSUBSCRIPTION ||\n        msgType === SMFSMPMessageType.ADDQUEUESUBSCRIPTION ||\n        msgType === SMFSMPMessageType.REMQUEUESUBSCRIPTION\n  )) {\n    LOG_DEBUG(`Found unsupported SMP messageType ${msgType}`);\n    return false; // unsupported type\n  }\n\n  LOG_TRACE('SMP.parseSMPAt called, ', dataBuf.toString('latin1'));\n\n  const msgLength = dataBuf.readUInt32BE(pos);\n  pos += 4;\n  if ((offset + msgLength) > dataBuf.length) {\n    // not enough data\n    LOG_DEBUG(`Invalid declared length of ${msgLength}, unable to read SMP message.`);\n    return false;\n  }\n  const msgFlags = dataBuf.readUInt8(pos);\n  pos++;\n\n  smpMsg.msgType = msgType;\n  smpMsg.smpFlags = msgFlags;\n  if (msgType === SMFSMPMessageType.ADDSUBSCRIPTION ||\n    msgType === SMFSMPMessageType.REMSUBSCRIPTION) {\n    // 6 is the base len (msgLength - 6)\n    smpMsg.encodedUtf8Subscription = dataBuf.toString('latin1', pos, pos + msgLength - 6);\n  } else {\n    const queueLength = dataBuf.readUInt8(pos);\n    pos++;\n    smpMsg.encodedUtf8QueueName = dataBuf.toString('latin1', pos, pos + queueLength);\n    pos += queueLength;\n    const subsLength = dataBuf.readUInt8(pos);\n    pos++;\n    smpMsg.encodedUtf8Subscription = dataBuf.toString('latin1', pos, pos + subsLength);\n    pos += subsLength;\n  }\n  return smpMsg;\n};\n\nSMP.encSmp = function encSmp(smpMsg) {\n  if (!(smpMsg.msgType === SMFSMPMessageType.ADDSUBSCRIPTION ||\n        smpMsg.msgType === SMFSMPMessageType.REMSUBSCRIPTION ||\n        smpMsg.msgType === SMFSMPMessageType.ADDQUEUESUBSCRIPTION ||\n        smpMsg.msgType === SMFSMPMessageType.REMQUEUESUBSCRIPTION\n  )) {\n    LOG_DEBUG(`Unsupported SMP message for encoding: ${smpMsg}`);\n    return false;\n  }\n\n  LOG_TRACE('encSmp called.', smpMsg);\n  const data = [];\n  let onebyte = 0;\n  onebyte = setBits(onebyte, 1, 7, 1);\n  onebyte = setBits(onebyte, smpMsg.msgType, 0, 7);\n  data.push(int8ToStr(onebyte));\n  let msgLength = 6 + smpMsg.encodedUtf8Subscription.length;\n  if (smpMsg.msgType === SMFSMPMessageType.ADDQUEUESUBSCRIPTION ||\n    smpMsg.msgType === SMFSMPMessageType.REMQUEUESUBSCRIPTION) {\n    msgLength += 2 + smpMsg.encodedUtf8QueueName.length; //both strings have a 1-byte length.\n  }\n  data.push(int32ToStr(msgLength)); // length\n  data.push(int8ToStr(smpMsg.smpFlags));\n  if (smpMsg.msgType === SMFSMPMessageType.ADDQUEUESUBSCRIPTION ||\n    smpMsg.msgType === SMFSMPMessageType.REMQUEUESUBSCRIPTION) {\n    //TODO: validate the lengths are < 251 including null termination!\n    // Somewhere else though.\n    data.push(int8ToStr(smpMsg.encodedUtf8QueueName.length));\n    data.push(smpMsg.encodedUtf8QueueName);\n    data.push(int8ToStr(smpMsg.encodedUtf8Subscription.length));\n    data.push(smpMsg.encodedUtf8Subscription);\n  } else {\n    data.push(smpMsg.encodedUtf8Subscription);\n  }\n  return data.join('');\n};\n\nmodule.exports.SMP = SMP;\n","const { WebTransportCapabilities } = require('./web');\n\nconst TransportCapabilities = {\n  web: WebTransportCapabilities,\n};\n\nmodule.exports.TransportCapabilities = TransportCapabilities;\n","const {\n  LOG_TRACE,\n  LOG_DEBUG,\n  LOG_INFO,\n  LOG_WARN,\n  LOG_ERROR } = require('solclient-log');\n\nconst { ArrayUtils } = require('solclient-util');\nconst { Convert,\n        Hex } = require('solclient-convert');\nconst { ErrorSubcode } = require('solclient-error');\nconst { mixin } = require('solclient-eskit');\nconst { TransportError } = require('../transport-error');\nconst { TransportReturnCode } = require('../transport-return-codes');\nconst { TransportSessionEvent } = require('../transport-session-event');\nconst { TransportSessionEventCode } = require('../transport-session-event-codes');\nconst { TransportSessionState } = require('../transport-session-states');\nconst { WebSocketCloseCodes } = require('./websocket-close-codes');\nconst { WebTransportSessionBase } = require('./web-transport-session-base');\n\nconst http = require('http');\nconst https = require('https');\n\nconst {\n  stringToArrayBuffer,\n} = Convert;\nconst {\n  formatHexString,\n} = Hex;\nconst {\n  includes,\n} = ArrayUtils;\n\n/* eslint-env browser */\n// closure mangles window.WebSocket\nconst globalContext = (typeof window === 'undefined' ? global : window);\nlet MyWebSocket = globalContext.WebSocket;\nif (BUILD_ENV.TARGET_NODE) {\n  /* eslint-disable no-global-assign */\n  /* eslint-disable global-require */\n  MyWebSocket = /** @type {WebSocket} */ (require('ws'));\n  /* eslint-enable no-global-assign */\n  /* eslint-enable global-require */\n}\n/* eslint-env shared-browser-node */\n\nfunction adaptURL(url) {\n  const v = url.match(/(ws|http)(s?:\\/\\/.+)/);\n  return `ws${v[2]}`;\n}\n\n\n/**\n * @classdesc\n * @private\n * @memberof solace\n */\nclass WebSocketTransportSession extends WebTransportSessionBase {\n\n  /**\n   * @constructor\n   * @param {String} url The url to connect to\n   * @param {function} eventCB The callback for transport events\n   * @param {SMFClient} client The SMF client for data events\n   * @param {Object} props Properties for the transport session\n   */\n  constructor(url, eventCB, client, props) {\n    super(url, eventCB, client, props);\n    /**\n     * @type {String}\n     */\n    this._url = adaptURL(url);\n\n    /**\n     * @type {?WebSocket}\n     */\n    this._socket = null;\n\n    /**\n     * @type {?string}\n     */\n    this._sessionId = new Date().getTime();\n\n    if (BUILD_ENV.TARGET_BROWSER) {\n      /**\n       * @type {Number}\n       */\n      this._bufferedAmountQueryIntervalInMsecs = props.bufferedAmountQueryIntervalInMsecs;\n      /**\n       * @type {?number}\n       */\n      this._bufferedAmountQueryTimer = null;\n      /**\n       * @type {Number}\n       */\n      this._bufferedAmountQueryIntervalDelayMultiplier = 1;\n    }\n  }\n\n\n  /**\n   * @private\n   */\n  onOpen() {\n    this.cancelConnectTimeout();\n    this._state = TransportSessionState.SESSION_UP;\n      // Send the event to the application letting it know that the session is up\n    this._eventCB(\n          new TransportSessionEvent(\n              TransportSessionEventCode.UP_NOTICE,\n              'Connected',\n              0,\n              null,\n              this._sessionId));\n  }\n\n  /**\n   * @param {Socket} originalSocket bound at the time of callback registration,\n   * safety against stray calls after socket is destroyed.\n   * @param {Event} event The websocket event causing the close\n   * @private\n   */\n  onClose(originalSocket, event) {\n    if (originalSocket !== this._socket) {\n      LOG_DEBUG('Websocket Transport Session stray onClose for previous socket, ignoring.');\n      return;\n    }\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_TRACE('WebSocket transport is being destroyed, ignore error');\n      return;\n    }\n    const msgBuf = [];\n    const code = WebSocketCloseCodes[event.code] || WebSocketCloseCodes[0];\n    msgBuf.push(`${event.code} ${code.name} (${code.description})`);\n    if (event.wasClean !== undefined) {\n      msgBuf.push(`clean closure: ${event.wasClean}`);\n    }\n    if (event.reason) {\n      msgBuf.push(`reason: ${event.reason}`);\n    }\n    const msg = msgBuf.join(', ');\n    LOG_DEBUG(`WebSocket transport connection is closed ${msg}`);\n    LOG_TRACE(`Event { type: ${event.type} wasClean: ${event.wasClean} code: ${event.code} reason: ${event.reason} }`);\n    this._state = TransportSessionState.CONNECTION_FAILED;\n    this.destroy(`Connection closed: ${msg}`, ErrorSubcode.COMMUNICATION_ERROR);\n  }\n\n  onDrain() {\n    LOG_TRACE('Drained socket');\n    this.maybeEmitCanSend();\n    this.maybeEmitFlush();\n  }\n\n  onBufferedAmountPoll() {\n    if (this.getBufferedAmount() === 0) {\n      this.onDrain();\n    } else if (this.scheduleQuery) {\n      this.scheduleQuery();\n    }\n  }\n\n  /**\n   * @param {Socket} originalSocket bound at callback registration.\n   * @param {TransportSessionEvent} event The event causing the error\n   * @private\n   */\n  onError(originalSocket, event) {\n    LOG_INFO(`Websocket Transport Session onError for socket ${originalSocket} while socket is ${this._socket}`);\n    if (originalSocket !== this._socket) {\n      LOG_INFO('Websocket Transport Session stray onError for previous socket, ignoring.');\n      return;\n    }\n    if (this._state === TransportSessionState.WAITING_FOR_DESTROY) {\n      LOG_INFO('WebSocket transport is being destroyed, ignore error');\n      return;\n    }\n    const msg = (event.message) ? (`: ${event.message}`) : '';\n    LOG_INFO(`WebSocket transport connection error ${msg} while in state ${this._state}`);\n    // There won't be an onClose call to clean up unless we are connected already.\n    if (this._state === TransportSessionState.WAITING_FOR_CONNECT) {\n      this.cancelConnectTimeout();\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      this.destroy(`Connection failed: ${msg}`, ErrorSubcode.CONNECTION_ERROR);\n    } else { // Sending error event only, onClose will clean up in due time.\n      this._eventCB(\n            new TransportSessionEvent(\n                TransportSessionEventCode.SEND_ERROR,\n                `Connection error${msg}`,\n                null,\n                ErrorSubcode.CONNECTION_ERROR, null));\n    }\n  }\n\n  /**\n   * @param {TransportSessionEvent} event The data event\n   * @private\n   */\n  onMessage(event) {\n    if (this._client) {\n      this._client.rxDataArrayBuffer(event.data);\n    }\n  }\n\n  /**\n   * @override\n   * @private\n   */\n  connectTimerExpiry() {\n    LOG_INFO('WebSocket transport connect timeout');\n    this.state = TransportSessionState.CONNECTION_FAILED;\n    this._eventCB(new TransportSessionEvent(\n      TransportSessionEventCode.CONNECT_TIMEOUT,\n      'Connection timed out',\n      null,\n      ErrorSubcode.TIMEOUT\n    ));\n  }\n\n  /**\n   * @override\n   * @private\n   */\n  connect() {\n    if (this._state !== TransportSessionState.DOWN) {\n      LOG_ERROR(`Invalid state for operation: ${TransportSessionState.nameOf(this._state)}`);\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n    if (!this._url) {\n      LOG_WARN('Cannot connect to null URL');\n      return TransportReturnCode.CONNECTION_ERROR;\n    }\n    if (this._socket) {\n      this.onError('Socket already connected');\n    }\n\n    LOG_INFO('Establishing WebSocket transport session');\n    try {\n      this.createConnectTimeout();\n      this._state = TransportSessionState.WAITING_FOR_CREATE;\n      if (BUILD_ENV.TARGET_NODE && !this._socketOptions) {\n        LOG_DEBUG('Creating Node websocket options');\n        this._socketOptions = this.createWebSocketOptions(this.onDrain.bind(this));\n      }\n      LOG_INFO('Constructing socket');\n      if (BUILD_ENV.TARGET_BROWSER) {\n        /**\n         * @type {WebSocket}\n         */\n        this._socket = new MyWebSocket(this._url, 'smf.solacesystems.com');\n      } else {\n        this._socket = new MyWebSocket(this._url, 'smf.solacesystems.com', this._socketOptions);\n        this._socket.ondrain = this.onDrain.bind(this);\n      }\n      // Closure is generally faster than bind\n      LOG_TRACE('Assigning properties to socket');\n      // Closure using Browser profile to avoid mangling this\n      this._socket.binaryType = 'arraybuffer';\n      this._socket.onopen = this.onOpen.bind(this);\n      this._socket.onmessage = this.onMessage.bind(this);\n      this._socket.onclose = this.onClose.bind(this, this._socket);\n      this._socket.onerror = this.onError.bind(this, this._socket);\n      LOG_TRACE('Prepared socket');\n    } catch (error) {\n      LOG_INFO(`Error connecting: ${error.message}`);\n      LOG_TRACE('Error details', error.stack || error);\n      this._state = TransportSessionState.CONNECTION_FAILED;\n      this.cancelConnectTimeout();\n      if (error instanceof TransportError) {\n        this._connError = error;\n      } else {\n        throw new TransportError(`Could not create WebSocket: ${error.message}`,\n                                 error.subcode || ErrorSubcode.CONNECTION_ERROR);\n      }\n      return TransportReturnCode.CONNECTION_ERROR;\n    }\n\n    LOG_INFO('WebSocket is connecting');\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @override\n   * @param {String} data The binary string data to send.\n   * @param {Boolean} [force=false] If true, send even if buffer is full.\n   */\n  send(data, force = false) {\n    if (this._state !== TransportSessionState.SESSION_UP) {\n      return TransportReturnCode.INVALID_STATE_FOR_OPERATION;\n    }\n\n    const dataLen = data.length;\n    const bufferAllow = (this._sendBufferMaxSize - this.getBufferedAmount()) >= 0;\n    // LOG_DEBUG('Websocket send:', dataLen, force, bufferAllow);\n    if (!(force || bufferAllow)) {\n      this._canSendNeeded = true;\n      if (this.scheduleQuery) this.scheduleQuery();\n      return TransportReturnCode.NO_SPACE;\n    }\n\n    // LOG_TRACE(`websocket.send: len=${data.length}`);\n    // Slice messages per maxPayloadBytes\n    const maxPayloadBytes = this._maxPayloadBytes;\n    const ab = stringToArrayBuffer(data);\n    if (dataLen > maxPayloadBytes) {\n      for (let i = 0; i < dataLen; i += maxPayloadBytes) {\n        this._socket.send(ab.slice(i, i + maxPayloadBytes));\n      }\n    } else {\n      this._socket.send(ab);\n    }\n    // LOG_TRACE(`websocket.send: after send getBufferedAmount=${this.getBufferedAmount()}`);\n    this._clientstats.bytesWritten += dataLen;\n    ++this._clientstats.msgWritten;\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @returns {Number} The number of already buffered bytes in this transport.\n   * @private\n   */\n  getBufferedAmount() {\n    // Access as string property because this is a defineProperty on node websocket,\n    // meaning it is not mangled by Closure Compiler\n    return this._socket ? this._socket['bufferedAmount'] : 0; // eslint-disable-line dot-notation\n  }\n\n  /**\n   * @override\n   */\n  flush(callback) {\n    this._flushCallback = callback;\n    this.maybeEmitFlush();\n  }\n\n  maybeEmitCanSend() {\n    if (this._canSendNeeded && this.getBufferedAmount() < this._sendBufferMaxSize) {\n      LOG_TRACE('Transport emitting CAN_ACCEPT_DATA');\n      this._canSendNeeded = false;\n      this._eventCB(\n        new TransportSessionEvent(TransportSessionEventCode.CAN_ACCEPT_DATA,\n                                  '', null, 0, this._sessionId));\n    }\n  }\n\n  maybeEmitFlush() {\n    if (!this._flushCallback) return;\n    if (BUILD_ENV.TARGET_BROWSER && this.getBufferedAmount() > 0) {\n      // Ensure we have a query scheduled, but don't interrupt a query in progress\n      if (!this._bufferedAmountQueryTimer) {\n        this.scheduleQuery();\n      }\n      return;\n    }\n\n    // Node is automatically flushed by socket.end(), which is called in non-error cases\n    LOG_DEBUG('Transport emitting FLUSH');\n    const cb = this._flushCallback;\n    this._flushCallback = null;\n    cb();\n  }\n\n  /**\n   * @override\n   */\n  destroy(message, subcode) {\n    // We can destroy (and get a notice) even if the socket is freshly created.\n    // But this will only work once.\n    if (this._state !== TransportSessionState.DOWN) {\n      LOG_INFO(`Destroy WebSocket transport: ${message}`);\n\n      // Set state for connection teardown.\n      this._state = TransportSessionState.WAITING_FOR_DESTROY;\n\n      if (this._socket) {\n        this._socket.close();\n        this._socket.onopen = null;\n        this._socket.onmessage = null;\n        this._socket.onclose = null;\n        this._socket.onerror = function onerrorStub() { }; // Prevent unhandled errors\n        this._socket = null;\n      }\n\n      if (this._connectTimer) {\n        clearTimeout(this._connectTimer);\n        this._connectTimer = undefined;\n      }\n\n      if (BUILD_ENV.TARGET_BROWSER) {\n        this.cancelQuery();\n        this._bufferedAmountQueryIntervalDelayMultiplier = 1;\n      }\n\n      this._canSendNeeded = false;\n\n      this._state = TransportSessionState.DOWN;\n\n      this._client = null; // Don't accept data.\n    }\n    // always send a DESTROYED_NOTICE in response to a destroy() even\n    // if we think the transport is already destroyed\n    if (this._eventCB) {\n      // Fire this *almost* instantly, but follow the HTTP\n      // transport pattern by guaranteeing an async callback.\n      this._eventCB(new TransportSessionEvent(TransportSessionEventCode.DESTROYED_NOTICE,\n                                              message || 'Session is destroyed',\n                                              null,\n                                              subcode || 0,\n                                              this._sessionId));\n      // Release references to other components\n      this._eventCB = null;\n    }\n\n    return TransportReturnCode.OK;\n  }\n\n  /**\n   * @override\n   * @returns {String} A description of this object.\n   */\n  getInfoStr() {\n    const str = `WebSocketTransportSession; sid=${formatHexString(this._sessionId)}`;\n    return str;\n  }\n\n  static browserSupportsBinaryWebSockets() {\n    LOG_DEBUG('websocket browserSupportBinaryCheck - ' +\n              'if WebSocket, ArrayBuffer and Uint8Array are supported');\n\n    const exists = ['function', 'object'];\n    if (!includes(exists, typeof MyWebSocket) ||\n        !includes(exists, typeof ArrayBuffer) ||\n        !includes(exists, typeof Uint8Array)) {\n      LOG_INFO('websocket browserSupportBinaryCheck: false - some required classes not supported');\n      return false;\n    }\n\n    LOG_DEBUG('websocket browserSupportBinaryCheck - if WebSocket supports binaryType');\n    if ('binaryType' in MyWebSocket.prototype) {\n      LOG_INFO('websocket browserSupportBinaryCheck: true - WebSocket supports binaryType');\n      return true;\n    }\n\n    LOG_INFO('websocket browserSupportBinaryCheck: false - WebSocket does not support binaryType');\n    return false;\n  }\n\n}\n\nif (BUILD_ENV.TARGET_BROWSER) {\n  mixin(WebSocketTransportSession, class WebSocketTransportSessionBrowser {\n    /**\n     * @private\n     */\n    scheduleQuery() {\n      const bufferedAmount = this.getBufferedAmount();\n      if (bufferedAmount > 0 && this._bufferedAmountQueryIntervalInMsecs > 0) {\n        this.cancelQuery();\n        if (this._bufferedAmountQueryIntervalDelayMultiplier > 1) {\n          LOG_DEBUG(`$$ schedule bufferedAmount query timer in ${\n                    this._bufferedAmountQueryIntervalInMsecs *\n                    this._bufferedAmountQueryIntervalDelayMultiplier} ms`);\n        }\n        const timeout = this._bufferedAmountQueryIntervalInMsecs *\n                        this._bufferedAmountQueryIntervalDelayMultiplier;\n        this._bufferedAmountQueryTimer = setTimeout(() => {\n          this.cancelQuery();\n          try {\n            this.onBufferedAmountPoll();\n          } catch (e) {\n            LOG_ERROR(`Error occurred in onBufferedAmountPoll: ${e.message}`);\n            LOG_TRACE('Error details:', e.stack || e);\n          }\n        }, timeout);\n      }\n    }\n\n    cancelQuery() {\n      if (this._bufferedAmountQueryTimer) {\n        clearTimeout(this._bufferedAmountQueryTimer);\n        this._bufferedAmountQueryTimer = null;\n      }\n    }\n  });\n} else {\n  // Node TLS socket options formulation shared with TCP transport\n  // eslint-disable-next-line global-require\n  const { NodeTLSOptsMixin } = require('../node-tls-opts-mixin');\n  mixin(WebTransportSessionBase, NodeTLSOptsMixin);\n  // Node-specific methods of this class go here\n  mixin(WebTransportSessionBase, class WebTransportSessionBaseNode {\n\n    /**\n     * @name solace.WebTransportSession#createWebSocketOptions\n     * @param {Function} onDrainCallback handler function for socket onDrain event\n     * @returns {Object} A WebSocket options object for the current configuration\n     * @private\n     */\n    createWebSocketOptions(onDrainCallback) {\n      let options = {};\n      if (this._ssl) {\n        options = this.createTLSOptions();\n        // use custom agent for client certificate support, ssl resume session support\n        // eslint-disable-next-line dot-notation\n        options['agent'] = new https.Agent({\n          keepAlive: false,\n        });\n      } else { // else no TLS:\n        // eslint-disable-next-line dot-notation\n        options['agent'] = new http.Agent();\n      }\n      // eslint-disable-next-line dot-notation\n      const wsAgent = options['agent'];\n      const origCreateConnection = wsAgent.createConnection;\n      wsAgent.createConnection = function newCreateConnection(opts, callback) {\n        const socket = origCreateConnection.call(this, opts, callback);\n        socket.on('drain', onDrainCallback);\n        return socket;\n      };\n      LOG_DEBUG('WebSocket options', options);\n      return options;\n    }\n  });\n}\n\nmodule.exports.WebSocketTransportSession = WebSocketTransportSession;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(5237);\n"],"names":["Worker","Object","defineProperty","exports","value","e","node_worker_1","c","_","msg","transfer","cb","done","w","eval","on","m","Error","postMessage","terminate","prototype","call","__","___","____","setImmediate","NOP","u8","Uint8Array","u16","Uint16Array","i32","Int32Array","fleb","fdeb","clim","freb","eb","start","b","i","r","j","_a","fl","revfl","_b","fd","revfd","rev","x","hMap","cd","mb","s","length","l","co","le","rvb","sv","r_1","v","flt","fdt","flm","flrm","fdm","fdrm","max","a","bits","d","p","o","bits16","shft","slc","subarray","FlateErrorCode","UnexpectedEOF","InvalidBlockType","InvalidLengthLiteral","InvalidDistance","StreamFinished","NoStreamHandler","InvalidHeader","NoCallback","InvalidUTF8","ExtraFieldTooLong","InvalidDate","FilenameTooLong","StreamFinishing","InvalidZipData","UnknownCompressionMethod","ec","err","ind","nt","code","captureStackTrace","inflt","dat","st","buf","dict","sl","dl","f","noBuf","resize","noSt","cbuf","bl","nbuf","Math","set","final","pos","bt","lm","dm","lbt","dbt","n","tbts","type","t","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","dt","lms","dms","lpos","sym","add","dsym","end","shift","dend","min","wbits","wbits16","hTree","push","t2","slice","et","sort","i0","i1","i2","maxSym","tr","mbt","ln","lft","cst","i2_1","i2_2","i2_3","lc","cl","cli","cln","cls","clen","cf","wfblk","out","wblk","syms","lf","df","li","bs","dlt","mlb","ddt","mdb","_c","lclt","nlc","_d","lcdt","ndc","lcfreq","_e","lct","mlcb","nlcc","ll","flen","ftlen","dtlen","llm","lcts","it","clct","len","dst","deo","dflt","lvl","plvl","pre","post","z","ceil","lst","opt","msk_1","prev","head","h","bs1_1","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","maxd","ml","nl","mmd","md","ti","lin","din","crct","k","crc","cr","adler","dopt","dictionary","newDat","level","mem","log","mrg","wcln","fn","fnStr","td","toString","ks","indexOf","lastIndexOf","replace","split","st_1","spInd","ch","wrkr","fns","init","id","td_1","default","buffer","constructor","cbfs","bInflt","inflateSync","pbf","gopt","bDflt","deflateSync","gze","gzh","gzhl","wbytes","guze","gzs","gzl","zle","zlh","zule","zls","size","cbify","opts","consume","astrm","strm","ondata","ev","data","astrmify","ext","Array","isArray","b2","b4","b8","filename","mtime","floor","Date","now","charCodeAt","flg","zs","lv","StrmOpt","this","Deflate","chunk","endLen","newBuf","AsyncDeflate","onmessage","deflate","Inflate","bts","AsyncInflate","inflate","Gzip","raw","Compress","AsyncGzip","gzip","gzipSync","AsyncCompress","compress","compressSync","Gunzip","onmember","AsyncGunzip","_this_1","offset","gunzip","gunzipSync","Zlib","AsyncZlib","zlibSync","zlib","Unzlib","AsyncUnzlib","unzlib","unzlibSync","Decompress","G","I","Z","_this_2","apply","arguments","AsyncDecompress","decompress","decompressSync","fltn","val","op","te","TextEncoder","TextDecoder","tds","decode","stream","dutf8","String","fromCharCode","DecodeUTF8","EncodeUTF8","strToU8","str","latin1","ar_1","encode","ar","ai","strFromU8","dbf","slzh","zh","fnl","es","z64e","sc","su","off","exfl","ex","wzh","u","ce","extra","col","exl","os","flag","compression","y","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","attrs","exf","wzf","ZipPassThrough","process","ZipDeflate","AsyncZipDeflate","Zip","file","fl_1","com","comment","hl_1","header","chks_1","pAll_1","_i","chks_2","chk","tr_1","ind_1","uf_1","nxt","cl_1","dd","splice","zip","keys","tot","slft","files","term","tAll","cbd","mt","cbf","oe","cdl","badd","loc","_loop_1","ms","cbl","zipSync","UnzipPassThrough","UnzipInflate","AsyncUnzipInflate","sz","Unzip","onfile","toAdd","is","oc","_loop_2","sig","this_1","bf","cmp_1","chks_3","unshift","d_1","sc_1","su_1","fn_1","file_1","name","ctr","chks_4","originalSize","register","decoder","queueMicrotask","setTimeout","unzip","ze","fltr","filter","_loop_3","c_1","no","infl","unzipSync","c_2","ConsumerLib","PublisherLib","SMFLib","SolclientFactoryLib","TransportLib","assert","CapabilityType","Check","CorrelatedRequest","Destination","ErrorResponseSubcodeMapper","ErrorSubcode","OperationError","FsmEvent","State","StateMachine","Hex","LogFormatter","Message","MessageOutcome","MessageDeliveryModeType","P2PUtil","SessionEvent","SessionEventCode","SessionEventName","SessionFSMEvent","SessionRequestType","SessionStateName","SslDowngrade","StatType","StatsByMode","StringUtils","SubscriptionUpdateTimeoutMessages","Codec","SDTCodec","Convert","anythingToBuffer","formatHexString","stripNullTerminate","STAT_TX_BYMODE_BYTES","STAT_TX_BYMODE_MSGS","STAT_RX_BYMODE_BYTES","STAT_RX_BYMODE_MSGS","STAT_TX_BYMODE_REDELIVERED","STAT_TX_BYMODE_BYTES_REDELIVERED","module","SessionFSM","sessionProperties","session","stats","hosts","super","fsm","logger","args","sessionIdHex","getCurrentStateName","LOG_TRACE","LOG_DEBUG","LOG_INFO","wrap","_sessionProperties","_session","_sessionStatistics","_hosts","_consumers","ConsumerFlows","_flowInterfaceFactory","flow","getCorrelationTag","bind","incStat","sendData","message","send","sendToTransport","sendControl","enqueueRequest","enqueueOutstandingCorrelatedReq","createDestinationFromDescriptor","createTemporaryDestination","isCapable","getCapability","updateQueueSubscription","canAck","_userBackpressured","clearCurrentError","initial","transitionTo","SessionDisconnected","context","getStateMachine","reset","unhandledEventReaction","sEvent","curState","getCurrentState","getName","CREATE_SUBSCRIBER","guaranteedFlowObject","DISPOSE","disposeInternal","FLOW_UP","SessionConnecting","CONNECTING","parentContext","handleTransportDestroyed","clearConnectTimer","_currentHost","getNextHost","transitionToExitPoint","connectWaitTimeInMsecs","_connectWaitTimer","processEvent","CONNECT_WAIT_TIMEOUT","WaitingForInterConnectTimeout","WaitingForTransport","entry","setConnectTimer","entryPoint","wasConnected","undefined","disconnected","_connectFailEvent","DISCONNECTED","_connectSuccessEvent","DestroyingTransport","DOWN_ERROR","RECONNECTED_NOTICE","_reconnectRetries","_currentError","eventText","responseCode","errorSubcode","eventReason","setPostEventAction","emitSessionEvent","build","RECONNECTING_NOTICE","CONNECT_FAILED_ERROR","UP_NOTICE","resolveHosts","setCurrentError","UNRESOLVED_HOSTS","EXCEPTION","DNS_RESOLUTION_COMPLETE","WaitingForDNS","reaction","DISCONNECT","transitionToEntryPoint","CONNECT_TIMEOUT","TIMEOUT","SEND_ERROR","sessionEvent","errEvent","TRANSPORT_DESTROYED","exit","clearTimeout","exitPoint","currentHostToString","CAN_ACCEPT_DATA","SessionTransportUp","WAITING_FOR_DNS","DESTROYING_TRANSPORT","destroyTransportSession","WAITING_FOR_INTERCONNECT_TIMEOUT","WAITING_FOR_TRANSPORT","errorMessage","initTransport","subcode","INTERNAL_ERROR","WaitingForTransportUp","WAITING_FOR_TRANSPORT_UP","_justEntered","returnCode","_transport","connect","TransportReturnCode","OK","CONNECTION_ERROR","describe","sessionId","internalTransition","TRANSPORT_UP","sendClientCtrlLogin","WaitingForLogin","LOGIN_FAILURE","WAITING_FOR_LOGIN","setClientCtrlTimer","TRANSPORT_PROTOCOL_CLIENTCTRL","clientCtrlMsg","smfMsg","response","getResponse","respCode","_responseCode","checkNoLocal","checkCompressedSsl","updateReadonlySessionProps","WaitForTransportChange","assign","COMPRESSED_TLS_NOT_SUPPORTED","NO_LOCAL_NOT_SUPPORTED","rawSubcode","getErrorSubcode","responseString","UNKNOWN_ERROR","DOWNGRADE_TIMEOUT","requestDowngrade","clearClientCtrlTimer","WAITING_FOR_TRANSPORT_CHANGE","rc","updateTransportCompression","newTransport","TRANSPORT_CHANGE_DONE","ReapplyingSubscriptions","REAPPLYING_SUBSCRIPTIONS","copySubscriptionCacheKeys","reapplySubscriptions","WaitForSubConfirm","WaitForCanAcceptData","SUBSCRIBE_TIMEOUT","clearSubscriptionCacheKeys","WAITING_FOR_SUBCONFIRM","TRANSPORT_PROTOCOL_SMP","smfRespHeader","smfHeader","subscriptionStr","encodedUtf8Subscription","pm_respcode","respText","pm_respstr","DestroyTransport","canConnectPublisher","_defaultPublisher","isBindWaiting","WaitingForMessagePublisher","WAITING_FOR_CAN_ACCEPT_DATA","TRANSPORT_CAN_ACCEPT_DATA","WAITING_FOR_PUBFLOW","sendPublisherSessionUpEvent","FLOW_FAILED","canConnectConsumer","flows","forEach","consumer","sendConsumerSessionUpEvent","reconnectingFlows","FullyConnected","SessionDisconnecting","cleanupSession","handleSubscriptionUpdateError","clearKeepAlive","FULLY_CONNECTED","scheduleKeepAlive","CONNECT","DISCONNECTING","DisconnectingFlows","DISCONNECTING_FLOWS","gatherPendingFlows","MessageConsumerEventName","isGathering","adaptedListenForDestroy","installfn","downEvents","known","has","pending","onFlowDown","event","_removeListener","delete","checkPendingFlows","_disconnectSession","_once","DOWN","proceed","FLOWS_DISCONNECTED","Set","FlushingTransport","FLUSHING_TRANSPORT","flushTransport","flushTransportSession","onTransportFlushed","TRANSPORT_FLUSHED","addToSubscriptionCache","destination","nothing","_subscriptionCache","key","_subscriptionCacheCount","cancelOutstandingCorrelatedReq","correlationTag","_correlatedReqs","req","LOG_ERROR","timer","ConsumerFSMEvent","ConsumerFSMEventNames","processFSMEvent","SESSION_DOWN","PublisherFSMEvent","PublisherFSMEventNames","_clientCtrlTimer","_connectTimer","_keepAliveTimer","clearInterval","resetKeepAliveCounter","noLocalSupported","noLocal","caps","getRouterCapabilities","NO_LOCAL","_compressedTLS","COMPRESSED_SSL","checkSessionDestinationCapability","error","getType","getSubscriptionInfo","isShare","isNoExport","SHARED_SUBSCRIPTIONS","SHARED_SUBSCRIPTIONS_NOT_SUPPORTED","_subscriptionCacheKeys","p2pTopic","getP2PTopicSubscription","p2pInboxBase","createMessagePublisher","publisherProperties","enabled","MessagePublisher","MessagePublisherEventName","publisher","properties","sessionInterfaceFactory","UP","description","REJECTED_MESSAGE","ctrlMessage","getADErrorSubcode","REJECTED_MESSAGE_ERROR","getCorrelationKey","ACKNOWLEDGED_MESSAGE","FLOW_NAME_CHANGED","messages","count","REPUBLISHING_UNACKED_MESSAGES","CAN_SEND","GUARANTEED_MESSAGING_DOWN","GUARANTEED_MESSAGE_PUBLISHER_DOWN","SESSION_UP","SESSION_UP_NO_AD","isAD","createMessageConsumer","MessageConsumer","consumerProperties","getProperties","topicEndpointSubscription","LOG_WARN","settlementOutcomes","requiredSettlementOutcomes","some","FAILED","REJECTED","AD_APP_ACK_FAILED","outcomeNotSupportedError","map","nameOf","join","INVALID_OPERATION","info","createQueueBrowser","MessageConsumerAcknowledgeMode","QueueBrowser","queueDescriptor","acknowledgeMode","CLIENT","browser","hasOwnProperty","connectTimeoutInMsecs","connectAttempts","windowSize","transportAcknowledgeTimeoutInMsecs","transportAcknowledgeThresholdPercentage","destroy","_smfClient","_disposed","operations","resetStats","_kaStats","removeFromSubscriptionCache","dispose","disposeAll","operationKey","operation","sendEvent","reqTimeoutCb","reqTimeout","correlationKey","respRecvCallback","readTimeoutInMsecs","outstandingReq","errorInFsm","errorEventText","stack","callback","flush","nextCorrelationTag","currentState","getFinalState","DISPOSED","getStat","statType","TX_TOTAL_DATA_MSGS","TX_DIRECT_MSGS","TX_PERSISTENT_MSGS","TX_NONPERSISTENT_MSGS","TX_TOTAL_DATA_BYTES","TX_DIRECT_BYTES","TX_PERSISTENT_BYTES","TX_NONPERSISTENT_BYTES","getTransportInfo","getInfoStr","handleADCtrlMessage","flowId","getFlowId","pm_corrtag","updateRxStats","cancelledRequest","respRecvdCallback","RX_REPLY_MSG_DISCARD","msgType","SMFAdProtocolMessageType","CLIENTACK","CLIENTNACK","CLOSEPUBFLOW","getFlowById","disposed","handleUncorrelatedControlMessage","RX_DISCARD_NO_MATCHING_CONSUMER","FLOWCHANGEUPDATE","respMsg","AdProtocolMessage","getFlowChangeUpdateResponse","_flowId","getActiveFlow","handleADTrMessage","pm_ad_flowid","handleDataMessage","handleApiSubscriptionTimeout","timeoutMsg","handleClientCtrlMessage","SMFClientCtrlMessageType","LOGIN","SMFClient","SMF_CLIENTCTRL_LOGIN_FAKE_CORRELATIONTAG","handleClientCtrlResponse","handleClientCtrlTimeout","handleConnectTimeout","handleUpdatePropertyTimeout","PROPERTY_UPDATE_ERROR","handleRejectedTrMessage","topicNameRaw","pm_tr_topicname_bytes","topicName","handleSMFMessage","discardMessage","RX_DISCARD_SMF_UNKNOWN_ELEMENT","smf_protocol","SMFProtocol","TRMSG","smf_adf","ADCTRL","CLIENTCTRL","SMP","handleSMPMessage","KEEPALIVE","KEEPALIVEV2","handleUnknownProtocolMessage","handleSMFParseError","transportError","PROTOCOL_ERROR","request","confirm","SUBSCRIPTION_ALREADY_PRESENT","SUBSCRIPTION_NOT_FOUND","handleSubscriptionTimeout","result","handleTransportEvent","transportEvent","infoStr","getTransportEventCode","TransportSessionEventCode","getSessionId","DESTROYED_NOTICE","getSubcode","GuaranteedFlowControlledRelief","DATA_DECODE_ERROR","PARSE_FAILURE","TSESSION","messageType","host","lastMsgWritten","lastBytesWritten","rxData","rxError","TransportFactory","createTransport","clone","injectTransportInterceptor","_transportInterceptor","interceptor","setInterceptor","keepAliveTimeout","_keepAliveCounter","keepAliveIntervalsLimit","KEEP_ALIVE_FAILURE","clientStats","getClientStats","prestatMsgWritten","msgWritten","prestatBytesWritten","bytesWritten","kaMsg","KeepAliveMessage","prepareAndSendMessage","payloadCompressionLevel","anything","_binaryAttachment","_structuredContainer","compressedAttachment","origSize","options","constants","Z_FINISH","getSdtContainer","encodedContainer","encodeSingleElement","_setCompressedBinaryAttachment","getHttpContentEncoding","_compressedCE","deliveryMode","getDeliveryMode","DIRECT","_payload_is_memoized","_memoized_csumm","_memoized_payload","PERSISTENT","NON_PERSISTENT","reason","adLocallyDisabled","GM_UNAVAILABLE","_gmSendDisallowed","prepareAdMessageAndSend","_getCompressedBinaryAttachment","NO_SPACE","INSUFFICIENT_SPACE","SolclientFactory","createTopicDestination","requestConfirmation","topicDestination","sendSubscribe","topic","sub","_eventCode","keepAliveIntervalInMsecs","setInterval","statTarget","forceAllowEnqueue","content","Encode","encodeCompoundMessage","updateTxStats","compressionLevel","match","_plaintextTLS","sslConnectionDowngradeTo","PLAINTEXT","ClientCtrlMessage","getLogin","rxMsgObj","requestTimeout","smpMsg","SMPMessage","getSubscriptionMessage","sendUpdateProperty","mutableSessionProperty","newValue","getUpdate","provisionEndpoint","queueDescriptior","queueProperties","getCreate","deprovisionEndpoint","getDelete","transportDowngradeTimeoutInMsecs","source","target","subscriptionUpdate","subject","requestType","force","isSMP","REMOVE_DTE_SUBSCRIPTION","ADD_SUBSCRIPTION","ADD_P2PINBOX","getDTEUnsubscribeMessage","REMOVE_SUBSCRIPTION","queueSubscriptionUpdate","queue","getQueueSubscriptionMessage","origReq","smfMessage","pm_deliverymode","msgStatKey","bytesStatKey","msgLength","messageLength","RX_TOTAL_DATA_MSGS","RX_TOTAL_DATA_BYTES","smf_di","RX_DISCARD_MSG_INDICATION","RX_CONTROL_MSGS","RX_CONTROL_BYTES","getReplyTo","TX_REQUEST_SENT","isRedelivered","TX_CONTROL_MSGS","TX_CONTROL_BYTES","clientCtrlRespMsg","props","_setVpnNameInUse","getVpnNameInUseValue","oldVirtualRouterName","virtualRouterName","newVirtualRouterName","getVridInUseValue","_setVirtualRouterName","handleVirtualRouterNameChange","_setP2pInboxBase","getP2PTopicValue","_setP2pInboxInUse","getP2PInboxTopic","updateCapabilities","gmCap","_getCapability","GUARANTEED_MESSAGE_PUBLISH","oldName","newName","onVRNChanged","VIRTUALROUTER_NAME_CHANGED","severTls","startCompression","Flow","PrivateFlowEventName","MessagePublisherProperties","PublisherFSM","direct","emits","values","_fsm","_makeFSM","formatter","_bindWaiting","BIND_WAITING","_onBindWaiting","_onBindFailed","_onDown","_onUp","sessionInterface","_sessionInterface","_properties","_flowName","publisherId","_publisherId","FLOW_CLOSE","getDisposedEvent","handleAck","ACK","ack","handleNack","nack","getLastMsgIdAcked","FLOW_UNBOUND","dataMsg","util_inspect","_disposeFSM","_isDisconnected","isDisconnected","Enum","WebTransportState","new","DOWNGRADING","DESTROYING","UUID","generateUUID","getTime","random","NODE_OS_TYPES","Darwin","Windows_NT","window","global","NODE_PROCESS","product","platform","agent","ostype","osname","nodeVersionStr","version","substr","release","arch","Process","Iterator","arr","_arr","_index","_end","deref","incr","makeIterator","REMOVE_P2PINBOX","MessageConsumerEvent","MessageConsumerProperties","QueueBrowserEventName","QueueBrowserProperties","require","CacheRequestResult","_returnCode","_subcode","_topic","_error","getReturnCode","getReturnSubcode","getTopic","getError","Debug","HTTPLib","WebSocketTransportSession","HTTPConnection","WebTransportCapabilities","webSocket","browserSupportsBinaryWebSockets","xhrBinary","browserSupportsXhrBinary","streaming","browserSupportsStreamingResponse","EncodeSingleElementLib","UtilLib","EncodeHeader","SDTDataTypes","SDTMapContainer","encodeHeader","EncodeMap","encodeMap","sdtmap","getKeys","sdtfield","strKeyField","strKeyName","getField","nullTerminate","EncodeSingleElement","encodeSingleElementToBuf","StringBuffer","LUT_PRINTABLE","tmp","padLeftRight","minLen","padSide","padChar","append","charAt","leastSpaces","line","spaces","capitalizeWord","toUpperCase","isEmptyFun","isEmpty","notEmpty","toSafeChars","padLeft","padRight","hexdump","output","printable","spacer","linelen","sLength","ccode","clear","heredoc","literals","substitutions","subst","lines","reduce","Infinity","substring","C_2_32","pow","leftPad","repeat","GlobalContext","sessionCounter","idCounter","RandId","toFixed","NextSessionCounter","NextId","GenerateClientName","GenerateUserIdentification","GenerateClientDescription","TransportBase","url","eventCB","client","transportProps","_url","_ssl","useSsl","_client","_eventCB","_props","immediate","forceFailure","getTransportProtocol","transportProtocol","beginDowngrade","_interceptor","removed","installed","urlParts","validSchemes","PARAMETER_OUT_OF_RANGE","MessageLib","BidiMap","PriorityUserCosMap","MessageUserCosType","COS1","COS2","COS3","BaseSMFClient","rxSmfCB","rxMessageErrorCB","_rxSmfCB","_rxMessageErrorCB","_correlationCounter","SMF_MAX_CORRELATION","CacheReturnCode","FAIL","INCOMPLETE","APIPropertiesValidators","MessagePublisherAcknowledgeMode","validateInstance","valBoolean","valIsMember","valNumber","valRange","MessagePublisherPropertiesValidator","validate","instance","Number","MAX_VALUE","DestinationLib","SDTMapContainerLib","SDTStreamContainerLib","ValidateLib","SDTFieldType","baseTypes","BOOL","UINT8","INT8","UINT16","INT16","UINT32","INT32","UINT64","INT64","WCHAR","STRING","BYTEARRAY","FLOATTYPE","DOUBLETYPE","failInvalidParameter","valueType","PARAMETER_INVALID_TYPE","validateSdtField","MAP","instanceOf","STREAM","SDTStreamContainer","DESTINATION","ACCEPTED","kForOnEventAttribute","kListener","kCode","Symbol","kData","kError","kMessage","kReason","kTarget","kType","kWasClean","Event","enumerable","CloseEvent","wasClean","ErrorEvent","MessageEvent","EventTarget","addEventListener","handler","listener","listeners","wrapper","isBinary","callListener","_closeFrameReceived","_closeFrameSent","once","removeEventListener","removeListener","thisArg","handleEvent","LogLevel","state","impl","INFO","LogBinding","GlobalBinding","ReplayStartLocation","ReplayStartType","ReplayStartLocationBeginning","_type","BEGINNING","DestinationType","SubscriptionInfo","ucs2ToUtf8","utf8ToUcs2","ProfileBinding","DESTINATION_PREFIX_FROM_TYPE","QUEUE","TEMPORARY_QUEUE","createPrefix","createOperationError","errorStr","INVALID_TOPIC_SYNTAX","legacyValidate","bytes","exceptionCreator","nameLength","bytesLength","isWildcarded","encodeBytes","topicUtf8Encode","prefix","networkName","DestinationUtil","createTemporaryName","vrid","TOPIC","decodeBytes","validateAndEncode","constError","subscriptionInfo","prefixType","startsWith","errorConst","subInfo","subInfoConst","parseFromName","QueueAccessType","QueueDiscardBehavior","QueuePermissions","QueuePropertiesValidator","permissions","accessType","quotaMB","maxMessageSize","respectsTTL","discardBehavior","maxMessageRedelivery","FactoryProfile","guaranteedMessagingEnabled","cometEnabled","byteArrayAsString","legacyInstance","v10Instance","forwardInstance","SolclientFactoryProfiles","_legacy","_v10","_forward","_default","version7","version10","version10_5","Lazy","Bits","ContentSummaryElement","ContentSummaryType","SMFUH","lazyValue","int8ToStr","int16ToStr","int24ToStr","int32ToStr","delModeEnumBidiMap","el","lutDelModeToEnum","forward","lutEnumToDelMode","reverse","uhTypeMap","paramTypeCount","uh","byte1","lenMap","fill","idx","lightMap","lenCount","ContentSummaryDecodeMap","XML_META","XML_PAYLOAD","BINARY_ATTACHMENT","CID_LIST","BINARY_METADATA","ParamParse","FIVE","SIX","dataBuf","readUInt8","paramLen","readInt32BE","delmode","lookup","get","elements","cumulativeSize","elementType","elementDeclaredLength","elementSize","readUInt16BE","readUIntBE","currentElement","contentSummaryArr","messageElementDescriptions","currentContentSummary","currentSizeStr","firstByte","paramtype","forcedLengthMode","lengthModeMap","lengthMode","lengthString","FORCED_LENGTH_MODE","byte2","SDTDestType","SDTField","SDTUnsupportedValueError","SDTValueErrorSubcode","Parameter","BinaryMetaBlock","payload","asEncodedSmf","smf","fromEncodedSmf","bufSmf","chunkCount","fourbyte","payloadLen","payloadOffset","Mixin","targetProto","addProto","getOwnPropertyNames","getOwnPropertyDescriptor","APIProperties","getDefaultLogLevel","SolclientFactoryProperties","logLevel","profile","_profile","number","_logLevel","_logger","Duplex","randomFillSync","PerMessageDeflate","EMPTY_BUFFER","kWebSocket","NOOP","isBlob","isValidStatusCode","mask","applyMask","toBuffer","kByteLength","maskBuffer","Buffer","alloc","RANDOM_POOL_SIZE","randomPool","randomPoolPointer","Sender","socket","extensions","generateMask","_extensions","_generateMask","_maskBuffer","_socket","_firstFragment","_compress","_bufferedBytes","_queue","_state","onerror","frame","dataLength","merge","skipMasking","from","readOnly","payloadLength","allocUnsafe","fin","opcode","rsv1","writeUInt16BE","writeUIntBE","close","TypeError","byteLength","RangeError","write","enqueue","dispatch","sendFrame","ping","getBlobData","pong","perMessageDeflate","extensionName","binary","params","_isServer","_threshold","blob","arrayBuffer","then","destroyed","nextTick","callCallbacks","dequeue","catch","onError","Reflect","list","cork","uncork","sender","ProvisionEvent","sessionEventCode","_queueDescriptor","_queueProperties","spec","details","ArrayUtils","parseURL","TimingBucket","Version","TransportCapabilities","defaultEnablePublisher","globallyEnabled","webSocketAvailable","web","getDefaults","acknowledgeTimeoutInMsecs","PER_MESSAGE","connectRetryCount","_enabled","defined","_windowSize","_acknowledgeTimeoutInMsecs","_acknowledgeMode","_connectRetryCount","_connectTimeoutInMsecs","EventEmitter","https","http","net","tls","randomBytes","createHash","Readable","URL","Receiver","BINARY_TYPES","GUID","kStatusCode","format","parse","kAborted","protocolVersions","readyStates","subprotocolRegex","WebSocket","address","protocols","_binaryType","_closeCode","_closeMessage","_closeTimer","_errorEmitted","_paused","_protocol","_readyState","_receiver","_sender","_bufferedAmount","_redirects","initAsClient","_autoPong","autoPong","binaryType","includes","bufferedAmount","_writableState","isPaused","onclose","onopen","protocol","readyState","setSocket","receiver","allowSynchronousEvents","isServer","maxPayload","skipUTF8Validation","receiverOnConclude","receiverOnDrain","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","senderOnError","setNoDelay","socketOnClose","socketOnData","socketOnEnd","socketOnError","OPEN","emit","emitClose","CLOSED","cleanup","removeAllListeners","abortHandshake","_req","CLOSING","errorEmitted","setCloseTimer","pause","sendAfterClose","resume","needDrain","websocket","protocolVersion","followRedirects","maxRedirects","socketPath","hostname","timeout","method","path","port","parsedUrl","SyntaxError","href","isSecure","isIpcUrl","invalidUrlMessage","pathname","hash","emitErrorAndClose","defaultPort","protocolSet","createConnection","tlsConnect","netConnect","headers","Connection","Upgrade","search","handshakeTimeout","offer","test","origin","Origin","username","password","auth","parts","_originalIpc","_originalSecure","_originalHostOrSocketPath","entries","toLowerCase","listenerCount","isSameHost","authorization","cookie","res","location","statusCode","addr","abort","upgrade","digest","update","serverProt","protError","secWebSocketExtensions","extensionNames","accept","finishRequest","servername","isIP","setHeader","receiverOnFinish","_readableState","endEmitted","read","finished","property","FATAL","ERROR","WARN","DEBUG","TRACE","ESKit","Factory","FSM","Log","MessageTracing","Publisher","SDT","Session","SMF","SolcacheSession","TestEnv","Transport","Util","Validate","fields","getExtraStringInfo","SMFParameter","begin","_value","_uh","_buffer","_begin","getValue","getUh","getBuffer","getBegin","getEnd","Long","DEFAULTS","_lastAcked","fromNumber","_lastSent","_next","longToString","MessageIds","lastAcked","fromValue","lastSent","setLastSent","next","HTTPTransportSession","TransportProtocol","TransportProtocolHandler","WebTransportEvent","WebTransportFSM","WebTransport","getId","webTransportProtocolList","_transportHandler","_webTransportFsm","notifyEvent","handleDestroyed","_transportSession","wEvent","_transportEvent","DOWNGRADE_FAILED","_lastDowngradeSucceeded","DOWNGRADE_SUCCEEDED","connectInternal","tpProtocol","HTTP_BASE64","HTTP_BINARY","HTTP_BINARY_STREAMING","evt","WS_BINARY","DESTROY","_destroyMsg","errorMsg","canCompleteDowngrade","destroyInternal","completeDowngrade","getConnError","_connError","DOWNGRADE","_downgradeMsg","DebugLib","SolclientDestinationLib","SolclientMessageLib","Baggage","TraceContextSetter","SolclientSDTLib","stringToUint8Array","parseAdpAt","parseCCAt","ParseSMF","parseSMFAt","parseSMPAt","parseTsSmfMsgAt","userCosForPriority","BIN_STRUCTYPES","MessageType","TEXT","adaptBinaryMetaToMessage","binaryMeta","messageIn","messageSdt","parseSingleElement","sdtstream","getNext","preambleByte0","_setPayloadCompressed","_messageType","BINARY","preambleByte1","setAsReplyMessage","sdtMap","setUserPropertyMap","headerMap","ci","mi","rt","si","sn","ts","ct","bag","ctx","setCorrelationId","setApplicationMessageId","setApplicationMessageType","setReplyTo","setSenderId","setSequenceNumber","getValueNoThrow","setSenderTimestamp","setGMExpiration","setHttpContentEncoding","setHttpContentType","_baggageObj","setBaggage","_setBaggage","_traceContextSetter","fromTraceContext","_setCreationContext","Decode","decodeCompoundMessage","payloadPosition","headerLength","_smfHeader","_setDeliverToOne","smf_dto","_setDeliveryMode","_setDestination","DestinationFromNetwork","createDestinationFromBytes","_setDiscardIndication","_setElidingEligible","smf_elidingEligible","_setDMQEligible","smf_deadMessageQueueEligible","_setUserCos","smf_priority","_setPriority","pm_msg_priority","pm_userdata","_setUserData","setRedelivered","pm_ad_redelflag","pm_ad_flowredelflag","setFlowId","setGuaranteedMessageId","pm_ad_msgid","setGuaranteedPreviousMessageId","pm_ad_prevmsgid","setPublisherId","pm_ad_publisherid","setPublisherMessageId","pm_ad_publishermsgid","setTopicSequenceNumber","pm_ad_topicSequenceNumber","setDeliveryCount","pm_ad_redeliveryCount","pm_ad_spooler_unique_id","_setSpoolerUniqueId","pm_ad_replication_mate_ack_message_id","_setSpoolerMessageId","pm_ad_local_spooler_message_id","isLong","pm_ad_ttl","setTimeToLive","toNumber","pm_ts_transport_context","_setTransportContext","cs","pm_content_summary","currentChunk","chunkBegin","position","chunkEnd","_setBinaryAttachment","binaryMetadataChunk","_setXmlMetadata","_setXmlContentInternal","_getPayloadCompressed","endsWith","inflatedAttachment","trim","_httpContentEncoding","newCE","trimRight","adaptSmfToMessage","formatDumpBytes","SMFSMPMessageTypeFlags","FLAG_FILTER","FLAG_PERSIST","SMF_SMP_FLAG_TOPIC","SMF_SMP_FLAG_RESPREQUIRED","SMF_SMP_FLAG_DELIVERALWAYS","setBits","encAdp0Param","encAdp8Param","encAdp16Param","encAdp32Param","encAdp64Param","int64ToStr","RSValueLenMap","encAdpReplayParam","valType","valObj","DATE","RGMID","suid","messageId","encAdp64AckPairParam","outcome","paramLength","encAdpUTF8NTParam","onebyte","adpVersion","twobyte","readUInt32BE","adpMsg","paramUH","paramType","paramValueLen","smfParam","addParameter","encAdp","paramspace","paramarray","getParameterArray","param","SMFAdProtocolParam","WINDOW","EP_DURABLE","ACCESSTYPE","FLOWTYPE","EP_RESPECTS_TTL","TRANSACTION_CTRL_MESSAGE_TYPE","TRANSACTED_SESSION_STATE","ACTIVE_FLOW_INDICATION","WANT_FLOW_CHANGE_NOTIFY","MAX_REDELIVERY","EP_BEHAVIOUR","PARTITION_GROUP_ID","FLOWID","TRANSPORT_WINDOW","EP_ALLOTHER_PERMISSION","EP_QUOTA","EP_MAX_MSGSIZE","GRANTED_PERMISSION","TRANSACTED_SESSION_ID","PUBLISHER_ID","LASTMSGIDSENT","LASTMSGIDACKED","LASTMSGIDRECEIVED","TRANSACTION_ID","ENDPOINT_ERROR_ID","REPLAY_START_LOCATION","replayParamVal","APPLICATION_ACK","ranges","settlementRanges","range","QUEUENAME","DTENAME","TOPICNAME","FLOWNAME","SELECTOR","TRANSACTED_SESSION_NAME","TRANSACTION_FLOW_DESCRIPTOR_PUB_NOTIFY","TRANSACTION_FLOW_DESCRIPTOR_PUB_ACK","TRANSACTION_FLOW_DESCRIPTOR_SUB_ACK","NOLOCAL","CUT_THROUGH","APPLICATION_PUB_ACK","paramdata","threebytes","padBytes","twobytes","TransportAckResult","DUPLICATE","OUT_OF_ORDER","TransportAcks","base","_acksPending","ZERO","tryReceive","messageID","prevMessageID","_lastReceived","gte","setAcked","acksPending","lastReceived","DestinationUtilLib","Queue","getOffset","_offset","createFromLocalName","queueName","encoding","isValidated","ShuntableTransport","_shunted","_dontEnd","_underlyingTransport","underlyingTransport","_interimBuffer","_transportDrained","_connected","shunt","dontEnd","_write","INVALID_STATE_FOR_OPERATION","_read","unpause","rxDataBuffer","onConnect","onClose","onDrain","resendBuffer","arg","shunted","StateLib","FsmObject","StateContext","logPadding","ancestorList","func","initialReaction","action","ReactionResult","caller","destState","getAncestorList","onInitial","external","processReactionResult","curContext","destStateIter","lowestCommonAncestor","onExit","getParent","onEntry","destInitial","reactionResult","destAncestorList","setLogPadding","padding","isRunning","TransportClientStats","TransportSessionState","WebTransportSessionBase","_connectTimeout","_clientstats","_sendBufferMaxSize","sendBufferMaxSize","_maxPayloadBytes","maxWebPayload","_queuedData","_queuedDataSize","_canSendNeeded","createConnectTimeout","connectTimerExpiry","cancelConnectTimeout","allowEnqueue","datalen","enqueueFailNoSpace","getQueuedDataToSend","bytesAllowed","getBufferedAmount","payloadSize","elem","elemLength","TSHState","StateWebSocketBinary","exitCb","nextState","validateLegal","NO_OBJ","subcodeSummary","expected","got","expectedStr","gotStr","check","validatorArgs","validateError","typename","boolean","orNothing","memberOfEnum","names","member","function","orNull","orUndefined","isMember","memberOf","object","objectValues","isNumber","isNumberOrNothing","isNumberOrNull","isRangeCompare","operator","operand","rangeCompare","isRangeCompareOrNothing","isStringOrNull","string","isString","isStringOrNothing","isValue","equal","Topic","QUEUE_PREFIX","createDestinationFromName","networkTopicName","networkTopicBytes","SMFTransportSessionMessageType","CREATE","CREATE_RESP","DESTROY_RESP","DATA","DATA_TOKEN","DATA_STREAM_TOKEN","SessionOperation","CTRL","SEND","QUERY_OPERATION","SESSION_DISCONNECT","FLOW_ACTIVE_IND","FLOW_OPEN","ACK_TIMEOUT","BIND_TIMEOUT","CREATE_TIMEOUT","UNBIND_TIMEOUT","TRANSPORT_ERROR","RECONNECT_INTERVAL_TIMEOUT","BIND_RESPONSE","CREATE_FAILED","CREATE_SUCCESS","LogImpl","trace","debug","warn","fatal","extension","subprotocol","keyRegex","server","STATUS_CODES","abortHandshakeOrEmitwsClientError","handleProtocols","clientTracking","verifyClient","noServer","backlog","_server","createServer","body","writeHead","listen","emitConnection","_removeListeners","addListeners","listening","handleUpgrade","clients","_shouldEmitClose","shouldHandle","index","secWebSocketProtocol","offers","secure","authorized","encrypted","verified","completeUpgrade","readable","writable","ws","concat","TX_REQUEST_TIMEOUT","RX_DIRECT_BYTES","RX_DIRECT_MSGS","RX_REPLY_MSG_RECVED","CACHE_REQUEST_SENT","CACHE_REQUEST_OK_RESPONSE","CACHE_REQUEST_FAIL_RESPONSE","CACHE_REQUEST_FULFILL_DISCARD_RESPONSE","RX_CACHE_MSG","CACHE_REQUEST_INCOMPLETE_RESPONSE","CACHE_REQUEST_LIVE_DATA_FULFILL","TX_PERSISTENT_BYTES_REDELIVERED","TX_PERSISTENT_REDELIVERED","TX_NONPERSISTENT_BYTES_REDELIVERED","TX_NONPERSISTENT_REDELIVERED","TX_ACKS_RXED","TX_WINDOW_CLOSE","TX_ACK_TIMEOUT","RX_PERSISTENT_BYTES","RX_PERSISTENT_MSGS","RX_NONPERSISTENT_BYTES","RX_NONPERSISTENT_MSGS","RX_ACKED","RX_DISCARD_DUPLICATE","RX_DISCARD_OUT_OF_ORDER","RX_SETTLE_REJECTED","RX_SETTLE_FAILED","RX_SETTLE_ACCEPTED","EXCLUSIVE","NONEXCLUSIVE","ccMsg","paramUh","smfP","encCC","paramSpace","paramArray","currentParam","currentParamOneByte","paramData","MessageCacheStatus","MessageDumpFlag","MessageDumpUtil","RgmidFactory","MessageTracingSupport","TraceContext","isBoolean","isEnumMember","isInstanceOf","isInstanceOfOrNothing","MESSAGE_CLONE_OPTIONS","circular","includeNonEnumerable","initMessage","_deliveryMode","_userCos","_cacheStatus","LIVE","_spoolerUniqueId","_priority","_deliveryCount","_creationContext","_transportContext","_baggage","_applicationMessageId","getApplicationMessageId","_applicationMessageType","getApplicationMessageType","getBinaryAttachment","setBinaryAttachment","getCacheRequestId","_cacheRequestId","_setCacheRequestID","cacheRequestID","getCorrelationId","_correlationId","_correlationKey","setCorrelationKey","isDeliverToOne","_deliverToOne","setDeliverToOne","setDeliveryMode","getDestination","_destination","setDestination","isDiscardIndication","_discardIndication","setDiscardIndication","isElidingEligible","_elidingEligible","setElidingEligible","getHttpContentType","_httpContentType","getPublisherId","getPublisherMessageId","_publisherMsgId","getTimeToLive","_timeToLive","isNaN","getGMExpiration","_expiration","isDMQEligible","_dmqEligible","setDMQEligible","getGuaranteedPreviousMessageId","_guaranteedPrevMsgId","_getSpoolerUniqueId","INVALID_SUID","getMessageConsumer","_consumer","setMessageConsumer","getGuaranteedMessageId","_guaranteedMsgId","_spoolerMessageId","getReplicationGroupMessageId","eq","smid","msgid","getTopicSequenceNumber","_topicSequenceNumber","topicSeqNo","getDeliveryCount","deliveryCount","settle","messageSettlementOutcome","_acked","MESSAGE_ALREADY_ACKNOWLEDGED","MESSAGE_DELIVERY_MODE_MISMATCH","SESSION_NOT_CONNECTED","hasAutoAckSupport","settlementOutcome","doesConsumerSupportOutcome","applicationSettle","isSettled","_validateBeforeAcknowledge","acknowledge","applicationAck","_autoAcknowledge","isAcknowledged","isAcknowledgeImmediately","_ackImmediately","setAcknowledgeImmediately","_setAcknowledgeImmediately","getCacheStatus","_setCacheStatus","cacheStatus","isReplyMessage","_replyMessage","_redelivered","getReceiverTimestamp","_receiverTimestamp","_replyTo","getSenderId","_senderId","getSenderTimestamp","_senderTimestamp","getSequenceNumber","_sequenceNumberError","_sequenceNumber","_autoSequenceNumber","getUserCos","getPriority","setUserCos","setPriority","getUserData","_userData","setUserData","getXmlContent","_xmlContent","getXmlContentDecoded","setXmlContent","setValue","unescape","encodeURIComponent","setXmlMetadata","_xmlMetadata","getXmlMetadata","_binaryMetaChunk","meta","hasAutoSequenceNumber","hasAutoSenderTimestamp","_autoSenderTimestamp","getUserPropertyMap","_userPropertyMap","setSdtContainer","container","structuredContainer","binaryAttachment","binaryAttachmentLength","_compressedBinaryAttachment","_payloadCompressed","getTraceContextSetter","getCreationContext","getTransportContext","setTransportContext","contextSetter","getBaggage","dump","flags","MSGDUMP_FULL","validFlags","clearExtendedVarLenParams","SOLCLIENT_USER_PROP_QUEUE_PARTITION_KEY","fs","SolclientSessionLib","NodeTLSOptsMixin","checkCertificateCNs","cert","sslTrustedCommonNameList","valid","cn","createTLSOptions","useClientCert","authenticationScheme","AuthenticationScheme","CLIENT_CERTIFICATE","constMap","SessionProperties","SslProtocolExcludeConstantMap","sslExcludedProtocols","supported","SUPPORTED_SSL_PROTOCOLS","supportedLC","tlsMinProtocol","minIndex","tlsMaxProtocol","maxIndex","sslCipherSuites","default_tls13_ciphers","DEFAULT_CIPHERS","trimmed","cipher","sslValidateCertificate","sslTrustStores","tsContents","tsFile","readFileSync","FAILED_LOADING_TRUSTSTORE","sslPfx","sslPfxPassword","FAILED_LOADING_CERTIFICATE_AND_KEY","sslPrivateKey","sslPrivateKeyPassword","sslCertificate","ParseSingleElementLib","ParseFieldHeader","ParseMap","mapObj","keyFieldHeader","parseFieldHeader","create","keyString","valueFieldHeader","valueField","ParseSingleElement","addField","DEFAULT_PROPERTY_OPTIONS","setPropertyValue","lazyProperty","evalFn","configurable","lazyProperties","obj","SolaceError","sourceData","inspect","getSourceData","tag","valueLen","byte0","strSdtLen","Map","Stream","MessageRxCBInfo","messageRxCBFunction","userObject","TransportSMFMessage","remains","parseTsSmfHdrAt","smfheader","transportSMFMessage","tsHdrLen","tsHeaderLength","rtrTagLen","routerTag","tsHeaderPreLength","tsDestroyHeaderPreSid","tsCreateHeader","tsDataTokenPreSid","tsDataStreamTokenPreSid","genTsCreateHeader","genTsDestroyHeader","sid","genTsDataTokenMsg","genTsDataStreamTokenMsg","paddingBytes","genTsDataMsgHeaderParts","FlowOperation","START","STOP","GET_STATS","RESET_STATS","GET_PROPERTIES","GET_DESTINATION","PEER_SOFTWARE_VERSION","PEER_SOFTWARE_DATE","PEER_PLATFORM","PEER_PORT_SPEED","PEER_PORT_TYPE","MAX_DIRECT_MSG_SIZE","PEER_ROUTER_NAME","MESSAGE_ELIDING","GUARANTEED_MESSAGE_CONSUME","TEMPORARY_ENDPOINT","GUARANTEED_MESSAGE_BROWSE","ENDPOINT_MGMT","MAX_GUARANTEED_MSG_SIZE","ACTIVE_CONSUMER_INDICATION","COMPRESSION","ENDPOINT_DISCARD_BEHAVIOR","ENDPOINT_MESSAGE_TTL","JNDI","PER_TOPIC_SEQUENCE_NUMBERING","QUEUE_SUBSCRIPTIONS","SUBSCRIPTION_MANAGER","TRANSACTED_SESSION","MESSAGE_REPLAY","BR_REPLAY_ERRORID","VAR_LEN_EXT_PARAM","ClientCapabilityType","UNBIND_ACK","BR_ERRORID","PQ","ParseDestination","ParseFloat","ParseInteger","ParseStream","parseFloatField","parseIntegerField","parseMapAt","parseStreamAt","parseDestination","fieldHeader","elemValLen","Null","NULLTYPE","Boolean","Integer","UnsignedInteger","Float","Char","ByteArray","SMFMessage","SMF_MESSAGE","UNKNOWN","StringToBuffer","stringToBuffer","makeMap","keyValuePairs","QueueLib","AUTO","activeIndicationEnabled","_browser","replayStartLocation","reconnectAttempts","reconnectIntervalInMsecs","createIfMissing","something","AbstractQueueDescriptor","QueueDescriptor","QueueProperties","_bindTimeoutInMsecs","_connectAttempts","_topicEndpointSubscription","createFromName","_requiredSettlementOutcomes","array","_transportAcknowledgeTimeoutInMsecs","acknowledgeThreshold","_transportAcknowledgeThresholdPercentage","_activeIndicationEnabled","_noLocal","_replayStartLocation","_reconnectAttempts","_reconnectIntervalInMsecs","_createIfMissing","SolclientSession","PublisherStateNames","ConnectReason","flowIdDec","_publisher","_stateEvents","_guaranteedEnabled","_sendWindow","_resetConnectedInfo","_notifiedWindowClosed","_transportFlowControlled","PublisherUnbound","TRANSPORT_FULL","UNBOUND","emitDownAndBindWaiting","PublisherOpenFlowSent","OPENFLOWSENT","emitOpenFlowFailedError","handleOpenFlowResponse","OPENPUBFLOW","respStr","mappedSubcode","lastMsgIDAcked","getWindow","flowName","getFlowName","_messageIds","_unackedList","_connectReason","_renumber","payloadSizeLimit","_handleAck","_firstUnackedToSend","handleOpenFlowTimeout","handleUnknownFlowName","externalTransitionTo","sendOpenFlow","openPubFlowMsg","getOpenMessagePublisher","PublisherCloseFlowSent","PublisherUp","pEvent","UNKNOWN_FLOW_NAME","CLOSEFLOWSENT","handleCloseFlowResponse","handleCloseFlowTimeout","sendCloseFlow","closePubFlowMsg","getCloseMessagePublisher","_handleAckEvent","emitFlowUp","PublisherRetransmitting","PublisherDataXfer","_scheduleStateEvents","DATA_XFER","_maybeEmitCanSend","PublisherFlowControlled","FLOW_CONTROLLED","RETRANSMITTING","retransmit","_resendFromUnacked","RESEND_COMPLETE","getActiveState","TX_WINDOW_CLOSED","unackedList","dupMsg","adaptMessageToSmf_payloadMemoize","MESSAGE_TOO_LARGE","_cloneNumbers","msgId","_startAckTimer","pop","openFlow","messageIds","reportAcked","reportNacked","numAcked","lastAckedMessage","_resetAckTimer","_clearAckTimer","resendIndex","failover","_ackTimer","_emitStateEvents","pair","_handleAckTimeout","current","fromMsg","toMsg","_setPostEventAction","desc","_postEventAction","streamObj","formatEventName","eventName","messageConsumer","MESSAGE","_messageConsumer","_setupEventListers","_onConsumerUp","_onConsumerConnectFailed","_onConsumerDown","_onConsumerDownError","_onConsumerMessage","_onConsumerDisposed","GM_DISABLED","_onConsumerGMDisabled","disconnect","stop","removeMessageFromQueue","hasBlob","Blob","Stats","parent","_parent","_statsMap","TransportError","CacheCBInfo","CacheContext","CacheLiveDataAction","CacheRequest","CacheReturnSubcode","CacheSession","CacheSessionProperties","CACHE_REQUEST_PREFIX","ConsoleLogImpl","isFunction","getImpl","getLogLevel","setImpl","setLogLevel","forwarder","addGlobalFuncs","newLevel","addInitializer","Binding","_formatter","self","genericFunction","targetSelf","TransportSessionEvent","strToByteArray","strToHexArray","PacketReadState","BufferImpl","baseUrl","_haveToken","_confMaxWebPayload","_destroyTimer","_destroyTimeout","_createUrl","_routerUrl","_rxChannelClient","_httpSendConn","_httpReceiveConn","_smfDataTokenTSHeader","_routerTag","_sid","_transportProtocol","_useBinaryTransport","_useStreamingTransport","_streamingTransportPadding","_incomingBuffer","_packetReadState","navigator","userAgent","transportContentType","_contentType","destroyCleanup","updateMaxWebPayload","trLessEncapSMF","_createConn","handleCreateResponse","handleCreateConnFailure","createMsg","WAITING_FOR_CREATE","connError","CONNECTION_FAILED","WAITING_FOR_DESTROY","destroyTimerExpiry","handleRxDataToken","handleSendFailure","destroyMsg","dataIn","enqueueData","remainder","transportPacketLen","_smfDataTSHeaderParts","dataLen","initPreformattedHeaders","_flushCallback","sendQueuedData","tsRc","parsedResponse","smfresponse","useBase64","useStreaming","handleRxStreaming","handleSmfMessage","handleSmfParseError","handleRxData","handleDestroyResponse","cancelDestroyTimeout","innerResponse","tsmsg","TotalPayloadToRead","smfErrResponse","responseErrStr","recStat","rxDataString","handleRxError","isSMFHeaderAvailable","isSMFHeaderValid","errorInfo","status","asyncSendEvent","finalize","nameChecks","EndpointNameComplaint","EMPTY_STRING","LT","GT","ASTERISK","QUESTION_MARK","AMPERSAND","SEMICOLON","LEADING_SLASH","TRAILING_SLASH","DOUBLE_SLASH","TOO_LONG","NO_ISSUE","explainInvalidEndpointName","isTE","triplet","flatten","BaseChecks","instanceOfAny","types","empty","truthy","rangeGe","rangeMinInclusive","rangeGt","rangeMin","rangeLe","rangeMaxInclusive","rangeLt","rangeMax","epsilon","abs","NaN","included","none","cacheRequestCorrelationId","bufferUtil","Limiter","FastBuffer","species","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","zlibLimiter","deflateOnData","inflateOnData","_maxPayload","inflateOnError","_inflate","_options","threshold","_deflate","concurrency","concurrencyLimit","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","configurations","normalizeParams","acceptAsServer","acceptAsClient","accepted","find","num","isInteger","_decompress","endpoint","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","createDeflateRaw","zlibDeflateOptions","Z_SYNC_FLUSH","byteOffset","BaseMessage","SMFHeader","SMFSMPMessageType","encodedUtf8QueueName","smpFlags","_encodedQueueName","_encodedClientName","isFlag","flagMask","setFlag","requestConfirm","smp","ADDSUBSCRIPTION","REMSUBSCRIPTION","getBytes","ADDQUEUESUBSCRIPTION","REMQUEUESUBSCRIPTION","SMF_SMP_FLAG_PERSIST","Timer","cancel","newInterval","interval","onInterval","timerRef","newTimeout","onExpire","XHRFactory","allowFail","xhr","XMLHttpRequest","CREATE_XHR_FAILED","SessionState","CONNECTED","SESSION_ERROR","smf_uh","messageConsumerEventName","_messageConsumerEventName","_infoStr","_errorSubcode","_reason","requestEventCode","VALUE_OUTSIDE_SUPPORTED_RANGE","_mask","_unmask","totalLength","toArrayBuffer","isBuffer","ArrayBuffer","isView","unmask","env","WS_NO_BUFFER_UTIL","readFloatBE","readDoubleBE","BASIC","AUTHENTICATION_SCHEME_BASIC","AUTHENTICATION_SCHEME_CLIENT_CERTIFICATE","OAUTH2","CodecLib","SMFClientCtrlParam","SMFParameterType","SMFExtendedParameterType","ConsumerStateNames","UNBOUND_AWAIT_SESSION_UP","UNBOUND_AWAIT_FLOWOPEN","UNBOUND_AWAIT_ANY","BIND_SENT","FLOW_UP_XFER","FLOW_UP_XFER_INACTIVE","UNBIND_SENT","RECONNECTING","RECONNECTING_BIND_SENT","RECONNECTING_AWAIT_SESSION_UP","RECONNECTING_AWAIT_TIMER","CREATE_SENT","ADDSUBSCRIPTIONFORCLIENTNAME","REMSUBSCRIPTIONFORCLIENTNAME","eventQueue","finalState","handleUncaughtException","exc","processingEvents","_onEventCompletion","terminateFsm","postEventAction","activeStates","isStateActive","handleUnhandledEvent","uncaughtExceptionReaction","exitCallback","_exitCallback","_nextState","_unsupportedRuntimeMessage","getNextState","setNextState","getUseSsl","onEnter","duplexOnEnd","duplexOnError","terminateOnDestroy","duplex","autoDestroy","objectMode","writableObjectMode","_destroy","called","_final","MessageDumpUtilLib","MessageDumpStandardProvider","fpDestination","dest","fpSenderId","fpAppmsgType","fpAppMsgId","fpSequenceNumber","sequenceNum","fpTopicSequenceNumber","fpCorrelationId","fpHttpContentType","fpHttpContentEncoding","fpSendTimestamp","timestamp","formatDate","fpRcvTimestamp","fpClassOfService","fpDeliveryMode","fpGuaranteedMsgId","fpReplicationGroupMessageId","rgmid","fpTimeToLive","timeToLive","mdu","fpExpiration","fpMessageDMQEligible","fpMessageRedelivered","fpMessageDeliveryCount","fpDiscardIndication","fpAckImmediately","fpElidingEligible","fpReplyMessage","fpReplyTo","replyTo","fpDeliverToOne","fpCacheMessage","fpCacheRequestId","cacheRequestId","fpUserPropertyMap","propMap","detailValue","printMap","fpCorrelationTag","strValue","fpUserData","fpXmlMetadata","xmlMetadata","fpTracingCreationContext","isPresent","getTraceId","getSpanId","fpTracingTransportContext","fpTracingBaggage","fpSdtStream","sdtFieldValue","countItems","printStream","fpSdtMap","fpBinaryAttachment","att","fpXmlContent","xml","DISCONNECT_FAILED_ERROR","mixin","TcpTlsTransport","_drained","_tlsSocket","_writable","_socketError","_sessionId","setClientStats","rehome","parseHostPort","urlString","urlParsed","_compressionLevel","onData","originalSocket","_rawSocket","hadError","COMMUNICATION_ERROR","onOpen","Socket","tlsOptions","onerrorStub","bufferSize","prevCallback","EncodeInteger","EncodeStream","IEEE754LIB","int48ToStr","encodeStream","C_2_48","fieldVal","toIEEE754Single","toIEEE754Double","hdr","MSGDUMP_BRIEF","_instanceof","nativeMap","nativeSet","nativePromise","Promise","depth","allParents","allChildren","useBuffer","_clone","child","proto","resolve","reject","__isArray","__isRegExp","RegExp","__getRegExpFlags","lastIndex","__isDate","copy","getPrototypeOf","keyChild","valueChild","entryChild","getOwnPropertySymbols","symbols","symbol","descriptor","allPropertyNames","propertyName","__objToStr","regExpOptions","ignoreCase","multiline","clonePrototype","emptyCloneFunc","StateBinary","FULFILL","FLOW_THRU","buckets","bucketCount","normalized","cont","Resolver","compoundKey","rawPath","pathArr","commonSource","keySource","traversePath","toIEEE754","vIn","ebits","fbits","bias","LN2","parseInt","fromIEEE754","byteI","strToByteArr","byteArrToStr","fromIEEE754Double","fromIEEE754Single","CacheGetResultCode","INVALID","matchTopic","sessionID","isSuspect","hasMore","hasTimestamps","messageStream","clusterNameStream","CacheGetResult","readFromStream","hasNext","TcpRawTransport","CompressedTransport","TlsOnlyTransport","compressingLayer","plaintextTransport","setUnderlyingTransport","tlsLayer","uncompressedTransport","encryptedTransport","precallback","tlsShutdown","Base64","base64Encode","uint8ArrayToString","encContentSummary","encDeliveryMode","encLightSMFParam","encodeSMFParam","encodeSMFExtendedParam","encSmp","priorityForUserCos","addContentElementToArrays","csumm","payloadArray","dataChunk","cstype","cse","addToMapIfPresent","encodedSdtPayload","getEncodedTraceContext","sdtPreamble","sdtStreamContainer","adaptMessageToBinaryMeta","binaryMetaSMF","MAX_24BITS","adaptMessageToSmf","smfHeaderIn","payloadBytes","adaptMessageToSmf_payloadFinalize","pm_ad_publishermsgId","pm_ad_ackimm","pm_queue_len","pm_queue_offset","userData","adaptMessageToSmf_nonPayload","maskValues","bitRange","DI_BIT","ELIDING_ELIGIBLE_BIT","DTO_BIT","ADF_BIT","DMQE_BIT","VERSION_BITS","UH_BITS","PROTOCOL_BITS","PRIORITY_BITS","TTL_BITS","QT_OFFSET_BYTES","QT_LEN_BYTES","encodeSMF","w1","smf_version","smf_ttl","TR_TOPICNAME","LIGHT_QUEUE_NAME_OFFSET","pm_topic_len","LIGHT_TOPIC_NAME_OFFSET","pm_topic_offset","LIGHT_CORRELATION","LIGHT_ACK_IMMEDIATELY","MESSAGEPRIORITY","USERDATA","pm_username","USERNAME","pm_password","PASSWORD","RESPONSE","DELIVERY_MODE","ASSURED_MESSAGE_ID","ASSURED_PREVMESSAGE_ID","ASSURED_FLOWID","ASSURED_REDELIVERED_FLAG","AD_TIMETOLIVE","pm_ad_publisherMsgId","PUBLISHER_MSGID","MESSAGE_CONTENT_SUMMARY","extendedStreamContents","extendedUH","pm_oauth2_access_token","OAUTH2_ACCESS_TOKEN","pm_oidc_id_token","OIDC_ID_TOKEN","pm_oauth2_issuer_identifier","OAUTH2_ISSUER_IDENTIFIER","TS_TRANSPORT_CONTEXT","EXTENDED_TYPE_STREAM","encodedParams","hdrlen","msglen","setMessageSizes","setPayloadSize","kDone","kRun","jobs","job","binding","hostListDNSFilter","dns","dnsLookupPromise","resolved","errno","syscall","urls","promises","all","CacheRequestType","BULK_MSG","REGISTER_REQUEST","REGISTER_RESPONSE","HEARTBEAT_REQUEST","HEARTBEAT_RESPONSE","EVENT_NOTIFY","EVENT_ACK","ACTION_REQUEST","ACTION_RESPONSE","GET_REQUEST","GET_RESPONSE","GET_NEXT_REQUEST","GET_NEXT_RESPONSE","SET_REQUEST","SET_RESPONSE","GET_MSG_REQUEST","GET_MSG_RESPONSE","GET_NEXT_MSG_REQUEST","GET_NEXT_MSG_RESPONSE","UNREGISTER_IND","BULK_SET_REQUEST","BULK_SET_RESPONSE","PURGE_MSG_SEQUENCE_REQUEST","PURGE_MSG_SEQUENCE_RESPONSE","GET_MSG_SEQUENCE_REQUEST","GET_NEXT_MSG_SEQUENCE_REQUEST","GET_TOPIC_INFO_REQUEST","GET_TOPIC_INFO_RESPONSE","READY_MARKER","GET_TOPIC_INFO_REQUEST_RANGE","SYNC_READY_MARKER","VACUUM_REQUEST","VACUUM_RESPONSE","wasm","WebAssembly","Instance","Module","low","high","unsigned","ctz32","clz32","__isLong__","INT_CACHE","UINT_CACHE","fromInt","cachedObj","cache","fromBits","UZERO","TWO_PWR_64_DBL","MAX_UNSIGNED_VALUE","TWO_PWR_63_DBL","MIN_VALUE","neg","TWO_PWR_32_DBL","lowBits","highBits","pow_dbl","fromString","radix","radixToPower","power","mul","TWO_PWR_16_DBL","TWO_PWR_24","ONE","UONE","NEG_ONE","LongPrototype","toInt","isZero","isNegative","radixLong","div","rem1","remDiv","digits","getHighBits","getHighBitsUnsigned","getLowBits","getLowBitsUnsigned","getNumBitsAbs","bit","eqz","isPositive","isOdd","isEven","equals","other","notEquals","neq","ne","lessThan","comp","lessThanOrEqual","lte","greaterThan","gt","greaterThanOrEqual","ge","compare","thisNeg","otherNeg","negate","not","addend","a48","a32","a16","a00","b48","b32","b16","c48","c32","c16","c00","subtract","subtrahend","multiply","multiplier","b00","divide","divisor","approx","toUnsigned","shru","shr","shl","log2","delta","approxRes","approxRem","modulo","mod","countLeadingZeros","clz","countTrailingZeros","ctz","and","or","xor","shiftLeft","numBits","shiftRight","shiftRightUnsigned","shr_u","rotateLeft","rotl","rotateRight","rotr","toSigned","toBytes","toBytesLE","toBytesBE","hi","lo","fromBytes","fromBytesLE","fromBytesBE","MutableSessionProperty","SessionEventCBInfo","createSession","createFactory","messageCallbackInfo","eventCallbackInfo","ExitPoint","outerState","exitPointName","innerState","getDestState","typeDesc","validator","valInstance","typeInstance","typeInstanceDesc","valNotEmpty","valLength","valString","enumInstance","enumName","allowNull","valStringOrArray","valArrayIsMember","allowUndefined","allowEmpty","allowDuplicate","ele","valArrayOfString","valTopicString","typedesc","valTopicStringOrEmpty","CSPF","CSMP","PUBMSG","XMLLINK","WSE","SEMP","SUBCTRL","PUBCTRL","SMRP","SMF_IN_SMF","SMF_IN_RV","ADCTRL_PASSTHROUGH","TRANSPORT_PRIORITY","LINGER_OPTION","GRANTED_PERMISSIONS","NUM_MESSAGES_SPOOLED","PUBLISHER_FLAGS","APP_MSG_ID_TYPE","QUEUE_ENDPOINT_HASH","PAYLOAD","ENDPOINT_ID","ACK_SEQUENCE_NUMBER","ACK_RECONCILE_REQUEST","START_OF_ACK_RECONCILE","TIMESTAMP","MAX_DELIVERED_UNACKED_MESSAGES_PER_FLOW","SPOOLER_UNIQUE_ID","StateBase64","NO_ERROR","INVALID_SESSION_OPERATION","MESSAGE_VPN_NOT_ALLOWED","MESSAGE_VPN_UNAVAILABLE","CLIENT_USERNAME_IS_SHUTDOWN","DYNAMIC_CLIENTS_NOT_ALLOWED","CLIENT_NAME_ALREADY_IN_USE","CLIENT_NAME_INVALID","CLIENT_DELETE_IN_PROGRESS","TOO_MANY_CLIENTS","INVALID_VIRTUAL_ADDRESS","CLIENT_ACL_DENIED","SUBSCRIPTION_ACL_DENIED","PUBLISH_ACL_DENIED","PARAMETER_CONFLICT","OUT_OF_RESOURCES","TOPIC_MISSING","XML_PARSE_ERROR","SUBSCRIPTION_INVALID","SUBSCRIPTION_ERROR_OTHER","SUBSCRIPTION_TOO_MANY","SUBSCRIPTION_ATTRIBUTES_CONFLICT","DATA_ERROR_OTHER","INACTIVITY_TIMEOUT","UNKNOWN_TRANSPORT_SESSION_ID","AD_MESSAGING_NOT_SUPPORTED","CREATE_WEBSOCKET_FAILED","REPLICATION_IS_STANDBY","BASIC_AUTHENTICATION_IS_SHUTDOWN","CLIENT_CERTIFICATE_AUTHENTICATION_IS_SHUTDOWN","ALREADY_BOUND","INVALID_TOPIC_NAME_FOR_TOPIC_ENDPOINT","UNKNOWN_QUEUE_NAME","UNKNOWN_TOPIC_ENDPOINT_NAME","MAX_CLIENTS_FOR_QUEUE","MAX_CLIENTS_FOR_TE","UNEXPECTED_UNBIND","QUEUE_NOT_FOUND","SPOOL_OVER_QUOTA","QUEUE_SHUTDOWN","TOPIC_ENDPOINT_SHUTDOWN","NO_MORE_NON_DURABLE_QUEUE_OR_TOPIC_ENDPOINT","ENDPOINT_ALREADY_EXISTS","PERMISSION_NOT_ALLOWED","INVALID_SELECTOR","MAX_MESSAGE_USAGE_EXCEEDED","ENDPOINT_PROPERTY_MISMATCH","NO_SUBSCRIPTION_MATCH","SUBSCRIPTION_DOES_NOT_MATCH","SELECTOR_DOES_NOT_MATCH","INVALID_DTE_NAME","UNSUBSCRIBE_NOT_ALLOWED_CLIENTS_BOUND","CALLBACK_ERROR","NOLOCAL_DISCARD","GM_NOT_READY","LOW_PRIORITY_MSG_CONGESTION","QUOTA_OUT_OF_RANGE","REPLAY_NOT_SUPPORTED","REPLAY_DISABLED","CLIENT_INITIATED_REPLAY_NON_EXCLUSIVE_NOT_ALLOWED","CLIENT_INITIATED_REPLAY_INACTIVE_FLOW_NOT_ALLOWED","CLIENT_INITIATED_REPLAY_BROWSER_FLOW_NOT_ALLOWED","REPLAY_TEMPORARY_NOT_SUPPORTED","UNKNOWN_START_LOCATION_TYPE","REPLAY_CANCELLED","REPLAY_MESSAGE_UNAVAILABLE","REPLAY_START_TIME_NOT_AVAILABLE","REPLAY_MESSAGE_REJECTED","REPLAY_LOG_MODIFIED","MISMATCHED_ENDPOINT_ERROR_ID","OUT_OF_REPLAY_RESOURCES","TOPIC_OR_SELECTOR_MODIFIED_ON_DURABLE_TOPIC_ENDPOINT","REPLAY_FAILED","REPLAY_STARTED","SHARED_SUBSCRIPTIONS_NOT_ALLOWED","SHARED_SUBSCRIPTIONS_ENDPOINT_NOT_ALLOWED","REPLAY_START_MESSAGE_NOT_AVAILABLE","MESSAGE_ID_NOT_COMPARABLE","REPLAY_ANONYMOUS_QUEUE_NOT_SUPPORTED","PARTITIONED_QUEUE_BROWSING_NOT_SUPPORTED","PARTITIONED_QUEUE_SELECTORS_NOT_SUPPORTED","REPLAY_ANONYMOUS_QUEUE_WITHOUT_SUBSCRIPTIONS_NOT_SUPPORTED","SYNC_REPLICATION_INELIGIBLE","INVALID_QUEUE_OR_TOPIC_ENDPOINT_DURABILITY","INVALID_QUEUE_NAME","INVALID_TE_NAME","MESSAGE_SIZE_OUT_OF_RANGE","UNSUPPORTED_PERMISSIONS","MAX_ENDPOINTS_EXCEEDED","ASSURED_DELIVERY_NOT_READY","COPY_FROM_QUEUE_TEMPLATE_MISSING","COPY_FROM_TE_TEMPLATE_MISSING","_name","_bytes","_isValidated","_isWildcarded","_subscriptionInfo","valueOf","WebSocketCloseCodes","WebTransportsLib","lutTransportProtocols","StateStreamingAndBinary","useSSL","transport","downgradeTransport","TransportConstructor","switchState","newState","sessionEventCBFunction","SC","ROOT_MAPPING","AD_MAPPING","getSubcodeMappingInner","root","respErrorCode","codeMap","searchKey","foundKey","mapKey","getSubcodeMapping","ReplayStartLocationDate","_replayStartValue","createReplayStartLocationDate","dateTime","pairs","setValues","SUBSCRIPTION_LAYER_PARSER_FROM_TYPE","_layers","NOEXPORT_PREFIX","SHARE_PREFIX","shareGroup","groupIndex","LEVEL_DELIMETER_LEN","LEVEL_DELIMETER","dispatchTopicIndex","layers","parseLayers","constOffset","constResult","subscriptionStringParse","_isShare","_isNoExport","_dispatchTopicIndex","_shareGroup","parser","factoryState","initializeCount","initializers","factoryProps","initializer","_getInitializeCount","profiles","destType","destBytes","SDTFieldLib","_stream","_readPt","rewind","typeOrField","NotImplementedError","hexStringToUint8Array","traceContextSetter","_traceId","traceId","_spanId","spanId","_isSampled","isSampled","_traceState","traceState","_version","toClone","newContextSetter","_setSpanId","_setTraceId","_setSampled","getIsSampled","_setTraceState","getTraceState","_setVersion","getVersion","MAX_TRACE_STATE_LENGTH","getTruncatedTraceState","_standardTraceStateTruncation","traceStateLength","contentBuffer","offsetPos","contentBufferDataView","DataView","setUint8","traceId16byte","spanId8byte","setUint16","truncatedTraceState","traceStateLengthBytes","traceStateBytes","maxTraceStateLength","ignoredMembers","traceStateBuilderArray","traceStateBuilderArrayLength","listMembers","listMember","currentMemberLength","currentMember","isUtf8","_isValidUTF8","toStringTag","isValidUTF8","tokenChars","WS_NO_UTF_8_VALIDATE","EntryPoint","entryPointName","paramName","mustUnescape","isEscaping","inQuotes","token","BufferQueue","logPeekBuffer","bufPair","peekView","remaining","_rxDataCB","rxDataArrayBuffer","putSuccess","put","messageLen","msgBuffer","incomingMsg","advance","WINDOWED","NodeEventEmitter","NODE_DEFAULT_EVENTS","BLACKLIST_DIRECT","DISABLED_ACTIONS","ignore","fail","unsafe","bareEmit","_installDirectFilter","_installErrorHandlers","_installEmitVerifier","_listenerVerificationFilter","emitSet","emitArray","buildFilter","_emits","_defaultEmitDirect","emitDirect","_directEventName","_verifyListenerEvent","ret","_setEmitDirect","addListener","prependListener","prependOnceListener","directListenerCount","setOnFirstDirectListener","firstDirect","_onFirstDirectListener","onListener","throwInternal","emitBase","_internalError","formatErrorEvent","formattedName","innerEx","isDirect","disableEmitter","extraStringInfo","QueueType","QueueDescriptorValidator","TRANSPORT_FAIL","transportIn","WebTransportDown","WebTransportConnecting","WebTransportDestroying","_eventReason","attemptDowngrade","WebTransportUp","WebTransportDowngrading","notifyDowngradeFailed","tsEvent","TOPIC_ENDPOINT","ReplicationGroupMessageId","createMessage","createReplicationGroupMessageId","defaultComparator","astr","bstr","ArrayOperations","insertOrdered","element","comparator","inplaceInsertOrdered","Writable","_allowSynchronousEvents","_skipUTF8Validation","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_errored","_loop","startLoop","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","createError","compressed","haveLength","controlMessage","dataMessage","fragments","ErrorCtor","errorCode","TRANSPORT_PARSE_ERROR","SUBSCRIPTION_ERROR","SUBSCRIPTION_OK","REQUEST_ABORTED","REQUEST_TIMEOUT","PROPERTY_UPDATE_OK","UNSUBSCRIBE_TE_TOPIC_OK","UNSUBSCRIBE_TE_TOPIC_ERROR","PROVISION_ERROR","PROVISION_OK","sendXhrBinary","sendXhrText","arrayBufferToString","prependOrigin","WaitedToken","HadToken","ReturnedToken","base64Enc","streamProgressEvents","rxDataCb","connectionErrorCb","contentType","connectionClose","Options","_streamProgressBytes","_xhr","_rxDataCb","_connErrorCb","_reqActive","_REQCOUNTER","_REQBASE","_handleAbortedReq","attempt","maxRetry","open","onreadystatechange","xhrStateChange","sentdata","RS_LOADING","LOADING","RS_DONE","DONE","responseType","responseText","decodedData","statusText","responseTextLen","sentdataLen","responseTextDump","nextMaxRetry","isUsingBase64","onprogress","NONE","DefaultCapabilities","createDefaultCapabilities","assumedMaxAdSize","RMID_VERSION_1_PREFIX","validRmidHexRegex","spoolerUniqueId","effectiveMessageId","_suid","_messageId","otherReplicationGroupMessageId","oId","hexString","rgmidStr","rmidBufs","rmidHex","rmidBuffer","buflen","ConsumerFSM","MessageConsumerPropertiesValidator","localCounter","applyProperties","superFormatter","_active","endpointErrorId","partitionGroupId","_on","ACTIVE","_onFlowActive","INACTIVE","_onFlowDisconnected","_onFlowUp","_operationCheck","requestStartDispatchUser","requestStopDispatchUser","isAutoAcked","acceptMessage","UNBIND","getEndpointErrorId","active","_accessType","_emit","queueDiscardBehavior","_queueDiscardBehavior","_respectsTTL","_permissions","isActive","wantFlowChangeNotify","maxWindowSize","addSubscription","success","subCode","removeSubscription","apiEnv","envObject","SMFClientCtrlAuthType","strToInt8","strToInt16","strToInt32","BOOLEAN_CAPS_BITS","CLIENT_CAPS_VALUES","p2pParam","getParameter","P2PTOPIC","vpnParam","MSGVPNNAME","vridParam","VRIDNAME","getUserIdValue","userIdParam","USERID","capParam","ROUTER_CAPABILITIES","prmParseCapabilitiesValue","SOFTWAREVERSION","SOFTWAREDATE","PLATFORM","PHYSICALROUTERNAME","prmGetDtoPriorityValue","dto","local","network","prmParseDtoPriorityValue","strDtoPriority","strCapabilities","capsIn","CT","boolCapCount","capsByte","bitIndex","msbIndex","capsKey","capLen","sprop","compressedTLS","plaintextTLS","cc","isClientCert","userName","subscriberLocalPriority","subscriberNetworkPriority","DELIVERTOONEPRIORITY","vpnName","applicationDescription","CLIENTDESC","userIdentification","AUTHENTICATION_SCHEME","idToken","accessToken","issuerIdentifier","CLIENTNAME","clientName","mode","formattedDate","SSL_DOWNGRADE","clientCaps","clientCapList","highestCap","capBits","cap","clientCapsToStr","CLIENT_CAPABILITIES","keepaliveVal","KEEP_ALIVE_INTERVAL","UPDATE","CLIENT_DESCRIPTION","appdesc","CLIENT_NAME","validateClientName","strName","encodeResult","valTopicEndpointSubscription","isDurable","rawProperties","durable","SessionLib","CacheSessionSubscribeInfo","noOp","privateInterface","_validateProps","cacheName","maxAgeSec","maxMessages","timeoutMsec","_outstandingRequests","_outstandingIDs","_nextMessageCallbackInfo","_nextSessionEventCallbackInfo","_sessionIF","_connectToSession","getEventCBInfo","getMessageCBInfo","setMessageCBInfo","_handleMessage","setEventCBInfo","_createCompoundEventCB","nextDelegate","rfuObject","_handleSessionEvent","_processSessionEvent","cbUserObject","_sendToNextDelegate","_checkSubscriptionStatus","cacheSession","_getOutstandingRequest","correlationID","_handleSubscriptionSuccess","_handleSubscriptionError","requestIn","subscriptionWaiting","_startCacheRequest","_terminateRequest","_checkRequestCompletion","childRequests","timeoutHandle","replyReceived","parentRequest","_unregisterRequest","SUSPECT_DATA","dataReceived","liveDataFulfilled","LIVE_DATA_FULFILL","REQUEST_COMPLETE","NO_DATA","_sendSeeOther","cacheGetResult","clusterName","childRequest","requestID","liveDataAction","addChild","_registerRequest","startRequestTimeout","_handleCacheRequestTimeout","_sendGetNext","nextRequest","_relevantLiveData","clearRequestTimeout","streamField","ERROR_RESPONSE","_incStat","getRootRequest","INVALID_SESSION","_decodeMessageStream","exception","every","checkCID","_performLiveDataAction","queuedLiveData","_fulfillRequest","_trackCompletionStats","_notifyCallback","CACHE_SESSION_DISPOSED","sendCacheRequest","subscribe","cbInfo","_notifyCallbackError","matchingRequestKeys","conflictKeys","conflictRequest","REQUEST_ALREADY_IN_PROGRESS","waitingForSubscribeInfo","_subscriptionWaiting","_handleCacheRequestFailed","getRequestID","suppressClusters","cachePrefix","getSessionProperties","p2pInboxInUse","cacheMessageType","VERSION","REPLY_SIZE_LIMIT","includeOtherClusters","round","getCallback","innerMessage","SUSPECT","CACHED","cacheRequest","getUserObject","cacheCBFunction","_waitForSocketDrain","_waitForCompressorDrain","_socketDrained","_compressorDrained","_compressor","_decompressor","newUnderlyingTransoprt","onZlibError","stage2destroy","highWaterMark","sendCompressed","onCompressorDrain","unpipe","_hadError","RequestError","RequestEventCode","MessageDispatcher","emitter","autoAck","_dispatchOne","_dispatchOneAutoAck","_dispatchOneBare","_onFirstMessageListener","_availableListener","_flush","caught","RECONNECTED","OutstandingDataRequest","correlationId","replyReceivedCBFunction","reqFailedCBFunction","BIND","UNSUBSCRIBE","DELETE","TRANSACTIONCTRL","XACTRL","getUnderlyingTransport","_shuntableTransport","duplexOptions","tlsShutdownStage2","_clonedContextSetter","TRACE_ID_BYTES_LENGTH","SPAN_ID_BYTES_LENGTH","setVersion","setTraceId","setSpanId","setSampled","setTraceState","traceContextValue","traceContextBuffer","traceContextBytes","bytesRead","getUint8","traceId16Bytes","spanId8Bytes","getUint16","getCacheName","setCacheName","getMaxMessageAgeSec","setMaxMessageAgeSec","getMaxMessages","setMaxMessages","getTimeoutMsec","setTimeoutMsec","reactions","entryPoints","exitPoints","getEntryPointDestState","getExitPointDestState","appEntryFunc","appExitFunc","eventUnhandled","tsEventCode","_transportEventCode","transportEventCode","getResponseCode","setError","parseURLs","rawURLs","rawURL","HostInfo","waitTime","HostList","connectRetries","reconnectRetries","connectRetriesPerHost","reconnectRetryWaitInMsecs","connectTryCount","POSITIVE_INFINITY","reconnectTryCount","connectTryCountPerHost","_mutableState","succeeded","hostPointer","hostTries","listTries","exhausted","lastHostInfo","hostTriesMax","listTriesMax","isNewList","isNewHost","didJustFinishList","hostInfo","hostNumber","thenGen","doOp","elseFn","when","condition","unless","sendXhrBinaryMSIE10","overrideMimeType","setRequestHeader","sendXhrBinaryXHR2","connClose","SetOperations","_map","deleteField","ApplicationAckState","UNACKED","ACKED_NOT_SENT","ACKED_SENT","ApplicationAck","exists","ApplicationAckRingBuffer","_size","_insertIndex","insert","beforeEvictCallback","insertIndex","inserting","evicting","front","firstIndex","rawIndex","updateAckState","existing","createWebSocketStream","Server","WebSocketServer","PADDING","SUB_ID_LIST","GENERIC_ATTACHMENT","AD_FLOWREDELIVERED_FLAG","AD_TOPICSEQUENCE_NUMBER","AD_ACK_MESSAGE_ID","AD_SPOOLER_UNIQUE_ID","AD_REPL_MATE_ACK_MSGID","AD_REDELIVERY_COUNT","PARTITION_KEY_HASH","FactoryLib","solace","_internal","inplaceUnion","setA","setB","inplaceDifference","inplaceIntersection","isSuperset","subset","difference","intersection","union","TWO_ZEROES_STR","THREE_ZEROES_STR","FOUR_ZEROES_STR","BYTEARRAY_CONVERT_CHUNK","ARRAY_BUFFER_CONVERT_CHUNK","arrayBuf","uint8Array","int32","strToUInt32","ab","stringToArrayBuffer","uint8DataArray","padStart","int8","int16","int24","strToInt24","int64","strToUInt64","byteArrayToStr","byteArray","ucs2","utf8","decodeURIComponent","escape","base64Decode","parseSMFExtendedStream","streamLen","pUH","isSMFAvailable","readHeaderOnly","word1","headerLen","word3","paramByte1","prmUh","lwpType","lwpLen","lwpValueLen","parsedQueueOffsets","parseTopicQueueOffsets","parsedTopicOffsets","pStart","pType","pValueLen","pLen","parseResponseParam","parseDeliveryMode","contentSummary","parseContentSummary","TransportSessionStates","buildType","Superclass","superclassArgs","_sessionEventCode","errorSubCode","SUPERCLASS_FOR_SESSION_EVENT","SUPERCLASS_ARGS","sec","ck","TYPE_CACHE","TYPE_DESCRIPTION","DESINATION_TYPE_TO_DESCRIPTOR_TYPE","queueSpec","maybeAdaptFromDestination","_durable","PRINTABLE_LUT","showDecode","leftPadding","ascii","lineBytes","parseSMFStream","IGNORE","REJECT","_parameters","ALWAYS_OPS","flowProperties","emitterOptions","emitterOptionsFull","_disposing","_userDisconnected","_stats","_privateEventEmitter","clearStats","userDisconnected","_midDispatch","terminateWithRunningFSM","_setCanonical","acc","childIn","removeChild","childIndex","collapse","getCBInfo","getLiveDataAction","cacheSessionTimeoutCB","DEFAULT_REPLY_SIZE_LIMIT","MessageDumpStandardProviderLib","MessageDumpState","dumpProviders","providers","getOutOfRangeValue","rawData","sdtField","indent","strIndent","sdtStream","timeStamp","separator","colPadding","sb","theSeparator","needSeparator","theColPadding","provider","autoDecodeVarLengthNumber","elemType","lenBytes","elemLen","SUBCODE_FROM_EC","eventCode","_requestEventCode","superObj","numToHex","_allFlows","_reconnectingFlows","_flowsById","flowUp","flowDisposed","flowDown","matches","defineProperties","_canonical","enumValue","noneValue","unknownValue","isEnum","ofStrings","strings","ofNumbers","createFromSpec","ZERO_APP_ACK","_acknowledgeThreshold","_localPreferredWindowSize","_localMaxWindowSize","_hasAutoAckSupport","_messageDispatch","_resetRemoteConnectionState","_resetLocalConnectionState","_errorCausingReconnect","emitEventActionType","startDispatchActionType","stopDispatchActionType","postEventActions","preprocessPostEventActions","startIndex","actionLocations","cancelAction","firstActionName","cancellingActionName","firstLocation","processPostEventActions","preprocessedActions","requestStartDispatchFSM","addPostEventAction","newEvent","emitBindFailed","verifyNackSettlementOutcomesSupport","checkCapabilitiesChoicePoint","verifyEndpointSubscription","Unbound","CreateSent","BindSent","checkCapabilitiesChoicePointOnRebind","externalTransition","Reconnecting","RBindSent","_addEventToEmit","_requestStartDispatch","_requestStopDispatch","requestStopDispatchFSM","transitionToUnbound","_dispose","getCloseMessageConsumer","handleAccidentalBind","emitDisabledEvent","AwaitSessionUp","AwaitFlowOpen","emitBindWaiting","BindSentExtensions","sendBindRequest","transportAcks","_transportAcks","_endpointEnsure","_endpoint","subscription","_subscription","getOpenMessageConsumer","handleBindTimeout","handleBindResponse","cancelBindRequestTimer","bindRequestTimer","handleExpectedBind","partitionGroupIdValue","getPartitionGroupId","_clearPartitionGroupId","lastMsgIdAcked","getAccessType","topicEndpointBytes","getTopicEndpointBytes","grantedPermissions","getGrantedPermissions","allOthersPermissions","getAllOthersPermissions","getRespectsTTL","activeFlow","getWantFlowChangeNotify","getQueueDiscardBehavior","deliveryCountSent","getEndpointDeliveryCountSent","endpointId","getEndpointId","maxUnackedMessages","getMaxUnackedMessages","getSpoolerUniqueId","quota","getQuota","maxMsgSize","getMaxMsgSize","maxRedelivery","getMaxRedelivery","_remoteWindowSize","PROTOTOCOL_ERROR","respEvent","UnbindSent","FlowUp","RAwaitSessionUp","RAwaitTimer","emitRebindFailed","handleReconnectIntervalTimeout","cancelReconnectIntervalTimer","reconnectIntervalTimer","flowUpFSM","XferInactive","Xfer","transitionToUnboundFromUp","_sendAcks","sendUnbindRequest","_endpointClear","handleUnbindTimeout","handleUnbindResponse","sendCreateRequest","handleCreateTimeout","idstr","_fsmDispatch","messageSuid","ackResult","transportAckRequired","maxPendingAcks","_applicationAcks","_oldUnacked","_setTransportAckTimer","dupAckRanges","_sendAck","applicationAckRequired","messageOutcome","oldAckRanges","UNBOUND_AWAITING_FLOWOPEN","_userDispatch","applyStartDispatch","unbindAck","getUnbindAck","_clearTransportAckTimer","_transportAckTimer","_unacked","applicationAcks","transportAck","getAck","_addAckToRanges","acksPendingState","currentRange","ackRanges","allMessageOutcomes","currentRangeLength","totalRangeLen","MAX_CLIENT_ACK_RANGES","bareRanges","hasAnyBareRanges","forceTransportAck","failedBareRanges","rejectedBareRanges","g","ackRange","concatFrom","buf0","readUInt32BEFrag","bufList","listOffsetParam","byteIndexParam","listOffset","byteIndex","maxSize","_maxSize","oIndex","adaptData","createField","isSigned","readInt8","readInt16BE","longValue","field","_quotaMB","_maxMessageSize","_discardBehavior","_maxMessageRedelivery","createReplayStartLocationBeginning","MODE","FORMATTED_DATE","pad","SUMMARY","NOTIFY_SENDER_ON","NOTIFY_SENDER_OFF","READ_ONLY","CONSUME","MODIFY_TOPIC","cloneObj","STUB","generateLogHeader","levelStr","date","levelStrPadding","YY","MM","DD","hh","mm","ss","getMilliseconds","consoleIn","_trace","_debug","_info","_warn","_fatal","console","Function","SessionPropertiesValidator","isValidADTransport","SOLCLIENT_REQUEST_PREFIX","messageCallback","eventCallback","_sessionFSM","_messageCallbackInfo","wrapMessageCallback","_eventCallbackInfo","wrapEventCallback","_setUserIdentification","selectedProtocol","defaultList","transportProtocolDefaultList","sliceIndex","validForAD","_adDisabledReason","transportProtocols","invalid","_sessionStats","_outstandingDataReqs","_capabilities","_seqNum","allowOperation","stateName","isBooleanOrNothing","handleSubscriptionUpdateResponse","handleQueueSubscriptionUpdateResponse","unsubscribe","unsubscribeDurableTopicEndpoint","handleDTEUnsubscribeResponse","updateProperty","oldP2pTopicName","oldP2pTopic","newP2pTopicName","newP2pTopic","afterAddCallback","smpResp","resp","ignoreDuplicateSubscriptionError","afterRemoveCallback","ignoreSubscriptionNotFoundError","updateAuthenticationOnReconnect","authenticationProperties","allowedProperties","newProps","_failOnExtendedVariableLengthProperties","validateAndSendMessage","sendRequest","requestFailedCBFunction","isFunctionOrNothing","replyToTopic","enqueueOutstandingDataReq","sendReply","messageToReplyTo","replyMessage","getSessionState","_setWebTransportProtocolInUse","capabilityType","sessionStateName","getFSMState","WAITING_FOR_SESSION_UP","WAITING_FOR_P2PINBOX_REG","createCacheSession","ignoreExists","queueDescriptor2","handleProvisionResponse","ignoreMissing","provision","getQueueNameBytes","getDurability","provisionEvent","browserProperties","destinationType","vrn","localName","operationEnum","allow","NEW","routerCapabilities","sendDest","senderTimestamp","noSenderTimestamp","generateSendTimestamps","sequenceNumber","noSequenceNumber","generateSequenceNumber","senderId","noSenderId","includeSenderId","reqFailedCb","replyRecvdCb","requestEvent","cancelOutstandingDataReq","dataReq","dataMessageIn","generateReceiveTimestamps","adCtrlMessage","eventCBInfo","messageCBInfo","rfu","buildErrorEvent","createTopic","createDurableQueueDestination","NodeSslConstants","DEFAULT_CIPHER_SUITES","SUPPORTED_CIPHER_SUITES","SessionPropertiesBase","_tpProtocol","_transportProtocolList","_tpDowngradeTimeout","transportProtocolInUse","_tpProtocolInUse","_setTransportProtocolInUse","webTransportProtocolInUse","_tpContentType","_sslExcludedProtocols","_tlsMinProtocol","_tlsMaxProtocol","_sslCipherSuites","_sslValidateCert","NODE_TLS_REJECT_UNAUTHORIZED","_sslTrustStores","_sslTrustedCNList","_sslPfx","_sslPfxPasswd","_sslPrivateKey","_sslPrivateKeyPasswd","_sslCertificate","sslProtocol","_sslProtocol","_sslConnectionDowngradeTo","_lendsInspect","_vpnNameInUse","_virtualRouterName","_p2pInboxInUse","_p2pInboxBase","_userIdentification","_publisherProperties","_payloadCompressionLevel","makeDefaults","_authScheme","_accessToken","_idToken","_issuerIdentifier","_password","_userName","_clientName","_appDesc","_vpnName","vpnNameInUse","defaultConnectTimeoutInMsecs","transportCount","connectDowngradeDefault","_connectRetries","_connectRetriesPerHost","_reconnectRetryWaitInMsecs","_genSendTimestamps","_genReceiveTimestamps","_includeSenderId","_genSequenceNumber","_kaInterval","_kaIntervalsLimit","_subLocalPriority","_subNetworkPriority","_ignoreDupSubError","_ignoreSubNotFoundError","_reapplySubcriptions","_readTimeout","_assumedMaxAdSize","_maxWebPayload","nonHTTPTransportPropsSet","BRIDGE_MSG_VPN_NAME","BRIDGE_ROUTER_NAME","BRIDGE_VERSION","CONNECTION_TYPE","ROUTER_CAPABILITIES_EXTENDED","REQUIRES_RELEASE_7","KEY_STR","ENC_LUT","DecodeError","LegacyEncoder","base64_encode","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","base64_decode","isNode","hasBuffer","BufferEncoder","WindowEncoder","SessionPropertiesLib","ALLOWED_PROTOCOLS","valClientName","valIsMemberIgnoreCase","allowFalsy","valSslExcludedProtocols","prtcl","valSslCipherSuites","ciphers","valSslTrustedCommonNameList","valUrlList","valArray","validatePropsSupportedByTransport","nonHttpPropsSet","isHttpTransport","propNames","regex","arrayLength","currententry","matchUrl","sslPfxSet","sslPrivateKeySet","sslCertSet","recommendedMin","connectTimeout","smfmessage","getEventText","_eventText","ttl","smf_msgLen","smf_tqd","unknownProtoFlag","bUInt8","bUInt16BE","bUInt32BE","bUInt64BE","EndpointTypeToParam","QueueDescriptorTypeToParam","QUEUE_PERMISSIONS_TO_BITS","ACCESS_TYPE_INT_TO_ENUM","ACCESS_TYPE_ENUM_TO_BITS","DUARBILITY_INT_TO_BOOL","DISCARD_ENUM_TO_VALUE","addQueueProperties","skipAccessType","_readParameter","bufMethod","masked","getLastMsgIdReceived","endpointTypeParam","lastMsgIdSent","adMsg","topicSubscription","wantFlowChangeUpdate","lastMsgIdReceived","hasNackSupport","endpointBytes","endpointType","rsValue","lastMessageIdAcked","applicationAckRanges","allOutcomes","errorText","curMask","msgFlags","queueLength","subsLength","MyWebSocket","createWebSocketOptions","onDrainCallback","Agent","keepAlive","wsAgent","origCreateConnection","adaptURL","msgBuf","maybeEmitCanSend","maybeEmitFlush","onBufferedAmountPoll","scheduleQuery","WAITING_FOR_CONNECT","onMessage","_socketOptions","ondrain","bufferAllow","maxPayloadBytes","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}